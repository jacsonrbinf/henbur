"f.bug_id","bug_fix_days_count","c.author","commit_message","f.summary","summary_stemmed","f.description","description_stemmed","m.Name","m.AvgCyclomatic","m.AvgCyclomaticModified","m.AvgCyclomaticStrict","m.AvgEssential","m.AvgLine","m.AvgLineBlank","m.AvgLineCode","m.AvgLineComment","m.CountDeclClass","m.CountDeclClassMethod","m.CountDeclClassVariable","m.CountDeclExecutableUnit","m.CountDeclFunction","m.CountDeclInstanceMethod","m.CountDeclInstanceVariable","m.CountDeclMethod","m.CountDeclMethodDefault","m.CountDeclMethodPrivate","m.CountDeclMethodProtected","m.CountDeclMethodPublic","m.CountLine","m.CountLineBlank","m.CountLineCode","m.CountLineCodeDecl","m.CountLineCodeExe","m.CountLineComment","m.CountSemicolon","m.CountStmt","m.CountStmtDecl","m.CountStmtExe","m.MaxCyclomatic","m.MaxCyclomaticModified","m.MaxCyclomaticStrict","m.MaxEssential","m.MaxNesting","m.RatioCommentToCode","m.SumCyclomatic","m.SumCyclomaticModified","m.SumCyclomaticStrict","m.SumEssential","d.Severity"
"10526","3083","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=10526 Add alwaysUseSession option to authenticators","Bug 10526  Authenticators do not always cache the Principal","authent alway cach princip","Once a user is authenticated a Principal object is supposed to be cached for 
the duration of the user's session. This is especially important when using 
JDBCRealm or JNDIRealm to reduce the load on external authentication services.

Most authenticators (BasicAuthenticator, SSLAuthenticator and 
DigestAuthenticator) call AuthenticatorBase.register()to cache the Principal. 
However register() does nothing if a session object does not already exist, so 
caching does not occur when the application does not create a session object 
itself. The problem can be seen by setting a security constraint on tomcat-docs 
and then browsing the Tomcat documentation - the external authentication 
service is hit on every request.

The problem does not occur with form based login, because FormAuthenticator 
caches the Principal itself and creates a new session if necessary to do it.

Probably the best fix would be to change AuthenticatorBase.register() to create 
a new session by calling getSession(request, true) instead of getSession
(request, false). However, perhaps there is a reason why this is not being 
done - though if so I cannot see what it is.

An alternative is to change the concrete authentication classes to make sure a 
session exists before calling register(), e.g.

--- BasicAuthenticator.java     23 Mar 2002 17:52:16 -0000      1.12
+++ BasicAuthenticator.java     6 Jul 2002 12:46:30 -0000
@@ -160,6 +160,7 @@
         String password = parsePassword(authorization);
         principal = context.getRealm().authenticate(username, password);
         if (principal != null) {
+           Session session = getSession(request, true);
             register(request, response, principal, Constants.BASIC_METHOD,
                      username, password);
             return (true);

Similar patches would be required for SSLAuthenticator and DigestAuthenticator 
of course.","user authent princip object suppos cach durat user session especi import use realm jdbcrealm realm jndirealm reduc load extern authent servic authent basic authent basicauthent authent sslauthent digest authent digestauthent call authent base authenticatorbas regist cach princip howev regist noth session object alreadi exist cach occur applic creat session object problem seen set secur constraint tomcat doc tomcatdoc brows tomcat document extern authent servic hit everi request problem occur form base login form authent formauthent cach princip creat new session necessari probabl best fix would chang authent base authenticatorbas regist creat new session call get session getsess request true instead get session getsess request fals howev perhap reason done though cannot see altern chang concret authent class make sure session exist call regist basic authent basicauthent java mar basic authent basicauthent java jul string password pars password parsepassword author princip context get realm getrealm authent usernam password princip null session session get session getsess request true regist request respons princip constant basic method usernam password return true similar patch would requir authent sslauthent digest authent digestauthent cours","""java/org/apache/catalina/authenticator/AuthenticatorBase.java""","2","2","3","1","19","2","10","6","1","0","8","29","31","31","11","31","0","0","6","25","845","154","368","123","216","325","172","256","101","155","29","29","33","8","5","1","83","83","92","42","enhancement"
"10972","3071","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=10972 Improve error message if the className attribute is missing on an element in server.xml where it is required.","Bug 10972  <Realm> without className in server.xml produces NullPointerException","realm without class name classnam server xml produc null pointer except nullpointerexcept","If the className attribute is not included with the <Realm> tag in server.xml, 
the server dies with a cryptic NullPointerException.  It would be nice if it 
produced a more meaningful error message (like ""Missing className attribute for 
<Realm> tag"").","class name classnam attribut includ realm tag server xml server cryptic null pointer except nullpointerexcept would nice produc meaning error messag like miss class name classnam attribut realm tag","""java/org/apache/catalina/startup/Catalina.java""","2","2","3","1","19","2","14","2","3","0","2","33","33","33","10","33","0","0","9","24","869","176","520","121","366","178","252","351","113","238","13","13","15","10","3","0","96","96","100","44","enhancement"
"10972","3071","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=10972 Improve error message if the className attribute is missing on an element in server.xml where it is required.","Bug 10972  <Realm> without className in server.xml produces NullPointerException","realm without class name classnam server xml produc null pointer except nullpointerexcept","If the className attribute is not included with the <Realm> tag in server.xml, 
the server dies with a cryptic NullPointerException.  It would be nice if it 
produced a more meaningful error message (like ""Missing className attribute for 
<Realm> tag"").","class name classnam attribut includ realm tag server xml server cryptic null pointer except nullpointerexcept would nice produc meaning error messag like miss class name classnam attribut realm tag","""java/org/apache/tomcat/util/digester/Digester.java""","1","1","1","1","17","2","7","8","2","0","2","125","125","125","31","125","1","2","2","120","2786","568","1046","321","570","1178","414","649","243","406","18","18","20","4","4","1","233","233","240","142","enhancement"
"10972","3071","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=10972 Improve error message if the className attribute is missing on an element in server.xml where it is required.","Bug 10972  <Realm> without className in server.xml produces NullPointerException","realm without class name classnam server xml produc null pointer except nullpointerexcept","If the className attribute is not included with the <Realm> tag in server.xml, 
the server dies with a cryptic NullPointerException.  It would be nice if it 
produced a more meaningful error message (like ""Missing className attribute for 
<Realm> tag"").","class name classnam attribut includ realm tag server xml server cryptic null pointer except nullpointerexcept would nice produc meaning error messag like miss class name classnam attribut realm tag","""java/org/apache/tomcat/util/digester/ObjectCreateRule.java""","1","1","1","1","16","2","6","7","1","0","0","7","7","7","2","7","0","0","0","7","185","47","57","24","29","81","25","37","18","19","4","4","4","1","2","1","11","11","11","7","enhancement"
"11117","1994","Filip Hanik","fix regression for bug 11117 while maintaining the no need to proceed and block for comet connections that handle chunked input","Bug 11117  Coyote connector does not correctly deal with large PUT when using chunked transfer encoding","coyot connector correctli deal larg put use chunk transfer encod","I've built a small test servlet (included below) that shows this behaviour.

If I upload data to tomcat (configured to use the HTTP/1.1 Coyote connector)
using a chunked transfer-encoding on a PUT, then the result (i.e. what I read
using the servlet's request.getInputStream() is corrupted.

This _only_ happens on large PUTs (it happens every time I tried it (about 10)
on a large PUT - I was testing with something around 700 kB, and another thing
of about 1 MB, but does NOT always corrupt it in the same way. I did not see any
corruption on small files (~50 kB and smaller), though I didn't test this
extensively.

The total length of the data read is exactly correct (712080 bytes in my first
test). At the first point of corruption in the file, a chunk header appears in
the output (""\r\n1000\r\n"") followed by correct data from about 700 bytes later
on, then a second copy (in the correct place, I think) of the corrupt data (i.e.
correct data, followed by the chunk header, followed by some data repeated, the
second instance of which is in the correct place - so the first instance is
being produced _instead_ of the correct data for that point in the input).

Test servlet follows:

import java.io.*;

import javax.servlet.*;
import javax.servlet.http.*;

public class Test extends HttpServlet
{

    public void doPut(HttpServletRequest req, HttpServletResponse res)
                throws ServletException, IOException
    {
        FileOutputStream fos = new FileOutputStream(""/tmp/servlet-out"");

        InputStream is = req.getInputStream();

        byte buf[] = new byte[2000];
        int ret;

        while((ret = is.read(buf)) > 0) {
            fos.write(buf, 0, ret);
        }

        fos.close();
        is.close();

        PrintWriter pw = res.getWriter();
        pw.println(""Done"");
        pw.flush();
        pw.close();
    }
}","built small servlet includ show behaviour upload data tomcat configur use http coyot connector use chunk transfer encod transferencod put result read use servlet request get input stream getinputstream corrupt happen larg put happen everi time tri larg put test someth around kb anoth thing mb alway corrupt way see corrupt small file kb smaller though didn extens total length data read exactli correct byte first first point corrupt file chunk header appear output n1000 follow correct data byte later second copi correct place think corrupt data correct data follow chunk header follow data repeat second instanc correct place first instanc produc instead correct data point input servlet follow import java import javax servlet import javax servlet http public class extend http servlet httpservlet public void do put doput http servlet request httpservletrequest req http servlet respons httpservletrespons re throw servlet except servletexcept except ioexcept file output stream fileoutputstream fo new file output stream fileoutputstream tmp servlet out servletout input stream inputstream req get input stream getinputstream byte buf new byte int ret ret read buf fo write buf ret fo close close print writer printwrit pw re get writer getwrit pw println done pw flush pw close","""java/org/apache/coyote/http11/filters/ChunkedInputFilter.java""","3","3","3","2","19","3","11","4","1","0","2","11","11","11","8","11","0","0","4","7","350","96","147","44","92","108","74","110","37","73","12","12","12","11","3","1","35","35","35","24","major"
"13731","2982","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=13731 Make variables in <code>_jspService()</code> method final where possible.","Bug 13731  Final request, response, session and other variables.","final request respons session variabl","Provide a capability to declare request, response, session and other variables 
in jspService function as final. As tunable feature, just like others, in 
tomcat`s web.xml file.

Why need this feature? To use request, response, session variables in anonymous 
implementations of classes. For example - declaration of iterator through 
elements, which includes some other JSP file (statically). And usage of this 
iterator in other JSP file.","provid capabl declar request respons session variabl jsp servic jspservic function final tunabl featur like other tomcat web xml file need featur use request respons session variabl anonym implement class exampl declar iter element includ jsp file static usag iter jsp file","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","36","3","27","5","12","6","5","111","111","105","47","111","11","50","0","50","4258","512","3036","528","2351","737","1837","2334","487","1847","22","22","30","20","5","0","499","493","554","209","enhancement"
"15688","2937","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=15688 Use fully qualified class names to avoid possible naming conflicts JSP 2.2 TCK passes with these changes","Bug 15688  full-qualified names instead of imports","full qualifi fullqualifi name instead import","Hi,

Jasper generated *.java-files that are compiled.
The template for those files is very ""unaesthetic"".

I could demonstrate nice side-effects using a simple
  <%@ page import=""mypackage.Jspfactory"" %>

You should use full qualified names instead of a bunch of import-staments.
For example
  _jspxFactory = JspFactory.getDefaultFactory();
would become
  _jspxFactory = javax.servlet.jsp.JspFactory.getDefaultFactory();
and if you don't already do,
you should use the this-reference where possible.

I don't know what the spec says about that conflict, but it shouldn't be a bad
idea to use full-qualified names instead of imports.","hi jasper gener java file javafil compil templat file unaesthet could demonstr nice side effect sideeffect use simpl page import mypackag jspfactori use full qualifi name instead bunch import stament importsta exampl jspx factori jspxfactori jsp factori jspfactori get default factori getdefaultfactori would becom jspx factori jspxfactori javax servlet jsp jsp factori jspfactori get default factori getdefaultfactori alreadi use thi refer thisrefer possibl know spec say conflict shouldn bad idea use full qualifi fullqualifi name instead import","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","36","3","27","5","12","6","5","111","111","105","47","111","11","50","0","50","4224","508","3008","527","2323","735","1838","2335","487","1848","22","22","30","20","5","0","499","493","554","209","enhancement"
"15688","2937","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=15688 Use fully qualified class names to avoid possible naming conflicts JSP 2.2 TCK passes with these changes","Bug 15688  full-qualified names instead of imports","full qualifi fullqualifi name instead import","Hi,

Jasper generated *.java-files that are compiled.
The template for those files is very ""unaesthetic"".

I could demonstrate nice side-effects using a simple
  <%@ page import=""mypackage.Jspfactory"" %>

You should use full qualified names instead of a bunch of import-staments.
For example
  _jspxFactory = JspFactory.getDefaultFactory();
would become
  _jspxFactory = javax.servlet.jsp.JspFactory.getDefaultFactory();
and if you don't already do,
you should use the this-reference where possible.

I don't know what the spec says about that conflict, but it shouldn't be a bad
idea to use full-qualified names instead of imports.","hi jasper gener java file javafil compil templat file unaesthet could demonstr nice side effect sideeffect use simpl page import mypackag jspfactori use full qualifi name instead bunch import stament importsta exampl jspx factori jspxfactori jsp factori jspfactori get default factori getdefaultfactori would becom jspx factori jspxfactori javax servlet jsp jsp factori jspfactori get default factori getdefaultfactori alreadi use thi refer thisrefer possibl know spec say conflict shouldn bad idea use full qualifi fullqualifi name instead import","""java/org/apache/jasper/compiler/JspUtil.java""","4","4","4","2","21","1","16","4","2","36","6","38","38","2","2","38","2","2","0","34","937","86","646","144","452","205","305","461","129","332","17","17","18","11","4","0","164","156","188","89","enhancement"
"18462","2847","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=18462 Don't merge stdout and stderr internally","Bug 18462  System.err gets overriden to output to System.out","system err get overriden output system","I am using Eclipse to do my development and I am running tomcat 4.1.24 from 
within eclipse. One of the nice features of eclipse is that anything you 
display with System.out comes out in blue and anything you send to System.err 
is displayed in red. However when tomcat is running Catalina overrides 
System.err and makes it point to System.out. This is very inconvinient because 
its much harder to search for severe error messages in a list of millions of 
trivial ones.","use develop run tomcat within one nice featur anyth display system come blue anyth send system err display red howev tomcat run catalina overrid system err make point system inconvini much harder search sever error messag list million trivial one","""java/org/apache/catalina/startup/Catalina.java""","2","2","3","1","19","2","14","2","3","0","2","33","33","33","10","33","0","0","9","24","873","176","524","122","369","178","255","354","114","240","13","13","15","10","3","0","97","97","101","45","enhancement"
"18462","2847","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=18462 Don't merge stdout and stderr internally","Bug 18462  System.err gets overriden to output to System.out","system err get overriden output system","I am using Eclipse to do my development and I am running tomcat 4.1.24 from 
within eclipse. One of the nice features of eclipse is that anything you 
display with System.out comes out in blue and anything you send to System.err 
is displayed in red. However when tomcat is running Catalina overrides 
System.err and makes it point to System.out. This is very inconvinient because 
its much harder to search for severe error messages in a list of millions of 
trivial ones.","use develop run tomcat within one nice featur anyth display system come blue anyth send system err display red howev tomcat run catalina overrid system err make point system inconvini much harder search sever error messag list million trivial one","""java/org/apache/catalina/startup/Embedded.java""","3","3","3","1","18","2","10","5","1","0","3","38","38","38","7","38","0","0","6","32","988","196","456","127","283","337","234","350","124","226","15","15","15","8","4","1","117","117","119","55","enhancement"
"18797","2837","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=18797 Provide null/zero-length protection","Bug 18797  MemoryUserRule doesn't validate user attributes","memori user rule memoryuserrul doesn valid user attribut","The implementation of org.apache.catalina.realm.MemoryRuleSet.begin dosen't 
validate the attribute values before adding a user to the MemoryRealm. If 
username or name are not present then a null username is used which can cause 
odd problems later on.

Basically the method should check that parameters passed to MemoryRealm.addUser 
are not null before calling the method.","implement apach catalina realm memori rule set memoryruleset begin dosen valid attribut valu ad user memori realm memoryrealm usernam name present null usernam use caus odd problem later basic method check paramet pass memori realm memoryrealm add user addus null call method","""java/org/apache/catalina/users/MemoryUserDatabase.java""","2","2","2","1","15","1","10","3","4","0","2","37","37","37","14","37","1","0","0","36","817","181","438","125","272","199","208","308","122","186","16","16","16","3","4","0","80","80","82","39","enhancement"
"19444","2855","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=19444 Add an option to the JNDI realm to allow role searches to be performed by the authenticated user.","Bug 19444  JNDI Authentication roles must be anonymous accessible","jndi authent role must anonym access","It appears that for the JNDIRealm to be able to locate roles, they must be 
anonymous accessible. I believe that for security purposes this should not be 
necessary if we are validating the user by binding to the directory. In that 
case the roles could be accessible to any bound user or that particular user. I 
discussed this very briefly on the Tomcat user list. It sounds like this had 
been discussed previously and for whatever reason, the idea rejected. Anyhow I 
submit that there is a bug, either in the code - which requires the roles to be 
anonymous, or in the documentation which does not make it clear that this is 
the case (at least in ""Tomcat 4 Servlet/JSP Container - Realm Configuration HOW-
TO). It seems reasonable to me that if we are binding to the directory to 
authenticate, we would have that user's access to roles. Perhaps the 
documentation should more explicetly state that this is not the case.

In the hope that it would be accepted as an enhancement, I am going to attempt 
to attach a modified JNDIRealm that uses the authenticated connection to obtain 
the roles.

Thank You,
Art","appear realm jndirealm abl locat role must anonym access believ secur purpos necessari valid user bind directori case role could access bound user particular user discuss briefli tomcat user list sound like discuss previous whatev reason idea reject anyhow submit either code requir role anonym document make clear case least tomcat servlet jsp contain realm configur seem reason bind directori authent would user access role perhap document explicetli state case hope would accept enhanc go attempt attach modifi realm jndirealm us authent connect obtain role thank art","""java/org/apache/catalina/realm/JNDIRealm.java""","2","2","3","1","20","3","10","6","2","0","3","85","85","85","35","85","0","4","23","58","2308","490","971","298","628","850","471","706","255","451","28","28","33","14","7","1","236","232","260","132","enhancement"
"21157","2751","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=21157 Write cookie before response might be committed","Bug 21157  CookieExample is setting cookie after writing data","cooki exampl cookieexampl set cooki write data","A servlet can not set the headers and cookies after writing data to the 
servlet's output stream. Once the servlet writes data, headers are committed. 
However CookieExample writes some data first before doing addCookie on the 
response. 

The reason why this code works at all even with the above bug is: The 
CookieExample is only writing a small amount of data before doing 
response.addCookie. That data is still held in buffer and not yet sent over 
the wire. Hence the headers are not yet committed. So it is pure luck that 
this example works. 

You can easily expose the bug by writing say 20K characters in this example 
before response.addCookie is called. You will see that the cookies that are 
adding to response are not actually sent back to client. 

Fix is simple. Move up the response.addCookie() before response.getWriter()","servlet set header cooki write data servlet output stream servlet write data header commit howev cooki exampl cookieexampl write data first add cooki addcooki respons reason code work even cooki exampl cookieexampl write small amount data respons add cooki addcooki data still held buffer yet sent wire henc header yet commit pure luck exampl work easili expos write say 20 20k charact exampl respons add cooki addcooki call see cooki ad respons actual sent back client fix simpl move respons add cooki addcooki respons get writer getwrit","""webapps/examples/WEB-INF/classes/CookieExample.java""","2","2","3","1","39","5","32","2","1","0","2","2","2","2","0","2","0","0","0","2","130","23","79","27","53","28","53","59","22","37","4","4","6","1","2","0","5","5","7","2","enhancement"
"21669","2777","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=21669 Add the ability to specify the roleBase for the JNDI Realm as relative to the users DN. Based on a patch by Art W.","Bug 21669  JNDIRealm roleBase pattern enahncement","realm jndirealm role base rolebas pattern enahnc","Currently the roleBase attribute must be a fxed location in the directory. A 
simple change would allow the role base to be specified relative to the user 
DN. My enhancement suggestion would change the roleBase definition as follows:

roleBase - the base entry for the role search. If not specified, the search 
base is the top level directory context. If specified it may optionally include 
pattern replacements ""{0}""..""{n}"" corrosponding to the name parts of the user's 
distinguished name (as returned by javax.naming.Name.get()).

For example, in the <Realm> defintion in server.xml you could specify the 
roleBase as:

    roleBase=""ou=Groups,{1},{0}""

The majority of the code to accomplish this would be in JNDIRealm.getRoles() 
and could look like this:

	String base = null;
	if ( roleBaseFormat != null )
	{
		NameParser np = context.getNameParser("""");
		Name name = np.parse(dn);
		String nameParts[] = new String[name.size()];
		for ( int idx = 0 ; idx < name.size() ; idx++ )
			nameParts[idx] = name.get(idx);
       	base = roleBaseFormat.format(nameParts);
	}

        // Perform the configured search and process the results
        if (debug >= 3) {
            log(""  Searching role base '"" + base + ""' for attribute '"" +
                roleName + ""'"");
            log(""  With filter expression '"" + filter + ""'"");
        }
        NamingEnumeration results =
            context.search(base, filter, controls);

Thank You,
Art","current role base rolebas attribut must fxed locat directori simpl chang would allow role base specifi rel user dn enhanc suggest would chang role base rolebas definit follow role base rolebas base entri role search specifi search base top level directori context specifi may option includ pattern replac corrospond name part user distinguish name return javax name name get exampl realm defint server xml could specifi role base rolebas role base rolebas group major code accomplish would realm jndirealm get role getrol could look like string base null role base format rolebaseformat null name parser namepars np context get name parser getnamepars name name np pars dn string name part namepart new string name size int idx idx name size idx name part namepart idx name get idx base role base format rolebaseformat format name part namepart perform configur search process result debug log search role base base attribut role name rolenam log filter express filter name enumer namingenumer result context search base filter control thank art","""java/org/apache/catalina/realm/JNDIRealm.java""","2","2","3","1","20","3","10","6","2","0","3","85","85","85","36","85","0","4","23","58","2325","491","981","298","636","856","475","713","256","457","30","30","35","14","7","1","238","234","262","132","enhancement"
"25060","2657","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=25060 When stopping naming resources look for DataSource resources with a zero-arg close() method and call it if one is found Works with Commons DBCP.","Bug 25060  Reloading context orphans currently open jndi datasource connections","reload context orphan current open jndi datasourc connect","I fiddled around with this a while and have determined to the best of my ability
that this is a real bug.  I have a jndi datasource connected to a postgresql
server.  I have two jndi resources (a reader and writer) so that later I can
implement a system with replication etc and deal with writes and reads to
different connections.  To summarize, after using the system, there are two
connections to postgres that get reused -- one reader and writer.  Under load,
this number increases and will slowly go back down.  I usually end up with two
idle connections (one reader and one writer) left under no load.  If you reload
the context where the datasource is at (it's a context specific datasource), the
number of connections will jump by two when used.  Each reload produces 2 more
connections min until I restart the server.  It appears that after a reload, the
'persisted connections' get abandoned / orphaned.  Eventually, I hit my max
connections and cannot aquire any more and the system fails.  I have tried the
abandond collection parameters and have added debug logging to my code to ensure
that I am indeed calling close on the connections I checkout, even on exceptions
and error cases.  Under normal useage without reloads, no connection leakage
happens.

This is on a solaris 8 machine with the 4.1.27-hotfix-22096.tar.gz applied.  Let
me know if more information is required.  I have this in a development
environment and can let somone attach in jdb and hammer on the thing since it's
not a production system -- if that will help in getting a repro.

Wayne","fiddl around determin best abil real jndi datasourc connect postgresql server two jndi resourc reader writer later implement system replic etc deal write read differ connect summar use system two connect postgr get reus one reader writer load number increas slowli go back usual two idl connect one reader one writer left load reload context datasourc context specif datasourc number connect jump two use reload produc connect restart server appear reload persist connect get abandon orphan eventu hit max connect cannot aquir system fail tri abandond collect paramet ad debug log code ensur inde call close connect checkout even except error case normal useag without reload connect leakag happen solari machin 27 hotfix 27hotfix tar gz appli let know inform requir develop environ let somon attach jdb hammer thing sinc product system help get repro wayn","""java/org/apache/catalina/deploy/NamingResources.java""","2","2","2","1","16","2","9","4","1","0","3","47","47","47","13","47","0","1","6","40","1019","229","514","124","300","276","197","334","111","223","9","9","9","7","4","1","98","98","98","55","enhancement"
"25060","2657","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=25060 When stopping naming resources look for DataSource resources with a zero-arg close() method and call it if one is found Works with Commons DBCP.","Bug 25060  Reloading context orphans currently open jndi datasource connections","reload context orphan current open jndi datasourc connect","I fiddled around with this a while and have determined to the best of my ability
that this is a real bug.  I have a jndi datasource connected to a postgresql
server.  I have two jndi resources (a reader and writer) so that later I can
implement a system with replication etc and deal with writes and reads to
different connections.  To summarize, after using the system, there are two
connections to postgres that get reused -- one reader and writer.  Under load,
this number increases and will slowly go back down.  I usually end up with two
idle connections (one reader and one writer) left under no load.  If you reload
the context where the datasource is at (it's a context specific datasource), the
number of connections will jump by two when used.  Each reload produces 2 more
connections min until I restart the server.  It appears that after a reload, the
'persisted connections' get abandoned / orphaned.  Eventually, I hit my max
connections and cannot aquire any more and the system fails.  I have tried the
abandond collection parameters and have added debug logging to my code to ensure
that I am indeed calling close on the connections I checkout, even on exceptions
and error cases.  Under normal useage without reloads, no connection leakage
happens.

This is on a solaris 8 machine with the 4.1.27-hotfix-22096.tar.gz applied.  Let
me know if more information is required.  I have this in a development
environment and can let somone attach in jdb and hammer on the thing since it's
not a production system -- if that will help in getting a repro.

Wayne","fiddl around determin best abil real jndi datasourc connect postgresql server two jndi resourc reader writer later implement system replic etc deal write read differ connect summar use system two connect postgr get reus one reader writer load number increas slowli go back usual two idl connect one reader one writer left load reload context datasourc context specif datasourc number connect jump two use reload produc connect restart server appear reload persist connect get abandon orphan eventu hit max connect cannot aquir system fail tri abandond collect paramet ad debug log code ensur inde call close connect checkout even except error case normal useag without reload connect leakag happen solari machin 27 hotfix 27hotfix tar gz appli let know inform requir develop environ let somon attach jdb hammer thing sinc product system help get repro wayn","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","6","0","3","304","304","304","123","304","0","11","11","282","6473","1288","3330","1018","2014","1860","1483","2277","848","1429","54","54","69","9","5","1","698","698","756","394","enhancement"
"26701","2585","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=26701 Provide a mechanism for users to register their own URLStreamHandlerFactory objects.","Bug 26701  Enabling web applications to register their own stream handlers","enabl web applic regist stream handler","A stream handler factory can be registered once per VM and tomcat registers the 
DirContextStreamHandlerFactory for the jndi protocol. However if there are web 
applications running inside that want to register handlers for custom scheme 
currently it is not possible.

Can the DirContextStreamHandlerFactory be enhanced to allow applications to 
register stream handler for custom schemes they might have. Or better can this 
be a made a property in the context.xml file ?

Is this already there - or can this enhanced in the future?","stream handler factori regist vm tomcat regist dir context stream handler factori dircontextstreamhandlerfactori jndi protocol howev web applic run insid regist handler custom scheme current possibl dir context stream handler factori dircontextstreamhandlerfactori enhanc allow applic regist stream handler custom scheme might better made properti context xml file alreadi enhanc futur","""java/org/apache/naming/resources/Constants.java""","0","0","0","0","0","0","0","0","1","0","3","0","0","0","0","0","0","0","0","0","36","9","7","6","3","20","4","5","5","0","0","0","0","0","0","3","0","0","0","0","enhancement"
"26701","2585","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=26701 Provide a mechanism for users to register their own URLStreamHandlerFactory objects.","Bug 26701  Enabling web applications to register their own stream handlers","enabl web applic regist stream handler","A stream handler factory can be registered once per VM and tomcat registers the 
DirContextStreamHandlerFactory for the jndi protocol. However if there are web 
applications running inside that want to register handlers for custom scheme 
currently it is not possible.

Can the DirContextStreamHandlerFactory be enhanced to allow applications to 
register stream handler for custom schemes they might have. Or better can this 
be a made a property in the context.xml file ?

Is this already there - or can this enhanced in the future?","stream handler factori regist vm tomcat regist dir context stream handler factori dircontextstreamhandlerfactori jndi protocol howev web applic run insid regist handler custom scheme current possibl dir context stream handler factori dircontextstreamhandlerfactori enhanc allow applic regist stream handler custom scheme might better made properti context xml file alreadi enhanc futur","""java/org/apache/naming/resources/DirContextURLStreamHandlerFactory.java""","1","1","1","1","9","0","4","4","1","0","0","2","2","2","0","2","0","0","0","2","68","17","16","8","4","35","5","9","6","3","2","2","2","1","1","2","3","3","3","2","enhancement"
"26701","2585","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=26701 Provide a mechanism for users to register their own URLStreamHandlerFactory objects.","Bug 26701  Enabling web applications to register their own stream handlers","enabl web applic regist stream handler","A stream handler factory can be registered once per VM and tomcat registers the 
DirContextStreamHandlerFactory for the jndi protocol. However if there are web 
applications running inside that want to register handlers for custom scheme 
currently it is not possible.

Can the DirContextStreamHandlerFactory be enhanced to allow applications to 
register stream handler for custom schemes they might have. Or better can this 
be a made a property in the context.xml file ?

Is this already there - or can this enhanced in the future?","stream handler factori regist vm tomcat regist dir context stream handler factori dircontextstreamhandlerfactori jndi protocol howev web applic run insid regist handler custom scheme current possibl dir context stream handler factori dircontextstreamhandlerfactori enhanc allow applic regist stream handler custom scheme might better made properti context xml file alreadi enhanc futur","""java/org/apache/catalina/loader/WebappLoader.java""","3","3","4","1","23","3","15","4","1","0","4","39","39","39","11","39","0","7","4","28","1210","254","681","218","457","276","340","490","184","306","28","28","29","12","5","0","151","151","157","76","enhancement"
"27122","2647","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=27122 Remove a workaround for a very old and since fixed Mozilla bug and change the default value of the securePagesWithPragma attribute of the Authenticator Valves to false to reduce the likelihood of issues when downloading files with IE.","Bug 27122  IE plugins cannot access components through Tomcat 5 over SSL","ie plugin cannot access compon tomcat ssl","SSL seems to be failing when the Content-Type header is set to ""image/svg+xml"".

I've only seen this failure when SSL was running on a Solaris machine.  (uname
-a: SunOS [hostname removed] 5.8 Generic_108528-18 sun4u sparc SUNW,Ultra-60) 
When attempted on Windows, we were unable to duplicate the error.  This reliably
fails when attempted on this specific Solaris machine.  If I get a chance, I'll
try to create a test-case and see if I can reproduce this on other Solaris
machines.  Unfortunately, this was a show-stopper for a release that's being
made today so I'm pressed for time.

Basically, what happens is that we're using a JSP page to create an SVG file. 
Because of this, we have to set the Content-Type header to ""image/svg+xml"". 
When the MIME type is set to this value, the page fails to load in Internet
Explorer 6 (SP1) with a message of ""connection failed"" or something similar. 
When an attempt was made in Opera, Opera responded by crashing.  Mozilla
successfully downloaded the file, though.

However, when resetting the MIME type in the page to ""text/plain"" all three
browsers can access the page without failure.  By back-revving Tomcat to version
4.1.29, we were able to resolve this issue and access the page in all three
browsers.

I'll try and create a test-case later today and verify that it isn't just our
SVG JSP that's failing but any that creates SVG but I'm currently pressed for
time - sorry.","ssl seem fail content type header set imag svg xml seen failur ssl run solari machin unam sun suno hostnam remov gener sun4u sparc sunw ultra attempt window unabl duplic error reliabl fail attempt specif solari machin get chanc ll tri creat test case testcas see reproduc solari machin unfortun show stopper showstopp releas made today press time basic happen re use jsp page creat svg file set content type header imag svg xml mime type set valu page fail load internet explor p1 sp1 messag connect fail someth similar attempt made opera opera respond crash mozilla success download file though howev reset mime type page text plain three browser access page without failur back rev backrev tomcat version abl resolv issu access page three browser ll tri creat test case testcas later today verifi isn svg jsp fail creat svg current press time sorri","""java/org/apache/catalina/authenticator/AuthenticatorBase.java""","3","3","3","1","21","2","11","7","1","0","6","27","29","29","11","29","0","0","6","23","860","146","391","126","231","323","180","270","103","167","35","35","42","10","5","1","90","90","101","42","enhancement"
"27988","2531","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=27988 Improve reporting of missing files","Bug 27988  Unhelpful FileNotFoundException raised","unhelp file not found except filenotfoundexcept rais","org.apache.naming.resources.DirContextURLConnection raises FileNotFoundException
on lines 311, 344, 382 and 396.  It would be more helpful if these provided a
message string.

For example, change line 344 to
        throw new FileNotFoundException(getURL().getFile());

This would make it easier to diagnose mistakes in server configurations.","apach name resourc dir context connect dircontexturlconnect rais file not found except filenotfoundexcept line would help provid messag string exampl chang line throw new file not found except filenotfoundexcept get geturl get file getfil would make easier diagnos mistak server configur","""java/org/apache/naming/resources/DirContextURLConnection.java""","4","4","4","2","21","2","14","4","1","0","0","14","14","14","7","14","0","0","1","13","458","97","249","91","134","114","110","172","69","103","10","10","10","8","5","0","61","61","63","40","enhancement"
"28852","2486","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=28852 Add URL encoding where missing to parameters in URLs presented by Ant tasks to the Manager application. Based on a patch by Stephane Bailliez.","Bug 28852  failonerror attribute on Ant tasks","failonerror attribut ant task","failonerror boolean attribute on manager Ant tasks would be a nice have to 
allow for more flexible operation within Ant build files.

I will attach a patch next week that also fixes unecessary CRs during response 
read/print and missing url encoding in some tasks.","failonerror boolean attribut manag ant task would nice allow flexibl oper within ant build file attach patch next week fix unecessari cr respons read print miss url encod task","""java/org/apache/catalina/ant/JMXGetTask.java""","1","1","1","1","8","0","4","4","1","0","0","5","5","5","2","5","0","0","0","5","97","15","30","11","14","52","12","19","10","9","2","2","3","1","1","2","6","6","7","5","enhancement"
"28852","2486","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=28852 Add URL encoding where missing to parameters in URLs presented by Ant tasks to the Manager application. Based on a patch by Stephane Bailliez.","Bug 28852  failonerror attribute on Ant tasks","failonerror attribut ant task","failonerror boolean attribute on manager Ant tasks would be a nice have to 
allow for more flexible operation within Ant build files.

I will attach a patch next week that also fixes unecessary CRs during response 
read/print and missing url encoding in some tasks.","failonerror boolean attribut manag ant task would nice allow flexibl oper within ant build file attach patch next week fix unecessari cr respons read print miss url encod task","""java/org/apache/catalina/ant/JMXQueryTask.java""","1","1","1","1","11","0","4","7","1","0","0","3","3","3","1","3","0","0","0","3","80","12","18","9","7","50","9","13","8","5","2","2","2","1","0","3","4","4","4","3","enhancement"
"28852","2486","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=28852 Add URL encoding where missing to parameters in URLs presented by Ant tasks to the Manager application. Based on a patch by Stephane Bailliez.","Bug 28852  failonerror attribute on Ant tasks","failonerror attribut ant task","failonerror boolean attribute on manager Ant tasks would be a nice have to 
allow for more flexible operation within Ant build files.

I will attach a patch next week that also fixes unecessary CRs during response 
read/print and missing url encoding in some tasks.","failonerror boolean attribut manag ant task would nice allow flexibl oper within ant build file attach patch next week fix unecessari cr respons read print miss url encod task","""java/org/apache/catalina/ant/JMXSetTask.java""","1","1","1","1","8","0","4","4","1","0","0","7","7","7","3","7","0","0","0","7","120","18","39","14","19","63","15","24","13","11","2","2","4","1","1","2","8","8","10","7","enhancement"
"28852","2486","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=28852 Add URL encoding where missing to parameters in URLs presented by Ant tasks to the Manager application. Based on a patch by Stephane Bailliez.","Bug 28852  failonerror attribute on Ant tasks","failonerror attribut ant task","failonerror boolean attribute on manager Ant tasks would be a nice have to 
allow for more flexible operation within Ant build files.

I will attach a patch next week that also fixes unecessary CRs during response 
read/print and missing url encoding in some tasks.","failonerror boolean attribut manag ant task would nice allow flexibl oper within ant build file attach patch next week fix unecessari cr respons read print miss url encod task","""java/org/apache/catalina/ant/ResourcesTask.java""","1","1","1","1","7","0","4","1","1","0","0","3","3","3","1","3","0","0","0","3","75","20","20","8","8","35","8","13","7","6","2","2","2","1","1","2","4","4","4","3","enhancement"
"28852","2486","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=28852 Add URL encoding where missing to parameters in URLs presented by Ant tasks to the Manager application. Based on a patch by Stephane Bailliez.","Bug 28852  failonerror attribute on Ant tasks","failonerror attribut ant task","failonerror boolean attribute on manager Ant tasks would be a nice have to 
allow for more flexible operation within Ant build files.

I will attach a patch next week that also fixes unecessary CRs during response 
read/print and missing url encoding in some tasks.","failonerror boolean attribut manag ant task would nice allow flexibl oper within ant build file attach patch next week fix unecessari cr respons read print miss url encod task","""java/org/apache/catalina/ant/UndeployTask.java""","1","1","1","1","7","0","4","1","1","0","0","3","3","3","1","3","0","0","0","3","73","19","20","8","8","34","8","13","7","6","2","2","2","1","1","2","4","4","4","3","enhancement"
"29727","831","Mark Emlyn David Thomas","Port fix bug 29727. Changes to env-entry values should take effect on web-app reload.","Bug 29727  JNDI env-entry not reload when context reloaded","jndi env entri enventri reload context reload","If environment entries are changed in web.xml, and the application context is 
restarted, the values in the JNDI context are the old values.

If the environment entries are changed via the Tomcat 'admin' interface, then 
the values provided to the context are correct.

The following code is can be used to check the environment:

        try {
            InitialContext ic = new InitialContext();
            NamingEnumeration enum = ic.listBindings(""java:comp/env"");

            while (enum.hasMore()) {
                Binding binding = (Binding) enum.next();
                jndi.setProperty(binding.getName(), """" + binding.getObject());
                System.out.println(""jndi setting: "" + binding.getName() + ""="" 
+ binding.getObject());
            }
        } catch (NamingException e) {
            System.err.println(""unable to read JNDI settings, "" + e);
        }


The web.xml fragment looks as follows:

	<env-entry>
		<env-entry-name>DatabaseURL</env-entry-name>
		<env-entry-value>jdbc:hsqldb:hsql://localhost</env-entry-value>
		<env-entry-type>java.lang.String</env-entry-type>
	</env-entry>","environ entri chang web xml applic context restart valu jndi context old valu environ entri chang via tomcat admin interfac valu provid context correct follow code use check environ tri initi context initialcontext ic new initi context initialcontext name enumer namingenumer enum ic list bind listbind java comp env enum ha more hasmor bind bind bind enum next jndi set properti setproperti bind get name getnam bind get object getobject system println jndi set bind get name getnam bind get object getobject catch name except namingexcept system err println unabl read jndi set web xml fragment look follow env entri enventri env entri name enventrynam databas databaseurl env entri name enventrynam env entri valu enventryvalu jdbc hsqldb hsql localhost env entri valu enventryvalu env entri type enventrytyp java lang string env entri type enventrytyp env entri enventri","""java/org/apache/catalina/deploy/NamingResources.java""","1","1","1","1","14","2","7","4","1","0","0","40","40","40","12","40","0","0","0","40","783","205","323","78","184","255","130","220","76","144","3","3","3","1","2","1","57","57","57","40","normal"
"29936","1384","Mark Emlyn David Thomas","Fix bug 29936. In some circumstances, Tomcat would use the parser from a webapp to parse web.xml and possibly context.xml files.","Bug 29936  XML parser loading problems by container","xml parser load problem contain","I'm trying to use JSTL 1.1 with this version of tomcat and have both saxon and 
crimson in my web-app.

If we have crimson and saxon in our webapp lib then tomcat tries to use crimson 
as the xml parser when reading the web.xml and compiling the jsp and we get the 
prefix error:

org.apache.jasper.JasperException: <h3>Validation error messages from 
TagLibraryValidator for c</h3><p>null: java.lang.IllegalStateException: can't 
declare any more prefixes in this context</p><h3>Validation error messages from 
TagLibraryValidator for fmt</h3><p>null: java.lang.IllegalStateException: can't 
declare any more prefixes in this context</p>

If we remove crimson, tomcat uses saxon (aelfred parser) and this fails on 
reading the web.xml (javax.xml.parsers.ParserConfigurationException: AElfred 
parser is namespace-aware)

If we remove saxon and crimson then we are okay (defaults to xerces in the 
tomcat endorsed directory?)

It seems to me that tomcat is using the parser in my web-app to read the 
web.xml rather than using xerces from the endorsed directory.  

The same web-app runs without problems in version 5.0.16.  

Tomcat seems to be using the service provider mechanism in 5.0.25 as I have 
property files in C:\Java\jakarta-tomcat-5.0.25
\work\Catalina\localhost\diabetes\loader\META-INF\services (can't find any 
documents on this).

If I'm using more than one parser won't this cause problems as tomcat is 
setting only one parser and xslt processor here?

Any comments are gratefully received.

Thanks,
Peter Neville","tri use jstl version tomcat saxon crimson web app webapp crimson saxon webapp lib tomcat tri use crimson xml parser read web xml compil jsp get prefix error apach jasper jasper except jasperexcept h3 valid error messag tag librari valid taglibraryvalid h3 null java lang illeg state except illegalstateexcept declar prefix context h3 valid error messag tag librari valid taglibraryvalid fmt h3 null java lang illeg state except illegalstateexcept declar prefix context remov crimson tomcat us saxon aelfr parser fail read web xml javax xml parser parser configur except parserconfigurationexcept elfr aelfr parser namespac awar namespaceawar remov saxon crimson okay default xerc tomcat endors directori seem tomcat use parser web app webapp read web xml rather use xerc endors directori web app webapp run without problem version tomcat seem use servic provid mechan properti file java jakarta tomcat jakartatomcat work catalina localhost diabet loader meta inf servic find document use one parser won caus problem tomcat set one parser xslt processor comment grate receiv thank peter nevil","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","6","1","37","3","27","6","2","2","10","30","30","28","7","30","0","0","20","10","1380","226","877","188","628","281","446","641","182","459","20","20","23","14","4","0","193","193","207","48","blocker"
"30949","1099","Mark Emlyn David Thomas","Port improved fix for bug 30949 to TC6.","Bug 30949  After Failed Include, Request and Response not Unwrapped","fail includ request respons unwrap","In org.apache.catalina.core.ApplicationDispatcher.doInclude(ServletRequest 
request, ServletResponse response), after invoke() is called to perform the 
include, the request and response objects are normally unwrapped.  However, if 
a ServletException or IOException is thrown, the unwrapping does not take place.

This leads to problems in environments in which cross context includes are 
being performed.  For example, 

1.  Web App A performs an include to a Servlet in Web App B
2.  The Servlet in Web App B throws a ServletException
3.  Web App A catches the ServletException and attempts to forward to an error 
jsp.

Step 3 above will fail due to the fact that the request has not been 
unwrapped.  The active request will contain the ServletContext of web app B and 
the jsp file will not be found.","apach catalina core applic dispatch applicationdispatch do includ doinclud servlet request servletrequest request servlet respons servletrespons respons invok call perform includ request respons object normal unwrap howev servlet except servletexcept except ioexcept thrown unwrap take place lead problem environ cross context includ perform exampl web app perform includ servlet web app servlet web app throw servlet except servletexcept web app catch servlet except servletexcept attempt forward error jsp step fail due fact request unwrap activ request contain servlet context servletcontext web app jsp file found","""java/org/apache/catalina/core/ApplicationDispatcher.java""","6","6","7","2","42","4","31","7","4","0","2","18","18","18","17","18","3","9","0","6","989","154","617","147","458","219","295","401","120","281","24","24","26","7","3","0","113","113","131","42","normal"
"31027","2368","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=31027 Trim whitespace from names and values obtained from $CATALINA_BASE/conf/catalina.properties to avoid hard to diagnose errors on startup.","Bug 31027  major error from minor whitespace error in properties file","major error minor whitespac error properti file","A developer accidentally placed a tab character after the port number in the
properties file for a tomcat instance.  This prevented tomcat from listening on
that port, but it was difficult to track down whether tomcat was running.  Seems
like the properties-file reader could easily trim excess whitespace before
trying to use entries.","develop accident place tab charact port number properti file tomcat instanc prevent tomcat listen port difficult track whether tomcat run seem like properti file propertiesfil reader could easili trim excess whitespac tri use entri","""java/org/apache/catalina/startup/CatalinaProperties.java""","2","2","3","1","15","1","10","3","1","7","2","7","7","0","0","7","0","5","0","2","185","45","92","29","52","48","41","62","27","35","12","12","13","1","2","1","20","20","21","7","enhancement"
"31257","1312","Mark Emlyn David Thomas","Fix bug 31257. Quote endorsed dirs if they contain a space.","Bug 31257  java.endorsed.dirs is not used when JSP compilation is forked","java endors dir use jsp compil fork","When the JSP compiler forks a javac process, it should check to see what the 
currently endorsed directories are (check the system 
property ""java.endorsed.dirs"" - otherwise, classes end up missing and JSP 
pages do not properly compile.  We experienced a problem when we explicitly 
set the java.endorsed.dirs property on the command line, and the JSP compiler 
did not use it when javac was forked.

I have patched org.apache.jasper.compiler.Compiler to support this:
*** src.original\jakarta-tomcat-jasper\jasper2
\src\share\org\apache\jasper\compiler\Compiler.java       Tue Jun 15 17:30:35 
2004
--- src\org\apache\jasper\compiler\Compiler.java        Thu Sep 16 00:05:14 
2004

***************
*** 349,358 ****
--- 349,369 ----
              extdirs.setPath(exts);
              javac.setExtdirs(extdirs);
              info.append(""    extension dir="" + exts + ""\n"");
          }

+         // Add endorsed directories
+         String endorsed = System.getProperty(""java.endorsed.dirs"");
+         if(endorsed != null) {
+             Javac.ImplementationSpecificArgument endorsedArg = 
javac.createCompilerArg();
+             endorsedArg.setLine(""-J-Djava.endorsed.dirs=""+endorsed);
+             info.append(""    endorsed dir="" + endorsed + ""\n"");
+         }
+         else {
+             info.append(""    no endorsed dirs specified\n"");
+         }
+
          // Configure the compiler object
          javac.setEncoding(javaEncoding);
          javac.setClasspath(path);
          javac.setDebug(ctxt.getOptions().getClassDebugInfo());

true, i should probably check ctxt.getOptions().getFork() in the if() as well, 
but since i always fork it doesn't matter to me.","jsp compil fork javac process check see current endors directori check system properti java endors dir otherwis class miss jsp page properli compil experienc problem explicitli set java endors dir properti command line jsp compil use javac fork patch apach jasper compil compil support src origin jakarta tomcat jasper jakartatomcatjasp jasper2 src share apach jasper compil compil java jun src apach jasper compil compil java thu sep extdir set path setpath ext javac set extdir setextdir extdir info append extens ext add endors directori string endors system get properti getproperti java endors dir endors null javac implement specif argument implementationspecificargu endors arg endorsedarg javac creat compil arg createcompilerarg endors arg endorsedarg set line setlin djava endors dir endors info append endors endors els info append endors dir specifi configur compil object javac set encod setencod java encod javaencod javac set classpath setclasspath path javac set debug setdebug ctxt get option getopt get class debug info getclassdebuginfo true probabl check ctxt get option getopt get fork getfork well sinc alway fork doesn matter","""java/org/apache/jasper/compiler/AntCompiler.java""","1","1","1","1","9","0","7","0","3","2","3","36","36","34","4","36","0","0","7","29","472","106","293","96","170","73","153","217","88","129","19","19","19","1","2","0","60","60","60","36","critical"
"31804","689","Mark Emlyn David Thomas","Port fix for bug 31804 from TC5. Set the parent of unnested tags within a tag file to be the tag represented by the tag file.","Bug 31804  setParent() is not called on nested tags in a tag file (.tagx)","set parent setpar call nest tag tag file tagx","","","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","36","3","27","5","12","6","5","110","110","104","48","110","11","49","0","50","4142","503","2959","495","2329","704","1815","2288","478","1810","21","21","22","20","5","0","477","471","519","200","major"
"33356","584","Mark Emlyn David Thomas","Port fix for bug 33356 from TC5","Bug 33356  Incorrect parsing of tag attributes","incorrect pars tag attribut","I get a org.apache.jasper.JasperException: with the error: ""The function string 
must be used with a prefix when a default namespace is not specified"" when 
trying to compile the following within a JSP page:

<foo:set var=""bar"" value=""this $ is a { silly string (""/>

""foo"" is our own tablib, it seems that Jasper seems to think that the string 
provided to the value attribute contains some JSP/EL which it does not.

If I change the page to be:

<c:set var=""bar"" value=""this $ is a { silly string (""/>

Then I do not get this error. However I need to use my own taglib.
In the foo.tld file, the ""value"" attribute of ""set"" has rtexprvalue=true.
If I set this to false then the problem goes away. However I noticed that c.tld 
in standard.jar also has rtexprvalue=true for the ""value"" attribute of ""set"". 
Why the difference in behaviour ? We also wish to have rtexprvalue=true.","get apach jasper jasper except jasperexcept error function string must use prefix default namespac specifi tri compil follow within jsp page foo set bar valu silli string foo tablib seem jasper seem think string provid valu attribut contain jsp chang page set bar valu silli string get error howev need use taglib foo tld file valu attribut set rtexprvalu true set fals problem go away howev notic tld standard jar rtexprvalu true valu attribut set differ behaviour wish rtexprvalu true","""java/org/apache/jasper/compiler/ELParser.java""","2","2","2","1","10","0","9","1","5","1","1","25","25","24","10","25","5","13","0","7","380","46","249","64","143","91","106","176","62","114","10","10","14","5","5","0","65","65","73","45","major"
"34399","527","Mark Emlyn David Thomas","Port fix for bug 34399 - disable the undeploy option if the webapp has not been 'deployed' This occurs, for example, if the webapp is defined in server.xml","Bug 34399  Undeploying fails when context defined in server.xml & server fails to stop","undeploy fail context defin server xml server fail stop","Steps to reproduce: 
 
1. autodeploy a web application by defining its context in server.xml 
2. start the Tomcat server 
3. use the Tomcat Manager to undeploy the application 
 
You will get the ""OK - Undeployed application at context path /WebApplication"" 
message, but the application will NOT be undeployed, it will be only stopped. 
 
If you try to stop the server after that, it will fail! 
 
I have used the shared installation (CATALINA_BASE dir), but I guess this 
won't work for standalone Tomcat isntallation either.","step reproduc autodeploy web applic defin context server xml start tomcat server use tomcat manag undeploy applic get ok undeploy applic context path web applic webappl messag applic undeploy stop tri stop server fail use share instal catalina base guess won work standalon tomcat isntal either","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","4","4","5","1","52","6","34","11","1","0","7","9","9","9","0","9","0","0","4","5","691","87","460","97","384","144","219","263","85","178","15","15","17","7","4","0","43","43","47","15","normal"
"34399","527","Mark Emlyn David Thomas","Port fix for bug 34399 - disable the undeploy option if the webapp has not been 'deployed' This occurs, for example, if the webapp is defined in server.xml","Bug 34399  Undeploying fails when context defined in server.xml & server fails to stop","undeploy fail context defin server xml server fail stop","Steps to reproduce: 
 
1. autodeploy a web application by defining its context in server.xml 
2. start the Tomcat server 
3. use the Tomcat Manager to undeploy the application 
 
You will get the ""OK - Undeployed application at context path /WebApplication"" 
message, but the application will NOT be undeployed, it will be only stopped. 
 
If you try to stop the server after that, it will fail! 
 
I have used the shared installation (CATALINA_BASE dir), but I guess this 
won't work for standalone Tomcat isntallation either.","step reproduc autodeploy web applic defin context server xml start tomcat server use tomcat manag undeploy applic get ok undeploy applic context path web applic webappl messag applic undeploy stop tri stop server fail use share instal catalina base guess won work standalon tomcat isntal either","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","4","4","5","1","52","6","34","11","1","0","7","9","9","9","0","9","0","0","4","5","691","87","460","97","384","144","219","263","85","178","15","15","17","7","4","0","43","43","47","15","normal"
"34399","527","Mark Emlyn David Thomas","Port fix for bug 34399 - disable the undeploy option if the webapp has not been 'deployed' This occurs, for example, if the webapp is defined in server.xml","Bug 34399  Undeploying fails when context defined in server.xml & server fails to stop","undeploy fail context defin server xml server fail stop","Steps to reproduce: 
 
1. autodeploy a web application by defining its context in server.xml 
2. start the Tomcat server 
3. use the Tomcat Manager to undeploy the application 
 
You will get the ""OK - Undeployed application at context path /WebApplication"" 
message, but the application will NOT be undeployed, it will be only stopped. 
 
If you try to stop the server after that, it will fail! 
 
I have used the shared installation (CATALINA_BASE dir), but I guess this 
won't work for standalone Tomcat isntallation either.","step reproduc autodeploy web applic defin context server xml start tomcat server use tomcat manag undeploy applic get ok undeploy applic context path web applic webappl messag applic undeploy stop tri stop server fail use share instal catalina base guess won work standalon tomcat isntal either","""java/org/apache/catalina/manager/ManagerServlet.java""","6","6","7","2","40","3","30","7","1","2","1","31","31","29","12","31","0","0","23","8","1582","209","990","193","740","384","475","682","181","501","20","20","29","6","5","0","206","206","241","76","normal"
"34399","527","Mark Emlyn David Thomas","Port fix for bug 34399 - disable the undeploy option if the webapp has not been 'deployed' This occurs, for example, if the webapp is defined in server.xml","Bug 34399  Undeploying fails when context defined in server.xml & server fails to stop","undeploy fail context defin server xml server fail stop","Steps to reproduce: 
 
1. autodeploy a web application by defining its context in server.xml 
2. start the Tomcat server 
3. use the Tomcat Manager to undeploy the application 
 
You will get the ""OK - Undeployed application at context path /WebApplication"" 
message, but the application will NOT be undeployed, it will be only stopped. 
 
If you try to stop the server after that, it will fail! 
 
I have used the shared installation (CATALINA_BASE dir), but I guess this 
won't work for standalone Tomcat isntallation either.","step reproduc autodeploy web applic defin context server xml start tomcat server use tomcat manag undeploy applic get ok undeploy applic context path web applic webappl messag applic undeploy stop tri stop server fail use share instal catalina base guess won work standalon tomcat isntal either","""java/org/apache/catalina/startup/HostConfig.java""","4","4","4","1","24","2","17","4","2","1","3","42","42","41","16","42","0","0","18","24","1315","223","786","180","565","306","390","571","182","389","30","30","37","7","7","0","180","180","194","78","normal"
"34509","514","Mark Emlyn David Thomas","port fix for bug 34509. Allow tag names to use full range of characters as defined by the spec.","Bug 34509  tag names that are xml:Name but not java identifier are not accepted","tag name xml name java identifi accept","According to the JSP 2.0 specification, custom tag prefix and name should be 
of the type XML:Name. However, for Tomcat 5.5.8, if the name is not a legal 
java identifier, then a compilation error occurs. For instance, Tomcat won't 
accept Da~te`T#ag as a legal name for the Tag.","accord jsp specif custom tag prefix name type xml name howev tomcat name legal java identifi compil error occur instanc tomcat won accept ag legal name tag","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","36","3","27","5","12","6","5","110","110","104","48","110","11","49","0","50","4147","503","2964","495","2334","704","1819","2293","478","1815","21","21","22","20","5","0","478","472","521","200","normal"
"34801","439","Mark Emlyn David Thomas","Port partial fix for 34801","Bug 34801  PATCH: CGIServlet does not terminate child after a timeout","patch servlet cgiservlet termin child timeout","","","""java/org/apache/catalina/servlets/CGIServlet.java""","4","4","5","1","43","4","25","13","5","1","7","34","34","33","24","34","1","4","24","5","1955","282","935","225","715","749","538","675","207","468","20","20","23","6","5","1","146","141","170","45","enhancement"
"34956","535","Mark Emlyn David Thomas","Port fix for bug 34956. Enforce requirements of SRV.8.2 / SRV.14.2.5.1","Bug 34956  Tomcat should enforce the requirements from servlet 2.4 specification SRV.8.2","tomcat enforc requir servlet specif srv","Tomcat should enforce the requirements from servlet 2.4 specification SRV.8.2

SRV.8.2 Using a Request Dispatcher

""To use a request dispatcher, a servlet calls either the include method or
forward method of the RequestDispatcher interface. The parameters to these
methods can be either the request and response arguments that were passed in via
the service method of the Servlet interface, or instances of subclasses of the
request and response wrapper classes that have been introduced for version 2.3
of the specification. In the latter case, the wrapper instances must wrap the
request or response objects that the container passed into the service method.
The Container Provider must ensure that the dispatch of the request to a target
servlet occurs in the same thread of the same VM as the original request""

Justification:
==============
The absense of this enforcement leads to software beeing developed not following
the specification. The software cannot be deployed later on a container which
conforms to the above paragraph and hence must be changed before deployment.
This somehow contradicts the idea of having a standards based infrastructure.","tomcat enforc requir servlet specif srv srv use request dispatch use request dispatch servlet call either includ method forward method request dispatch requestdispatch interfac paramet method either request respons argument pass via servic method servlet interfac instanc subclass request respons wrapper class introduc version specif latter case wrapper instanc must wrap request respons object contain pass servic method contain provid must ensur dispatch request target servlet occur thread vm origin request justif absens enforc lead softwar bee develop follow specif softwar cannot deploy later contain conform paragraph henc must chang deploy somehow contradict idea standard base infrastructur","""java/org/apache/catalina/core/ApplicationDispatcher.java""","6","6","7","2","42","4","30","7","3","0","3","17","17","17","20","17","2","9","0","6","962","165","577","142","437","221","295","395","119","276","24","24","26","7","3","0","108","108","121","36","normal"
"34956","535","Mark Emlyn David Thomas","Port fix for bug 34956. Enforce requirements of SRV.8.2 / SRV.14.2.5.1","Bug 34956  Tomcat should enforce the requirements from servlet 2.4 specification SRV.8.2","tomcat enforc requir servlet specif srv","Tomcat should enforce the requirements from servlet 2.4 specification SRV.8.2

SRV.8.2 Using a Request Dispatcher

""To use a request dispatcher, a servlet calls either the include method or
forward method of the RequestDispatcher interface. The parameters to these
methods can be either the request and response arguments that were passed in via
the service method of the Servlet interface, or instances of subclasses of the
request and response wrapper classes that have been introduced for version 2.3
of the specification. In the latter case, the wrapper instances must wrap the
request or response objects that the container passed into the service method.
The Container Provider must ensure that the dispatch of the request to a target
servlet occurs in the same thread of the same VM as the original request""

Justification:
==============
The absense of this enforcement leads to software beeing developed not following
the specification. The software cannot be deployed later on a container which
conforms to the above paragraph and hence must be changed before deployment.
This somehow contradicts the idea of having a standards based infrastructure.","tomcat enforc requir servlet specif srv srv use request dispatch use request dispatch servlet call either includ method forward method request dispatch requestdispatch interfac paramet method either request respons argument pass via servic method servlet interfac instanc subclass request respons wrapper class introduc version specif latter case wrapper instanc must wrap request respons object contain pass servic method contain provid must ensur dispatch request target servlet occur thread vm origin request justif absens enforc lead softwar bee develop follow specif softwar cannot deploy later contain conform paragraph henc must chang deploy somehow contradict idea standard base infrastructur","""java/org/apache/catalina/core/ApplicationFilterChain.java""","4","4","4","1","30","2","20","8","3","0","6","12","12","12","5","12","5","2","0","5","526","84","276","82","200","166","127","166","68","98","17","17","18","1","3","1","50","50","51","12","normal"
"35054","2186","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=35054 Check that a file is not specified for a Host's appBase and log an error if it is.","Bug 35054  warn if appBase is not existing as a File or directory","warn app base appbas exist file directori","otherwise, it may very hard to find what is wrong","otherwis may hard find wrong","""java/org/apache/catalina/startup/HostConfig.java""","4","4","5","2","28","2","20","5","2","1","3","41","41","40","16","41","0","1","17","23","1476","227","925","206","657","324","441","646","200","446","31","31","39","12","7","0","193","193","220","86","enhancement"
"36155","1050","William Barker","port fix for BZ 36155 from the JK Connector","Bug 36155  tomcat chooses wrong host if using mod_jk","tomcat choos wrong host use jk","","","""java/org/apache/coyote/ajp/AjpMessage.java""","2","2","2","1","12","0","9","3","1","2","2","26","26","24","3","26","0","0","2","24","463","77","249","61","161","140","140","197","64","133","6","6","6","3","2","1","56","56","62","28","normal"
"37458","358","Mark Emlyn David Thomas","Port fix bug 37458. Remove the possibility of some NPE and IAE issues. Note for Remy - you had some ideas to improve this patch.","Bug 37458  Datarace on org.apache.catalina.loader.WebappClassLoader","datarac apach catalina loader webapp class loader webappclassload","In findClassInternal, it is possible that entry.manifest is set to null by 
another thread right before calling definePackage(packageName, entry.manifest, 
entry.codeBase).","find class intern findclassintern possibl entri manifest set null anoth thread right call defin packag definepackag packag name packagenam entri manifest entri code base codebas","""java/org/apache/catalina/loader/WebappClassLoader.java""","6","6","6","2","33","4","22","7","2","1","4","56","56","55","27","56","3","0","20","33","2348","419","1354","291","954","578","662","1009","278","731","41","41","47","29","9","0","346","346","371","153","normal"
"37509","369","Mark Emlyn David Thomas","Port fix for bug 37509.","Bug 37509  ClassLoaderLogManager remove '\n' at the end of logging.properties values","class loader log manag classloaderlogmanag remov log properti valu","The method ClassLoaderLogManager.replace(String) that is in charge of replacing
system properties at the begining of the property also modify the end of the
property due to a call to trim.

This implies that Logger/Handler/Formatter that relies on properties endding
with some spases (including '\n') will have a different behaviour with JDK
LogManger and tomcat ClassLoaderLogManager

a modified verstion of this method could be:

    protected String replace(String str) {
// start modification    	
//        String result = str.trim();  // commented out
    	
    	int len = str.length();
    	int st = 0;
    	while ((st < len) && (str.charAt(st) <= ' ')) {
    	    st++;
    	}
    	String result = (st > 0) ? str.substring(st) : str;
// end modification        
        
        if (result.startsWith(""${"")) {
            int pos = result.indexOf('}');
            if (pos != -1) {
                String propName = result.substring(2, pos);
                String replacement = System.getProperty(propName);
                if (replacement != null) {
                    result = replacement + result.substring(pos + 1);
                }
            }
        }
        return result;
    }","method class loader log manag classloaderlogmanag replac string charg replac system properti begin properti modifi properti due call trim impli logger handler formatt reli properti end spa includ differ behaviour jdk log manger logmang tomcat class loader log manag classloaderlogmanag modifi verstion method could protect string replac string str start modif string result str trim comment int len str length int st st len str char at charat st st string result st str substr st str modif result start with startswith int po result index of indexof po string prop name propnam result substr po string replac system get properti getproperti prop name propnam replac null result replac result substr po return result","""java/org/apache/juli/ClassLoaderLogManager.java""","3","3","3","1","21","1","16","4","7","1","0","21","21","20","9","21","6","0","5","10","572","85","361","122","225","126","172","251","109","142","14","14","14","9","5","0","76","76","82","36","normal"
"37929","1217","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=37929 by restoring r357410 that was lost in r379417","Bug 37929  invalidated session causes pageContext methods to fail","invalid session caus page context pagecontext method fail","javax.servlet.http.HttpSession methods such as getAttribute(),
getValue(), getAttributeNames(), getValueNames(), etc, throw an
IllegalStateException if called on a session that has been
invalidated.

So, with the following code in a JSP page:

    <% 
       session.invalidate(); 
       Object obj = pageContext.findAttribute(""foo"");
    %>

An IllegalStateException is thrown because pageContext.findAttribute()
eventually calls session.getAttribute() on a session that has been
invalidated.

The session that has been invalidated should simply be ignored when a
method needs to process the various scopes (page, request, session,
application).

This impacts the following methods in PageContextImpl:

   public int getAttributesScope(final String name)
      which calls -> private int doGetAttributeScope(String name);
   public Object findAttribute(final String name)
      which calls -> private Object doFindAttribute(String name);
   public void removeAttribute(final String name)
      which calls -> private void doRemoveAttribute(String name);

The fix is to catch IllegalStateException and ignore it when processing
the attribute in session scope. The code then simply follows through to 
process application scope.

No need to worry about setAttribute() because it is always invoked
on a specific scope, and the spec already states
that java.lang.IllegalStateException must be thrown when called 
on an invalidated session.

  pageContext.setAttribute(""foo"", ""value of foo"", PageContext.SESSION_SCOPE);

  java.lang.IllegalStateException - if the scope is PageContext.SESSION_SCOPE 
  but the page that was requested does not participate in a session or 
  the session has been invalidated.

---------------------------------------------------------------------------

At the same time, a fix should be done to method ""doRemoveAttribute(String
name)"" where a try/catch block for Exception appears unnecessary.

    private void doRemoveAttribute(String name){
        try {
            removeAttribute(name, PAGE_SCOPE);
            removeAttribute(name, REQUEST_SCOPE);
            if( session != null ) {
                try {
                    removeAttribute(name, SESSION_SCOPE);
                } catch (IllegalStateException ex) {
                    // Session has been invalidated.
                    // Ignore and fall through to application scope.
                }
            }
            removeAttribute(name, APPLICATION_SCOPE);
        } catch (Exception ex) {
            // we remove as much as we can, and
            // simply ignore possible exceptions
        }
    }

Here is a full analysis:

Starting with 'removeAttribute(final String name)'
  - we check for null and throw NPE if necessary

  - we call doRemoveAttribute(name)
  
doRemoveAttribute(name)
  - we call removeAttribute(name, scope) for each scope

removeAttribute(final String name, final int scope)
  - this calls doRemoveAttribute(name, scope)

doRemoveAttribute(name, scope)
  - page scope: attributes.remove -> won't throw an Exception
  - request scope: request.removeAttribute -> no documented Exception thrown
  - session scope: throws IllegalStateException if session is null
  - app scope: context.removeAttribute -> no documented Exception thrown

A null value for name is already checked in removeAttribute(final String name)
and we throw NPE. So this situation (removing an attr from page or request
scope throwing an NPE) won't happen.

In doRemoveAttribute(name), we already check on session != null
before calling removeAttribute(name, SESSION_SCOPE). So there
normally is no IllegalStateException thrown (except for the invalidated
case).

When removing an attribute from application (i.e., ServletContext)
scope, any registered listeners will be notified, but the code that
does that (see
appserv-webtier/src/java/org/apache/catalina/core/ApplicationContext.
removeAttribute()) already catches any Throwable that a listener
may throw.

The try/catch block is therefore unnecessary.
Moreover, if any of the removal actions from the different scopes could
have thrown an exception, each of them would have needed to be wrapped
inside their own try/catch, so as to ensure that an exception in one
scope does not cause any of the subsequent removals to be bypassed.

doRemoveAttribute(String name) has therefore been modified as follows:

    private void doRemoveAttribute(String name){
            removeAttribute(name, PAGE_SCOPE);
            removeAttribute(name, REQUEST_SCOPE);
            if( session != null ) {
                try {
                    removeAttribute(name, SESSION_SCOPE);
                } catch (IllegalStateException ex) {
                    // Session has been invalidated.
                    // Ignore and fall through to application scope.
                }
            }
            removeAttribute(name, APPLICATION_SCOPE);
    }

--------------------------
Changes done on glassfish. ymmv on jasper for the diffs.

--- PageContextImpl.java	9 Dec 2005 18:54:30 -0000	1.7
+++ PageContextImpl.java	16 Dec 2005 00:11:21 -0000	1.8
@@ -452,8 +452,13 @@
             return REQUEST_SCOPE;
 
         if (session != null) {
+            try {
             if (session.getAttribute(name) != null)
                 return SESSION_SCOPE;
+            } catch (IllegalStateException ex) {
+ 	        // Session has been invalidated.
+                // Ignore and fall through to application scope.
+            }
         }
 
         if (context.getAttribute(name) != null)
@@ -495,9 +500,14 @@
             return o;
 
         if (session != null) {
+	    try {
             o = session.getAttribute(name);
-            if (o != null)
-                return o;
+ 	    } catch (IllegalStateException ex) {
+ 	        // Session has been invalidated.
+                // Ignore and fall through to application scope.
+ 	    }
+
+ 	    if (o != null) return o;
         }
 
         return context.getAttribute(name);
@@ -559,19 +569,18 @@
         }
     }
 
-
     private void doRemoveAttribute(String name){
-        try {
             removeAttribute(name, PAGE_SCOPE);
             removeAttribute(name, REQUEST_SCOPE);
             if( session != null ) {
+            try {
                 removeAttribute(name, SESSION_SCOPE);
+            } catch (IllegalStateException ex) {
+                // Session has been invalidated.
+                // Ignore and fall through to application scope.
             }
-            removeAttribute(name, APPLICATION_SCOPE);
-        } catch (Exception ex) {
-            // we remove as much as we can, and
-            // simply ignore possible exceptions
         }
+        removeAttribute(name, APPLICATION_SCOPE);
     }
 
     public JspWriter getOut() {","javax servlet http http session httpsession method get attribut getattribut get valu getvalu get attribut name getattributenam get valu name getvaluenam etc throw illeg state except illegalstateexcept call session invalid follow code jsp page session invalid object obj page context pagecontext find attribut findattribut foo illeg state except illegalstateexcept thrown page context pagecontext find attribut findattribut eventu call session get attribut getattribut session invalid session invalid simpli ignor method need process variou scope page request session applic impact follow method page context impl pagecontextimpl public int get attribut scope getattributesscop final string name call privat int do get attribut scope dogetattributescop string name public object find attribut findattribut final string name call privat object do find attribut dofindattribut string name public void remov attribut removeattribut final string name call privat void do remov attribut doremoveattribut string name fix catch illeg state except illegalstateexcept ignor process attribut session scope code simpli follow process applic scope need worri set attribut setattribut alway invok specif scope spec alreadi state java lang illeg state except illegalstateexcept must thrown call invalid session page context pagecontext set attribut setattribut foo valu foo page context pagecontext session scope java lang illeg state except illegalstateexcept scope page context pagecontext session scope page request particip session session invalid time fix done method do remov attribut doremoveattribut string name tri catch block except appear unnecessari privat void do remov attribut doremoveattribut string name tri remov attribut removeattribut name page scope remov attribut removeattribut name request scope session null tri remov attribut removeattribut name session scope catch illeg state except illegalstateexcept ex session invalid ignor fall applic scope remov attribut removeattribut name applic scope catch except ex remov much simpli ignor possibl except full analysi start remov attribut removeattribut final string name check null throw npe necessari call do remov attribut doremoveattribut name do remov attribut doremoveattribut name call remov attribut removeattribut name scope scope remov attribut removeattribut final string name final int scope call do remov attribut doremoveattribut name scope do remov attribut doremoveattribut name scope page scope attribut remov won throw except request scope request remov attribut removeattribut document except thrown session scope throw illeg state except illegalstateexcept session null app scope context remov attribut removeattribut document except thrown null valu name alreadi check remov attribut removeattribut final string name throw npe situat remov attr page request scope throw npe won happen do remov attribut doremoveattribut name alreadi check session null call remov attribut removeattribut name session scope normal illeg state except illegalstateexcept thrown except invalid case remov attribut applic servlet context servletcontext scope regist listen notifi code see appserv webtier appservwebti src java apach catalina core applic context applicationcontext remov attribut removeattribut alreadi catch throwabl listen may throw tri catch block therefor unnecessari moreov remov action differ scope could thrown except would need wrap insid tri catch ensur except one scope caus subsequ remov bypass do remov attribut doremoveattribut string name therefor modifi follow privat void do remov attribut doremoveattribut string name remov attribut removeattribut name page scope remov attribut removeattribut name request scope session null tri remov attribut removeattribut name session scope catch illeg state except illegalstateexcept ex session invalid ignor fall applic scope remov attribut removeattribut name applic scope chang done glassfish ymmv jasper diff page context impl pagecontextimpl java dec page context impl pagecontextimpl java dec return request scope session null tri session get attribut getattribut name null return session scope catch illeg state except illegalstateexcept ex session invalid ignor fall applic scope context get attribut getattribut name null return session null tri session get attribut getattribut name null return catch illeg state except illegalstateexcept ex session invalid ignor fall applic scope null return return context get attribut getattribut name privat void do remov attribut doremoveattribut string name tri remov attribut removeattribut name page scope remov attribut removeattribut name request scope session null tri remov attribut removeattribut name session scope catch illeg state except illegalstateexcept ex session invalid ignor fall applic scope remov attribut removeattribut name applic scope catch except ex remov much simpli ignor possibl except remov attribut removeattribut name applic scope public jsp writer jspwriter get out getout","""java/org/apache/jasper/runtime/PageContextImpl.java""","2","2","2","1","13","1","11","1","14","2","1","61","61","59","15","61","1","15","0","45","948","149","699","147","453","102","309","458","141","317","10","10","12","6","3","0","159","147","165","70","normal"
"37933","1297","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=38797 Revert previous fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=37933 and implement an alternative that doesn't have the side effects described in 38797","Bug 37933  Bugs in Tomcat","bug tomcat","","","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","35","3","27","5","12","6","4","112","112","106","46","112","11","51","0","50","4178","507","2978","495","2331","720","1825","2314","479","1835","21","21","28","20","5","0","493","487","550","202","major"
"37933","1297","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=38797 Revert previous fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=37933 and implement an alternative that doesn't have the side effects described in 38797","Bug 37933  Bugs in Tomcat","bug tomcat","","","""java/org/apache/jasper/compiler/PageInfo.java""","1","1","1","1","5","0","4","0","1","0","0","81","81","81","44","81","1","0","0","80","710","134","419","156","197","159","191","301","143","158","4","4","5","1","2","0","111","111","117","81","major"
"37984","1288","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=37984 Strip {MD5} as well as {SHA} from digested passwords","Bug 37984  JNDIRealm.java not able to handle MD5 password","realm jndirealm java abl handl d5 md5 password","I'm using JNDIRealm to authenticate to OpenLDAP 2.2.28.  Within OpenLDAP I've
configured the userPassword attribute for each user to contain the MD5 digest,
and each is prefixed with the string ""{MD5}"".  I am not an LDAP expert by any
means but I believe this prefix is a standard convention.  Anyway assuming this
is a convention then JNDIRealm needs to strip off the ""{MD5}"" portion much like
it does with ""{SHA1}"".  See attached patch which accomplishes this and I
verified it works in my environment.","use realm jndirealm authent open openldap within open openldap configur user password userpassword attribut user contain d5 md5 digest prefix string d5 md5 ldap expert mean believ prefix standard convent anyway assum convent realm jndirealm need strip d5 md5 portion much like a1 sha1 see attach patch accomplish verifi work environ","""java/org/apache/catalina/realm/JNDIRealm.java""","3","3","3","1","22","3","11","7","2","0","3","72","72","72","32","72","1","2","21","48","2185","464","917","271","614","807","449","669","236","433","28","28","33","14","7","1","221","217","243","118","normal"
"38197","1121","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=38197 Take account of jsp:attribute elements when naming tag pools","Bug 38197  taglib pool bug when tag is used with jsp:attribute","taglib pool tag use jsp attribut","","","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","35","3","27","5","12","6","4","112","112","106","46","112","11","51","0","50","4180","507","2981","495","2334","719","1821","2310","477","1833","21","21","28","20","5","0","493","487","550","202","major"
"38216","2195","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=38216 Add the ability to invoke MBean operations through the JMXProxy Based on a patch by Christopher Hlubek Also improved error reporting to help debugging.","Bug 38216  Extend Jmxproxy to allow call of MBean Operations","extend jmxproxi allow call bean mbean oper","Currently one can only query Beans or set/get Attributes of them. It would be
good if a certain operation of a MBean could be called by the Jmxproxy Servlet.","current one queri bean set get attribut would good certain oper bean mbean could call jmxproxi servlet","""java/org/apache/catalina/manager/JMXProxyServlet.java""","2","2","2","1","16","1","12","3","1","0","1","6","6","6","2","6","0","0","0","6","164","25","93","40","50","46","53","67","35","32","5","5","5","4","1","0","13","13","13","9","enhancement"
"38352","1243","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=38352 The JSPLoader needs to have read/write permission to the context's temp directory, as per the spec.","Bug 38352  Additional Entries for Default catalina.policy file.","addit entri default catalina polici file","This patch adds additional entries to the catalina.policy file. Specifically:

The catalina.base/shared directory is added and given equal permissions to
catalina.home/common

java.io.tmpdir is now readable.
javax.servlet.context.tempdir is now readable. I think to be compliant with the
spec, this must be allowed.

Directory specified by java.io.tmpdir (which is what tomcat points
javax.servlet.context.tempdir to) is now read, write, delete. Again, I think the
spec requires this.","patch add addit entri catalina polici file specif catalina base share directori ad given equal permiss catalina home common java tmpdir readabl javax servlet context tempdir readabl think compliant spec must allow directori specifi java tmpdir tomcat point javax servlet context tempdir read write delet think spec requir","""java/org/apache/jasper/compiler/JspRuntimeContext.java""","2","2","3","1","19","1","11","5","1","0","0","16","16","16","12","16","0","2","0","14","447","60","245","72","149","142","124","172","74","98","13","13","15","3","5","1","45","45","50","18","normal"
"38553","1092","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=38553 A lack of certs is normal if the user doesn't have a trusted cert. Return 401, not 400 in this case.","Bug 38553  Wrong HTTP code for failed CLIENT-CERT authentication","wrong http code fail client cert authent","server.xml:
===========
I set clientAuth to ""want""

tomcat-user.xml:
================
I create a role and an user with the ssl certificate metadata

web.xml:
========
For a private URL on my webseite, I create a security constraint like this one:

 <security-constraint>
	<web-resource-collection>
	<web-resource-name>App</web-resource-name>
	    <url-pattern>/protected.jsp</url-pattern>
	</web-resource-collection>
	<auth-constraint>
	    <role-name>tomcat</role-name>
	</auth-constraint>
	<user-data-constraint>
	    <transport-guarantee>CONFIDENTIAL</transport-guarantee>
	</user-data-constraint>
    </security-constraint>

    <login-config>
      <auth-method>CLIENT-CERT</auth-method> 
    </login-config>

    <security-role>
      <role-name>tomcat</role-name>
    </security-role>

My results: (I try to access the restricted JSP-Page)
===========
1) When there is the RIGHT client certificate in the browser keystore:
it works :-)

2) When there is the WRONG client certificate I get:

  HTTP Status 401 - Cannot authenticate with the provided credentials
  (this is ok, too)

3) When there is NO client certificate I get:

  HTTP Status 400 - No client certificate chain in this request

400 usually stands for a bad request or bad syntax. 

The Bug:
========
In case 3 I expect to get HTTP Status 401.","server xml set client auth clientauth tomcat user tomcatus xml creat role user ssl certif metadata web xml privat url webseit creat secur constraint like one secur constraint securityconstraint web resourc collect webresourcecollect web resourc name webresourcenam app web resourc name webresourcenam url pattern urlpattern protect jsp url pattern urlpattern web resourc collect webresourcecollect auth constraint authconstraint role name rolenam tomcat role name rolenam auth constraint authconstraint user data constraint userdataconstraint transport guarante transportguarante confidenti transport guarante transportguarante user data constraint userdataconstraint secur constraint securityconstraint login config loginconfig auth method authmethod client cert auth method authmethod login config loginconfig secur role securityrol role name rolenam tomcat role name rolenam secur role securityrol result tri access restrict jsp page right client certif browser keystor work wrong client certif get http statu cannot authent provid credenti ok client certif get http statu client certif chain request usual stand bad request bad syntax case expect get http statu","""java/org/apache/catalina/authenticator/SSLAuthenticator.java""","3","3","3","1","31","3","12","15","1","0","1","4","4","4","0","4","0","0","0","4","197","41","67","26","37","89","33","47","20","27","10","10","12","4","2","1","13","13","15","7","normal"
"38570","1096","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=38570 When checking docBase against appBase, make sure we check for an exact match against the appBase","Bug 38570  if docBase path contains ""webapps"", a backslash is inserted","doc base docbas path contain webapp backslash insert","","","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","6","1","37","3","27","6","2","2","10","30","30","28","7","30","0","0","20","10","1385","226","882","190","631","281","448","643","182","461","20","20","23","14","4","0","193","193","207","48","null"
"38676","182","Remy Maucherat","- Add two lost Jasper patches (which were applied to the old Jasper/TC6 repository). - 38676 - 39803 (not sure if the fix is complete)","Bug 38676  permanently reloading tagfile classes without changes to the tagfile","perman reload tagfil class without chang tagfil","Scenario:

- jsp with a tag in it (tagfile, no taglib)
- activate ""reloading"" in web.xml
- clean work directory
- start tomcat
- load jsp

Tomcat generates/compiles/load the jsp and the tagfile classes. After
""checkInterval"" seconds the background compile thread ""JspRuntimeContext[\*]""
loads the tagfile classes (and only them) again and again. This produces a lot
of work for the garbage collector. (permanently class unloading of tagfile classes)

A Breakpoint in the method loadTagFile() in JspServletWrapper.java will show
this. Perhaps the reload flag must be set to false after loading the TagFile?

JspServletWrapper.java:
...

if(reload) {
   tagHandlerClass = ctxt.load();
   reload = false;  //perhaps, this solves the problem but i am not shure
}

...

After restarting the server the problem is not present because no
JspServletWrapper is instantiated for the tagfile an therefore the backround
compile task does not check the tagfile.","scenario jsp tag tagfil taglib activ reload web xml clean work directori start tomcat load jsp tomcat gener compil load jsp tagfil class check interv checkinterv second background compil thread jsp runtim context jspruntimecontext load tagfil class produc lot work garbag collector perman class unload tagfil class breakpoint method load tag file loadtagfil jsp servlet wrapper jspservletwrapp java show perhap reload flag must set fals load tag file tagfil jsp servlet wrapper jspservletwrapp java reload tag handler class taghandlerclass ctxt load reload fals perhap solv problem shure restart server problem present jsp servlet wrapper jspservletwrapp instanti tagfil therefor backround compil task check tagfil","""java/org/apache/el/lang/ELSupport.java""","4","4","7","4","18","0","16","1","1","20","2","21","21","1","0","21","0","0","2","19","442","37","356","66","229","49","125","216","56","160","11","11","22","11","3","0","94","92","156","91","normal"
"38676","182","Remy Maucherat","- Add two lost Jasper patches (which were applied to the old Jasper/TC6 repository). - 38676 - 39803 (not sure if the fix is complete)","Bug 38676  permanently reloading tagfile classes without changes to the tagfile","perman reload tagfil class without chang tagfil","Scenario:

- jsp with a tag in it (tagfile, no taglib)
- activate ""reloading"" in web.xml
- clean work directory
- start tomcat
- load jsp

Tomcat generates/compiles/load the jsp and the tagfile classes. After
""checkInterval"" seconds the background compile thread ""JspRuntimeContext[\*]""
loads the tagfile classes (and only them) again and again. This produces a lot
of work for the garbage collector. (permanently class unloading of tagfile classes)

A Breakpoint in the method loadTagFile() in JspServletWrapper.java will show
this. Perhaps the reload flag must be set to false after loading the TagFile?

JspServletWrapper.java:
...

if(reload) {
   tagHandlerClass = ctxt.load();
   reload = false;  //perhaps, this solves the problem but i am not shure
}

...

After restarting the server the problem is not present because no
JspServletWrapper is instantiated for the tagfile an therefore the backround
compile task does not check the tagfile.","scenario jsp tag tagfil taglib activ reload web xml clean work directori start tomcat load jsp tomcat gener compil load jsp tagfil class check interv checkinterv second background compil thread jsp runtim context jspruntimecontext load tagfil class produc lot work garbag collector perman class unload tagfil class breakpoint method load tag file loadtagfil jsp servlet wrapper jspservletwrapp java show perhap reload flag must set fals load tag file tagfil jsp servlet wrapper jspservletwrapp java reload tag handler class taghandlerclass ctxt load reload fals perhap solv problem shure restart server problem present jsp servlet wrapper jspservletwrapp instanti tagfil therefor backround compil task check tagfil","""java/org/apache/jasper/servlet/JspServletWrapper.java""","3","3","3","1","20","1","15","4","1","0","0","20","20","20","16","20","1","1","1","17","530","59","352","103","205","121","159","228","89","139","21","21","23","8","5","0","68","68","72","36","normal"
"38713","193","Remy Maucherat","- Separate processing of exceptions from the servlet (so that IOE doesn't cause problems anymore: bug 38713). - Only Compiler will attempt to remove the files (before the compilation), otherwise multiple things can happen   in parallel. - Code cleanup (I suppose I'll have to do a big cleanup soon ...).","Bug 38713  java.io.IOException: tmpFile.renameTo(classFile) failed when compiling new JSP (upon redeploy)","java except ioexcept tmp file tmpfile renam to renameto class file classfil fail compil new jsp upon redeploy","[http-8080-Processor24 ERROR 26902165 DispatcherServlet.serviceWrapper()] -
Could not complete request
org.apache.jasper.JasperException: Unable to compile class for JSP
        at
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:565)
        at
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:293)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:291)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at
org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:672)
        at
org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:463)
        at
org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:398)
        at
org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:301)
        at
org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:97)
        at
org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
        at
org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:928)
        at
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:705)
        at
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:625)
        at
org.springframework.web.servlet.FrameworkServlet.serviceWrapper(FrameworkServlet.java:386)
        at
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:346)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
        at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
        at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
        at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
        at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
        at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
        at
org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at
org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
        at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
        at java.lang.Thread.run(Thread.java:595)
[http-8080-Processor24 ERROR 26902165 [wirelessapp].invoke()] -
Servlet.service() for servlet wirelessapp threw exception
java.io.IOException: tmpFile.renameTo(classFile) failed
        at
org.apache.jasper.compiler.SmapUtil$SDEInstaller.install(SmapUtil.java:245)
        at org.apache.jasper.compiler.SmapUtil.installSmap(SmapUtil.java:164)
        at
org.apache.jasper.compiler.AntCompiler.generateClass(AntCompiler.java:267)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:288)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:267)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:255)
        at
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:556)
        at
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:293)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:291)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at
org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:672)
        at
org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:463)
        at
org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:398)
        at
org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:301)
        at
org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:97)
        at
org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
        at
org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:928)
        at
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:705)
        at
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:625)
        at
org.springframework.web.servlet.FrameworkServlet.serviceWrapper(FrameworkServlet.java:386)
        at
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:346)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
        at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
        at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
        at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
        at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
        at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
        at
org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at
org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
        at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
        at java.lang.Thread.run(Thread.java:595)","http processor24 error dispatch servlet dispatcherservlet servic wrapper servicewrapp could complet request apach jasper jasper except jasperexcept unabl compil class jsp apach jasper jsp compil context jspcompilationcontext compil jsp compil context jspcompilationcontext java apach jasper servlet jsp servlet wrapper jspservletwrapp servic jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet jspservlet servic jsp file servicejspfil jsp servlet jspservlet java apach jasper servlet jsp servlet jspservlet servic jsp servlet jspservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core applic dispatch applicationdispatch invok applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch process request processrequest applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch do forward doforward applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch forward applic dispatch applicationdispatch java springframework web servlet view intern resourc view internalresourceview render merg output model rendermergedoutputmodel intern resourc view internalresourceview java springframework web servlet view abstract view abstractview render abstract view abstractview java springframework web servlet dispatch servlet dispatcherservlet render dispatch servlet dispatcherservlet java springframework web servlet dispatch servlet dispatcherservlet do dispatch dodispatch dispatch servlet dispatcherservlet java springframework web servlet dispatch servlet dispatcherservlet do servic doservic dispatch servlet dispatcherservlet java springframework web servlet framework servlet frameworkservlet servic wrapper servicewrapp framework servlet frameworkservlet java springframework web servlet framework servlet frameworkservlet do get doget framework servlet frameworkservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process connect processconnect http11 protocol http11protocol java apach tomcat util net pool tcp endpoint pooltcpendpoint process socket processsocket pool tcp endpoint pooltcpendpoint java apach tomcat util net leader follow worker thread leaderfollowerworkerthread run it runit leader follow worker thread leaderfollowerworkerthread java apach tomcat util thread thread pool threadpool control runnabl controlrunn run thread pool threadpool java java lang thread run thread java http processor24 error wirelessapp invok servlet servic servlet wirelessapp threw except java except ioexcept tmp file tmpfile renam to renameto class file classfil fail apach jasper compil smap util smaputil instal sdeinstal instal smap util smaputil java apach jasper compil smap util smaputil instal smap installsmap smap util smaputil java apach jasper compil ant compil antcompil gener class generateclass ant compil antcompil java apach jasper compil compil compil compil java apach jasper compil compil compil compil java apach jasper compil compil compil compil java apach jasper jsp compil context jspcompilationcontext compil jsp compil context jspcompilationcontext java apach jasper servlet jsp servlet wrapper jspservletwrapp servic jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet jspservlet servic jsp file servicejspfil jsp servlet jspservlet java apach jasper servlet jsp servlet jspservlet servic jsp servlet jspservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core applic dispatch applicationdispatch invok applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch process request processrequest applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch do forward doforward applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch forward applic dispatch applicationdispatch java springframework web servlet view intern resourc view internalresourceview render merg output model rendermergedoutputmodel intern resourc view internalresourceview java springframework web servlet view abstract view abstractview render abstract view abstractview java springframework web servlet dispatch servlet dispatcherservlet render dispatch servlet dispatcherservlet java springframework web servlet dispatch servlet dispatcherservlet do dispatch dodispatch dispatch servlet dispatcherservlet java springframework web servlet dispatch servlet dispatcherservlet do servic doservic dispatch servlet dispatcherservlet java springframework web servlet framework servlet frameworkservlet servic wrapper servicewrapp framework servlet frameworkservlet java springframework web servlet framework servlet frameworkservlet do get doget framework servlet frameworkservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process connect processconnect http11 protocol http11protocol java apach tomcat util net pool tcp endpoint pooltcpendpoint process socket processsocket pool tcp endpoint pooltcpendpoint java apach tomcat util net leader follow worker thread leaderfollowerworkerthread run it runit leader follow worker thread leaderfollowerworkerthread java apach tomcat util thread thread pool threadpool control runnabl controlrunn run thread pool threadpool java java lang thread run thread java","""java/org/apache/jasper/JspCompilationContext.java""","2","1","2","1","10","0","7","2","1","2","1","52","52","50","31","52","0","6","0","46","705","92","445","139","236","168","205","306","124","182","13","11","17","9","6","0","104","102","111","62","normal"
"38713","193","Remy Maucherat","- Separate processing of exceptions from the servlet (so that IOE doesn't cause problems anymore: bug 38713). - Only Compiler will attempt to remove the files (before the compilation), otherwise multiple things can happen   in parallel. - Code cleanup (I suppose I'll have to do a big cleanup soon ...).","Bug 38713  java.io.IOException: tmpFile.renameTo(classFile) failed when compiling new JSP (upon redeploy)","java except ioexcept tmp file tmpfile renam to renameto class file classfil fail compil new jsp upon redeploy","[http-8080-Processor24 ERROR 26902165 DispatcherServlet.serviceWrapper()] -
Could not complete request
org.apache.jasper.JasperException: Unable to compile class for JSP
        at
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:565)
        at
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:293)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:291)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at
org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:672)
        at
org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:463)
        at
org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:398)
        at
org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:301)
        at
org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:97)
        at
org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
        at
org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:928)
        at
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:705)
        at
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:625)
        at
org.springframework.web.servlet.FrameworkServlet.serviceWrapper(FrameworkServlet.java:386)
        at
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:346)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
        at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
        at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
        at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
        at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
        at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
        at
org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at
org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
        at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
        at java.lang.Thread.run(Thread.java:595)
[http-8080-Processor24 ERROR 26902165 [wirelessapp].invoke()] -
Servlet.service() for servlet wirelessapp threw exception
java.io.IOException: tmpFile.renameTo(classFile) failed
        at
org.apache.jasper.compiler.SmapUtil$SDEInstaller.install(SmapUtil.java:245)
        at org.apache.jasper.compiler.SmapUtil.installSmap(SmapUtil.java:164)
        at
org.apache.jasper.compiler.AntCompiler.generateClass(AntCompiler.java:267)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:288)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:267)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:255)
        at
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:556)
        at
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:293)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:291)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at
org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:672)
        at
org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:463)
        at
org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:398)
        at
org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:301)
        at
org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:97)
        at
org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
        at
org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:928)
        at
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:705)
        at
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:625)
        at
org.springframework.web.servlet.FrameworkServlet.serviceWrapper(FrameworkServlet.java:386)
        at
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:346)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
        at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
        at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
        at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
        at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
        at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
        at
org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at
org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
        at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
        at java.lang.Thread.run(Thread.java:595)","http processor24 error dispatch servlet dispatcherservlet servic wrapper servicewrapp could complet request apach jasper jasper except jasperexcept unabl compil class jsp apach jasper jsp compil context jspcompilationcontext compil jsp compil context jspcompilationcontext java apach jasper servlet jsp servlet wrapper jspservletwrapp servic jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet jspservlet servic jsp file servicejspfil jsp servlet jspservlet java apach jasper servlet jsp servlet jspservlet servic jsp servlet jspservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core applic dispatch applicationdispatch invok applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch process request processrequest applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch do forward doforward applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch forward applic dispatch applicationdispatch java springframework web servlet view intern resourc view internalresourceview render merg output model rendermergedoutputmodel intern resourc view internalresourceview java springframework web servlet view abstract view abstractview render abstract view abstractview java springframework web servlet dispatch servlet dispatcherservlet render dispatch servlet dispatcherservlet java springframework web servlet dispatch servlet dispatcherservlet do dispatch dodispatch dispatch servlet dispatcherservlet java springframework web servlet dispatch servlet dispatcherservlet do servic doservic dispatch servlet dispatcherservlet java springframework web servlet framework servlet frameworkservlet servic wrapper servicewrapp framework servlet frameworkservlet java springframework web servlet framework servlet frameworkservlet do get doget framework servlet frameworkservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process connect processconnect http11 protocol http11protocol java apach tomcat util net pool tcp endpoint pooltcpendpoint process socket processsocket pool tcp endpoint pooltcpendpoint java apach tomcat util net leader follow worker thread leaderfollowerworkerthread run it runit leader follow worker thread leaderfollowerworkerthread java apach tomcat util thread thread pool threadpool control runnabl controlrunn run thread pool threadpool java java lang thread run thread java http processor24 error wirelessapp invok servlet servic servlet wirelessapp threw except java except ioexcept tmp file tmpfile renam to renameto class file classfil fail apach jasper compil smap util smaputil instal sdeinstal instal smap util smaputil java apach jasper compil smap util smaputil instal smap installsmap smap util smaputil java apach jasper compil ant compil antcompil gener class generateclass ant compil antcompil java apach jasper compil compil compil compil java apach jasper compil compil compil compil java apach jasper compil compil compil compil java apach jasper jsp compil context jspcompilationcontext compil jsp compil context jspcompilationcontext java apach jasper servlet jsp servlet wrapper jspservletwrapp servic jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet jspservlet servic jsp file servicejspfil jsp servlet jspservlet java apach jasper servlet jsp servlet jspservlet servic jsp servlet jspservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core applic dispatch applicationdispatch invok applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch process request processrequest applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch do forward doforward applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch forward applic dispatch applicationdispatch java springframework web servlet view intern resourc view internalresourceview render merg output model rendermergedoutputmodel intern resourc view internalresourceview java springframework web servlet view abstract view abstractview render abstract view abstractview java springframework web servlet dispatch servlet dispatcherservlet render dispatch servlet dispatcherservlet java springframework web servlet dispatch servlet dispatcherservlet do dispatch dodispatch dispatch servlet dispatcherservlet java springframework web servlet dispatch servlet dispatcherservlet do servic doservic dispatch servlet dispatcherservlet java springframework web servlet framework servlet frameworkservlet servic wrapper servicewrapp framework servlet frameworkservlet java springframework web servlet framework servlet frameworkservlet do get doget framework servlet frameworkservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process connect processconnect http11 protocol http11protocol java apach tomcat util net pool tcp endpoint pooltcpendpoint process socket processsocket pool tcp endpoint pooltcpendpoint java apach tomcat util net leader follow worker thread leaderfollowerworkerthread run it runit leader follow worker thread leaderfollowerworkerthread java apach tomcat util thread thread pool threadpool control runnabl controlrunn run thread pool threadpool java java lang thread run thread java","""java/org/apache/jasper/compiler/Compiler.java""","4","4","4","2","31","3","20","7","1","0","1","13","14","14","8","14","0","0","2","12","501","78","289","74","189","134","143","203","68","135","17","17","18","13","3","0","58","58","60","27","normal"
"38713","193","Remy Maucherat","- Separate processing of exceptions from the servlet (so that IOE doesn't cause problems anymore: bug 38713). - Only Compiler will attempt to remove the files (before the compilation), otherwise multiple things can happen   in parallel. - Code cleanup (I suppose I'll have to do a big cleanup soon ...).","Bug 38713  java.io.IOException: tmpFile.renameTo(classFile) failed when compiling new JSP (upon redeploy)","java except ioexcept tmp file tmpfile renam to renameto class file classfil fail compil new jsp upon redeploy","[http-8080-Processor24 ERROR 26902165 DispatcherServlet.serviceWrapper()] -
Could not complete request
org.apache.jasper.JasperException: Unable to compile class for JSP
        at
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:565)
        at
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:293)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:291)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at
org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:672)
        at
org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:463)
        at
org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:398)
        at
org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:301)
        at
org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:97)
        at
org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
        at
org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:928)
        at
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:705)
        at
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:625)
        at
org.springframework.web.servlet.FrameworkServlet.serviceWrapper(FrameworkServlet.java:386)
        at
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:346)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
        at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
        at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
        at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
        at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
        at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
        at
org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at
org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
        at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
        at java.lang.Thread.run(Thread.java:595)
[http-8080-Processor24 ERROR 26902165 [wirelessapp].invoke()] -
Servlet.service() for servlet wirelessapp threw exception
java.io.IOException: tmpFile.renameTo(classFile) failed
        at
org.apache.jasper.compiler.SmapUtil$SDEInstaller.install(SmapUtil.java:245)
        at org.apache.jasper.compiler.SmapUtil.installSmap(SmapUtil.java:164)
        at
org.apache.jasper.compiler.AntCompiler.generateClass(AntCompiler.java:267)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:288)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:267)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:255)
        at
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:556)
        at
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:293)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:291)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at
org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:672)
        at
org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:463)
        at
org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:398)
        at
org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:301)
        at
org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:97)
        at
org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
        at
org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:928)
        at
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:705)
        at
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:625)
        at
org.springframework.web.servlet.FrameworkServlet.serviceWrapper(FrameworkServlet.java:386)
        at
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:346)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
        at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
        at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
        at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
        at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
        at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
        at
org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at
org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
        at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
        at java.lang.Thread.run(Thread.java:595)","http processor24 error dispatch servlet dispatcherservlet servic wrapper servicewrapp could complet request apach jasper jasper except jasperexcept unabl compil class jsp apach jasper jsp compil context jspcompilationcontext compil jsp compil context jspcompilationcontext java apach jasper servlet jsp servlet wrapper jspservletwrapp servic jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet jspservlet servic jsp file servicejspfil jsp servlet jspservlet java apach jasper servlet jsp servlet jspservlet servic jsp servlet jspservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core applic dispatch applicationdispatch invok applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch process request processrequest applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch do forward doforward applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch forward applic dispatch applicationdispatch java springframework web servlet view intern resourc view internalresourceview render merg output model rendermergedoutputmodel intern resourc view internalresourceview java springframework web servlet view abstract view abstractview render abstract view abstractview java springframework web servlet dispatch servlet dispatcherservlet render dispatch servlet dispatcherservlet java springframework web servlet dispatch servlet dispatcherservlet do dispatch dodispatch dispatch servlet dispatcherservlet java springframework web servlet dispatch servlet dispatcherservlet do servic doservic dispatch servlet dispatcherservlet java springframework web servlet framework servlet frameworkservlet servic wrapper servicewrapp framework servlet frameworkservlet java springframework web servlet framework servlet frameworkservlet do get doget framework servlet frameworkservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process connect processconnect http11 protocol http11protocol java apach tomcat util net pool tcp endpoint pooltcpendpoint process socket processsocket pool tcp endpoint pooltcpendpoint java apach tomcat util net leader follow worker thread leaderfollowerworkerthread run it runit leader follow worker thread leaderfollowerworkerthread java apach tomcat util thread thread pool threadpool control runnabl controlrunn run thread pool threadpool java java lang thread run thread java http processor24 error wirelessapp invok servlet servic servlet wirelessapp threw except java except ioexcept tmp file tmpfile renam to renameto class file classfil fail apach jasper compil smap util smaputil instal sdeinstal instal smap util smaputil java apach jasper compil smap util smaputil instal smap installsmap smap util smaputil java apach jasper compil ant compil antcompil gener class generateclass ant compil antcompil java apach jasper compil compil compil compil java apach jasper compil compil compil compil java apach jasper compil compil compil compil java apach jasper jsp compil context jspcompilationcontext compil jsp compil context jspcompilationcontext java apach jasper servlet jsp servlet wrapper jspservletwrapp servic jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet jspservlet servic jsp file servicejspfil jsp servlet jspservlet java apach jasper servlet jsp servlet jspservlet servic jsp servlet jspservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core applic dispatch applicationdispatch invok applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch process request processrequest applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch do forward doforward applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch forward applic dispatch applicationdispatch java springframework web servlet view intern resourc view internalresourceview render merg output model rendermergedoutputmodel intern resourc view internalresourceview java springframework web servlet view abstract view abstractview render abstract view abstractview java springframework web servlet dispatch servlet dispatcherservlet render dispatch servlet dispatcherservlet java springframework web servlet dispatch servlet dispatcherservlet do dispatch dodispatch dispatch servlet dispatcherservlet java springframework web servlet dispatch servlet dispatcherservlet do servic doservic dispatch servlet dispatcherservlet java springframework web servlet framework servlet frameworkservlet servic wrapper servicewrapp framework servlet frameworkservlet java springframework web servlet framework servlet frameworkservlet do get doget framework servlet frameworkservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process connect processconnect http11 protocol http11protocol java apach tomcat util net pool tcp endpoint pooltcpendpoint process socket processsocket pool tcp endpoint pooltcpendpoint java apach tomcat util net leader follow worker thread leaderfollowerworkerthread run it runit leader follow worker thread leaderfollowerworkerthread java apach tomcat util thread thread pool threadpool control runnabl controlrunn run thread pool threadpool java java lang thread run thread java","""java/org/apache/jasper/servlet/JspServletWrapper.java""","3","3","3","1","21","1","16","4","1","0","0","20","20","20","16","20","0","1","1","18","549","59","370","105","220","122","168","240","91","149","21","21","23","8","5","0","72","72","76","36","normal"
"39212","481","Mark Emlyn David Thomas","Port fix for 39212. Possible NPE and redundant code.","Bug 39212  a bug in example code DummyCart.java","exampl code dummi cart dummycart java","","","""webapps/examples/WEB-INF/classes/sessions/DummyCart.java""","1","1","1","1","5","0","4","0","1","0","0","7","7","7","3","7","0","3","0","4","69","11","38","15","19","20","19","30","15","15","4","4","4","1","1","1","10","10","10","7","normal"
"39231","1187","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=39231 The JAAS contract for LoginModule says we have to call logout(). This won't always work (eg if there is no session) but is a reasonable effort.","Bug 39231  The JAAS contract for LoginModule is broken","jaa contract login modul loginmodul broken","The issue is that the custom JAAS's LoginModule.logout() method is never 
called. I guess this has been never implemented correctly (at least since 
Tomcat 5.5.9).

The thing is that according to the JAAS spec, the LoginContext.logout() is 
supposed to invoke the logout method for each LoginModule configured for this 
LoginContext.

So, somebody should be sure to call LoginContext.logout() method. The caller 
for this method could be either a server or a client. 

So, either Tomcat should provide some means to access the LoginContext to the 
clients, or Tomcat should take the responsibility to call this method by itself.

I guess the solution could be for Tomcat to associate the instance of 
LoginContext with the user's session, and then Tomcat could invoke 
LoginContext.logout() when the session is being invalidated (both when the 
session times out or invalidated explicitely).

I hope that I am correctly interpreting the JAAS spec.","issu custom jaa login modul loginmodul logout method never call guess never implement correctli least sinc tomcat thing accord jaa spec login context logincontext logout suppos invok logout method login modul loginmodul configur login context logincontext somebodi sure call login context logincontext logout method caller method could either server client either tomcat provid mean access login context logincontext client tomcat take respons call method guess solut could tomcat associ instanc login context logincontext user session tomcat could invok login context logincontext logout session invalid session time invalid explicit hope correctli interpret jaa spec","""java/org/apache/catalina/realm/GenericPrincipal.java""","1","1","1","1","9","0","5","3","1","0","0","11","11","11","5","11","1","0","0","10","200","47","72","25","38","82","38","56","24","32","3","3","3","3","2","1","17","17","17","13","normal"
"39231","1187","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=39231 The JAAS contract for LoginModule says we have to call logout(). This won't always work (eg if there is no session) but is a reasonable effort.","Bug 39231  The JAAS contract for LoginModule is broken","jaa contract login modul loginmodul broken","The issue is that the custom JAAS's LoginModule.logout() method is never 
called. I guess this has been never implemented correctly (at least since 
Tomcat 5.5.9).

The thing is that according to the JAAS spec, the LoginContext.logout() is 
supposed to invoke the logout method for each LoginModule configured for this 
LoginContext.

So, somebody should be sure to call LoginContext.logout() method. The caller 
for this method could be either a server or a client. 

So, either Tomcat should provide some means to access the LoginContext to the 
clients, or Tomcat should take the responsibility to call this method by itself.

I guess the solution could be for Tomcat to associate the instance of 
LoginContext with the user's session, and then Tomcat could invoke 
LoginContext.logout() when the session is being invalidated (both when the 
session times out or invalidated explicitely).

I hope that I am correctly interpreting the JAAS spec.","issu custom jaa login modul loginmodul logout method never call guess never implement correctli least sinc tomcat thing accord jaa spec login context logincontext logout suppos invok logout method login modul loginmodul configur login context logincontext somebodi sure call login context logincontext logout method caller method could either server client either tomcat provid mean access login context logincontext client tomcat take respons call method guess solut could tomcat associ instanc login context logincontext user session tomcat could invok login context logincontext logout session invalid session time invalid explicit hope correctli interpret jaa spec","""java/org/apache/catalina/realm/JAASRealm.java""","2","2","3","1","18","1","10","6","1","0","4","20","20","20","6","20","0","0","7","13","605","103","238","70","147","264","115","171","64","107","21","21","21","10","4","1","59","59","60","32","normal"
"39231","1187","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=39231 The JAAS contract for LoginModule says we have to call logout(). This won't always work (eg if there is no session) but is a reasonable effort.","Bug 39231  The JAAS contract for LoginModule is broken","jaa contract login modul loginmodul broken","The issue is that the custom JAAS's LoginModule.logout() method is never 
called. I guess this has been never implemented correctly (at least since 
Tomcat 5.5.9).

The thing is that according to the JAAS spec, the LoginContext.logout() is 
supposed to invoke the logout method for each LoginModule configured for this 
LoginContext.

So, somebody should be sure to call LoginContext.logout() method. The caller 
for this method could be either a server or a client. 

So, either Tomcat should provide some means to access the LoginContext to the 
clients, or Tomcat should take the responsibility to call this method by itself.

I guess the solution could be for Tomcat to associate the instance of 
LoginContext with the user's session, and then Tomcat could invoke 
LoginContext.logout() when the session is being invalidated (both when the 
session times out or invalidated explicitely).

I hope that I am correctly interpreting the JAAS spec.","issu custom jaa login modul loginmodul logout method never call guess never implement correctli least sinc tomcat thing accord jaa spec login context logincontext logout suppos invok logout method login modul loginmodul configur login context logincontext somebodi sure call login context logincontext logout method caller method could either server client either tomcat provid mean access login context logincontext client tomcat take respons call method guess solut could tomcat associ instanc login context logincontext user session tomcat could invok login context logincontext logout session invalid session time invalid explicit hope correctli interpret jaa spec","""java/org/apache/catalina/session/StandardSession.java""","2","2","2","1","20","2","10","7","3","0","7","65","65","65","18","65","0","0","7","58","1748","372","731","195","479","647","351","520","190","330","20","20","26","6","4","1","164","164","178","94","normal"
"39396","1021","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=39396 Exclude TRACE in OPTIONS response by default. Include it where we know it is enabled.","Bug 39396  OPTIONS request on directory with no default file reports an incorrect list of allowed HTTP verbs","option request directori default file report incorrect list allow http verb","When an ""options"" http request is made to Tomcat to a directory that has no 
default file (like index.jsp) in it, Tomcat reports a full list of allowed 
verbs, when in fact, most of them are NOT allowed.  For example, a request to 
a generic img directory:

OPTIONS /img/ HTTP/1.0
	Cookie: JSESSIONID=C46C2E18BE95AD91828C9370CBDF0AF2
	Content-Length: 0
	Accept: */*
	Accept-Language: en-us
	Connection: Keep-Alive
	User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; 
SV1; .NET CLR 1.1
	4322; InfoPath.1)

Returns:

HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Allow: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS
Content-Length: 0
Date: Mon, 24 Apr 2006 15:11:16 GMT
Connection: close

Which shows several destructive options available (PUT, DELETE).  But a 
request to DELETE or PUT (correctly) returns a 403 FORBIDDEN result:

DELETE /img/ HTTP/1.0
	Cookie: JSESSIONID=C46C2E18BE95AD91828C9370CBDF0AF2
	Content-Length: 0
	Accept: */*
	Accept-Language: en-us
	Connection: Keep-Alive
	User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; 
SV1; .NET CLR 1.1
	4322; InfoPath.1)

Returns:
HTTP/1.1 403 Forbidden
Server: Apache-Coyote/1.1
Content-Type: text/html;charset=utf-8
Content-Length: 964
Date: Mon, 24 Apr 2006 15:12:31 GMT
Connection: close

Because the initial OPTIONS request returns a list containing dangerous verbs, 
the directory will be flagged as a serious security vulnerability by most 
scanners (a false positive).

The issue DOES NOT occur when the directory HAS a default file in it:
OPTIONS /user_management/ HTTP/1.0
	Cookie: JSESSIONID=C46C2E18BE95AD91828C9370CBDF0AF2
	Content-Length: 0
	Accept: */*
	Accept-Language: en-us
	Connection: Keep-Alive
	User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; 
SV1; .NET CLR 1.1
	4322; InfoPath.1)

Returns:

HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Set-Cookie: JSESSIONID=BC992F0C86E2BCBD0A2E5F1B3A12C50C; Path=/
Content-Type: text/html;charset=ISO-8859-1
Date: Mon, 24 Apr 2006 15:14:27 GMT
Connection: close","option http request made tomcat directori default file like index jsp tomcat report full list allow verb fact allow exampl request gener img directori option img http cooki jsessionid c46 c2 e18 e95 d91828 c9370 f0 f2 c46c2e18be95ad91828c9370cbdf0af2 content length accept accept languag en enu connect keep aliv user agent mozilla compat msie window nt v1 sv1 net clr info path infopath return http ok server apach coyot allow get head post put delet trace option content length date apr gmt connect close show sever destruct option avail put delet request delet put correctli return forbidden result delet img http cooki jsessionid c46 c2 e18 e95 d91828 c9370 f0 f2 c46c2e18be95ad91828c9370cbdf0af2 content length accept accept languag en enu connect keep aliv user agent mozilla compat msie window nt v1 sv1 net clr info path infopath return http forbidden server apach coyot content type text html charset utf content length date apr gmt connect close initi option request return list contain danger verb directori flag seriou secur vulner scanner fals posit issu occur directori default file option user manag http cooki jsessionid c46 c2 e18 e95 d91828 c9370 f0 f2 c46c2e18be95ad91828c9370cbdf0af2 content length accept accept languag en enu connect keep aliv user agent mozilla compat msie window nt v1 sv1 net clr info path infopath return http ok server apach coyot set cooki jsessionid c992 f0 c86 e2 d0 a2 e5 f1 b3 a12 c50 bc992f0c86e2bcbd0a2e5f1b3a12c50c path content type text html charset iso date apr gmt connect close","""java/org/apache/catalina/connector/RequestFacade.java""","1","1","1","1","8","1","6","0","14","0","1","84","84","84","6","84","0","0","1","83","997","315","619","147","308","63","183","351","128","223","4","4","4","1","2","0","154","154","154","84","normal"
"39396","1021","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=39396 Exclude TRACE in OPTIONS response by default. Include it where we know it is enabled.","Bug 39396  OPTIONS request on directory with no default file reports an incorrect list of allowed HTTP verbs","option request directori default file report incorrect list allow http verb","When an ""options"" http request is made to Tomcat to a directory that has no 
default file (like index.jsp) in it, Tomcat reports a full list of allowed 
verbs, when in fact, most of them are NOT allowed.  For example, a request to 
a generic img directory:

OPTIONS /img/ HTTP/1.0
	Cookie: JSESSIONID=C46C2E18BE95AD91828C9370CBDF0AF2
	Content-Length: 0
	Accept: */*
	Accept-Language: en-us
	Connection: Keep-Alive
	User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; 
SV1; .NET CLR 1.1
	4322; InfoPath.1)

Returns:

HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Allow: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS
Content-Length: 0
Date: Mon, 24 Apr 2006 15:11:16 GMT
Connection: close

Which shows several destructive options available (PUT, DELETE).  But a 
request to DELETE or PUT (correctly) returns a 403 FORBIDDEN result:

DELETE /img/ HTTP/1.0
	Cookie: JSESSIONID=C46C2E18BE95AD91828C9370CBDF0AF2
	Content-Length: 0
	Accept: */*
	Accept-Language: en-us
	Connection: Keep-Alive
	User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; 
SV1; .NET CLR 1.1
	4322; InfoPath.1)

Returns:
HTTP/1.1 403 Forbidden
Server: Apache-Coyote/1.1
Content-Type: text/html;charset=utf-8
Content-Length: 964
Date: Mon, 24 Apr 2006 15:12:31 GMT
Connection: close

Because the initial OPTIONS request returns a list containing dangerous verbs, 
the directory will be flagged as a serious security vulnerability by most 
scanners (a false positive).

The issue DOES NOT occur when the directory HAS a default file in it:
OPTIONS /user_management/ HTTP/1.0
	Cookie: JSESSIONID=C46C2E18BE95AD91828C9370CBDF0AF2
	Content-Length: 0
	Accept: */*
	Accept-Language: en-us
	Connection: Keep-Alive
	User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; 
SV1; .NET CLR 1.1
	4322; InfoPath.1)

Returns:

HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Set-Cookie: JSESSIONID=BC992F0C86E2BCBD0A2E5F1B3A12C50C; Path=/
Content-Type: text/html;charset=ISO-8859-1
Date: Mon, 24 Apr 2006 15:14:27 GMT
Connection: close","option http request made tomcat directori default file like index jsp tomcat report full list allow verb fact allow exampl request gener img directori option img http cooki jsessionid c46 c2 e18 e95 d91828 c9370 f0 f2 c46c2e18be95ad91828c9370cbdf0af2 content length accept accept languag en enu connect keep aliv user agent mozilla compat msie window nt v1 sv1 net clr info path infopath return http ok server apach coyot allow get head post put delet trace option content length date apr gmt connect close show sever destruct option avail put delet request delet put correctli return forbidden result delet img http cooki jsessionid c46 c2 e18 e95 d91828 c9370 f0 f2 c46c2e18be95ad91828c9370cbdf0af2 content length accept accept languag en enu connect keep aliv user agent mozilla compat msie window nt v1 sv1 net clr info path infopath return http forbidden server apach coyot content type text html charset utf content length date apr gmt connect close initi option request return list contain danger verb directori flag seriou secur vulner scanner fals posit issu occur directori default file option user manag http cooki jsessionid c46 c2 e18 e95 d91828 c9370 f0 f2 c46c2e18be95ad91828c9370cbdf0af2 content length accept accept languag en enu connect keep aliv user agent mozilla compat msie window nt v1 sv1 net clr info path infopath return http ok server apach coyot set cooki jsessionid c992 f0 c86 e2 d0 a2 e5 f1 b3 a12 c50 bc992f0c86e2bcbd0a2e5f1b3a12c50c path content type text html charset iso date apr gmt connect close","""java/org/apache/catalina/servlets/DefaultServlet.java""","6","6","7","2","48","7","30","10","2","0","6","38","38","38","15","38","0","0","34","4","2144","417","1237","330","899","495","612","841","252","589","42","42","52","14","5","0","228","228","270","109","normal"
"39572","259","Mark Emlyn David Thomas","Port fix bug 39572. Improvements to CompressionFilter provided by Eric Hedstrm. Also cleaned up unused imports and methods.","Bug 39572  fixes to use CompressionFilter in WebSphere app server","fix use compress filter compressionfilt web sphere webspher app server","There are a couple of small bugs in the compression filter classes that are
triggered by using the filter in WebSphere 5.1 or 6. Here are patches.

- CompressionResponseStream should not compress the output stream if the
response has been committed (because then it cannot write the Content-Encoding:
gzip header, and the browser displays the compressed output as-is)
- CompressionServletResponseWrapper causes a NullPointerException if you flush
before writing anything","coupl small bug compress filter class trigger use filter web sphere webspher patch compress respons stream compressionresponsestream compress output stream respons commit cannot write content encod gzip header browser display compress output is asi compress servlet respons wrapper compressionservletresponsewrapp caus null pointer except nullpointerexcept flush write anyth","""webapps/examples/WEB-INF/classes/compressionFilters/CompressionFilterTestServlet.java""","3","3","3","1","22","4","18","0","1","0","0","1","1","1","0","1","0","0","0","1","58","11","26","12","12","21","15","19","11","8","3","3","3","1","2","1","3","3","3","1","normal"
"39572","259","Mark Emlyn David Thomas","Port fix bug 39572. Improvements to CompressionFilter provided by Eric Hedstrm. Also cleaned up unused imports and methods.","Bug 39572  fixes to use CompressionFilter in WebSphere app server","fix use compress filter compressionfilt web sphere webspher app server","There are a couple of small bugs in the compression filter classes that are
triggered by using the filter in WebSphere 5.1 or 6. Here are patches.

- CompressionResponseStream should not compress the output stream if the
response has been committed (because then it cannot write the Content-Encoding:
gzip header, and the browser displays the compressed output as-is)
- CompressionServletResponseWrapper causes a NullPointerException if you flush
before writing anything","coupl small bug compress filter class trigger use filter web sphere webspher patch compress respons stream compressionresponsestream compress output stream respons commit cannot write content encod gzip header browser display compress output is asi compress servlet respons wrapper compressionservletresponsewrapp caus null pointer except nullpointerexcept flush write anyth","""webapps/examples/WEB-INF/classes/compressionFilters/CompressionResponseStream.java""","3","3","3","1","18","2","11","4","1","0","0","11","11","11","9","11","0","0","1","10","318","68","142","28","90","108","70","107","27","80","7","7","7","4","3","1","36","36","36","14","normal"
"39572","259","Mark Emlyn David Thomas","Port fix bug 39572. Improvements to CompressionFilter provided by Eric Hedstrm. Also cleaned up unused imports and methods.","Bug 39572  fixes to use CompressionFilter in WebSphere app server","fix use compress filter compressionfilt web sphere webspher app server","There are a couple of small bugs in the compression filter classes that are
triggered by using the filter in WebSphere 5.1 or 6. Here are patches.

- CompressionResponseStream should not compress the output stream if the
response has been committed (because then it cannot write the Content-Encoding:
gzip header, and the browser displays the compressed output as-is)
- CompressionServletResponseWrapper causes a NullPointerException if you flush
before writing anything","coupl small bug compress filter class trigger use filter web sphere webspher patch compress respons stream compressionresponsestream compress output stream respons commit cannot write content encod gzip header browser display compress output is asi compress servlet respons wrapper compressionservletresponsewrapp caus null pointer except nullpointerexcept flush write anyth","""webapps/examples/WEB-INF/classes/compressionFilters/CompressionServletResponseWrapper.java""","2","2","2","1","14","1","9","4","1","1","1","11","11","10","6","11","0","1","0","10","277","56","122","40","70","99","61","92","40","52","6","6","6","4","3","1","30","30","30","14","normal"
"39592","71","Mark Emlyn David Thomas","Port of fix for bug 39592. Stop stack traces for HEAD requests.","Bug 39592  SSI does not correctly process HEAD request","ssi correctli process head request","Hello,

I think there is a small bug in Tomcat 5.0 and 5.5 (at least I could see it already with many versions of 
Tomcat).

I use SSI 
          org.apache.catalina.ssi.SSIServlet

and

     <param-name>isVirtualWebappRelative</param-name>
          <param-value>1</param-value>


All my pages (*.html) are processed by the SSI
        <url-pattern>*.html</url-pattern>

If there is a normal GET request, SSI compiles a page and everything is just OK.

However, for  the HEAD request to the same page (there is no need to compile the page) the SSI still 
tries to do it and generates a number of exceptions (see enclosed).

This error is not critical but overloads my catalina.out file. I do not think that it is difficult to fix it.

I already reported this error to tomcat-dev, but decided to create a formal ""bug"" report at ASF Bugzilla 
to see if it was already fixed or not. This is not a big error, but it is annoying.

Thanks!

With the best regards,
Igor Tetko

*****

Apr 28, 2006 11:26:45 AM org.apache.catalina.core.ApplicationContext log
SEVERE: #include--Couldn't include file: styles.html
java.io.IOException: Couldn't find file: /incl/styles.html
        at org.apache.catalina.ssi.SSIServletExternalResolver.getFileText(SSIServletExternalResolver.java:
537)
        at org.apache.catalina.ssi.SSIMediator.getFileText(SSIMediator.java:155)
        at org.apache.catalina.ssi.SSIInclude.process(SSIInclude.java:44)
        at org.apache.catalina.ssi.SSIProcessor.process(SSIProcessor.java:146)
        at org.apache.catalina.ssi.SSIServlet.processSSI(SSIServlet.java:221)
        at org.apache.catalina.ssi.SSIServlet.requestHandler(SSIServlet.java:187)
        at org.apache.catalina.ssi.SSIServlet.doGet(SSIServlet.java:123)
        at javax.servlet.http.HttpServlet.doHead(HttpServlet.java:270)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:706)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:672)
        at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:574)
        at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:499)
        at org.apache.catalina.ssi.SSIServletExternalResolver.getFileText(SSIServletExternalResolver.java:
519)
        at org.apache.catalina.ssi.SSIMediator.getFileText(SSIMediator.java:155)
        at org.apache.catalina.ssi.SSIInclude.process(SSIInclude.java:44)
        at org.apache.catalina.ssi.SSIProcessor.process(SSIProcessor.java:146)
        at org.apache.catalina.ssi.SSIServlet.processSSI(SSIServlet.java:221)
        at org.apache.catalina.ssi.SSIServlet.requestHandler(SSIServlet.java:187)
        at org.apache.catalina.ssi.SSIServlet.doGet(SSIServlet.java:123)
        at javax.servlet.http.HttpServlet.doHead(HttpServlet.java:270)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:706)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at org.apache.catalina.valves.FastCommonAccessLogValve.invoke
(FastCommonAccessLogValve.java:495)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)
        at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection
(Http11BaseProtocol.java:664)
        at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt
(LeaderFollowerWorkerThread.java:80)
        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
        at java.lang.Thread.run(Thread.java:613)","hello think small tomcat least could see alreadi mani version tomcat use ssi apach catalina ssi servlet ssiservlet param name paramnam is virtual webapp rel isvirtualwebapprel param name paramnam param valu paramvalu param valu paramvalu page html process ssi url pattern urlpattern html url pattern urlpattern normal get request ssi compil page everyth ok howev head request page need compil page ssi still tri gener number except see enclos error critic overload catalina file think difficult fix alreadi report error tomcat dev tomcatdev decid creat formal report asf bugzilla see alreadi fix big error annoy thank best regard igor tetko apr apach catalina core applic context applicationcontext log sever includ couldn includ file style html java except ioexcept couldn find file incl style html apach catalina ssi servlet extern resolv ssiservletexternalresolv get file text getfiletext servlet extern resolv ssiservletexternalresolv java apach catalina ssi mediat ssimedi get file text getfiletext mediat ssimedi java apach catalina ssi includ ssiinclud process includ ssiinclud java apach catalina ssi processor ssiprocessor process processor ssiprocessor java apach catalina ssi servlet ssiservlet process processssi servlet ssiservlet java apach catalina ssi servlet ssiservlet request handler requesthandl servlet ssiservlet java apach catalina ssi servlet ssiservlet do get doget servlet ssiservlet java javax servlet http http servlet httpservlet do head dohead http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core applic dispatch applicationdispatch invok applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch do includ doinclud applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch includ applic dispatch applicationdispatch java apach catalina ssi servlet extern resolv ssiservletexternalresolv get file text getfiletext servlet extern resolv ssiservletexternalresolv java apach catalina ssi mediat ssimedi get file text getfiletext mediat ssimedi java apach catalina ssi includ ssiinclud process includ ssiinclud java apach catalina ssi processor ssiprocessor process processor ssiprocessor java apach catalina ssi servlet ssiservlet process processssi servlet ssiservlet java apach catalina ssi servlet ssiservlet request handler requesthandl servlet ssiservlet java apach catalina ssi servlet ssiservlet do get doget servlet ssiservlet java javax servlet http http servlet httpservlet do head dohead http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina valv fast common access log valv fastcommonaccesslogvalv invok fast common access log valv fastcommonaccesslogvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 base protocol http11baseprotocol http11 connect handler http11connectionhandl process connect processconnect http11 base protocol http11baseprotocol java apach tomcat util net pool tcp endpoint pooltcpendpoint process socket processsocket pool tcp endpoint pooltcpendpoint java apach tomcat util net leader follow worker thread leaderfollowerworkerthread run it runit leader follow worker thread leaderfollowerworkerthread java apach tomcat util thread thread pool threadpool control runnabl controlrunn run thread pool threadpool java java lang thread run thread java","""java/org/apache/catalina/ssi/SSIServletExternalResolver.java""","4","4","5","1","18","0","17","1","2","0","0","24","24","24","9","24","0","0","12","12","567","58","458","132","305","53","199","319","108","211","62","62","62","6","6","0","118","118","123","32","minor"
"39689","52","Mark Emlyn David Thomas","Port fix bug 39689. Allow same quoting for SSI attribute values as httpd.","Bug 39689  Tomcat Server Side Includes (SSI) do not work with single quotes","tomcat server side includ ssi work singl quot","","","""java/org/apache/catalina/ssi/SSIProcessor.java""","5","5","6","2","28","0","22","6","1","0","3","9","9","9","3","9","0","1","5","3","313","20","217","64","160","78","128","173","60","113","14","14","17","8","7","0","46","46","60","25","minor"
"39699","6","Remy Maucherat","- Create clustered managers with the Catalina CL set as the context CL (as classloading may occur). - Should fix 39699.","Bug 39699  simple deploy failed in cluster (distributable flag)","simpl deploy fail cluster distribut flag","Hi,

i encounter a strange problem with my tomcat cluster and webapps deployment.

server.xml
--------------------------------
<Server port=""8005"" shutdown=""SHUTDOWN"">

  <Listener className=""org.apache.catalina.core.AprLifecycleListener"" />
  <Listener className=""org.apache.catalina.mbeans.ServerLifecycleListener"" />
  <Listener
className=""org.apache.catalina.mbeans.GlobalResourcesLifecycleListener"" />
  <Listener
className=""org.apache.catalina.storeconfig.StoreConfigLifecycleListener""/>

  <!-- Global JNDI resources -->
  <GlobalNamingResources>

    <Environment name=""simpleValue"" type=""java.lang.Integer"" value=""30""/>
    <Resource name=""UserDatabase"" auth=""Container""
              type=""org.apache.catalina.UserDatabase""
       description=""User database that can be updated and saved""
           factory=""org.apache.catalina.users.MemoryUserDatabaseFactory""
          pathname=""conf/tomcat-users.xml"" />

  </GlobalNamingResources>


  <!-- Define the Tomcat Stand-Alone Service -->
  <Service name=""Catalina"">


    <!-- Define a non-SSL HTTP/1.1 Connector on port 8080 -->
    <Connector address=""polen-integ"" port=""8080"" maxHttpHeaderSize=""8192""
               maxThreads=""300"" minSpareThreads=""25"" maxSpareThreads=""100""
               enableLookups=""false"" acceptCount=""100""
               connectionTimeout=""20000"" disableUploadTimeout=""true"" />

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port=""8009""
               address=""polen-integ.sofinco.fr""
               minProcessors=""20"" maxProcessors=""0"" maxThreads=""350""
minSpareThreads=""50"" maxSpareThreads=""100""
               enableLookups=""false"" redirectPort=""8080"" protocol=""AJP/1.3""
disableUploadTimeout=""true"" />

     <Engine name=""Catalina"" defaultHost=""localhost"" jvmRoute=""uxdev103"" >

      <Realm className=""org.apache.catalina.realm.UserDatabaseRealm""
resourceName=""UserDatabase""/>

      <Host name=""localhost"" appBase=""webapps"" unpackWARs=""true"" autoDeploy=""true""
       xmlValidation=""false"" xmlNamespaceAware=""false"" >

 <!-- Cluster Definition -->

        <Cluster className=""org.apache.catalina.cluster.tcp.SimpleTcpCluster""
                doClusterLog=""true"" clusterLogName=""clusterlog""
                expireSessionsOnShutdown=""false""
                useDirtyFlag=""true""
                notifyListenersOnReplication=""true"">

        <Membership className=""org.apache.catalina.cluster.mcast.McastService""
                mcastAddr=""228.0.0.4""
                mcastBindAddress=""127.0.0.1""
                mcastClusterDomain=""polen-integ""
                mcastPort=""45564""
                mcastFrequency=""1000""
                mcastDropTime=""30000""/>

        <Receiver className=""org.apache.catalina.cluster.tcp.ReplicationListener""
                tcpListenAddress=""polen-integ""
                tcpSelectorTimeout=""100""
                tcpThreadCount=""6""/>

        <Sender className=""org.apache.catalina.cluster.tcp.ReplicationTransmitter""
                replicationMode=""fastasyncqueue""
                doTransmitterProcessingStats=""true""
                doProcessingStats=""false""
                doWaitAckStats=""false""
                waitForAck=""false""
                keepAliveMaxRequestCount=""-1""/>

        <Valve className=""org.apache.catalina.cluster.tcp.ReplicationValve""
               
filter="".*\.gif;.*\.js;.*\.css;.*\.png;.*\.jpeg;.*\.jpg;.*\.htm;.*\.html;.*\.txt;""
/>

        <Valve className=""org.apache.catalina.cluster.session.JvmRouteBinderValve""
                enabled=""true"" />

        <ClusterListener
className=""org.apache.catalina.cluster.session.ClusterSessionListener"" />

        <ClusterListener
className=""org.apache.catalina.cluster.session.JvmRouteSessionIDBinderListener"" />

        <Deployer className=""org.apache.catalina.cluster.deploy.FarmWarDeployer""
                tempDir=""/home/tomcat/polen-integ/tmp/war-temp/""
                deployDir=""${catalina.base}/webapps""
                watchDir=""/home/tomcat/polen-integ/tmp/war-listen/""
                watchEnabled=""true""/>

        </Cluster>

      </Host>
    </Engine>

  </Service>

</Server>
------------------------



when i am trying to deploy a 'dsitributable' (and only when this flag is
enabled) i get the following errors :

---------------------------
INFO ContainerBackgroundProcessor[StandardEngine[Catalina]]
org.apache.catalina.startup.HostConfig - Deploying web application archive po
len.war
 INFO ContainerBackgroundProcessor[StandardEngine[Catalina]]
org.apache.catalina.loader.WebappClassLoader - Illegal access: this web appli
cation instance has been stopped already.  Could not load java.io.PrintStream. 
The eventual following stack trace is caused by an error t
hrown for debugging purposes as well as to attempt to terminate the thread which
caused the illegal access, and has no functional impact.
 java.lang.IllegalStateException
        at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1238)
        at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1198)
        at java.lang.ClassLoader.loadClassInternal(Unknown Source)
        at org.apache.log4j.helpers.LogLog.error(LogLog.java:142)
        at
org.apache.log4j.helpers.PatternParser$DatePatternConverter.convert(PatternParser.java:447)
        at
org.apache.log4j.helpers.PatternConverter.format(PatternConverter.java:64)
        at org.apache.log4j.PatternLayout.format(PatternLayout.java:503)
        at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:301)
        at
org.apache.log4j.RollingFileAppender.subAppend(RollingFileAppender.java:234)
        at org.apache.log4j.WriterAppender.append(WriterAppender.java:159)
        at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:230)
        at
org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:65)
        at org.apache.log4j.Category.callAppenders(Category.java:203)
        at org.apache.log4j.Category.forcedLog(Category.java:388)
        at org.apache.log4j.Category.log(Category.java:853)
        at org.apache.commons.logging.impl.Log4JLogger.info(Log4JLogger.java:133)
        at
org.apache.catalina.cluster.session.DeltaManager.start(DeltaManager.java:976)
        at org.apache.catalina.core.ContainerBase.setManager(ContainerBase.java:431)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4125)
 at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:739)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:809)
        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:698)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1190)
        at
org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:292)
        at
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at
org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1305)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1569)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1578)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1558)
        at java.lang.Thread.run(Unknown Source)
INFO ContainerBackgroundProcessor[StandardEngine[Catalina]]
org.apache.catalina.loader.WebappClassLoader - Illegal access: this web applic
ation instance has been stopped already.  Could not load java.io.PrintStream. 
The eventual following stack trace is caused by an error th
rown for debugging purposes as well as to attempt to terminate the thread which
caused the illegal access, and has no functional impact.
 Java.lang.IllegalStateException
        at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1238)
        at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1198)
        at java.lang.ClassLoader.loadClassInternal(Unknown Source)
        at org.apache.log4j.helpers.LogLog.error(LogLog.java:142)
        at
org.apache.log4j.helpers.PatternParser$DatePatternConverter.convert(PatternParser.java:447)
        at
org.apache.log4j.helpers.PatternConverter.format(PatternConverter.java:64)
        at org.apache.log4j.PatternLayout.format(PatternLayout.java:503)
        at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:301)
        at
org.apache.log4j.RollingFileAppender.subAppend(RollingFileAppender.java:234)
        at org.apache.log4j.WriterAppender.append(WriterAppender.java:159)
        at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:230)
        at
org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:65)
        at org.apache.log4j.Category.callAppenders(Category.java:203)
        at org.apache.log4j.Category.forcedLog(Category.java:388)
        at org.apache.log4j.Category.log(Category.java:853)
        at org.apache.commons.logging.impl.Log4JLogger.info(Log4JLogger.java:133)
        at
org.apache.catalina.cluster.session.DeltaManager.start(DeltaManager.java:976)
 at org.apache.catalina.core.ContainerBase.setManager(ContainerBase.java:431)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4125)
        at
org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:739)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:809)
        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:698)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1190)
        at
org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:292)
        at
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at
org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1305)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1569)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1578)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1558)
        at java.lang.Thread.run(Unknown Source)
INFO ContainerBackgroundProcessor[StandardEngine[Catalina]]
org.apache.catalina.loader.WebappClassLoader - Illegal access: this web applic
ation instance has been stopped already.  Could not load
org.apache.log4j.spi.VectorWriter.  The eventual following stack trace is caused
by an error thrown for debugging purposes as well as to attempt to terminate the
thread which caused the illegal access, and has no functi
onal impact.
 java.lang.IllegalStateException
        at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1238)
        at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1198)
        at java.lang.ClassLoader.loadClassInternal(Unknown Source)
        at org.apache.log4j.spi.LoggingEvent.<init>(LoggingEvent.java:154)
        at org.apache.log4j.Category.forcedLog(Category.java:388)
        at org.apache.log4j.Category.log(Category.java:853)
        at org.apache.commons.logging.impl.Log4JLogger.error(Log4JLogger.java:193)
        at
org.apache.catalina.cluster.session.DeltaManager.start(DeltaManager.java:990)
        at org.apache.catalina.core.ContainerBase.setManager(ContainerBase.java:431)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4125)
        at
org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:739)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:809)
        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:698)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
 at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1190)
        at
org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:292)
        at
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at
org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1305)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1569)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1578)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1558)
        at java.lang.Thread.run(Unknown Source)
INFO ContainerBackgroundProcessor[StandardEngine[Catalina]]
org.apache.catalina.loader.WebappClassLoader - Illegal access: this web applic
ation instance has been stopped already.  Could not load
org.apache.log4j.spi.VectorWriter.  The eventual following stack trace is caused
by an error thrown for debugging purposes as well as to attempt to terminate the
thread which caused the illegal access, and has no functi
onal impact.
 java.lang.IllegalStateException
        at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1238)
        at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1198)
        at java.lang.ClassLoader.loadClassInternal(Unknown Source)
        at org.apache.log4j.spi.LoggingEvent.<init>(LoggingEvent.java:154)
        at org.apache.log4j.Category.forcedLog(Category.java:388)
        at org.apache.log4j.Category.log(Category.java:853)
        at org.apache.commons.logging.impl.Log4JLogger.error(Log4JLogger.java:193)
        at
org.apache.catalina.cluster.session.DeltaManager.start(DeltaManager.java:990)
        at org.apache.catalina.core.ContainerBase.setManager(ContainerBase.java:431)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4125)
        at
org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:739)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:809)
        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:698)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1190)
        at
org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:292)
        at
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at
org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1305)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1569)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1578)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1558)
        at java.lang.Thread.run(Unknown Source)
ERROR ContainerBackgroundProcessor[StandardEngine[Catalina]]
org.apache.commons.modeler.Registry - Null component Catalina:type=JspMonitor
,name=jsp,WebModule=//localhost/polen,J2EEApplication=none,J2EEServer=none
 ERROR ContainerBackgroundProcessor[StandardEngine[Catalina]]
org.apache.catalina.startup.HostConfig - Error deploying web application arc
hive polen.war
 java.lang.NoClassDefFoundError: org/apache/log4j/spi/VectorWriter
        at org.apache.log4j.spi.LoggingEvent.<init>(LoggingEvent.java:154)
        at org.apache.log4j.Category.forcedLog(Category.java:388)
        at org.apache.log4j.Category.log(Category.java:853)
        at org.apache.commons.logging.impl.Log4JLogger.error(Log4JLogger.java:193)
        at
org.apache.catalina.cluster.session.DeltaManager.start(DeltaManager.java:990)
        at org.apache.catalina.core.ContainerBase.setManager(ContainerBase.java:431)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4125)
        at
org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:739)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:809)
        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:698)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1190)
        at
org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:292)
        at
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at
org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1305)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1569)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1578)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1558)
        at java.lang.Thread.run(Unknown Source)
ERROR ContainerBackgroundProcessor[StandardEngine[Catalina]]
org.apache.catalina.startup.HostConfig - Error deploying web application arch
ive polen.war
 java.lang.NoClassDefFoundError: org/apache/log4j/spi/VectorWriter
        at org.apache.log4j.spi.LoggingEvent.<init>(LoggingEvent.java:154)
        at org.apache.log4j.Category.forcedLog(Category.java:388)
        at org.apache.log4j.Category.log(Category.java:853)
        at org.apache.commons.logging.impl.Log4JLogger.error(Log4JLogger.java:193)
        at
org.apache.catalina.cluster.session.DeltaManager.start(DeltaManager.java:990)
        at org.apache.catalina.core.ContainerBase.setManager(ContainerBase.java:431)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4125)

at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:739)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:809)
        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:698)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1190)
        at
org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:292)
        at
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at
org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1305)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1569)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1578)
        at
org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1558)
        at java.lang.Thread.run(Unknown Source)
---------------

i have tried to deployed via web manager application or simple copy of my war in
webapps directory... No luck, if i put '<distributable/> flag in application
web.xml config file, i encounter this error ; i need to restart manually tomcat
instance... After this restart the application is correctly deployed without any
error...
Of course if i disable cluster in server.xml, no problem...","hi encount strang problem tomcat cluster webapp deploy server xml server port shutdown shutdown listen class name classnam apach catalina core apr lifecycl listen aprlifecyclelisten listen class name classnam apach catalina mbean server lifecycl listen serverlifecyclelisten listen class name classnam apach catalina mbean global resourc lifecycl listen globalresourceslifecyclelisten listen class name classnam apach catalina storeconfig store config lifecycl listen storeconfiglifecyclelisten global jndi resourc global name resourc globalnamingresourc environ name simpl valu simplevalu type java lang integ valu resourc name user databas userdatabas auth contain type apach catalina user databas userdatabas descript user databas updat save factori apach catalina user memori user databas factori memoryuserdatabasefactori pathnam conf tomcat user tomcatus xml global name resourc globalnamingresourc defin tomcat stand alon servic servic name catalina defin ssl http connector port connector address polen integ poleninteg port max http header size maxhttpheaders max thread maxthread min spare thread minsparethread max spare thread maxsparethread enabl lookup enablelookup fals accept count acceptcount connect timeout connectiontimeout disabl upload timeout disableuploadtimeout true defin ajp connector port connector port address polen integ poleninteg sofinco fr min processor minprocessor max processor maxprocessor max thread maxthread min spare thread minsparethread max spare thread maxsparethread enabl lookup enablelookup fals redirect port redirectport protocol ajp disabl upload timeout disableuploadtimeout true engin name catalina default host defaulthost localhost jvm rout jvmrout uxdev103 realm class name classnam apach catalina realm user databas realm userdatabaserealm resourc name resourcenam user databas userdatabas host name localhost app base appbas webapp unpack unpackwar true auto deploy autodeploy true xml valid xmlvalid fals xml namespac awar xmlnamespaceawar fals cluster definit cluster class name classnam apach catalina cluster tcp simpl tcp cluster simpletcpclust do cluster log doclusterlog true cluster log name clusterlognam clusterlog expir session on shutdown expiresessionsonshutdown fals use dirti flag usedirtyflag true notifi listen on replic notifylistenersonrepl true membership class name classnam apach catalina cluster mcast mcast servic mcastservic mcast addr mcastaddr mcast bind address mcastbindaddress mcast cluster domain mcastclusterdomain polen integ poleninteg mcast port mcastport mcast frequenc mcastfrequ mcast drop time mcastdroptim receiv class name classnam apach catalina cluster tcp replic listen replicationlisten tcp listen address tcplistenaddress polen integ poleninteg tcp selector timeout tcpselectortimeout tcp thread count tcpthreadcount sender class name classnam apach catalina cluster tcp replic transmitt replicationtransmitt replic mode replicationmod fastasyncqueu do transmitt process stat dotransmitterprocessingstat true do process stat doprocessingstat fals do wait ack stat dowaitackstat fals wait for ack waitforack fals keep aliv max request count keepalivemaxrequestcount valv class name classnam apach catalina cluster tcp replic valv replicationvalv filter gif j cs png jpeg jpg htm html txt valv class name classnam apach catalina cluster session jvm rout binder valv jvmroutebindervalv enabl true cluster listen clusterlisten class name classnam apach catalina cluster session cluster session listen clustersessionlisten cluster listen clusterlisten class name classnam apach catalina cluster session jvm rout session binder listen jvmroutesessionidbinderlisten deploy class name classnam apach catalina cluster deploy farm war deploy farmwardeploy temp dir tempdir home tomcat polen integ poleninteg tmp war temp wartemp deploy dir deploydir catalina base webapp watch dir watchdir home tomcat polen integ poleninteg tmp war listen warlisten watch enabl watchen true cluster host engin servic server tri deploy dsitribut flag enabl get follow error info contain background processor containerbackgroundprocessor standard engin standardengin catalina apach catalina startup host config hostconfig deploy web applic archiv po len info contain background processor containerbackgroundprocessor standard engin standardengin catalina apach catalina loader webapp class loader webappclassload illeg access web appli cation instanc stop alreadi could load java print stream printstream eventu follow stack trace caus error hrown debug purpos well attempt termin thread caus illeg access function impact java lang illeg state except illegalstateexcept apach catalina loader webapp class loader webappclassload load class loadclass webapp class loader webappclassload java apach catalina loader webapp class loader webappclassload load class loadclass webapp class loader webappclassload java java lang class loader classload load class intern loadclassintern unknown sourc apach log4j helper log log loglog error log log loglog java apach log4j helper pattern parser patternpars date pattern convert datepatternconvert convert pattern parser patternpars java apach log4j helper pattern convert patternconvert format pattern convert patternconvert java apach log4j pattern layout patternlayout format pattern layout patternlayout java apach log4j writer append writerappend sub append subappend writer append writerappend java apach log4j roll file append rollingfileappend sub append subappend roll file append rollingfileappend java apach log4j writer append writerappend append writer append writerappend java apach log4j append skeleton appenderskeleton do append doappend append skeleton appenderskeleton java apach log4j helper append attach impl appenderattachableimpl append loop on append appendlooponappend append attach impl appenderattachableimpl java apach log4j categori call append callappend categori java apach log4j categori forc log forcedlog categori java apach log4j categori log categori java apach common log impl log4 logger log4jlogg info log4 logger log4jlogg java apach catalina cluster session delta manag deltamanag start delta manag deltamanag java apach catalina core contain base containerbas set manag setmanag contain base containerbas java apach catalina core standard context standardcontext start standard context standardcontext java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy deploywar host config hostconfig java apach catalina startup host config hostconfig deploy deploywar host config hostconfig java apach catalina startup host config hostconfig deploy app deployapp host config hostconfig java apach catalina startup host config hostconfig check host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor run contain base containerbas java java lang thread run unknown sourc info contain background processor containerbackgroundprocessor standard engin standardengin catalina apach catalina loader webapp class loader webappclassload illeg access web applic ation instanc stop alreadi could load java print stream printstream eventu follow stack trace caus error th rown debug purpos well attempt termin thread caus illeg access function impact java lang illeg state except illegalstateexcept apach catalina loader webapp class loader webappclassload load class loadclass webapp class loader webappclassload java apach catalina loader webapp class loader webappclassload load class loadclass webapp class loader webappclassload java java lang class loader classload load class intern loadclassintern unknown sourc apach log4j helper log log loglog error log log loglog java apach log4j helper pattern parser patternpars date pattern convert datepatternconvert convert pattern parser patternpars java apach log4j helper pattern convert patternconvert format pattern convert patternconvert java apach log4j pattern layout patternlayout format pattern layout patternlayout java apach log4j writer append writerappend sub append subappend writer append writerappend java apach log4j roll file append rollingfileappend sub append subappend roll file append rollingfileappend java apach log4j writer append writerappend append writer append writerappend java apach log4j append skeleton appenderskeleton do append doappend append skeleton appenderskeleton java apach log4j helper append attach impl appenderattachableimpl append loop on append appendlooponappend append attach impl appenderattachableimpl java apach log4j categori call append callappend categori java apach log4j categori forc log forcedlog categori java apach log4j categori log categori java apach common log impl log4 logger log4jlogg info log4 logger log4jlogg java apach catalina cluster session delta manag deltamanag start delta manag deltamanag java apach catalina core contain base containerbas set manag setmanag contain base containerbas java apach catalina core standard context standardcontext start standard context standardcontext java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy deploywar host config hostconfig java apach catalina startup host config hostconfig deploy deploywar host config hostconfig java apach catalina startup host config hostconfig deploy app deployapp host config hostconfig java apach catalina startup host config hostconfig check host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor run contain base containerbas java java lang thread run unknown sourc info contain background processor containerbackgroundprocessor standard engin standardengin catalina apach catalina loader webapp class loader webappclassload illeg access web applic ation instanc stop alreadi could load apach log4j spi vector writer vectorwrit eventu follow stack trace caus error thrown debug purpos well attempt termin thread caus illeg access functi onal impact java lang illeg state except illegalstateexcept apach catalina loader webapp class loader webappclassload load class loadclass webapp class loader webappclassload java apach catalina loader webapp class loader webappclassload load class loadclass webapp class loader webappclassload java java lang class loader classload load class intern loadclassintern unknown sourc apach log4j spi log event loggingev init log event loggingev java apach log4j categori forc log forcedlog categori java apach log4j categori log categori java apach common log impl log4 logger log4jlogg error log4 logger log4jlogg java apach catalina cluster session delta manag deltamanag start delta manag deltamanag java apach catalina core contain base containerbas set manag setmanag contain base containerbas java apach catalina core standard context standardcontext start standard context standardcontext java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy deploywar host config hostconfig java apach catalina startup host config hostconfig deploy deploywar host config hostconfig java apach catalina startup host config hostconfig deploy app deployapp host config hostconfig java apach catalina startup host config hostconfig check host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor run contain base containerbas java java lang thread run unknown sourc info contain background processor containerbackgroundprocessor standard engin standardengin catalina apach catalina loader webapp class loader webappclassload illeg access web applic ation instanc stop alreadi could load apach log4j spi vector writer vectorwrit eventu follow stack trace caus error thrown debug purpos well attempt termin thread caus illeg access functi onal impact java lang illeg state except illegalstateexcept apach catalina loader webapp class loader webappclassload load class loadclass webapp class loader webappclassload java apach catalina loader webapp class loader webappclassload load class loadclass webapp class loader webappclassload java java lang class loader classload load class intern loadclassintern unknown sourc apach log4j spi log event loggingev init log event loggingev java apach log4j categori forc log forcedlog categori java apach log4j categori log categori java apach common log impl log4 logger log4jlogg error log4 logger log4jlogg java apach catalina cluster session delta manag deltamanag start delta manag deltamanag java apach catalina core contain base containerbas set manag setmanag contain base containerbas java apach catalina core standard context standardcontext start standard context standardcontext java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy deploywar host config hostconfig java apach catalina startup host config hostconfig deploy deploywar host config hostconfig java apach catalina startup host config hostconfig deploy app deployapp host config hostconfig java apach catalina startup host config hostconfig check host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor run contain base containerbas java java lang thread run unknown sourc error contain background processor containerbackgroundprocessor standard engin standardengin catalina apach common model registri null compon catalina type jsp monitor jspmonitor name jsp web modul webmodul localhost polen j2 applic j2eeapplic none j2 server j2eeserv none error contain background processor containerbackgroundprocessor standard engin standardengin catalina apach catalina startup host config hostconfig error deploy web applic arc hive polen java lang no class def found error noclassdeffounderror apach log4j spi vector writer vectorwrit apach log4j spi log event loggingev init log event loggingev java apach log4j categori forc log forcedlog categori java apach log4j categori log categori java apach common log impl log4 logger log4jlogg error log4 logger log4jlogg java apach catalina cluster session delta manag deltamanag start delta manag deltamanag java apach catalina core contain base containerbas set manag setmanag contain base containerbas java apach catalina core standard context standardcontext start standard context standardcontext java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy deploywar host config hostconfig java apach catalina startup host config hostconfig deploy deploywar host config hostconfig java apach catalina startup host config hostconfig deploy app deployapp host config hostconfig java apach catalina startup host config hostconfig check host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor run contain base containerbas java java lang thread run unknown sourc error contain background processor containerbackgroundprocessor standard engin standardengin catalina apach catalina startup host config hostconfig error deploy web applic arch ive polen java lang no class def found error noclassdeffounderror apach log4j spi vector writer vectorwrit apach log4j spi log event loggingev init log event loggingev java apach log4j categori forc log forcedlog categori java apach log4j categori log categori java apach common log impl log4 logger log4jlogg error log4 logger log4jlogg java apach catalina cluster session delta manag deltamanag start delta manag deltamanag java apach catalina core contain base containerbas set manag setmanag contain base containerbas java apach catalina core standard context standardcontext start standard context standardcontext java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy deploywar host config hostconfig java apach catalina startup host config hostconfig deploy deploywar host config hostconfig java apach catalina startup host config hostconfig deploy app deployapp host config hostconfig java apach catalina startup host config hostconfig check host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor run contain base containerbas java java lang thread run unknown sourc tri deploy via web manag applic simpl copi webapp directori luck put distribut flag applic web xml config file encount error need restart manual tomcat instanc restart applic correctli deploy without error cours disabl cluster server xml problem","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","17","2","10","4","1","0","3","255","255","255","88","255","0","15","5","235","5547","1177","2793","707","1831","1587","1333","2028","709","1319","59","59","74","9","5","1","636","636","678","327","critical"
"39724","119","Mark Emlyn David Thomas","Port fix for bug 39724. Removing the only valve from a pipeline did not return the pipeline to its original state. Patched provided by David Gagnon.","Bug 39724  Bug on StandardPipeline.removeValve(Valve valve) for T5.5.16+","standard pipelin standardpipelin remov valv removevalv valv valv t5","I run into this problem with T5 when tring to add/remove/add a valve to the
standard engine. -For what I understand an empty pipeline has:
basic = StandardEngineValve (For example);
first = null;

-If you add a valve you will get
basic = StandardEngineValve
first = myValve (with myValve.next = StandardEngineValve)

-If you remove the valve you will get
basic =StandardEngineValve
first = StandardEngineValve
Note that StandardEngineValve is in first too here.

-If I try to add a new valve given the actual code in  addValve the valve will
not be added because (see the **) current = basic and current.getNext() = null;

addValve(Valve valve) {
 
       // Add this Valve to the set associated with this Pipeline
       if (first == null) {
           first = valve;
           valve.setNext(basic);
       } else {
           Valve current = first;
           while (current != null) {
**                if (current.getNext() == basic) {
                   current.setNext(valve);
                   valve.setNext(basic);
                   break;
               }
               current = current.getNext();
           }
       }

   }","run problem t5 tring add remov add valv standard engin understand empti pipelin basic standard engin valv standardenginevalv exampl first null add valv get basic standard engin valv standardenginevalv first my valv myvalv my valv myvalv next standard engin valv standardenginevalv remov valv get basic standard engin valv standardenginevalv first standard engin valv standardenginevalv note standard engin valv standardenginevalv first tri add new valv given actual code add valv addvalv valv ad see current basic current get next getnext null add valv addvalv valv valv add valv set associ pipelin first null first valv valv set next setnext basic els valv current first current null current get next getnext basic current set next setnext valv valv set next setnext basic break current current get next getnext","""java/org/apache/catalina/core/StandardPipeline.java""","3","3","3","1","21","2","12","6","1","0","2","19","19","19","6","19","0","2","0","17","561","122","271","62","171","168","120","187","59","128","13","13","14","7","3","1","67","67","70","30","normal"
"39769","1","Mark Emlyn David Thomas","Port fix for bug 39769. Remove the classloader switching from unload. It was removed from load some time ago. Patch provided by David Gagnon.","Bug 39769  Wrong class loader when the myServlet.destroy() called if myServlet is in the T5 shared directory","wrong class loader my servlet myservlet destroy call my servlet myservlet t5 share directori","Hi all,

  My web app needs to have Thread.currentThread().getContextClassLoader() always
right.  When the application is unload it seem not be the case. 

My classes are under the T5's shared directory (so all my
servlet.getClass().getClassLoader() == the shared classloader i.e.:
StandardCalssLoader.

My understanding is that when executing the code in my web app
Thread.currentThread().getContextClassLoader() should always give the
WebappLoader used in the StandardContext.

The problem occurs in StandardWrapper.unload()  before calling the
servlet.destroy() method

....
        ClassLoader oldCtxClassLoader =
            Thread.currentThread().getContextClassLoader();
        ClassLoader classLoader = instance.getClass().getClassLoader();

        PrintStream out = System.out;
        if (swallowOutput) {
            SystemLogHandler.startCapture();
        }

        // Call the servlet destroy() method
        try {
            instanceSupport.fireInstanceEvent
              (InstanceEvent.BEFORE_DESTROY_EVENT, instance);

            Thread.currentThread().setContextClassLoader(classLoader);
            if( System.getSecurityManager() != null) {
                SecurityUtil.doAsPrivilege(""destroy"",
                                           instance);
                SecurityUtil.remove(instance);                          
            } else {
                instance.destroy();
            }

....

In the code, the INSTANCE variable is my servlet and it have been loaded by the
SHARED classloader.  So the classloader set in the thread is not the right one.
 It Should be the classloader related to StandardContext.getLoader()

This problem occurs when I try to close my T5 dos windows and I suppose will
occurs when I will uninstall any webApp from my T5.

I notice the problem in T5 5.5.16 but I verified and it's the same code in
5.5.17.  So probably the problem is still there


Best Regards
/David Gagnon","hi web app need thread current thread currentthread get context class loader getcontextclassload alway right applic unload seem case class t5 share directori servlet get class getclass get class loader getclassload share classload standard calss loader standardcalssload understand execut code web app thread current thread currentthread get context class loader getcontextclassload alway give webapp loader webappload use standard context standardcontext problem occur standard wrapper standardwrapp unload call servlet destroy method class loader classload old ctx class loader oldctxclassload thread current thread currentthread get context class loader getcontextclassload class loader classload class loader classload instanc get class getclass get class loader getclassload print stream printstream system swallow output swallowoutput system log handler systemloghandl start captur startcaptur call servlet destroy method tri instanc support instancesupport fire instanc event fireinstanceev instanc event instanceev destroy event instanc thread current thread currentthread set context class loader setcontextclassload class loader classload system get secur manag getsecuritymanag null secur util securityutil do privileg doasprivileg destroy instanc secur util securityutil remov instanc els instanc destroy code instanc variabl servlet load share classload classload set thread right one classload relat standard context standardcontext get loader getload problem occur tri close t5 window suppos occur uninstal web app webapp t5 notic problem t5 verifi code probabl problem still best regard david gagnon","""java/org/apache/catalina/core/StandardWrapper.java""","2","2","2","1","19","2","11","5","2","1","6","80","80","79","27","80","0","0","5","75","1896","393","986","238","653","520","424","627","219","408","34","34","42","5","5","1","198","198","216","94","normal"
"39875","333","Mark Emlyn David Thomas","Port fix for bug 39875. Fix genrics compiler warnings.","Bug 39875  RealmBase#init() needs cleanup","realm base realmbas init need cleanup","","","""java/org/apache/catalina/realm/RealmBase.java""","4","4","4","1","22","2","14","5","2","3","8","50","53","50","19","53","1","2","7","43","1427","260","817","203","520","355","389","602","197","405","52","52","62","21","6","0","208","208","232","97","normal"
"40001","1188","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=40001 Use POST rather than GET for all operations that are not idempotent Partly based on a patch suggested by Daniel Naber Remove the ""Are you sure?"", partly due to lack of i18n support and since as (based on my recollection) as many people disliked the feature as liked it. Provides a (very) small measure of CSRF protection but lays the foundation for using a nonce with POST.","Bug 40001  HTML pages should not use GET to restart web-apps.","html page use get restart web app webapp","","","""java/org/apache/catalina/manager/Constants.java""","0","0","0","0","0","0","0","0","1","0","11","0","0","0","0","0","0","0","0","0","199","16","167","22","155","18","12","13","13","0","0","0","0","0","0","0","0","0","0","0","enhancement"
"40001","1188","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=40001 Use POST rather than GET for all operations that are not idempotent Partly based on a patch suggested by Daniel Naber Remove the ""Are you sure?"", partly due to lack of i18n support and since as (based on my recollection) as many people disliked the feature as liked it. Provides a (very) small measure of CSRF protection but lays the foundation for using a nonce with POST.","Bug 40001  HTML pages should not use GET to restart web-apps.","html page use get restart web app webapp","","","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","3","1","26","1","19","5","11","0","13","33","33","33","2","33","0","0","12","21","1156","110","815","169","649","238","375","492","163","329","17","17","21","9","4","0","116","116","129","55","enhancement"
"40012","0","Timothy A. Funk","40012 - Legacy EL Support not resolving variables correctly","Bug 40012  Legacy EL Support not resolving variables correctly","legaci support resolv variabl correctli","Given the following page:
<% pageContext.setAttribute(""t"", ""foo""); %>
${t}
<%
out.print(
    pageContext.getExpressionEvaluator().evaluate(
        ""${t}"",
        String.class,
        pageContext.getVariableResolver(),
        null));
%>

You will notice that the ${t} prints out fine when in the JSP but does not
resolve using the scriplet and prints nothing.

For a sanity check, I tested this and it worked in glassfish to ensure I wasn't
doing anything odd.

I'm trying to find root cause; but haven't found it yet, so I'm logging it in
case anyone else has the itch to scratch.","given follow page page context pagecontext set attribut setattribut foo print page context pagecontext get express evalu getexpressionevalu evalu string class page context pagecontext get variabl resolv getvariableresolv null notic print fine jsp resolv use scriplet print noth saniti check test work glassfish ensur wasn anyth odd tri find root caus haven found yet log case anyon els itch scratch","""java/org/apache/jasper/el/VariableResolverImpl.java""","1","1","1","1","3","0","3","0","1","0","0","2","2","2","1","2","0","0","0","2","34","6","13","8","2","15","7","10","8","2","1","1","1","1","0","1","2","2","2","2","normal"
"40150","236","Yoav Shapira","Bugzilla 40150: validate user and role classes in JAASRealm.  While I'm there, typify the relevant lists of class names so that JDK 5+ doesn't complain about unchecked operations in this class.","Bug 40150  Incorrect User/Role classnames are silently ignored.","incorrect user role classnam silent ignor","org.apache.catalina.realm.JAASRealm does not verify any of the class names that
are set through setRoleClassNames() and setUserClassNames().

If an incorrect class name (e.g. a typo) is configured in context.xml, this is
unnoticed by JAASRealm. The result is that during authentication, when the
subject's principals are checked against the configured class names, the
principals are not recognised, and therefore not added to the subject.

The fact an incorrect configured class name is currently not detected and logged
makes it very hard to find the source of the problem. It can be easily fixed by
checking the class names in the two methods mentioned above. The class must
exist, and it must implement java.security.Principal, which is currently not
enforced/checked by the code.","apach catalina realm realm jaasrealm verifi class name set set role class name setroleclassnam set user class name setuserclassnam incorrect class name typo configur context xml unnot realm jaasrealm result authent subject princip check configur class name princip recognis therefor ad subject fact incorrect configur class name current detect log make hard find sourc problem easili fix check class name two method mention class must exist must implement java secur princip current enforc check code","""java/org/apache/catalina/realm/JAASRealm.java""","3","3","3","1","19","2","11","6","1","0","4","17","17","17","6","17","0","0","5","12","572","98","232","63","147","243","116","171","60","111","21","21","21","10","4","1","58","58","59","32","blocker"
"40306","4","William Barker","Porting fix for BZ #40306","Bug 40306  mod_jk, POST request bodies are not restored on successful login when using mod_jk","jk post request bodi restor success login use jk","After the FormAuthenticator intercepts a POST request to a protected resource,
the original request is not properly restored upon successful login when using
mod_jk. When connectiong to tomcat directly (8080), the POST request is restored
as expected.

I've tested this with mod_jk 1.2.15 and 1.2.18. It seems the problem is that the
orginal request is not saved properly. I (think) I've narrowed down the issue in
  FormAuthenticator.java. body.toString() was returning null. (The buffer was
null) so it looks like the root of the problem is that nothing is read from the
input stream.

During testing I reverted to the old way of adding the request parameters
(saved.addParameter()) to see if they were indeed there and it worked. 

I also tried,
InputStream is = new BufferedInputStream(request.getInputStream()); 
which didn't work..


from FormAuthenticator.java: 

protected void saveRequest(Request request, Session session)
        throws IOException {

      ...

      if (""POST"".equalsIgnoreCase(request.getMethod())) {
            ByteChunk body = new ByteChunk();
            body.setLimit(request.getConnector().getMaxSavePostSize());

            byte[] buffer = new byte[4096];
            int bytesRead;
            InputStream is = request.getInputStream();
        
            while ( (bytesRead = is.read(buffer) ) >= 0) {
                body.append(buffer, 0, bytesRead);
            }
			
            saved.setBody(body);
        } 

        ...
}","form authent formauthent intercept post request protect resourc origin request properli restor upon success login use jk connectiong tomcat directli post request restor expect test jk seem problem orgin request save properli think narrow issu form authent formauthent java bodi to string tostr return null buffer null look like root problem noth read input stream test revert old way ad request paramet save add paramet addparamet see inde work tri input stream inputstream new buffer input stream bufferedinputstream request get input stream getinputstream didn work form authent formauthent java protect void save request saverequest request request session session throw except ioexcept post equal ignor case equalsignorecas request get method getmethod byte chunk bytechunk bodi new byte chunk bytechunk bodi set limit setlimit request get connector getconnector get max save post size getmaxsaveposts byte buffer new byte int byte read bytesread input stream inputstream request get input stream getinputstream byte read bytesread read buffer bodi append buffer byte read bytesread save set bodi setbodi bodi","""java/org/apache/coyote/ajp/AjpAprProcessor.java""","6","5","6","2","41","5","28","7","3","0","5","22","22","22","27","22","0","1","7","14","1270","262","708","167","531","303","402","524","151","373","29","20","34","12","4","0","133","121","146","60","major"
"40306","4","William Barker","Porting fix for BZ #40306","Bug 40306  mod_jk, POST request bodies are not restored on successful login when using mod_jk","jk post request bodi restor success login use jk","After the FormAuthenticator intercepts a POST request to a protected resource,
the original request is not properly restored upon successful login when using
mod_jk. When connectiong to tomcat directly (8080), the POST request is restored
as expected.

I've tested this with mod_jk 1.2.15 and 1.2.18. It seems the problem is that the
orginal request is not saved properly. I (think) I've narrowed down the issue in
  FormAuthenticator.java. body.toString() was returning null. (The buffer was
null) so it looks like the root of the problem is that nothing is read from the
input stream.

During testing I reverted to the old way of adding the request parameters
(saved.addParameter()) to see if they were indeed there and it worked. 

I also tried,
InputStream is = new BufferedInputStream(request.getInputStream()); 
which didn't work..


from FormAuthenticator.java: 

protected void saveRequest(Request request, Session session)
        throws IOException {

      ...

      if (""POST"".equalsIgnoreCase(request.getMethod())) {
            ByteChunk body = new ByteChunk();
            body.setLimit(request.getConnector().getMaxSavePostSize());

            byte[] buffer = new byte[4096];
            int bytesRead;
            InputStream is = request.getInputStream();
        
            while ( (bytesRead = is.read(buffer) ) >= 0) {
                body.append(buffer, 0, bytesRead);
            }
			
            saved.setBody(body);
        } 

        ...
}","form authent formauthent intercept post request protect resourc origin request properli restor upon success login use jk connectiong tomcat directli post request restor expect test jk seem problem orgin request save properli think narrow issu form authent formauthent java bodi to string tostr return null buffer null look like root problem noth read input stream test revert old way ad request paramet save add paramet addparamet see inde work tri input stream inputstream new buffer input stream bufferedinputstream request get input stream getinputstream didn work form authent formauthent java protect void save request saverequest request request session session throw except ioexcept post equal ignor case equalsignorecas request get method getmethod byte chunk bytechunk bodi new byte chunk bytechunk bodi set limit setlimit request get connector getconnector get max save post size getmaxsaveposts byte buffer new byte int byte read bytesread input stream inputstream request get input stream getinputstream byte read bytesread read buffer bodi append buffer byte read bytesread save set bodi setbodi bodi","""java/org/apache/jk/core/MsgContext.java""","1","1","2","1","7","0","6","0","1","0","9","34","34","34","14","34","0","1","0","33","381","62","256","97","145","63","125","192","90","102","30","30","32","9","4","0","66","66","68","42","major"
"40380","1047","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=40380 Correct synchronisation of expire() Should now only run one per session","Bug 40380  Potential syncro problem in StandardSession.expire(boolean)","potenti syncro problem standard session standardsess expir boolean","public void expire(boolean notify) {

        // Mark this session as ""being expired"" if needed
        if (expiring)
            return;

// No man's land here

        synchronized (this) {

            if (manager == null)
                return;

            expiring = true;","public void expir boolean notifi mark session expir need expir return land synchron manag null return expir true","""java/org/apache/catalina/session/StandardSession.java""","2","2","2","1","20","2","10","7","3","0","7","65","65","65","18","65","0","0","7","58","1761","373","742","197","487","648","355","526","192","334","20","20","26","6","4","1","166","166","180","94","normal"
"40518","5","Mark Emlyn David Thomas","Port fix for bug 40518. Use correct message.","Bug 40518  The message key ""requestListenerValve.requestInit"" has not be referred to correctly.","messag key request listen valv requestlistenervalv request init requestinit refer correctli","The bug is:

An illegal message is output to the log when the listener application that 
implements ServletRequestListener interface throws RuntimeException from the 
requestInitialized method or the requestDestroyed method.

message: ""Cannot find message associated with key 
requestListenerValve.requestInit""

cause: The key exists in the properties 
file ""org.apache.catalina.valves.LocalStrings.properties"", but the logic refers 
other properties file ""org.apache.catalina.core.LocalStrings.properties""","illeg messag output log listen applic implement servlet request listen servletrequestlisten interfac throw runtim except runtimeexcept request initi requestiniti method request destroy requestdestroy method messag cannot find messag associ key request listen valv requestlistenervalv request init requestinit caus key exist properti file apach catalina valv local string localstr properti logic refer properti file apach catalina core local string localstr properti","""java/org/apache/catalina/core/StandardContextValve.java""","3","3","4","2","35","3","15","16","1","0","2","7","7","7","1","7","0","3","0","4","345","62","133","45","81","150","66","84","40","44","15","15","20","12","3","1","27","27","32","18","normal"
"40524","133","Mark Emlyn David Thomas","Port fix bug 40524. request.getAuthType() now returns CLIENT_CERT rather than CLIENT-CERT as per the spec. Now only web.xml, o.a.c.deploy.LoginConfig and Authenticators.properties use CLIENT-CERT.","Bug 40524  request.getAuthType() returns different string from HttpServletRequest.CLIENT_CERT_AUTH","request get auth type getauthtyp return differ string http servlet request httpservletrequest client cert auth","using inspect:

request.getAuthType()
  (java.lang.String) CLIENT-CERT
	 
HttpServletRequest.CLIENT_CERT_AUTH
   (java.lang.String) CLIENT_CERT

api says they should be the same object (== should work)","use inspect request get auth type getauthtyp java lang string client cert http servlet request httpservletrequest client cert auth java lang string client cert api say object work","""java/org/apache/catalina/authenticator/Constants.java""","0","0","0","0","0","0","0","0","1","0","19","0","0","0","0","0","0","0","0","0","138","35","29","28","19","74","20","21","21","0","0","0","0","0","0","3","0","0","0","0","major"
"40524","133","Mark Emlyn David Thomas","Port fix bug 40524. request.getAuthType() now returns CLIENT_CERT rather than CLIENT-CERT as per the spec. Now only web.xml, o.a.c.deploy.LoginConfig and Authenticators.properties use CLIENT-CERT.","Bug 40524  request.getAuthType() returns different string from HttpServletRequest.CLIENT_CERT_AUTH","request get auth type getauthtyp return differ string http servlet request httpservletrequest client cert auth","using inspect:

request.getAuthType()
  (java.lang.String) CLIENT-CERT
	 
HttpServletRequest.CLIENT_CERT_AUTH
   (java.lang.String) CLIENT_CERT

api says they should be the same object (== should work)","use inspect request get auth type getauthtyp java lang string client cert http servlet request httpservletrequest client cert auth java lang string client cert api say object work","""java/org/apache/catalina/authenticator/SSLAuthenticator.java""","3","3","3","1","31","3","12","15","1","0","1","4","4","4","0","4","0","0","0","4","197","41","67","26","37","89","33","47","20","27","10","10","12","4","2","1","13","13","15","7","major"
"40524","133","Mark Emlyn David Thomas","Port fix bug 40524. request.getAuthType() now returns CLIENT_CERT rather than CLIENT-CERT as per the spec. Now only web.xml, o.a.c.deploy.LoginConfig and Authenticators.properties use CLIENT-CERT.","Bug 40524  request.getAuthType() returns different string from HttpServletRequest.CLIENT_CERT_AUTH","request get auth type getauthtyp return differ string http servlet request httpservletrequest client cert auth","using inspect:

request.getAuthType()
  (java.lang.String) CLIENT-CERT
	 
HttpServletRequest.CLIENT_CERT_AUTH
   (java.lang.String) CLIENT_CERT

api says they should be the same object (== should work)","use inspect request get auth type getauthtyp java lang string client cert http servlet request httpservletrequest client cert auth java lang string client cert api say object work","""java/org/apache/catalina/authenticator/SingleSignOn.java""","3","3","3","1","25","2","10","11","1","0","2","21","21","21","6","21","0","0","8","13","702","130","263","75","163","309","122","194","68","126","16","16","16","5","3","1","63","63","71","27","major"
"40524","133","Mark Emlyn David Thomas","Port fix bug 40524. request.getAuthType() now returns CLIENT_CERT rather than CLIENT-CERT as per the spec. Now only web.xml, o.a.c.deploy.LoginConfig and Authenticators.properties use CLIENT-CERT.","Bug 40524  request.getAuthType() returns different string from HttpServletRequest.CLIENT_CERT_AUTH","request get auth type getauthtyp return differ string http servlet request httpservletrequest client cert auth","using inspect:

request.getAuthType()
  (java.lang.String) CLIENT-CERT
	 
HttpServletRequest.CLIENT_CERT_AUTH
   (java.lang.String) CLIENT_CERT

api says they should be the same object (== should work)","use inspect request get auth type getauthtyp java lang string client cert http servlet request httpservletrequest client cert auth java lang string client cert api say object work","""java/org/apache/catalina/authenticator/SingleSignOnEntry.java""","1","1","1","1","11","0","5","6","1","0","0","11","11","11","6","11","0","0","0","11","190","25","68","26","35","97","37","53","26","27","3","3","3","3","2","1","15","15","16","15","major"
"40551","1030","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=40551 Enable the JvmRouteBinderValve to work with PersistentManagers as well as clusters","Bug 40551  Sticky sessions using PersistentManager enter indeterminate state on node failover","sticki session use persist manag persistentmanag enter indetermin state node failov","If a cluster of nodes is being load balanced with sticky sessions, and a
particular node becomes unavailable, any sessions bound to that node must be
redistributed.  Particularly in the case of mod_jk these sessions will not be
bound to whichever node the failover occurred on because the jessionid will
still contain the JVM route of the original failed node, thus placing the
session in an indeterminate state and losing sticky properties.

I am attaching a patch that will trigger a session to rebind itself to a new
node if the jvmroutes don't match and replace the jessionid in the browser's cookie.","cluster node load balanc sticki session particular node becom unavail session bound node must redistribut particularli case jk session bound whichev node failov occur jessionid still contain jvm rout origin fail node thu place session indetermin state lose sticki properti attach patch trigger session rebind new node jvmrout match replac jessionid browser cooki","""java/org/apache/catalina/ha/session/JvmRouteBinderValve.java""","2","2","3","1","18","0","10","7","1","0","2","22","22","22","7","22","0","0","8","14","572","53","271","86","166","248","125","187","79","108","9","9","11","3","4","1","61","61","72","24","major"
"40585","76","Mark Emlyn David Thomas","Port fix for 40585. Fix parametrised constructor so parameters have an effect","Bug 40585  org.apache.juli.FileHandler does not allow programmatic creation using parametrized constructor","apach juli file handler filehandl allow programmat creation use parametr constructor","If org.apache.juli.FileHandler is created programmatically with parametrized
constructor 

public FileHandler(String directory, String prefix, String suffix)

, FileHandler ignores custom constructor parameters, creates log handler with 
default configuration and writes log file to 
""${catalina_home}/bin/logs"" with the name ""juli.YYYY-MM-DD.log""
(YYYY, MM and DD are substituted with actual year, month and date)

It looks like the problem is in the fact parametrized constructor calls 
default constructor. Default constructor in turn performs handler configuration
from LogManager properties and creates a log file based on this default 
configuration. 

This makes custom constructor parameters effectively ignored.","apach juli file handler filehandl creat programmat parametr constructor public file handler filehandl string directori string prefix string suffix file handler filehandl ignor custom constructor paramet creat log handler default configur write log file catalina home log name juli yyyi mm dd log yyyi mm dd substitut actual year month date look like problem fact parametr constructor call default constructor default constructor turn perform handler configur log manag logmanag properti creat log file base default configur make custom constructor paramet effect ignor","""java/org/apache/juli/FileHandler.java""","2","2","2","1","20","2","14","3","1","0","0","8","8","8","5","8","0","3","0","5","267","63","133","43","87","71","75","99","41","58","6","6","6","4","2","1","22","22","22","13","minor"
"40625","1","Mark Emlyn David Thomas","Port patch for 40625.","Bug 40625  CGIServlet eats root cause","servlet cgiservlet eat root caus","The code below doesn't make sense:
<snip>
            catch (IOException e){
                log (""Caught exception "" + e);
                throw new IOException (e.toString());
            }
</snip>

It should be ""throw e;"".

IMHO, It seems no need to log this exception here, so 
the cache block can be removed.","code doesn make sens snip catch except ioexcept log caught except throw new except ioexcept to string tostr snip throw imho seem need log except cach block remov","""java/org/apache/catalina/servlets/CGIServlet.java""","4","4","5","1","43","4","25","13","5","1","7","34","34","33","24","34","1","4","24","5","1956","281","938","225","714","747","536","675","206","469","23","23","26","6","5","1","148","143","172","45","minor"
"40723","6","Mark Emlyn David Thomas","Port fix 40723. Correct javadoc for JDBCAccessLogValve.","Bug 40723  Wrong and misleading documentation in JDBCAccessLogValve","wrong mislead document access log valv jdbcaccesslogvalv","In the class JDBCAccessLogValve is an example for an table to hold access log 
values. In this table is a column ts which is defined as not null. This will 
only work on MySQL, because this value is never written by the Valve and other 
databases will complain about a column which is not filled with a value.","class access log valv jdbcaccesslogvalv exampl tabl hold access log valu tabl column t defin null work my mysql valu never written valv databas complain column fill valu","""java/org/apache/catalina/valves/JDBCAccessLogValve.java""","2","2","2","1","15","0","8","6","1","0","1","29","29","29","24","29","0","0","2","27","681","110","286","92","176","286","157","218","88","130","18","18","18","3","4","1","60","60","60","31","normal"
"40771","1","Mark Emlyn David Thomas","Port fix bug 40771. Correct doRead method so Filters and Valves can read POST data. patch provided by Michael Dufel.","Bug 40771  Can't read POST data from within a filter or valve","read post data within filter valv","I was attempting to create a Filter or Valve that could be placed in front of an
Axis web service that would handle security according to the WS-Security
specification. That turned out to be a rabbit trail, but I did find and fix a
bug that I discovered along the way. 

I ran into problems reading POST data (the web service request) from the
org.apache.catalina.connector.Request object exposed in the Filter/Valve
interfaces. This is a chunk of code in a prototype Valve that didn't work:

private ByteChunk getPOSTBody(Request request)
      throws IOException
  {
    ByteChunk retval = new ByteChunk(request.getContentLength());
    ByteChunk body = new ByteChunk(request.getContentLength());

    int bytesRead;
    do
    {
      bytesRead = request.getCoyoteRequest().doRead(body);
      retval.append(body);
    }
    while (bytesRead >= 0) ;

    //puts the data back into the pipe.
    request.getCoyoteRequest().action
        (ActionCode.ACTION_REQ_SET_BODY_REPLAY, retval);

    return retval;
  }

This code works as designed, however the problem occurs later on when Axis
attempted to parse the web service request. I don't remember the exact Axis
error, but I was able to track the problem down to a bug in the
org.apache.coyote.http11.filters.SavedRequestInputFilter class. The doRead
method was not properly implemented to return a -1 when appropriate.

Here is my modified version of the doRead method:

public int doRead(ByteChunk chunk, org.apache.coyote.Request request)
            throws IOException {
        int writeLength = 0;
        
        if (chunk.getLimit() > 0 && chunk.getLimit() < input.getLength()) {
            writeLength = chunk.getLimit();
        } else {
        	writeLength = input.getLength();
        }
        if(input.getOffset()>= input.getEnd())
            return -1;

        input.substract(chunk.getBuffer(), 0, writeLength);
        chunk.setOffset(0);
        chunk.setEnd(writeLength);
        
        return writeLength;    
    }


This bug won't show up unless someone tries to use a filter/valve to do
something with web services. That's not too likely because that's what we have
SOAPHandlers for.","attempt creat filter valv could place front axi web servic would handl secur accord w secur specif turn rabbit trail find fix discov along way ran problem read post data web servic request apach catalina connector request object expos filter valv interfac chunk code prototyp valv didn work privat byte chunk bytechunk get bodi getpostbodi request request throw except ioexcept byte chunk bytechunk retval new byte chunk bytechunk request get content length getcontentlength byte chunk bytechunk bodi new byte chunk bytechunk request get content length getcontentlength int byte read bytesread byte read bytesread request get coyot request getcoyoterequest do read doread bodi retval append bodi byte read bytesread put data back pipe request get coyot request getcoyoterequest action action code actioncod action req set bodi replay retval return retval code work design howev problem occur later axi attempt pars web servic request rememb exact axi error abl track problem apach coyot http11 filter save request input filter savedrequestinputfilt class do read doread method properli implement return appropri modifi version do read doread method public int do read doread byte chunk bytechunk chunk apach coyot request request throw except ioexcept int write length writelength chunk get limit getlimit chunk get limit getlimit input get length getlength write length writelength chunk get limit getlimit els write length writelength input get length getlength input get offset getoffset input get end getend return input substract chunk get buffer getbuff write length writelength chunk set offset setoffset chunk set end setend write length writelength return write length writelength won show unless someon tri use filter valv someth web servic like handler soaphandl","""java/org/apache/coyote/http11/filters/SavedRequestInputFilter.java""","1","1","1","1","8","0","4","3","1","0","0","7","7","7","1","7","0","0","0","7","99","16","38","16","15","45","18","27","15","12","2","2","3","1","1","1","8","8","9","7","minor"
"40817","9","Mark Emlyn David Thomas","Port fix for bug 40817.","Bug 40817  servlet-cgi throws index out of bounds exception on certain cgi","servlet cgi servletcgi throw index bound except certain cgi","First, servlets-cgi.jar needs to exist and the servlet must be mapped:
for example:
 <servlet-mapping>
   <servlet-name>cgi</servlet-name>
   <url-pattern>*.pl</url-pattern>
 </servlet-mapping>

Test perl cgi script:
 #!/usr/bin/perl
 print ""Content-type: text/plain"", ""\n\n"";
 print ""Hello world, from Perl\n"";

One perl script is placed in www-root (""/test.pl"") and the other in any
subfolder (""/test/test.pl"" or ""/cgi-bin/test.pl"", etc.)

The cgi script in the subfolder will run fine.
The cgi script in the www-root will generate an exception:
java.lang.StringIndexOutOfBoundsException: String index out of range: -1
	java.lang.String.substring(String.java:1768)
	java.lang.String.substring(String.java:1735)
	org.apache.catalina.servlets.CGIServlet$CGIEnvironment.findCGI(CGIServlet.java:948)
	org.apache.catalina.servlets.CGIServlet$CGIEnvironment.setCGIEnvironment(CGIServlet.java:1015)
	org.apache.catalina.servlets.CGIServlet$CGIEnvironment.<init>(CGIServlet.java:766)
	org.apache.catalina.servlets.CGIServlet.doGet(CGIServlet.java:584)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:802)


The problem is this line (line 948 in CGIServlet.java):

cginame =              
currentLocation.getParent().substring(webAppRootDir.length())+ File.separator +
name;

The problem is that webAppRootDir is 1 char longer than
currentLocation.getParent() because webAppRootDir ends with a File.separator (in
this case, a ""/"").  And removing the extra File.separator from webAppRootDir
will result in a different String related exception elsewhere.

And here's a fix that works:

cginame = (currentLocation.getParent() + 
File.separator).substring(webAppRootDir.length()) + name;

(If necessary, the fix can be made more adaptive by checking to see if it really
does have a File.separator at the end and if not...add it...otherwise, let it
be, etc.)

(on a side note, I have one more bug to fix; the ENV_VAR ""SCRIPT_FILENAME"" isn't
defined as it should be [required for PHP4/5] but I'll submit a different
bug/fix for that.)","first servlet cgi servletscgi jar need exist servlet must map exampl servlet map servletmap servlet name servletnam cgi servlet name servletnam url pattern urlpattern pl url pattern urlpattern servlet map servletmap perl cgi script usr perl print content type contenttyp text plain print hello world perl one perl script place www root wwwroot pl subfold pl cgi bin cgibin pl etc cgi script subfold run fine cgi script www root wwwroot gener except java lang string index out of bound except stringindexoutofboundsexcept string index rang java lang string substr string java java lang string substr string java apach catalina servlet servlet cgiservlet environ cgienviron find findcgi servlet cgiservlet java apach catalina servlet servlet cgiservlet environ cgienviron set environ setcgienviron servlet cgiservlet java apach catalina servlet servlet cgiservlet environ cgienviron init servlet cgiservlet java apach catalina servlet servlet cgiservlet do get doget servlet cgiservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java problem line line servlet cgiservlet java cginam current locat currentloc get parent getpar substr web app root dir webapprootdir length file separ name problem web app root dir webapprootdir char longer current locat currentloc get parent getpar web app root dir webapprootdir end file separ case remov extra file separ web app root dir webapprootdir result differ string relat except elsewher fix work cginam current locat currentloc get parent getpar file separ substr web app root dir webapprootdir length name necessari fix made adapt check see realli file separ add otherwis let etc side note one fix env script filenam isn defin requir p4 php4 ll submit differ fix","""java/org/apache/catalina/servlets/CGIServlet.java""","4","4","5","1","43","4","25","13","5","1","7","34","34","33","24","34","1","4","24","5","1957","281","938","225","714","748","536","675","206","469","23","23","26","6","5","1","148","143","172","45","major"
"40820","68","Timothy A. Funk","http://issues.apache.org/bugzilla/show_bug.cgi?id=40820 Default JSP factory not initialized early enough","Bug 40820  Default JSP factory not initialized early enough","default jsp factori initi earli enough","With the latest TC6 code, I'm seeing a problem that did not exist on earlier TC6
drivers.  Sorry that I can't put a finger on when this problem arose.  I looked
into relevant source files (like JspRuntimeContext) but haven't found the source
of the problem. 

Here's the issue (a testcase will be attached). 

The app is very simple: it installs ServletContextListener for the purpose of
adding a custom ELResolver.  It accomplishes this via: 

    public void contextInitialized(ServletContextEvent evt) { 
        ServletContext context = evt.getServletContext(); 
        JspApplicationContext jspContext =
JspFactory.getDefaultFactory().getJspApplicationContext(context); 
        jspContext.addELResolver(new ChipsELResolver()); 
    } 


The problem is that JspFactory.getDefaultFactory() is returning null; see below.

Oct 4, 2006 5:32:18 PM org.apache.catalina.core.AprLifecycleListener lifecycleEv 
ent 
INFO: The Apache Tomcat Native library which allows optimal performance in produ 
ction environments was not found on the java.library.path: C:\javaFor6.0BuildJDK 
15\java\jre\bin;.;C:\javaFor6.0BuildJDK15\java\bin;c:\mantis2.1\mantis\bin;C:\se 
tupIBASE;C:\Perl\bin\;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;c: 
\Python22;C:\Program Files\PC-Doctor for Windows\services;c:\cvsnt-2.0.4;c:\ecli 
pse;w:\;w:\bin;C:\Program Files\QuickTime\QTSystem\;C:\Diskeeper\;C:\CMVC\exe;C: 
\CMVC\exe\bin;;C:\CMVCDC50;C:\CMVCDC50;C:\CMVCDC50; 
Oct 4, 2006 5:32:18 PM org.apache.coyote.http11.Http11Protocol init 
INFO: Initializing Coyote HTTP/1.1 on http-8080 
Oct 4, 2006 5:32:19 PM org.apache.catalina.startup.Catalina load 
INFO: Initialization processed in 1234 ms 
Oct 4, 2006 5:32:19 PM org.apache.catalina.core.StandardService start 
INFO: Starting service Catalina 
Oct 4, 2006 5:32:19 PM org.apache.catalina.core.StandardEngine start 
INFO: Starting Servlet Engine: Apache Tomcat/6.0.0-dev 
Oct 4, 2006 5:32:19 PM org.apache.catalina.core.StandardHost start 
INFO: XML validation disabled 
Oct 4, 2006 5:32:19 PM org.apache.catalina.startup.HostConfig deployWAR 
INFO: Deploying web application archive ELResolverTest.war 
ChipsListener.contextInitialized  evt= javax.servlet.ServletContextEvent[source= 
org.apache.catalina.core.ApplicationContextFacade@3fbe3fbe] 
ChipsListener.contextInitialized  context= org.apache.catalina.core.ApplicationC 
ontextFacade@3fbe3fbe 
ChipsListener.contextInitialized  JspFactory.getDefaultFactory()= null 
Oct 4, 2006 5:32:20 PM org.apache.catalina.core.StandardContext start 
SEVERE: Error listenerStart 
Oct 4, 2006 5:32:20 PM org.apache.catalina.core.StandardContext start 
SEVERE: Context [/ELResolverTest] startup failed due to previous errors 
Oct 4, 2006 5:32:21 PM org.apache.coyote.http11.Http11Protocol start 
INFO: Starting Coyote HTTP/1.1 on http-8080 
Oct 4, 2006 5:32:21 PM org.apache.jk.common.ChannelSocket init 
INFO: JK: ajp13 listening on /0.0.0.0:8009 
Oct 4, 2006 5:32:21 PM org.apache.jk.server.JkMain start 
INFO: Jk running ID=0 time=0/63  config=null 
Oct 4, 2006 5:32:21 PM org.apache.catalina.startup.Catalina start 
INFO: Server startup in 2657 ms 


This is easily reproducible when you deploy the ELResolverTest.war *before* the
server has started (I assume JspFactory.setDefaultFactory() hasn't been invoked
at the time the listeners are being installed).  If you deploy the WAR *after*
the server starts, the problem does not manifest and the app works --- until you
stop and restart the server.","latest c6 tc6 code see problem exist earlier c6 tc6 driver sorri put finger problem aros look relev sourc file like jsp runtim context jspruntimecontext haven found sourc problem issu testcas attach app simpl instal servlet context listen servletcontextlisten purpos ad custom resolv elresolv accomplish via public void context initi contextiniti servlet context event servletcontextev evt servlet context servletcontext context evt get servlet context getservletcontext jsp applic context jspapplicationcontext jsp context jspcontext jsp factori jspfactori get default factori getdefaultfactori get jsp applic context getjspapplicationcontext context jsp context jspcontext add resolv addelresolv new chip resolv chipselresolv problem jsp factori jspfactori get default factori getdefaultfactori return null see oct pm apach catalina core apr lifecycl listen aprlifecyclelisten lifecycl ev lifecycleev ent info apach tomcat nativ librari allow optim perform produ ction environ found java librari path java for6 javafor6 build 0buildjdk java jre java for6 javafor6 build k15 0buildjdk15 java mantis2 manti tup tupibas perl window system32 window window system32 wbem python22 program file pc doctor window servic cvsnt ecli pse program file quick time quicktim system qtsystem diskeep cmvc exe cmvc exe c50 cmvcdc50 c50 cmvcdc50 c50 cmvcdc50 oct pm apach coyot http11 http11 protocol http11protocol init info initi coyot http http oct pm apach catalina startup catalina load info initi process m oct pm apach catalina core standard servic standardservic start info start servic catalina oct pm apach catalina core standard engin standardengin start info start servlet engin apach tomcat dev 0dev oct pm apach catalina core standard host standardhost start info xml valid disabl oct pm apach catalina startup host config hostconfig deploy deploywar info deploy web applic archiv resolv test elresolvertest chip listen chipslisten context initi contextiniti evt javax servlet servlet context event servletcontextev sourc apach catalina core applic context facad applicationcontextfacad 3fbe3fb chip listen chipslisten context initi contextiniti context apach catalina core applic applicationc ontext facad ontextfacad 3fbe3fb chip listen chipslisten context initi contextiniti jsp factori jspfactori get default factori getdefaultfactori null oct pm apach catalina core standard context standardcontext start sever error listen start listenerstart oct pm apach catalina core standard context standardcontext start sever context resolv test elresolvertest startup fail due previou error oct pm apach coyot http11 http11 protocol http11protocol start info start coyot http http oct pm apach jk common channel socket channelsocket init info jk ajp13 listen oct pm apach jk server jk main jkmain start info jk run id time config null oct pm apach catalina startup catalina start info server startup m easili reproduc deploy resolv test elresolvertest server start assum jsp factori jspfactori set default factori setdefaultfactori hasn invok time listen instal deploy server start problem manifest app work stop restart server","""java/org/apache/catalina/core/JasperListener.java""","3","3","3","1","21","2","10","9","1","0","1","1","1","1","1","1","0","0","0","1","76","16","23","13","8","37","11","15","11","4","3","3","3","1","2","2","3","3","3","1","minor"
"40844","20","Mark Emlyn David Thomas","Port fix for bug 40844. Missing syncs.","Bug 40844  JDBCRealm.getPassword throws NullPointerException","realm jdbcrealm get password getpassword throw null pointer except nullpointerexcept","JDBCRealm.getPassword throws NullPointerException

I'm using tomcat 5.5.20 with postgresql-8.1-407.jdbc3.jar and postgresql-8.1.4
on Ubuntu Dapper. Authenticating two users simultaneously with HTTP DIGEST
causes sometimes the following errors and a 401 Unauthorized reply:

30.10.2006 14:24:54 org.apache.catalina.realm.JDBCRealm getPassword
SEVERE: Exception performing authentication
org.postgresql.util.PSQLException: ERROR: invalid message format
        at
org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:1525)
        at
org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1309)
        at
org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:188)
        at
org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:452)
        at
org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:354)
        at
org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:258)
        at org.apache.catalina.realm.JDBCRealm.getPassword(JDBCRealm.java:546)
        at org.apache.catalina.realm.RealmBase.getDigest(RealmBase.java:1156)
        at org.apache.catalina.realm.RealmBase.authenticate(RealmBase.java:365)
        at
org.apache.catalina.authenticator.DigestAuthenticator.findPrincipal(DigestAuthenticator.java:282)
        at
org.apache.catalina.authenticator.DigestAuthenticator.authenticate(DigestAuthenticator.java:175)
        at
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)
        at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
        at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
        at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)
        at
org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)
        at
org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at
org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
        at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
        at java.lang.Thread.run(Thread.java:595)
30.10.2006 14:24:54 org.apache.catalina.connector.CoyoteAdapter service
SEVERE: An exception or error occurred in the container during the request
processing
java.lang.NullPointerException
        at org.apache.catalina.realm.JDBCRealm.getPassword(JDBCRealm.java:568)
        at org.apache.catalina.realm.JDBCRealm.getPrincipal(JDBCRealm.java:594)
        at org.apache.catalina.realm.RealmBase.authenticate(RealmBase.java:398)
        at
org.apache.catalina.authenticator.DigestAuthenticator.findPrincipal(DigestAuthenticator.java:282)
        at
org.apache.catalina.authenticator.DigestAuthenticator.authenticate(DigestAuthenticator.java:175)
        at
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)
        at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
        at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
        at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)
        at
org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)
        at
org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at
org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
        at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
        at java.lang.Thread.run(Thread.java:595)","realm jdbcrealm get password getpassword throw null pointer except nullpointerexcept use tomcat postgresql jdbc3 jar postgresql ubuntu dapper authent two user simultan http digest caus sometim follow error unauthor repli apach catalina realm realm jdbcrealm get password getpassword sever except perform authent postgresql util except psqlexcept error invalid messag format postgresql core v3 queri executor impl queryexecutorimpl receiv error respons receiveerrorrespons queri executor impl queryexecutorimpl java postgresql core v3 queri executor impl queryexecutorimpl process result processresult queri executor impl queryexecutorimpl java postgresql core v3 queri executor impl queryexecutorimpl execut queri executor impl queryexecutorimpl java postgresql jdbc2 abstract jdbc2 statement abstractjdbc2stat execut abstract jdbc2 statement abstractjdbc2stat java postgresql jdbc2 abstract jdbc2 statement abstractjdbc2stat execut with flag executewithflag abstract jdbc2 statement abstractjdbc2stat java postgresql jdbc2 abstract jdbc2 statement abstractjdbc2stat execut queri executequeri abstract jdbc2 statement abstractjdbc2stat java apach catalina realm realm jdbcrealm get password getpassword realm jdbcrealm java apach catalina realm realm base realmbas get digest getdigest realm base realmbas java apach catalina realm realm base realmbas authent realm base realmbas java apach catalina authent digest authent digestauthent find princip findprincip digest authent digestauthent java apach catalina authent digest authent digestauthent authent digest authent digestauthent java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 base protocol http11baseprotocol http11 connect handler http11connectionhandl process connect processconnect http11 base protocol http11baseprotocol java apach tomcat util net pool tcp endpoint pooltcpendpoint process socket processsocket pool tcp endpoint pooltcpendpoint java apach tomcat util net leader follow worker thread leaderfollowerworkerthread run it runit leader follow worker thread leaderfollowerworkerthread java apach tomcat util thread thread pool threadpool control runnabl controlrunn run thread pool threadpool java java lang thread run thread java apach catalina connector coyot adapt coyoteadapt servic sever except error occur contain request process java lang null pointer except nullpointerexcept apach catalina realm realm jdbcrealm get password getpassword realm jdbcrealm java apach catalina realm realm jdbcrealm get princip getprincip realm jdbcrealm java apach catalina realm realm base realmbas authent realm base realmbas java apach catalina authent digest authent digestauthent find princip findprincip digest authent digestauthent java apach catalina authent digest authent digestauthent authent digest authent digestauthent java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 base protocol http11baseprotocol http11 connect handler http11connectionhandl process connect processconnect http11 base protocol http11baseprotocol java apach tomcat util net pool tcp endpoint pooltcpendpoint process socket processsocket pool tcp endpoint pooltcpendpoint java apach tomcat util net leader follow worker thread leaderfollowerworkerthread run it runit leader follow worker thread leaderfollowerworkerthread java apach tomcat util thread thread pool threadpool control runnabl controlrunn run thread pool threadpool java java lang thread run thread java","""java/org/apache/catalina/realm/JDBCRealm.java""","2","2","2","1","18","2","9","7","1","0","3","31","31","31","13","31","0","0","9","22","792","174","315","86","203","305","152","219","77","142","8","8","8","4","5","1","67","67","67","40","normal"
"40860","18","Mark Emlyn David Thomas","Port fix bug 40860. Additional logging if parameter processing fails.","Bug 40860  Tomcat loses request parameters","tomcat lose request paramet","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","14","1","7","5","1","1","5","134","134","133","45","134","1","0","9","124","2596","528","1175","336","743","902","568","861","325","536","16","16","23","8","4","1","296","296","324","185","critical"
"40860","18","Mark Emlyn David Thomas","Port fix bug 40860. Additional logging if parameter processing fails.","Bug 40860  Tomcat loses request parameters","tomcat lose request paramet","","","""java/org/apache/tomcat/util/http/Parameters.java""","3","3","4","1","18","1","14","2","1","1","3","27","27","26","16","27","0","5","0","22","612","102","410","107","301","101","250","347","108","239","16","16","18","3","3","0","104","104","113","41","critical"
"40901","13","Mark Emlyn David Thomas","Port fix for bug 40901. Encode directory listing output. Based on a patch by Chris Halstead.","Bug 40901  listings page does not escape XML characters","list page escap xml charact","On Solaris you can have a file or directory name called ""<b>xxx"" or ""<i>yyy"".
Using Tomcat's listings feature, you get a directory listing with the file name
in bold or italics.

I am not familiar with Javascript or cross-site scripting security problems, but
I believe Tomcat escapes XML characters like "">"" and ""<"" to prevent client
browsers to interpret HTML codes that are not intended to be interpreted as such
for the default error page.
I think the same should be done for listings, or a warning should be added to
the documentation not to use it if you have no control over the file/directory
names you list.","solari file directori name call xxx yyy use tomcat list featur get directori list file name bold ital familiar javascript cross site crosssit script secur problem believ tomcat escap xml charact like prevent client browser interpret html code intend interpret default error page think done list warn ad document use control file directori name list","""java/org/apache/catalina/servlets/DefaultServlet.java""","5","5","6","2","47","7","29","10","2","0","6","39","39","39","14","39","0","0","35","4","2139","415","1236","329","898","493","610","836","252","584","41","41","51","14","5","0","227","227","269","112","normal"
"40913","0","Remy Maucherat","- 40913: Fix the second test when an expression is used.","Bug 40913  JasperException raised against valid attribute","jasper except jasperexcept rais valid attribut","In org.apache.jasper.compiler.Validator.checkXmlAttributes(), the validation 
for deferred values and methods is raising an exception when an rtexprvalue 
attribute is legitimate.

------Stacktrace------
org.apache.jasper.JasperException: 
org.apache.jasper.JasperException: /index.jsp(83,0)
      According to TLD or attribute directive in tag file, attribute items 
does not accept any expressions
    org.apache.jasper.servlet.JspServletWrapper.handleJspException
(JspServletWrapper.java:565)
    org.apache.jasper.servlet.JspServletWrapper.service
(JspServletWrapper.java:354)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)



------relevant code in checkXmlAttributes()------
 if (!deferred && (tldAttrs[j].isDeferredMethod() || tldAttrs
[j].isDeferredValue())) {
     // Only deferred expressions are allowed for this attribute
     err.jspError(n, ""jsp.error.attribute.custom.non_rt_with_expr"",
             tldAttrs[j].getName());
 }

------testcase------
<c:forEach var=""k"" items=""${colors}"">
  <li><font color=""${k}"">This line is ${k}</font>.
</c:forEach>

The TLD for JSTL 1.2 says items can be an rtexprvalue and also a deferred-
value.  So the above usage is correct.
Attaching a testcase WAR.

------summary------
I don't think this code is really necessary; at least, it needs to be relaxed 
to allow tai.canBeRequestTime() values.","apach jasper compil valid check xml attribut checkxmlattribut valid defer valu method rais except rtexprvalu attribut legitim stacktrac apach jasper jasper except jasperexcept apach jasper jasper except jasperexcept index jsp accord tld attribut direct tag file attribut item accept express apach jasper servlet jsp servlet wrapper jspservletwrapp handl jsp except handlejspexcept jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet wrapper jspservletwrapp servic jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet jspservlet servic jsp file servicejspfil jsp servlet jspservlet java apach jasper servlet jsp servlet jspservlet servic jsp servlet jspservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java relev code check xml attribut checkxmlattribut defer tld attr tldattr is defer method isdeferredmethod tld attr tldattr is defer valu isdeferredvalu defer express allow attribut err jsp error jsperror jsp error attribut custom rt expr tld attr tldattr get name getnam testcas for each foreach item color font color line font for each foreach tld jstl say item rtexprvalu defer valu usag correct attach testcas summari think code realli necessari least need relax allow can be request time canberequesttim valu","""java/org/apache/jasper/compiler/Validator.java""","4","4","6","1","26","2","21","2","8","2","15","57","57","55","13","57","5","16","0","36","1742","222","1273","343","928","249","524","789","269","520","44","44","46","6","8","0","262","262","354","79","normal"
"40929","11","Mark Emlyn David Thomas","Port fix for bug 40929. Update JavaDoc","Bug 40929  Misleading comments in StandardClassLoader","mislead comment standard class loader standardclassload","Sometime during the Tomcat 5 development, the StandardClassLoader in
org.apache.catalina.loader package was stripped down, and is now just a
URLClassLoader.

I work with code that extends the StandardClassLoader (we use the automatic
reloading of jar files), and during an upgrade from tomcat 4 to tomcat 5.5 found
difficultly trying to figure out what had happened to the code.  I ended up
having to install SVN and do a svn log to figure out why the code was removed.

When the code was stripped down, the comments in the java file (and therefore in
the javadoc api) remained identical, so the javadoc api for the class is very
misleading.  For instance, the comments say that the class implements Reloader,
when it in fact does not.

The class comments should be updated to reflect the state of the code.

I can't see this as being very high priority, but it would likely be an easy to
fix for people whom are in the code regularly, and it would make the javadoc
much more readable for people that extend the StandardClassLoader for their own
purposes.","sometim tomcat develop standard class loader standardclassload apach catalina loader packag strip class loader urlclassload work code extend standard class loader standardclassload use automat reload jar file upgrad tomcat tomcat found difficultli tri figur happen code end instal svn svn log figur code remov code strip comment java file therefor javadoc api remain ident javadoc api class mislead instanc comment say class implement reload fact class comment updat reflect state code see high prioriti would like easi fix peopl code regularli would make javadoc much readabl peopl extend standard class loader standardclassload purpos","""java/org/apache/catalina/loader/StandardClassLoader.java""","1","1","1","1","3","0","3","0","1","0","0","2","2","2","0","2","0","0","0","2","61","9","13","8","2","39","5","8","6","2","1","1","1","1","0","3","2","2","2","2","trivial"
"41008","3","Mark Emlyn David Thomas","Port fix bug 41008. Enable POST to be used with indexed queries. Patch provided by Chris Halstead.","Bug 41008  POST request ignores command line parameters","post request ignor command line paramet","example:
<form method=""POST"" action=""test.exe?test1""><input type=""hidden""
value=""test2""><input type=""submit""></form>

this code does invoke the test.exe without passing the test1 command line parameter

the example works in apache httpd and ms iis

fix:

CGIServlet.java

           if (!""GET"".equals(req.getMethod()) && !""POST"".equals(req.getMethod()) &&
                    !""HEAD"".equals(req.getMethod()))
                return;","exampl form method post action exe test1 input type hidden valu test2 input type submit form code invok exe without pass test1 command line paramet exampl work apach httpd m ii fix servlet cgiservlet java get equal req get method getmethod post equal req get method getmethod head equal req get method getmethod return","""java/org/apache/catalina/servlets/CGIServlet.java""","4","4","5","1","43","4","25","13","5","1","7","34","34","33","24","34","1","4","24","5","1957","282","937","225","713","749","537","676","206","470","23","23","26","6","5","1","148","143","172","45","normal"
"41057","0","Remy Maucherat","- 41057: Caching large strings uses too much memory and is a bit pointless, so add an upper bound to the String length.","Bug 41057  Tomcat leaks memory on every request","tomcat leak memori everi request","","","""java/org/apache/tomcat/util/buf/StringCache.java""","3","3","3","1","19","0","14","3","3","8","13","25","25","17","5","25","0","0","6","19","670","109","408","126","282","153","214","306","123","183","14","14","15","9","6","0","85","85","92","49","normal"
"41059","962","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41059 Reduce one possible source of errors if using ENABLE_CLEAR_REFERENCES=true Patch by Curt Arnold","Bug 41059  WebAppClassLoader clearReferences code break running threads","web app class loader webappclassload clear refer clearrefer code break run thread","When the WebAppClassLoader stops it manually sets all static and final 
variables to null in the clearReferences method.  This results in NPEs for any 
thread that was not stopped and not expecting its final or static variables to 
be null.  This is particularly a problem with hot deploys since the unload 
fails and terminating the deploy.","web app class loader webappclassload stop manual set static final variabl null clear refer clearrefer method result npe thread stop expect final static variabl null particularli problem hot deploy sinc unload fail termin deploy","""java/org/apache/catalina/loader/WebappClassLoader.java""","6","6","6","2","33","3","22","7","3","1","5","58","58","57","28","58","3","0","20","35","2420","423","1398","303","983","601","672","1032","286","746","41","41","47","28","9","0","353","353","376","157","major"
"41074","8","Mark Emlyn David Thomas","Port fix for bug 41074. Make jsp:plugin output XHTML compliant","Bug 41074  Output of tag ""jsp:plugin"" is not conform to XHTML.","output tag jsp plugin conform xhtml","The jsp comiler outputs all tag required for an object in upper case letters. 
To be conform with XHTML lower case is required, but all tags are hard coded in 
the generator.","jsp comil output tag requir object upper case letter conform xhtml lower case requir tag hard code gener","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","36","3","27","5","12","6","5","110","110","104","48","110","11","49","0","50","4170","505","2978","496","2343","714","1839","2318","479","1839","22","22","27","20","5","0","483","477","529","200","normal"
"41089","0","Timothy A. Funk","Bug 41089 and JSP.6.3.2 Table JSP.6-2 Attributes for the <jsp:root> standard action version (required) The version of the JSP specification used in this page. Valid values are ""1.2"", ""2.0"", and ""2.1"". It is a translation error if the container does not support the specified version.","Bug 41089  JspFactoryImpl has SPEC_VERSION = ""2.0""","jsp factori impl jspfactoryimpl spec version","org.apache.jasper.runtime.JspFactoryImpl has 

private static final String SPEC_VERSION = ""2.0"";

Should be:

private static final String SPEC_VERSION = ""2.1"";","apach jasper runtim jsp factori impl jspfactoryimpl privat static final string spec version privat static final string spec version","""java/org/apache/jasper/compiler/ImplicitTagLibraryInfo.java""","8","8","9","1","51","5","37","8","1","0","7","3","3","3","4","3","0","0","0","3","217","29","141","52","91","49","74","99","46","53","19","19","24","3","7","0","24","24","29","5","normal"
"41089","0","Timothy A. Funk","Bug 41089 and JSP.6.3.2 Table JSP.6-2 Attributes for the <jsp:root> standard action version (required) The version of the JSP specification used in this page. Valid values are ""1.2"", ""2.0"", and ""2.1"". It is a translation error if the container does not support the specified version.","Bug 41089  JspFactoryImpl has SPEC_VERSION = ""2.0""","jsp factori impl jspfactoryimpl spec version","org.apache.jasper.runtime.JspFactoryImpl has 

private static final String SPEC_VERSION = ""2.0"";

Should be:

private static final String SPEC_VERSION = ""2.1"";","apach jasper runtim jsp factori impl jspfactoryimpl privat static final string spec version privat static final string spec version","""java/org/apache/jasper/compiler/PageDataImpl.java""","1","1","2","1","9","0","8","1","3","0","3","50","50","50","11","50","0","12","0","38","711","85","432","121","260","194","231","324","120","204","10","10","13","6","4","0","95","95","104","60","normal"
"41089","0","Timothy A. Funk","Bug 41089 and JSP.6.3.2 Table JSP.6-2 Attributes for the <jsp:root> standard action version (required) The version of the JSP specification used in this page. Valid values are ""1.2"", ""2.0"", and ""2.1"". It is a translation error if the container does not support the specified version.","Bug 41089  JspFactoryImpl has SPEC_VERSION = ""2.0""","jsp factori impl jspfactoryimpl spec version","org.apache.jasper.runtime.JspFactoryImpl has 

private static final String SPEC_VERSION = ""2.0"";

Should be:

private static final String SPEC_VERSION = ""2.1"";","apach jasper runtim jsp factori impl jspfactoryimpl privat static final string spec version privat static final string spec version","""java/org/apache/jasper/compiler/Validator.java""","4","4","6","1","26","2","21","2","8","2","15","57","57","55","13","57","5","16","0","36","1742","222","1273","343","928","249","524","789","269","520","44","44","46","6","8","0","262","262","353","79","normal"
"41166","104","Filip Hanik","fixes for http://issues.apache.org/bugzilla/show_bug.cgi?id=41166 although there is still work to be done, need to separate Tomcat attributes vs. application attributes","Bug 41166  Unable to start ReplicatedContext","unabl start replic context replicatedcontext","I try to test the Cluster function. I got a problem: something like following 
apears in the $CATALINA_HOME/logs/catalina.out

SEVERE: Unable to start ReplicatedContext
java.lang.ClassCastException: org.apache.naming.resources.ProxyDirContext 
cannot be cast to java.io.Serializable
        at 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap$MapEntry.setValue
(AbstractReplicatedMap.java:1060)

I didn't change any file in $CATALINA_HOME except server.xml, the any thing I 
changed in server.xml is uncomment the line: 
<Cluster className=""org.apache.catalina.ha.tcp.SimpleTcpCluster""/>. 

and I add a context configuration file test.xml to 
$CATALINA_HOME/conf/Catalina/localhost with the flolling content

[Aray@BONC-01 conf]$ cat Catalina/localhost/test.xml
<Context
        className=""org.apache.catalina.ha.context.ReplicatedContext""
        path=""/test"" docBase=""/var/www/ClusterTest""
        debug=""0"" privileged=""true"" reloadable=""true""
>

the web.xml file in /var/www/ClusterTest has no <distributable/> element 


I am worrying about I can't explain the problem clearly with my poor English. 
So I paste the stepes I do as following:

[Aray@BONC-01 apache-tomcat-6.0.2]$ which java
/usr/java/jdk1.6.0/bin/java
[Aray@BONC-01 apache-tomcat-6.0.2]$ java -version
java version ""1.6.0-rc""
Java(TM) SE Runtime Environment (build 1.6.0-rc-b104)
Java HotSpot(TM) Client VM (build 1.6.0-rc-b104, mixed mode, sharing)
[Aray@BONC-01 apache-tomcat-6.0.2]$ echo $JAVA_HOME
/usr/java/jdk1.6.0
[Aray@BONC-01 apache-tomcat-6.0.2]$ echo $CLASSPATH

[Aray@BONC-01 apache-tomcat-6.0.2]$ uname -a
Linux BONC-01 2.6.9-34.EL #1 Wed Mar 8 00:07:35 CST 2006 i686 i686 i386 
GNU/Linux
[root@BONC-01 local]# cat /etc/redhat-release
CentOS release 4.3 (Final)
[Aray@BONC-01 apache-tomcat-6.0.2]$ cd conf
[Aray@BONC-01 conf]$ cat server.xml
<!-- Note:  A ""Server"" is not itself a ""Container"", so you may not
     define subcomponents such as ""Valves"" at this level.
     Documentation at /docs/config/server.html
 -->
<Server port=""8005"" shutdown=""SHUTDOWN"">

  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener className=""org.apache.catalina.core.AprLifecycleListener"" 
SSLEngine=""on"" />
  <!--Initialize Jasper prior to webapps are loaded. Documentation 
at /docs/jasper-howto.html -->
  <Listener className=""org.apache.catalina.core.JasperListener"" />
  <!-- JMX Support for the Tomcat server. Documentation at /docs/non-
existent.html -->
  <Listener className=""org.apache.catalina.mbeans.ServerLifecycleListener"" />
  <Listener 
className=""org.apache.catalina.mbeans.GlobalResourcesLifecycleListener"" />

  <!-- Global JNDI resources
       Documentation at /docs/jndi-resources-howto.html
  -->
  <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
    <Resource name=""UserDatabase"" auth=""Container""
              type=""org.apache.catalina.UserDatabase""
              description=""User database that can be updated and saved""
              factory=""org.apache.catalina.users.MemoryUserDatabaseFactory""
              pathname=""conf/tomcat-users.xml"" />
  </GlobalNamingResources>

  <!-- A ""Service"" is a collection of one or more ""Connectors"" that share
       a single ""Container"" Note:  A ""Service"" is not itself a ""Container"",
       so you may not define subcomponents such as ""Valves"" at this level.
       Documentation at /docs/config/service.html
   -->
  <Service name=""Catalina"">

    <!-- A ""Connector"" represents an endpoint by which requests are received
         and responses are returned. Documentation at :
         Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
         Java AJP  Connector: /docs/config/ajp.html
         APR (HTTP/AJP) Connector: /docs/apr.html
         Define a non-SSL HTTP/1.1 Connector on port 8080
    -->
    <Connector port=""8080"" protocol=""HTTP/1.1""
               maxThreads=""150"" connectionTimeout=""20000""
               redirectPort=""8443"" />

    <!-- Define a SSL HTTP/1.1 Connector on port 8443
         This connector uses the JSSE configuration, when using APR, the
         connector should be using the OpenSSL style configuration
         described in the APR documentation -->
    <!--
    <Connector port=""8443"" protocol=""HTTP/1.1""
               maxThreads=""150"" scheme=""https"" secure=""true""
               clientAuth=""false"" sslProtocol=""TLS"" />
    -->

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port=""8009"" protocol=""AJP/1.3"" redirectPort=""8443"" />


    <!-- An Engine represents the entry point (within Catalina) that processes
         every request.  The Engine implementation for Tomcat stand alone
         analyzes the HTTP headers included with the request, and passes them
         on to the appropriate Host (virtual host).
         Documentation at /docs/config/engine.html -->

    <!-- You should set jvmRoute to support load-balancing via AJP ie :
    <Engine name=""Standalone"" defaultHost=""localhost"" jvmRoute=""jvm1"">
    -->
    <Engine name=""Catalina"" defaultHost=""localhost"">

      <!--For clustering, please take a look at documentation at:
          /docs/cluster-howto.html  (simple how to)
          /docs/config/cluster.html (reference documentation) -->

      <Cluster className=""org.apache.catalina.ha.tcp.SimpleTcpCluster""/>


      <!-- The request dumper valve dumps useful debugging information about
           the request and response data received and sent by Tomcat.
           Documentation at: /docs/config/valve.html -->
      <!--
      <Valve className=""org.apache.catalina.valves.RequestDumperValve""/>
      -->

      <!-- This Realm uses the UserDatabase configured in the global JNDI
           resources under the key ""UserDatabase"".  Any edits
           that are performed against this UserDatabase are immediately
           available for use by the Realm.  -->
      <Realm className=""org.apache.catalina.realm.UserDatabaseRealm""
             resourceName=""UserDatabase""/>

      <!-- Define the default virtual host
           Note: XML Schema validation will not work with Xerces 2.2.
       -->
      <Host name=""localhost""  appBase=""webapps""
            unpackWARs=""true"" autoDeploy=""true""
            xmlValidation=""false"" xmlNamespaceAware=""false"">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className=""org.apache.catalina.authenticator.SingleSignOn"" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className=""org.apache.catalina.valves.FastCommonAccessLogValve"" 
directory=""logs""
               prefix=""localhost_access_log."" suffix="".txt"" pattern=""common"" 
resolveHosts=""false""/>
        -->

      </Host>
    </Engine>
  </Service>
</Server>

[Aray@BONC-01 conf]$ mkdir Catalina
[Aray@BONC-01 conf]$ ln -s /usr/local/tomcatConf/localhost/ Catalina/localhost
[Aray@BONC-01 conf]$ cat Catalina/localhost/test.xml
<Context
        className=""org.apache.catalina.ha.context.ReplicatedContext""
        path=""/test"" docBase=""/var/www/ClusterTest""
        debug=""0"" privileged=""true"" reloadable=""true""
>
</Context>
[Aray@BONC-01 conf]$ cd ..
[Aray@BONC-01 apache-tomcat-6.0.2]$ ls
bin  conf  lib  LICENSE  logs  NOTICE  RELEASE-NOTES  RUNNING.txt  temp  
webapps  work
[Aray@BONC-01 apache-tomcat-6.0.2]$ rm logs/*
[Aray@BONC-01 apache-tomcat-6.0.2]$ bin/catalina.sh version
Using CATALINA_BASE:   /home/Aray/download/apache-tomcat-6.0.2
Using CATALINA_HOME:   /home/Aray/download/apache-tomcat-6.0.2
Using CATALINA_TMPDIR: /home/Aray/download/apache-tomcat-6.0.2/temp
Using JRE_HOME:       /usr/java/jdk1.6.0
Server version: Apache Tomcat/6.0.2
Server built:   Nov 16 2006 12:31:06
Server number:  6.0.2.0
OS Name:        Linux
OS Version:     2.6.9-34.EL
Architecture:   i386
JVM Version:    1.6.0-rc-b104
JVM Vendor:     Sun Microsystems Inc.
[Aray@BONC-01 apache-tomcat-6.0.2]$ bin/startup.sh
Using CATALINA_BASE:   /home/Aray/download/apache-tomcat-6.0.2
Using CATALINA_HOME:   /home/Aray/download/apache-tomcat-6.0.2
Using CATALINA_TMPDIR: /home/Aray/download/apache-tomcat-6.0.2/temp
Using JRE_HOME:       /usr/java/jdk1.6.0
[Aray@BONC-01 apache-tomcat-6.0.2]$ cat logs/catalina.out
INFO: Initializing Coyote HTTP/1.1 on http-8080
Dec 13, 2006 4:07:39 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 2532 ms
Dec 13, 2006 4:07:40 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Dec 13, 2006 4:07:40 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.2
Dec 13, 2006 4:07:40 PM org.apache.catalina.ha.tcp.SimpleTcpCluster start
INFO: Cluster is about to start
Dec 13, 2006 4:07:40 PM org.apache.catalina.tribes.transport.ReceiverBase bind
INFO: Receiver Server Socket bound to:/127.0.0.1:4000
Dec 13, 2006 4:07:40 PM org.apache.catalina.tribes.membership.McastServiceImpl 
setupSocket
INFO: Setting cluster mcast soTimeout to 500
Dec 13, 2006 4:07:40 PM org.apache.catalina.tribes.membership.McastServiceImpl 
waitForMembers
INFO: Sleeping for 1000 milliseconds to establish cluster membership, start 
level:4
Dec 13, 2006 4:07:41 PM org.apache.catalina.tribes.membership.McastServiceImpl 
waitForMembers
INFO: Done sleeping, membership established, start level:4
Dec 13, 2006 4:07:41 PM org.apache.catalina.tribes.membership.McastServiceImpl 
waitForMembers
INFO: Sleeping for 1000 milliseconds to establish cluster membership, start 
level:8
Dec 13, 2006 4:07:42 PM org.apache.catalina.tribes.membership.McastServiceImpl 
waitForMembers
INFO: Done sleeping, membership established, start level:8
Dec 13, 2006 4:07:42 PM org.apache.catalina.core.StandardHost start
INFO: XML validation disabled
Dec 13, 2006 4:07:42 PM org.apache.catalina.tribes.tipis.AbstractReplicatedMap 
init
INFO: Initializing AbstractReplicatedMap with context name:/test
Dec 13, 2006 4:07:43 PM org.apache.catalina.ha.context.ReplicatedContext start
SEVERE: Unable to start ReplicatedContext
java.lang.ClassCastException: org.apache.naming.resources.ProxyDirContext 
cannot be cast to java.io.Serializable
        at 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap$MapEntry.setValue
(AbstractReplicatedMap.java:1060)
        at 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap$MapEntry.<init>
(AbstractReplicatedMap.java:1005)
        at org.apache.catalina.tribes.tipis.AbstractReplicatedMap.put
(AbstractReplicatedMap.java:859)
        at org.apache.catalina.core.ApplicationContext.setAttribute
(ApplicationContext.java:756)
        at org.apache.catalina.core.ApplicationContextFacade.setAttribute
(ApplicationContextFacade.java:334)
        at org.apache.catalina.core.StandardContext.start
(StandardContext.java:4296)
        at org.apache.catalina.ha.context.ReplicatedContext.start
(ReplicatedContext.java:55)
        at org.apache.catalina.core.ContainerBase.addChildInternal
(ContainerBase.java:760)
        at org.apache.catalina.core.ContainerBase.addChild
(ContainerBase.java:740)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
        at org.apache.catalina.startup.HostConfig.deployDescriptor
(HostConfig.java:626)
        at org.apache.catalina.startup.HostConfig.deployDescriptors
(HostConfig.java:553)
        at org.apache.catalina.startup.HostConfig.deployApps
(HostConfig.java:488)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1138)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent
(HostConfig.java:311)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent
(LifecycleSupport.java:120)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1022)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1014)
        at org.apache.catalina.core.StandardEngine.start
(StandardEngine.java:443)
        at org.apache.catalina.core.StandardService.start
(StandardService.java:451)
        at org.apache.catalina.core.StandardServer.start
(StandardServer.java:710)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:552)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Dec 13, 2006 4:07:43 PM org.apache.catalina.core.ContainerBase addChildInternal
SEVERE: ContainerBase.addChild: start:
LifecycleException:  Failed to start ReplicatedContext:  
java.lang.ClassCastException: org.apache.naming.resources.ProxyDirContext 
cannot be cast to java.io.Serializable
        at org.apache.catalina.ha.context.ReplicatedContext.start
(ReplicatedContext.java:58)","tri cluster function got problem someth like follow apear catalina home log catalina sever unabl start replic context replicatedcontext java lang class cast except classcastexcept apach name resourc proxi dir context proxydircontext cannot cast java serializ apach catalina tribe tipi abstract replic map abstractreplicatedmap map entri mapentri set valu setvalu abstract replic map abstractreplicatedmap java didn chang file catalina home except server xml thing chang server xml uncom line cluster class name classnam apach catalina tcp simpl tcp cluster simpletcpclust add context configur file xml catalina home conf catalina localhost floll content aray bonc conf cat catalina localhost xml context class name classnam apach catalina context replic context replicatedcontext path doc base docbas www cluster test clustertest debug privileg true reload true web xml file www cluster test clustertest distribut element worri explain problem clearli poor english past stepe follow aray bonc apach tomcat apachetomcat java usr java jdk1 java aray bonc apach tomcat apachetomcat java version java version rc 0rc java tm runtim environ build rc b104 0rcb104 java hot spot hotspot tm client vm build rc b104 0rcb104 mix mode share aray bonc apach tomcat apachetomcat echo java home usr java jdk1 aray bonc apach tomcat apachetomcat echo classpath aray bonc apach tomcat apachetomcat unam linux bonc wed mar cst i686 i686 i386 gnu linux root bonc local cat etc redhat releas redhatreleas cent cento releas final aray bonc apach tomcat apachetomcat cd conf aray bonc conf cat server xml note server contain may defin subcompon valv level document doc config server html server port shutdown shutdown apr librari loader document doc apr html listen class name classnam apach catalina core apr lifecycl listen aprlifecyclelisten engin sslengin initi jasper prior webapp load document doc jasper howto jasperhowto html listen class name classnam apach catalina core jasper listen jasperlisten jmx support tomcat server document doc exist html listen class name classnam apach catalina mbean server lifecycl listen serverlifecyclelisten listen class name classnam apach catalina mbean global resourc lifecycl listen globalresourceslifecyclelisten global jndi resourc document doc jndi resourc howto jndiresourceshowto html global name resourc globalnamingresourc edit user databas use user databas realm userdatabaserealm authent user resourc name user databas userdatabas auth contain type apach catalina user databas userdatabas descript user databas updat save factori apach catalina user memori user databas factori memoryuserdatabasefactori pathnam conf tomcat user tomcatus xml global name resourc globalnamingresourc servic collect one connector share singl contain note servic contain may defin subcompon valv level document doc config servic html servic name catalina connector repres endpoint request receiv respons return document java http connector doc config http html block non block nonblock java ajp connector doc config ajp html apr http ajp connector doc apr html defin ssl http connector port connector port protocol http max thread maxthread connect timeout connectiontimeout redirect port redirectport defin ssl http connector port connector us jsse configur use apr connector use open openssl style configur describ apr document connector port protocol http max thread maxthread scheme http secur true client auth clientauth fals ssl protocol sslprotocol tl defin ajp connector port connector port protocol ajp redirect port redirectport engin repres entri point within catalina process everi request engin implement tomcat stand alon analyz http header includ request pass appropri host virtual host document doc config engin html set jvm rout jvmrout support load balanc loadbalanc via ajp ie engin name standalon default host defaulthost localhost jvm rout jvmrout jvm1 engin name catalina default host defaulthost localhost cluster pleas take look document doc cluster howto clusterhowto html simpl doc config cluster html refer document cluster class name classnam apach catalina tcp simpl tcp cluster simpletcpclust request dumper valv dump use debug inform request respons data receiv sent tomcat document doc config valv html valv class name classnam apach catalina valv request dumper valv requestdumpervalv realm us user databas userdatabas configur global jndi resourc key user databas userdatabas edit perform user databas userdatabas immedi avail use realm realm class name classnam apach catalina realm user databas realm userdatabaserealm resourc name resourcenam user databas userdatabas defin default virtual host note xml schema valid work xerc host name localhost app base appbas webapp unpack unpackwar true auto deploy autodeploy true xml valid xmlvalid fals xml namespac awar xmlnamespaceawar fals singl sign on singlesignon valv share authent web applic document doc config valv html valv class name classnam apach catalina authent singl sign on singlesignon access log process exampl document doc config valv html valv class name classnam apach catalina valv fast common access log valv fastcommonaccesslogvalv directori log prefix localhost access log suffix txt pattern common resolv host resolvehost fals host engin servic server aray bonc conf mkdir catalina aray bonc conf ln usr local tomcat conf tomcatconf localhost catalina localhost aray bonc conf cat catalina localhost xml context class name classnam apach catalina context replic context replicatedcontext path doc base docbas www cluster test clustertest debug privileg true reload true context aray bonc conf cd aray bonc apach tomcat apachetomcat l conf lib licens log notic releas note run txt temp webapp work aray bonc apach tomcat apachetomcat rm log aray bonc apach tomcat apachetomcat catalina sh version use catalina base home aray download apach tomcat apachetomcat use catalina home home aray download apach tomcat apachetomcat use catalina tmpdir home aray download apach tomcat apachetomcat temp use jre home usr java jdk1 server version apach tomcat server built nov server number name linux version architectur i386 jvm version rc b104 0rcb104 jvm vendor sun microsystem inc aray bonc apach tomcat apachetomcat startup sh use catalina base home aray download apach tomcat apachetomcat use catalina home home aray download apach tomcat apachetomcat use catalina tmpdir home aray download apach tomcat apachetomcat temp use jre home usr java jdk1 aray bonc apach tomcat apachetomcat cat log catalina info initi coyot http http dec pm apach catalina startup catalina load info initi process m dec pm apach catalina core standard servic standardservic start info start servic catalina dec pm apach catalina core standard engin standardengin start info start servlet engin apach tomcat dec pm apach catalina tcp simpl tcp cluster simpletcpclust start info cluster start dec pm apach catalina tribe transport receiv base receiverbas bind info receiv server socket bound dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl setup socket setupsocket info set cluster mcast so timeout sotimeout dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl wait for member waitformemb info sleep millisecond establish cluster membership start level dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl wait for member waitformemb info done sleep membership establish start level dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl wait for member waitformemb info sleep millisecond establish cluster membership start level dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl wait for member waitformemb info done sleep membership establish start level dec pm apach catalina core standard host standardhost start info xml valid disabl dec pm apach catalina tribe tipi abstract replic map abstractreplicatedmap init info initi abstract replic map abstractreplicatedmap context name dec pm apach catalina context replic context replicatedcontext start sever unabl start replic context replicatedcontext java lang class cast except classcastexcept apach name resourc proxi dir context proxydircontext cannot cast java serializ apach catalina tribe tipi abstract replic map abstractreplicatedmap map entri mapentri set valu setvalu abstract replic map abstractreplicatedmap java apach catalina tribe tipi abstract replic map abstractreplicatedmap map entri mapentri init abstract replic map abstractreplicatedmap java apach catalina tribe tipi abstract replic map abstractreplicatedmap put abstract replic map abstractreplicatedmap java apach catalina core applic context applicationcontext set attribut setattribut applic context applicationcontext java apach catalina core applic context facad applicationcontextfacad set attribut setattribut applic context facad applicationcontextfacad java apach catalina core standard context standardcontext start standard context standardcontext java apach catalina context replic context replicatedcontext start replic context replicatedcontext java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig java apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig java apach catalina startup host config hostconfig deploy app deployapp host config hostconfig java apach catalina startup host config hostconfig start host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina core contain base containerbas start contain base containerbas java apach catalina core standard host standardhost start standard host standardhost java apach catalina core contain base containerbas start contain base containerbas java apach catalina core standard engin standardengin start standard engin standardengin java apach catalina core standard servic standardservic start standard servic standardservic java apach catalina core standard server standardserv start standard server standardserv java apach catalina startup catalina start catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap start bootstrap java apach catalina startup bootstrap main bootstrap java dec pm apach catalina core contain base containerbas add child intern addchildintern sever contain base containerbas add child addchild start lifecycl except lifecycleexcept fail start replic context replicatedcontext java lang class cast except classcastexcept apach name resourc proxi dir context proxydircontext cannot cast java serializ apach catalina context replic context replicatedcontext start replic context replicatedcontext java","""java/org/apache/catalina/core/ApplicationContext.java""","3","3","3","2","21","2","12","6","1","2","2","35","35","33","8","35","2","5","1","27","961","205","470","139","319","287","242","353","134","219","12","12","13","9","3","1","111","111","118","80","normal"
"41166","104","Filip Hanik","fixes for http://issues.apache.org/bugzilla/show_bug.cgi?id=41166 although there is still work to be done, need to separate Tomcat attributes vs. application attributes","Bug 41166  Unable to start ReplicatedContext","unabl start replic context replicatedcontext","I try to test the Cluster function. I got a problem: something like following 
apears in the $CATALINA_HOME/logs/catalina.out

SEVERE: Unable to start ReplicatedContext
java.lang.ClassCastException: org.apache.naming.resources.ProxyDirContext 
cannot be cast to java.io.Serializable
        at 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap$MapEntry.setValue
(AbstractReplicatedMap.java:1060)

I didn't change any file in $CATALINA_HOME except server.xml, the any thing I 
changed in server.xml is uncomment the line: 
<Cluster className=""org.apache.catalina.ha.tcp.SimpleTcpCluster""/>. 

and I add a context configuration file test.xml to 
$CATALINA_HOME/conf/Catalina/localhost with the flolling content

[Aray@BONC-01 conf]$ cat Catalina/localhost/test.xml
<Context
        className=""org.apache.catalina.ha.context.ReplicatedContext""
        path=""/test"" docBase=""/var/www/ClusterTest""
        debug=""0"" privileged=""true"" reloadable=""true""
>

the web.xml file in /var/www/ClusterTest has no <distributable/> element 


I am worrying about I can't explain the problem clearly with my poor English. 
So I paste the stepes I do as following:

[Aray@BONC-01 apache-tomcat-6.0.2]$ which java
/usr/java/jdk1.6.0/bin/java
[Aray@BONC-01 apache-tomcat-6.0.2]$ java -version
java version ""1.6.0-rc""
Java(TM) SE Runtime Environment (build 1.6.0-rc-b104)
Java HotSpot(TM) Client VM (build 1.6.0-rc-b104, mixed mode, sharing)
[Aray@BONC-01 apache-tomcat-6.0.2]$ echo $JAVA_HOME
/usr/java/jdk1.6.0
[Aray@BONC-01 apache-tomcat-6.0.2]$ echo $CLASSPATH

[Aray@BONC-01 apache-tomcat-6.0.2]$ uname -a
Linux BONC-01 2.6.9-34.EL #1 Wed Mar 8 00:07:35 CST 2006 i686 i686 i386 
GNU/Linux
[root@BONC-01 local]# cat /etc/redhat-release
CentOS release 4.3 (Final)
[Aray@BONC-01 apache-tomcat-6.0.2]$ cd conf
[Aray@BONC-01 conf]$ cat server.xml
<!-- Note:  A ""Server"" is not itself a ""Container"", so you may not
     define subcomponents such as ""Valves"" at this level.
     Documentation at /docs/config/server.html
 -->
<Server port=""8005"" shutdown=""SHUTDOWN"">

  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener className=""org.apache.catalina.core.AprLifecycleListener"" 
SSLEngine=""on"" />
  <!--Initialize Jasper prior to webapps are loaded. Documentation 
at /docs/jasper-howto.html -->
  <Listener className=""org.apache.catalina.core.JasperListener"" />
  <!-- JMX Support for the Tomcat server. Documentation at /docs/non-
existent.html -->
  <Listener className=""org.apache.catalina.mbeans.ServerLifecycleListener"" />
  <Listener 
className=""org.apache.catalina.mbeans.GlobalResourcesLifecycleListener"" />

  <!-- Global JNDI resources
       Documentation at /docs/jndi-resources-howto.html
  -->
  <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
    <Resource name=""UserDatabase"" auth=""Container""
              type=""org.apache.catalina.UserDatabase""
              description=""User database that can be updated and saved""
              factory=""org.apache.catalina.users.MemoryUserDatabaseFactory""
              pathname=""conf/tomcat-users.xml"" />
  </GlobalNamingResources>

  <!-- A ""Service"" is a collection of one or more ""Connectors"" that share
       a single ""Container"" Note:  A ""Service"" is not itself a ""Container"",
       so you may not define subcomponents such as ""Valves"" at this level.
       Documentation at /docs/config/service.html
   -->
  <Service name=""Catalina"">

    <!-- A ""Connector"" represents an endpoint by which requests are received
         and responses are returned. Documentation at :
         Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
         Java AJP  Connector: /docs/config/ajp.html
         APR (HTTP/AJP) Connector: /docs/apr.html
         Define a non-SSL HTTP/1.1 Connector on port 8080
    -->
    <Connector port=""8080"" protocol=""HTTP/1.1""
               maxThreads=""150"" connectionTimeout=""20000""
               redirectPort=""8443"" />

    <!-- Define a SSL HTTP/1.1 Connector on port 8443
         This connector uses the JSSE configuration, when using APR, the
         connector should be using the OpenSSL style configuration
         described in the APR documentation -->
    <!--
    <Connector port=""8443"" protocol=""HTTP/1.1""
               maxThreads=""150"" scheme=""https"" secure=""true""
               clientAuth=""false"" sslProtocol=""TLS"" />
    -->

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port=""8009"" protocol=""AJP/1.3"" redirectPort=""8443"" />


    <!-- An Engine represents the entry point (within Catalina) that processes
         every request.  The Engine implementation for Tomcat stand alone
         analyzes the HTTP headers included with the request, and passes them
         on to the appropriate Host (virtual host).
         Documentation at /docs/config/engine.html -->

    <!-- You should set jvmRoute to support load-balancing via AJP ie :
    <Engine name=""Standalone"" defaultHost=""localhost"" jvmRoute=""jvm1"">
    -->
    <Engine name=""Catalina"" defaultHost=""localhost"">

      <!--For clustering, please take a look at documentation at:
          /docs/cluster-howto.html  (simple how to)
          /docs/config/cluster.html (reference documentation) -->

      <Cluster className=""org.apache.catalina.ha.tcp.SimpleTcpCluster""/>


      <!-- The request dumper valve dumps useful debugging information about
           the request and response data received and sent by Tomcat.
           Documentation at: /docs/config/valve.html -->
      <!--
      <Valve className=""org.apache.catalina.valves.RequestDumperValve""/>
      -->

      <!-- This Realm uses the UserDatabase configured in the global JNDI
           resources under the key ""UserDatabase"".  Any edits
           that are performed against this UserDatabase are immediately
           available for use by the Realm.  -->
      <Realm className=""org.apache.catalina.realm.UserDatabaseRealm""
             resourceName=""UserDatabase""/>

      <!-- Define the default virtual host
           Note: XML Schema validation will not work with Xerces 2.2.
       -->
      <Host name=""localhost""  appBase=""webapps""
            unpackWARs=""true"" autoDeploy=""true""
            xmlValidation=""false"" xmlNamespaceAware=""false"">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className=""org.apache.catalina.authenticator.SingleSignOn"" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className=""org.apache.catalina.valves.FastCommonAccessLogValve"" 
directory=""logs""
               prefix=""localhost_access_log."" suffix="".txt"" pattern=""common"" 
resolveHosts=""false""/>
        -->

      </Host>
    </Engine>
  </Service>
</Server>

[Aray@BONC-01 conf]$ mkdir Catalina
[Aray@BONC-01 conf]$ ln -s /usr/local/tomcatConf/localhost/ Catalina/localhost
[Aray@BONC-01 conf]$ cat Catalina/localhost/test.xml
<Context
        className=""org.apache.catalina.ha.context.ReplicatedContext""
        path=""/test"" docBase=""/var/www/ClusterTest""
        debug=""0"" privileged=""true"" reloadable=""true""
>
</Context>
[Aray@BONC-01 conf]$ cd ..
[Aray@BONC-01 apache-tomcat-6.0.2]$ ls
bin  conf  lib  LICENSE  logs  NOTICE  RELEASE-NOTES  RUNNING.txt  temp  
webapps  work
[Aray@BONC-01 apache-tomcat-6.0.2]$ rm logs/*
[Aray@BONC-01 apache-tomcat-6.0.2]$ bin/catalina.sh version
Using CATALINA_BASE:   /home/Aray/download/apache-tomcat-6.0.2
Using CATALINA_HOME:   /home/Aray/download/apache-tomcat-6.0.2
Using CATALINA_TMPDIR: /home/Aray/download/apache-tomcat-6.0.2/temp
Using JRE_HOME:       /usr/java/jdk1.6.0
Server version: Apache Tomcat/6.0.2
Server built:   Nov 16 2006 12:31:06
Server number:  6.0.2.0
OS Name:        Linux
OS Version:     2.6.9-34.EL
Architecture:   i386
JVM Version:    1.6.0-rc-b104
JVM Vendor:     Sun Microsystems Inc.
[Aray@BONC-01 apache-tomcat-6.0.2]$ bin/startup.sh
Using CATALINA_BASE:   /home/Aray/download/apache-tomcat-6.0.2
Using CATALINA_HOME:   /home/Aray/download/apache-tomcat-6.0.2
Using CATALINA_TMPDIR: /home/Aray/download/apache-tomcat-6.0.2/temp
Using JRE_HOME:       /usr/java/jdk1.6.0
[Aray@BONC-01 apache-tomcat-6.0.2]$ cat logs/catalina.out
INFO: Initializing Coyote HTTP/1.1 on http-8080
Dec 13, 2006 4:07:39 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 2532 ms
Dec 13, 2006 4:07:40 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Dec 13, 2006 4:07:40 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.2
Dec 13, 2006 4:07:40 PM org.apache.catalina.ha.tcp.SimpleTcpCluster start
INFO: Cluster is about to start
Dec 13, 2006 4:07:40 PM org.apache.catalina.tribes.transport.ReceiverBase bind
INFO: Receiver Server Socket bound to:/127.0.0.1:4000
Dec 13, 2006 4:07:40 PM org.apache.catalina.tribes.membership.McastServiceImpl 
setupSocket
INFO: Setting cluster mcast soTimeout to 500
Dec 13, 2006 4:07:40 PM org.apache.catalina.tribes.membership.McastServiceImpl 
waitForMembers
INFO: Sleeping for 1000 milliseconds to establish cluster membership, start 
level:4
Dec 13, 2006 4:07:41 PM org.apache.catalina.tribes.membership.McastServiceImpl 
waitForMembers
INFO: Done sleeping, membership established, start level:4
Dec 13, 2006 4:07:41 PM org.apache.catalina.tribes.membership.McastServiceImpl 
waitForMembers
INFO: Sleeping for 1000 milliseconds to establish cluster membership, start 
level:8
Dec 13, 2006 4:07:42 PM org.apache.catalina.tribes.membership.McastServiceImpl 
waitForMembers
INFO: Done sleeping, membership established, start level:8
Dec 13, 2006 4:07:42 PM org.apache.catalina.core.StandardHost start
INFO: XML validation disabled
Dec 13, 2006 4:07:42 PM org.apache.catalina.tribes.tipis.AbstractReplicatedMap 
init
INFO: Initializing AbstractReplicatedMap with context name:/test
Dec 13, 2006 4:07:43 PM org.apache.catalina.ha.context.ReplicatedContext start
SEVERE: Unable to start ReplicatedContext
java.lang.ClassCastException: org.apache.naming.resources.ProxyDirContext 
cannot be cast to java.io.Serializable
        at 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap$MapEntry.setValue
(AbstractReplicatedMap.java:1060)
        at 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap$MapEntry.<init>
(AbstractReplicatedMap.java:1005)
        at org.apache.catalina.tribes.tipis.AbstractReplicatedMap.put
(AbstractReplicatedMap.java:859)
        at org.apache.catalina.core.ApplicationContext.setAttribute
(ApplicationContext.java:756)
        at org.apache.catalina.core.ApplicationContextFacade.setAttribute
(ApplicationContextFacade.java:334)
        at org.apache.catalina.core.StandardContext.start
(StandardContext.java:4296)
        at org.apache.catalina.ha.context.ReplicatedContext.start
(ReplicatedContext.java:55)
        at org.apache.catalina.core.ContainerBase.addChildInternal
(ContainerBase.java:760)
        at org.apache.catalina.core.ContainerBase.addChild
(ContainerBase.java:740)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
        at org.apache.catalina.startup.HostConfig.deployDescriptor
(HostConfig.java:626)
        at org.apache.catalina.startup.HostConfig.deployDescriptors
(HostConfig.java:553)
        at org.apache.catalina.startup.HostConfig.deployApps
(HostConfig.java:488)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1138)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent
(HostConfig.java:311)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent
(LifecycleSupport.java:120)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1022)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1014)
        at org.apache.catalina.core.StandardEngine.start
(StandardEngine.java:443)
        at org.apache.catalina.core.StandardService.start
(StandardService.java:451)
        at org.apache.catalina.core.StandardServer.start
(StandardServer.java:710)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:552)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Dec 13, 2006 4:07:43 PM org.apache.catalina.core.ContainerBase addChildInternal
SEVERE: ContainerBase.addChild: start:
LifecycleException:  Failed to start ReplicatedContext:  
java.lang.ClassCastException: org.apache.naming.resources.ProxyDirContext 
cannot be cast to java.io.Serializable
        at org.apache.catalina.ha.context.ReplicatedContext.start
(ReplicatedContext.java:58)","tri cluster function got problem someth like follow apear catalina home log catalina sever unabl start replic context replicatedcontext java lang class cast except classcastexcept apach name resourc proxi dir context proxydircontext cannot cast java serializ apach catalina tribe tipi abstract replic map abstractreplicatedmap map entri mapentri set valu setvalu abstract replic map abstractreplicatedmap java didn chang file catalina home except server xml thing chang server xml uncom line cluster class name classnam apach catalina tcp simpl tcp cluster simpletcpclust add context configur file xml catalina home conf catalina localhost floll content aray bonc conf cat catalina localhost xml context class name classnam apach catalina context replic context replicatedcontext path doc base docbas www cluster test clustertest debug privileg true reload true web xml file www cluster test clustertest distribut element worri explain problem clearli poor english past stepe follow aray bonc apach tomcat apachetomcat java usr java jdk1 java aray bonc apach tomcat apachetomcat java version java version rc 0rc java tm runtim environ build rc b104 0rcb104 java hot spot hotspot tm client vm build rc b104 0rcb104 mix mode share aray bonc apach tomcat apachetomcat echo java home usr java jdk1 aray bonc apach tomcat apachetomcat echo classpath aray bonc apach tomcat apachetomcat unam linux bonc wed mar cst i686 i686 i386 gnu linux root bonc local cat etc redhat releas redhatreleas cent cento releas final aray bonc apach tomcat apachetomcat cd conf aray bonc conf cat server xml note server contain may defin subcompon valv level document doc config server html server port shutdown shutdown apr librari loader document doc apr html listen class name classnam apach catalina core apr lifecycl listen aprlifecyclelisten engin sslengin initi jasper prior webapp load document doc jasper howto jasperhowto html listen class name classnam apach catalina core jasper listen jasperlisten jmx support tomcat server document doc exist html listen class name classnam apach catalina mbean server lifecycl listen serverlifecyclelisten listen class name classnam apach catalina mbean global resourc lifecycl listen globalresourceslifecyclelisten global jndi resourc document doc jndi resourc howto jndiresourceshowto html global name resourc globalnamingresourc edit user databas use user databas realm userdatabaserealm authent user resourc name user databas userdatabas auth contain type apach catalina user databas userdatabas descript user databas updat save factori apach catalina user memori user databas factori memoryuserdatabasefactori pathnam conf tomcat user tomcatus xml global name resourc globalnamingresourc servic collect one connector share singl contain note servic contain may defin subcompon valv level document doc config servic html servic name catalina connector repres endpoint request receiv respons return document java http connector doc config http html block non block nonblock java ajp connector doc config ajp html apr http ajp connector doc apr html defin ssl http connector port connector port protocol http max thread maxthread connect timeout connectiontimeout redirect port redirectport defin ssl http connector port connector us jsse configur use apr connector use open openssl style configur describ apr document connector port protocol http max thread maxthread scheme http secur true client auth clientauth fals ssl protocol sslprotocol tl defin ajp connector port connector port protocol ajp redirect port redirectport engin repres entri point within catalina process everi request engin implement tomcat stand alon analyz http header includ request pass appropri host virtual host document doc config engin html set jvm rout jvmrout support load balanc loadbalanc via ajp ie engin name standalon default host defaulthost localhost jvm rout jvmrout jvm1 engin name catalina default host defaulthost localhost cluster pleas take look document doc cluster howto clusterhowto html simpl doc config cluster html refer document cluster class name classnam apach catalina tcp simpl tcp cluster simpletcpclust request dumper valv dump use debug inform request respons data receiv sent tomcat document doc config valv html valv class name classnam apach catalina valv request dumper valv requestdumpervalv realm us user databas userdatabas configur global jndi resourc key user databas userdatabas edit perform user databas userdatabas immedi avail use realm realm class name classnam apach catalina realm user databas realm userdatabaserealm resourc name resourcenam user databas userdatabas defin default virtual host note xml schema valid work xerc host name localhost app base appbas webapp unpack unpackwar true auto deploy autodeploy true xml valid xmlvalid fals xml namespac awar xmlnamespaceawar fals singl sign on singlesignon valv share authent web applic document doc config valv html valv class name classnam apach catalina authent singl sign on singlesignon access log process exampl document doc config valv html valv class name classnam apach catalina valv fast common access log valv fastcommonaccesslogvalv directori log prefix localhost access log suffix txt pattern common resolv host resolvehost fals host engin servic server aray bonc conf mkdir catalina aray bonc conf ln usr local tomcat conf tomcatconf localhost catalina localhost aray bonc conf cat catalina localhost xml context class name classnam apach catalina context replic context replicatedcontext path doc base docbas www cluster test clustertest debug privileg true reload true context aray bonc conf cd aray bonc apach tomcat apachetomcat l conf lib licens log notic releas note run txt temp webapp work aray bonc apach tomcat apachetomcat rm log aray bonc apach tomcat apachetomcat catalina sh version use catalina base home aray download apach tomcat apachetomcat use catalina home home aray download apach tomcat apachetomcat use catalina tmpdir home aray download apach tomcat apachetomcat temp use jre home usr java jdk1 server version apach tomcat server built nov server number name linux version architectur i386 jvm version rc b104 0rcb104 jvm vendor sun microsystem inc aray bonc apach tomcat apachetomcat startup sh use catalina base home aray download apach tomcat apachetomcat use catalina home home aray download apach tomcat apachetomcat use catalina tmpdir home aray download apach tomcat apachetomcat temp use jre home usr java jdk1 aray bonc apach tomcat apachetomcat cat log catalina info initi coyot http http dec pm apach catalina startup catalina load info initi process m dec pm apach catalina core standard servic standardservic start info start servic catalina dec pm apach catalina core standard engin standardengin start info start servlet engin apach tomcat dec pm apach catalina tcp simpl tcp cluster simpletcpclust start info cluster start dec pm apach catalina tribe transport receiv base receiverbas bind info receiv server socket bound dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl setup socket setupsocket info set cluster mcast so timeout sotimeout dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl wait for member waitformemb info sleep millisecond establish cluster membership start level dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl wait for member waitformemb info done sleep membership establish start level dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl wait for member waitformemb info sleep millisecond establish cluster membership start level dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl wait for member waitformemb info done sleep membership establish start level dec pm apach catalina core standard host standardhost start info xml valid disabl dec pm apach catalina tribe tipi abstract replic map abstractreplicatedmap init info initi abstract replic map abstractreplicatedmap context name dec pm apach catalina context replic context replicatedcontext start sever unabl start replic context replicatedcontext java lang class cast except classcastexcept apach name resourc proxi dir context proxydircontext cannot cast java serializ apach catalina tribe tipi abstract replic map abstractreplicatedmap map entri mapentri set valu setvalu abstract replic map abstractreplicatedmap java apach catalina tribe tipi abstract replic map abstractreplicatedmap map entri mapentri init abstract replic map abstractreplicatedmap java apach catalina tribe tipi abstract replic map abstractreplicatedmap put abstract replic map abstractreplicatedmap java apach catalina core applic context applicationcontext set attribut setattribut applic context applicationcontext java apach catalina core applic context facad applicationcontextfacad set attribut setattribut applic context facad applicationcontextfacad java apach catalina core standard context standardcontext start standard context standardcontext java apach catalina context replic context replicatedcontext start replic context replicatedcontext java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig java apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig java apach catalina startup host config hostconfig deploy app deployapp host config hostconfig java apach catalina startup host config hostconfig start host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina core contain base containerbas start contain base containerbas java apach catalina core standard host standardhost start standard host standardhost java apach catalina core contain base containerbas start contain base containerbas java apach catalina core standard engin standardengin start standard engin standardengin java apach catalina core standard servic standardservic start standard servic standardservic java apach catalina core standard server standardserv start standard server standardserv java apach catalina startup catalina start catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap start bootstrap java apach catalina startup bootstrap main bootstrap java dec pm apach catalina core contain base containerbas add child intern addchildintern sever contain base containerbas add child addchild start lifecycl except lifecycleexcept fail start replic context replicatedcontext java lang class cast except classcastexcept apach name resourc proxi dir context proxydircontext cannot cast java serializ apach catalina context replic context replicatedcontext start replic context replicatedcontext java","""java/org/apache/catalina/ha/context/ReplicatedContext.java""","2","2","2","1","6","0","6","0","2","0","2","10","10","10","1","10","0","0","1","9","125","21","84","32","43","21","44","67","31","36","6","6","6","1","3","0","21","21","21","10","normal"
"41166","104","Filip Hanik","fixes for http://issues.apache.org/bugzilla/show_bug.cgi?id=41166 although there is still work to be done, need to separate Tomcat attributes vs. application attributes","Bug 41166  Unable to start ReplicatedContext","unabl start replic context replicatedcontext","I try to test the Cluster function. I got a problem: something like following 
apears in the $CATALINA_HOME/logs/catalina.out

SEVERE: Unable to start ReplicatedContext
java.lang.ClassCastException: org.apache.naming.resources.ProxyDirContext 
cannot be cast to java.io.Serializable
        at 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap$MapEntry.setValue
(AbstractReplicatedMap.java:1060)

I didn't change any file in $CATALINA_HOME except server.xml, the any thing I 
changed in server.xml is uncomment the line: 
<Cluster className=""org.apache.catalina.ha.tcp.SimpleTcpCluster""/>. 

and I add a context configuration file test.xml to 
$CATALINA_HOME/conf/Catalina/localhost with the flolling content

[Aray@BONC-01 conf]$ cat Catalina/localhost/test.xml
<Context
        className=""org.apache.catalina.ha.context.ReplicatedContext""
        path=""/test"" docBase=""/var/www/ClusterTest""
        debug=""0"" privileged=""true"" reloadable=""true""
>

the web.xml file in /var/www/ClusterTest has no <distributable/> element 


I am worrying about I can't explain the problem clearly with my poor English. 
So I paste the stepes I do as following:

[Aray@BONC-01 apache-tomcat-6.0.2]$ which java
/usr/java/jdk1.6.0/bin/java
[Aray@BONC-01 apache-tomcat-6.0.2]$ java -version
java version ""1.6.0-rc""
Java(TM) SE Runtime Environment (build 1.6.0-rc-b104)
Java HotSpot(TM) Client VM (build 1.6.0-rc-b104, mixed mode, sharing)
[Aray@BONC-01 apache-tomcat-6.0.2]$ echo $JAVA_HOME
/usr/java/jdk1.6.0
[Aray@BONC-01 apache-tomcat-6.0.2]$ echo $CLASSPATH

[Aray@BONC-01 apache-tomcat-6.0.2]$ uname -a
Linux BONC-01 2.6.9-34.EL #1 Wed Mar 8 00:07:35 CST 2006 i686 i686 i386 
GNU/Linux
[root@BONC-01 local]# cat /etc/redhat-release
CentOS release 4.3 (Final)
[Aray@BONC-01 apache-tomcat-6.0.2]$ cd conf
[Aray@BONC-01 conf]$ cat server.xml
<!-- Note:  A ""Server"" is not itself a ""Container"", so you may not
     define subcomponents such as ""Valves"" at this level.
     Documentation at /docs/config/server.html
 -->
<Server port=""8005"" shutdown=""SHUTDOWN"">

  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener className=""org.apache.catalina.core.AprLifecycleListener"" 
SSLEngine=""on"" />
  <!--Initialize Jasper prior to webapps are loaded. Documentation 
at /docs/jasper-howto.html -->
  <Listener className=""org.apache.catalina.core.JasperListener"" />
  <!-- JMX Support for the Tomcat server. Documentation at /docs/non-
existent.html -->
  <Listener className=""org.apache.catalina.mbeans.ServerLifecycleListener"" />
  <Listener 
className=""org.apache.catalina.mbeans.GlobalResourcesLifecycleListener"" />

  <!-- Global JNDI resources
       Documentation at /docs/jndi-resources-howto.html
  -->
  <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
    <Resource name=""UserDatabase"" auth=""Container""
              type=""org.apache.catalina.UserDatabase""
              description=""User database that can be updated and saved""
              factory=""org.apache.catalina.users.MemoryUserDatabaseFactory""
              pathname=""conf/tomcat-users.xml"" />
  </GlobalNamingResources>

  <!-- A ""Service"" is a collection of one or more ""Connectors"" that share
       a single ""Container"" Note:  A ""Service"" is not itself a ""Container"",
       so you may not define subcomponents such as ""Valves"" at this level.
       Documentation at /docs/config/service.html
   -->
  <Service name=""Catalina"">

    <!-- A ""Connector"" represents an endpoint by which requests are received
         and responses are returned. Documentation at :
         Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
         Java AJP  Connector: /docs/config/ajp.html
         APR (HTTP/AJP) Connector: /docs/apr.html
         Define a non-SSL HTTP/1.1 Connector on port 8080
    -->
    <Connector port=""8080"" protocol=""HTTP/1.1""
               maxThreads=""150"" connectionTimeout=""20000""
               redirectPort=""8443"" />

    <!-- Define a SSL HTTP/1.1 Connector on port 8443
         This connector uses the JSSE configuration, when using APR, the
         connector should be using the OpenSSL style configuration
         described in the APR documentation -->
    <!--
    <Connector port=""8443"" protocol=""HTTP/1.1""
               maxThreads=""150"" scheme=""https"" secure=""true""
               clientAuth=""false"" sslProtocol=""TLS"" />
    -->

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port=""8009"" protocol=""AJP/1.3"" redirectPort=""8443"" />


    <!-- An Engine represents the entry point (within Catalina) that processes
         every request.  The Engine implementation for Tomcat stand alone
         analyzes the HTTP headers included with the request, and passes them
         on to the appropriate Host (virtual host).
         Documentation at /docs/config/engine.html -->

    <!-- You should set jvmRoute to support load-balancing via AJP ie :
    <Engine name=""Standalone"" defaultHost=""localhost"" jvmRoute=""jvm1"">
    -->
    <Engine name=""Catalina"" defaultHost=""localhost"">

      <!--For clustering, please take a look at documentation at:
          /docs/cluster-howto.html  (simple how to)
          /docs/config/cluster.html (reference documentation) -->

      <Cluster className=""org.apache.catalina.ha.tcp.SimpleTcpCluster""/>


      <!-- The request dumper valve dumps useful debugging information about
           the request and response data received and sent by Tomcat.
           Documentation at: /docs/config/valve.html -->
      <!--
      <Valve className=""org.apache.catalina.valves.RequestDumperValve""/>
      -->

      <!-- This Realm uses the UserDatabase configured in the global JNDI
           resources under the key ""UserDatabase"".  Any edits
           that are performed against this UserDatabase are immediately
           available for use by the Realm.  -->
      <Realm className=""org.apache.catalina.realm.UserDatabaseRealm""
             resourceName=""UserDatabase""/>

      <!-- Define the default virtual host
           Note: XML Schema validation will not work with Xerces 2.2.
       -->
      <Host name=""localhost""  appBase=""webapps""
            unpackWARs=""true"" autoDeploy=""true""
            xmlValidation=""false"" xmlNamespaceAware=""false"">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className=""org.apache.catalina.authenticator.SingleSignOn"" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className=""org.apache.catalina.valves.FastCommonAccessLogValve"" 
directory=""logs""
               prefix=""localhost_access_log."" suffix="".txt"" pattern=""common"" 
resolveHosts=""false""/>
        -->

      </Host>
    </Engine>
  </Service>
</Server>

[Aray@BONC-01 conf]$ mkdir Catalina
[Aray@BONC-01 conf]$ ln -s /usr/local/tomcatConf/localhost/ Catalina/localhost
[Aray@BONC-01 conf]$ cat Catalina/localhost/test.xml
<Context
        className=""org.apache.catalina.ha.context.ReplicatedContext""
        path=""/test"" docBase=""/var/www/ClusterTest""
        debug=""0"" privileged=""true"" reloadable=""true""
>
</Context>
[Aray@BONC-01 conf]$ cd ..
[Aray@BONC-01 apache-tomcat-6.0.2]$ ls
bin  conf  lib  LICENSE  logs  NOTICE  RELEASE-NOTES  RUNNING.txt  temp  
webapps  work
[Aray@BONC-01 apache-tomcat-6.0.2]$ rm logs/*
[Aray@BONC-01 apache-tomcat-6.0.2]$ bin/catalina.sh version
Using CATALINA_BASE:   /home/Aray/download/apache-tomcat-6.0.2
Using CATALINA_HOME:   /home/Aray/download/apache-tomcat-6.0.2
Using CATALINA_TMPDIR: /home/Aray/download/apache-tomcat-6.0.2/temp
Using JRE_HOME:       /usr/java/jdk1.6.0
Server version: Apache Tomcat/6.0.2
Server built:   Nov 16 2006 12:31:06
Server number:  6.0.2.0
OS Name:        Linux
OS Version:     2.6.9-34.EL
Architecture:   i386
JVM Version:    1.6.0-rc-b104
JVM Vendor:     Sun Microsystems Inc.
[Aray@BONC-01 apache-tomcat-6.0.2]$ bin/startup.sh
Using CATALINA_BASE:   /home/Aray/download/apache-tomcat-6.0.2
Using CATALINA_HOME:   /home/Aray/download/apache-tomcat-6.0.2
Using CATALINA_TMPDIR: /home/Aray/download/apache-tomcat-6.0.2/temp
Using JRE_HOME:       /usr/java/jdk1.6.0
[Aray@BONC-01 apache-tomcat-6.0.2]$ cat logs/catalina.out
INFO: Initializing Coyote HTTP/1.1 on http-8080
Dec 13, 2006 4:07:39 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 2532 ms
Dec 13, 2006 4:07:40 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Dec 13, 2006 4:07:40 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.2
Dec 13, 2006 4:07:40 PM org.apache.catalina.ha.tcp.SimpleTcpCluster start
INFO: Cluster is about to start
Dec 13, 2006 4:07:40 PM org.apache.catalina.tribes.transport.ReceiverBase bind
INFO: Receiver Server Socket bound to:/127.0.0.1:4000
Dec 13, 2006 4:07:40 PM org.apache.catalina.tribes.membership.McastServiceImpl 
setupSocket
INFO: Setting cluster mcast soTimeout to 500
Dec 13, 2006 4:07:40 PM org.apache.catalina.tribes.membership.McastServiceImpl 
waitForMembers
INFO: Sleeping for 1000 milliseconds to establish cluster membership, start 
level:4
Dec 13, 2006 4:07:41 PM org.apache.catalina.tribes.membership.McastServiceImpl 
waitForMembers
INFO: Done sleeping, membership established, start level:4
Dec 13, 2006 4:07:41 PM org.apache.catalina.tribes.membership.McastServiceImpl 
waitForMembers
INFO: Sleeping for 1000 milliseconds to establish cluster membership, start 
level:8
Dec 13, 2006 4:07:42 PM org.apache.catalina.tribes.membership.McastServiceImpl 
waitForMembers
INFO: Done sleeping, membership established, start level:8
Dec 13, 2006 4:07:42 PM org.apache.catalina.core.StandardHost start
INFO: XML validation disabled
Dec 13, 2006 4:07:42 PM org.apache.catalina.tribes.tipis.AbstractReplicatedMap 
init
INFO: Initializing AbstractReplicatedMap with context name:/test
Dec 13, 2006 4:07:43 PM org.apache.catalina.ha.context.ReplicatedContext start
SEVERE: Unable to start ReplicatedContext
java.lang.ClassCastException: org.apache.naming.resources.ProxyDirContext 
cannot be cast to java.io.Serializable
        at 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap$MapEntry.setValue
(AbstractReplicatedMap.java:1060)
        at 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap$MapEntry.<init>
(AbstractReplicatedMap.java:1005)
        at org.apache.catalina.tribes.tipis.AbstractReplicatedMap.put
(AbstractReplicatedMap.java:859)
        at org.apache.catalina.core.ApplicationContext.setAttribute
(ApplicationContext.java:756)
        at org.apache.catalina.core.ApplicationContextFacade.setAttribute
(ApplicationContextFacade.java:334)
        at org.apache.catalina.core.StandardContext.start
(StandardContext.java:4296)
        at org.apache.catalina.ha.context.ReplicatedContext.start
(ReplicatedContext.java:55)
        at org.apache.catalina.core.ContainerBase.addChildInternal
(ContainerBase.java:760)
        at org.apache.catalina.core.ContainerBase.addChild
(ContainerBase.java:740)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
        at org.apache.catalina.startup.HostConfig.deployDescriptor
(HostConfig.java:626)
        at org.apache.catalina.startup.HostConfig.deployDescriptors
(HostConfig.java:553)
        at org.apache.catalina.startup.HostConfig.deployApps
(HostConfig.java:488)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1138)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent
(HostConfig.java:311)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent
(LifecycleSupport.java:120)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1022)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1014)
        at org.apache.catalina.core.StandardEngine.start
(StandardEngine.java:443)
        at org.apache.catalina.core.StandardService.start
(StandardService.java:451)
        at org.apache.catalina.core.StandardServer.start
(StandardServer.java:710)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:552)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Dec 13, 2006 4:07:43 PM org.apache.catalina.core.ContainerBase addChildInternal
SEVERE: ContainerBase.addChild: start:
LifecycleException:  Failed to start ReplicatedContext:  
java.lang.ClassCastException: org.apache.naming.resources.ProxyDirContext 
cannot be cast to java.io.Serializable
        at org.apache.catalina.ha.context.ReplicatedContext.start
(ReplicatedContext.java:58)","tri cluster function got problem someth like follow apear catalina home log catalina sever unabl start replic context replicatedcontext java lang class cast except classcastexcept apach name resourc proxi dir context proxydircontext cannot cast java serializ apach catalina tribe tipi abstract replic map abstractreplicatedmap map entri mapentri set valu setvalu abstract replic map abstractreplicatedmap java didn chang file catalina home except server xml thing chang server xml uncom line cluster class name classnam apach catalina tcp simpl tcp cluster simpletcpclust add context configur file xml catalina home conf catalina localhost floll content aray bonc conf cat catalina localhost xml context class name classnam apach catalina context replic context replicatedcontext path doc base docbas www cluster test clustertest debug privileg true reload true web xml file www cluster test clustertest distribut element worri explain problem clearli poor english past stepe follow aray bonc apach tomcat apachetomcat java usr java jdk1 java aray bonc apach tomcat apachetomcat java version java version rc 0rc java tm runtim environ build rc b104 0rcb104 java hot spot hotspot tm client vm build rc b104 0rcb104 mix mode share aray bonc apach tomcat apachetomcat echo java home usr java jdk1 aray bonc apach tomcat apachetomcat echo classpath aray bonc apach tomcat apachetomcat unam linux bonc wed mar cst i686 i686 i386 gnu linux root bonc local cat etc redhat releas redhatreleas cent cento releas final aray bonc apach tomcat apachetomcat cd conf aray bonc conf cat server xml note server contain may defin subcompon valv level document doc config server html server port shutdown shutdown apr librari loader document doc apr html listen class name classnam apach catalina core apr lifecycl listen aprlifecyclelisten engin sslengin initi jasper prior webapp load document doc jasper howto jasperhowto html listen class name classnam apach catalina core jasper listen jasperlisten jmx support tomcat server document doc exist html listen class name classnam apach catalina mbean server lifecycl listen serverlifecyclelisten listen class name classnam apach catalina mbean global resourc lifecycl listen globalresourceslifecyclelisten global jndi resourc document doc jndi resourc howto jndiresourceshowto html global name resourc globalnamingresourc edit user databas use user databas realm userdatabaserealm authent user resourc name user databas userdatabas auth contain type apach catalina user databas userdatabas descript user databas updat save factori apach catalina user memori user databas factori memoryuserdatabasefactori pathnam conf tomcat user tomcatus xml global name resourc globalnamingresourc servic collect one connector share singl contain note servic contain may defin subcompon valv level document doc config servic html servic name catalina connector repres endpoint request receiv respons return document java http connector doc config http html block non block nonblock java ajp connector doc config ajp html apr http ajp connector doc apr html defin ssl http connector port connector port protocol http max thread maxthread connect timeout connectiontimeout redirect port redirectport defin ssl http connector port connector us jsse configur use apr connector use open openssl style configur describ apr document connector port protocol http max thread maxthread scheme http secur true client auth clientauth fals ssl protocol sslprotocol tl defin ajp connector port connector port protocol ajp redirect port redirectport engin repres entri point within catalina process everi request engin implement tomcat stand alon analyz http header includ request pass appropri host virtual host document doc config engin html set jvm rout jvmrout support load balanc loadbalanc via ajp ie engin name standalon default host defaulthost localhost jvm rout jvmrout jvm1 engin name catalina default host defaulthost localhost cluster pleas take look document doc cluster howto clusterhowto html simpl doc config cluster html refer document cluster class name classnam apach catalina tcp simpl tcp cluster simpletcpclust request dumper valv dump use debug inform request respons data receiv sent tomcat document doc config valv html valv class name classnam apach catalina valv request dumper valv requestdumpervalv realm us user databas userdatabas configur global jndi resourc key user databas userdatabas edit perform user databas userdatabas immedi avail use realm realm class name classnam apach catalina realm user databas realm userdatabaserealm resourc name resourcenam user databas userdatabas defin default virtual host note xml schema valid work xerc host name localhost app base appbas webapp unpack unpackwar true auto deploy autodeploy true xml valid xmlvalid fals xml namespac awar xmlnamespaceawar fals singl sign on singlesignon valv share authent web applic document doc config valv html valv class name classnam apach catalina authent singl sign on singlesignon access log process exampl document doc config valv html valv class name classnam apach catalina valv fast common access log valv fastcommonaccesslogvalv directori log prefix localhost access log suffix txt pattern common resolv host resolvehost fals host engin servic server aray bonc conf mkdir catalina aray bonc conf ln usr local tomcat conf tomcatconf localhost catalina localhost aray bonc conf cat catalina localhost xml context class name classnam apach catalina context replic context replicatedcontext path doc base docbas www cluster test clustertest debug privileg true reload true context aray bonc conf cd aray bonc apach tomcat apachetomcat l conf lib licens log notic releas note run txt temp webapp work aray bonc apach tomcat apachetomcat rm log aray bonc apach tomcat apachetomcat catalina sh version use catalina base home aray download apach tomcat apachetomcat use catalina home home aray download apach tomcat apachetomcat use catalina tmpdir home aray download apach tomcat apachetomcat temp use jre home usr java jdk1 server version apach tomcat server built nov server number name linux version architectur i386 jvm version rc b104 0rcb104 jvm vendor sun microsystem inc aray bonc apach tomcat apachetomcat startup sh use catalina base home aray download apach tomcat apachetomcat use catalina home home aray download apach tomcat apachetomcat use catalina tmpdir home aray download apach tomcat apachetomcat temp use jre home usr java jdk1 aray bonc apach tomcat apachetomcat cat log catalina info initi coyot http http dec pm apach catalina startup catalina load info initi process m dec pm apach catalina core standard servic standardservic start info start servic catalina dec pm apach catalina core standard engin standardengin start info start servlet engin apach tomcat dec pm apach catalina tcp simpl tcp cluster simpletcpclust start info cluster start dec pm apach catalina tribe transport receiv base receiverbas bind info receiv server socket bound dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl setup socket setupsocket info set cluster mcast so timeout sotimeout dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl wait for member waitformemb info sleep millisecond establish cluster membership start level dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl wait for member waitformemb info done sleep membership establish start level dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl wait for member waitformemb info sleep millisecond establish cluster membership start level dec pm apach catalina tribe membership mcast servic impl mcastserviceimpl wait for member waitformemb info done sleep membership establish start level dec pm apach catalina core standard host standardhost start info xml valid disabl dec pm apach catalina tribe tipi abstract replic map abstractreplicatedmap init info initi abstract replic map abstractreplicatedmap context name dec pm apach catalina context replic context replicatedcontext start sever unabl start replic context replicatedcontext java lang class cast except classcastexcept apach name resourc proxi dir context proxydircontext cannot cast java serializ apach catalina tribe tipi abstract replic map abstractreplicatedmap map entri mapentri set valu setvalu abstract replic map abstractreplicatedmap java apach catalina tribe tipi abstract replic map abstractreplicatedmap map entri mapentri init abstract replic map abstractreplicatedmap java apach catalina tribe tipi abstract replic map abstractreplicatedmap put abstract replic map abstractreplicatedmap java apach catalina core applic context applicationcontext set attribut setattribut applic context applicationcontext java apach catalina core applic context facad applicationcontextfacad set attribut setattribut applic context facad applicationcontextfacad java apach catalina core standard context standardcontext start standard context standardcontext java apach catalina context replic context replicatedcontext start replic context replicatedcontext java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig java apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig java apach catalina startup host config hostconfig deploy app deployapp host config hostconfig java apach catalina startup host config hostconfig start host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina core contain base containerbas start contain base containerbas java apach catalina core standard host standardhost start standard host standardhost java apach catalina core contain base containerbas start contain base containerbas java apach catalina core standard engin standardengin start standard engin standardengin java apach catalina core standard servic standardservic start standard servic standardservic java apach catalina core standard server standardserv start standard server standardserv java apach catalina startup catalina start catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap start bootstrap java apach catalina startup bootstrap main bootstrap java dec pm apach catalina core contain base containerbas add child intern addchildintern sever contain base containerbas add child addchild start lifecycl except lifecycleexcept fail start replic context replicatedcontext java lang class cast except classcastexcept apach name resourc proxi dir context proxydircontext cannot cast java serializ apach catalina context replic context replicatedcontext start replic context replicatedcontext java","""java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java""","2","2","2","1","10","0","8","1","3","0","11","102","103","103","28","103","0","1","10","92","1367","166","973","291","610","250","521","776","287","489","20","20","21","7","5","0","257","250","286","134","normal"
"41217","38","Mark Emlyn David Thomas","Port fox for bug 41217. Set secure attribute on SSO cookie when cookie is created during a secure request. Patch provided by Chris Halstead.","Bug 41217  SingleSignOn Cookie does not honor https access: Login Information Disclosure","singl sign on singlesignon cooki honor http access login inform disclosur","When using the SingleSignOn Valve
(org.apache.catalina.authenticator.SingleSignOn) via https the Cookie
JSESSIONIDSSO is transmitted without the ""secure"" attribute, resulting in it
being transmitted to any content that is - by purpose or error - requested via
http from the same server. 

As the content of the SSO-Cookie is confidential (it will lead to automatically
logged in sessions in other contexts - https or non-https) this should never happen.

Sorry to have no patch. I've not installed the complete source distribution in
my development environment, but it seems the points to change are 
org.apache.catalina.authenticator.AuthenticatorBase.register(...), the code of
interest being (from 5.5.30 source distribution)

            Cookie cookie = new Cookie(Constants.SINGLE_SIGN_ON_COOKIE, ssoId);
            cookie.setMaxAge(-1);
            cookie.setPath(""/"");
            hres.addCookie(cookie);

As hres is an org.apache.catalina.HttpRequest, and I've looked through the code
to find org.apache.catalina.Request.setSecure() but no ...isSecure() (though
this is mentioned in the Javadoc for ...setSecure()) I suppose there needs to be
another change to provide isSecure on Request or HttpRequest, but this is
difficult to tell only from the editor.
If isSecure() was there, there'd be a 
            cookie.setSecure(hres.isSecure()) 
missing in the statements above...","use singl sign on singlesignon valv apach catalina authent singl sign on singlesignon via http cooki jsessionidsso transmit without secur attribut result transmit content purpos error request via http server content sso cooki confidenti lead automat log session context http non http nonhttp never happen sorri patch instal complet sourc distribut develop environ seem point chang apach catalina authent authent base authenticatorbas regist code interest sourc distribut cooki cooki new cooki constant singl sign cooki sso id ssoid cooki set max age setmaxag cooki set path setpath hre add cooki addcooki cooki hre apach catalina http request httprequest look code find apach catalina request set secur setsecur is secur issecur though mention javadoc set secur setsecur suppos need anoth chang provid is secur issecur request http request httprequest difficult tell editor is secur issecur cooki set secur setsecur hre is secur issecur miss statement","""java/org/apache/catalina/authenticator/AuthenticatorBase.java""","3","3","3","1","22","2","11","7","1","0","6","27","28","28","12","28","0","0","7","21","881","182","383","117","239","318","190","281","108","173","29","29","33","8","5","1","90","90","96","38","major"
"41265","28","Mark Emlyn David Thomas","Port fix bug 41265 by removing the code that resets checkInterval values of zero to 300. If checkInterval is not specified it defaults to zero anyway and removing the code was easier than trying to explain in the documentation why the stated default could not be explicitly set.","Bug 41265  JspServlet's checkInterval parameter cannot be set to 0 implicitly","jsp servlet jspservlet check interv checkinterv paramet cannot set implicitli","conf\web.xml's JspServlet init parameters include 'checkInterval', whose value
is explained as follows:
  If development is false and checkInterval is greater than zero, background
compilations are enabled.

If I add the following parameters one would think the background compilations
would be disabled (the value is not greater than zero).

        <init-param>
            <param-name>checkInterval</param-name>
            <param-value>0</param-value>
        </init-param>
        <init-param>
            <param-name>development</param-name>
            <param-value>false</param-value>
        </init-param>

However, the value is changed to 300 and the following warning is outputted:
Dec 30, 2006 7:13:57 PM org.apache.jasper.EmbeddedServletOptions <init>
WARNING: Warning: Invalid value for the initParam checkInterval. Will use the
default value of ""300"" seconds

According to the comment in web.xml ""0"" was a valid value. Either the comment or
the validity check is wrong. Or my understanding of them.","conf web xml jsp servlet jspservlet init paramet includ check interv checkinterv whose valu explain follow develop fals check interv checkinterv greater zero background compil enabl add follow paramet one would think background compil would disabl valu greater zero init param initparam param name paramnam check interv checkinterv param name paramnam param valu paramvalu param valu paramvalu init param initparam init param initparam param name paramnam develop param name paramnam param valu paramvalu fals param valu paramvalu init param initparam howev valu chang follow warn output dec pm apach jasper embed servlet option embeddedservletopt init warn warn invalid valu init param initparam check interv checkinterv use default valu second accord comment web xml valid valu either comment valid check wrong understand","""java/org/apache/jasper/EmbeddedServletOptions.java""","3","3","3","1","13","0","10","2","1","0","0","34","34","34","29","34","0","0","0","34","697","103","404","106","256","190","170","284","103","181","79","79","83","1","4","0","113","113","118","34","minor"
"41289","91","Remy Maucherat","- 41289: create configBase, since it is no longer created elsewhere. - Submitted by Shiva Kumar H R.","Bug 41289  Error when deploying XML Configuration file URL","error deploy xml configur file url","I tried to deploy a webapp using a context.xml file under manager webapp and
received this error:

java.io.FileNotFoundException:
/opt/apache-tomcat-6.0.2/conf/Catalina/localhost/mywebapp3.xml (No such file or
directory)
        at java.io.FileOutputStream.open(Native Method)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:179)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
        at
org.apache.catalina.manager.ManagerServlet.copyInternal(ManagerServlet.java:1570)
        at org.apache.catalina.manager.ManagerServlet.copy(ManagerServlet.java:1530)
        at
org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:803)
        at
org.apache.catalina.manager.HTMLManagerServlet.deployInternal(HTMLManagerServlet.java:249)
        at
org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:96)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:228)
        at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)
        at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:212)
        at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:818)
        at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:624)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:445)
        at java.lang.Thread.run(Thread.java:613)

I did checked and noticed apache-tomcat-6.0.2/conf/Catalina directory no longer
exists in version 6. Did something changed?","tri deploy webapp use context xml file manag webapp receiv error java file not found except filenotfoundexcept opt apach tomcat apachetomcat conf catalina localhost mywebapp3 xml file directori java file output stream fileoutputstream open nativ method java file output stream fileoutputstream init file output stream fileoutputstream java java file output stream fileoutputstream init file output stream fileoutputstream java apach catalina manag manag servlet managerservlet copi intern copyintern manag servlet managerservlet java apach catalina manag manag servlet managerservlet copi manag servlet managerservlet java apach catalina manag manag servlet managerservlet deploy manag servlet managerservlet java apach catalina manag manag servlet htmlmanagerservlet deploy intern deployintern manag servlet htmlmanagerservlet java apach catalina manag manag servlet htmlmanagerservlet do get doget manag servlet htmlmanagerservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process http11 protocol http11protocol java apach tomcat util net io endpoint jioendpoint worker run io endpoint jioendpoint java java lang thread run thread java check notic apach tomcat apachetomcat conf catalina directori longer exist version someth chang","""java/org/apache/catalina/manager/ManagerServlet.java""","6","6","7","2","39","3","29","7","1","2","1","32","32","30","12","32","0","0","24","8","1602","212","1003","199","748","388","481","690","185","505","20","20","29","6","5","0","208","208","243","78","normal"
"41327","18","Mark Emlyn David Thomas","Port fix for bug 41327. Show full URI for a 404.","Bug 41327  Jasper does'nt display the full path of the file in a 404 Not found  error page","jasper nt display full path file found error page","","","""java/org/apache/jasper/servlet/JspServlet.java""","3","3","3","2","26","1","17","7","1","0","0","9","9","9","5","9","1","1","0","7","325","41","183","62","112","106","93","126","53","73","11","11","11","8","3","1","34","34","34","19","trivial"
"41407","568","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41407 Add support for CLIENT-CERT authentication to JAAS realm.","Bug 41407  CLIENT-CERT Authentication with JAASRealm not working","client cert authent realm jaasrealm work","I tried to config my webapp to authenticate user by CLIENT-CERT auth method.

I verified my JAAS LoginModule by using ""BASIC"" to auth method and successfully 
authenticated user login.

After studying Tomcat 5.5.20 source, I found that the problem is caused by the 
RealmBase.java and JAASRealm.java.

if CLIENT-CERT auth method is used, SSLAuthenticator will call the :

  JAASRealm.authenticate(X509Certificate certs[])

As JAASRealm didn't override authenticate(X509Certificate certs[]), RealmBase's 
authenticate will be used and it will only validate the certs and then call
getPrincipal(X509Certificate) and then getPrincipal(String) is being called to 
get the Principal. However, in JAASRealm, this function always return null.

That means Tomcat can't use JAASRealm with CLIENT-CERT auth method.

Thanks
Butler","tri config webapp authent user client cert auth method verifi jaa login modul loginmodul use basic auth method success authent user login studi tomcat sourc found problem caus realm base realmbas java realm jaasrealm java client cert auth method use authent sslauthent call realm jaasrealm authent x509 certif x509certif cert realm jaasrealm didn overrid authent x509 certif x509certif cert realm base realmbas authent use valid cert call get princip getprincip x509 certif x509certif get princip getprincip string call get princip howev realm jaasrealm function alway return null mean tomcat use realm jaasrealm client cert auth method thank butler","""java/org/apache/catalina/realm/JAASCallbackHandler.java""","5","5","5","1","34","1","20","12","1","0","1","3","3","3","9","3","0","0","0","3","219","33","84","31","51","102","48","65","26","39","13","13","13","1","3","1","16","16","16","3","normal"
"41407","568","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41407 Add support for CLIENT-CERT authentication to JAAS realm.","Bug 41407  CLIENT-CERT Authentication with JAASRealm not working","client cert authent realm jaasrealm work","I tried to config my webapp to authenticate user by CLIENT-CERT auth method.

I verified my JAAS LoginModule by using ""BASIC"" to auth method and successfully 
authenticated user login.

After studying Tomcat 5.5.20 source, I found that the problem is caused by the 
RealmBase.java and JAASRealm.java.

if CLIENT-CERT auth method is used, SSLAuthenticator will call the :

  JAASRealm.authenticate(X509Certificate certs[])

As JAASRealm didn't override authenticate(X509Certificate certs[]), RealmBase's 
authenticate will be used and it will only validate the certs and then call
getPrincipal(X509Certificate) and then getPrincipal(String) is being called to 
get the Principal. However, in JAASRealm, this function always return null.

That means Tomcat can't use JAASRealm with CLIENT-CERT auth method.

Thanks
Butler","tri config webapp authent user client cert auth method verifi jaa login modul loginmodul use basic auth method success authent user login studi tomcat sourc found problem caus realm base realmbas java realm jaasrealm java client cert auth method use authent sslauthent call realm jaasrealm authent x509 certif x509certif cert realm jaasrealm didn overrid authent x509 certif x509certif cert realm base realmbas authent use valid cert call get princip getprincip x509 certif x509certif get princip getprincip string call get princip howev realm jaasrealm function alway return null mean tomcat use realm jaasrealm client cert auth method thank butler","""java/org/apache/catalina/realm/JAASMemoryLoginModule.java""","4","4","4","1","32","3","19","10","1","0","2","8","8","8","8","8","0","0","1","7","425","71","195","66","135","160","128","160","65","95","10","10","11","3","3","1","32","32","34","12","normal"
"41407","568","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41407 Add support for CLIENT-CERT authentication to JAAS realm.","Bug 41407  CLIENT-CERT Authentication with JAASRealm not working","client cert authent realm jaasrealm work","I tried to config my webapp to authenticate user by CLIENT-CERT auth method.

I verified my JAAS LoginModule by using ""BASIC"" to auth method and successfully 
authenticated user login.

After studying Tomcat 5.5.20 source, I found that the problem is caused by the 
RealmBase.java and JAASRealm.java.

if CLIENT-CERT auth method is used, SSLAuthenticator will call the :

  JAASRealm.authenticate(X509Certificate certs[])

As JAASRealm didn't override authenticate(X509Certificate certs[]), RealmBase's 
authenticate will be used and it will only validate the certs and then call
getPrincipal(X509Certificate) and then getPrincipal(String) is being called to 
get the Principal. However, in JAASRealm, this function always return null.

That means Tomcat can't use JAASRealm with CLIENT-CERT auth method.

Thanks
Butler","tri config webapp authent user client cert auth method verifi jaa login modul loginmodul use basic auth method success authent user login studi tomcat sourc found problem caus realm base realmbas java realm jaasrealm java client cert auth method use authent sslauthent call realm jaasrealm authent x509 certif x509certif cert realm jaasrealm didn overrid authent x509 certif x509certif cert realm base realmbas authent use valid cert call get princip getprincip x509 certif x509certif get princip getprincip string call get princip howev realm jaasrealm function alway return null mean tomcat use realm jaasrealm client cert auth method thank butler","""java/org/apache/catalina/realm/JAASRealm.java""","2","2","3","1","18","1","10","6","1","0","4","20","20","20","6","20","0","0","7","13","600","103","234","69","144","263","114","170","63","107","21","21","21","10","4","1","59","59","60","32","normal"
"41466","3","Filip Hanik","Fix for bugzilla 41466 When using the NioChannel and SecureNioChannel its important to use the channels buffers","Bug 41466  NIO Connector: IllegalArgumentException: You can only write using the application write buffer provided by the handler","nio connector illeg argument except illegalargumentexcept write use applic write buffer provid handler","Trying to use NIO connector instead of APR connector using Tomcat6 HEAD, I get
an IllegalArgumentException while in a call to sendAck.  

Looking at InternalNioOutputBuffer.sendAck(), it uses ByteBuffer.wrap() to
create a new ByteBuffer and uses this ByteBuffer in a call to writeToSocket.
There is a check in SecureNioChannel.write() that the ByteBuffer is the one
stored in the 

Commenting the line 372 in SecureNioChannel.java fixes the problem.
//if ( src != bufHandler.getWriteBuffer() ) throw new
IllegalArgumentException(""You can only write using the application write buffer
provided by the handler."");
But I guess that the check is here for a valid reason, and a better fix would
very likely consist in fixing the sendAck or in adding an ""or"" condition to the
test for the case of sendAck().

GRAVE: Cannot find message associated with key standardWrapper.acknowledgeException
java.lang.IllegalArgumentException: You can only write using the application
write buffer provided by the handler.
	at org.apache.tomcat.util.net.SecureNioChannel.write(SecureNioChannel.java:372)
	at org.apache.tomcat.util.net.NioSelectorPool.write(NioSelectorPool.java:111)
	at
org.apache.coyote.http11.InternalNioOutputBuffer.writeToSocket(InternalNioOutputBuffer.java:434)
	at
org.apache.coyote.http11.InternalNioOutputBuffer.sendAck(InternalNioOutputBuffer.java:418)
	at org.apache.coyote.http11.Http11NioProcessor.action(Http11NioProcessor.java:1028)
	at org.apache.coyote.Response.action(Response.java:183)
	at org.apache.coyote.Response.acknowledge(Response.java:310)
	at org.apache.catalina.connector.Response.sendAcknowledgement(Response.java:1154)
	at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:169)
	at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
	at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:212)
	at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:888)
	at
org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:624)
	at org.apache.tomcat.util.net.NioEndpoint$Worker.run(NioEndpoint.java:1467)
	at java.lang.Thread.run(Thread.java:595)","tri use nio connector instead apr connector use tomcat6 head get illeg argument except illegalargumentexcept call send ack sendack look intern nio output buffer internalniooutputbuff send ack sendack us byte buffer bytebuff wrap creat new byte buffer bytebuff us byte buffer bytebuff call write to socket writetosocket check secur nio channel secureniochannel write byte buffer bytebuff one store comment line secur nio channel secureniochannel java fix problem src buf handler bufhandl get write buffer getwritebuff throw new illeg argument except illegalargumentexcept write use applic write buffer provid handler guess check valid reason better fix would like consist fix send ack sendack ad condit case send ack sendack grave cannot find messag associ key standard wrapper standardwrapp acknowledg except acknowledgeexcept java lang illeg argument except illegalargumentexcept write use applic write buffer provid handler apach tomcat util net secur nio channel secureniochannel write secur nio channel secureniochannel java apach tomcat util net nio selector pool nioselectorpool write nio selector pool nioselectorpool java apach coyot http11 intern nio output buffer internalniooutputbuff write to socket writetosocket intern nio output buffer internalniooutputbuff java apach coyot http11 intern nio output buffer internalniooutputbuff send ack sendack intern nio output buffer internalniooutputbuff java apach coyot http11 http11 nio processor http11nioprocessor action http11 nio processor http11nioprocessor java apach coyot respons action respons java apach coyot respons acknowledg respons java apach catalina connector respons send acknowledg sendacknowledg respons java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 nio processor http11nioprocessor process http11 nio processor http11nioprocessor java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint worker run nio endpoint nioendpoint java java lang thread run thread java","""java/org/apache/tomcat/util/net/NioSelectorPool.java""","3","3","4","1","12","0","9","3","1","0","0","12","12","12","6","12","0","0","0","12","203","18","134","43","83","65","76","120","43","77","11","11","14","4","4","0","42","42","51","18","major"
"41521","6","Remy Maucherat","- 41521: Support * for servlet-name, submitted by Paul McMahan.","Bug 41521  filter-mapping doesn't support * for servlet-name","filter map filtermap doesn support servlet name servletnam","SRV 6.2.5 of the servlet 2.5 spec introduces support for '*' as the servlet-name
in a filter-mapping.  TC6 does not currently support that value as specified. I
will attach a patch shortly.","srv servlet spec introduc support servlet name servletnam filter map filtermap c6 tc6 current support valu specifi attach patch shortli","""java/org/apache/catalina/core/ApplicationFilterFactory.java""","7","7","12","5","43","4","30","9","1","1","12","7","7","6","0","7","0","5","0","2","398","64","240","56","173","99","102","150","52","98","22","22","37","11","3","0","53","50","86","41","normal"
"41521","6","Remy Maucherat","- 41521: Support * for servlet-name, submitted by Paul McMahan.","Bug 41521  filter-mapping doesn't support * for servlet-name","filter map filtermap doesn support servlet name servletnam","SRV 6.2.5 of the servlet 2.5 spec introduces support for '*' as the servlet-name
in a filter-mapping.  TC6 does not currently support that value as specified. I
will attach a patch shortly.","srv servlet spec introduc support servlet name servletnam filter map filtermap c6 tc6 current support valu specifi attach patch shortli","""java/org/apache/catalina/deploy/FilterMap.java""","5","2","5","1","13","0","9","2","1","0","16","10","10","10","5","10","0","0","0","10","235","40","124","39","91","71","118","141","41","100","37","9","37","1","2","1","50","22","50","10","normal"
"41558","0","Remy Maucherat","- 41558: Don't call synced method on every request, submitted by Arvind Srinivasan.","Bug 41558  Unnecessary synchronization caused by JspFactory.getDefaultFactory while servicing JSPs","unnecessari synchron caus jsp factori jspfactori get default factori getdefaultfactori servic jsp","Tomcat version: 6.0.x trunk

Every generated JSP has 

    try {
      _jspxFactory = JspFactory.getDefaultFactory();
      response.setContentType(""text/html"");

in its _jspService method.

The use of JspFactory.getDefaultFactory during request processing should be
avoided as it is a *static synchronized* method.

I have a diff that addresses this and will attach it to this bug.","tomcat version trunk everi gener jsp tri jspx factori jspxfactori jsp factori jspfactori get default factori getdefaultfactori respons set content type setcontenttyp text html jsp servic jspservic method use jsp factori jspfactori get default factori getdefaultfactori request process avoid static synchron method diff address attach","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","36","3","27","5","12","6","5","110","110","104","48","110","11","49","0","50","4167","505","2975","493","2340","714","1837","2316","477","1839","22","22","29","20","5","0","483","477","531","200","enhancement"
"41558","0","Remy Maucherat","- 41558: Don't call synced method on every request, submitted by Arvind Srinivasan.","Bug 41558  Unnecessary synchronization caused by JspFactory.getDefaultFactory while servicing JSPs","unnecessari synchron caus jsp factori jspfactori get default factori getdefaultfactori servic jsp","Tomcat version: 6.0.x trunk

Every generated JSP has 

    try {
      _jspxFactory = JspFactory.getDefaultFactory();
      response.setContentType(""text/html"");

in its _jspService method.

The use of JspFactory.getDefaultFactory during request processing should be
avoided as it is a *static synchronized* method.

I have a diff that addresses this and will attach it to this bug.","tomcat version trunk everi gener jsp tri jspx factori jspxfactori jsp factori jspfactori get default factori getdefaultfactori respons set content type setcontenttyp text html jsp servic jspservic method use jsp factori jspfactori get default factori getdefaultfactori request process avoid static synchron method diff address attach","""java/org/apache/jasper/compiler/JspRuntimeContext.java""","2","2","3","1","18","1","11","5","1","0","0","16","16","16","11","16","0","2","0","14","426","58","226","71","133","142","116","161","73","88","13","13","15","3","5","1","44","44","49","18","enhancement"
"41558","0","Remy Maucherat","- 41558: Don't call synced method on every request, submitted by Arvind Srinivasan.","Bug 41558  Unnecessary synchronization caused by JspFactory.getDefaultFactory while servicing JSPs","unnecessari synchron caus jsp factori jspfactori get default factori getdefaultfactori servic jsp","Tomcat version: 6.0.x trunk

Every generated JSP has 

    try {
      _jspxFactory = JspFactory.getDefaultFactory();
      response.setContentType(""text/html"");

in its _jspService method.

The use of JspFactory.getDefaultFactory during request processing should be
avoided as it is a *static synchronized* method.

I have a diff that addresses this and will attach it to this bug.","tomcat version trunk everi gener jsp tri jspx factori jspxfactori jsp factori jspfactori get default factori getdefaultfactori respons set content type setcontenttyp text html jsp servic jspservic method use jsp factori jspfactori get default factori getdefaultfactori request process avoid static synchron method diff address attach","""java/org/apache/jasper/runtime/HttpJspBase.java""","1","1","1","1","3","0","3","0","1","0","0","9","10","10","2","10","0","0","2","8","116","18","74","30","29","24","28","41","23","18","1","1","1","1","0","0","9","9","9","9","enhancement"
"41578","0","Remy Maucherat","- As suggested in 41578, experiment with a thread local pool, but in a simpler way (and with an upper bound).","Bug 41578  Avoid SimplePool.get/put synchronization in JspFactoryImpl","avoid simpl pool simplepool get put synchron jsp factori impl jspfactoryimpl","Only 1 instance of the JspFactory object (JspFactoryImpl) is created.
Consequently there is a single SimplePool of PageContext objects for all JSP
requests and so every JSP request must synchronize on the lock inside SimplePool
when getting and releasing a PageContext instance. Moreover, the pool has a
fixed capacity and after that, the code in JspFactoryImpl will first acquire the
lock to see if there are any free objects in the pool, failing which a new
PageContext object is created.

Instead of a single process-wide pool, a per thread pool of PageContext objects
can be used by JspFactoryImpl.","instanc jsp factori jspfactori object jsp factori impl jspfactoryimpl creat consequ singl simpl pool simplepool page context pagecontext object jsp request everi jsp request must synchron lock insid simpl pool simplepool get releas page context pagecontext instanc moreov pool fix capac code jsp factori impl jspfactoryimpl first acquir lock see free object pool fail new page context pagecontext object creat instead singl process wide processwid pool thread pool page context pagecontext object use jsp factori impl jspfactoryimpl","""java/org/apache/jasper/runtime/JspFactoryImpl.java""","1","1","1","1","8","0","8","0","4","0","3","11","11","11","12","11","2","2","0","7","170","22","125","57","57","23","63","84","47","37","4","4","4","1","3","0","18","18","19","11","enhancement"
"41606","772","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41606 Prevent double init() of JSP Patch provided by Chris Halstead","Bug 41606  The jspInit method is called twice.","jsp init jspinit method call twice","The problem is:
The jspInit method is called twice.

The definition is:
-The JSP background compilations are enable.
 (In default web.xml, define checkInterval and define development false.)
-Define the JSP with <servlet> and <load-on-startup> tag in web.xml.

The proposing:
org/apache/jasper/compiler/Compiler.java 
----
public void compile(boolean compileClass, boolean jspcMode)
    throws FileNotFoundException, JasperException, Exception
{
....
    if( compileClass ) {
        File targetFile = new File(ctxt.getClassFileName());
        if (targetFile.exists()) {
            long targetLastModified = targetFile.lastModified();
            if (jsw != null) {
                jsw.setServletClassLastModifiedTime(targetLastModified);
            }   
        }
    }
}// last of the method.
----

Regards,
Yuichiro","problem jsp init jspinit method call twice definit jsp background compil enabl default web xml defin check interv checkinterv defin develop fals defin jsp servlet load on startup loadonstartup tag web xml propos apach jasper compil compil java public void compil boolean compil class compileclass boolean jspc mode jspcmode throw file not found except filenotfoundexcept jasper except jasperexcept except compil class compileclass file target file targetfil new file ctxt get class file name getclassfilenam target file targetfil exist long target last modifi targetlastmodifi target file targetfil last modifi lastmodifi jsw null jsw set servlet class last modifi time setservletclasslastmodifiedtim target last modifi targetlastmodifi last method regard yuichiro","""java/org/apache/jasper/compiler/Compiler.java""","4","4","4","2","32","3","20","8","1","0","0","14","15","15","8","15","0","1","2","12","542","78","316","79","206","148","152","217","71","146","18","18","20","13","3","0","63","63","66","28","normal"
"41608","2","Mark Emlyn David Thomas","Port fix bug 41608. Make log levels consistent.","Bug 41608  The log level is different at same messages.","log level differ messag","I suggest a little message improvement.

The log level is different at same messages.
The message ""Servlet.service() for servlet {0} threw exception"" is 
output in eight places, but the message level is not same.

--org.apache.catalina.core.ApplicationDispatcher#invoke
...
wrapper.getLogger().error(sm.getString(""applicationDispatcher.serviceException"",
    wrapper.getName()), e);
...
wrapper.getLogger().error(sm.getString(""applicationDispatcher.serviceException"",
    wrapper.getName()), e);
...
wrapper.getLogger().error(sm.getString(""applicationDispatcher.serviceException"",
    wrapper.getName()), rootCause);
...
wrapper.getLogger().error(sm.getString(""applicationDispatcher.serviceException"",
    wrapper.getName()), e);


--org.apache.catalina.core.StandardWrapperValve#invoke
container.getLogger().warn(sm.getString(""standardWrapper.serviceException"",
    wrapper.getName()), e);
...
container.getLogger().warn(sm.getString(""standardWrapper.serviceException"",
    wrapper.getName()), e);
...
container.getLogger().error(sm.getString(""standardWrapper.serviceException"",
    wrapper.getName()), rootCause);
...
container.getLogger().error(sm.getString(""standardWrapper.serviceException"",
    wrapper.getName()), e);

Are there any reasons for using getLogger().warn()?
I think it would be better that all of them use getLogger().error(...).","suggest littl messag improv log level differ messag messag servlet servic servlet threw except output eight place messag level apach catalina core applic dispatch applicationdispatch invok wrapper get logger getlogg error sm get string getstr applic dispatch applicationdispatch servic except serviceexcept wrapper get name getnam wrapper get logger getlogg error sm get string getstr applic dispatch applicationdispatch servic except serviceexcept wrapper get name getnam wrapper get logger getlogg error sm get string getstr applic dispatch applicationdispatch servic except serviceexcept wrapper get name getnam root caus rootcaus wrapper get logger getlogg error sm get string getstr applic dispatch applicationdispatch servic except serviceexcept wrapper get name getnam apach catalina core standard wrapper valv standardwrappervalv invok contain get logger getlogg warn sm get string getstr standard wrapper standardwrapp servic except serviceexcept wrapper get name getnam contain get logger getlogg warn sm get string getstr standard wrapper standardwrapp servic except serviceexcept wrapper get name getnam contain get logger getlogg error sm get string getstr standard wrapper standardwrapp servic except serviceexcept wrapper get name getnam root caus rootcaus contain get logger getlogg error sm get string getstr standard wrapper standardwrapp servic except serviceexcept wrapper get name getnam reason use get logger getlogg warn think would better use get logger getlogg error","""java/org/apache/catalina/core/StandardWrapperValve.java""","5","5","6","1","33","1","26","5","1","0","2","14","14","14","5","14","0","1","0","13","568","63","400","82","293","105","195","261","73","188","39","39","47","1","5","0","76","76","88","14","trivial"
"41666","10","Mark Emlyn David Thomas","Port fix for bug 41666. Correct handling of boundary conditions for If-Unmodified-Since and If-Modified-Since headers. Patch provided by Suzuki Yuichiro.","Bug 41666  If-Unmodified-Since failure","unmodifi sinc failur","The If-Unmodified-Since header doesn't work enoughly.

failed case:
 The If-Unmodified-Since header value: 1000000(milliseconds)
 The lastModified value of target resource: 1001000(milliseconds)

In this case, the response's status code should be SC_PRECONDITION_FAILED,
but the result is not so.

caused by:
In DefaultServlet#checkIfUnmodifiedSince:
    if ( lastModified > (headerValue + 1000)) {

I think it should be:
    if ( lastModified >= (headerValue + 1000)) {","unmodifi sinc header doesn work enoughli fail case unmodifi sinc header valu millisecond last modifi lastmodifi valu target resourc millisecond case respons statu code sc precondit fail result caus default servlet defaultservlet check if unmodifi sinc checkifunmodifiedsinc last modifi lastmodifi header valu headervalu think last modifi lastmodifi header valu headervalu","""java/org/apache/catalina/servlets/DefaultServlet.java""","5","5","6","2","47","7","29","10","2","0","6","39","39","39","14","39","0","0","35","4","2140","415","1237","330","898","493","611","837","253","584","41","41","51","14","5","0","227","227","269","112","minor"
"41673","1630","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41673 Use platform line endings when reporting error messages","Bug 41673  Jasper output the message of compiling error using LF(\n) on ANY OS.","jasper output messag compil error use lf","Jasper output the message of compiling error using LF(\n) on ANY OS.
This cannot be correctly displayed with Windows notepad.

I think the line feed code along OS would be better, though I know other text 
editor solves this.","jasper output messag compil error use lf cannot correctli display window notepad think line feed code along would better though know text editor solv","""java/org/apache/jasper/compiler/DefaultErrorHandler.java""","1","1","1","1","14","1","11","1","1","0","0","4","4","4","0","4","0","0","0","4","115","12","55","15","34","48","24","32","10","22","4","4","4","1","2","1","7","7","7","4","enhancement"
"41673","1630","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41673 Use platform line endings when reporting error messages","Bug 41673  Jasper output the message of compiling error using LF(\n) on ANY OS.","jasper output messag compil error use lf","Jasper output the message of compiling error using LF(\n) on ANY OS.
This cannot be correctly displayed with Windows notepad.

I think the line feed code along OS would be better, though I know other text 
editor solves this.","jasper output messag compil error use lf cannot correctli display window notepad think line feed code along would better though know text editor solv","""java/org/apache/jasper/compiler/ErrorDispatcher.java""","1","1","1","1","11","0","7","2","2","4","0","26","26","22","4","26","0","2","0","24","616","63","222","85","112","331","84","129","60","69","8","8","9","1","3","1","43","43","47","26","enhancement"
"41673","1630","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41673 Use platform line endings when reporting error messages","Bug 41673  Jasper output the message of compiling error using LF(\n) on ANY OS.","jasper output messag compil error use lf","Jasper output the message of compiling error using LF(\n) on ANY OS.
This cannot be correctly displayed with Windows notepad.

I think the line feed code along OS would be better, though I know other text 
editor solves this.","jasper output messag compil error use lf cannot correctli display window notepad think line feed code along would better though know text editor solv","""org.apache.jasper.compiler.DefaultErrorHandler.javacError""","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","35","3","32","3","27","0","19","23","4","19","null","null","null","null","2","0","4","4","4","1","enhancement"
"41673","1630","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41673 Use platform line endings when reporting error messages","Bug 41673  Jasper output the message of compiling error using LF(\n) on ANY OS.","jasper output messag compil error use lf","Jasper output the message of compiling error using LF(\n) on ANY OS.
This cannot be correctly displayed with Windows notepad.

I think the line feed code along OS would be better, though I know other text 
editor solves this.","jasper output messag compil error use lf cannot correctli display window notepad think line feed code along would better though know text editor solv","""org.apache.jasper.compiler.DefaultErrorHandler.javacError""","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","12","1","5","2","2","6","1","2","1","1","null","null","null","null","0","1","1","1","1","1","enhancement"
"41673","1630","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41673 Use platform line endings when reporting error messages","Bug 41673  Jasper output the message of compiling error using LF(\n) on ANY OS.","jasper output messag compil error use lf","Jasper output the message of compiling error using LF(\n) on ANY OS.
This cannot be correctly displayed with Windows notepad.

I think the line feed code along OS would be better, though I know other text 
editor solves this.","jasper output messag compil error use lf cannot correctli display window notepad think line feed code along would better though know text editor solv","""org.apache.jasper.compiler.ErrorDispatcher.javacError""","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","5","1","4","2","1","0","1","2","1","1","null","null","null","null","0","0","1","1","1","1","enhancement"
"41673","1630","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41673 Use platform line endings when reporting error messages","Bug 41673  Jasper output the message of compiling error using LF(\n) on ANY OS.","jasper output messag compil error use lf","Jasper output the message of compiling error using LF(\n) on ANY OS.
This cannot be correctly displayed with Windows notepad.

I think the line feed code along OS would be better, though I know other text 
editor solves this.","jasper output messag compil error use lf cannot correctli display window notepad think line feed code along would better though know text editor solv","""org.apache.jasper.compiler.ErrorDispatcher.javacError""","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","5","1","4","2","1","0","1","2","1","1","null","null","null","null","0","0","1","1","1","1","enhancement"
"41675","31","Yoav Shapira","Bugzilla 41675: add a couple of DEBUG-level logging statements to Http11Processor.java when sending error responses.","Bug 41675  Add a debug statement when some necessary header information is missing","add debug statement necessari header inform miss","Reference: org.apache.coyote.http11.Http11Processor.java

It would be helpful for developers to get informed when some required header
information is missing. eg when headers.getValue(""host""); returns null and
http11 is true.

Couldn't you add a log.debug statement that informs the user about missing
header-fields? (For example in Http11Processor.java:1391)","refer apach coyot http11 http11 processor http11processor java would help develop get inform requir header inform miss header get valu getvalu host return null http11 true couldn add log debug statement inform user miss header field headerfield exampl http11 processor http11processor java","""java/org/apache/coyote/http11/Http11Processor.java""","4","4","5","1","26","2","17","6","2","0","2","49","49","49","34","49","0","5","7","37","1692","313","925","212","665","466","485","694","215","479","44","44","50","10","4","1","215","213","253","91","enhancement"
"41682","32","Filip Hanik","fix 41682","Bug 41682  ClassCastException with BackupManager + debug logging","class cast except classcastexcept backup manag backupmanag debug log","(Still happening in 6.0.9, though that isn't an option in Bugzilla)

If I use the BackupManager for session replication AND turn on debug logging, I
get this exception when I try to invalidate the session:

java.lang.ClassCastException: org.apache.catalina.ha.session.BackupManager
cannot be cast to org.apache.catalina.ha.session.DeltaManager
	at org.apache.catalina.ha.session.DeltaSession.expire(DeltaSession.java:361)
	at org.apache.catalina.ha.session.DeltaSession.expire(DeltaSession.java:352)
	at org.apache.catalina.session.StandardSession.expire(StandardSession.java:660)
	at
org.apache.catalina.session.StandardSession.invalidate(StandardSession.java:1112)
	at
org.apache.catalina.session.StandardSessionFacade.invalidate(StandardSessionFacade.java:150)

The bug is easy to find in the source.  If debug logging is enabled, it tries to
cast manager to DeltaManager without an instanceof, even though it is doing an
instanceof immediately after:

    public void expire(boolean notify, boolean notifyCluster) {
        String expiredId = getIdInternal();
        super.expire(notify);

        if (notifyCluster) {
            if (log.isDebugEnabled())
                log.debug(sm.getString(""deltaSession.notifying"",
                                       ((DeltaManager)manager).getName(),
                                       new Boolean(isPrimarySession()),
                                       expiredId));
            if ( manager instanceof DeltaManager ) {
                ( (DeltaManager) manager).sessionExpired(expiredId);
            }
        }
    }","still happen though isn option bugzilla use backup manag backupmanag session replic turn debug log get except tri invalid session java lang class cast except classcastexcept apach catalina session backup manag backupmanag cannot cast apach catalina session delta manag deltamanag apach catalina session delta session deltasess expir delta session deltasess java apach catalina session delta session deltasess expir delta session deltasess java apach catalina session standard session standardsess expir standard session standardsess java apach catalina session standard session standardsess invalid standard session standardsess java apach catalina session standard session facad standardsessionfacad invalid standard session facad standardsessionfacad java easi find sourc debug log enabl tri cast manag delta manag deltamanag without instanceof even though instanceof immedi public void expir boolean notifi boolean notifi cluster notifyclust string expir id expiredid get id intern getidintern super expir notifi notifi cluster notifyclust log is debug enabl isdebugen log debug sm get string getstr delta session deltasess notifi delta manag deltamanag manag get name getnam new boolean is primari session isprimarysess expir id expiredid manag instanceof delta manag deltamanag delta manag deltamanag manag session expir sessionexpir expir id expiredid","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","6","4","2","0","2","47","47","47","6","47","0","2","5","40","752","100","362","108","206","292","196","293","109","184","8","8","9","5","3","1","91","91","102","58","normal"
"41703","29","Filip Hanik","Fixed 41703","Bug 41703  Variable assigned with it's own value.","variabl assign valu","","","""java/org/apache/catalina/ha/authenticator/SingleSignOnMessage.java""","1","1","1","1","5","0","3","1","1","0","6","22","22","22","10","22","0","0","0","22","187","35","101","47","49","51","52","76","45","31","2","2","2","1","1","1","23","23","23","22","normal"
"41709","1606","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41709 Provide exception messages for ISEs when response is already committed","Bug 41709  When calling the API that relates to the buffer after the response is committed, ISE with no messages is thrown.","call api relat buffer respons commit messag thrown","After the response is committed, following API throws IllegalStateException.
It's O.K. but the message of the exception is not set.

- HttpServletResponse#resetBuffer
- HttpServletResponse#sendError
- HttpServletResponse#sendRedirect
- HttpServletResponse#setBufferSize

To understand the bug of the application, it is hoped that the message is set 
like other exceptions.","respons commit follow api throw illeg state except illegalstateexcept messag except set http servlet respons httpservletrespons reset buffer resetbuff http servlet respons httpservletrespons send error senderror http servlet respons httpservletrespons send redirect sendredirect http servlet respons httpservletrespons set buffer size setbuffers understand applic hope messag set like except","""java/org/apache/catalina/connector/ResponseFacade.java""","1","1","1","1","8","2","6","0","4","0","1","47","47","47","5","47","1","0","1","45","622","201","367","124","177","60","122","214","74","140","5","5","5","1","2","0","89","89","89","47","enhancement"
"41722","116","Mark Emlyn David Thomas","Port fix for bug 41722. role-link in web.xml should be optional.","Bug 41722  role-link tag in web.xml can not  be omitted.","role link rolelink tag web xml omit","The application with follwing web.xml can not be deployed.
---
    <servlet>
      <servlet-name>sample</servlet-name>
      <servlet-class>sample.TheServlet</servlet-class>
      <security-role-ref>
        <role-name>users</role-name>
      </security-role-ref>
    </servlet>

    <servlet-mapping>
    ....
    </servlet-mapping>

    <security-role>
      <role-name>users</role-name>
     </security-role>
---
""java.lang.IllegalArgumentException: Can't convert argument: null"" occurred.

The Specification says:
---
The security-role-ref element declares the security role reference in a
components or in a deployment components code.
It consists of an optional description, the security role name
used in the code(role-name), and an optional link to a security role(role-link).
---
<role-link> is optional.","applic follw web xml deploy servlet servlet name servletnam sampl servlet name servletnam servlet class servletclass sampl the servlet theservlet servlet class servletclass secur role ref securityroleref role name rolenam user role name rolenam secur role ref securityroleref servlet servlet map servletmap servlet map servletmap secur role securityrol role name rolenam user role name rolenam secur role securityrol java lang illeg argument except illegalargumentexcept convert argument null occur specif say secur role ref securityroleref element declar secur role refer compon deploy compon code consist option descript secur role name use code role name rolenam option link secur role role link rolelink role link rolelink option","""java/org/apache/catalina/startup/WebRuleSet.java""","1","1","2","1","22","2","18","1","13","0","0","29","29","29","9","29","0","0","0","29","872","167","586","114","448","119","277","343","101","242","10","10","14","1","3","0","53","53","58","29","normal"
"41739","0","Mark Emlyn David Thomas","Port fix for bug 41739. Servlets with a load-on-startup value of zero should be loaded first.","Bug 41739  The servlet with the value 0 in <load-on-startup> tag must be loaded at first.","servlet valu load on startup loadonstartup tag must load first","Servlet 2.4 specification says:
---
If the value is a positive integer or 0, the container must load
and initialize the servlet as the application is deployed. 
The container must guarantee that servlets marked with lower integers
are loaded before servlets marked with higher integers.
---
I think the servlet with value 0 in <load-on-startup> tag must be loaded at the 
first.

However, Tomcat loads the servlet at the last.","servlet specif say valu posit integ contain must load initi servlet applic deploy contain must guarante servlet mark lower integ load servlet mark higher integ think servlet valu load on startup loadonstartup tag must load first howev tomcat load servlet last","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","17","2","10","4","1","0","3","260","260","260","90","260","0","13","7","240","5626","1197","2821","715","1844","1618","1344","2047","717","1330","60","60","79","9","5","1","644","644","690","335","normal"
"41752","0","Mark Emlyn David Thomas","Port fix for bug 41752. Correct error message on exception in MemoryRealm. Patch provided by Ales Milan.","Bug 41752  Wrong message on exception in MemoryRealm","wrong messag except memori realm memoryrealm","When Digester read tomcat-user.xml file and exception is throw, then is created
new LifecycleException. As first parameter of this Exception is message string.
This string is hardcoded to ""memoryRealm.readXml"", so I thing that log message
will be wrong too!

I think that there must be used StringManager.

actual implementation:

Digester digester = getDigester();
try {
  synchronized (digester) {
    digester.push(this);
    digester.parse(file);
  }
} 
catch (Exception e) {
  throw new LifecycleException(""memoryRealm.readXml"", e);
} 
finally {
  digester.reset();
}


fixed:

Digester digester = getDigester();
try {
  synchronized (digester) {
    digester.push(this);
    digester.parse(file);
  }
} 
catch (Exception e) {
  throw new LifecycleException(sm.getString(""memoryRealm.readXml""), e);
} 
finally {
  digester.reset();
}","digest read tomcat user tomcatus xml file except throw creat new lifecycl except lifecycleexcept first paramet except messag string string hardcod memori realm memoryrealm read xml readxml thing log messag wrong think must use string manag stringmanag actual implement digest digest get digest getdigest tri synchron digest digest push digest pars file catch except throw new lifecycl except lifecycleexcept memori realm memoryrealm read xml readxml final digest reset fix digest digest get digest getdigest tri synchron digest digest push digest pars file catch except throw new lifecycl except lifecycleexcept sm get string getstr memori realm memoryrealm read xml readxml final digest reset","""java/org/apache/catalina/realm/MemoryRealm.java""","2","2","2","1","16","2","8","5","1","0","4","12","12","12","3","12","1","0","5","6","328","85","122","45","72","121","59","86","40","46","6","6","6","3","2","1","25","25","26","14","normal"
"41790","0","Remy Maucherat","- 41790: close file stream.","Bug 41790  JDTCompiler::getContents does not close the reader","compil jdtcompil get content getcont close reader","In the class org.apache.jasper.compiler.JDTCompiler:
-------------------------------------------------------------------------
public char[] getContents() {
                char[] result = null;
                try {
                    InputStreamReader isReader =
                        new InputStreamReader(new FileInputStream(sourceFile),
                                ctxt.getOptions().getJavaEncoding());
                    Reader reader = new BufferedReader(isReader);
                    if (reader != null) {
                        char[] chars = new char[8192];
                        StringBuffer buf = new StringBuffer();
                        int count;
                        while ((count = reader.read(chars, 0, 
                                                    chars.length)) > 0) {
                            buf.append(chars, 0, count);
                        }
                        result = new char[buf.length()];
                        buf.getChars(0, result.length, result, 0);
                    }
                } catch (IOException e) {
                    log.error(""Compilation error"", e);
                }
                return result;
            }
-------------------------------------------------------------------------
the variable ""reader"" is not closed after use it. if I update jsp files 
frequently, it will exhaust the system file handler. ""too many files"" errors 
will come.

I test it on Redhat linux, the same problem will occured in tomcat 5 and tomcat 
6.","class apach jasper compil compil jdtcompil public char get content getcont char result null tri input stream reader inputstreamread is reader isread new input stream reader inputstreamread new file input stream fileinputstream sourc file sourcefil ctxt get option getopt get java encod getjavaencod reader reader new buffer reader bufferedread is reader isread reader null char char new char string buffer stringbuff buf new string buffer stringbuff int count count reader read char char length buf append char count result new char buf length buf get char getchar result length result catch except ioexcept log error compil error return result variabl reader close use updat jsp file frequent exhaust system file handler mani file error redhat linux problem occur tomcat tomcat","""java/org/apache/jasper/compiler/JDTCompiler.java""","4","4","4","1","43","2","40","0","4","0","0","13","13","13","2","13","1","2","1","9","436","39","364","126","246","33","193","255","120","135","23","23","23","5","5","0","62","62","62","19","normal"
"41824","865","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41824 Need to use canonical rather than binary form when writing code","Bug 41824  Unable to use nested type in TLD","unabl use nest type tld","","","""java/org/apache/jasper/compiler/JspUtil.java""","4","3","4","2","21","1","15","4","2","37","6","40","40","3","3","40","2","2","0","36","974","94","663","150","462","218","315","473","134","339","17","17","18","11","4","0","167","159","191","91","normal"
"42039","11","Mark Emlyn David Thomas","Fix bug 42039. Log a stack trace if a servlet throws an UnavailableException. Patch provided by Kawasima Kazuh Remove some unused code.","Bug 42039  Tomcat doesn't output the stack trace of UnavailableException.","tomcat doesn output stack trace unavail except unavailableexcept","When UnavailableException is thrown from the Servlet:init, Tomcat doesn't output
the stack trace of UnavailableException.

The cause of problem is lost.

Tomcat should output the stack trace at the ""invoke"" method of
StandardWrapperValue.","unavail except unavailableexcept thrown servlet init tomcat doesn output stack trace unavail except unavailableexcept caus problem lost tomcat output stack trace invok method standard wrapper valu standardwrappervalu","""java/org/apache/catalina/core/StandardWrapperValve.java""","5","5","6","1","33","1","26","5","1","0","2","14","14","14","5","14","0","1","0","13","571","63","403","83","296","105","198","264","74","190","39","39","47","1","5","0","76","76","88","14","normal"
"42071","10","Mark Emlyn David Thomas","Fix bug 42071 - ISE on multiple UnavailableExceptions. Allow recovery after an UnavailableException","Bug 42071  If a JSP throws an UnavailableException twice, an IllegalStateException occurs.","jsp throw unavail except unavailableexcept twice illeg state except illegalstateexcept occur","If a JSP throws an UnavailableException twice, an IllegalStateException occurs.

first access:
JSP throws UnavailableException.

second access:
If the JSP throws an UnavailableException again then an IllegalStateException
occurs and Tomcat returns status code:500 to the client.

The problem is not that the IllegalStateException occurs.
The problem is that the JSP can be called even though it cannot be used.","jsp throw unavail except unavailableexcept twice illeg state except illegalstateexcept occur first access jsp throw unavail except unavailableexcept second access jsp throw unavail except unavailableexcept illeg state except illegalstateexcept occur tomcat return statu code client problem illeg state except illegalstateexcept occur problem jsp call even though cannot use","""java/org/apache/jasper/servlet/JspServletWrapper.java""","4","4","4","1","22","1","17","3","1","0","0","19","19","19","16","19","0","0","1","18","540","55","373","88","230","114","153","226","74","152","29","29","31","7","4","0","76","76","80","33","normal"
"42072","1","Mark Emlyn David Thomas","Fix bug 42072. Don't call destroy() if init() fails. Patch provided by Kawasima Kazuh. Ported from TC5.5","Bug 42072  The call of the jspDestroy method violates it about the Java Servlet Specification 2.4, SRV.2.3.2.1.","call jsp destroy jspdestroy method violat java servlet specif srv","When a JSP is accessed for a second time, the jspDestroy method is called even
if a ServletException is thrown from the init method of the class that extends
HttpJspPage.

This violates the Java Servlet Specification 2.4, SRV.2.3.2.1.","jsp access second time jsp destroy jspdestroy method call even servlet except servletexcept thrown init method class extend http jsp page httpjsppage violat java servlet specif srv","""java/org/apache/jasper/servlet/JspServletWrapper.java""","4","4","4","1","22","1","17","3","1","0","0","19","19","19","16","19","0","0","1","18","537","54","371","87","228","114","151","224","73","151","29","29","31","7","4","0","76","76","80","33","major"
"42077","593","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=42077 Don't include nulls in iterator. Based on a patch by Mathias Broekelmann","Bug 42077  the iterator from javax.el.CompositeELResolver#getFeatureDescriptor() must not return null values","iter javax composit resolv compositeelresolv get featur descriptor getfeaturedescriptor must return null valu","","","""java/javax/el/CompositeELResolver.java""","2","2","2","1","9","0","9","0","2","0","0","13","13","13","8","13","0","1","0","12","176","28","132","44","67","16","71","102","42","60","4","4","5","3","3","0","29","29","32","21","major"
"42085","1","Remy Maucherat","- 42085: The handlers for the root logger are now added in addLogger when they are explicitly specified.","Bug 42085  java.util.Logging duplicated since 5.5.23.  5.5.20 is OK","java util log duplic sinc ok","We use the followwing logging.properties in our WebApplication:

----------%<--------------------%<----------------
handlers = 1tivoli.java.util.logging.FileHandler,
2product.java.util.logging.FileHandler

# Handlers for the root logger
.handlers = 1tivoli.java.util.logging.FileHandler,
2product.java.util.logging.FileHandler

1tivoli.java.util.logging.FileHandler.level = INFO
1tivoli.java.util.logging.FileHandler.pattern = /var/log/product/tivoli%g.log
# limit Output to 1MB
1tivoli.java.util.logging.FileHandler.limit=1048576
# Limit rotation to 10 Logs ...
1tivoli.java.util.logging.FileHandler.count=10
1tivoli.java.util.logging.FileHandler.append=true
1tivoli.java.util.logging.FileHandler.formatter=de.customer.product.tivoli.TivoliFormatter

2product.java.util.logging.FileHandler.level = FINEST
2product.java.util.logging.FileHandler.pattern = /var/log/product/product%g.log
# limit Output to 1MB
2product.java.util.logging.FileHandler.limit=1048576
# Limit rotation to 5 Logs ...
2product.java.util.logging.FileHandler.count=5
2product.java.util.logging.FileHandler.append=true
2product.java.util.logging.FileHandler.formatter=java.util.logging.SimpleFormatter
----------%<--------------------%<----------------

When using apache-tomcat-5.5.23 every Line in the Logfiles
is duplicated. Debugging I found that the TivoliFormatter 
is actually created twice. And the root-logger has actually
4 Handlers and not two as intended. This does not allow us an
upgrade beyond 5.5.20.

Found on Linux64Bit and Windows-XP, both with JDK 1.5_R11","use follow log properti web applic webappl handler 1tivoli java util log file handler filehandl 2product java util log file handler filehandl handler root logger handler 1tivoli java util log file handler filehandl 2product java util log file handler filehandl 1tivoli java util log file handler filehandl level info 1tivoli java util log file handler filehandl pattern log product tivoli log limit output 1mb 1tivoli java util log file handler filehandl limit limit rotat log 1tivoli java util log file handler filehandl count 1tivoli java util log file handler filehandl append true 1tivoli java util log file handler filehandl formatt custom product tivoli tivoli formatt tivoliformatt 2product java util log file handler filehandl level finest 2product java util log file handler filehandl pattern log product product log limit output 1mb 2product java util log file handler filehandl limit limit rotat log 2product java util log file handler filehandl count 2product java util log file handler filehandl append true 2product java util log file handler filehandl formatt java util log simpl formatt simpleformatt use apach tomcat apachetomcat everi line logfil duplic debug found tivoli formatt tivoliformatt actual creat twice root logger rootlogg actual handler two intend allow u upgrad beyond found linux64 bit linux64bit window xp jdk r11","""java/org/apache/juli/ClassLoaderLogManager.java""","3","3","3","1","21","1","16","4","7","1","0","21","21","20","9","21","6","0","5","10","572","85","361","122","225","126","172","251","109","142","14","14","14","9","5","0","76","76","82","36","regression"
"42119","1","Mark Emlyn David Thomas","Fix bug 42119 using approach suggested by Leigh L Klotz Jr of using RequestUtil implementation.","Bug 42119  request.getCharacterEncoding misparses charset=UTF-8; xyz=3","request get charact encod getcharacterencod mispars charset utf xyz","(This bug is also present in Coyote source 6.0.10.)

If there is an HTTP header
 Content-Type: text/abc; charset=UTF-8; xyz=3
request.getCharacterEncoding() returns ""UTF-8; xyz=3"" but Tomcat 4.1.24 returns
""UTF-8"".

In Tomcat 4.1.24, request.getCharacterEncoding uses parseCharacterEncoding
defined in
 
jakarta-tomcat-4.1.24-src/catalina/src/share/org/apache/catalina/util/RequestUtil.java

and it correctly handles the case of other Content-Type parameters.

In Tomcat 5.5.23, however, request.getCharacterEncoding uses
getCharsetFromContentType defined in 
from
apache-tomcat-5.5.23-src/connectors/util/java/org/apache/tomcat/util/http/ContentType.java

which does not search for a possible terminating semicolon in the charset, thus
erroneously including additional characters in the charset.

The code in 5.5.23 has a comment begins
     // Basically return everything after "";charset=""

Please consider using the code from 4.1.24

This problem showed up when Content-Type was multipart/mixed and a client
specified a charset parameter to Content-Type; however, it will occur in any
Content-Type where charset is specified and is not the last parameter.","present coyot sourc http header content type text abc charset utf xyz request get charact encod getcharacterencod return utf xyz tomcat return utf tomcat request get charact encod getcharacterencod us pars charact encod parsecharacterencod defin jakarta tomcat jakartatomcat 24 src 24src catalina src share apach catalina util request util requestutil java correctli handl case content type paramet tomcat howev request get charact encod getcharacterencod us get charset from content type getcharsetfromcontenttyp defin apach tomcat apachetomcat 23 src 23src connector util java apach tomcat util http content type contenttyp java search possibl termin semicolon charset thu erron includ addit charact charset code comment begin basic return everyth charset pleas consid use code problem show content type multipart mix client specifi charset paramet content type howev occur content type charset specifi last paramet","""java/org/apache/tomcat/util/http/ContentType.java""","4","4","8","3","28","1","21","5","1","2","0","2","2","0","0","2","0","0","0","2","93","10","45","11","32","38","19","28","11","17","4","4","13","4","2","1","8","8","17","7","normal"
"42181","1954","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=42181 Better handling of edge conditions in chunk header processing.","Bug 42181  ArrayIndexOutOfBoundsException in parseChunkHeader","array index out of bound except arrayindexoutofboundsexcept pars chunk header parsechunkhead","Apr 22, 2007 11:53:32 AM org.apache.coyote.http11.Http11Processor process
SEVERE: Error finishing request
java.lang.ArrayIndexOutOfBoundsException: -28
        at
org.apache.coyote.http11.filters.ChunkedInputFilter.parseChunkHeader(ChunkedInputFilter.java:256)
        at
org.apache.coyote.http11.filters.ChunkedInputFilter.doRead(ChunkedInputFilter.java:129)
        at
org.apache.coyote.http11.filters.ChunkedInputFilter.end(ChunkedInputFilter.java:179)
        at
org.apache.coyote.http11.InternalInputBuffer.endRequest(InternalInputBuffer.java:368)
        at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:894)
        at
org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)
        at
org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at
org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
        at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
        at java.lang.Thread.run(Thread.java:595)","apr apach coyot http11 http11 processor http11processor process sever error finish request java lang array index out of bound except arrayindexoutofboundsexcept apach coyot http11 filter chunk input filter chunkedinputfilt pars chunk header parsechunkhead chunk input filter chunkedinputfilt java apach coyot http11 filter chunk input filter chunkedinputfilt do read doread chunk input filter chunkedinputfilt java apach coyot http11 filter chunk input filter chunkedinputfilt chunk input filter chunkedinputfilt java apach coyot http11 intern input buffer internalinputbuff end request endrequest intern input buffer internalinputbuff java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 base protocol http11baseprotocol http11 connect handler http11connectionhandl process connect processconnect http11 base protocol http11baseprotocol java apach tomcat util net pool tcp endpoint pooltcpendpoint process socket processsocket pool tcp endpoint pooltcpendpoint java apach tomcat util net leader follow worker thread leaderfollowerworkerthread run it runit leader follow worker thread leaderfollowerworkerthread java apach tomcat util thread thread pool threadpool control runnabl controlrunn run thread pool threadpool java java lang thread run thread java","""java/org/apache/coyote/http11/filters/ChunkedInputFilter.java""","5","5","5","2","28","5","17","6","1","0","2","13","13","13","10","13","0","1","4","8","537","131","265","69","176","142","128","194","55","139","25","25","29","11","4","1","65","65","69","29","normal"
"42181","1954","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=42181 Better handling of edge conditions in chunk header processing.","Bug 42181  ArrayIndexOutOfBoundsException in parseChunkHeader","array index out of bound except arrayindexoutofboundsexcept pars chunk header parsechunkhead","Apr 22, 2007 11:53:32 AM org.apache.coyote.http11.Http11Processor process
SEVERE: Error finishing request
java.lang.ArrayIndexOutOfBoundsException: -28
        at
org.apache.coyote.http11.filters.ChunkedInputFilter.parseChunkHeader(ChunkedInputFilter.java:256)
        at
org.apache.coyote.http11.filters.ChunkedInputFilter.doRead(ChunkedInputFilter.java:129)
        at
org.apache.coyote.http11.filters.ChunkedInputFilter.end(ChunkedInputFilter.java:179)
        at
org.apache.coyote.http11.InternalInputBuffer.endRequest(InternalInputBuffer.java:368)
        at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:894)
        at
org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)
        at
org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at
org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
        at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
        at java.lang.Thread.run(Thread.java:595)","apr apach coyot http11 http11 processor http11processor process sever error finish request java lang array index out of bound except arrayindexoutofboundsexcept apach coyot http11 filter chunk input filter chunkedinputfilt pars chunk header parsechunkhead chunk input filter chunkedinputfilt java apach coyot http11 filter chunk input filter chunkedinputfilt do read doread chunk input filter chunkedinputfilt java apach coyot http11 filter chunk input filter chunkedinputfilt chunk input filter chunkedinputfilt java apach coyot http11 intern input buffer internalinputbuff end request endrequest intern input buffer internalinputbuff java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 base protocol http11baseprotocol http11 connect handler http11connectionhandl process connect processconnect http11 base protocol http11baseprotocol java apach tomcat util net pool tcp endpoint pooltcpendpoint process socket processsocket pool tcp endpoint pooltcpendpoint java apach tomcat util net leader follow worker thread leaderfollowerworkerthread run it runit leader follow worker thread leaderfollowerworkerthread java apach tomcat util thread thread pool threadpool control runnabl controlrunn run thread pool threadpool java java lang thread run thread java","""java/org/apache/tomcat/util/buf/HexUtils.java""","1","1","1","1","7","1","6","0","1","3","3","3","3","0","0","3","0","0","0","3","97","18","45","29","30","34","12","18","10","8","3","3","3","1","1","1","5","5","5","3","normal"
"42202","0","Remy Maucherat","- 42202: Fix a problem handling %xx encoded URLs (unfortunately, some are encoded - the webapp CL and the system CL -   and some are not - the URL CL).","Bug 42202  if you install tomcat in a directory with spaces it ignores TLD files inside jar files","instal tomcat directori space ignor tld file insid jar file","if you install tomcat or a web application in a directory with spaces in the
name, for example ""C:\Program Files\vds\tomcat"" for tomcat or ""C:\Program
Files\vds\console"" for a web application.
the TLD files that are inside the META-INF directory of the jar files will not
be loaded.

the problem is is the file treatment inside the TldConfig class ...
I have attached a patch with the correction.
this bug is found in Tomcat 6 too","instal tomcat web applic directori space name exampl program file vd tomcat tomcat program file vd consol web applic tld file insid meta inf directori jar file load problem file treatment insid tld config tldconfig class attach patch correct found tomcat","""java/org/apache/catalina/startup/TldConfig.java""","3","3","4","1","23","1","15","5","1","2","6","22","22","20","3","22","0","10","0","12","715","89","426","119","278","201","220","307","113","194","15","15","18","6","5","0","85","85","93","40","major"
"42308","0","Remy Maucherat","- 42308: nextRequest recycles the request.","Bug 42308  with APR bytessent bytesreceived performance data is not collected","apr bytess bytesreceiv perform data collect","with APR bytes received and bytes sent are always 0.","apr byte receiv byte sent alway","""java/org/apache/coyote/http11/Http11AprProcessor.java""","4","4","5","2","28","2","19","7","1","0","2","48","48","48","34","48","0","5","7","36","1783","319","1002","230","725","473","540","760","234","526","50","50","59","10","5","0","228","226","272","97","normal"
"42308","0","Remy Maucherat","- 42308: nextRequest recycles the request.","Bug 42308  with APR bytessent bytesreceived performance data is not collected","apr bytess bytesreceiv perform data collect","with APR bytes received and bytes sent are always 0.","apr byte receiv byte sent alway","""java/org/apache/coyote/http11/Http11AprProtocol.java""","1","1","1","1","4","0","3","0","3","0","2","115","115","115","29","115","1","0","3","111","714","120","435","191","301","159","262","418","188","230","7","7","7","4","3","0","157","157","158","118","normal"
"42308","0","Remy Maucherat","- 42308: nextRequest recycles the request.","Bug 42308  with APR bytessent bytesreceived performance data is not collected","apr bytess bytesreceiv perform data collect","with APR bytes received and bytes sent are always 0.","apr byte receiv byte sent alway","""java/org/apache/coyote/http11/Http11NioProcessor.java""","4","4","5","1","28","2","18","6","1","0","2","50","50","50","36","50","0","5","7","38","1818","324","1020","229","742","487","545","776","231","545","47","47","54","10","7","0","239","237","283","99","normal"
"42308","0","Remy Maucherat","- 42308: nextRequest recycles the request.","Bug 42308  with APR bytessent bytesreceived performance data is not collected","apr bytess bytesreceiv perform data collect","with APR bytes received and bytes sent are always 0.","apr byte receiv byte sent alway","""java/org/apache/coyote/http11/InternalNioInputBuffer.java""","4","4","4","2","25","4","15","5","5","0","1","27","23","27","29","27","0","2","1","24","905","205","463","95","307","248","243","353","88","265","31","31","34","21","5","1","112","112","123","72","normal"
"42309","2","Filip Hanik","Ability to create a connector using a custom protocol specification for embedded. Fix for bug 42309","Bug 42309  Request: support for NIO in Embedded Tomcat","request support nio embed tomcat","in org.apache.catalina.startup.Embedded there is no direct API to create an NIO
connector. This would be very helpful for all applications which use tomcat in
embedded mode and require the CometProcessor.","apach catalina startup embed direct api creat nio connector would help applic use tomcat embed mode requir comet processor cometprocessor","""java/org/apache/catalina/startup/Embedded.java""","3","3","3","1","19","2","10","5","1","0","3","38","38","38","8","38","0","0","4","34","994","197","458","118","294","340","236","359","123","236","16","16","16","8","4","1","124","124","127","55","enhancement"
"42314","53","Mark Emlyn David Thomas","Close streams as noted in bug 42314.","Bug 42314  Jasper output no details with compilation error in specific case.","jasper output detail compil error specif case","Jasper output no details when Jasper cannot find
mappings between generated servlet code (with mistakes)
and former JSP.
One example JSP is the following. 
(The imported class in the JSP is not found.)
---
<%@
  page import = ""not.exist.class""
%>
---","jasper output detail jasper cannot find map gener servlet code mistak former jsp one exampl jsp follow import class jsp found page import exist class","""java/org/apache/jasper/compiler/JavacErrorDetail.java""","1","1","1","1","16","1","8","6","1","0","0","10","10","10","6","10","0","1","0","9","214","27","100","49","45","87","51","69","37","32","7","7","8","6","5","1","17","17","18","15","normal"
"42361","0","Mark Emlyn David Thomas","Fix bug 42361. Handle multi-part forms when saving request during FORM auth. Patch provided by Peter Runge.","Bug 42361  POST content type incorrect for multipart forms after login","post content type incorrect multipart form login","When using a form with a custom encoding (e.g. ""multipart/form-data""), the
content type is not restored after a redirect to a login page (auth-method = FORM).

To reproduce:
- A page that POSTs using multipart/form-data encoding (or anything other than
application/x-www-form-urlencoded) to a result page that is protected by a login
page (auth-method=FORM) is invoked.
- Even though the multipart POST data exists (verified by reading input stream
of request from result page) the content type of the request is always
""application/x-www-form-urlencoded"".  
- This only happens when redirected to the login page first.  It does not happen
if already logged in.","use form custom encod multipart form data formdata content type restor redirect login page auth method authmethod form reproduc page post use multipart form data formdata encod anyth applic www form urlencod xwwwformurlencod result page protect login page auth method authmethod form invok even though multipart post data exist verifi read input stream request result page content type request alway applic www form urlencod xwwwformurlencod happen redirect login page first happen alreadi log","""java/org/apache/catalina/authenticator/FormAuthenticator.java""","6","6","6","2","41","4","27","9","1","0","2","10","10","10","1","10","0","0","6","4","525","84","306","92","219","135","164","228","78","150","32","32","34","14","4","0","63","63","65","27","normal"
"42361","0","Mark Emlyn David Thomas","Fix bug 42361. Handle multi-part forms when saving request during FORM auth. Patch provided by Peter Runge.","Bug 42361  POST content type incorrect for multipart forms after login","post content type incorrect multipart form login","When using a form with a custom encoding (e.g. ""multipart/form-data""), the
content type is not restored after a redirect to a login page (auth-method = FORM).

To reproduce:
- A page that POSTs using multipart/form-data encoding (or anything other than
application/x-www-form-urlencoded) to a result page that is protected by a login
page (auth-method=FORM) is invoked.
- Even though the multipart POST data exists (verified by reading input stream
of request from result page) the content type of the request is always
""application/x-www-form-urlencoded"".  
- This only happens when redirected to the login page first.  It does not happen
if already logged in.","use form custom encod multipart form data formdata content type restor redirect login page auth method authmethod form reproduc page post use multipart form data formdata encod anyth applic www form urlencod xwwwformurlencod result page protect login page auth method authmethod form invok even though multipart post data exist verifi read input stream request result page content type request alway applic www form urlencod xwwwformurlencod happen redirect login page first happen alreadi log","""java/org/apache/catalina/authenticator/SavedRequest.java""","1","1","1","1","3","0","3","0","1","0","0","18","18","18","8","18","0","0","0","18","183","44","82","38","34","57","38","59","36","23","2","2","2","1","1","1","20","20","20","18","normal"
"42409","539","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=42409 The spec says reset the buffer, therefore use the resetBuffer() method. This makes custom and standard error handling consistent.","Bug 42409  Extra response headers not sent when using custom error page","extra respons header sent use custom error page","If I create a servlet that does the following:

response.setHeader(""X-BUG"", ""Value"");
response.sendError(HttpServletResponse.SC_BAD_REQUEST);

If I use the tomcat default error page for 400 responses, the response will
contain the header ""X-BUG"" with value ""Value"".

However, if I create a custom error page, the response headers do NOT contain
the ""X-BUG"" header in the response. 

Here is my web.xml, for example:

<error-page>
    <error-code>400</error-code>
    <location>/400.jsp</location>
</error-page>

400.jsp contains plain html:

<html>
<body>
<h3>Custom 400 error page</h3>
</body>
</html>","creat servlet follow respons set header sethead valu respons send error senderror http servlet respons httpservletrespons sc bad request use tomcat default error page respons respons contain header valu valu howev creat custom error page respons header contain header respons web xml exampl error page errorpag error code errorcod error code errorcod locat jsp locat error page errorpag jsp contain plain html html bodi h3 custom error page h3 bodi html","""java/org/apache/catalina/core/StandardHostValve.java""","5","5","5","2","48","7","26","14","1","1","3","7","7","6","0","7","0","0","4","3","443","87","215","63","148","141","106","144","51","93","11","11","12","5","3","1","38","38","39","15","major"
"42438","6","Mark Emlyn David Thomas","Port fix for bug 42438. Duplicate temp variable was created. Patch provided by Brian Lenz.","Bug 42438  Duplicate JSP temp variable declaration when jsp:attribute used in conjunction with custom tags","duplic jsp temp variabl declar jsp attribut use conjunct custom tag","","","""java/org/apache/jasper/compiler/Node.java""","1","1","1","1","5","0","4","0","40","0","1","299","300","300","91","300","4","2","2","292","2542","460","1540","568","626","547","641","1039","510","529","6","6","6","6","5","0","365","361","377","327","major"
"42444","2","Timothy A. Funk","bug 42444: prevent NPE Patch provided by Nils Hammar (funkman)","Bug 42444  Potential NullPointerException in org.apache.catalina.valves.AccessLogValve","potenti null pointer except nullpointerexcept apach catalina valv access log valv accesslogvalv","","","""java/org/apache/catalina/valves/AccessLogValve.java""","2","1","2","1","12","0","8","3","24","0","3","70","71","71","39","71","0","7","2","62","1430","223","738","225","426","476","334","500","198","302","20","10","20","4","4","1","159","138","169","75","normal"
"42459","0","Rainer Jung","Fix BZ 42459: Manager webap table format error for stopped and undeployed webapps.","Bug 42459  Tomcat Web Application Manager table error","tomcat web applic manag tabl error","html table -> tr wrong formating when stop (not last) in Tomcat Web Application 
Manager.","html tabl tr wrong format stop last tomcat web applic manag","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","3","1","26","2","19","5","11","0","11","32","32","32","2","32","0","0","11","21","1115","106","785","158","632","232","360","473","155","318","16","16","20","9","4","0","113","113","125","54","trivial"
"42497","9","Mark Emlyn David Thomas","Port fix for bug 42497. Include ETag header on 304 response as per RFC2616. Patch provided by Len Popp.","Bug 42497  304 response should consistently include ETag header","respons consist includ tag etag header","","","""java/org/apache/catalina/servlets/DefaultServlet.java""","5","5","6","2","47","7","29","10","2","0","6","39","39","39","14","39","0","0","35","4","2140","415","1237","330","898","493","611","837","253","584","41","41","51","14","5","0","227","227","269","112","normal"
"42503","217","Timothy A. Funk","http://issues.apache.org/bugzilla/show_bug.cgi?id=42503 ServletContext.getResourceAsStream returns stale data","Bug 42503  ServletContext.getResourceAsStream returns stale data","servlet context servletcontext get resourc stream getresourceasstream return stale data","Under certain conditions, the resource cache implementation used by the
servlet/JSP engine (in org.apache.naming.resource) does not detect that a file
in its cache has been modified and therefore returns the previous contents of
the file.

This happens only 
 * when the file contents are modified but the file length doesn't change
 * until the time the first change in the file is detected after server startup
   
To reproduce the problem, put the attached test.jsp and test.txt into the ROOT
web app and then do the following. (I used Tomcat 6's trunk for the test)

% cat test.txt
abcd
% telnet . 9080 
Trying 0.0.0.0...
Connected to ..
Escape character is '^]'.
GET /test.jsp HTTP/1.0

HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Set-Cookie: JSESSIONID=706D6FE8B06687509D42E79DBEE266EF; Path=/
Content-Type: text/html
Content-Length: 26
Date: Wed, 23 May 2007 23:03:05 GMT
Connection: close



File contents=[
abcd

]
Connection to . closed by foreign host.

% cat test.txt (change the contents but not the size)
efgh
 % telnet . 9080 
Trying 0.0.0.0...
Connected to ..
Escape character is '^]'.
GET /test.jsp HTTP/1.0

HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Set-Cookie: JSESSIONID=2B144247B747F54184114FA82869DE14; Path=/
Content-Type: text/html
Content-Length: 26
Date: Wed, 23 May 2007 23:04:24 GMT
Connection: close



File contents=[
abcd

]","certain condit resourc cach implement use servlet jsp engin apach name resourc detect file cach modifi therefor return previou content file happen file content modifi file length doesn chang time first chang file detect server startup reproduc problem put attach jsp txt root web app follow use tomcat trunk cat txt abcd telnet tri connect escap charact get jsp http http ok server apach coyot set cooki jsessionid 706 d6 e8 b06687509 d42 e79 e266 706d6fe8b06687509d42e79dbee266ef path content type text html content length date wed may gmt connect close file content abcd connect close foreign host cat txt chang content size efgh telnet tri connect escap charact get jsp http http ok server apach coyot set cooki jsessionid b144247 b747 f54184114 a82869 e14 2b144247b747f54184114fa82869de14 path content type text html content length date wed may gmt connect close file content abcd","""java/org/apache/naming/resources/FileDirContext.java""","2","2","2","1","20","1","8","9","3","0","2","43","43","43","9","43","0","0","3","40","1130","219","422","134","256","492","185","296","110","186","14","14","17","9","4","1","107","107","113","64","normal"
"42547","23","Mark Emlyn David Thomas","Port fix for bug 42547. Fix NPE when a ResourceLink tries to override an env-entry.","Bug 42547  Same env-entry (web.xml) and ResourceLink (context) names causes NPE","env entri enventri web xml resourc link resourcelink context name caus npe","Having the following in web.xml:

  <env-entry>
    <env-entry-name>testIt</env-entry-name>
    <env-entry-type>java.lang.String</env-entry-type>
    <env-entry-value>test</env-entry-value>
  </env-entry>

and the following in your context descriptor:

  <ResourceLink name=""testIt""
                global=""testIt""
                type=""java.lang.String""/>

causes an NPE on context load.

java.lang.NullPointerException
	at
org.apache.catalina.deploy.NamingResources.addEnvironment(NamingResources.java:188)
	
This assumes you have an entry for 'testIt' in the <GlobalNamingResources>
section of server.xml to link to.

This worked in 5.5.20. No longer works in 5.5.23.","follow web xml env entri enventri env entri name enventrynam test it testit env entri name enventrynam env entri type enventrytyp java lang string env entri type enventrytyp env entri valu enventryvalu env entri valu enventryvalu env entri enventri follow context descriptor resourc link resourcelink name test it testit global test it testit type java lang string caus npe context load java lang null pointer except nullpointerexcept apach catalina deploy name resourc namingresourc add environ addenviron name resourc namingresourc java assum entri test it testit global name resourc globalnamingresourc section server xml link work longer work","""java/org/apache/catalina/deploy/NamingResources.java""","1","1","1","1","14","2","7","4","1","0","0","40","40","40","12","40","0","0","0","40","792","206","330","79","189","256","133","225","77","148","3","3","3","3","2","1","59","59","59","42","normal"
"42559","0","Remy Maucherat","- 42559: I did not make equivalent modifications (the isCommitted method was not invoked on the facade).","Bug 42559  ErrorReportValve does not provide an error report","error report valv errorreportvalv provid error report","rev 535915 changed the behavior of ErrorReportValve in tomcat6 to not produce an
error report when response.sendError() is called. For example, using this code
in a servlet's service() does not produce an error report:

response.sendError(HttpServletResponse.SC_GONE, ""error occurred"");

The underlying cause is that the valve's check for response.isCommitted() was
replaced with response.isAppCommitted().  The latter returns true, which causes
the Valve's invoke() method to immediately return instead of producing the report.","rev chang behavior error report valv errorreportvalv tomcat6 produc error report respons send error senderror call exampl use code servlet servic produc error report respons send error senderror http servlet respons httpservletrespons sc gone error occur underli caus valv check respons is commit iscommit replac respons is app commit isappcommit latter return true caus valv invok method immedi return instead produc report","""java/org/apache/catalina/valves/ErrorReportValve.java""","6","6","6","1","50","6","35","8","1","0","2","4","4","4","0","4","0","0","2","2","291","56","159","36","116","76","99","118","32","86","13","13","15","3","3","0","24","24","27","6","regression"
"42579","674","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=42579 Handle both relative and absolute search results Patch provided by Brandon DuRette","Bug 42579  [Patch] JNDIRealm fails to parse absolute names","patch realm jndirealm fail pars absolut name","Active Directory can respond to a query with SearchResult's that are not
relative.  We discovered this happening with a directory hosted across many
servers when the userBase was not sufficient to identify a single server.

In getUserBySearch, JNDIRealm assumes that the SearchResult is relative and goes
about creating a DN for the user by appending together the various bits of names
it gets back.  This is definitely wrong for absolute names which are URL's of
the form:  ldap://server/encoded_user_dn

I discovered this issue in Tomcat 5.5 and a cursory look at the SVN repo for
Tomcat 6.0 reveals that this bug is also present there.  

I have a patch for this issue which I will attach.","activ directori respond queri search result searchresult rel discov happen directori host across mani server user base userbas suffici identifi singl server get user by search getuserbysearch realm jndirealm assum search result searchresult rel go creat dn user append togeth variou bit name get back definit wrong absolut name url form ldap server encod user dn discov issu tomcat cursori look svn repo tomcat reveal present patch issu attach","""java/org/apache/catalina/realm/JNDIRealm.java""","3","2","3","1","22","3","11","7","2","0","3","73","73","73","32","73","1","3","21","48","2188","461","911","273","609","818","456","671","238","433","21","21","24","9","7","1","222","218","243","117","normal"
"42643","4","Mark Emlyn David Thomas","Port fix bug 42643. Prevent creation of duplicate function mapper variables. Fix various compiler warnings.","Bug 42643  Duplicate JSP function mapper variables","duplic jsp function mapper variabl","When we deploy ~20 or so web apps at a time, we invariably end up with an app or
two on each server that has compilation errors due to code generated like this:

static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_0;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_1;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_2;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_3;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_4;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_5;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_6;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_7;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_0;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_1;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_2;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_3;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_4;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_5;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_6;
static private org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_7;

This looks like it might be as simple as unsynchronized access to the static
'currFunc' in ELFunctionMapper, but I'm far from an expert on this code and
unfortunately lack the time to become one. :)

This only appears to happen when we mass-deploy apps, and we can resolve it by
deleting the generated .java file and manually restarting the affected app.","deploy web app time invari app two server compil error due code gener like static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap static privat apach jasper runtim protect function mapper protectedfunctionmapp jspx fnmap look like might simpl unsynchron access static curr func currfunc function mapper elfunctionmapp far expert code unfortun lack time becom one appear happen mass deploy massdeploy app resolv delet gener java file manual restart affect app","""java/org/apache/jasper/compiler/ELFunctionMapper.java""","2","2","2","1","13","1","11","1","3","1","1","16","16","15","6","16","0","4","0","12","283","38","183","55","114","64","106","146","58","88","12","12","12","5","5","0","37","37","40","23","major"
"42673","512","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=42673 Correctly handle includes with multi-level contexts Patch provided by Peter Jodeleit","Bug 42673  SSI virtual include broken for context path with slashes","ssi virtual includ broken context path slash","If the context path of an application contains slashes (e.g. ""a/b"") the method
getPathWithoutContext of class
org.apache.catalina.ssi.SSIServletExternalResolver simply cuts from the second
slash, so for url ""/a/b/do?.."" it tries to include ""b/do?.."" instead of ""do?.."".

The patch is to include the context path and strip the path off:

Line 419
String noContext = getPathWithoutContext(normContext.getContextPath(), normalized);

Line 356ff
protected String getPathWithoutContext(final String contextPath, final String
servletPath) {
   if (servletPath.startsWith(contextPath)) {
      return servletPath.substring(contextPath.length());
    }
    return servletPath;
}","context path applic contain slash method get path without context getpathwithoutcontext class apach catalina ssi servlet extern resolv ssiservletexternalresolv simpli cut second slash url tri includ instead patch includ context path strip path line string no context nocontext get path without context getpathwithoutcontext norm context normcontext get context path getcontextpath normal line 356ff protect string get path without context getpathwithoutcontext final string context path contextpath final string servlet path servletpath servlet path servletpath start with startswith context path contextpath return servlet path servletpath substr context path contextpath length return servlet path servletpath","""java/org/apache/catalina/ssi/SSIServletExternalResolver.java""","4","4","5","1","18","0","17","1","2","0","0","24","24","24","9","24","0","0","12","12","574","58","459","132","306","59","199","319","108","211","62","62","62","6","6","0","118","118","124","32","normal"
"42678","390","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=42678 Only ignore docBase it it really is a subdir of appBase Patch provided by juergen","Bug 42678  docBase ignored even if its not a subdir of appBase","doc base docbas ignor even subdir app base appbas","I use latest 6.0 SVN snapshot. I store deployable WARs in ""webapps-dist"" (aside
""webapps""). This is my setup:

bash-3.2$ ls $CATALINA_BASE 
conf  logs  temp  tomcat-dist  webapps  webapps-dist  work
bash-3.2$ ls  webapps-dist
sample.war
bash-3.2$ cat conf/Catalina/localhost/sample.xml
<Context docBase=""${catalina.base}/webapps-dist/sample.war""/>

this ends up in: 

WARNUNG: A docBase /home/juergen/java/tomcat/webapps-dist/sample.war inside the
host appBase has been specified, and will be ignored","use latest svn snapshot store deploy war webapp dist webappsdist asid webapp setup bash l catalina base conf log temp tomcat dist tomcatdist webapp webapp dist webappsdist work bash l webapp dist webappsdist sampl bash cat conf catalina localhost sampl xml context doc base docbas catalina base webapp dist webappsdist sampl end warnung doc base docbas home juergen java tomcat webapp dist webappsdist sampl insid host app base appbas specifi ignor","""java/org/apache/catalina/startup/HostConfig.java""","4","4","4","1","24","2","17","5","2","1","3","43","43","42","16","43","0","0","18","25","1348","224","804","188","572","320","392","581","183","398","30","30","37","7","7","0","185","185","200","79","minor"
"42693","524","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=42693 I want to do some more testing before proposing this one","Bug 42693  JSP-Generation error with recursive tagfile structure","jsp gener error recurs tagfil structur","addendum: it's Version 6.13 (not available in combobox above)

scenario:
=========
a menu is decribed by a tree structure;
rendering the menu is done by a tagfile 'render_menuitem', which renders the
current item either as a leaf item (clicking on it causes an action) or as a
node item (clicking on it opens another next-level submenu);
rendering the submenu is done by calling the tagfile again from within its body;
this worked fine with tomcat 5.0.x and 5.5.x

to make it clear see the following pseudo code (the original code is to
voluminous): 
tagfile 'render_menuitem.tagx':
<jsp:root ...>
   <jsp:directive.attribute name=""menu_item""/>
   <c:choose>
      <c:when test=""${menu_item.isNode}
         <div>node: ${menu_item.label}</div>
         <c:forEach var=""sub_item"" items=""menu_item.children"">
            <!-- THIS IS GOING TO CAUSE THE PROBLEM WITH TOMCAT6: -->
            <tags:render_menuitem menu_item=""${sub_item}""/>
         </c:forEach>
      <c:when>
      <c:otherwise>
         <div>leaf: ${menu_item.label}</div>
      </c:otherwise>
   </c:choose>
</jsp:root>

faulty behaviour:
================
with tomcat 6.0.13, the generated Java-Source for the tagfile reveals, that the
body of the doTag() method is empty and therefore emits no html; the compilation
itself was silently done, no error or warning was shown in the logfiles.","addendum version avail combobox scenario menu decrib tree structur render menu done tagfil render menuitem render current item either leaf item click caus action node item click open anoth next level nextlevel submenu render submenu done call tagfil within bodi work fine tomcat make clear see follow pseudo code origin code volumin tagfil render menuitem tagx jsp root jsp direct attribut name menu item choos menu item is node isnod div node menu item label div for each foreach sub item item menu item child go caus problem t6 tomcat6 tag render menuitem menu item sub item for each foreach otherwis div leaf menu item label div otherwis choos jsp root faulti behaviour tomcat gener java sourc tagfil reveal bodi do tag dotag method empti therefor emit html compil silent done error warn shown logfil","""java/org/apache/jasper/compiler/Compiler.java""","4","4","4","2","32","3","20","8","1","0","0","14","15","15","8","15","0","1","2","12","542","78","316","79","206","148","152","217","71","146","18","18","20","13","3","0","63","63","65","28","critical"
"42707","507","Mark Emlyn David Thomas","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=42707 I debated adding the addContainerListener() meethod to JMX. I'll leave it a little while for people to comment on this (or anything else) before I propose this one for 6.0.x.","Bug 42707  add host alias using jmx doesn't take affect until restart","add host alia use jmx doesn take affect restart","","","""java/org/apache/catalina/connector/MapperListener.java""","5","5","5","2","29","3","22","3","1","0","1","14","14","14","5","14","0","6","0","8","521","88","347","110","235","90","158","233","91","142","22","22","28","7","5","0","74","74","83","32","normal"
"42707","507","Mark Emlyn David Thomas","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=42707 I debated adding the addContainerListener() meethod to JMX. I'll leave it a little while for people to comment on this (or anything else) before I propose this one for 6.0.x.","Bug 42707  add host alias using jmx doesn't take affect until restart","add host alia use jmx doesn take affect restart","","","""java/org/apache/tomcat/util/http/mapper/Mapper.java""","4","4","5","2","27","1","21","5","6","12","1","39","39","27","18","39","0","17","3","19","1397","197","865","241","593","338","437","638","224","414","21","21","31","11","6","0","192","192","212","100","normal"
"42722","384","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=42722 Possible NPE in CGIServlet.java Patch provided by Nils Hammar","Bug 42722  Potential NullPointerException in org.apache.catalina.servlets.CGIServlet","potenti null pointer except nullpointerexcept apach catalina servlet servlet cgiservlet","","","""java/org/apache/catalina/servlets/CGIServlet.java""","4","4","5","1","43","4","25","14","5","1","7","33","33","32","24","33","1","3","24","5","1917","271","915","212","692","742","518","655","195","460","23","23","26","6","5","1","146","141","169","42","normal"
"42727","390","Mark Emlyn David Thomas","Fix bug 42727. Handle request lines that are exact multiples of 4096 in length. Patch provided by Will Pugh.","Bug 42727  CoyoteReader readLine returns null for some post request bodies that are a multiple of MAX_LINE_LENGTH in size","coyot reader coyoteread read line readlin return null post request bodi multipl max line length size","","","""java/org/apache/catalina/connector/CoyoteReader.java""","2","2","2","1","9","0","8","0","1","0","2","13","13","13","2","13","1","0","1","11","208","57","118","39","61","33","51","79","29","50","15","15","17","5","5","0","27","27","29","17","normal"
"42750","327","Mark Emlyn David Thomas","Note: This patch is on the critical path. Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=42750 Making parsing of the request line tolerant of multiple SP and/or HT rather than requiring single SP characters.","Bug 42750  Http Post requests not handled correctly if there is more than one space between the ""POST"" and the URL","http post request handl correctli one space post url","","","""java/org/apache/coyote/http11/InternalAprInputBuffer.java""","4","4","5","1","33","6","19","7","2","0","1","18","18","18","14","18","0","0","1","17","808","214","385","80","257","209","203","293","74","219","26","26","29","6","4","1","89","89","100","34","normal"
"42750","327","Mark Emlyn David Thomas","Note: This patch is on the critical path. Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=42750 Making parsing of the request line tolerant of multiple SP and/or HT rather than requiring single SP characters.","Bug 42750  Http Post requests not handled correctly if there is more than one space between the ""POST"" and the URL","http post request handl correctli one space post url","","","""java/org/apache/coyote/http11/InternalInputBuffer.java""","4","4","4","1","31","6","17","7","2","0","1","18","18","18","13","18","0","0","1","17","762","216","340","75","224","206","178","259","68","191","25","25","29","4","4","1","80","80","88","26","normal"
"42750","327","Mark Emlyn David Thomas","Note: This patch is on the critical path. Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=42750 Making parsing of the request line tolerant of multiple SP and/or HT rather than requiring single SP characters.","Bug 42750  Http Post requests not handled correctly if there is more than one space between the ""POST"" and the URL","http post request handl correctli one space post url","","","""java/org/apache/coyote/http11/InternalNioInputBuffer.java""","3","3","4","2","23","2","15","5","5","0","1","29","25","29","32","29","0","2","1","26","908","176","488","98","326","253","266","380","93","287","32","32","35","23","5","1","115","115","127","76","normal"
"42753","2","Filip Hanik","Bugzilla 42753 Same fix as 6.0 branch","Bug 42753  Race condition when using available() or reading in CometProcessor.event()","race condit use avail read comet processor cometprocessor event","Tomcat version: 6.0.13 (no 6.0.13 available in the version field)

When trying to process data in CometProcessor.event() either during the BEGIN
event or during the READ event, it is impossible to guarantee that all data has
been read before returning (since new data may arrive between the last statement
before the return, and the return statement itself). However, the
CoyoteProcessor does this check:

 } else if (!error && read && request.getAvailable()) {
    // If this was a read and not all bytes have been read, or if no data
    // was read from the connector, then it is an error
    error = true;
    log.error(sm.getString(""coyoteAdapter.read""));
 } 

causing a severe error and the Comet request to break when this race condition
manifests itself.

I am using the following code according to the aio.html description to read data
in my comet event handler:

  while (request.getInputStream().available() > 0) {
     // read some data
  }
  // ***** NO MORE DATA AVAILABLE
  return;

And I am experiencing the error as described in certain conditions (rapid
arrival of fragmented data):

SEVERE: The servlet did not read all available bytes during the processing of
the read event","tomcat version avail version field tri process data comet processor cometprocessor event either begin event read event imposs guarante data read return sinc new data may arriv last statement return return statement howev coyot processor coyoteprocessor check els error read request get avail getavail read byte read data read connector error error true log error sm get string getstr coyot adapt coyoteadapt read caus sever error comet request break race condit manifest use follow code accord aio html descript read data comet event handler request get input stream getinputstream avail read data data avail return experienc error describ certain condit rapid arriv fragment data sever servlet read avail byte process read event","""java/org/apache/catalina/core/ApplicationFilterFactory.java""","7","7","12","6","44","4","31","10","1","1","11","7","7","6","0","7","0","5","0","2","404","63","245","54","177","101","103","153","51","102","23","23","37","11","3","0","55","52","87","42","normal"
"42934","296","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=42934 Trigger contextInitialized() before sessionDidActivate() TCK tests all pass but I want to give this a little longer in trunk before proposing it for 6.0.x","Bug 42934  sessionDidActivate() called before contextInitialized()","session did activ sessiondidactiv call context initi contextiniti","I'm using Seam and a Seam app depends upon the Seam application being
initialized before you can do much of anything in Seam.

That said Seam puts some hooks into the sessionDidActivate() and
sessionDidPassivate() events.  Because of that when I start up my app
I'm getting a Seam IllegalStateException because the
contextInitialized() event is fired after sessionDidActivate() so Seam
is not yet initialized it's Session hooks are being fired.

What makes me think this is a bug is that sessionWillPassivate() is being
correctly called before contextDestroyed() so it would seem that
sessionDidActivate() being called before contextInitialized() would be
inconsistent behavior.

So to sum up I think tomcat should fire context and session events in the
following order:

contextInitialized
sessionDidActivate
sessionWillPassivate
contextDestroyed


As a side note Tomcat 5 follows what I think is the completely wrong but
consistent order by firing events in this order:

sessionDidActivate
contextInitialized
contextDestroyed
sessionWillPassivate","use seam seam app depend upon seam applic initi much anyth seam said seam put hook session did activ sessiondidactiv session did passiv sessiondidpassiv event start app get seam illeg state except illegalstateexcept context initi contextiniti event fire session did activ sessiondidactiv seam yet initi session hook fire make think session will passiv sessionwillpassiv correctli call context destroy contextdestroy would seem session did activ sessiondidactiv call context initi contextiniti would inconsist behavior sum think tomcat fire context session event follow order context initi contextiniti session did activ sessiondidactiv session will passiv sessionwillpassiv context destroy contextdestroy side note tomcat follow think complet wrong consist order fire event order session did activ sessiondidactiv context initi contextiniti context destroy contextdestroy session will passiv sessionwillpassiv","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","17","2","10","4","1","0","3","260","260","260","90","260","0","13","7","240","5621","1193","2826","721","1835","1611","1340","2052","722","1330","61","61","79","9","5","1","646","646","696","333","normal"
"42943","293","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=42943 Make sure the nested element is inside a <jsp:text> element","Bug 42943  jsp:text gets confused with other *:text elements in a JSP tag file","jsp text get confus text element jsp tag file","","","""java/org/apache/jasper/compiler/JspDocumentParser.java""","5","5","6","1","38","2","34","2","2","3","4","30","30","27","17","30","1","12","0","17","1444","123","1076","188","814","253","329","496","140","356","39","39","45","12","5","0","169","169","205","50","normal"
"42944","15","Mark Emlyn David Thomas","Port fix for bug 42944. + should only decoded to space in query strings.","Bug 42944  plus sign in url-pattern in servlet-mapping does not work","plu sign url pattern urlpattern servlet map servletmap work","Hi all,

I had servlet-mappings that contain plus signs (they were created by JspC), e.g.:

    <servlet-mapping>
      <servlet-name>org.apache.jsp.suchergebnis_005fbu_002bbb_jsp</servlet-name>
      <url-pattern>/suchergebnis_bu+bb.jsp</url-pattern>
    </servlet-mapping>

This mapping does not work (the referred class is present)! When I change the
original file names of the JSPs such that the plus signs are replaced by a minus
signs the following mapping results:

    <servlet-mapping>
      <servlet-name>org.apache.jsp.suchergebnis_005fbu_002dbb_jsp</servlet-name>
      <url-pattern>/suchergebnis_bu-bb.jsp</url-pattern>
    </servlet-mapping>

Now the mapping works.

Therefore I assume that there is a bug in handling servlet mappings with plus
signs in their url pattern.","hi servlet map servletmap contain plu sign creat jsp jspc servlet map servletmap servlet name servletnam apach jsp suchergebni 005fbu 002bbb jsp servlet name servletnam url pattern urlpattern suchergebni bb jsp url pattern urlpattern servlet map servletmap map work refer class present chang origin file name jsp plu sign replac minu sign follow map result servlet map servletmap servlet name servletnam apach jsp suchergebni 005fbu 002dbb jsp servlet name servletnam url pattern urlpattern suchergebni bu bb bubb jsp url pattern urlpattern servlet map servletmap map work therefor assum handl servlet map plu sign url pattern","""java/org/apache/catalina/util/RequestUtil.java""","5","4","5","2","31","2","18","11","1","10","1","10","10","0","0","10","0","2","0","8","388","59","193","41","141","139","94","140","38","102","11","11","11","10","4","1","51","45","56","25","normal"
"43080","268","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43080 and https://issues.apache.org/bugzilla/show_bug.cgi?id=43079 Move warning to StandardContext so a) we can check all url-patterns and b) we associate the message with the context.","Bug 43080  Suspicious url pattern warning logged to wrong webapp","suspici url pattern warn log wrong webapp","""Suspicious url pattern"" warnings are logged to the wrong webapp, not the one
actually using them.

These log events are coming from SecurityCollection.java.","suspici url pattern warn log wrong webapp one actual use log event come secur collect securitycollect java","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","17","2","10","4","1","0","3","259","259","259","90","259","0","12","7","240","5603","1191","2814","720","1827","1607","1337","2046","721","1325","61","61","79","9","5","1","643","643","691","332","normal"
"43080","268","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43080 and https://issues.apache.org/bugzilla/show_bug.cgi?id=43079 Move warning to StandardContext so a) we can check all url-patterns and b) we associate the message with the context.","Bug 43080  Suspicious url pattern warning logged to wrong webapp","suspici url pattern warn log wrong webapp","""Suspicious url pattern"" warnings are logged to the wrong webapp, not the one
actually using them.

These log events are coming from SecurityCollection.java.","suspici url pattern warn log wrong webapp one actual use log event come secur collect securitycollect java","""java/org/apache/catalina/deploy/SecurityCollection.java""","2","2","2","1","14","2","7","4","1","0","1","16","16","16","4","16","0","0","0","16","349","94","136","36","82","120","76","118","44","74","7","7","7","4","3","1","41","41","41","27","normal"
"43142","258","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43142 If someone is daft enough to name their directory xxx.war, don't assume it is a war file.","Bug 43142  webapp expanded in a FOLDER named webapps/xxx.war is loaded TWICE","webapp expand folder name webapp xxx load twice","reproduce: copy the expanded of file xxx.war file in a FOLDER 
tomcat/webapps/xxx.war

bug: tomcat will load the app TWICE","reproduc copi expand file xxx file folder tomcat webapp xxx tomcat load app twice","""java/org/apache/catalina/startup/HostConfig.java""","4","4","4","1","24","2","17","5","2","1","3","43","43","42","16","43","0","0","18","25","1340","224","799","181","574","317","394","580","183","397","30","30","37","7","7","0","185","185","199","79","minor"
"43150","259","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43150 # in installation path stops Tomcat starting","Bug 43150  Tomcat and path with pound sign (#) -> ClassNotFoundException","tomcat path pound sign class not found except classnotfoundexcept","Tomcat will not start if it's located and launched from a path with a # (pound)
character somewhere. You'll find all informations in the given mail-thread on
tomcat-user, including some developer specific informations.

One part of the problem is the usage of File.toURL in URLClassloader...

I'd really appreciate it if this problem could be fixed/worked around (see
mail-thread for hints).

btw. the same applies to version 5.5 and probably earlier versions too.

thanks!","tomcat start locat launch path pound charact somewher ll find inform given mail thread mailthread tomcat user tomcatus includ develop specif inform one part problem usag file to tourl classload urlclassload realli appreci problem could fix work around see mail thread mailthread hint btw appli version probabl earlier version thank","""java/org/apache/catalina/startup/ClassLoaderFactory.java""","12","12","15","7","63","3","41","18","1","3","5","3","3","0","0","3","0","0","0","3","260","31","139","50","104","90","83","120","46","74","22","22","30","13","5","1","36","36","47","23","normal"
"43150","259","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43150 # in installation path stops Tomcat starting","Bug 43150  Tomcat and path with pound sign (#) -> ClassNotFoundException","tomcat path pound sign class not found except classnotfoundexcept","Tomcat will not start if it's located and launched from a path with a # (pound)
character somewhere. You'll find all informations in the given mail-thread on
tomcat-user, including some developer specific informations.

One part of the problem is the usage of File.toURL in URLClassloader...

I'd really appreciate it if this problem could be fixed/worked around (see
mail-thread for hints).

btw. the same applies to version 5.5 and probably earlier versions too.

thanks!","tomcat start locat launch path pound charact somewher ll find inform given mail thread mailthread tomcat user tomcatus includ develop specif inform one part problem usag file to tourl classload urlclassload realli appreci problem could fix work around see mail thread mailthread hint btw appli version probabl earlier version thank","""java/org/apache/jasper/JspCompilationContext.java""","2","2","2","1","10","0","7","2","1","2","1","54","54","52","30","54","0","0","6","48","743","95","478","144","257","170","216","327","129","198","13","11","17","9","6","0","117","115","125","64","normal"
"43191","254","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43191 No way to turn off compression for some file types. Based on a patch by Len Popp","Bug 43191  compressableMimeType attribute ignored","compress mime type compressablemimetyp attribut ignor","I have set compression=""on"" and compressableMimeType=""text/html"" in server.xml.
It appears that the value of compressableMimeType is being ignored. My XML
responses are all coming back gzipped. If I switch to compression=""off"" the
responses are not gzipped, but as soon as I turn it on, regardless of the value
of compressableMimeType, the XML responses are coming back gzipped.

A full Connector tag follows. Note that this is just an example -- I have tried
many values for compressableMimeType (that do NOT include text/xml) and the
responses are still compressed.

      <Connector port=""7630"" address=""${jboss.bind.address}""
         maxThreads=""20"" minSpareThreads=""4"" maxSpareThreads=""10"" strategy=""ms""
maxHttpHeaderSize=""8192""
         emptySessionPath=""true"" enableLookups=""false"" redirectPort=""7643""
acceptCount=""16""
         connectionTimeout=""20000"" disableUploadTimeout=""true""
         compression=""off""
        
compressableMimeType=""text/html,text/javascript,application/x-javascript,application/javascript""
/>","set compress compress mime type compressablemimetyp text html server xml appear valu compress mime type compressablemimetyp ignor xml respons come back gzip switch compress respons gzip soon turn regardless valu compress mime type compressablemimetyp xml respons come back gzip full connector tag follow note exampl tri mani valu compress mime type compressablemimetyp includ text xml respons still compress connector port address jboss bind address max thread maxthread min spare thread minsparethread max spare thread maxsparethread strategi m max http header size maxhttpheaders empti session path emptysessionpath true enabl lookup enablelookup fals redirect port redirectport accept count acceptcount connect timeout connectiontimeout disabl upload timeout disableuploadtimeout true compress compress mime type compressablemimetyp text html text javascript applic javascript xjavascript applic javascript","""java/org/apache/coyote/http11/Http11AprProcessor.java""","4","4","5","2","29","3","19","7","1","0","2","47","47","47","34","47","0","4","7","36","1779","318","1003","229","730","469","543","762","232","530","51","51","60","10","5","0","227","225","271","94","normal"
"43191","254","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43191 No way to turn off compression for some file types. Based on a patch by Len Popp","Bug 43191  compressableMimeType attribute ignored","compress mime type compressablemimetyp attribut ignor","I have set compression=""on"" and compressableMimeType=""text/html"" in server.xml.
It appears that the value of compressableMimeType is being ignored. My XML
responses are all coming back gzipped. If I switch to compression=""off"" the
responses are not gzipped, but as soon as I turn it on, regardless of the value
of compressableMimeType, the XML responses are coming back gzipped.

A full Connector tag follows. Note that this is just an example -- I have tried
many values for compressableMimeType (that do NOT include text/xml) and the
responses are still compressed.

      <Connector port=""7630"" address=""${jboss.bind.address}""
         maxThreads=""20"" minSpareThreads=""4"" maxSpareThreads=""10"" strategy=""ms""
maxHttpHeaderSize=""8192""
         emptySessionPath=""true"" enableLookups=""false"" redirectPort=""7643""
acceptCount=""16""
         connectionTimeout=""20000"" disableUploadTimeout=""true""
         compression=""off""
        
compressableMimeType=""text/html,text/javascript,application/x-javascript,application/javascript""
/>","set compress compress mime type compressablemimetyp text html server xml appear valu compress mime type compressablemimetyp ignor xml respons come back gzip switch compress respons gzip soon turn regardless valu compress mime type compressablemimetyp xml respons come back gzip full connector tag follow note exampl tri mani valu compress mime type compressablemimetyp includ text xml respons still compress connector port address jboss bind address max thread maxthread min spare thread minsparethread max spare thread maxsparethread strategi m max http header size maxhttpheaders empti session path emptysessionpath true enabl lookup enablelookup fals redirect port redirectport accept count acceptcount connect timeout connectiontimeout disabl upload timeout disableuploadtimeout true compress compress mime type compressablemimetyp text html text javascript applic javascript xjavascript applic javascript","""java/org/apache/coyote/http11/Http11NioProcessor.java""","4","4","5","2","28","3","19","6","1","0","2","49","49","49","36","49","0","4","7","38","1809","321","1017","231","743","486","543","775","232","543","52","52","59","24","7","0","242","240","284","115","normal"
"43191","254","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43191 No way to turn off compression for some file types. Based on a patch by Len Popp","Bug 43191  compressableMimeType attribute ignored","compress mime type compressablemimetyp attribut ignor","I have set compression=""on"" and compressableMimeType=""text/html"" in server.xml.
It appears that the value of compressableMimeType is being ignored. My XML
responses are all coming back gzipped. If I switch to compression=""off"" the
responses are not gzipped, but as soon as I turn it on, regardless of the value
of compressableMimeType, the XML responses are coming back gzipped.

A full Connector tag follows. Note that this is just an example -- I have tried
many values for compressableMimeType (that do NOT include text/xml) and the
responses are still compressed.

      <Connector port=""7630"" address=""${jboss.bind.address}""
         maxThreads=""20"" minSpareThreads=""4"" maxSpareThreads=""10"" strategy=""ms""
maxHttpHeaderSize=""8192""
         emptySessionPath=""true"" enableLookups=""false"" redirectPort=""7643""
acceptCount=""16""
         connectionTimeout=""20000"" disableUploadTimeout=""true""
         compression=""off""
        
compressableMimeType=""text/html,text/javascript,application/x-javascript,application/javascript""
/>","set compress compress mime type compressablemimetyp text html server xml appear valu compress mime type compressablemimetyp ignor xml respons come back gzip switch compress respons gzip soon turn regardless valu compress mime type compressablemimetyp xml respons come back gzip full connector tag follow note exampl tri mani valu compress mime type compressablemimetyp includ text xml respons still compress connector port address jboss bind address max thread maxthread min spare thread minsparethread max spare thread maxsparethread strategi m max http header size maxhttpheaders empti session path emptysessionpath true enabl lookup enablelookup fals redirect port redirectport accept count acceptcount connect timeout connectiontimeout disabl upload timeout disableuploadtimeout true compress compress mime type compressablemimetyp text html text javascript applic javascript xjavascript applic javascript","""java/org/apache/coyote/http11/Http11Processor.java""","4","4","5","1","27","2","17","6","2","0","2","48","48","48","34","48","0","4","7","37","1688","311","929","211","670","460","484","693","213","480","44","44","50","10","4","1","215","213","253","88","normal"
"43216","2","Peter Rossbach","Fix bug 43216: Set correct StandardSession#accessCount as StandardSession.ACTIVITY_CHECK is true.","Bug 43216  ACTIVITY_CHECK does not work correctly when Tomcat is restarted","activ check work correctli tomcat restart","","","""java/org/apache/catalina/session/StandardManager.java""","3","3","4","1","22","2","14","5","3","0","2","25","25","25","6","25","2","0","3","20","754","133","410","100","275","211","196","290","95","195","26","26","27","4","3","1","99","99","104","28","normal"
"43236","111","Mark Emlyn David Thomas","Fix bug 43236. Reset the usingWriter and associated flags when the response is reset.","Bug 43236  Response.setCharacterEncoding() fails after Response.getWriter() and Response.reset()","respons set charact encod setcharacterencod fail respons get writer getwrit respons reset","The class org.apache.catalina.connector.Response

resets the internal hold coyoteResponse and outputBuffer during reset():

    public void reset() {
        if (included)
            return;     // Ignore any call from an included servlet
        coyoteResponse.reset();
        outputBuffer.reset();
    }

but if anyone has already set the characterEncoding (e.g. to UTF-8) and already
got the writer, than all following invocations of request.setCharacterEncoding()
will do nothing, because the internal save flag for usingWriter is not reseted.
This is very annoying, because the coyoteResponse.reset(), resets the
characterEncoding to iso8859-1. So I have no change to change/reset the
charaterEncoding to UTF-8.
I'll think if you reset the response, you should also reset the usingWriter flag
or add another special flag, that works with this circumstances.","class apach catalina connector respons reset intern hold coyot respons coyoterespons output buffer outputbuff reset public void reset includ return ignor call includ servlet coyot respons coyoterespons reset output buffer outputbuff reset anyon alreadi set charact encod characterencod utf alreadi got writer follow invoc request set charact encod setcharacterencod noth intern save flag use writer usingwrit reset annoy coyot respons coyoterespons reset reset charact encod characterencod iso8859 chang chang reset charat encod charaterencod utf ll think reset respons reset use writer usingwrit flag add anoth special flag work circumst","""java/org/apache/catalina/connector/Response.java""","2","2","2","1","15","1","8","5","4","0","2","79","79","79","17","79","0","3","2","74","1593","335","703","187","439","558","328","511","176","335","12","12","19","8","3","1","182","182","204","127","major"
"43241","111","Mark Emlyn David Thomas","Fix bug 43241. Patch provided by John Kew.","Bug 43241  ServletContext.getResourceAsStream()  does not follow API specs for Path","servlet context servletcontext get resourc stream getresourceasstream follow api spec path","","","""java/org/apache/catalina/core/ApplicationContext.java""","2","2","3","2","19","2","11","5","2","2","2","38","38","36","9","38","1","5","4","28","974","207","480","146","319","288","246","360","140","220","12","12","13","9","3","1","113","113","120","83","normal"
"43285","115","Timothy A. Funk","http://issues.apache.org/bugzilla/show_bug.cgi?id=43285 Missing EL Coercion causes argument type mismatch","Bug 43285  Missing EL Coercion causes argument type mismatch","miss coercion caus argument type mismatch","I'll attach a sample web application reproducing the error. Note that this error
only occurs when using Tomcat 6.0.x (i.e. it works with Jetty as it uses Sun's
EL RI). Moreover it doesn't matter which JSF implementation you're using to
reproduce the error (I just wanted to mention that as it's definitely no bug in
MyFaces even though the following stack trace shows a FacesException).

The exception stack trace:
javax.faces.FacesException: Exception while calling broadcast on component :
{Component-Path : [Class: javax.faces.component.UIViewRoot,ViewId: /home.jsp][
Class: javax.faces.component.html.HtmlForm,Id: j_id_jsp_923754602_1][Class:
javax.faces.component.html.HtmlCommandButton,Id: j_id_jsp_923754602_3]}
        at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:494)
        at javax.faces.component.UICommand.broadcast(UICommand.java:105)
        at javax.faces.component.UIViewRoot._broadcastForPhase(UIViewRoot.java:292)
        at javax.faces.component.UIViewRoot.process(UIViewRoot.java:209)
        at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:117)
        at
org.apache.myfaces.lifecycle.InvokeApplicationExecutor.execute(InvokeApplicationExecutor.java:32)
        at
org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:95)
        at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:70)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:144)
        at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:263)
        at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
        at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:584)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
        at java.lang.Thread.run(Thread.java:619)
Caused by: org.apache.jasper.el.JspELException: /home.jsp(12,3)
'#{numberBean.number}' java.lang.IllegalArgumentException: argument type mismatch
        at
org.apache.jasper.el.JspValueExpression.setValue(JspValueExpression.java:94)
        at
org.apache.myfaces.event.SetPropertyActionListener.processAction(SetPropertyActionListener.java:72)
        at javax.faces.event.ActionEvent.processListener(ActionEvent.java:48)
        at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:489)
        ... 20 more
Caused by: java.lang.IllegalArgumentException: argument type mismatch
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at javax.el.BeanELResolver.setValue(BeanELResolver.java:108)
        at javax.el.CompositeELResolver.setValue(CompositeELResolver.java:68)
        at
org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.access$501(FacesCompositeELResolver.java:46)
        at
org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver$6.invoke(FacesCompositeELResolver.java:132)
        at
org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.invoke(FacesCompositeELResolver.java:148)
        at
org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.setValue(FacesCompositeELResolver.java:128)
        at org.apache.el.parser.AstValue.setValue(AstValue.java:114)
        at org.apache.el.ValueExpressionImpl.setValue(ValueExpressionImpl.java:249)
        at
org.apache.jasper.el.JspValueExpression.setValue(JspValueExpression.java:85)
        ... 23 more","ll attach sampl web applic reproduc error note error occur use tomcat work jetti us sun ri moreov doesn matter jsf implement re use reproduc error want mention definit my face myfac even though follow stack trace show face except facesexcept except stack trace javax face face except facesexcept except call broadcast compon compon path class javax face compon ui view root uiviewroot view id viewid home jsp class javax face compon html html form htmlform id id jsp class javax face compon html html command button htmlcommandbutton id id jsp javax face compon ui compon base uicomponentbas broadcast ui compon base uicomponentbas java javax face compon ui command uicommand broadcast ui command uicommand java javax face compon ui view root uiviewroot broadcast for phase broadcastforphas ui view root uiviewroot java javax face compon ui view root uiviewroot process ui view root uiviewroot java javax face compon ui view root uiviewroot process applic processappl ui view root uiviewroot java apach myfac lifecycl invok applic executor invokeapplicationexecutor execut invok applic executor invokeapplicationexecutor java apach myfac lifecycl lifecycl impl lifecycleimpl execut phase executephas lifecycl impl lifecycleimpl java apach myfac lifecycl lifecycl impl lifecycleimpl execut lifecycl impl lifecycleimpl java javax face webapp face servlet facesservlet servic face servlet facesservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process http11 protocol http11protocol java apach tomcat util net io endpoint jioendpoint worker run io endpoint jioendpoint java java lang thread run thread java caus apach jasper jsp except jspelexcept home jsp number bean numberbean number java lang illeg argument except illegalargumentexcept argument type mismatch apach jasper jsp valu express jspvalueexpress set valu setvalu jsp valu express jspvalueexpress java apach myfac event set properti action listen setpropertyactionlisten process action processact set properti action listen setpropertyactionlisten java javax face event action event actionev process listen processlisten action event actionev java javax face compon ui compon base uicomponentbas broadcast ui compon base uicomponentbas java caus java lang illeg argument except illegalargumentexcept argument type mismatch sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java javax bean resolv beanelresolv set valu setvalu bean resolv beanelresolv java javax composit resolv compositeelresolv set valu setvalu composit resolv compositeelresolv java apach myfac unifi resolv face composit resolv facescompositeelresolv access face composit resolv facescompositeelresolv java apach myfac unifi resolv face composit resolv facescompositeelresolv invok face composit resolv facescompositeelresolv java apach myfac unifi resolv face composit resolv facescompositeelresolv invok face composit resolv facescompositeelresolv java apach myfac unifi resolv face composit resolv facescompositeelresolv set valu setvalu face composit resolv facescompositeelresolv java apach parser ast valu astvalu set valu setvalu ast valu astvalu java apach valu express impl valueexpressionimpl set valu setvalu valu express impl valueexpressionimpl java apach jasper jsp valu express jspvalueexpress set valu setvalu jsp valu express jspvalueexpress java","""java/org/apache/el/parser/AstValue.java""","2","2","2","1","12","0","11","0","2","0","0","8","8","8","2","8","0","1","0","7","155","22","106","44","63","27","60","78","41","37","6","6","8","3","2","0","17","17","20","10","enhancement"
"43327","349","Jean-Frederic Clere","JAVA part of the #43327 fix.","Bug 43327  Socket bind fails on tomcat startup when using apr","socket bind fail tomcat startup use apr","I'm running debian sid, kernel 2.6.22 and use tomcat 6.0.14 together with apr
1.2.11. no special tomcat configuration (out of the box).
On start up of tomcat I get the following error log:

Debugging apr revealed a problem with IPV6:
apr_socket_create() assigns a AF_INET6 socket,
apr_socket_bind tries to bind a AF_INET address which fails.

INFO: Loaded Apache Tomcat Native library 1.1.10.
Sep 7, 2007 6:05:16 PM org.apache.catalina.core.AprLifecycleListener init
INFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false],
random [true].
Sep 7, 2007 6:05:16 PM org.apache.coyote.http11.Http11AprProtocol init
SEVERE: Error initializing endpoint
java.lang.Exception: Socket bind failed: [22] Invalid argument
    at org.apache.tomcat.util.net.AprEndpoint.init(AprEndpoint.java:612)
    at org.apache.coyote.http11.Http11AprProtocol.init(Http11AprProtocol.java:121)
    at org.apache.catalina.connector.Connector.initialize(Connector.java:1059)
  
regards
erik","run debian sid kernel use tomcat togeth apr special tomcat configur box start tomcat get follow error log debug apr reveal problem v6 ipv6 apr socket creat assign t6 inet6 socket apr socket bind tri bind inet address fail info load apach tomcat nativ librari sep pm apach catalina core apr lifecycl listen aprlifecyclelisten init info apr capabl pv6 ipv6 true sendfil true accept filter fals random true sep pm apach coyot http11 http11 apr protocol http11aprprotocol init sever error initi endpoint java lang except socket bind fail invalid argument apach tomcat util net apr endpoint aprendpoint init apr endpoint aprendpoint java apach coyot http11 http11 apr protocol http11aprprotocol init http11 apr protocol http11aprprotocol java apach catalina connector connector initi connector java regard erik","""java/org/apache/tomcat/util/net/AprEndpoint.java""","2","2","2","1","10","0","7","2","12","0","6","129","129","131","87","131","0","0","20","111","2022","341","1095","298","755","586","586","905","308","597","26","26","34","9","7","1","295","295","327","159","normal"
"43356","3","Filip Hanik","Backport from earlier fix http://issues.apache.org/bugzilla/show_bug.cgi?id=43356","Bug 43356  keystoreFile parameter, when specified as relative, is not treated relative to $CATALINA_BASE or catalina.base property for NioEndPoint","keystor file keystorefil paramet specifi rel treat rel catalina base catalina base properti nio end point nioendpoint","","","""java/org/apache/coyote/http11/Http11NioProtocol.java""","1","1","1","1","5","0","4","0","3","0","3","115","115","115","31","115","1","0","0","114","839","144","613","195","350","86","304","467","192","275","11","11","12","4","3","0","164","164","168","118","normal"
"43356","3","Filip Hanik","Backport from earlier fix http://issues.apache.org/bugzilla/show_bug.cgi?id=43356","Bug 43356  keystoreFile parameter, when specified as relative, is not treated relative to $CATALINA_BASE or catalina.base property for NioEndPoint","keystor file keystorefil paramet specifi rel treat rel catalina base catalina base properti nio end point nioendpoint","","","""java/org/apache/tomcat/util/net/NioEndpoint.java""","2","2","2","1","7","0","5","1","18","0","8","205","206","208","100","208","1","0","27","180","2149","313","1391","450","975","469","800","1220","464","756","22","22","24","8","6","0","428","428","467","235","normal"
"43366","228","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43366 Provide backwards compatibility for sessions command","Bug 43366  Session Statistics command in manager fails with ""Unknown command /sessions""","session statist command manag fail unknown command session","","","""java/org/apache/catalina/manager/ManagerServlet.java""","6","6","7","2","39","3","29","7","1","2","1","34","34","32","12","34","0","0","26","8","1669","216","1047","210","782","407","505","724","196","528","20","20","29","6","5","0","218","218","254","81","normal"
"43425","219","Mark Emlyn David Thomas","Fix bug https://issues.apache.org/bugzilla/show_bug.cgi?id=43425 Annotations not spec compliant. Patch provided by Dain Sundstrom.","Bug 43425  Non-compliant annotations","non compliant noncompli annot","","","""java/javax/annotation/security/DenyAll.java""","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","30","5","9","8","0","16","5","6","6","0","0","0","0","0","0","2","0","0","0","0","major"
"43425","219","Mark Emlyn David Thomas","Fix bug https://issues.apache.org/bugzilla/show_bug.cgi?id=43425 Annotations not spec compliant. Patch provided by Dain Sundstrom.","Bug 43425  Non-compliant annotations","non compliant noncompli annot","","","""java/javax/ejb/EJB.java""","0","0","0","0","0","0","0","0","1","0","0","0","4","4","0","4","4","0","0","0","34","5","13","12","0","16","9","10","10","0","0","0","0","0","0","1","0","0","0","0","major"
"43425","219","Mark Emlyn David Thomas","Fix bug https://issues.apache.org/bugzilla/show_bug.cgi?id=43425 Annotations not spec compliant. Patch provided by Dain Sundstrom.","Bug 43425  Non-compliant annotations","non compliant noncompli annot","","","""java/javax/persistence/PersistenceContext.java""","0","0","0","0","0","0","0","0","1","0","0","0","3","3","0","3","3","0","0","0","33","5","12","11","0","16","8","9","9","0","0","0","0","0","0","1","0","0","0","0","major"
"43435","1","Filip Hanik","bz http://issues.apache.org/bugzilla/show_bug.cgi?id=43435","Bug 43435  AbstractReplicatedMap.memberDisappeared is executed more than the necessity.","abstract replic map abstractreplicatedmap member disappear memberdisappear execut necess","","","""java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java""","2","2","2","1","10","0","8","1","4","0","13","110","113","113","30","113","0","2","11","100","1470","177","1061","310","671","254","565","841","306","535","20","20","23","7","5","0","281","272","328","144","normal"
"43453","0","Timothy A. Funk","bug 43453: ClassCastException at  org.apache.catalina.core.StandardContext.findStatusPage(int)","Bug 43453  ClassCastException at org.apache.catalina.core.StandardContext.findStatusPage(int)","class cast except classcastexcept apach catalina core standard context standardcontext find statu page findstatuspag int","StandardContext.java reads

    public String findStatusPage(int status) {
        return ((String) statusPages.get(new Integer(status)));
    }

This is wrong and it should be

    public String findStatusPage(int status) {
        return ((ErrorPage) statusPages.get(new Integer(status))).getLocation();
    }

Regards,
  lg","standard context standardcontext java read public string find statu page findstatuspag int statu return string statu page statuspag get new integ statu wrong public string find statu page findstatuspag int statu return error page errorpag statu page statuspag get new integ statu get locat getloc regard lg","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","17","2","10","4","1","0","3","260","260","260","90","260","0","13","7","240","5633","1197","2824","715","1846","1621","1344","2047","717","1330","60","60","79","9","5","1","644","644","692","336","normal"
"43468","113","Mark Emlyn David Thomas","Fix bug 43468. Prevent NPE.","Bug 43468  HTMLManagerServlet NullPointerException listing context","manag servlet htmlmanagerservlet null pointer except nullpointerexcept list context","Obtained the following NullPointerException, stack trace below

java.lang.NullPointerException
	org.apache.catalina.manager.HTMLManagerServlet.list(HTMLManagerServlet.java:437)
	org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:136)

Code is:

args[11] = new Integer(context.getManager().getMaxInactiveInterval()/60);

Seemingly the getManager() is returning null.","obtain follow null pointer except nullpointerexcept stack trace java lang null pointer except nullpointerexcept apach catalina manag manag servlet htmlmanagerservlet list manag servlet htmlmanagerservlet java apach catalina manag manag servlet htmlmanagerservlet do get doget manag servlet htmlmanagerservlet java code arg new integ context get manag getmanag get max inact interv getmaxinactiveinterv seemingli get manag getmanag return null","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","3","1","27","2","19","5","11","0","11","32","32","32","2","32","0","0","11","21","1124","107","793","158","638","232","363","478","155","323","16","16","20","9","4","0","114","114","127","55","normal"
"43479","15","Remy Maucherat","- 43479: Memory leak cleaning up sendfile connections (submitted by the bug reporter). - 42925: No timeout for sendfile (fix TODO item that had been forgotten).","Bug 43479  APR sendfile thread leaks memory","apr sendfil thread leak memori","The APR sendfile thread leaks memory by adding SendfileData objects to its
HashMap and failing to remove them.","apr sendfil thread leak memori ad sendfil data sendfiledata object hash map hashmap fail remov","""java/org/apache/tomcat/util/net/AprEndpoint.java""","2","2","2","1","10","0","7","2","12","0","6","129","129","131","87","131","0","0","20","111","2002","340","1081","296","744","581","576","892","305","587","26","26","34","9","7","1","292","292","322","159","normal"
"43538","1352","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43538 Add host name and IP address to the HTML Manager application. Patch by Dennis Lundberg.","Bug 43538  [patch] Show the hostname and IP address in the manager webapp","patch show hostnam ip address manag webapp","We have an environment with a couple of load-balanced Tomcats fronted by httpd.
If someone accesses the manager application through the load-balancer, they will
not know which of the load-balanced Tomcats they end up at. In these situations,
and others as well, it would be nice if the manager could tell the hostname and
IP address of the machine it is running on.","environ coupl load balanc loadbalanc tomcat front httpd someon access manag applic load balanc loadbalanc know load balanc loadbalanc tomcat situat other well would nice manag could tell hostnam ip address machin run","""java/org/apache/catalina/manager/Constants.java""","0","0","0","0","0","0","0","0","1","0","11","0","0","0","0","0","0","0","0","0","216","18","182","16","168","18","19","20","13","7","0","0","0","0","0","0","0","0","0","0","enhancement"
"43538","1352","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43538 Add host name and IP address to the HTML Manager application. Patch by Dennis Lundberg.","Bug 43538  [patch] Show the hostname and IP address in the manager webapp","patch show hostnam ip address manag webapp","We have an environment with a couple of load-balanced Tomcats fronted by httpd.
If someone accesses the manager application through the load-balancer, they will
not know which of the load-balanced Tomcats they end up at. In these situations,
and others as well, it would be nice if the manager could tell the hostname and
IP address of the machine it is running on.","environ coupl load balanc loadbalanc tomcat front httpd someon access manag applic load balanc loadbalanc know load balanc loadbalanc tomcat situat other well would nice manag could tell hostnam ip address machin run","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","30","2","22","6","11","0","16","34","34","34","2","34","0","1","19","14","1382","132","994","219","786","263","432","567","192","375","19","19","24","10","4","0","131","131","153","59","enhancement"
"43538","1352","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43538 Add host name and IP address to the HTML Manager application. Patch by Dennis Lundberg.","Bug 43538  [patch] Show the hostname and IP address in the manager webapp","patch show hostnam ip address manag webapp","We have an environment with a couple of load-balanced Tomcats fronted by httpd.
If someone accesses the manager application through the load-balancer, they will
not know which of the load-balanced Tomcats they end up at. In these situations,
and others as well, it would be nice if the manager could tell the hostname and
IP address of the machine it is running on.","environ coupl load balanc loadbalanc tomcat front httpd someon access manag applic load balanc loadbalanc know load balanc loadbalanc tomcat situat other well would nice manag could tell hostnam ip address machin run","""java/org/apache/catalina/manager/StatusManagerServlet.java""","7","7","8","1","59","7","42","9","1","0","2","4","4","4","5","4","0","0","0","4","349","62","205","61","146","82","121","152","51","101","15","15","15","1","4","0","30","30","33","4","enhancement"
"43611","50","Mark Emlyn David Thomas","Fix bug 43611. Provide an error message if user tries to upload a war for a context defined in server.xml rather than failing silently.","Bug 43611  autodeployment with unpackWARs=""true"" does not work, when a context for that war file exists in server.xml","autodeploy unpack unpackwar true work context file exist server xml","if a context for the war file exists in server.xml, the manager uploads the new
.war file, but does not expand it, if the necessary directory does not exist,
and if the directory exists, it is not overwritten, so you see the old application.

see server.xml

<Host name=""xxx"" appBase=""webapps"" unpackWARs=""true"">
        <Context path=""/yyy"">
...

if I don't have a context for yyy in server.xml, autodeploy works as expected.

Even if you say, remove context from the manager application, it is always there
in the application view, you can't remove it.

And finally, it never cleans up the work directory for the application yyy,
which I guess, is just a subsequent error of the above behaviour.","context file exist server xml manag upload new file expand necessari directori exist directori exist overwritten see old applic see server xml host name xxx app base appbas webapp unpack unpackwar true context path yyy context yyy server xml autodeploy work expect even say remov context manag applic alway applic view remov final never clean work directori applic yyy guess subsequ error behaviour","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","3","1","26","2","19","5","11","0","11","32","32","32","2","32","0","0","11","21","1118","106","788","158","634","232","361","475","155","320","16","16","20","9","4","0","113","113","125","54","null"
"43622","46","Mark Emlyn David Thomas","Fix bug 43622. Don't overwrite the min compression size set by the compression attribute with the default.","Bug 43622  compression / minCompressionSize attribute not properly implemented","compress min compress size mincompressions attribut properli implement","2 of the compression related attributes for the http connector are:

compression = on | off | force | <integer val>
The documentation states that integer val will be implemented as:
compression=""on"" and minCompressionSize = <integer val>

minCompressionSize = <integer val>
(The documentation for 5.5.12 doesnt mention this at all, but read this in the
server.xml)

The problem is that the documenation gives the impression that only setting
compression=""some integer val"" is sufficient, however the way the code is
written, the value of ""minCompressionSize"" always overrides the value specified
in the ""compression"" field. Even if minCompressionSize isnt set, it will still
get the default value of 2048 and override whatever value was there in the
""compression"" field.

I looked at the implementation of the http11 connector and found the following
code that might be the culprit:

In org.apache.coyote.http11.Http11BaseProtocol.Http11ConnectionHandler.init
    processor.setCompression( proto.compression );
    processor.setCompressionMinSize( proto.compressionMinSize);

since the ""setCompressionMinSize"" is called after compressionMinSize, its value
will override the value read from compression atttribute.


I have looked at the code for Tomcat 6.0 also, and the problems appears to still
be present.","compress relat attribut http connector compress forc integ val document state integ val implement compress min compress size mincompressions integ val min compress size mincompressions integ val document doesnt mention read server xml problem documen give impress set compress integ val suffici howev way code written valu min compress size mincompressions alway overrid valu specifi compress field even min compress size mincompressions isnt set still get default valu overrid whatev valu compress field look implement http11 connector found follow code might culprit apach coyot http11 http11 base protocol http11baseprotocol http11 connect handler http11connectionhandl init processor set compress setcompress proto compress processor set compress min size setcompressionmins proto compress min size compressionmins sinc set compress min size setcompressionmins call compress min size compressionmins valu overrid valu read compress atttribut look code tomcat problem appear still present","""java/org/apache/coyote/http11/Http11AprProtocol.java""","1","1","1","1","3","0","3","0","3","0","2","113","113","113","30","113","1","0","3","109","694","117","424","189","299","153","260","414","186","228","7","7","7","4","3","0","155","155","156","116","minor"
"43622","46","Mark Emlyn David Thomas","Fix bug 43622. Don't overwrite the min compression size set by the compression attribute with the default.","Bug 43622  compression / minCompressionSize attribute not properly implemented","compress min compress size mincompressions attribut properli implement","2 of the compression related attributes for the http connector are:

compression = on | off | force | <integer val>
The documentation states that integer val will be implemented as:
compression=""on"" and minCompressionSize = <integer val>

minCompressionSize = <integer val>
(The documentation for 5.5.12 doesnt mention this at all, but read this in the
server.xml)

The problem is that the documenation gives the impression that only setting
compression=""some integer val"" is sufficient, however the way the code is
written, the value of ""minCompressionSize"" always overrides the value specified
in the ""compression"" field. Even if minCompressionSize isnt set, it will still
get the default value of 2048 and override whatever value was there in the
""compression"" field.

I looked at the implementation of the http11 connector and found the following
code that might be the culprit:

In org.apache.coyote.http11.Http11BaseProtocol.Http11ConnectionHandler.init
    processor.setCompression( proto.compression );
    processor.setCompressionMinSize( proto.compressionMinSize);

since the ""setCompressionMinSize"" is called after compressionMinSize, its value
will override the value read from compression atttribute.


I have looked at the code for Tomcat 6.0 also, and the problems appears to still
be present.","compress relat attribut http connector compress forc integ val document state integ val implement compress min compress size mincompressions integ val min compress size mincompressions integ val document doesnt mention read server xml problem documen give impress set compress integ val suffici howev way code written valu min compress size mincompressions alway overrid valu specifi compress field even min compress size mincompressions isnt set still get default valu overrid whatev valu compress field look implement http11 connector found follow code might culprit apach coyot http11 http11 base protocol http11baseprotocol http11 connect handler http11connectionhandl init processor set compress setcompress proto compress processor set compress min size setcompressionmins proto compress min size compressionmins sinc set compress min size setcompressionmins call compress min size compressionmins valu overrid valu read compress atttribut look code tomcat problem appear still present","""java/org/apache/coyote/http11/Http11NioProtocol.java""","1","1","1","1","4","0","4","0","3","0","3","126","126","126","31","126","1","0","0","125","867","147","636","209","369","89","320","495","206","289","11","11","12","4","3","0","176","176","180","129","minor"
"43622","46","Mark Emlyn David Thomas","Fix bug 43622. Don't overwrite the min compression size set by the compression attribute with the default.","Bug 43622  compression / minCompressionSize attribute not properly implemented","compress min compress size mincompressions attribut properli implement","2 of the compression related attributes for the http connector are:

compression = on | off | force | <integer val>
The documentation states that integer val will be implemented as:
compression=""on"" and minCompressionSize = <integer val>

minCompressionSize = <integer val>
(The documentation for 5.5.12 doesnt mention this at all, but read this in the
server.xml)

The problem is that the documenation gives the impression that only setting
compression=""some integer val"" is sufficient, however the way the code is
written, the value of ""minCompressionSize"" always overrides the value specified
in the ""compression"" field. Even if minCompressionSize isnt set, it will still
get the default value of 2048 and override whatever value was there in the
""compression"" field.

I looked at the implementation of the http11 connector and found the following
code that might be the culprit:

In org.apache.coyote.http11.Http11BaseProtocol.Http11ConnectionHandler.init
    processor.setCompression( proto.compression );
    processor.setCompressionMinSize( proto.compressionMinSize);

since the ""setCompressionMinSize"" is called after compressionMinSize, its value
will override the value read from compression atttribute.


I have looked at the code for Tomcat 6.0 also, and the problems appears to still
be present.","compress relat attribut http connector compress forc integ val document state integ val implement compress min compress size mincompressions integ val min compress size mincompressions integ val document doesnt mention read server xml problem documen give impress set compress integ val suffici howev way code written valu min compress size mincompressions alway overrid valu specifi compress field even min compress size mincompressions isnt set still get default valu overrid whatev valu compress field look implement http11 connector found follow code might culprit apach coyot http11 http11 base protocol http11baseprotocol http11 connect handler http11connectionhandl init processor set compress setcompress proto compress processor set compress min size setcompressionmins proto compress min size compressionmins sinc set compress min size setcompressionmins call compress min size compressionmins valu overrid valu read compress atttribut look code tomcat problem appear still present","""java/org/apache/coyote/http11/Http11Protocol.java""","1","1","1","1","4","0","3","0","3","0","2","100","100","100","34","100","1","0","3","96","713","128","451","181","290","134","253","395","178","217","8","8","9","4","3","0","141","141","143","103","minor"
"43642","917","Jean-Frederic Clere","Fix for 43642.","Bug 43642  Add prestartminSpareThreads attribute for Executor","add prestartmin spare thread prestartminsparethread attribut executor","The attached patch adds the boolean attribute prestartminSpareThreads to the
Executor element. This allows the admin to prestart minspareThreads for this
Executor during the start of Tomcat. The default value is false which is the old
behaviour. A documentation patch for executor.xml can be created if there is
interest in committing this patch.","attach patch add boolean attribut prestartmin spare thread prestartminsparethread executor element allow admin prestart minspar thread minsparethread executor start tomcat default valu fals old behaviour document patch executor xml creat interest commit patch","""java/org/apache/catalina/core/StandardThreadExecutor.java""","1","1","1","1","4","0","4","0","1","0","0","29","29","29","10","29","0","0","2","27","266","59","144","57","62","63","65","104","52","52","4","4","4","1","3","0","44","44","44","29","enhancement"
"43701","100","Filip Hanik","Fix defect 43701","Bug 43701  Error while starting tomcat","error start tomcat","this is my NIO Connector configuration in server.xml 
<Connector acceptCount=""100"" enableLookups=""false"" port=""80""
protocol=""org.apache.coyote.http11.Http11NioProtocol"" 
      acceptorThreadCount=""2"" socket.bufferPool=""-1"" connectionTimeout=""60000""
maxKeepAliveRequests=""-1"" maxThreads=""200""
      minSpareThreads=""25"" redirectPort=""8443"" />

when I am starting my tomcat it is giving following error in the console several
time 
SEVERE: 
java.lang.NullPointerException
	at org.apache.tomcat.util.net.NioEndpoint.setSocketOptions(NioEndpoint.java:985)
	at org.apache.tomcat.util.net.NioEndpoint$Acceptor.run(NioEndpoint.java:1169)
	at java.lang.Thread.run(Thread.java:595)","nio connector configur server xml connector accept count acceptcount enabl lookup enablelookup fals port protocol apach coyot http11 http11 nio protocol http11nioprotocol acceptor thread count acceptorthreadcount socket buffer pool bufferpool connect timeout connectiontimeout max keep aliv request maxkeepaliverequest max thread maxthread min spare thread minsparethread redirect port redirectport start tomcat give follow error consol sever time sever java lang null pointer except nullpointerexcept apach tomcat util net nio endpoint nioendpoint set socket option setsocketopt nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint acceptor run nio endpoint nioendpoint java java lang thread run thread java","""java/org/apache/tomcat/util/net/NioEndpoint.java""","2","2","2","1","7","0","5","1","18","0","9","212","214","216","103","216","1","0","26","189","2217","314","1455","465","1025","478","832","1270","476","794","22","22","27","8","7","0","448","448","489","245","critical"
"43706","32","Mark Emlyn David Thomas","Fix bug 43706. Copy/move should return 201 if successful. Based on a patch by Panagiotis Astithas.","Bug 43706  Fix a litmus warning for WebdavServlet","fix litmu warn webdav servlet webdavservlet","","","""java/org/apache/catalina/servlets/WebdavServlet.java""","8","8","9","3","64","10","44","8","4","2","46","39","39","37","13","39","0","15","15","9","3172","646","1909","428","1497","621","965","1292","348","944","68","64","75","16","6","0","337","327","363","126","normal"
"43743","68","Mark Emlyn David Thomas","Fix bug 43743. Correctly handle nest tag files packaged in a jar.","Bug 43743  Cannot jspc precompile jsps with nested .tag files","cannot jspc precompil jsp nest tag file","myjsp.jsp:  HELLO <tag1/>
tag1.tag:  <tag2>
tag2.tag:  WORLD

Crashes (null pointer)  while trying to load tag2.class, called by  
TagFileProcessor.loadTagFile.

Very Initial analysis:-
TagFileProcessor.loadTagFile creates wrapper, but ctxt.getTagFileJarUrl
(tagFilePath) returns null for nested .tag.
Thus in JspCompilationContext.Compile  JspCCtx.isPackagedFile == false, so 
outDated test is wrong
So tag2.tag not compiled, thus class cannot be loaded.

But problem also appears if tags not packaged in a .jar, so there is more 
going on.

Work around is to create dummy.jsp that calls the .tags in leaf first order 
so .class files are created.","myjsp jsp hello tag1 tag1 tag tag2 tag2 tag world crash null pointer tri load tag2 class call tag file processor tagfileprocessor load tag file loadtagfil initi analysi tag file processor tagfileprocessor load tag file loadtagfil creat wrapper ctxt get tag file jar url gettagfilejarurl tag file path tagfilepath return null nest tag thu jsp compil context jspcompilationcontext compil jsp ctx jspcctx is packag file ispackagedfil fals out date outdat wrong tag2 tag compil thu class cannot load problem appear tag packag jar go work around creat dummi jsp call tag leaf first order class file creat","""java/org/apache/jasper/compiler/Parser.java""","5","5","6","2","24","1","20","2","1","2","3","57","57","55","10","57","1","54","0","2","1782","174","1219","230","898","392","579","892","211","681","20","20","22","20","5","0","315","315","358","120","normal"
"43757","29","Mark Emlyn David Thomas","Fix bug 43757. Rather than use string matching to work out the line in the JSP with the error, use the SMAP info and the knowledge that for a scriptlet there is a one to one line mapping.","Bug 43757  Improper parsing of response.sendRedirect() in JSP source","improp pars respons send redirect sendredirect jsp sourc","Tomcat is throwing a java.lang.illegalStateException due to an attempted
response.sendRedirect() after the time for such matters has come and gone...
But, this appears to be a symptom of bad .jsp parsing at runtime.

==========================

org.apache.jasper.JasperException: Exception in JSP: /buslog.jsp:42

39: // if (session.getAttribute(""isAuth"") == null) {
40: //     session.setAttribute(""messageToUser"",""Authentication failed."");
41: //        you.shouldNotParseThis();
42: //     response.sendRedirect(""./index.jsp"");
43: // }
44: 
45: // if (session.getAttribute(""isAuth"") != null) {

==============================

These lines are commented out in the source, and should not conceivably cause a
runtime error. Changing ""response.sendRedirect(...)"" to
""response.sendAbendOMG(...)"" suppresses the error. I am willing to provide the
complete source if necessary.

Build and execution environments are NetBeans 5.5.1 with bundled Tomcat 5.5.17.","tomcat throw java lang illeg state except illegalstateexcept due attempt respons send redirect sendredirect time matter gone appear symptom bad jsp pars runtim apach jasper jasper except jasperexcept except jsp buslog jsp session get attribut getattribut is auth isauth null session set attribut setattribut messag to user messagetous authent fail should not pars thi shouldnotparsethi respons send redirect sendredirect index jsp session get attribut getattribut is auth isauth null line comment sourc conceiv caus runtim error chang respons send redirect sendredirect respons send abend sendabendomg suppress error will provid complet sourc necessari build execut environ net bean netbean bundl tomcat","""java/org/apache/jasper/compiler/ErrorDispatcher.java""","1","1","1","1","10","0","7","2","2","4","0","26","26","22","4","26","0","2","0","24","602","63","210","84","102","329","83","127","60","67","8","8","9","1","3","2","42","42","46","26","normal"
"43757","29","Mark Emlyn David Thomas","Fix bug 43757. Rather than use string matching to work out the line in the JSP with the error, use the SMAP info and the knowledge that for a scriptlet there is a one to one line mapping.","Bug 43757  Improper parsing of response.sendRedirect() in JSP source","improp pars respons send redirect sendredirect jsp sourc","Tomcat is throwing a java.lang.illegalStateException due to an attempted
response.sendRedirect() after the time for such matters has come and gone...
But, this appears to be a symptom of bad .jsp parsing at runtime.

==========================

org.apache.jasper.JasperException: Exception in JSP: /buslog.jsp:42

39: // if (session.getAttribute(""isAuth"") == null) {
40: //     session.setAttribute(""messageToUser"",""Authentication failed."");
41: //        you.shouldNotParseThis();
42: //     response.sendRedirect(""./index.jsp"");
43: // }
44: 
45: // if (session.getAttribute(""isAuth"") != null) {

==============================

These lines are commented out in the source, and should not conceivably cause a
runtime error. Changing ""response.sendRedirect(...)"" to
""response.sendAbendOMG(...)"" suppresses the error. I am willing to provide the
complete source if necessary.

Build and execution environments are NetBeans 5.5.1 with bundled Tomcat 5.5.17.","tomcat throw java lang illeg state except illegalstateexcept due attempt respons send redirect sendredirect time matter gone appear symptom bad jsp pars runtim apach jasper jasper except jasperexcept except jsp buslog jsp session get attribut getattribut is auth isauth null session set attribut setattribut messag to user messagetous authent fail should not pars thi shouldnotparsethi respons send redirect sendredirect index jsp session get attribut getattribut is auth isauth null line comment sourc conceiv caus runtim error chang respons send redirect sendredirect respons send abend sendabendomg suppress error will provid complet sourc necessari build execut environ net bean netbean bundl tomcat","""org.apache.jasper.compiler.ErrorDispatcher.javacError""","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","5","1","4","2","1","0","1","2","1","1","null","null","null","null","0","0","1","1","1","1","normal"
"43757","29","Mark Emlyn David Thomas","Fix bug 43757. Rather than use string matching to work out the line in the JSP with the error, use the SMAP info and the knowledge that for a scriptlet there is a one to one line mapping.","Bug 43757  Improper parsing of response.sendRedirect() in JSP source","improp pars respons send redirect sendredirect jsp sourc","Tomcat is throwing a java.lang.illegalStateException due to an attempted
response.sendRedirect() after the time for such matters has come and gone...
But, this appears to be a symptom of bad .jsp parsing at runtime.

==========================

org.apache.jasper.JasperException: Exception in JSP: /buslog.jsp:42

39: // if (session.getAttribute(""isAuth"") == null) {
40: //     session.setAttribute(""messageToUser"",""Authentication failed."");
41: //        you.shouldNotParseThis();
42: //     response.sendRedirect(""./index.jsp"");
43: // }
44: 
45: // if (session.getAttribute(""isAuth"") != null) {

==============================

These lines are commented out in the source, and should not conceivably cause a
runtime error. Changing ""response.sendRedirect(...)"" to
""response.sendAbendOMG(...)"" suppresses the error. I am willing to provide the
complete source if necessary.

Build and execution environments are NetBeans 5.5.1 with bundled Tomcat 5.5.17.","tomcat throw java lang illeg state except illegalstateexcept due attempt respons send redirect sendredirect time matter gone appear symptom bad jsp pars runtim apach jasper jasper except jasperexcept except jsp buslog jsp session get attribut getattribut is auth isauth null session set attribut setattribut messag to user messagetous authent fail should not pars thi shouldnotparsethi respons send redirect sendredirect index jsp session get attribut getattribut is auth isauth null line comment sourc conceiv caus runtim error chang respons send redirect sendredirect respons send abend sendabendomg suppress error will provid complet sourc necessari build execut environ net bean netbean bundl tomcat","""org.apache.jasper.compiler.ErrorDispatcher.javacError""","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","5","1","4","2","1","0","1","2","1","1","null","null","null","null","0","0","1","1","1","1","normal"
"43758","62","Mark Emlyn David Thomas","Fix bug 43758. Return empty string rather than null to prevent the NPEs that happen otherwise.","Bug 43758  java.lang.NullPointerException from org.apache.jasper.compiler.ServletWriter.printMultiLn() on validation of JSPX with empty <jsp:scriptlet> element","java lang null pointer except nullpointerexcept apach jasper compil servlet writer servletwrit print multi ln printmultiln valid jspx empti jsp scriptlet element","","","""java/org/apache/jasper/compiler/Node.java""","1","1","1","1","5","0","4","0","40","0","1","299","300","300","91","300","4","2","2","292","2544","460","1542","568","627","547","641","1040","510","530","6","6","6","6","5","0","366","362","378","327","minor"
"43819","783","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43819 Implement ExpressionFactory.newInstance() and ensure that Jasper does not refer to org.apache.el directly JSP 2.1 TCK passes with these changes applied Based on a patch by Christoph Beck","Bug 43819  Support latest JSR245 proposal to make EL ""self-contained""","support latest r245 jsr245 propos make self contain selfcontain","","","""java/javax/el/ExpressionFactory.java""","1","1","1","1","3","0","3","0","1","2","0","2","6","4","0","6","0","0","0","6","51","9","21","16","2","21","8","11","9","2","1","1","1","1","0","1","2","2","2","2","normal"
"43819","783","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43819 Implement ExpressionFactory.newInstance() and ensure that Jasper does not refer to org.apache.el directly JSP 2.1 TCK passes with these changes applied Based on a patch by Christoph Beck","Bug 43819  Support latest JSR245 proposal to make EL ""self-contained""","support latest r245 jsr245 propos make self contain selfcontain","","","""java/org/apache/jasper/compiler/JspUtil.java""","4","4","4","2","21","1","15","4","2","37","6","40","40","3","3","40","2","2","0","36","976","94","665","150","464","218","316","475","134","341","17","17","18","11","4","0","168","160","192","91","normal"
"43819","783","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43819 Implement ExpressionFactory.newInstance() and ensure that Jasper does not refer to org.apache.el directly JSP 2.1 TCK passes with these changes applied Based on a patch by Christoph Beck","Bug 43819  Support latest JSR245 proposal to make EL ""self-contained""","support latest r245 jsr245 propos make self contain selfcontain","","","""java/org/apache/jasper/compiler/PageInfo.java""","1","1","1","1","5","0","4","0","1","0","0","84","84","84","46","84","1","0","0","83","737","137","442","163","208","160","200","315","149","166","6","6","7","1","3","0","116","116","122","84","normal"
"43819","783","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43819 Implement ExpressionFactory.newInstance() and ensure that Jasper does not refer to org.apache.el directly JSP 2.1 TCK passes with these changes applied Based on a patch by Christoph Beck","Bug 43819  Support latest JSR245 proposal to make EL ""self-contained""","support latest r245 jsr245 propos make self contain selfcontain","","","""java/org/apache/jasper/compiler/Validator.java""","4","4","6","1","26","2","21","2","8","3","15","59","59","56","13","59","5","17","0","37","1846","231","1363","396","969","254","550","832","284","548","44","44","52","6","8","0","278","278","382","84","normal"
"43819","783","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=43819 Implement ExpressionFactory.newInstance() and ensure that Jasper does not refer to org.apache.el directly JSP 2.1 TCK passes with these changes applied Based on a patch by Christoph Beck","Bug 43819  Support latest JSR245 proposal to make EL ""self-contained""","support latest r245 jsr245 propos make self contain selfcontain","","","""java/org/apache/jasper/runtime/JspApplicationContextImpl.java""","2","2","2","1","10","0","9","0","2","1","2","8","8","7","4","8","0","1","0","7","152","22","107","44","54","23","67","85","46","39","4","4","4","1","2","0","18","18","18","8","normal"
"43868","44","Mark Emlyn David Thomas","Fix bug 43868. MBean methods getInvoke and getSetter were broken.","Bug 43868  MBeanServer invoke issue","bean server mbeanserv invok issu","Impossible to invoke ""removeRole"" or other MBean methods and ""setAttribute"" by
MBeanServer cause of the same bug in ManagedBean.java at both lines 545
(getSetter method) and 604 (getInvoke method):
        object = this;
Must be replace by:
        object = bean;

Fortunately getGetter method is correct.","imposs invok remov role removerol bean mbean method set attribut setattribut bean server mbeanserv caus manag bean managedbean java line get setter getsett method get invok getinvok method object must replac object bean fortun get getter getgett method correct","""java/org/apache/tomcat/util/modeler/ManagedBean.java""","2","2","2","1","18","1","11","5","1","0","3","26","26","26","10","26","2","0","0","24","628","102","318","99","213","210","170","233","92","141","11","11","12","1","4","1","65","65","68","26","normal"
"43887","7","Mark Emlyn David Thomas","Fix bug 43887. Include exception in the log message.","Bug 43887  StandardWrapper.registerJMX() doesn't log exceptions correctly","standard wrapper standardwrapp regist registerjmx doesn log except correctli","I was getting some rather unhelpful error messages when trying to deploy a
web.xml that included illegal servlet names. I tracked them down to this part of
/org/apache/catalina/core/StandardWrapper.java:

        } catch( Exception ex ) {
            log.info(""Error registering servlet with jmx "" + this);
        }

This should probably be changed to:

            log.info(""Error registering servlet with jmx "" + ex);

Same thing for the catch block ten lines below this one.


I first noticed this in 5.5.23, but this code is still present in 6.0 trunk.","get rather unhelp error messag tri deploy web xml includ illeg servlet name track part apach catalina core standard wrapper standardwrapp java catch except ex log info error regist servlet jmx probabl chang log info error regist servlet jmx ex thing catch block ten line one first notic code still present trunk","""java/org/apache/catalina/core/StandardWrapper.java""","2","2","2","1","18","2","11","5","2","1","6","82","82","81","27","82","0","0","5","77","1904","397","983","238","647","527","423","629","220","409","34","34","41","5","5","1","201","201","220","96","minor"
"43893","5","Mark Emlyn David Thomas","Update WebDAV javadocs as a result of bug 43893","Bug 43893  WebdavServlet returns incorrect values for the ""href"" property when it is mapped with / url prefix, instead of /*","webdav servlet webdavservlet return incorrect valu href properti map url prefix instead","","","""java/org/apache/catalina/servlets/WebdavServlet.java""","8","8","9","3","64","10","44","8","4","2","46","39","39","37","13","39","0","15","15","9","3131","647","1909","428","1497","579","965","1292","348","944","68","64","75","16","6","0","337","327","363","126","null"
"43909","34","Mark Emlyn David Thomas","Fix bug 43909. Make sure locale maps to wrapped ELContext. Patch provided by Tuomas Kiviaho.","Bug 43909  EL EvaluationContext wrapper hides locale","evalu context evaluationcontext wrapper hide local","org.apache.el.lang.EvaluationContext doesn't pass locale to the wrapped
ELContext as does org.apache.jasper.el.ELContextWrapper. This prohibits using of
the locale for it's original purpose.","apach lang evalu context evaluationcontext doesn pa local wrap context elcontext apach jasper context wrapper elcontextwrapp prohibit use local origin purpos","""java/org/apache/el/lang/EvaluationContext.java""","1","1","1","1","3","0","3","0","1","0","0","9","9","9","3","9","0","0","0","9","71","15","40","19","11","16","19","29","18","11","1","1","1","1","0","0","9","9","9","9","normal"
"43914","36","Mark Emlyn David Thomas","Fix bug 43914. Location headers must be encoded. Patch provided by Ivan Todoroski.","Bug 43914  HTTP spec violation when generating HTTP redirects for folders without trailing slash","http spec violat gener http redirect folder without trail slash","","","""java/org/apache/catalina/connector/CoyoteAdapter.java""","9","9","11","3","64","7","45","12","1","2","4","10","10","8","2","10","0","0","6","4","769","120","486","101","360","163","267","363","95","268","22","22","26","12","6","0","97","97","112","37","normal"
"43944","31","Mark Emlyn David Thomas","Fix bug 43944. Use a message that exists.","Bug 43944  org.apache.el.lang.ELArithmetic.coerce throws MissingResourceException for key el.convert","apach lang arithmet elarithmet coerc throw miss resourc except missingresourceexcept key convert","The class org.apache.el.lang.ELArithmetic
has the following code snippet:

throw new IllegalArgumentException(MessageFactory.get(""el.convert"", obj, 
objType));

But the key ""el.convert"" doesn't exist in ""org.apache.el.Messages"". As a 
result, I'm receiving the exception:
java.util.MissingResourceException: Can't find resource for bundle 
java.util.PropertyResourceBundle, key el.convert
	at java.util.ResourceBundle.getObject(ResourceBundle.java:325)
	at java.util.ResourceBundle.getString(ResourceBundle.java:285)
	at org.apache.el.util.MessageFactory.getArray(MessageFactory.java:67)
	at org.apache.el.util.MessageFactory.get(MessageFactory.java:47)
	at org.apache.el.lang.ELArithmetic.coerce(ELArithmetic.java:367)
	at org.apache.el.lang.ELArithmetic.add(ELArithmetic.java:238)
	at org.apache.el.parser.AstPlus.getValue(AstPlus.java:24)
	at org.apache.el.ValueExpressionImpl.getValue
(ValueExpressionImpl.java:186)","class apach lang arithmet elarithmet follow code snippet throw new illeg argument except illegalargumentexcept messag factori messagefactori get convert obj obj type objtyp key convert doesn exist apach messag result receiv except java util miss resourc except missingresourceexcept find resourc bundl java util properti resourc bundl propertyresourcebundl key convert java util resourc bundl resourcebundl get object getobject resourc bundl resourcebundl java java util resourc bundl resourcebundl get string getstr resourc bundl resourcebundl java apach util messag factori messagefactori get array getarray messag factori messagefactori java apach util messag factori messagefactori get messag factori messagefactori java apach lang arithmet elarithmet coerc arithmet elarithmet java apach lang arithmet elarithmet add arithmet elarithmet java apach parser ast plu astplu get valu getvalu ast plu astplu java apach valu express impl valueexpressionimpl get valu getvalu valu express impl valueexpressionimpl java","""java/org/apache/el/lang/ELArithmetic.java""","1","1","2","1","6","0","5","0","5","7","5","41","49","42","0","49","0","0","38","11","377","82","268","79","147","27","114","195","79","116","5","5","14","5","1","0","76","76","113","55","normal"
"44084","8","Mark Emlyn David Thomas","Fix 44084 with a patch provided by Noah Levitt. I also made a few additional fixes to line lengths etc.","Bug 44084  JAASRealm useContextClassLoader has problems","realm jaasrealm use context class loader usecontextclassload problem","The useContextClassLoader config option doesn't work right. 

- it is ignored when setting userClassNames and roleClassNames 
- it's respected when the LoginContext is created, but that is insufficient,
because all the needed classes are not necessarily loaded until
loginContext.login() is called

Patch to follow. With it I'm able to keep everything related to the JAASRealm in
my webapp.","use context class loader usecontextclassload config option doesn work right ignor set user class name userclassnam role class name roleclassnam respect login context logincontext creat insuffici need class necessarili load login context logincontext login call patch follow abl keep everyth relat realm jaasrealm webapp","""java/org/apache/catalina/realm/JAASRealm.java""","3","3","3","1","18","1","10","6","1","0","4","18","18","18","6","18","0","0","6","12","567","99","218","61","136","250","109","162","59","103","21","21","21","10","4","1","56","56","57","30","normal"
"44088","6","Mark Emlyn David Thomas","Fix bug 44088. Expire button didn't work. Patch by Ben Short.","Bug 44088  Cannot expire session via html manager webapp","cannot expir session via html manag webapp","The html manager webapp done not work correctly when clicking the expire
sessions button. The idle param is missing from the form.

The following html shows this bug...

<form method=""POST"" action=""/manager/html/expire?path=/"">
  <small>
  &nbsp;<input type=""submit"" value=""Expire sessions"">&nbsp;with idle
&ge;&nbsp;<input type=""text"" name=""expire"" size=""5"" value=""30"">&nbsp;minutes&nbsp;
  </small>
  </form>

The name of the text input should be idle.","html manag webapp done work correctli click expir session button idl param miss form follow html show form method post action manag html expir path small nbsp input type submit valu expir session nbsp idl nbsp input type text name expir size valu nbsp minut nbsp small form name text input idl","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","3","1","27","2","19","5","11","0","11","32","32","32","2","32","0","0","11","21","1124","107","793","158","638","232","363","478","155","323","16","16","20","9","4","0","114","114","127","55","normal"
"44223","4","Mark Emlyn David Thomas","Fix bug 44223. Use all the trust store system properties.","Bug 44223  Tomcat ignores the ""javax.net.ssl.trustStoreType"" system property","tomcat ignor javax net ssl trust store type truststoretyp system properti","Set up a SSL Connector with a keystore in JKS format:

<Connector ... SSLEnabled=""true""
keystoreFile=""tomcat.keystore"" keystoreType=""JKS"">

Let's say you need a custom truststore (e.g. for authenticating self-signed 
client certificates), and that this truststore is also needed by some of your 
webapps, not only Tomcat. The natural thing to do then is to configure this 
truststore globally for the whole JVM, not in server.xml.

Let's also assume this truststore is in a different format (e.g. PKCS#12). So 
before starting Tomcat, you do this:

export JAVA_OPTS=""-Djavax.net.ssl.trustStore=trusted.keystore -
Djavax.net.ssl.trustStoreType=PKCS12""

Well, it doesn't work. If you look at tomcat/logs/catalina.out, you will see a 
keystore-related exception. Upon further debugging, you will discover the 
problem is that Tomcat is trying to open the truststore as if it were in JKS 
format, even though it is clearly specified as type PKCS12 in JAVA_OPTS above.","set ssl connector keystor jk format connector enabl sslenabl true keystor file keystorefil tomcat keystor keystor type keystoretyp jk let say need custom truststor authent self sign selfsign client certif truststor need webapp tomcat natur thing configur truststor global whole jvm server xml let assum truststor differ format pkc start tomcat export java opt djavax net ssl trust store truststor trust keystor djavax net ssl trust store type truststoretyp s12 pkcs12 well doesn work look tomcat log catalina see keystor relat keystorerel except upon debug discov problem tomcat tri open truststor jk format even though clearli specifi type s12 pkcs12 java opt","""java/org/apache/tomcat/util/net/jsse/JSSESocketFactory.java""","4","4","4","1","24","1","18","3","1","0","7","21","21","21","6","21","1","2","12","6","667","75","451","151","278","143","228","320","133","187","14","14","16","11","7","0","96","96","103","41","normal"
"44265","783","Konstantin Kolinko","Mark the min(a,b) method as static. Inspired by https://issues.apache.org/bugzilla/show_bug.cgi?id=44265","Bug 44265  Improve JspWriterImpl performance with ""inline"" sub method","improv jsp writer impl jspwriterimpl perform inlin sub method","As you know, the JspWriterImpl.write method was always invoked in JSP file 
frequently. But I found its performance is poor because too many sub method 
were invoked as well.
After copying two sub method's code to write method, the performance was 
improved observably.","know jsp writer impl jspwriterimpl write method alway invok jsp file frequent found perform poor mani sub method invok well copi two sub method code write method perform improv observ","""java/org/apache/jasper/runtime/JspWriterImpl.java""","1","1","2","1","11","0","6","5","2","0","1","42","42","42","6","42","2","5","1","34","620","60","306","95","161","254","132","206","64","142","9","9","13","5","3","1","75","75","84","48","enhancement"
"44268","3","Mark Emlyn David Thomas","Log a warning if a duplicate listener is ignored. Result of bug 44268.","Bug 44268  Multiple registrations of same ServletContextListener class not possible","multipl registr servlet context listen servletcontextlisten class possibl","When I register the same class implementing ServletContextListener twice or more
its' contextInitialized methods only gets called once.

The servlet specifications (2.4 and 2.5) say the conforming container has to 
call the listeners in the same order they are registered in the deployment
descriptor.
The case that one listener class is registered twice is not mentioned
explicitly in the specification, though.

Example:
<listener>
  <listener-class>test.ServletContextListener1</listener-class>
</listener>
<listener>
  <listener-class>test.ServletContextListener2</listener-class>
</listener>
<listener>
  <listener-class>test.ServletContextListener1</listener-class>
</listener>

test.ServletContextListener1 and test.ServletContextListener2 get called,
but test.ServletContextListener1 does not get called again.

Apache Tomcat 5.5.25 has the same bug.","regist class implement servlet context listen servletcontextlisten twice context initi contextiniti method get call servlet specif say conform contain call listen order regist deploy descriptor case one listen class regist twice mention explicitli specif though exampl listen listen class listenerclass servlet context listener1 servletcontextlistener1 listen class listenerclass listen listen listen class listenerclass servlet context listener2 servletcontextlistener2 listen class listenerclass listen listen listen class listenerclass servlet context listener1 servletcontextlistener1 listen class listenerclass listen servlet context listener1 servletcontextlistener1 servlet context listener2 servletcontextlistener2 get call servlet context listener1 servletcontextlistener1 get call apach tomcat","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","17","2","10","4","1","0","3","262","262","262","90","262","0","15","7","240","5669","1200","2862","727","1868","1616","1363","2084","736","1348","61","61","79","9","5","1","655","655","702","338","enhancement"
"44282","7","Mark Emlyn David Thomas","Fix bug 44282. Do call to getClassLoader() in a privileged block.","Bug 44282  WebappClassLoader.findClass calls getClassLoader without privileges","webapp class loader webappclassload find class findclass call get class loader getclassload without privileg","When logging is in TRACE mode or lower,
org.apache.catalina.loader.WebappClassLoader.findClass(String) calls
getClassLoader() without a privileged block.  With security enabled, this will
cause a SecurityException if the RuntimePermission to getClassLoader is not granted.","log trace mode lower apach catalina loader webapp class loader webappclassload find class findclass string call get class loader getclassload without privileg block secur enabl caus secur except securityexcept runtim permiss runtimepermiss get class loader getclassload grant","""java/org/apache/catalina/loader/WebappClassLoader.java""","6","6","6","2","33","4","22","7","2","1","5","56","56","55","27","56","3","0","20","33","2351","415","1361","291","959","578","663","1012","278","734","41","41","47","29","9","0","348","348","373","154","minor"
"44337","2","Timothy A. Funk","http://issues.apache.org/bugzilla/show_bug.cgi?id=44337 Dir listing crashes if no readme-file present","Bug 44337  Dir listing crashes if no readme-file present","list crash readm file readmefil present","DefaultServlet docu 6.0  says about attibute readmeFile:
If a directory listing is presented, a readme file
 *may* 
also be presented with the listing. This file is inserted
.....

This was true for 5.5.x.

6.0.14 crashes if the file is absent in the listed directory.
javax.servlet.ServletException: 
Error opening readme resource at
org.apache.catalina.servlets.DefaultServlet.getReadme(DefaultServlet.java:1418)

This new behaviour blocks the listing of big directory trees managed by others,
where the work-around is nor feasible.

Work around 1: readme file in *every* subdir, empty (length=0) if none wanted 
     (and subsequent changes in the used XSL-Transformers)
Work around 2: Change ""may"" to  ""must"" in docu.

Repair: fix DefaultServlet

From web.xml:

    <servlet>
        <servlet-name>default</servlet-name>
        <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>
        <init-param>
            <param-name>listings</param-name>
            <param-value>true</param-value>
        </init-param>
        <init-param>
            <param-name>globalXsltFile</param-name>
            <param-value>D:\www\serv-intra\meva-dir-li.xsl</param-value>
        </init-param>
        <init-param>
            <param-name>readmeFile</param-name>
            <param-value>readme.htm</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>","default servlet defaultservlet docu say attibut readm file readmefil directori list present readm file may present list file insert true crash file absent list directori javax servlet servlet except servletexcept error open readm resourc apach catalina servlet default servlet defaultservlet get readm getreadm default servlet defaultservlet java new behaviour block list big directori tree manag other work around workaround feasibl work around readm file everi subdir empti length none want subsequ chang use xsl transform work around chang may must docu repair fix default servlet defaultservlet web xml servlet servlet name servletnam default servlet name servletnam servlet class servletclass apach catalina servlet default servlet defaultservlet servlet class servletclass init param initparam param name paramnam list param name paramnam param valu paramvalu true param valu paramvalu init param initparam init param initparam param name paramnam global xslt file globalxsltfil param name paramnam param valu paramvalu www serv intra servintra meva dir li mevadirli xsl param valu paramvalu init param initparam init param initparam param name paramnam readm file readmefil param name paramnam param valu paramvalu readm htm param valu paramvalu init param initparam load on startup loadonstartup load on startup loadonstartup servlet","""java/org/apache/catalina/servlets/DefaultServlet.java""","5","5","6","2","47","7","29","10","2","0","6","39","39","39","14","39","0","0","35","4","2144","417","1239","330","900","493","613","839","253","586","41","41","51","14","5","0","227","227","269","112","blocker"
"44380","63","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=44380 Don't bother scanning non-file URLs for TLDs. Patch provided by Florent BENOIT","Bug 44380  TldConfig / Scan of URL that are not files","tld config tldconfig scan url file","The TldConfig class (org.apache.catalina.startup) is asking ClassLoader and all
parent ClassLoader in order to get the URLs and then assume that the URLs are
using ""file"" protocol.

But when Tomcat is embedded, sometimes the URL are not always using ""file""
protocol and then new File() will fail.

The given patch is to skip the URLs that are not using file protocol (that
avoids ugly NPE in the ""new File(urls[i].toURI());"" call","tld config tldconfig class apach catalina startup ask class loader classload parent class loader classload order get url assum url use file protocol tomcat embed sometim url alway use file protocol new file fail given patch skip url use file protocol avoid ugli npe new file url to touri call","""java/org/apache/catalina/startup/TldConfig.java""","3","3","4","1","23","1","15","5","1","2","6","22","22","20","3","22","0","10","0","12","727","89","435","119","285","204","223","312","114","198","14","14","17","6","5","0","87","87","95","40","normal"
"44389","60","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=44389 Make nested class static so it doesn't hold a reference to the ApplciationContext instance.","Bug 44389  Cleanup of org.apache.naming.resources.CacheEntry resources (memory leak)","cleanup apach name resourc cach entri cacheentri resourc memori leak","Hi,

   I am memory profiling a webapp for my company because we suspect it has
memory leaks when redeploying. This webapp has to be redeployed several times a
week for security reasons (most of the time it is undeployed) and the memory
leaks forced us to shutdown tomcat once a week to avoid OOM exception.

   I'm using jvm1.5 and tomcat 6.0.13 (also tried with 6.0.14 and today with
6.0.16), and Yourkit as the profiling tool. I have made the test in both linux
and windows.

   I have created a JMeter test to deploy the app using the manager, make some
request to the app and then undeploy it using again the manager app in a loop.
After some redeployments, I got my OutOfMemoryException. Then I checked with my
profiling tool and found that my own classes were correctly destroyed, and the
classes retaining more memory were these ones (listed as a heirarchy):

   org.apache.catalina.core.ApplicationContext$DispatchData
   org.apache.catalina.core.ApplicationContext
mapper of  org.apache.catalina.core.StandardContext
context of  org.apache.tomcat.util.http.mapper.Mapper
resources of  org.apache.tomcat.util.http.mapper.Mapper$Context  cache of 
org.apache.naming.resources.ProxyDirContext  cache of 
org.apache.naming.resources.ResourceCache
org.apache.naming.resources.CacheEntry[]

   The number of objects of each class were exactly the number of times I had
redeployed the webapp. I have checked the contents of CacheEntry inside
CacheEntry[] and it has an attribute ""name"" and the contents are the jsps and
tld files of my app. There are as many CacheEntry with the same jsp attribute as
times the webapp has been reloaded, so I guess there is no cleaning of
CacheEntry resources at context shutdown.

   To reproduce this, a simple webapp with 2 jsp and a taglibrary can be used.
Deploy and undeploy it many times so you can see how the count of these objects
grows in memory.","hi memori profil webapp compani suspect memori leak redeploy webapp redeploy sever time week secur reason time undeploy memori leak forc u shutdown tomcat week avoid oom except use jvm1 tomcat tri today yourkit profil tool made linux window creat meter jmeter deploy app use manag make request app undeploy use manag app loop redeploy got out of memori except outofmemoryexcept check profil tool found class correctli destroy class retain memori one list heirarchi apach catalina core applic context applicationcontext dispatch data dispatchdata apach catalina core applic context applicationcontext mapper apach catalina core standard context standardcontext context apach tomcat util http mapper mapper resourc apach tomcat util http mapper mapper context cach apach name resourc proxi dir context proxydircontext cach apach name resourc resourc cach resourcecach apach name resourc cach entri cacheentri number object class exactli number time redeploy webapp check content cach entri cacheentri insid cach entri cacheentri attribut name content jsp tld file app mani cach entri cacheentri jsp attribut time webapp reload guess clean cach entri cacheentri resourc context shutdown reproduc simpl webapp jsp taglibrari use deploy undeploy mani time see count object grow memori","""java/org/apache/catalina/core/ApplicationContext.java""","3","3","3","2","19","2","11","5","2","2","2","38","38","36","9","38","1","5","4","28","981","210","484","147","323","288","249","365","141","224","12","12","13","9","3","1","115","115","123","84","normal"
"44391","60","Mark Emlyn David Thomas","Fix bug44391. Handling of escaped characters was incorrect.","Bug 44391  SSI handling of escaped characters broken","ssi handl escap charact broken","In org.apache.catalina.ssi.SSIProcessor the method parseParamNames is broken. If
I have a SSI directive like <!--#set var=""test"" value=""blubb\""\"""" --> the method
detects three parameters instead of two. This is because there are two
consecutive escaped characters. Although the first one \"" is detected correctly
the next one isn't because the flag escaped is still set to true, although this
character isn't escaped anymore.

You have to replace

boolean escaped = false;
for (; bIdx < cmd.length() && quotes != 2; bIdx++) {
  char c = cmd.charAt(bIdx);
  // Need to skip escaped characters
  if (c == '\\' && !escaped) {
    escaped = true;
    bIdx++;
    continue;
  }
  escaped = false;
  if (c == '""') quotes++;
}

by 

for (; bIdx < cmd.length() && quotes != 2; bIdx++) {
  char c = cmd.charAt(bIdx);
  // Need to skip escaped characters
  if (c == '\\') {
    bIdx++;
    continue;
  }
  if (c == '""') quotes++;
}

Just removing the flag escaped is sufficient, because you don't have to remember
whether the last character was escaped and that should have no influence to
consecutive characters.

The bug still exists in the HEAD revision of the repository.","apach catalina ssi processor ssiprocessor method pars param name parseparamnam broken ssi direct like set valu blubb method detect three paramet instead two two consecut escap charact although first one detect correctli next one isn flag escap still set true although charact isn escap anymor replac boolean escap fals idx bidx cmd length quot idx bidx char cmd char at charat idx bidx need skip escap charact escap escap true idx bidx continu escap fals quot idx bidx cmd length quot idx bidx char cmd char at charat idx bidx need skip escap charact idx bidx continu quot remov flag escap suffici rememb whether last charact escap influenc consecut charact still exist head revis repositori","""java/org/apache/catalina/ssi/SSIProcessor.java""","4","4","6","2","26","0","20","5","1","0","3","10","10","10","3","10","0","1","6","3","326","21","223","67","162","84","131","177","62","115","14","14","17","8","7","0","47","47","63","26","normal"
"44392","60","Mark Emlyn David Thomas","Fix bug 44392. HTML entities not resolved in SSI.","Bug 44392  HTML entities not resolved in SSI filter","html entiti resolv ssi filter","HTML entities which are contained in an SSI set directive aren't resolved by the
SSI filter (in contrary to what is done by mod_include of Apaches HTTP).

mod_include resolves all HTML entities in most of the attribute values of ssi
directives. It also resolves \"" to "" and \$ to $.

The ssi filter of tomcat resolves all escaped character which are escaped with a
backslash, but no HTML entities at all.

Apart from that, giving encoding ""entity"" should be different from giving
encoding=""none"" to the SSI echo directive. One should replace all invalid HTML
characters by valid HTML entities and the other one should do nothing.

The encoding is especially important if you wan't to store a HTML-Comment within
a SSI variable.

If I want to store a variable test with the value ""<!-- testvalue ""x"" -->""


<!--#set var=""test"" value=""<!-- testvalue ""x"" -->""-->

for mod_include you must write:

<!--#set var=""test"" value=""<!&#45;&#45; testvalue \""x\"" &#45;&#45;>"" -->

for Tomcats SSI you must write:

<!--#set var=""test"" value=""<!\-\- testvalue \""x\"" \-\->"" -->

And there should be a difference whether I output this variable with
<!--#echo var=""test"" encoding=""none"" -->  
which should lead to <!-- testvalue ""x"" -->, or
<!--#echo var=""test"" encoding=""entity"" -->
which should lead to &lt;!-- testvalue &quot;x&quot; --&gt;","html entiti contain ssi set direct aren resolv ssi filter contrari done includ apach http includ resolv html entiti attribut valu ssi direct resolv ssi filter tomcat resolv escap charact escap backslash html entiti apart give encod entiti differ give encod none ssi echo direct one replac invalid html charact valid html entiti one noth encod especi import wan store html comment within ssi variabl store variabl valu testvalu set valu testvalu includ must write set valu testvalu tomcat ssi must write set valu testvalu differ whether output variabl echo encod none lead testvalu echo encod entiti lead lt testvalu quot quot gt","""java/org/apache/catalina/ssi/SSIEcho.java""","3","3","4","1","19","0","17","1","1","0","2","2","2","2","0","2","0","0","1","1","75","6","41","15","28","28","22","30","14","16","6","6","6","1","3","1","7","7","9","2","normal"
"44392","60","Mark Emlyn David Thomas","Fix bug 44392. HTML entities not resolved in SSI.","Bug 44392  HTML entities not resolved in SSI filter","html entiti resolv ssi filter","HTML entities which are contained in an SSI set directive aren't resolved by the
SSI filter (in contrary to what is done by mod_include of Apaches HTTP).

mod_include resolves all HTML entities in most of the attribute values of ssi
directives. It also resolves \"" to "" and \$ to $.

The ssi filter of tomcat resolves all escaped character which are escaped with a
backslash, but no HTML entities at all.

Apart from that, giving encoding ""entity"" should be different from giving
encoding=""none"" to the SSI echo directive. One should replace all invalid HTML
characters by valid HTML entities and the other one should do nothing.

The encoding is especially important if you wan't to store a HTML-Comment within
a SSI variable.

If I want to store a variable test with the value ""<!-- testvalue ""x"" -->""


<!--#set var=""test"" value=""<!-- testvalue ""x"" -->""-->

for mod_include you must write:

<!--#set var=""test"" value=""<!&#45;&#45; testvalue \""x\"" &#45;&#45;>"" -->

for Tomcats SSI you must write:

<!--#set var=""test"" value=""<!\-\- testvalue \""x\"" \-\->"" -->

And there should be a difference whether I output this variable with
<!--#echo var=""test"" encoding=""none"" -->  
which should lead to <!-- testvalue ""x"" -->, or
<!--#echo var=""test"" encoding=""entity"" -->
which should lead to &lt;!-- testvalue &quot;x&quot; --&gt;","html entiti contain ssi set direct aren resolv ssi filter contrari done includ apach http includ resolv html entiti attribut valu ssi direct resolv ssi filter tomcat resolv escap charact escap backslash html entiti apart give encod entiti differ give encod none ssi echo direct one replac invalid html charact valid html entiti one noth encod especi import wan store html comment within ssi variabl store variabl valu testvalu set valu testvalu includ must write set valu testvalu tomcat ssi must write set valu testvalu differ whether output variabl echo encod none lead testvalu echo encod entiti lead lt testvalu quot quot gt","""java/org/apache/catalina/ssi/SSIMediator.java""","1","1","2","1","9","0","7","1","1","0","4","23","23","23","9","23","0","0","4","19","331","48","218","72","134","65","132","175","69","106","12","12","13","9","3","0","45","45","47","31","normal"
"44408","57","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=44408 Avoid bottleneck by calling the synchronized method only once. Patch provided by Robert Andersson.","Bug 44408  EL-expression evaluation slow due to synchronization caused by JspFactory.getDefaultFactory","express elexpress evalu slow due synchron caus jsp factori jspfactori get default factori getdefaultfactori","","","""java/org/apache/jasper/runtime/PageContextImpl.java""","2","2","2","1","13","1","11","1","14","2","0","61","61","59","15","61","1","15","0","45","940","148","692","146","446","102","308","457","140","317","10","10","12","6","3","0","159","147","165","70","minor"
"44428","54","Mark Emlyn David Thomas","Fix bug 44428. Make sure m is not null to prevent NPE.","Bug 44428  FunctionMapperImpl.Function throws a NPE in certain circumstances","function mapper impl functionmapperimpl function throw npe certain circumst","In FunctionMapperImpl.Function it is possible for writeExternal to fail if the
class has just been de-serialised and is then serialised again.

If you look at writeExternal:

   public void writeExternal(ObjectOutput out) throws IOException {
      out.writeUTF((this.prefix != null) ? this.prefix : """");
      out.writeUTF(this.localName);
      out.writeUTF(this.m.getDeclaringClass().getName());
      out.writeUTF(this.m.getName());
      out.writeObject(ReflectionUtil.toTypeNameArray(
         this.m.getParameterTypes()));
   }

you can see that it externalises the function to be invoked by using the
reference to the Method itself.

If you look at readExternal however:

   public void readExternal(ObjectInput in) throws IOException,
         ClassNotFoundException {
            
      this.prefix = in.readUTF();
      if ("""".equals(this.prefix)) this.prefix = null;
      this.localName = in.readUTF();
      this.owner = in.readUTF();
      this.name = in.readUTF();
      this.types = (String[]) in.readObject();
   }

You can see that it doesn't restore the Method after deserialisation. The method
is restored if it is accessed, however if it's not and then serialisation is
performed writeExternal will throw a NPE (as m is still null).

The fix is to either get the method to be reconstructed as soon as
deserialisation completes - or perhaps to be a bit more efficient, in
writeExternal change it such that if m is null it externalises using the
components of the method:

   public void writeExternal(ObjectOutput out) throws IOException {
      out.writeUTF((this.prefix != null) ? this.prefix : """");
      out.writeUTF(this.localName);
      if (m == null) {
         out.writeUTF(this.owner);
         out.writeUTF(this.name);
         out.writeObject(this.types);
      } else if (this.m != null) {
         out.writeUTF(this.m.getDeclaringClass().getName());
         out.writeUTF(this.m.getName());
         out.writeObject(ReflectionUtil.toTypeNameArray(
            this.m.getParameterTypes()));
      }
   }","function mapper impl functionmapperimpl function possibl write extern writeextern fail class de serialis deserialis serialis look write extern writeextern public void write extern writeextern object output objectoutput throw except ioexcept write writeutf prefix null prefix write writeutf local name localnam write writeutf get declar class getdeclaringclass get name getnam write writeutf get name getnam write object writeobject reflect util reflectionutil to type name array totypenamearray get paramet type getparametertyp see externalis function invok use refer method look read extern readextern howev public void read extern readextern object input objectinput throw except ioexcept class not found except classnotfoundexcept prefix read readutf equal prefix prefix null local name localnam read readutf owner read readutf name read readutf type string read object readobject see doesn restor method deserialis method restor access howev serialis perform write extern writeextern throw npe still null fix either get method reconstruct soon deserialis complet perhap bit effici write extern writeextern chang null externalis use compon method public void write extern writeextern object output objectoutput throw except ioexcept write writeutf prefix null prefix write writeutf local name localnam null write writeutf owner write writeutf name write object writeobject type els null write writeutf get declar class getdeclaringclass get name getnam write writeutf get name getnam write object writeobject reflect util reflectionutil to type name array totypenamearray get paramet type getparametertyp","""java/org/apache/el/lang/FunctionMapperImpl.java""","2","2","2","1","7","0","7","0","2","0","1","12","12","12","7","12","0","0","0","12","190","25","109","39","53","56","53","79","36","43","5","5","5","4","2","1","27","27","27","15","normal"
"44529","25","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=44529 No roles (deny all) trumps no auth-constraint (allow all)","Bug 44529  RealmBase authorization via hasResourcePermission not fully servlet spec compliant","realm base realmbas author via ha resourc permiss hasresourcepermiss fulli servlet spec compliant","The authorization implementation in RealmBase, in the hasResourcePermission method is not fully servlet specification compliant. The spec (both 2.4 and 2.5) states:

""...
A security constraint that does not contain an authorization constraint shall combine with authorization constraints that name or imply roles to allow unauthenticated access. 
The special case of an authorization constraint that names no roles shall combine with any other constraints to override their affects and cause access to be precluded.
...""

In Tomcat this works fine as long as there aren't weird (but legal!) combinations or security-constraints on the same URLs.

Example:

  <security-constraint>
    <web-resource-collection>
      <url-pattern>/someUrl/*</url-pattern>
      <http-method>POST</http-method>
    </web-resource-collection>
    <!-- no auth-constraint, to allow everyone -->
  </security-constraint>

  <security-constraint>
    <web-resource-collection>
      <url-pattern>/someUrl/*</url-pattern>
      <http-method>POST</http-method>
    </web-resource-collection>
    <!-- no roles, to allow noone -->
    <auth-constraint />
  </security-constraint>

(if we ignore that this kind of configuration is pretty pointless,)
the spec dictates that a POST to /someUrl/index.html should be denied access.
Tomcat grants it. (both 5.5.23 and 6.0.14 do)


Example 2:

  <security-constraint>
    <web-resource-collection>
      <url-pattern>/someUrl/*</url-pattern>
      <http-method>POST</http-method>
    </web-resource-collection>
    <!-- no roles, to allow noone -->
    <auth-constraint />
  </security-constraint>

  <security-constraint>
    <web-resource-collection>
      <url-pattern>/someUrl/*</url-pattern>
      <http-method>POST</http-method>
    </web-resource-collection>
    <auth-constraint>
      <role-name>*</role-name>
    </auth-constraint>
  </security-constraint>

Now it gets interesting. In ""strict"" mode, access to /someUrl/index.html is denied (regardless of the web.xml-configured security roles and the roles the user has).
In ""auth-only"" mode, access is always granted, and in ""strict auth-only"" mode access is granted if there are no web.xml-configured security roles.
Now these modes are a Tomcat addition to the spec, but I feel access should have been denied in all modes, both to stay in line with the spec and to keep the behaviour predictable.","author implement realm base realmbas ha resourc permiss hasresourcepermiss method fulli servlet specif compliant spec state secur constraint contain author constraint shall combin author constraint name impli role allow unauthent access special case author constraint name role shall combin constraint overrid affect caus access preclud tomcat work fine long aren weird legal combin secur constraint securityconstraint url exampl secur constraint securityconstraint web resourc collect webresourcecollect url pattern urlpattern some url someurl url pattern urlpattern http method httpmethod post http method httpmethod web resourc collect webresourcecollect auth constraint authconstraint allow everyon secur constraint securityconstraint secur constraint securityconstraint web resourc collect webresourcecollect url pattern urlpattern some url someurl url pattern urlpattern http method httpmethod post http method httpmethod web resourc collect webresourcecollect role allow noon auth constraint authconstraint secur constraint securityconstraint ignor kind configur pretti pointless spec dictat post some url someurl index html deni access tomcat grant exampl secur constraint securityconstraint web resourc collect webresourcecollect url pattern urlpattern some url someurl url pattern urlpattern http method httpmethod post http method httpmethod web resourc collect webresourcecollect role allow noon auth constraint authconstraint secur constraint securityconstraint secur constraint securityconstraint web resourc collect webresourcecollect url pattern urlpattern some url someurl url pattern urlpattern http method httpmethod post http method httpmethod web resourc collect webresourcecollect auth constraint authconstraint role name rolenam role name rolenam auth constraint authconstraint secur constraint securityconstraint get interest strict mode access some url someurl index html deni regardless web xml configur xmlconfigur secur role role user auth onli authonli mode access alway grant strict auth onli authonli mode access grant web xml configur xmlconfigur secur role mode tomcat addit spec feel access deni mode stay line spec keep behaviour predict","""java/org/apache/catalina/realm/RealmBase.java""","4","4","4","1","22","2","15","5","2","3","8","50","53","50","19","53","1","2","7","43","1435","261","823","205","523","356","392","606","198","408","52","52","62","21","6","0","209","209","233","97","minor"
"44558","2","Mark Emlyn David Thomas","Fix bug 44558. Include address in bind exception message.","Bug 44558  cite attempted address when throwing ""Cannot assign requested address""","cite attempt address throw cannot assign request address","SEVERE: Error starting endpoint
java.net.BindException: Cannot assign requested address:2217
        at org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:501)
        at org.apache.tomcat.util.net.JIoEndpoint.start(JIoEndpoint.java:515)
        at org.apache.coyote.http11.Http11Protocol.start(Http11Protocol.java:203)
        at org.apache.catalina.connector.Connector.start(Connector.java:1131)
        at org.apache.catalina.core.StandardService.start(StandardService.java:531)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)

saying which address a bind was attempted for would accelerate the error resolution quite a bit!","sever error start endpoint java net bind except bindexcept cannot assign request address apach tomcat util net io endpoint jioendpoint init io endpoint jioendpoint java apach tomcat util net io endpoint jioendpoint start io endpoint jioendpoint java apach coyot http11 http11 protocol http11protocol start http11 protocol http11protocol java apach catalina connector connector start connector java apach catalina core standard servic standardservic start standard servic standardservic java apach catalina core standard server standardserv start standard server standardserv java apach catalina startup catalina start catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java say address bind attempt would acceler error resolut quit bit","""java/org/apache/tomcat/util/net/JIoEndpoint.java""","1","1","2","1","8","0","5","1","6","0","5","58","59","59","29","59","1","1","7","50","796","171","378","120","238","247","176","297","118","179","9","9","9","4","4","1","114","114","118","63","normal"
"44562","1","Mark Emlyn David Thomas","Fix bug 44562. HEAD requests fail with rd.include(). Patch provided by David Jencks.","Bug 44562  HEAD requests cannot go through request dispatch include.","head request cannot go request dispatch includ","","","""java/javax/servlet/http/HttpServlet.java""","1","1","1","1","13","0","5","7","3","1","13","51","51","50","5","51","4","2","9","36","915","123","336","144","200","456","178","273","126","147","20","20","20","1","3","1","92","92","93","51","normal"
"44595","25","Jean-Frederic Clere","Submitted by Ruediger Pluem. PR#44595","Bug 44595  Add possibility to request the QueueSize of an executor via JMX","add possibl request queue size queuesiz executor via jmx","","","""java/org/apache/catalina/core/StandardThreadExecutor.java""","1","1","1","1","4","0","3","0","3","0","0","34","34","34","13","34","1","0","0","33","257","55","158","66","68","45","80","126","66","60","5","5","5","5","3","0","49","49","49","38","enhancement"
"44646","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=44646 The problem was wider than the issue described in the bug report. The session listener and the valve are different objects so the connection list wasn't visible to the session listener. I couldn't see an easy way to make them the same object so I used two lists - one for the valve (stored in the valve) and one for the session (stored in the session). This valve now works for a simple comet app.","Bug 44646  IllegalStateException when using CometConnectionManagerValve","illeg state except illegalstateexcept use comet connect manag valv cometconnectionmanagervalv","We're writing an application that processes requests using both a normal servlet and a CometProcessor. The normal servlet handles user authentication and logout (among other things). Once the user has been authenticated, the client makes a Comet request, which is open until the server has something to push to the client. When the user decides to log out, we need to stop processing Comet events for that client. I enabled the CometConnectionManagerValve in context.xml, hoping I would get an END event when the session goes away. Instead, I get an IllegalStateException:
Mar 10, 2008 2:05:41 PM org.apache.catalina.connector.CoyoteAdapter event
SEVERE: An exception or error occurred in the container during the request processing
java.lang.IllegalStateException: Cannot create a session after the response has been committed
   at org.apache.catalina.connector.Request.doGetSession(Request.java:2301)
   at org.apache.catalina.connector.Request.getSession(Request.java:2075)
   at org.apache.catalina.valves.CometConnectionManagerValve.event(CometConnectionManagerValve.java:311)
   at org.apache.catalina.core.StandardHostValve.event(StandardHostValve.java:179)
   at org.apache.catalina.valves.ValveBase.event(ValveBase.java:200)
   at org.apache.catalina.core.StandardEngineValve.event(StandardEngineValve.java:128)
   at org.apache.catalina.connector.CoyoteAdapter.event(CoyoteAdapter.java:198)
   at org.apache.coyote.http11.Http11NioProcessor.event(Http11NioProcessor.java:749)
   at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.event(Http11NioProtocol.java:653)
   at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:2080)
   at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
   at java.lang.Thread.run(Thread.java:619)

Presumably my servlet handles the ""logout"" request, and after sending a response to the client, calls invalidate() on the HttpSession. Subsequently, CometConnectionManagerValue.event() calls request.getSession(true), resulting in the IllegalStateException.","re write applic process request use normal servlet comet processor cometprocessor normal servlet handl user authent logout among thing user authent client make comet request open server someth push client user decid log need stop process comet event client enabl comet connect manag valv cometconnectionmanagervalv context xml hope would get event session go away instead get illeg state except illegalstateexcept mar pm apach catalina connector coyot adapt coyoteadapt event sever except error occur contain request process java lang illeg state except illegalstateexcept cannot creat session respons commit apach catalina connector request do get session dogetsess request java apach catalina connector request get session getsess request java apach catalina valv comet connect manag valv cometconnectionmanagervalv event comet connect manag valv cometconnectionmanagervalv java apach catalina core standard host valv standardhostvalv event standard host valv standardhostvalv java apach catalina valv valv base valvebas event valv base valvebas java apach catalina core standard engin valv standardenginevalv event standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt event coyot adapt coyoteadapt java apach coyot http11 http11 nio processor http11nioprocessor event http11 nio processor http11nioprocessor java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl event http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java presum servlet handl logout request send respons client call invalid http session httpsession subsequ comet connect manag valu cometconnectionmanagervalu event call request get session getsess true result illeg state except illegalstateexcept","""java/org/apache/catalina/valves/CometConnectionManagerValve.java""","3","3","3","1","21","1","13","6","2","0","1","11","11","11","7","11","0","0","0","11","371","72","186","68","103","113","99","140","65","75","7","7","12","1","5","1","36","36","42","11","normal"
"44673","0","Mark Emlyn David Thomas","Fix bug 44673. Throw IOE if stream is closed and a call is made to any read(), ready(), mark(), reset(), or skip() method as per javadocs for Reader.","Bug 44673  ServletInputStream still readable even when closed","servlet input stream servletinputstream still readabl even close","","","""java/org/apache/catalina/connector/InputBuffer.java""","2","2","2","1","12","1","8","1","2","0","2","25","25","25","14","25","0","0","1","24","491","124","256","81","148","111","124","179","63","116","7","7","7","4","3","0","55","55","56","32","normal"
"44809","137","Jean-Frederic Clere","Fix for PR#44809","Bug 44809  Improve AprLifecycleListener Error Messages","improv apr lifecycl listen aprlifecyclelisten error messag","","","""java/org/apache/catalina/core/AprLifecycleListener.java""","3","3","3","2","20","0","18","1","1","2","9","8","8","6","1","8","0","3","0","5","241","31","169","51","114","42","77","104","44","60","9","9","11","4","4","0","27","27","29","16","enhancement"
"44877","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=44877 Prevent collisions in tag pool names","Bug 44877  ClassCastException due to bad TagHandlerPool name generation of two different tags","class cast except classcastexcept due bad tag handler pool taghandlerpool name gener two differ tag","","","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","35","3","26","5","12","6","5","112","112","106","48","112","11","51","0","50","4136","506","2944","491","2306","713","1806","2286","475","1811","22","22","29","20","5","0","484","478","532","202","normal"
"44986","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=44986 Convert to upper case before comparing encoding names","Bug 44986  JSP compilation exception with pageEncoding=""utf-8""  and file with byte order marks","jsp compil except page encod pageencod utf file byte order mark","JSP-File has byte order marks. If the attribute is set to ""UTF-8"" (upper case) or the file has no byte order marks, the compilation workes fine. 

{code} 
12:32:16,946 ERROR [[jsp]] Servlet.service() for servlet jsp threw exception 
org.apache.jasper.JasperException: /dialog.jsp(2,0) Page-encoding specified in XML prolog (UTF-8) is different from that specified in page directive (utf-8) 
at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:40) 
at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:407) 
at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:236) 
at org.apache.jasper.compiler.Validator$DirectiveVisitor.comparePageEncodings(Validator.java:362) 
at org.apache.jasper.compiler.Validator$DirectiveVisitor.visit(Validator.java:197) 
at org.apache.jasper.compiler.Node$PageDirective.accept(Node.java:590) 
at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2338) 
at org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2388) 
at org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2394) 
at org.apache.jasper.compiler.Node$Root.accept(Node.java:489) 
at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2338) 
at org.apache.jasper.compiler.Validator.validate(Validator.java:1700) 
at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:178) 
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:306) 
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:286) 
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:273) 
at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:566) 
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:316) 
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:336) 
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265) 
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:654) 
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:445) 
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:379) 
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:292) 
at de.cit.jsp.control.DispatchServlet.forward(DispatchServlet.java:286) 
at de.cit.jsp.control.DispatchServlet.doGet(DispatchServlet.java:272) 
at javax.servlet.http.HttpServlet.service(HttpServlet.java:690) 
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
at de.cit.util.javax.servlet.ValidationFilter.doFilter(ValidationFilter.java:108) 
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
at de.cit.util.javax.servlet.jsp.XHtmlContentTypeFilter.doFilter(XHtmlContentTypeFilter.java:36) 
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96) 
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230) 
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) 
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:179) 
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:432) 
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84) 
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157) 
at org.apache.catalina.authenticator.SingleSignOn.invoke(SingleSignOn.java:420) 
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262) 
at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:437) 
at org.apache.coyote.ajp.AjpProtocol$AjpConnectionHandler.process(AjpProtocol.java:366) 
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446) 
at java.lang.Thread.run(Thread.java:619) 
{code} 

Case insensitive camparison in org.apache.jasper.compiler.Validator.comparePageEncodings(...) seems to fix the problem: 
{code} 
        /* 
         * Compares page encodings specified in various places, and throws 
         * exception in case of page encoding mismatch. 
         * 
         * @param pageDirEnc The value of the pageEncoding attribute of the page 
         * directive @param pageDir The page directive node 
         * 
         * @throws JasperException in case of page encoding mismatch 
         */ 
        private String comparePageEncodings(String pageDirEnc, 
                Node.PageDirective pageDir) throws JasperException { 

            Node.Root root = pageDir.getRoot(); 
            String configEnc = root.getJspConfigPageEncoding(); 

            /* 
             * Compare the 'pageEncoding' attribute of the page directive with 
             * the encoding specified in the JSP config element whose URL 
             * pattern matches this page. Treat ""UTF-16"", ""UTF-16BE"", and 
             * ""UTF-16LE"" as identical. 
             */ 
            if (configEnc != null) { 
                if (!pageDirEnc.equalsIgnoreCase(configEnc) 
                        && (!pageDirEnc.toUpperCase().startsWith(""UTF-16"") || !configEnc 
                                .toUpperCase().startsWith(""UTF-16""))) { 
                    err.jspError(pageDir, 
                            ""jsp.error.config_pagedir_encoding_mismatch"", 
                            configEnc, pageDirEnc); 
                } else { 
                    return configEnc; 
                } 
            } 

            /* 
             * Compare the 'pageEncoding' attribute of the page directive with 
             * the encoding specified in the XML prolog (only for XML syntax, 
             * and only if JSP document contains XML prolog with encoding 
             * declaration). Treat ""UTF-16"", ""UTF-16BE"", and ""UTF-16LE"" as 
             * identical. 
             */ 
            if ((root.isXmlSyntax() && root.isEncodingSpecifiedInProlog()) || root.isBomPresent()) { 
                String pageEnc = root.getPageEncoding(); 
                if (!pageDirEnc.equalsIgnoreCase(pageEnc) 
                        && (!pageDirEnc.toUpperCase().startsWith(""UTF-16"") || !pageEnc 
                                .toUpperCase().startsWith(""UTF-16""))) { 
                    err.jspError(pageDir, 
                            ""jsp.error.prolog_pagedir_encoding_mismatch"", 
                            pageEnc, pageDirEnc); 
                } else { 
                    return pageEnc; 
                } 
            } 
             
            return pageDirEnc; 
        } 
{code}","jsp file byte order mark attribut set utf upper case file byte order mark compil work fine code error jsp servlet servic servlet jsp threw except apach jasper jasper except jasperexcept dialog jsp page encod pageencod specifi xml prolog utf differ specifi page direct utf apach jasper compil default error handler defaulterrorhandl jsp error jsperror default error handler defaulterrorhandl java apach jasper compil error dispatch errordispatch dispatch error dispatch errordispatch java apach jasper compil error dispatch errordispatch jsp error jsperror error dispatch errordispatch java apach jasper compil valid direct visitor directivevisitor compar page encod comparepageencod valid java apach jasper compil valid direct visitor directivevisitor visit valid java apach jasper compil node page direct pagedirect accept node java apach jasper compil node node visit node java apach jasper compil node visitor visit bodi visitbodi node java apach jasper compil node visitor visit node java apach jasper compil node root accept node java apach jasper compil node node visit node java apach jasper compil valid valid valid java apach jasper compil compil gener java generatejava compil java apach jasper compil compil compil compil java apach jasper compil compil compil compil java apach jasper compil compil compil compil java apach jasper jsp compil context jspcompilationcontext compil jsp compil context jspcompilationcontext java apach jasper servlet jsp servlet wrapper jspservletwrapp servic jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet jspservlet servic jsp file servicejspfil jsp servlet jspservlet java apach jasper servlet jsp servlet jspservlet servic jsp servlet jspservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core applic dispatch applicationdispatch invok applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch process request processrequest applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch do forward doforward applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch forward applic dispatch applicationdispatch java cit jsp control dispatch servlet dispatchservlet forward dispatch servlet dispatchservlet java cit jsp control dispatch servlet dispatchservlet do get doget dispatch servlet dispatchservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java cit util javax servlet valid filter validationfilt do filter dofilt valid filter validationfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java cit util javax servlet jsp html content type filter xhtmlcontenttypefilt do filter dofilt html content type filter xhtmlcontenttypefilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java jboss web tomcat filter repli header filter replyheaderfilt do filter dofilt repli header filter replyheaderfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java jboss web tomcat secur secur associ valv securityassociationvalv invok secur associ valv securityassociationvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java jboss web tomcat secur jacc context valv jacccontextvalv invok jacc context valv jacccontextvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java jboss web tomcat servic jca cach connect valv cachedconnectionvalv invok cach connect valv cachedconnectionvalv java apach catalina authent singl sign on singlesignon invok singl sign on singlesignon java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot ajp ajp processor ajpprocessor process ajp processor ajpprocessor java apach coyot ajp ajp protocol ajpprotocol ajp connect handler ajpconnectionhandl process ajp protocol ajpprotocol java apach tomcat util net io endpoint jioendpoint worker run io endpoint jioendpoint java java lang thread run thread java code case insensit camparison apach jasper compil valid compar page encod comparepageencod seem fix problem code compar page encod specifi variou place throw except case page encod mismatch param page dir enc pagedirenc valu page encod pageencod attribut page direct param page dir pagedir page direct node throw jasper except jasperexcept case page encod mismatch privat string compar page encod comparepageencod string page dir enc pagedirenc node page direct pagedirect page dir pagedir throw jasper except jasperexcept node root root page dir pagedir get root getroot string config enc configenc root get jsp config page encod getjspconfigpageencod compar page encod pageencod attribut page direct encod specifi jsp config element whose url pattern match page treat utf utf 16 16be utf 16 16le ident config enc configenc null page dir enc pagedirenc equal ignor case equalsignorecas config enc configenc page dir enc pagedirenc to upper case touppercas start with startswith utf config enc configenc to upper case touppercas start with startswith utf err jsp error jsperror page dir pagedir jsp error config pagedir encod mismatch config enc configenc page dir enc pagedirenc els return config enc configenc compar page encod pageencod attribut page direct encod specifi xml prolog xml syntax jsp document contain xml prolog encod declar treat utf utf 16 16be utf 16 16le ident root is xml syntax isxmlsyntax root is encod specifi in prolog isencodingspecifiedinprolog root is bom present isbompres string page enc pageenc root get page encod getpageencod page dir enc pagedirenc equal ignor case equalsignorecas page enc pageenc page dir enc pagedirenc to upper case touppercas start with startswith utf page enc pageenc to upper case touppercas start with startswith utf err jsp error jsperror page dir pagedir jsp error prolog pagedir encod mismatch page enc pageenc page dir enc pagedirenc els return page enc pageenc return page dir enc pagedirenc code","""java/org/apache/jasper/compiler/Validator.java""","4","4","6","1","27","2","21","2","8","2","15","57","57","55","13","57","5","16","0","36","1774","231","1294","353","943","251","536","809","276","533","44","44","51","6","8","0","269","269","370","79","normal"
"45026","124","Rainer Jung","Add Mark's proposed fix for BZ 45026: mod_jk + httpd 2.x fails with a null status message.","Bug 45026  Custom HTTP-Error codes get remapped to 500er codes","custom http error code get remap 500er code","We use Apache 2.2.8 with mod_JK 1.2.26 as a load-balancer for a Tomcat 5.5 cluster.
We use Custom HTTP-Error codes like 450 for authentication-purposes. Those
codes get remapped to 500.
The Error-Code 450 is in the RFC2616 described as valid return code so this is
a bug.

The custom error-codes worked fine in Apache 1.3.41 with MOD_JK/1.2.25.

You can easily reproduce this bug by writing a simple jsp-page with the following
line:
<%response.setStatus(450);%>","use apach jk load balanc loadbalanc tomcat cluster use custom http error code like authent purpos authenticationpurpos code get remap error code c2616 rfc2616 describ valid return code custom error code errorcod work fine apach jk easili reproduc write simpl jsp page jsppage follow line respons set statu setstatu","""java/org/apache/jk/common/JkInputStream.java""","3","3","3","1","20","1","15","3","1","0","1","12","12","12","10","12","0","1","0","11","330","51","215","59","144","67","127","171","56","115","8","8","8","6","2","0","42","42","44","19","normal"
"45074","95","Jean-Frederic Clere","Fix for PR#45074","Bug 45074  Add configuration parameters for finer tuning of Http11AprProtocol thread usage","add configur paramet finer tune http11 apr protocol http11aprprotocol thread usag","","","""java/org/apache/coyote/http11/Http11AprProtocol.java""","1","1","1","1","3","0","3","0","3","0","2","113","113","113","30","113","1","0","3","109","694","117","424","189","299","153","260","414","186","228","7","7","7","4","3","0","155","155","156","116","enhancement"
"45101","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45101 Format dates for header value from DirContextURLConnection using HTTP format. Patch provided by Chris Hubick.","Bug 45101  DirContextURLConnection - Format Date Header Values per HTTP spec","dir context connect dircontexturlconnect format date header valu http spec","","","""java/org/apache/naming/resources/DirContextURLConnection.java""","4","4","4","2","20","2","14","3","1","0","0","13","13","13","7","13","0","0","0","13","410","91","218","71","123","102","101","159","64","95","10","10","10","8","5","0","57","57","58","37","normal"
"45279","0","Filip Hanik","fix for bug 45279, close multicast socket on close","Bug 45279  McastServiceImpl leaks sockets.","mcast servic impl mcastserviceimpl leak socket","McastServiceImpl does not close its socket in stop() as it claims. It merely calls leaveGroup(), which is sufficient to stop receiving messages, but does not close the socket. 

This causes a file descriptor leak each time the service is stopped.

add;

socket.close();

after leaveGroup();","mcast servic impl mcastserviceimpl close socket stop claim mere call leav group leavegroup suffici stop receiv messag close socket caus file descriptor leak time servic stop add socket close leav group leavegroup","""java/org/apache/catalina/tribes/membership/McastServiceImpl.java""","3","3","3","1","13","0","11","1","7","1","3","28","28","27","27","28","0","1","2","25","545","37","373","96","241","140","205","303","88","215","9","9","9","3","5","0","93","93","93","30","normal"
"45317","1","Filip Hanik","Fix for bug 45317, document and properly output the session timeout time","Bug 45317  DeltaManager always reports default timeout value for receiving session state on startup","delta manag deltamanag alway report default timeout valu receiv session state startup","Hi there,

If I override the state transfer timeout:
          <Manager className=""org.apache.catalina.ha.session.DeltaManager""
                   stateTransferTimeout=""10""
                   expireSessionsOnShutdown=""false""
                   notifyListenersOnReplication=""true""/>

DeltaManager continues to log the default timeout value (ie: ""This operation will timeout if no session state has been received within 60 seconds.""):

2008-07-01 14:31:30,419 WARN [org.apache.catalina.ha.session.DeltaManager] - Manager [localhost#/manager], requesting session state from org.apache.catalina.tribes.membership.MemberImpl[tcp://{10, -64, 104, -55}:15000,{10, -64, 104, -55},15000, alive=18586,id={-62 91 -70 -63 -111 50 70 -33 -104 41 -48 -32 91 34 -83 -55 }, payload={}, command={}, domain={}, ]. This operation will timeout if no session state has been received within 60 seconds. 
2008-07-01 14:31:35,310 WARN [org.apache.catalina.ha.ClusterListener] - Context manager doesn't exist:localhost#/host-manager 

But it actually uses the correct timeout value (ie: ""timing out after 10,100 ms""):

2008-07-01 14:31:40,518 ERROR [org.apache.catalina.ha.session.DeltaManager] - Manager [localhost#/manager]: No session state send at 01/07/08 14:31 received, timing out after 10,100 ms. 

This is only an incorrect message, but it is quite annoying especially coupled with the fact that the above configuration is only documented for tomcat 5 (where syntax is subtly different).","hi overrid state transfer timeout manag class name classnam apach catalina session delta manag deltamanag state transfer timeout statetransfertimeout expir session on shutdown expiresessionsonshutdown fals notifi listen on replic notifylistenersonrepl true delta manag deltamanag continu log default timeout valu ie oper timeout session state receiv within second warn apach catalina session delta manag deltamanag manag localhost manag request session state apach catalina tribe membership member impl memberimpl tcp aliv id payload command domain oper timeout session state receiv within second warn apach catalina cluster listen clusterlisten context manag doesn exist localhost host manag hostmanag actual us correct timeout valu ie time m error apach catalina session delta manag deltamanag manag localhost manag session state send receiv time m incorrect messag quit annoy especi coupl fact configur document tomcat syntax subtli differ","""java/org/apache/catalina/ha/session/DeltaManager.java""","2","2","2","1","14","0","9","4","1","0","4","90","90","90","38","90","0","0","21","69","1541","155","888","223","583","515","462","673","229","444","15","15","20","4","7","1","223","213","246","100","trivial"
"45419","62","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45419 Set the Accept-Ranges header on content served from the DefaultServlet. This can be disabled via configuration if required.","Bug 45419  Return Accept-Ranges from DefaultServlet","return accept rang default servlet defaultservlet","Currently the DefaultServlet accepts the ""Ranges"" request header, but doesn't indicate this in its response by returning ""Accept-Ranges: bytes"". Although this is not required in HTTP/1.1, setting the header is required in order for the Adobe Acrobat plugin to correctly handle Linearized PDF's (which can speed download by allowing random access to a PDF file).

Although it's not strictly necessary according to the specification I can't think of any reason why this header is not safe to set in a response from DefaultServlet, which is always dealing with static files, and not doing so has a negative impact on serving large PDF files - so I'm filing it as a bug rather than an RFE.","current default servlet defaultservlet accept rang request header doesn indic respons return accept rang byte although requir http set header requir order adob acrobat plugin correctli handl linear pdf speed download allow random access pdf file although strictli necessari accord specif think reason header safe set respons default servlet defaultservlet alway deal static file neg impact serv larg pdf file file rather rfe","""java/org/apache/catalina/servlets/DefaultServlet.java""","5","5","6","2","47","7","29","10","2","0","6","39","39","39","14","39","0","0","35","4","2151","419","1242","331","902","495","613","843","253","590","41","41","51","14","5","0","229","229","271","112","normal"
"45441","58","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45441 Filters for INCLUDE/FORWARD need to be matched against servletPath+pathinfo","Bug 45441  Matching of relevant servlet filters fails when request is forwarded...","match relev servlet filter fail request forward","I ran into a situation where Tomcat will not execute appropriate filters on a request that has been forwarded.

I'm using the handy URLRewriteFilter implementation (from tuckey.org).  When I forwarded a request internally, filters that had a matching url-pattern (in the web.xml file) and with a dispatcher setting of both REQUEST and FORWARD were not invoked.

On tracing the code (hours later), I found that the problem lies inside the ApplicationDispatcher code.  It set the DISPATCHER_REQUEST_PATH_ATTR state attribue to be the servletPath.  That meant that only matches using the servlet path would match, but longer (more exact) urls would fail to match.

For example, using the following filter mapping:

<filter-mapping>
   <filter-name>my-filter</filter-name>		   
   <url-pattern>/app/level/mycode.do</url-pattern>
   <dispatcher>REQUEST</dispatcher> 
   <dispatcher>FORWARD</dispatcher>
</filter-mapping>

would not match a request that was forwarded to /app/level/mycode.do, which it should! 

Changing the url pattern to be ""/app/*"" would match, but ""/app/level/*"" would not, since the servletPath was /app in this example.

The fix for this is quite simple.  In the ApplicationDispatcher.java code, in the method processRequest() (which is only called for forwards), change the following statement:

state.outerRequest.setAttribute
   (ApplicationFilterFactory.DISPATCHER_REQUEST_PATH_ATTR,
   servletPath);

to use requestURI instead as follows:

state.outerRequest.setAttribute
   (ApplicationFilterFactory.DISPATCHER_REQUEST_PATH_ATTR,
   requestURI );

This resolves the problem and let all the examples above correctly match and run the filter on a forward.

I believe includes will also be broken in the same manner. Similar changes to the doInclude() method in ApplicationDispatcher.java will likely resolve that issue as well, though I have not tested this personally.

Be nice to see this resolved in 6.0.17+.

Thanks!

....Andrzej","ran situat tomcat execut appropri filter request forward use handi rewrit filter urlrewritefilt implement tuckey forward request intern filter match url pattern urlpattern web xml file dispatch set request forward invok trace code hour later found problem lie insid applic dispatch applicationdispatch code set dispatch request path attr state attribu servlet path servletpath meant match use servlet path would match longer exact url would fail match exampl use follow filter map filter map filtermap filter name filternam my filter myfilt filter name filternam url pattern urlpattern app level mycod url pattern urlpattern dispatch request dispatch dispatch forward dispatch filter map filtermap would match request forward app level mycod chang url pattern app would match app level would sinc servlet path servletpath app exampl fix quit simpl applic dispatch applicationdispatch java code method process request processrequest call forward chang follow statement state outer request outerrequest set attribut setattribut applic filter factori applicationfilterfactori dispatch request path attr servlet path servletpath use request requesturi instead follow state outer request outerrequest set attribut setattribut applic filter factori applicationfilterfactori dispatch request path attr request requesturi resolv problem let exampl correctli match run filter forward believ includ broken manner similar chang do includ doinclud method applic dispatch applicationdispatch java like resolv issu well though test person nice see resolv thank andrzej","""java/org/apache/catalina/core/ApplicationDispatcher.java""","6","6","6","2","39","3","28","6","4","0","2","19","19","19","19","19","3","10","0","6","979","147","610","150","450","224","291","398","123","275","24","24","26","8","3","0","114","114","132","45","normal"
"45453","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45453 Add yet more synchronisation to JDBCRealm. Based on a patch provided by Santtu Hyrkk.","Bug 45453  JDBCRealm.getRoles bad synchronization causes hangs w/ DIGEST authentication","realm jdbcrealm get role getrol bad synchron caus hang digest authent","JDBCRealm.getRoles bad synchronization causes hangs w/ DIGEST authentication

JDBCRealm caches PreparedStatement preparedRoles. That, and missing synchronization in JDBCRealm and/or DigestAuthenticator allow two threads to call getRoles simultaneously so that T1 will do stmt.executeQuery() while T2 does stmt.setString(1, userName) plus another .executeQuery() on the same PreparedStatement object.

In the worst case, the JDBC driver gets confused by this, and blocks forever waiting for server response, causing all other threads that try to access DB hang. (This was observed with PostgreSQL 8.3-603-jdbc4 JDBC driver)

org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:451)
org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:350)
org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:254)
org.apache.catalina.realm.JDBCRealm.getRoles(JDBCRealm.java:631)
org.apache.catalina.realm.JDBCRealm.getPrincipal(JDBCRealm.java:596)
org.apache.catalina.realm.RealmBase.authenticate(RealmBase.java:399)
org.apache.catalina.authenticator.DigestAuthenticator.findPrincipal(DigestAuthenticator.java:283)
org.apache.catalina.authenticator.DigestAuthenticator.authenticate(DigestAuthenticator.java:176)","realm jdbcrealm get role getrol bad synchron caus hang digest authent realm jdbcrealm cach prepar statement preparedstat prepar role preparedrol miss synchron realm jdbcrealm digest authent digestauthent allow two thread call get role getrol simultan t1 stmt execut queri executequeri t2 stmt set string setstr user name usernam plu anoth execut queri executequeri prepar statement preparedstat object worst case jdbc driver get confus block forev wait server respons caus thread tri access db hang observ postgr postgresql 603 jdbc4 603jdbc4 jdbc driver postgresql jdbc2 abstract jdbc2 statement abstractjdbc2stat execut abstract jdbc2 statement abstractjdbc2stat java postgresql jdbc2 abstract jdbc2 statement abstractjdbc2stat execut with flag executewithflag abstract jdbc2 statement abstractjdbc2stat java postgresql jdbc2 abstract jdbc2 statement abstractjdbc2stat execut queri executequeri abstract jdbc2 statement abstractjdbc2stat java apach catalina realm realm jdbcrealm get role getrol realm jdbcrealm java apach catalina realm realm jdbcrealm get princip getprincip realm jdbcrealm java apach catalina realm realm base realmbas authent realm base realmbas java apach catalina authent digest authent digestauthent find princip findprincip digest authent digestauthent java apach catalina authent digest authent digestauthent authent digest authent digestauthent java","""java/org/apache/catalina/realm/JDBCRealm.java""","2","2","2","1","18","2","9","7","1","0","3","31","31","31","13","31","0","0","9","22","794","174","316","87","203","306","152","219","77","142","8","8","8","4","5","1","67","67","67","40","normal"
"45459","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45459 Provide info on possible cause of exception.","Bug 45459  Startup Listener error message unhelpful","startup listen error messag unhelp","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","17","2","10","4","1","0","3","260","260","260","90","260","0","13","7","240","5628","1194","2831","721","1839","1612","1342","2055","722","1333","62","62","80","9","5","1","647","647","697","333","normal"
"45576","3","Mark Emlyn David Thomas","Fix bug https://issues.apache.org/bugzilla/show_bug.cgi?id=45576 Get the JAASRealm working with DIGEST authentication.","Bug 45576  JAASRealm not working with DigestAuthenticator","realm jaasrealm work digest authent digestauthent","","","""java/org/apache/catalina/realm/JAASCallbackHandler.java""","4","4","4","1","28","2","16","10","1","0","1","2","2","2","3","2","0","0","0","2","142","26","48","19","25","68","26","35","17","18","6","6","6","1","3","1","8","8","8","2","normal"
"45576","3","Mark Emlyn David Thomas","Fix bug https://issues.apache.org/bugzilla/show_bug.cgi?id=45576 Get the JAASRealm working with DIGEST authentication.","Bug 45576  JAASRealm not working with DigestAuthenticator","realm jaasrealm work digest authent digestauthent","","","""java/org/apache/catalina/realm/JAASMemoryLoginModule.java""","3","3","4","1","29","3","16","10","1","0","2","8","8","8","8","8","0","0","1","7","398","70","171","59","113","158","108","139","58","81","10","10","11","3","3","1","31","31","33","12","normal"
"45576","3","Mark Emlyn David Thomas","Fix bug https://issues.apache.org/bugzilla/show_bug.cgi?id=45576 Get the JAASRealm working with DIGEST authentication.","Bug 45576  JAASRealm not working with DigestAuthenticator","realm jaasrealm work digest authent digestauthent","","","""java/org/apache/catalina/realm/JAASRealm.java""","3","3","3","1","19","2","10","6","1","0","4","18","18","18","6","18","0","0","6","12","572","100","223","63","141","249","111","165","60","105","21","21","21","10","4","1","57","57","58","30","normal"
"45591","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45591 - NPE on start-up failure in some cases","Bug 45591  NullPointerException during shutdown in JKMain.pause()","null pointer except nullpointerexcept shutdown main jkmain paus","On startup, if Tomcat discovers that the main port is already bound to another process, it fails and tries to execute the shutdown code.  In some situations (I'm not sure which), the org.apache.jk.server.JKMain instance variable wEnv is null at this point, which causes a NullPointerException when JKMain.pause() is called (see stacktrace below).  Since this is occurring within a shutdown hook thread, it can result in a dirty shutdown of the JVM.  I've observed this with Tomcat 5.5.20, but I looked over the code in 5.5.26 and it looks like the same problem is still present.

Fortunately, the solution is very simple.  Just add the following if test at the beginning of JKMain.pause():

        if (wEnv == null) {
          return;
        }


Stacktrace:
SEVERE: StandardServer.await: create[8006]: 
java.net.BindException: Address already in use: JVM_Bind
	at java.net.PlainSocketImpl.socketBind(Native Method)
	at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:359)
	at java.net.ServerSocket.bind(ServerSocket.java:319)
	at java.net.ServerSocket.<init>(ServerSocket.java:185)
	at org.apache.catalina.core.StandardServer.await(StandardServer.java:372)
	at org.apache.catalina.startup.Catalina.await(Catalina.java:615)
	at org.apache.catalina.startup.Catalina.start(Catalina.java:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:294)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:432)
Aug 7, 2008 3:25:34 PM org.apache.coyote.http11.Http11BaseProtocol pause
INFO: Pausing Coyote HTTP/1.1 on http-8000
Aug 7, 2008 3:25:34 PM org.apache.catalina.connector.Connector pause
SEVERE: Protocol handler pause failed
java.lang.NullPointerException
	at org.apache.jk.server.JkMain.pause(JkMain.java:678)
	at org.apache.jk.server.JkCoyoteHandler.pause(JkCoyoteHandler.java:162)
	at org.apache.catalina.connector.Connector.pause(Connector.java:1031)
	at org.apache.catalina.core.StandardService.stop(StandardService.java:491)
	at org.apache.catalina.core.StandardServer.stop(StandardServer.java:743)
	at org.apache.catalina.startup.Catalina.stop(Catalina.java:601)
	at org.apache.catalina.startup.Catalina$CatalinaShutdownHook.run(Catalina.java:644)","startup tomcat discov main port alreadi bound anoth process fail tri execut shutdown code situat sure apach jk server main jkmain instanc variabl env wenv null point caus null pointer except nullpointerexcept main jkmain paus call see stacktrac sinc occur within shutdown hook thread result dirti shutdown jvm observ tomcat look code look like problem still present fortun solut simpl add follow begin main jkmain paus env wenv null return stacktrac sever standard server standardserv await creat java net bind except bindexcept address alreadi use jvm bind java net plain socket impl plainsocketimpl socket bind socketbind nativ method java net plain socket impl plainsocketimpl bind plain socket impl plainsocketimpl java java net server socket serversocket bind server socket serversocket java java net server socket serversocket init server socket serversocket java apach catalina core standard server standardserv await standard server standardserv java apach catalina startup catalina await catalina java apach catalina startup catalina start catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap start bootstrap java apach catalina startup bootstrap main bootstrap java aug pm apach coyot http11 http11 base protocol http11baseprotocol paus info paus coyot http http aug pm apach catalina connector connector paus sever protocol handler paus fail java lang null pointer except nullpointerexcept apach jk server jk main jkmain paus jk main jkmain java apach jk server jk coyot handler jkcoyotehandl paus jk coyot handler jkcoyotehandl java apach catalina connector connector paus connector java apach catalina core standard servic standardservic stop standard servic standardservic java apach catalina core standard server standardserv stop standard server standardserv java apach catalina startup catalina stop catalina java apach catalina startup catalina catalina shutdown hook catalinashutdownhook run catalina java","""java/org/apache/jk/server/JkMain.java""","2","2","2","1","10","0","9","0","1","2","6","46","46","44","15","46","0","10","0","36","695","96","489","140","302","111","258","373","140","233","9","9","10","5","4","0","114","114","117","64","normal"
"45608","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45608 Use AtomicInteger for countAllocated to prevent race conditions.","Bug 45608  Race conditions on field countAllocated of class org.apache.catalina.core.StandardWrapper","race condit field count alloc countalloc class apach catalina core standard wrapper standardwrapp","We found field countAllocated are accessed by allocate() and deallocate() without any protections by locks.

Here is a trace log,

  Thread http-8081-1 id: 23 : READ
      [org.apache.catalina.core.StandardWrapper : allocate : 820]
      [org.apache.catalina.core.StandardWrapperValve : invoke : 129]
      [org.apache.catalina.core.StandardContextValve : invoke : 175]
      [org.apache.catalina.core.StandardHostValve : invoke : 128]
      [org.apache.catalina.valves.ErrorReportValve : invoke : 104]
      [org.apache.catalina.core.StandardEngineValve : invoke : 109]
      [org.apache.catalina.connector.CoyoteAdapter : service : 261]
      [org.apache.coyote.http11.Http11Processor : process : 844]
      [org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler : process : 581]
      [org.apache.tomcat.util.net.JIoEndpoint$Worker : run : 447]
      [java.lang.Thread : run : 735]

  Thread http-8081-4 id: 26 : WRITE

      [org.apache.catalina.core.StandardWrapper : deallocate : 871]
      [org.apache.catalina.core.StandardWrapperValve : invoke : 298]
      [org.apache.catalina.core.StandardContextValve : invoke : 175]
      [org.apache.catalina.core.StandardHostValve : invoke : 128] 
      [org.apache.catalina.valves.ErrorReportValve : invoke : 104] 
      [org.apache.catalina.core.StandardEngineValve : invoke : 109]
      [org.apache.catalina.connector.CoyoteAdapter : service : 261]
      [org.apache.coyote.http11.Http11Processor : process : 844]
      [org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler : process : 581]
      [org.apache.tomcat.util.net.JIoEndpoint$Worker : run : 447]
      [java.lang.Thread : run : 735]

Thread http-8081-4 and http-8081-1 will access countAllocated in parallel.  Since increment and decrement is *NOT* atomic, we think it is a potential race condition.","found field count alloc countalloc access alloc dealloc without protect lock trace log thread http id read apach catalina core standard wrapper standardwrapp alloc apach catalina core standard wrapper valv standardwrappervalv invok apach catalina core standard context valv standardcontextvalv invok apach catalina core standard host valv standardhostvalv invok apach catalina valv error report valv errorreportvalv invok apach catalina core standard engin valv standardenginevalv invok apach catalina connector coyot adapt coyoteadapt servic apach coyot http11 http11 processor http11processor process apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process apach tomcat util net io endpoint jioendpoint worker run java lang thread run thread http id write apach catalina core standard wrapper standardwrapp dealloc apach catalina core standard wrapper valv standardwrappervalv invok apach catalina core standard context valv standardcontextvalv invok apach catalina core standard host valv standardhostvalv invok apach catalina valv error report valv errorreportvalv invok apach catalina core standard engin valv standardenginevalv invok apach catalina connector coyot adapt coyoteadapt servic apach coyot http11 http11 processor http11processor process apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process apach tomcat util net io endpoint jioendpoint worker run java lang thread run thread http http access count alloc countalloc parallel sinc increment decrement atom think potenti race condit","""java/org/apache/catalina/core/StandardWrapper.java""","2","2","2","1","16","2","10","4","1","1","5","80","80","79","27","80","0","0","4","76","1780","383","887","223","578","513","385","572","205","367","23","23","29","3","5","1","182","182","199","90","normal"
"45618","21","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45618 Make sure the selector is closed. Almost certain not to be an issue in any real deployment but still - technically - a bug.","Bug 45618  Selector is not closed.","selector close","","","""java/org/apache/catalina/tribes/transport/nio/ParallelNioSender.java""","5","5","5","1","18","0","16","1","1","0","1","13","13","13","3","13","0","5","0","8","310","33","240","71","163","40","150","216","77","139","17","17","19","1","5","0","67","67","70","13","trivial"
"45628","19","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45628 Jars that declare no deps should return that deps are satisfied","Bug 45628  ExtensionValidator doesn't handle wrapped lines in MANIFEST.MF","extens valid extensionvalid doesn handl wrap line manifest mf","","","""java/org/apache/catalina/util/ManifestResource.java""","2","2","2","1","14","1","9","4","1","0","3","12","12","12","4","12","0","3","0","9","242","34","122","42","85","86","77","99","40","59","5","5","5","5","2","1","26","24","26","19","normal"
"45648","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45648 Note ELParser.java is auto-generated","Bug 45648  Function 'f:length' not found","function length found","","","""java/org/apache/el/parser/ELParser.java""","9","7","9","1","28","0","28","0","3","3","2","52","52","49","26","52","0","11","0","41","1698","51","1509","167","1168","139","790","1147","191","956","64","46","64","9","5","0","479","395","481","91","regression"
"45655","1","Mark Emlyn David Thomas","Remove unnecessary casts. Reported by Jens Kapitza in https://issues.apache.org/bugzilla/show_bug.cgi?id=45655","Bug 45655  check permisson","check permisson","","","""java/org/apache/juli/ClassLoaderLogManager.java""","3","3","3","1","21","1","16","4","7","1","0","21","21","20","9","21","6","0","5","10","572","84","361","121","225","127","171","249","108","141","14","14","15","9","5","0","75","75","81","36","trivial"
"45666","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45666 Patch provided by Tom Wadzinski","Bug 45666  JspContextWrapper contains infinite loop in include(String relativeUrlPath, boolean flush)","jsp context wrapper jspcontextwrapp contain infinit loop includ string rel url path relativeurlpath boolean flush","public void include(String relativeUrlPath, boolean flush)
			throws ServletException, IOException {
		include(relativeUrlPath, false); // XXX
	}

just calls itself it seems. Perhaps this should be (just a guess):

public void include(String relativeUrlPath, boolean flush)
			throws ServletException, IOException {
		invokingJspCtxt.include(relativeUrlPath, false); // XXX
	}

This came up for me when I had a .tag file that had an include in it. 

I was using Tomcat 5.5 but looking at the source of JspContextWrapper.java it looks like this issue is in 5.5 as well as 6 (and the svn trunk).","public void includ string rel url path relativeurlpath boolean flush throw servlet except servletexcept except ioexcept includ rel url path relativeurlpath fals xxx call seem perhap guess public void includ string rel url path relativeurlpath boolean flush throw servlet except servletexcept except ioexcept invok jsp ctxt invokingjspctxt includ rel url path relativeurlpath fals xxx came tag file includ use tomcat look sourc jsp context wrapper jspcontextwrapp java look like issu well svn trunk","""java/org/apache/jasper/runtime/JspContextWrapper.java""","1","1","1","1","8","0","6","1","1","0","0","39","39","39","7","39","0","4","0","35","462","78","303","94","147","82","127","202","85","117","9","7","10","3","3","0","76","74","77","41","normal"
"45691","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45691 Make temporary variable name generation safe when multiple compilations are running in parallel","Bug 45691  Jasper creates duplicate variable names","jasper creat duplic variabl name","Sometimes a JSP's Java code, which have been generated by Jasper, has duplicate variable names. Therefore the JSP cannot be compiled and tomcat delivers an HTTP status code 500. You get an error message like this

org.apache.jasper.JasperException: Unable to compile class for JSP: 
An error occurred at line: 10 in the jsp file: /test1.jsp
Duplicate local variable _jspx_temp0
7: 		<c:set var=""a"">
8: 			<jsp:attribute name=""value""><%= new java.util.Date().toString() %></jsp:attribute>
9: 		</c:set>
10: 		<c:set var=""b"">
11: 			<jsp:attribute name=""value""><%= new java.util.Date().toString() %></jsp:attribute>
12: 		</c:set>
13: 		<h1>Test 1</h1>

The reason of this error is the generation of variable names like _jspx_temp0, which are created for <jsp:attribute> tags. At the beginning of parsing a JSP file a counter is reset to 0. Every time an <jsp:attribute> tag occurs, the counter is used to build a variable name _jspx_temp<counter>. Thereafter the counter will be incremented. Unfortunately the counter is a static member of the JspUtil class. Suppose there's a thread 1, which created _jspx_temp4. The counter is 5. Now a second thread (thread 2) starts and resets the counter. Afterwards thread 2 creates _jspx_temp0 to _jspx_temp3. The counter is 4 by now. Then thread 2 stops and thread 1 continues. The next variable's name in thread 1 will be _jspx_temp4, which already exists. Therefore the generated java class cannot be compiled.","sometim jsp java code gener jasper duplic variabl name therefor jsp cannot compil tomcat deliv http statu code get error messag like apach jasper jasper except jasperexcept unabl compil class jsp error occur line jsp file test1 jsp duplic local variabl jspx temp0 set jsp attribut name valu new java util date to string tostr jsp attribut set set jsp attribut name valu new java util date to string tostr jsp attribut set h1 h1 reason error gener variabl name like jspx temp0 creat jsp attribut tag begin pars jsp file counter reset everi time jsp attribut tag occur counter use build variabl name jspx temp counter thereaft counter increment unfortun counter static member jsp util jsputil class suppos thread creat jspx temp4 counter second thread thread start reset counter afterward thread creat jspx temp0 jspx temp3 counter thread stop thread continu next variabl name thread jspx temp4 alreadi exist therefor gener java class cannot compil","""java/org/apache/jasper/compiler/Compiler.java""","4","4","4","2","31","3","20","7","1","0","0","14","15","15","8","15","0","1","2","12","525","78","314","77","205","133","151","216","70","146","18","18","20","13","3","0","63","63","65","28","normal"
"45691","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45691 Make temporary variable name generation safe when multiple compilations are running in parallel","Bug 45691  Jasper creates duplicate variable names","jasper creat duplic variabl name","Sometimes a JSP's Java code, which have been generated by Jasper, has duplicate variable names. Therefore the JSP cannot be compiled and tomcat delivers an HTTP status code 500. You get an error message like this

org.apache.jasper.JasperException: Unable to compile class for JSP: 
An error occurred at line: 10 in the jsp file: /test1.jsp
Duplicate local variable _jspx_temp0
7: 		<c:set var=""a"">
8: 			<jsp:attribute name=""value""><%= new java.util.Date().toString() %></jsp:attribute>
9: 		</c:set>
10: 		<c:set var=""b"">
11: 			<jsp:attribute name=""value""><%= new java.util.Date().toString() %></jsp:attribute>
12: 		</c:set>
13: 		<h1>Test 1</h1>

The reason of this error is the generation of variable names like _jspx_temp0, which are created for <jsp:attribute> tags. At the beginning of parsing a JSP file a counter is reset to 0. Every time an <jsp:attribute> tag occurs, the counter is used to build a variable name _jspx_temp<counter>. Thereafter the counter will be incremented. Unfortunately the counter is a static member of the JspUtil class. Suppose there's a thread 1, which created _jspx_temp4. The counter is 5. Now a second thread (thread 2) starts and resets the counter. Afterwards thread 2 creates _jspx_temp0 to _jspx_temp3. The counter is 4 by now. Then thread 2 stops and thread 1 continues. The next variable's name in thread 1 will be _jspx_temp4, which already exists. Therefore the generated java class cannot be compiled.","sometim jsp java code gener jasper duplic variabl name therefor jsp cannot compil tomcat deliv http statu code get error messag like apach jasper jasper except jasperexcept unabl compil class jsp error occur line jsp file test1 jsp duplic local variabl jspx temp0 set jsp attribut name valu new java util date to string tostr jsp attribut set set jsp attribut name valu new java util date to string tostr jsp attribut set h1 h1 reason error gener variabl name like jspx temp0 creat jsp attribut tag begin pars jsp file counter reset everi time jsp attribut tag occur counter use build variabl name jspx temp counter thereaft counter increment unfortun counter static member jsp util jsputil class suppos thread creat jspx temp4 counter second thread thread start reset counter afterward thread creat jspx temp0 jspx temp3 counter thread stop thread continu next variabl name thread jspx temp4 alreadi exist therefor gener java class cannot compil","""java/org/apache/jasper/compiler/JspUtil.java""","3","3","4","2","20","1","15","4","2","45","9","48","48","3","3","48","2","1","0","45","1136","108","761","195","508","268","368","547","162","385","17","17","18","11","4","0","188","180","216","101","normal"
"45691","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45691 Make temporary variable name generation safe when multiple compilations are running in parallel","Bug 45691  Jasper creates duplicate variable names","jasper creat duplic variabl name","Sometimes a JSP's Java code, which have been generated by Jasper, has duplicate variable names. Therefore the JSP cannot be compiled and tomcat delivers an HTTP status code 500. You get an error message like this

org.apache.jasper.JasperException: Unable to compile class for JSP: 
An error occurred at line: 10 in the jsp file: /test1.jsp
Duplicate local variable _jspx_temp0
7: 		<c:set var=""a"">
8: 			<jsp:attribute name=""value""><%= new java.util.Date().toString() %></jsp:attribute>
9: 		</c:set>
10: 		<c:set var=""b"">
11: 			<jsp:attribute name=""value""><%= new java.util.Date().toString() %></jsp:attribute>
12: 		</c:set>
13: 		<h1>Test 1</h1>

The reason of this error is the generation of variable names like _jspx_temp0, which are created for <jsp:attribute> tags. At the beginning of parsing a JSP file a counter is reset to 0. Every time an <jsp:attribute> tag occurs, the counter is used to build a variable name _jspx_temp<counter>. Thereafter the counter will be incremented. Unfortunately the counter is a static member of the JspUtil class. Suppose there's a thread 1, which created _jspx_temp4. The counter is 5. Now a second thread (thread 2) starts and resets the counter. Afterwards thread 2 creates _jspx_temp0 to _jspx_temp3. The counter is 4 by now. Then thread 2 stops and thread 1 continues. The next variable's name in thread 1 will be _jspx_temp4, which already exists. Therefore the generated java class cannot be compiled.","sometim jsp java code gener jasper duplic variabl name therefor jsp cannot compil tomcat deliv http statu code get error messag like apach jasper jasper except jasperexcept unabl compil class jsp error occur line jsp file test1 jsp duplic local variabl jspx temp0 set jsp attribut name valu new java util date to string tostr jsp attribut set set jsp attribut name valu new java util date to string tostr jsp attribut set h1 h1 reason error gener variabl name like jspx temp0 creat jsp attribut tag begin pars jsp file counter reset everi time jsp attribut tag occur counter use build variabl name jspx temp counter thereaft counter increment unfortun counter static member jsp util jsputil class suppos thread creat jspx temp4 counter second thread thread start reset counter afterward thread creat jspx temp0 jspx temp3 counter thread stop thread continu next variabl name thread jspx temp4 alreadi exist therefor gener java class cannot compil","""java/org/apache/jasper/compiler/Node.java""","1","1","1","1","5","0","4","0","40","0","1","299","300","300","91","300","4","2","2","292","2549","460","1546","568","630","548","642","1042","510","532","6","6","6","6","5","0","367","363","378","327","normal"
"45691","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45691 Make temporary variable name generation safe when multiple compilations are running in parallel","Bug 45691  Jasper creates duplicate variable names","jasper creat duplic variabl name","Sometimes a JSP's Java code, which have been generated by Jasper, has duplicate variable names. Therefore the JSP cannot be compiled and tomcat delivers an HTTP status code 500. You get an error message like this

org.apache.jasper.JasperException: Unable to compile class for JSP: 
An error occurred at line: 10 in the jsp file: /test1.jsp
Duplicate local variable _jspx_temp0
7: 		<c:set var=""a"">
8: 			<jsp:attribute name=""value""><%= new java.util.Date().toString() %></jsp:attribute>
9: 		</c:set>
10: 		<c:set var=""b"">
11: 			<jsp:attribute name=""value""><%= new java.util.Date().toString() %></jsp:attribute>
12: 		</c:set>
13: 		<h1>Test 1</h1>

The reason of this error is the generation of variable names like _jspx_temp0, which are created for <jsp:attribute> tags. At the beginning of parsing a JSP file a counter is reset to 0. Every time an <jsp:attribute> tag occurs, the counter is used to build a variable name _jspx_temp<counter>. Thereafter the counter will be incremented. Unfortunately the counter is a static member of the JspUtil class. Suppose there's a thread 1, which created _jspx_temp4. The counter is 5. Now a second thread (thread 2) starts and resets the counter. Afterwards thread 2 creates _jspx_temp0 to _jspx_temp3. The counter is 4 by now. Then thread 2 stops and thread 1 continues. The next variable's name in thread 1 will be _jspx_temp4, which already exists. Therefore the generated java class cannot be compiled.","sometim jsp java code gener jasper duplic variabl name therefor jsp cannot compil tomcat deliv http statu code get error messag like apach jasper jasper except jasperexcept unabl compil class jsp error occur line jsp file test1 jsp duplic local variabl jspx temp0 set jsp attribut name valu new java util date to string tostr jsp attribut set set jsp attribut name valu new java util date to string tostr jsp attribut set h1 h1 reason error gener variabl name like jspx temp0 creat jsp attribut tag begin pars jsp file counter reset everi time jsp attribut tag occur counter use build variabl name jspx temp counter thereaft counter increment unfortun counter static member jsp util jsputil class suppos thread creat jspx temp4 counter second thread thread start reset counter afterward thread creat jspx temp0 jspx temp3 counter thread stop thread continu next variabl name thread jspx temp4 alreadi exist therefor gener java class cannot compil","""java/org/apache/jasper/compiler/TagPluginManager.java""","1","1","1","1","8","0","7","0","3","0","2","21","21","21","8","21","1","3","0","17","240","38","171","60","97","31","87","127","59","68","10","10","10","8","2","0","38","38","40","30","normal"
"45735","51","Mark Emlyn David Thomas","Apply Remy's patch for 45735 and align trunk with 6.0.x.","Bug 45735  Updated ResourceAttributes.getETag","updat resourc attribut resourceattribut get tag getetag","After looking at a user's list post, I noticed the implementation was not consistent with the other getters (like getName).

I propose changing it to:
    public String getETag(boolean strong) {
        if (strong) {
            // The strong ETag must always be calculated by the resources
            if (strongETag != null)
                return strongETag;
            if (attributes != null) {
                Attribute attribute = attributes.get(ETAG);
                if (attribute != null) {
                    try {
                        strongETag = attribute.get().toString();
                    } catch (NamingException e) {
                        ; // No value for the attribute
                    }
                }
            }
            return strongETag;
        } else {
            // The weakETag is contentLenght + lastModified
            if (weakETag == null) {
                weakETag = ""W/\"""" + getContentLength() + ""-"" 
                    + getLastModified() + ""\"""";
            }
            return weakETag;
        }
    }","look user list post notic implement consist getter like get name getnam propos chang public string get tag getetag boolean strong strong strong tag etag must alway calcul resourc strong tag strongetag null return strong tag strongetag attribut null attribut attribut attribut get etag attribut null tri strong tag strongetag attribut get to string tostr catch name except namingexcept valu attribut return strong tag strongetag els weak tag weaketag content lenght contentlenght last modifi lastmodifi weak tag weaketag null weak tag weaketag get content length getcontentlength get last modifi getlastmodifi return weak tag weaketag","""java/org/apache/naming/resources/ResourceAttributes.java""","4","4","4","1","19","0","14","4","1","0","18","35","35","35","12","35","0","0","0","35","993","152","573","136","409","279","279","427","135","292","24","24","24","24","6","0","159","159","164","68","minor"
"45823","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45823 Log '-' rather than null when request headers are not present Based on a patch by Per Landberg","Bug 45823  AccessLogValve doesn't correctly handles combined log format (with patch)","access log valv accesslogvalv doesn correctli handl combin log format patch","","","""java/org/apache/catalina/valves/AccessLogValve.java""","2","2","2","1","12","0","8","3","26","0","3","73","74","74","40","74","0","7","2","65","1482","228","775","237","445","486","349","525","209","316","21","10","21","4","4","1","169","146","179","80","normal"
"45851","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45851 Correct NPE when cluster is defined at engine level Ensure that only 1 thread writes the replicated WAR to disk and that the messages containing the WAR are processed in the correct order.","Bug 45851  FarmWarDeployer fails to properly unpack copied war on target node","farm war deploy farmwardeploy fail properli unpack copi target node","","","""java/org/apache/catalina/ha/deploy/FarmWarDeployer.java""","2","2","2","1","14","0","9","3","1","0","2","40","40","40","15","40","0","0","11","29","750","80","436","130","296","235","210","313","123","190","14","14","14","4","6","1","99","99","101","43","normal"
"45851","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45851 Correct NPE when cluster is defined at engine level Ensure that only 1 thread writes the replicated WAR to disk and that the messages containing the WAR are processed in the correct order.","Bug 45851  FarmWarDeployer fails to properly unpack copied war on target node","farm war deploy farmwardeploy fail properli unpack copi target node","","","""java/org/apache/catalina/ha/deploy/FileMessageFactory.java""","3","3","3","1","26","0","15","11","1","2","2","8","8","6","9","8","0","1","1","6","312","24","141","37","100","154","72","98","31","67","6","6","6","3","2","1","25","25","25","10","normal"
"45933","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45933 Don't use parser from web-app for tld files","Bug 45933  Error processing TLD file in webapp with XML parser","error process tld file webapp xml parser","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","17","2","10","4","1","0","3","262","262","262","91","262","0","13","7","242","5660","1200","2848","724","1851","1622","1349","2065","725","1340","62","62","80","9","5","1","651","651","701","335","normal"
"45933","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45933 Don't use parser from web-app for tld files","Bug 45933  Error processing TLD file in webapp with XML parser","error process tld file webapp xml parser","","","""java/org/apache/catalina/startup/TldConfig.java""","4","4","4","1","23","1","16","6","1","2","6","22","22","20","3","22","0","10","0","12","733","91","438","119","287","205","224","314","114","200","14","14","17","7","5","0","88","88","96","41","normal"
"45951","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45951 Based on jfclere's patch","Bug 45951  Provide support for renaming  JSESSIONID","provid support renam jsessionid","","","""java/org/apache/catalina/Globals.java""","0","0","0","0","0","0","0","0","1","0","39","0","0","0","0","0","0","0","0","0","340","78","79","78","39","183","40","41","41","0","0","0","0","0","0","2","0","0","0","0","normal"
"45951","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45951 Based on jfclere's patch","Bug 45951  Provide support for renaming  JSESSIONID","provid support renam jsessionid","","","""java/org/apache/catalina/authenticator/Constants.java""","0","0","0","0","0","0","0","0","1","0","19","0","0","0","0","0","0","0","0","0","138","35","29","28","19","74","20","21","21","0","0","0","0","0","0","3","0","0","0","0","normal"
"45951","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45951 Based on jfclere's patch","Bug 45951  Provide support for renaming  JSESSIONID","provid support renam jsessionid","","","""java/org/apache/catalina/authenticator/Constants.java""","0","0","0","0","0","0","0","0","1","0","19","0","0","0","0","0","0","0","0","0","138","35","29","28","19","74","20","21","21","0","0","0","0","0","0","3","0","0","0","0","normal"
"45951","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45951 Based on jfclere's patch","Bug 45951  Provide support for renaming  JSESSIONID","provid support renam jsessionid","","","""java/org/apache/jasper/Constants.java""","0","0","0","0","0","0","0","0","1","0","31","0","0","0","0","0","0","0","0","0","198","28","69","67","39","107","32","33","33","0","0","0","0","0","0","2","0","0","0","0","normal"
"45951","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45951 Based on jfclere's patch","Bug 45951  Provide support for renaming  JSESSIONID","provid support renam jsessionid","","","""java/org/apache/jasper/Constants.java""","0","0","0","0","0","0","0","0","1","0","31","0","0","0","0","0","0","0","0","0","198","28","69","67","39","107","32","33","33","0","0","0","0","0","0","2","0","0","0","0","normal"
"45977","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45977 Trivial comment clean up. No plans to backport this.","Bug 45977  Duplicate comment in code - CoyoteAdapter.java","duplic comment code coyot adapt coyoteadapt java","The XXX comments below seem to say the same thing.  Not sure what the XXX represents.


    /**
     * Parse additional request parameters.
     */
    protected boolean postParseRequest(org.apache.coyote.Request req, 
                                       Request request,
    		                       org.apache.coyote.Response res, 
                                       Response response)
            throws Exception {

        // XXX the processor needs to set a correct scheme and port prior to this point, 
        // in ajp13 protocols dont make sense to get the port from the connector..
        // XXX the processor may have set a correct scheme and port prior to this point, 
        // in ajp13 protocols dont make sense to get the port from the connector...
        // otherwise, use connector configuration
        if (! req.scheme().isNull()) {
            // use processor specified scheme to determine secure state
            request.setSecure(req.scheme().equals(""https""));","xxx comment seem say thing sure xxx repres pars addit request paramet protect boolean post pars request postparserequest apach coyot request req request request apach coyot respons re respons respons throw except xxx processor need set correct scheme port prior point ajp13 protocol dont make sens get port connector xxx processor may set correct scheme port prior point ajp13 protocol dont make sens get port connector otherwis use connector configur req scheme is null isnul use processor specifi scheme determin secur state request set secur setsecur req scheme equal http","""java/org/apache/catalina/connector/CoyoteAdapter.java""","10","10","12","4","66","7","45","13","1","3","5","11","11","8","2","11","0","0","6","5","869","138","544","111","400","187","299","409","104","305","23","23","27","13","6","0","111","111","132","50","normal"
"45995","1358","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45995 Align Tomcat with Apache httpd and perform MIME type mapping based on file extension in a case insensitive manner.","Bug 45995  RFE - MIME type extension not case sensitive","rfe mime type extens case sensit","Hi,

On the dev-tomcat list I described in the topic ""Byte Serving and PDFs with the DefaultServlet"" an issue that I had with Tomcat to serve PDFs.

Analysing the answers I could find that the matter was related to the case of the file extension. Today Tomcat is case sensitive for MIME type extensions.

So the solution for me was enter two MIME specifications on the web.xml file. One is for ""pdf"" and another one for ""PDF"".

This way I would like to ask for and request for enhancement to make Tomcat be able to, due a setup on configuration file, consider or not case for MIME type extensions.

Regards,

Vitor","hi dev tomcat devtomcat list describ topic byte serv pdf default servlet defaultservlet issu tomcat serv pdf analys answer could find matter relat case file extens today tomcat case sensit mime type extens solut enter two mime specif web xml file one pdf anoth one pdf way would like ask request enhanc make tomcat abl due setup configur file consid case mime type extens regard vitor","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","2","0","2","296","296","296","123","296","0","12","9","275","6339","1262","3264","1006","1966","1818","1454","2228","830","1398","53","53","67","9","5","1","680","680","737","385","enhancement"
"46011","21","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46011 Make Principal accessible (if set) via Subject.getSubject(AccessController.getContext()) when processing filters. Based on a patch provided by tsveg1","Bug 46011  Cannot access to Principal via Subject.getSubject(AccessController.getContext())","cannot access princip via subject get subject getsubject access control accesscontrol get context getcontext","Cannot access to Principal via Subject.getSubject(AccessController.getContext()).

Problem is that in method internalDoFilter of ApplicationFilterChain in call of filter chain the code determinate the Principal but don't use it:

                if( Globals.IS_SECURITY_ENABLED ) {
                    final ServletRequest req = request;
                    final ServletResponse res = response;
                    Principal principal = 
                        ((HttpServletRequest) req).getUserPrincipal();

                    Object[] args = new Object[]{req, res, this};
                    SecurityUtil.doAsPrivilege
                        (""doFilter"", filter, classType, args);
                    
                    args = null;
                } else {  

In this manner a SecurityUtil.doAsPrivilege will be called with Principal == null
and method execute create a Subject with no Principals.
Then call a Subject.doAsPrivileged(subject, pea, null);  and this do not propagate Principals. I obtain a Subject without Principals calling Subject.getSubject(AccessController.getContext()).

In attachment we send our solution","cannot access princip via subject get subject getsubject access control accesscontrol get context getcontext problem method intern do filter internaldofilt applic filter chain applicationfilterchain call filter chain code determin princip use global secur enabl final servlet request servletrequest req request final servlet respons servletrespons re respons princip princip http servlet request httpservletrequest req get user princip getuserprincip object arg new object req re secur util securityutil do privileg doasprivileg do filter dofilt filter class type classtyp arg arg null els manner secur util securityutil do privileg doasprivileg call princip null method execut creat subject princip call subject do privileg doasprivileg subject pea null propag princip obtain subject without princip call subject get subject getsubject access control accesscontrol get context getcontext attach send solut","""java/org/apache/catalina/core/ApplicationFilterChain.java""","3","3","4","1","28","2","18","7","3","2","8","14","14","12","5","14","5","2","0","7","576","91","306","88","217","179","143","188","74","114","19","19","20","1","3","1","55","55","56","14","major"
"46011","21","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46011 Make Principal accessible (if set) via Subject.getSubject(AccessController.getContext()) when processing filters. Based on a patch provided by tsveg1","Bug 46011  Cannot access to Principal via Subject.getSubject(AccessController.getContext())","cannot access princip via subject get subject getsubject access control accesscontrol get context getcontext","Cannot access to Principal via Subject.getSubject(AccessController.getContext()).

Problem is that in method internalDoFilter of ApplicationFilterChain in call of filter chain the code determinate the Principal but don't use it:

                if( Globals.IS_SECURITY_ENABLED ) {
                    final ServletRequest req = request;
                    final ServletResponse res = response;
                    Principal principal = 
                        ((HttpServletRequest) req).getUserPrincipal();

                    Object[] args = new Object[]{req, res, this};
                    SecurityUtil.doAsPrivilege
                        (""doFilter"", filter, classType, args);
                    
                    args = null;
                } else {  

In this manner a SecurityUtil.doAsPrivilege will be called with Principal == null
and method execute create a Subject with no Principals.
Then call a Subject.doAsPrivileged(subject, pea, null);  and this do not propagate Principals. I obtain a Subject without Principals calling Subject.getSubject(AccessController.getContext()).

In attachment we send our solution","cannot access princip via subject get subject getsubject access control accesscontrol get context getcontext problem method intern do filter internaldofilt applic filter chain applicationfilterchain call filter chain code determin princip use global secur enabl final servlet request servletrequest req request final servlet respons servletrespons re respons princip princip http servlet request httpservletrequest req get user princip getuserprincip object arg new object req re secur util securityutil do privileg doasprivileg do filter dofilt filter class type classtyp arg arg null els manner secur util securityutil do privileg doasprivileg call princip null method execut creat subject princip call subject do privileg doasprivileg subject pea null propag princip obtain subject without princip call subject get subject getsubject access control accesscontrol get context getcontext attach send solut","""java/org/apache/catalina/security/SecurityUtil.java""","3","3","3","1","26","1","15","8","2","10","13","11","11","1","0","11","0","3","0","8","385","54","206","84","120","125","83","120","53","67","12","12","14","5","3","1","36","36","43","15","major"
"46047","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46047 Include jar in path for dependencies if they are in a JAR Patch provided by Cdric Mailleux","Bug 46047  Issue when using include directive inside tag files that are inside jar files","issu use includ direct insid tag file insid jar file","","","""java/org/apache/jasper/compiler/ParserController.java""","4","4","5","2","31","2","20","8","1","0","1","15","15","15","12","15","0","8","0","7","617","63","336","100","217","218","159","224","79","145","17","17","21","9","3","1","64","64","80","35","critical"
"46051","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46051 The PrintWriter interface requires that the line separator is platform dependant. Not that this makes much sense for a web application but there is a spec so we shoud stick to it.","Bug 46051  Servlet response writer does not respect line.separator system property","servlet respons writer respect line separ system properti","","","""java/org/apache/catalina/connector/CoyoteWriter.java""","1","1","1","1","5","0","4","0","1","0","1","31","31","31","2","31","2","0","1","28","289","100","150","40","73","39","60","102","38","64","3","3","3","1","1","0","42","42","42","31","normal"
"46075","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46075 Don't automatically create the ByteArrayOutputStream with the full threshold - we probably won't need it in most cases.","Bug 46075  FileUpload memory usage","file upload fileupload memori usag","The DefaultFileItem class in pacakge org.apache.tomcat.util.http.fileupload creates a ByteArrayOutputStream of the full threshold size for every control on the submitted form. I have a form with 63 controls (checkboxes, text boxes and one File input), and I set the threshold to 20 Meg to allow upload of large image files into memory. I get an OutOfMemory exception since it tries to allocate 63 lots of 20M, although only 1 control requires the requested size.

I think it would be much more sensible to create the ByteArrayOutputStream with an initial size of only a few kilobytes size it automatically increases its size as data is written to it.","default file item defaultfileitem class pacakg apach tomcat util http fileupload creat byte array output stream bytearrayoutputstream full threshold size everi control submit form form control checkbox text box one file input set threshold allow upload larg imag file memori get out of memori outofmemori except sinc tri alloc lot 20 20m although control requir request size think would much sensibl creat byte array output stream bytearrayoutputstream initi size kilobyt size automat increas size data written","""java/org/apache/tomcat/util/http/fileupload/DeferredFileOutputStream.java""","1","1","1","1","13","0","6","7","1","0","0","6","6","6","4","6","0","0","2","4","174","32","50","20","16","92","25","33","19","14","2","2","2","1","1","2","7","7","7","6","normal"
"46085","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46085 Hard to reproduce thread safety issue with session expiration.","Bug 46085  Session are incorrectly expired due to thread unsafe code","session incorrectli expir due thread unsaf code","","","""java/org/apache/catalina/session/StandardSession.java""","2","2","2","1","20","2","10","7","3","0","8","63","63","63","19","63","0","0","7","56","1750","374","735","196","487","644","358","521","191","330","20","20","26","6","4","1","162","162","176","92","major"
"46096","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46096 Allow for running under a security manager when processing annotations.","Bug 46096  DefaultAnnotationProcessor.processAnnotations should use doPrivileged to call getDeclaredFields","default annot processor defaultannotationprocessor process annot processannot use do privileg doprivileg call get declar field getdeclaredfield","If tomcat is running with a SecurityManager, and a JSP uses PageContext.forward, DefaultAnnotationProcessor code can be called with untristed code on the call stack.

The processAnnotations method contains the line:

   Field[] fields = instance.getClass().getDeclaredFields();

getDeclaredFields() is subject to security checks so this throws a java.security.AccessControlException.

DefaultAnnotationProcessor is part of the code in the catlina lib directory, which is granted AllPermissions in the standard policy file.  However, because there is untrusted JSP code on the stack, these permissions are not used.

The call to getDeclaredFields() should be wrapped in an AccessController.doPrivileged call to avoid the exception.","tomcat run secur manag securitymanag jsp us page context pagecontext forward default annot processor defaultannotationprocessor code call untrist code call stack process annot processannot method contain line field field instanc get class getclass get declar field getdeclaredfield get declar field getdeclaredfield subject secur check throw java secur access control except accesscontrolexcept default annot processor defaultannotationprocessor part code catlina lib directori grant all permiss allpermiss standard polici file howev untrust jsp code stack permiss use call get declar field getdeclaredfield wrap access control accesscontrol do privileg doprivileg call avoid except","""java/org/apache/catalina/core/DefaultInstanceManager.java""","4","4","4","1","23","1","18","3","2","2","0","16","16","14","9","16","0","3","7","6","457","47","331","107","204","79","153","223","95","128","18","18","21","6","4","0","65","65","79","26","normal"
"46105","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46105 Correctly set URI encoding when replaying request after FORM auth","Bug 46105  URIEncoding doesn't affect after form-authentication redirect","encod uriencod doesn affect form authent formauthent redirect","How to reproduce bug.

Configure tomcat connector with URIEncoding=UTF-8 attribute.
Make a simple page that write out any request parameter. Configure this page as protected with form-based authentication.
Try to access page, e.g.

/site/page.jsp?q=%xx%yy%zz%tt

where q=%xx%yy%zz is value in UTF-8 charset.

When page is being accessed for the first time, then after authentication, parameter ""q"" is incorrectly interpreted (it seems as it was in ISO8859-1 or anything else, but not UTF-8).

But subsequent access to the _same_ URI, i.e.
/site/page.jsp?q=%xx%yy%zz%tt

gives perfect result.

I also tried useBobyEncodingForURI=true and request.setCharacterEncoding(""UTF-8"") - nothing is changed.","reproduc configur tomcat connector encod uriencod utf attribut make simpl page write request paramet configur page protect form base formbas authent tri access page site page jsp xx yy zz tt xx yy zz valu utf charset page access first time authent paramet incorrectli interpret seem o8859 iso8859 anyth els utf subsequ access uri site page jsp xx yy zz tt give perfect result tri use bobi encod for usebobyencodingforuri true request set charact encod setcharacterencod utf noth chang","""java/org/apache/catalina/authenticator/FormAuthenticator.java""","6","6","7","2","43","4","28","10","1","0","2","10","10","10","1","10","0","0","6","4","541","86","316","95","227","139","168","234","80","154","32","32","34","14","4","0","65","65","70","27","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/cometd/bayeux/Bayeux.java""","0","0","0","0","0","0","0","0","1","0","43","0","12","12","0","12","0","0","0","12","242","18","59","58","43","165","57","58","58","0","0","0","0","0","0","3","0","0","0","0","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/cometd/bayeux/Channel.java""","0","0","0","0","0","0","0","0","1","0","0","0","10","10","0","10","0","0","0","10","103","11","15","13","0","77","12","13","13","0","0","0","0","0","0","5","0","0","0","0","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/cometd/bayeux/Client.java""","0","0","0","0","0","0","0","0","1","0","0","0","7","7","0","7","0","0","0","7","91","12","11","9","0","68","8","9","9","0","0","0","0","0","0","6","0","0","0","0","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/cometd/bayeux/DataFilter.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","0","0","0","1","38","1","5","3","0","32","2","3","3","0","0","0","0","0","0","6","0","0","0","0","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/cometd/bayeux/Listener.java""","0","0","0","0","0","0","0","0","1","0","0","0","2","2","0","2","0","0","0","2","45","2","6","4","0","37","3","4","4","0","0","0","0","0","0","6","0","0","0","0","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/cometd/bayeux/Message.java""","0","0","0","0","0","0","0","0","1","0","0","0","6","6","0","6","0","0","0","6","68","7","11","9","0","50","8","9","9","0","0","0","0","0","0","5","0","0","0","0","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/cometd/bayeux/SecurityPolicy.java""","0","0","0","0","0","0","0","0","1","0","0","0","4","4","0","4","4","0","0","0","28","1","8","6","0","19","5","6","6","0","0","0","0","0","0","2","0","0","0","0","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/BayeuxException.java""","1","1","1","1","3","0","3","0","1","0","0","4","4","4","0","4","0","0","0","4","39","3","15","6","4","21","5","10","6","4","1","1","1","1","0","1","4","4","4","4","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/BayeuxRequest.java""","0","0","0","0","0","0","0","0","1","0","3","0","2","2","0","2","0","0","0","2","54","5","9","8","3","40","7","8","8","0","0","0","0","0","0","4","0","0","0","0","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/BayeuxServlet.java""","3","3","3","1","16","0","13","3","1","0","2","10","10","10","2","10","0","0","4","6","236","23","152","45","93","70","82","118","46","72","12","12","15","1","3","0","35","35","38","10","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/ChannelImpl.java""","2","2","2","1","8","0","6","2","1","0","1","13","13","13","4","13","0","0","1","12","189","25","106","38","61","59","61","89","41","48","7","7","8","6","2","1","29","29","30","18","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/ClientImpl.java""","1","1","1","1","5","0","5","0","1","0","5","28","28","28","9","28","0","0","9","19","279","44","184","71","91","53","98","146","73","73","14","14","17","4","6","0","46","46","49","33","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/HttpError.java""","1","1","1","1","3","0","3","0","1","0","0","8","8","8","3","8","0","0","0","8","43","8","35","13","13","0","15","25","13","12","2","2","2","1","1","0","9","9","9","8","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/MessageImpl.java""","1","1","1","1","3","0","3","0","1","0","0","10","10","10","5","10","0","0","3","7","80","14","50","22","20","17","28","39","22","17","1","1","1","1","0","0","10","10","10","10","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/RequestBase.java""","2","2","3","1","10","0","9","0","1","2","2","16","16","14","16","16","0","0","6","10","259","35","192","71","113","38","114","160","72","88","16","16","24","1","3","0","45","45","54","16","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/RequestFactory.java""","6","6","6","6","16","0","16","0","1","1","0","1","1","0","0","1","0","0","0","1","48","3","29","14","13","16","18","25","14","11","6","6","6","6","1","1","6","6","6","6","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/TomcatBayeux.java""","1","1","1","1","4","0","3","0","1","1","1","22","22","21","4","22","0","0","4","18","176","28","106","47","44","42","54","83","48","35","3","3","3","1","1","0","27","27","28","22","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/TomcatBayeux.java""","1","1","1","1","4","0","3","0","1","1","1","22","22","21","4","22","0","0","4","18","176","28","106","47","44","42","54","83","48","35","3","3","3","1","1","0","27","27","28","22","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/request/MetaConnectRequest.java""","4","4","5","1","23","1","15","7","1","0","1","3","3","3","0","3","0","0","0","3","125","12","69","25","41","46","46","57","24","33","7","7","9","3","2","1","12","12","17","5","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/request/MetaDisconnectRequest.java""","2","2","3","1","16","0","11","5","1","0","1","3","3","3","0","3","0","0","0","3","105","10","57","24","30","39","39","47","23","24","5","5","5","1","2","1","8","8","9","3","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/request/MetaHandshakeRequest.java""","2","2","2","1","11","0","8","3","1","0","1","5","5","5","0","5","0","0","0","5","116","12","64","26","38","40","47","57","25","32","4","4","4","1","1","1","10","10","11","5","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/request/MetaSubscribeRequest.java""","4","4","4","1","23","0","18","5","1","0","1","3","3","3","0","3","0","0","0","3","130","10","81","33","48","40","55","67","32","35","8","8","8","3","4","0","12","12","14","5","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/request/MetaUnsubscribeRequest.java""","4","4","4","1","23","0","18","5","1","0","1","3","3","3","0","3","0","0","0","3","130","10","81","33","48","40","55","67","32","35","8","8","8","3","4","0","12","12","14","5","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/java/org/apache/tomcat/bayeux/request/PublishRequest.java""","5","5","7","2","26","1","20","4","1","0","1","3","3","3","1","3","0","0","0","3","140","14","89","34","53","38","59","75","33","42","11","11","13","5","3","0","17","17","22","7","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/test/org/apache/cometd/bayeux/samples/BayeuxStockTicker.java""","1","1","1","1","6","0","6","0","3","0","2","24","24","24","11","24","0","0","0","24","215","35","180","71","97","0","100","141","72","69","8","8","8","3","4","0","37","37","38","26","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/test/org/apache/cometd/bayeux/samples/EchoChatClient.java""","1","1","1","1","6","0","6","0","2","0","1","10","10","10","5","10","0","0","0","10","101","13","86","35","42","2","50","68","36","32","5","5","5","5","3","0","17","17","18","14","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/bayeux/test/org/apache/cometd/bayeux/samples/EchoChatClient.java""","1","1","1","1","6","0","6","0","2","0","1","10","10","10","5","10","0","0","0","10","101","13","86","35","42","2","50","68","36","32","5","5","5","5","3","0","17","17","18","14","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/interceptor/ConnectionState.java""","16","13","20","2","42","0","41","0","1","0","1","2","2","2","6","2","0","0","0","2","135","11","102","27","67","22","67","91","28","63","20","14","24","3","3","0","33","27","41","4","normal"
"46247","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46247 svn property patches for trunk Patch provided be sebb at a.o","Bug 46247  SVN property patches","svn properti patch","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/interceptor/SlowQueryReport.java""","1","1","1","1","5","0","5","0","4","0","1","21","21","21","15","21","0","0","2","19","206","31","151","66","70","28","82","117","65","52","8","8","9","3","2","0","36","36","40","23","normal"
"46252","962","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46252 Allow to specify character set to be used to write the access log in AccessLogValve.","Bug 46252  Tomcat access log doesn't support Unicode","tomcat access log doesn support unicod","AccessLogValve, which is responsible for handling the access log uses FileWriter (that doesn't support Unicode). I guess that instantiating the writer like this would solve the case:

writer = new PrintWriter(new OutputStreamWriter(new FileOutputStream(pathname), ""UTF-8""), true);","access log valv accesslogvalv respons handl access log us file writer filewrit doesn support unicod guess instanti writer like would solv case writer new print writer printwrit new output stream writer outputstreamwrit new file output stream fileoutputstream pathnam utf true","""java/org/apache/catalina/valves/AccessLogValve.java""","2","2","2","1","12","0","9","2","31","4","20","91","90","88","54","92","0","13","9","70","1901","248","1097","332","633","557","489","732","277","455","21","13","21","4","4","1","237","209","254","102","enhancement"
"46261","35","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46261 %2F in context paths should be treated literally, not as / - that is what '#' is for.","Bug 46261  Context with %2F in name causes tomcat crash on shutdown","context 2f name caus tomcat crash shutdown","Context with %2F in name causes tomcat crash on shutdown

Several years ago I worked on integrating tomcat 5.5 into our web application management infrastructure.  During the process I fixed several tomcat 5.5 bugs, but apparently never sent the fixes upstream.  Oops.

Our application needs to be deployed to create a URL that looks like this:

/product/customername/servlet

I worked with several people on IRC to get tomcat5.5 to do this.  We had previously been using the path= parameter in the context xml file element with tomcat 4.1.  Unfortunately, it appears this feature was removed from tomcat5.5, and tomcat5.5 does not recurse into subdirectories when reading .xml context files.  The recommendation on IRC (after several suggestions which would not work for our environment) was to put %2F in the context xml file's name.  Such as this

product%2Fcustomername.xml

This does work, however when you try to shutdown tomcat 6.0.18, you will get this crash:

Nov 9, 2008 10:56:17 PM org.apache.coyote.http11.Http11Protocol pause
INFO: Pausing Coyote HTTP/1.1 on http-8180
Nov 9, 2008 10:56:18 PM org.apache.catalina.core.StandardService stop
INFO: Stopping service Catalina
Nov 9, 2008 10:56:18 PM org.apache.catalina.startup.HostConfig undeployApps
WARNING: Error while removing context [/product%2Fcustomername]
java.lang.NullPointerException
        at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:915)
        at org.apache.catalina.startup.HostConfig.undeployApps(HostConfig.java:1191)
        at org.apache.catalina.startup.HostConfig.stop(HostConfig.java:1162)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:313)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
        at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1086)
        at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1098)
        at org.apache.catalina.core.StandardEngine.stop(StandardEngine.java:448)
        at org.apache.catalina.core.StandardService.stop(StandardService.java:584)
        at org.apache.catalina.core.StandardServer.stop(StandardServer.java:744)
        at org.apache.catalina.startup.Catalina.stop(Catalina.java:628)
        at org.apache.catalina.startup.Catalina$CatalinaShutdownHook.run(Catalina.java:671)
Nov 9, 2008 10:56:18 PM org.apache.coyote.http11.Http11Protocol destroy
INFO: Stopping Coyote HTTP/1.1 on http-8180","context 2f name caus tomcat crash shutdown sever year ago work integr tomcat web applic manag infrastructur process fix sever tomcat bug appar never sent fix upstream oop applic need deploy creat url look like product customernam servlet work sever peopl irc get tomcat5 previous use path paramet context xml file element tomcat unfortun appear featur remov tomcat5 tomcat5 recurs subdirectori read xml context file recommend irc sever suggest would work environ put 2f context xml file name product fcustomernam 2fcustomernam xml work howev tri shutdown tomcat get crash nov pm apach coyot http11 http11 protocol http11protocol paus info paus coyot http http nov pm apach catalina core standard servic standardservic stop info stop servic catalina nov pm apach catalina startup host config hostconfig undeploy app undeployapp warn error remov context product fcustomernam 2fcustomernam java lang null pointer except nullpointerexcept apach catalina core contain base containerbas remov child removechild contain base containerbas java apach catalina startup host config hostconfig undeploy app undeployapp host config hostconfig java apach catalina startup host config hostconfig stop host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina core contain base containerbas stop contain base containerbas java apach catalina core contain base containerbas stop contain base containerbas java apach catalina core standard engin standardengin stop standard engin standardengin java apach catalina core standard servic standardservic stop standard servic standardservic java apach catalina core standard server standardserv stop standard server standardserv java apach catalina startup catalina stop catalina java apach catalina startup catalina catalina shutdown hook catalinashutdownhook run catalina java nov pm apach coyot http11 http11 protocol http11protocol destroy info stop coyot http http","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","2","10","4","1","0","3","261","261","261","91","261","0","13","6","242","5621","1195","2823","722","1831","1613","1339","2051","723","1328","61","61","79","9","5","1","646","646","696","334","normal"
"46261","35","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46261 %2F in context paths should be treated literally, not as / - that is what '#' is for.","Bug 46261  Context with %2F in name causes tomcat crash on shutdown","context 2f name caus tomcat crash shutdown","Context with %2F in name causes tomcat crash on shutdown

Several years ago I worked on integrating tomcat 5.5 into our web application management infrastructure.  During the process I fixed several tomcat 5.5 bugs, but apparently never sent the fixes upstream.  Oops.

Our application needs to be deployed to create a URL that looks like this:

/product/customername/servlet

I worked with several people on IRC to get tomcat5.5 to do this.  We had previously been using the path= parameter in the context xml file element with tomcat 4.1.  Unfortunately, it appears this feature was removed from tomcat5.5, and tomcat5.5 does not recurse into subdirectories when reading .xml context files.  The recommendation on IRC (after several suggestions which would not work for our environment) was to put %2F in the context xml file's name.  Such as this

product%2Fcustomername.xml

This does work, however when you try to shutdown tomcat 6.0.18, you will get this crash:

Nov 9, 2008 10:56:17 PM org.apache.coyote.http11.Http11Protocol pause
INFO: Pausing Coyote HTTP/1.1 on http-8180
Nov 9, 2008 10:56:18 PM org.apache.catalina.core.StandardService stop
INFO: Stopping service Catalina
Nov 9, 2008 10:56:18 PM org.apache.catalina.startup.HostConfig undeployApps
WARNING: Error while removing context [/product%2Fcustomername]
java.lang.NullPointerException
        at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:915)
        at org.apache.catalina.startup.HostConfig.undeployApps(HostConfig.java:1191)
        at org.apache.catalina.startup.HostConfig.stop(HostConfig.java:1162)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:313)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
        at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1086)
        at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1098)
        at org.apache.catalina.core.StandardEngine.stop(StandardEngine.java:448)
        at org.apache.catalina.core.StandardService.stop(StandardService.java:584)
        at org.apache.catalina.core.StandardServer.stop(StandardServer.java:744)
        at org.apache.catalina.startup.Catalina.stop(Catalina.java:628)
        at org.apache.catalina.startup.Catalina$CatalinaShutdownHook.run(Catalina.java:671)
Nov 9, 2008 10:56:18 PM org.apache.coyote.http11.Http11Protocol destroy
INFO: Stopping Coyote HTTP/1.1 on http-8180","context 2f name caus tomcat crash shutdown sever year ago work integr tomcat web applic manag infrastructur process fix sever tomcat bug appar never sent fix upstream oop applic need deploy creat url look like product customernam servlet work sever peopl irc get tomcat5 previous use path paramet context xml file element tomcat unfortun appear featur remov tomcat5 tomcat5 recurs subdirectori read xml context file recommend irc sever suggest would work environ put 2f context xml file name product fcustomernam 2fcustomernam xml work howev tri shutdown tomcat get crash nov pm apach coyot http11 http11 protocol http11protocol paus info paus coyot http http nov pm apach catalina core standard servic standardservic stop info stop servic catalina nov pm apach catalina startup host config hostconfig undeploy app undeployapp warn error remov context product fcustomernam 2fcustomernam java lang null pointer except nullpointerexcept apach catalina core contain base containerbas remov child removechild contain base containerbas java apach catalina startup host config hostconfig undeploy app undeployapp host config hostconfig java apach catalina startup host config hostconfig stop host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina core contain base containerbas stop contain base containerbas java apach catalina core contain base containerbas stop contain base containerbas java apach catalina core standard engin standardengin stop standard engin standardengin java apach catalina core standard servic standardservic stop standard servic standardservic java apach catalina core standard server standardserv stop standard server standardserv java apach catalina startup catalina stop catalina java apach catalina startup catalina catalina shutdown hook catalinashutdownhook run catalina java nov pm apach coyot http11 http11 protocol http11protocol destroy info stop coyot http http","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","27","2","19","5","11","0","11","32","32","32","2","32","0","0","11","21","1131","107","800","160","643","232","366","482","157","325","17","17","21","9","4","0","115","115","128","55","normal"
"46298","32","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46298 Throw an exception if the driver doesn't support the supplied URL Based on a patch by Owen Jacobson","Bug 46298  JDBCRealm.open() throws NullPointerException if the specified driver doesn't handle the specified JDBC URL","realm jdbcrealm open throw null pointer except nullpointerexcept specifi driver doesn handl specifi jdbc url","","","""java/org/apache/catalina/realm/JDBCRealm.java""","2","2","2","1","18","2","9","7","1","0","3","31","31","31","13","31","0","0","9","22","795","174","313","87","200","309","149","219","77","142","8","8","8","4","5","1","67","67","67","40","minor"
"46354","125","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46354 ArrayIndexOutOfBoundsException when using org.apache.jasper.runtime.BodyContentImpl.LIMIT_BUFFER=true Pathc provided by Konstantin Kolinko","Bug 46354  LIMIT_BUFFER setting causes arraycopy errors","limit buffer set caus arraycopi error","","","""java/org/apache/jasper/runtime/BodyContentImpl.java""","2","2","2","1","14","0","6","7","1","0","2","36","36","36","5","36","1","2","0","33","609","56","256","55","141","297","106","174","53","121","5","5","9","4","2","1","72","72","77","39","major"
"46357","20","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46357 Correct test for host's parent must be an engine","Bug 46357  FarmWarDeployer has nonsense condition","farm war deploy farmwardeploy nonsens condit","FarmWarDeployer has the following code at line 152:

        if(econtainer == null && econtainer instanceof Engine) {

There's clearly something wrong with that condition.","farm war deploy farmwardeploy follow code line econtain null econtain instanceof engin clearli someth wrong condit","""java/org/apache/catalina/ha/deploy/FarmWarDeployer.java""","2","2","2","1","14","0","10","3","1","0","2","40","40","40","15","40","0","0","11","29","760","83","443","132","299","235","214","318","125","193","14","14","14","5","6","1","100","100","103","47","normal"
"46381","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46381 Needs testign with the TCK before proposing for 6.0.x","Bug 46381  Coerce EL expression to java.lang.Object breaks expression concatenation","coerc express java lang object break express concaten","","","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","35","3","27","5","12","6","5","113","113","107","48","113","11","52","0","50","4195","511","2990","500","2337","721","1827","2317","481","1836","21","21","28","20","5","0","494","488","551","203","critical"
"46397","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46397 Don't pool tag instances that implement JspIdConsumer","Bug 46397  Potential memory leak with TagHandlers and JspIdConsumer","potenti memori leak tag handler taghandl jsp id consum jspidconsum","","","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","35","3","27","5","12","6","5","113","113","107","48","113","11","52","0","50","4195","511","2990","500","2337","721","1827","2317","481","1836","21","21","28","20","5","0","494","488","550","203","normal"
"46403","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46403 By default, always send the expires parameter with cookies to fix know IE6 and IE 7 issue. I don't like doing this but I can't see a better way.","Bug 46403  Persistent cookies written by 6.0.18 do not work in Internet Explorer or Safari","persist cooki written work internet explor safari","","","""java/org/apache/tomcat/util/http/ServerCookie.java""","2","2","2","1","10","0","8","1","1","13","7","28","28","15","8","28","0","1","0","27","433","68","267","81","161","99","140","206","73","133","11","11","13","5","3","0","66","66","81","38","major"
"46408","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46408 Don't make assumptions about exception type","Bug 46408  Invalid cast in SecurityUtil","invalid cast secur util securityutil","In case of PrivilegedActionException thrown in:

    private static void execute(final Method method,
                                final Object targetObject, 
                                final Object[] targetArguments,
                                Principal principal)

method, there is a false assumption in catch block, that PrivilegedActionException.getException() will return InvocationTargetException. It could be also IllegalAccessException and possibly other types of exceptions as well.

Here is the stack trace provoked on catalina shutdown when enabled security manager:
java.lang.ClassCastException: java.lang.IllegalAccessException cannot be cast to java.lang.reflect.InvocationTargetException
        at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:278)
        at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:218)
        at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:178)
        at org.apache.catalina.core.ApplicationFilterConfig.release(ApplicationFilterConfig.java:326)
        at org.apache.catalina.core.StandardContext.filterStop(StandardContext.java:3744)
        at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4513)
        at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:924)
        at org.apache.catalina.startup.HostConfig.undeployApps(HostConfig.java:1191)
        at org.apache.catalina.startup.HostConfig.stop(HostConfig.java:1162)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:313)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
        at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1086)
        at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1098)
        at org.apache.catalina.core.StandardEngine.stop(StandardEngine.java:448)
        at org.apache.catalina.core.StandardService.stop(StandardService.java:584)
        at org.apache.catalina.core.StandardServer.stop(StandardServer.java:744)
        at org.apache.catalina.startup.Catalina.stop(Catalina.java:628)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.stop(Bootstrap.java:300)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.commons.daemon.support.DaemonLoader.stop(DaemonLoader.java:200)","case privileg action except privilegedactionexcept thrown privat static void execut final method method final object target object targetobject final object target argument targetargu princip princip method fals assumpt catch block privileg action except privilegedactionexcept get except getexcept return invoc target except invocationtargetexcept could illeg access except illegalaccessexcept possibl type except well stack trace provok catalina shutdown enabl secur manag java lang class cast except classcastexcept java lang illeg access except illegalaccessexcept cannot cast java lang reflect invoc target except invocationtargetexcept apach catalina secur secur util securityutil execut secur util securityutil java apach catalina secur secur util securityutil do privileg doasprivileg secur util securityutil java apach catalina secur secur util securityutil do privileg doasprivileg secur util securityutil java apach catalina core applic filter config applicationfilterconfig releas applic filter config applicationfilterconfig java apach catalina core standard context standardcontext filter stop filterstop standard context standardcontext java apach catalina core standard context standardcontext stop standard context standardcontext java apach catalina core contain base containerbas remov child removechild contain base containerbas java apach catalina startup host config hostconfig undeploy app undeployapp host config hostconfig java apach catalina startup host config hostconfig stop host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina core contain base containerbas stop contain base containerbas java apach catalina core contain base containerbas stop contain base containerbas java apach catalina core standard engin standardengin stop standard engin standardengin java apach catalina core standard servic standardservic stop standard servic standardservic java apach catalina core standard server standardserv stop standard server standardserv java apach catalina startup catalina stop catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap stop bootstrap java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach common daemon support daemon loader daemonload stop daemon loader daemonload java","""java/org/apache/catalina/security/SecurityUtil.java""","3","3","3","1","25","1","15","8","2","11","13","12","12","1","0","12","0","3","0","9","410","56","215","90","122","139","84","122","54","68","12","12","14","5","3","1","37","37","44","16","normal"
"46462","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46462 Limit the package test to org.apache.jsp.* rather than org.apache.jsp* to allow use of packages like org.apache.jspwiki","Bug 46462  JSPWiki JSP compilation prevented by org.apache.jasper.Constants.JSP_PACKAGE_NAME","wiki jspwiki jsp compil prevent apach jasper constant jsp packag name","","","""java/org/apache/jasper/servlet/JasperLoader.java""","3","3","3","1","24","1","12","10","1","0","0","5","5","5","5","5","0","0","0","5","172","18","76","28","39","78","38","55","24","31","9","9","9","3","4","1","16","16","16","7","major"
"46471","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46471 Use the URL of the JAR as well as the path within the JAR to identify a tag file to keep tag file definitions unique.","Bug 46471  Compiled tag files from different tag libraries share the same package","compil tag file differ tag librari share packag","","","""java/org/apache/jasper/compiler/ImplicitTagLibraryInfo.java""","8","8","9","1","51","5","37","8","1","0","7","3","3","3","4","3","0","0","0","3","217","29","141","52","91","49","74","99","46","53","19","19","24","3","7","0","24","24","29","5","normal"
"46471","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46471 Use the URL of the JAR as well as the path within the JAR to identify a tag file to keep tag file definitions unique.","Bug 46471  Compiled tag files from different tag libraries share the same package","compil tag file differ tag librari share packag","","","""java/org/apache/jasper/compiler/JspUtil.java""","4","3","4","2","21","1","15","5","2","42","8","45","45","3","3","45","2","1","0","42","1103","103","745","171","520","256","364","540","157","383","17","17","18","11","4","0","185","177","213","98","normal"
"46471","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46471 Use the URL of the JAR as well as the path within the JAR to identify a tag file to keep tag file definitions unique.","Bug 46471  Compiled tag files from different tag libraries share the same package","compil tag file differ tag librari share packag","","","""java/org/apache/jasper/compiler/ParserController.java""","4","4","5","2","31","2","20","8","1","0","1","15","15","15","12","15","0","8","0","7","622","63","341","100","221","218","160","226","79","147","17","17","21","9","3","1","65","65","81","35","normal"
"46471","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46471 Use the URL of the JAR as well as the path within the JAR to identify a tag file to keep tag file definitions unique.","Bug 46471  Compiled tag files from different tag libraries share the same package","compil tag file differ tag librari share packag","","","""java/org/apache/jasper/compiler/TagFileProcessor.java""","3","3","4","1","22","1","16","3","4","1","8","22","22","21","22","22","6","4","0","12","677","100","455","183","315","128","208","285","131","154","18","18","26","4","3","0","73","73","93","25","normal"
"46471","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46471 Use the URL of the JAR as well as the path within the JAR to identify a tag file to keep tag file definitions unique.","Bug 46471  Compiled tag files from different tag libraries share the same package","compil tag file differ tag librari share packag","","","""java/org/apache/jasper/compiler/TagLibraryInfoImpl.java""","8","8","10","1","40","3","33","3","1","0","0","16","16","16","6","16","4","7","0","5","766","81","578","167","432","116","285","421","154","267","21","21","33","3","4","0","137","137","170","18","normal"
"46562","79","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46562 Close the reader when we are done","Bug 46562  Reader not closed","reader close","SHTML files are locked when using windows. Closing the reader solves the problem.","shtml file lock use window close reader solv problem","""java/org/apache/catalina/ssi/SSIServlet.java""","4","4","4","1","29","2","19","8","1","0","0","5","5","5","6","5","0","0","2","3","214","22","118","49","76","74","68","90","42","48","7","7","9","3","1","1","22","22","24","7","normal"
"46564","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46564 Encoding test should be case insensitive","Bug 46564  .tagx files don't compile if the document and page encoding casing differs","tagx file compil document page encod case differ","","","""java/org/apache/jasper/compiler/Validator.java""","4","4","6","1","26","2","21","2","8","3","15","58","58","55","13","58","5","16","0","37","1772","230","1297","355","944","247","536","810","277","533","44","44","51","6","8","0","270","270","371","80","normal"
"46606","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46606 Max max depth limit configurable","Bug 46606  WebdavServlet","webdav servlet webdavservlet","","","""java/org/apache/catalina/servlets/WebdavServlet.java""","8","8","9","3","64","10","45","8","4","2","46","38","38","36","13","38","0","15","14","9","3110","634","1871","418","1464","607","946","1262","342","920","68","64","75","16","6","0","324","314","350","115","normal"
"46666","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46666 keepAliveTimeout should always be used regardless of setting of disableUploadTimeout","Bug 46666  Why is disableUploadTimeout and KeepAliveTimeout correlated in Http11 Connector?","disabl upload timeout disableuploadtimeout keep aliv timeout keepalivetimeout correl http11 connector","In Http11Processor.java

        while (started && !error && keepAlive) {

            // Parsing the request header
            try {
                if (!disableUploadTimeout && keptAlive) {
                    if (keepAliveTimeout > 0) {
                        socket.setSoTimeout(keepAliveTimeout);
                    }
                    else if (soTimeout > 0) {
                        socket.setSoTimeout(soTimeout);
                    }
                }
                inputBuffer.parseRequestLine();
                request.setStartTime(System.currentTimeMillis());
                keptAlive = true;
                if (!disableUploadTimeout) {
                    socket.setSoTimeout(timeout);
                }

disableUploadTimeout  - This flag allows the servlet container to use a different, longer connection timeout while a servlet is being executed, which in the end allows either the servlet a longer amount of time to complete its execution, or a longer timeout during data upload. If not specified, this attribute is set to ""true"".

The code above is waiting on a new Http Request and precedes the servlet processing logic.  It seems odd to me that I must set disableTimeout to false to get my keepAliveTimeout set.  

To set keepalivetimout, I must implicitely enable upload timeout whether I need it or not.  It seems to me that the disableTimeout is unneccessary in the following line

if (!disableUploadTimeout && keptAlive) {

Do you agree with this?

Thanks for the insight","http11 processor http11processor java start error keep aliv keepal pars request header tri disabl upload timeout disableuploadtimeout kept aliv keptal keep aliv timeout keepalivetimeout socket set so timeout setsotimeout keep aliv timeout keepalivetimeout els so timeout sotimeout socket set so timeout setsotimeout so timeout sotimeout input buffer inputbuff pars request line parserequestlin request set start time setstarttim system current time milli currenttimemilli kept aliv keptal true disabl upload timeout disableuploadtimeout socket set so timeout setsotimeout timeout disabl upload timeout disableuploadtimeout flag allow servlet contain use differ longer connect timeout servlet execut allow either servlet longer amount time complet execut longer timeout data upload specifi attribut set true code wait new http request preced servlet process logic seem odd must set disabl timeout disabletimeout fals get keep aliv timeout keepalivetimeout set set keepalivetimout must implicit enabl upload timeout whether need seem disabl timeout disabletimeout unneccessari follow line disabl upload timeout disableuploadtimeout kept aliv keptal agre thank insight","""java/org/apache/coyote/http11/Http11Processor.java""","4","4","5","1","27","2","17","6","2","0","3","48","48","48","34","48","0","4","7","37","1697","310","936","212","676","463","489","699","213","486","44","44","50","10","4","0","216","214","254","88","normal"
"46696","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46696 Add missing license headers","Bug 46696  Missing AL headers","miss header","The following files in tomcat-trunk don't have AL headers; as far as I can tell, they should:

modules/jdbc-pool/sign.sh
modules/jdbc-pool/test/org/apache/tomcat/jdbc/test/StarvationTest.java","follow file tomcat trunk tomcattrunk header far tell modul jdbc pool jdbcpool sign sh modul jdbc pool jdbcpool apach tomcat jdbc starvat test starvationtest java","""modules/jdbc-pool/test/org/apache/tomcat/jdbc/test/StarvationTest.java""","2","2","2","1","14","0","14","1","1","0","0","5","5","5","0","5","0","1","0","4","96","8","80","18","57","14","47","62","18","44","4","4","4","1","2","0","14","14","14","5","normal"
"46727","1673","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46727  Refactor default servlet to make it easier to sub-class to implement finer grained control of the file encoding. Based on a patch by Fred Toth.","Bug 46727  DefaultServlet - serving multiple encodings","default servlet defaultservlet serv multipl encod","","","""java/org/apache/catalina/servlets/DefaultServlet.java""","5","5","7","2","48","6","30","11","2","0","7","35","35","35","16","35","0","0","32","3","2027","360","1143","314","822","526","563","776","238","538","45","45","60","14","5","0","209","209","250","103","enhancement"
"46819","691","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46819 Remove redundant object instantiations in JspRuntimeLibrary. Patch provided by Anthony Whitford.","Bug 46819  Remove redundant object instantiations in JspRuntimeLibrary","remov redund object instanti jsp runtim librari jspruntimelibrari","","","""java/org/apache/jasper/runtime/JspRuntimeLibrary.java""","4","4","4","2","18","0","16","1","2","44","0","46","46","2","6","46","1","2","0","43","1006","82","788","210","517","137","348","539","168","371","37","37","37","16","4","0","190","190","224","105","enhancement"
"46822","17","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46822 Avoid redundant object creation Patch provided by Anthony Whitford","Bug 46822  Avoid redundant instantiations in StandardContext","avoid redund instanti standard context standardcontext","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","2","9","4","1","0","3","265","265","265","93","265","0","14","6","245","5702","1209","2855","729","1854","1648","1355","2073","730","1343","61","61","79","9","5","1","651","651","701","338","normal"
"46866","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46866 Better init of Random","Bug 46866  Seed from current time is useless","seed current time useless","fgrep -r 'new Random(System.currentTimeMillis())' .

Gives 7 places where Random initialized with seed = currentTimeMillis. This is unnecessary, because better seed initialization happens in the default Random constructor.","fgrep new random system current time milli currenttimemilli give place random initi seed current time milli currenttimemilli unnecessari better seed initi happen default random constructor","""java/org/apache/catalina/core/StandardServer.java""","2","2","2","1","15","2","8","4","1","0","3","39","39","39","18","39","0","1","0","38","847","195","400","117","234","255","198","292","115","177","18","18","18","11","3","1","90","90","92","54","normal"
"46866","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46866 Better init of Random","Bug 46866  Seed from current time is useless","seed current time useless","fgrep -r 'new Random(System.currentTimeMillis())' .

Gives 7 places where Random initialized with seed = currentTimeMillis. This is unnecessary, because better seed initialization happens in the default Random constructor.","fgrep new random system current time milli currenttimemilli give place random initi seed current time milli currenttimemilli unnecessari better seed initi happen default random constructor","""java/org/apache/catalina/tribes/util/UUIDGenerator.java""","3","3","3","2","11","0","9","3","1","3","6","3","3","0","0","3","0","0","0","3","77","7","42","18","27","30","29","37","18","19","5","5","5","4","3","1","9","9","10","6","normal"
"46866","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46866 Better init of Random","Bug 46866  Seed from current time is useless","seed current time useless","fgrep -r 'new Random(System.currentTimeMillis())' .

Gives 7 places where Random initialized with seed = currentTimeMillis. This is unnecessary, because better seed initialization happens in the default Random constructor.","fgrep new random system current time milli currenttimemilli give place random initi seed current time milli currenttimemilli unnecessari better seed initi happen default random constructor","""test/org/apache/catalina/tribes/demos/LoadTest.java""","2","2","3","1","14","0","12","0","4","8","10","21","21","13","17","21","0","1","0","20","415","52","318","96","224","45","173","241","92","149","18","18","19","1","6","0","62","62","69","21","normal"
"46866","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46866 Better init of Random","Bug 46866  Seed from current time is useless","seed current time useless","fgrep -r 'new Random(System.currentTimeMillis())' .

Gives 7 places where Random initialized with seed = currentTimeMillis. This is unnecessary, because better seed initialization happens in the default Random constructor.","fgrep new random system current time milli currenttimemilli give place random initi seed current time milli currenttimemilli unnecessari better seed initi happen default random constructor","""test/org/apache/catalina/tribes/demos/MapDemo.java""","2","2","3","1","15","0","12","2","8","4","2","26","26","22","14","26","0","1","0","25","536","66","371","104","249","100","229","298","110","188","13","13","23","11","4","0","72","65","83","36","normal"
"46866","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46866 Better init of Random","Bug 46866  Seed from current time is useless","seed current time useless","fgrep -r 'new Random(System.currentTimeMillis())' .

Gives 7 places where Random initialized with seed = currentTimeMillis. This is unnecessary, because better seed initialization happens in the default Random constructor.","fgrep new random system current time milli currenttimemilli give place random initi seed current time milli currenttimemilli unnecessari better seed initi happen default random constructor","""test/org/apache/catalina/tribes/test/channel/TestDataIntegrity.java""","2","2","2","1","11","0","11","0","5","2","1","13","13","11","10","13","0","0","2","11","191","15","147","47","95","29","120","155","61","94","5","5","6","1","2","0","32","32","37","13","normal"
"46866","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46866 Better init of Random","Bug 46866  Seed from current time is useless","seed current time useless","fgrep -r 'new Random(System.currentTimeMillis())' .

Gives 7 places where Random initialized with seed = currentTimeMillis. This is unnecessary, because better seed initialization happens in the default Random constructor.","fgrep new random system current time milli currenttimemilli give place random initi seed current time milli currenttimemilli unnecessari better seed initi happen default random constructor","""test/org/apache/catalina/tribes/test/channel/TestMulticastPackages.java""","2","2","2","1","10","0","10","0","4","5","1","17","17","12","13","17","0","0","2","15","241","20","198","72","126","25","153","193","82","111","5","5","6","1","3","0","38","38","45","17","normal"
"46866","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46866 Better init of Random","Bug 46866  Seed from current time is useless","seed current time useless","fgrep -r 'new Random(System.currentTimeMillis())' .

Gives 7 places where Random initialized with seed = currentTimeMillis. This is unnecessary, because better seed initialization happens in the default Random constructor.","fgrep new random system current time milli currenttimemilli give place random initi seed current time milli currenttimemilli unnecessari better seed initi happen default random constructor","""test/org/apache/catalina/tribes/test/channel/TestRemoteProcessException.java""","1","1","2","1","9","0","9","0","3","2","1","8","8","6","10","8","0","0","2","6","138","13","99","39","56","26","71","89","41","48","5","5","5","1","3","0","15","15","17","8","normal"
"46866","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46866 Better init of Random","Bug 46866  Seed from current time is useless","seed current time useless","fgrep -r 'new Random(System.currentTimeMillis())' .

Gives 7 places where Random initialized with seed = currentTimeMillis. This is unnecessary, because better seed initialization happens in the default Random constructor.","fgrep new random system current time milli currenttimemilli give place random initi seed current time milli currenttimemilli unnecessari better seed initi happen default random constructor","""test/org/apache/catalina/tribes/test/channel/TestUdpPackages.java""","2","2","2","1","12","0","12","0","5","5","1","19","19","14","13","19","0","0","2","17","283","21","237","80","159","27","187","235","95","140","5","5","6","1","3","0","46","46","54","19","normal"
"46866","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46866 Better init of Random","Bug 46866  Seed from current time is useless","seed current time useless","fgrep -r 'new Random(System.currentTimeMillis())' .

Gives 7 places where Random initialized with seed = currentTimeMillis. This is unnecessary, because better seed initialization happens in the default Random constructor.","fgrep new random system current time milli currenttimemilli give place random initi seed current time milli currenttimemilli unnecessari better seed initi happen default random constructor","""test/org/apache/catalina/tribes/test/io/TestSenderConnections.java""","1","1","1","1","6","0","5","0","3","0","2","11","11","11","4","11","0","0","2","9","129","22","90","41","43","17","61","83","46","37","4","4","4","1","2","0","19","19","19","11","normal"
"46875","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46875 Add try/catch to session access in case session has been invalidated","Bug 46875  CometConnectionManagerValve: concurrent access on session object when calling HttpSession.invalidate()","comet connect manag valv cometconnectionmanagervalv concurr access session object call http session httpsession invalid","When calling invalidate() on an valid HttpSession object CometConnectionManagerValve methods sessionDestroy(HttpSessionEvent se) and event(Request request, Response response, CometEvent event) are called concurrently.

So either a CometEvent with EventType.END and EventSubType.SESSION_END is never signaled via sessionDestroyed(...) or the HttpSession object has become invalid and the attribute holding comet requests can not be set or removed via event(...).

I have configured CometConnectionManagerValve as a Valve element in context.xml and also as a Listener element in my applications web.xml.



see this stacktrace 'sessionDestroy() was a bit faster':

An exception or error occurred in the container during the request processing
java.lang.IllegalStateException: removeAttribute: Session already invalidated
	at org.apache.catalina.session.StandardSession.removeAttribute(StandardSession.java:1206)
	at org.apache.catalina.session.StandardSession.removeAttribute(StandardSession.java:1181)
	at org.apache.catalina.session.StandardSessionFacade.removeAttribute(StandardSessionFacade.java:140)
	at org.apache.catalina.valves.CometConnectionManagerValve.event(CometConnectionManagerValve.java:335)
	at org.apache.catalina.core.StandardHostValve.event(StandardHostValve.java:179)
	at org.apache.catalina.valves.ValveBase.event(ValveBase.java:200)
	at org.apache.catalina.core.StandardEngineValve.event(StandardEngineValve.java:128)
	at org.apache.catalina.connector.CoyoteAdapter.event(CoyoteAdapter.java:198)
	at org.apache.coyote.http11.Http11NioProcessor.event(Http11NioProcessor.java:750)
	at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.event(Http11NioProtocol.java:653)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:2081)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
	at java.lang.Thread.run(Thread.java:637)","call invalid valid http session httpsession object comet connect manag valv cometconnectionmanagervalv method session destroy sessiondestroy http session event httpsessionev event request request respons respons comet event cometev event call concurr either comet event cometev event type eventtyp event sub type eventsubtyp session never signal via session destroy sessiondestroy http session httpsession object becom invalid attribut hold comet request set remov via event configur comet connect manag valv cometconnectionmanagervalv valv element context xml listen element applic web xml see stacktrac session destroy sessiondestroy bit faster except error occur contain request process java lang illeg state except illegalstateexcept remov attribut removeattribut session alreadi invalid apach catalina session standard session standardsess remov attribut removeattribut standard session standardsess java apach catalina session standard session standardsess remov attribut removeattribut standard session standardsess java apach catalina session standard session facad standardsessionfacad remov attribut removeattribut standard session facad standardsessionfacad java apach catalina valv comet connect manag valv cometconnectionmanagervalv event comet connect manag valv cometconnectionmanagervalv java apach catalina core standard host valv standardhostvalv event standard host valv standardhostvalv java apach catalina valv valv base valvebas event valv base valvebas java apach catalina core standard engin valv standardenginevalv event standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt event coyot adapt coyoteadapt java apach coyot http11 http11 nio processor http11nioprocessor event http11 nio processor http11nioprocessor java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl event http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""java/org/apache/catalina/valves/CometConnectionManagerValve.java""","3","3","3","1","21","1","13","6","1","0","1","11","11","11","5","11","0","0","0","11","375","72","187","69","108","116","91","128","60","68","9","9","14","1","7","1","33","33","39","11","major"
"46907","120","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46907 Debug logging should not cause the input stream to be swallowed There are better, less intrusive ways to read request bodies","Bug 46907  Jasper with log4j in web-app classpath and debug level enabled prevents reading HTTP POST stream from JSP","jasper log4j web app webapp classpath debug level enabl prevent read http post stream jsp","This is on Tomcat 5.5.x (don't remember the last rev. number, not my current machine).

When log4j is in the classpath of the web-app and is configured to log at debug level, Jasper dumps the whole HTTP POST request body as debug traces. This consumes the HttpServletRequest input stream which then arrives unusable for the user at the beginning of the JSP code (using  HttpServletRequest.getInputStream(), the stream is already at its end).
A workaround is to disable debug traces for Japser class in log4j.properties, but Jasper should not consume the HttpServletRequest input stream whatever mode it runs into.","tomcat rememb last rev number current machin log4j classpath web app webapp configur log debug level jasper dump whole http post request bodi debug trace consum http servlet request httpservletrequest input stream arriv unus user begin jsp code use http servlet request httpservletrequest get input stream getinputstream stream alreadi workaround disabl debug trace japser class log4j properti jasper consum http servlet request httpservletrequest input stream whatev mode run","""java/org/apache/jasper/servlet/JspServlet.java""","3","3","3","2","26","1","18","7","1","0","0","10","10","10","5","10","1","2","0","7","360","45","210","73","126","110","102","139","58","81","11","11","11","8","3","1","38","38","38","20","major"
"46909","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46909 The ';' should really only be used if there is a following parameter","Bug 46909  <jsp:plugin> error","jsp plugin error","<jsp:plugin type=""applet""> generates type=""application/x-java-applet;"" instead of type = ""application/x-java-applet"".
Firefox with Java-plugin cannot display Java applets because "";"" is added.","jsp plugin type applet gener type applic java applet xjavaapplet instead type applic java applet xjavaapplet firefox java plugin javaplugin cannot display java applet ad","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","35","3","27","5","12","6","4","112","112","106","46","112","11","51","0","50","4180","507","2980","495","2333","720","1825","2314","479","1835","21","21","28","20","5","0","493","487","550","202","critical"
"46925","31","Rainer Jung","BZ 46925: Improve search for nested roles in JNDIRealm by replacing recursive search with iterative search. Patch provided by Stefan Zoerner.","Bug 46925  Nested groups in JNDI realm with non-recursive implementation","nest group jndi realm non recurs nonrecurs implement","","","""java/org/apache/catalina/realm/JNDIRealm.java""","3","3","3","1","22","3","11","7","2","0","3","73","73","73","32","73","1","3","21","48","2222","461","941","281","632","822","468","688","245","443","21","21","24","9","7","1","227","223","248","119","enhancement"
"46933","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46933 Simplify StringManager using Java 5 features. Based on a patch by Jens Kapitza. Include a test case to ensure simplification is OK for null input","Bug 46933  Using Java 1.5 in StringManager","use java string manag stringmanag","","","""java/org/apache/tomcat/util/res/StringManager.java""","1","1","1","1","16","0","7","8","1","3","1","12","12","9","2","12","0","3","0","9","287","36","105","39","57","146","57","81","38","43","8","8","8","1","4","1","23","23","23","12","normal"
"46947","217","Timothy A. Funk","https://issues.apache.org/bugzilla/show_bug.cgi?id=46947","Bug 46947  Code cleanup patch that removes some obsolete null checks","code cleanup patch remov obsolet null check","","","""java/org/apache/catalina/ant/jmx/JMXAccessorTask.java""","2","2","2","1","13","0","8","3","1","2","3","42","42","40","14","42","0","0","7","35","732","81","421","128","249","231","186","291","124","167","21","21","27","5","4","1","109","109","124","48","enhancement"
"46947","217","Timothy A. Funk","https://issues.apache.org/bugzilla/show_bug.cgi?id=46947","Bug 46947  Code cleanup patch that removes some obsolete null checks","code cleanup patch remov obsolet null check","","","""java/org/apache/catalina/tribes/transport/bio/BioReceiver.java""","2","2","2","1","12","0","11","1","1","0","1","8","8","8","1","8","0","0","2","6","157","21","103","26","66","36","62","86","26","60","10","10","10","6","3","0","23","23","23","13","enhancement"
"46947","217","Timothy A. Funk","https://issues.apache.org/bugzilla/show_bug.cgi?id=46947","Bug 46947  Code cleanup patch that removes some obsolete null checks","code cleanup patch remov obsolet null check","","","""java/org/apache/catalina/valves/JDBCAccessLogValve.java""","1","1","1","1","14","0","7","5","1","0","1","31","31","31","25","31","0","0","2","29","696","112","283","92","168","302","154","212","88","124","12","12","13","3","4","1","56","56","57","33","enhancement"
"46947","217","Timothy A. Funk","https://issues.apache.org/bugzilla/show_bug.cgi?id=46947","Bug 46947  Code cleanup patch that removes some obsolete null checks","code cleanup patch remov obsolet null check","","","""java/org/apache/tomcat/util/net/NioBlockingSelector.java""","4","4","5","2","20","0","18","2","6","0","2","18","18","18","7","18","0","0","0","18","394","28","317","82","221","63","178","267","81","186","21","21","23","7","5","0","88","88","101","36","enhancement"
"46950","167","Mark Emlyn David Thomas","Fix Tomcat side of https://issues.apache.org/bugzilla/show_bug.cgi?id=46950 - adds new setVerify() method - uses it before renegotiation to change the cert verification level for the connection - increments minimum tc native version to 1.1.17 as it requires the new setVerify() method","Bug 46950  SSL renegotiation does not occur when resource with CLIENT-CERT auth is requested","ssl renegoti occur resourc client cert auth request","When a part of a webapp requires an SSL connection with a client certificate there should be an SSL renegotiation to request a client certificate from the browser.

This is the configuration I added to an webapp that already uses an SSL connector:

<login-config id=""LoginConfig_1"">
                <auth-method>CLIENT-CERT</auth-method>
                <realm-name>WPS</realm-name>
</login-config>

<security-constraint id=""SecurityConstraint_1"">
                <web-resource-collection id=""WebResourceCollection_1"">
                        <web-resource-name/>   
                        <url-pattern>/LoginWithCert.do</url-pattern>
                        <http-method>DELETE</http-method>
                        <http-method>GET</http-method>
                        <http-method>POST</http-method>
                        <http-method>PUT</http-method>
                        <http-method>HEAD</http-method>
                </web-resource-collection>
                <user-data-constraint id=""UserDataConstraint_4"">
                        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
                </user-data-constraint>
</security-constraint>

Requests to /LoginWithCert.do require an SSL connection, if there isn't one, but no client certificate is requested.","part webapp requir ssl connect client certif ssl renegoti request client certif browser configur ad webapp alreadi us ssl connector login config loginconfig id login config loginconfig auth method authmethod client cert auth method authmethod realm name realmnam wp realm name realmnam login config loginconfig secur constraint securityconstraint id secur constraint securityconstraint web resourc collect webresourcecollect id web resourc collect webresourcecollect web resourc name webresourcenam url pattern urlpattern login with cert loginwithcert url pattern urlpattern http method httpmethod delet http method httpmethod http method httpmethod get http method httpmethod http method httpmethod post http method httpmethod http method httpmethod put http method httpmethod http method httpmethod head http method httpmethod web resourc collect webresourcecollect user data constraint userdataconstraint id user data constraint userdataconstraint transport guarante transportguarante confidenti transport guarante transportguarante user data constraint userdataconstraint secur constraint securityconstraint request login with cert loginwithcert requir ssl connect isn one client certif request","""java/org/apache/catalina/core/AprLifecycleListener.java""","2","2","3","1","16","1","14","1","1","4","13","9","9","5","0","9","0","3","0","6","233","37","155","55","104","42","79","102","48","54","7","7","11","4","3","0","23","23","28","17","normal"
"46950","167","Mark Emlyn David Thomas","Fix Tomcat side of https://issues.apache.org/bugzilla/show_bug.cgi?id=46950 - adds new setVerify() method - uses it before renegotiation to change the cert verification level for the connection - increments minimum tc native version to 1.1.17 as it requires the new setVerify() method","Bug 46950  SSL renegotiation does not occur when resource with CLIENT-CERT auth is requested","ssl renegoti occur resourc client cert auth request","When a part of a webapp requires an SSL connection with a client certificate there should be an SSL renegotiation to request a client certificate from the browser.

This is the configuration I added to an webapp that already uses an SSL connector:

<login-config id=""LoginConfig_1"">
                <auth-method>CLIENT-CERT</auth-method>
                <realm-name>WPS</realm-name>
</login-config>

<security-constraint id=""SecurityConstraint_1"">
                <web-resource-collection id=""WebResourceCollection_1"">
                        <web-resource-name/>   
                        <url-pattern>/LoginWithCert.do</url-pattern>
                        <http-method>DELETE</http-method>
                        <http-method>GET</http-method>
                        <http-method>POST</http-method>
                        <http-method>PUT</http-method>
                        <http-method>HEAD</http-method>
                </web-resource-collection>
                <user-data-constraint id=""UserDataConstraint_4"">
                        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
                </user-data-constraint>
</security-constraint>

Requests to /LoginWithCert.do require an SSL connection, if there isn't one, but no client certificate is requested.","part webapp requir ssl connect client certif ssl renegoti request client certif browser configur ad webapp alreadi us ssl connector login config loginconfig id login config loginconfig auth method authmethod client cert auth method authmethod realm name realmnam wp realm name realmnam login config loginconfig secur constraint securityconstraint id secur constraint securityconstraint web resourc collect webresourcecollect id web resourc collect webresourcecollect web resourc name webresourcenam url pattern urlpattern login with cert loginwithcert url pattern urlpattern http method httpmethod delet http method httpmethod http method httpmethod get http method httpmethod http method httpmethod post http method httpmethod http method httpmethod put http method httpmethod http method httpmethod head http method httpmethod web resourc collect webresourcecollect user data constraint userdataconstraint id user data constraint userdataconstraint transport guarante transportguarante confidenti transport guarante transportguarante user data constraint userdataconstraint secur constraint securityconstraint request login with cert loginwithcert requir ssl connect isn one client certif request","""java/org/apache/coyote/http11/Http11AprProcessor.java""","4","4","5","2","29","3","19","7","1","0","2","47","47","47","34","47","0","4","7","36","1795","319","1010","228","736","477","544","768","231","537","54","54","63","10","5","0","232","230","276","94","normal"
"46950","167","Mark Emlyn David Thomas","Fix Tomcat side of https://issues.apache.org/bugzilla/show_bug.cgi?id=46950 - adds new setVerify() method - uses it before renegotiation to change the cert verification level for the connection - increments minimum tc native version to 1.1.17 as it requires the new setVerify() method","Bug 46950  SSL renegotiation does not occur when resource with CLIENT-CERT auth is requested","ssl renegoti occur resourc client cert auth request","When a part of a webapp requires an SSL connection with a client certificate there should be an SSL renegotiation to request a client certificate from the browser.

This is the configuration I added to an webapp that already uses an SSL connector:

<login-config id=""LoginConfig_1"">
                <auth-method>CLIENT-CERT</auth-method>
                <realm-name>WPS</realm-name>
</login-config>

<security-constraint id=""SecurityConstraint_1"">
                <web-resource-collection id=""WebResourceCollection_1"">
                        <web-resource-name/>   
                        <url-pattern>/LoginWithCert.do</url-pattern>
                        <http-method>DELETE</http-method>
                        <http-method>GET</http-method>
                        <http-method>POST</http-method>
                        <http-method>PUT</http-method>
                        <http-method>HEAD</http-method>
                </web-resource-collection>
                <user-data-constraint id=""UserDataConstraint_4"">
                        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
                </user-data-constraint>
</security-constraint>

Requests to /LoginWithCert.do require an SSL connection, if there isn't one, but no client certificate is requested.","part webapp requir ssl connect client certif ssl renegoti request client certif browser configur ad webapp alreadi us ssl connector login config loginconfig id login config loginconfig auth method authmethod client cert auth method authmethod realm name realmnam wp realm name realmnam login config loginconfig secur constraint securityconstraint id secur constraint securityconstraint web resourc collect webresourcecollect id web resourc collect webresourcecollect web resourc name webresourcenam url pattern urlpattern login with cert loginwithcert url pattern urlpattern http method httpmethod delet http method httpmethod http method httpmethod get http method httpmethod http method httpmethod post http method httpmethod http method httpmethod put http method httpmethod http method httpmethod head http method httpmethod web resourc collect webresourcecollect user data constraint userdataconstraint id user data constraint userdataconstraint transport guarante transportguarante confidenti transport guarante transportguarante user data constraint userdataconstraint secur constraint securityconstraint request login with cert loginwithcert requir ssl connect isn one client certif request","""java/org/apache/tomcat/jni/SSLSocket.java""","0","0","0","0","0","0","0","0","1","6","0","0","6","0","0","6","0","0","0","6","89","10","13","12","0","66","7","8","8","0","0","0","0","0","0","5","0","0","0","0","normal"
"46958","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46958 Allow XML status to work irrespective of context path","Bug 46958  manager XML interface hard-coded path in XSL transformation","manag xml interfac hard code hardcod path xsl transform","","","""java/org/apache/catalina/manager/Constants.java""","0","0","0","0","0","0","0","0","1","0","11","0","0","0","0","0","0","0","0","0","199","16","167","22","155","18","12","13","13","0","0","0","0","0","0","0","0","0","0","0","normal"
"46961","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46961 Avoid tripping over http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6434149","Bug 46961  org.apache.catalina.loader.WebappClassLoader throws exception related to Java 6 Bug 6434149","apach catalina loader webapp class loader webappclassload throw except relat java","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","6","6","6","2","33","3","22","7","3","1","5","58","58","57","28","58","3","0","20","35","2387","424","1384","300","968","581","669","1027","285","742","41","41","47","29","9","0","352","352","375","158","normal"
"46967","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46967 and make behaviour consistent when running under a security manager. Based on a patch provided by Kirk Wolf","Bug 46967  ManagerBase.setRandomFile error handling fix","manag base managerbas set random file setrandomfil error handl fix","On some platforms (z/OS for sure), the device file /dev/urandom can pass the ""f.exists()"" test, but throws an IOException of some kind when trying to open it.  The current code in ManagerBase.setRandomFile() doesn't handle this, which results in EVERY call to getRandom() to try again and log the error  ""Failed to close randomIS"".

The following changes to the method will add proper error handling to correct this (my changes marked ""// kjw"")

    public void setRandomFile( String s ) {
        // as a hack, you can use a static file - and genarate the same
        // session ids ( good for strange debugging )
        if (Globals.IS_SECURITY_ENABLED){
            randomIS = (DataInputStream)AccessController.doPrivileged(new PrivilegedSetRandomFile());          
        } else {
            try{
                devRandomSource=s;
                File f=new File( devRandomSource );
                if( ! f.exists() ) return;
                randomIS= new DataInputStream( new FileInputStream(f));
                randomIS.readLong();
                if( log.isDebugEnabled() )
                    log.debug( ""Opening "" + devRandomSource );
            } catch( IOException ex ) {
            	log.debug(""Error reading "" + devRandomSource, ex); //kjw
            	if (randomIS != null) {  // kjw: if opened
	                try {
	                    randomIS.close();
	                } catch (Exception e) {
	                    log.warn(""Failed to close randomIS."");
	                }
            	}                       // kjw 
            	devRandomSource = null; // kjw: don't try again automatically
                randomIS=null;
            }
        }
    }","platform sure devic file dev urandom pa exist throw except ioexcept kind tri open current code manag base managerbas set random file setrandomfil doesn handl result everi call get random getrandom tri log error fail close random randomi follow chang method add proper error handl correct chang mark kjw public void set random file setrandomfil string hack use static file genar session id good strang debug global secur enabl random randomi data input stream datainputstream access control accesscontrol do privileg doprivileg new privileg set random file privilegedsetrandomfil els tri dev random sourc devrandomsourc file new file dev random sourc devrandomsourc exist return random randomi new data input stream datainputstream new file input stream fileinputstream random randomi read long readlong log is debug enabl isdebugen log debug open dev random sourc devrandomsourc catch except ioexcept ex log debug error read dev random sourc devrandomsourc ex kjw random randomi null kjw open tri random randomi close catch except log warn fail close random randomi kjw dev random sourc devrandomsourc null kjw tri automat random randomi null","""java/org/apache/catalina/session/ManagerBase.java""","1","1","2","1","12","1","7","4","2","0","4","73","73","73","27","73","0","0","3","70","1288","265","595","200","360","428","312","457","201","256","8","8","9","4","4","1","145","145","150","85","normal"
"46982","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46982 Use DST offset not current offset (which will be 0 when DST is not being used)","Bug 46982  AccessLogValve reports correct time but incorrect offset following Spring DST transition.","access log valv accesslogvalv report correct time incorrect offset follow spring dst transit","This is a problem with AccessLogValve for tc5.5 as well as tc6.0 on all platforms.

With the system clock on my linux machine (Ubuntu in my case) to just before the US time change on March 8, I started Tomcat 5.5 and see the following messages in my Tomcat access log after accessing Tomcat JSP example pages at the time of DST transition:

-: - [08/Mar/2009:01:56:20 -0700] GET /jsp-examples/jsp2/simpletag/book.jsp HTTP/1.1 200 1738 1 - {http-8080-Processor24}
-: - [08/Mar/2009:03:01:22 -0700] GET /jsp-examples/jsp2/tagfiles/hello.jsp HTTP/1.1 200 2213 68 - {http-8080-Processor25}

Note the offset of ""-0700"" both before and after DST transition.  Following a Tomcat restart the offset is correct:

-: - [08/Mar/2009:03:19:42 -0600] GET /jsp-examples/jsp2/jspx/basic.jspx HTTP/1.1 200 1919 780 - {http-8080-Processor25}
-: - [08/Mar/2009:03:19:59 -0600] GET /jsp-examples/jsp2/jspx/svgexample.html HTTP/1.1 200 2239 4 - {http-8080-Processor25}
-: - [08/Mar/2009:03:19:59 -0600] GET /jsp-examples/jsp2/jspx/textRotate.jpg HTTP/1.1 200 26729 3 - {http-8080-Processor25}


BTW, I ran the tzupdater before my tests:

linwin01-512> java -jar tzupdater.jar -V
tzupdater version 1.3.12-b01
JRE time zone data version: tzdata2009a
Embedded time zone data version: tzdata2009a



The problem is in the org.apache.catalina.valves.AccessLogValve which contains the following in its start method:


// Initialize the timeZone, Date formatters, and currentDate
timezone = TimeZone.getDefault();
timeZoneNoDST = calculateTimeZoneOffset(timezone.getRawOffset());
Calendar calendar = Calendar.getInstance(timezone);
int offset = calendar.get(Calendar.DST_OFFSET);
timeZoneDST = calculateTimeZoneOffset(timezone.getRawOffset()+offset);


Based on what Ive seen, int offset = calendar.get(Calendar.DST_OFFSET); returns 0 when the current time is not in Daylight savings time and (for my timezone) 3600000 (60 * 60 * 1000) when the current time is in Daylight Savings.  It looks like the code assumes this is always the offset for Daylight Savings for the current timezone.  I have no idea if there are some locations/timezones where Daylight Savings Time does not have a 1 hour offset.

Because of this, if in a non-DST time period, timeZoneDST and timeZoneNoDST are set to the same value.  If in a DST time period, I believe they are set correctly so that the transition in Autumn works correctly.  I think the only problem is when moving ahead in Springtime (unless the software has been running for 6 months or so which caused the offset to be set correctly).","problem access log valv accesslogvalv tc5 well tc6 platform system clock linux machin ubuntu case u time chang march start tomcat see follow messag tomcat access log access tomcat jsp exampl page time dst transit mar get jsp exampl jspexampl jsp2 simpletag book jsp http http processor24 mar get jsp exampl jspexampl jsp2 tagfil hello jsp http http processor25 note offset dst transit follow tomcat restart offset correct mar get jsp exampl jspexampl jsp2 jspx basic jspx http http processor25 mar get jsp exampl jspexampl jsp2 jspx svgexampl html http http processor25 mar get jsp exampl jspexampl jsp2 jspx text rotat textrot jpg http http processor25 btw ran tzupdat test linwin01 java jar tzupdat jar tzupdat version 12 b01 12b01 jre time zone data version tzdata2009a embed time zone data version tzdata2009a problem apach catalina valv access log valv accesslogvalv contain follow start method initi time zone timezon date formatt current date currentd timezon time zone timezon get default getdefault time zone no timezonenodst calcul time zone offset calculatetimezoneoffset timezon get raw offset getrawoffset calendar calendar calendar get instanc getinst timezon int offset calendar get calendar dst offset time zone timezonedst calcul time zone offset calculatetimezoneoffset timezon get raw offset getrawoffset offset base ive seen int offset calendar get calendar dst offset return current time daylight save time timezon current time daylight save look like code assum alway offset daylight save current timezon idea locat timezon daylight save time hour offset dst time period time zone timezonedst time zone no timezonenodst set valu dst time period believ set correctli transit autumn work correctli think problem move ahead springtim unless softwar run month caus offset set correctli","""java/org/apache/catalina/valves/AccessLogValve.java""","2","2","2","1","12","0","8","3","26","0","3","73","74","74","40","74","0","7","2","65","1487","228","780","238","449","486","351","528","210","318","21","10","21","4","4","1","170","147","180","80","normal"
"46984","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46984 CR & LF in middle of method name should cause a 400 So client sees 400, stop processing the request once we know it is bad","Bug 46984  Server incorrectly reports a 501 error on bad method name.  Should report 400 error.","server incorrectli report error bad method name report error","","","""java/org/apache/coyote/http11/Http11AprProcessor.java""","4","4","5","2","29","3","19","7","1","0","2","47","47","47","34","47","0","4","7","36","1787","318","1006","228","733","474","545","765","231","534","51","51","60","10","5","0","228","226","272","94","minor"
"46984","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46984 CR & LF in middle of method name should cause a 400 So client sees 400, stop processing the request once we know it is bad","Bug 46984  Server incorrectly reports a 501 error on bad method name.  Should report 400 error.","server incorrectli report error bad method name report error","","","""java/org/apache/coyote/http11/Http11NioProcessor.java""","5","5","6","2","29","2","19","7","1","0","2","49","49","49","36","49","0","4","7","38","1829","317","1037","232","760","491","554","793","233","560","54","54","63","26","7","0","249","247","294","117","minor"
"46984","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46984 CR & LF in middle of method name should cause a 400 So client sees 400, stop processing the request once we know it is bad","Bug 46984  Server incorrectly reports a 501 error on bad method name.  Should report 400 error.","server incorrectli report error bad method name report error","","","""java/org/apache/coyote/http11/Http11Processor.java""","4","4","5","1","27","2","17","6","2","0","3","48","48","48","34","48","0","4","7","37","1696","310","935","211","676","463","489","698","212","486","44","44","50","10","4","1","215","213","252","88","minor"
"46984","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46984 CR & LF in middle of method name should cause a 400 So client sees 400, stop processing the request once we know it is bad","Bug 46984  Server incorrectly reports a 501 error on bad method name.  Should report 400 error.","server incorrectli report error bad method name report error","","","""java/org/apache/coyote/http11/InternalAprInputBuffer.java""","5","5","6","1","34","6","20","7","2","0","1","18","18","18","14","18","0","0","1","17","838","217","406","80","272","215","208","306","74","232","34","34","41","6","4","1","97","97","112","34","minor"
"46984","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46984 CR & LF in middle of method name should cause a 400 So client sees 400, stop processing the request once we know it is bad","Bug 46984  Server incorrectly reports a 501 error on bad method name.  Should report 400 error.","server incorrectli report error bad method name report error","","","""java/org/apache/coyote/http11/InternalInputBuffer.java""","4","4","5","1","32","6","18","7","2","0","1","18","18","18","13","18","0","0","1","17","792","219","361","75","239","212","183","272","68","204","30","30","37","4","4","1","88","88","100","26","minor"
"46984","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46984 CR & LF in middle of method name should cause a 400 So client sees 400, stop processing the request once we know it is bad","Bug 46984  Server incorrectly reports a 501 error on bad method name.  Should report 400 error.","server incorrectli report error bad method name report error","","","""java/org/apache/coyote/http11/InternalNioInputBuffer.java""","4","4","4","2","23","2","15","5","5","0","1","30","26","30","32","30","0","2","1","27","942","180","514","100","344","259","274","397","95","302","40","40","47","29","5","1","124","124","140","83","minor"
"46986","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46986 Find bugs was complaining although these have not been reported as causing issues for any users.","Bug 46986  org.apache.jasper.Constants public arrays are mutable","apach jasper constant public array mutabl","There are various public String arrays in org.apache.jasper.Constants. Although the array variables are final, any code can change any of the array constants.","variou public string array apach jasper constant although array variabl final code chang array constant","""java/org/apache/jasper/Constants.java""","0","0","0","0","0","0","0","0","1","0","31","0","0","0","0","0","0","0","0","0","200","28","71","68","40","107","32","33","33","0","0","0","0","0","0","2","0","0","0","0","normal"
"46986","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46986 Find bugs was complaining although these have not been reported as causing issues for any users.","Bug 46986  org.apache.jasper.Constants public arrays are mutable","apach jasper constant public array mutabl","There are various public String arrays in org.apache.jasper.Constants. Although the array variables are final, any code can change any of the array constants.","variou public string array apach jasper constant although array variabl final code chang array constant","""java/org/apache/jasper/compiler/PageInfo.java""","1","1","1","1","5","0","4","0","1","0","0","81","81","81","44","81","1","0","0","80","711","134","420","156","198","159","193","304","144","160","4","4","5","1","2","0","112","112","118","81","normal"
"46986","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46986 Find bugs was complaining although these have not been reported as causing issues for any users.","Bug 46986  org.apache.jasper.Constants public arrays are mutable","apach jasper constant public array mutabl","There are various public String arrays in org.apache.jasper.Constants. Although the array variables are final, any code can change any of the array constants.","variou public string array apach jasper constant although array variabl final code chang array constant","""java/org/apache/jasper/xmlparser/ParserUtils.java""","3","3","3","1","20","1","14","4","3","0","3","7","7","7","0","7","0","0","1","6","235","35","132","57","76","68","73","97","55","42","9","9","9","4","5","1","24","24","24","12","normal"
"46988","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46988 Make constants final","Bug 46988  JMXAccessorTask String constants should be final","accessor task jmxaccessortask string constant final","","","""java/org/apache/catalina/ant/jmx/JMXAccessorTask.java""","2","2","2","1","13","0","8","3","1","2","3","42","42","40","14","42","0","0","7","35","732","81","421","128","249","231","186","291","124","167","21","21","27","5","4","1","109","109","124","48","normal"
"46990","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46990 Various sync issues.","Bug 46990  Synchronize target can be changed midway","synchron target chang midway","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","2","9","4","1","0","3","265","265","265","93","265","0","14","6","245","5702","1209","2855","729","1854","1648","1355","2073","730","1343","61","61","79","9","5","1","651","651","701","338","normal"
"46990","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46990 Various sync issues.","Bug 46990  Synchronize target can be changed midway","synchron target chang midway","","","""java/org/apache/catalina/core/StandardHost.java""","2","2","2","1","14","1","7","4","1","0","2","43","43","43","15","43","0","0","0","43","846","202","367","113","228","278","181","275","107","168","14","14","16","6","5","1","92","92","94","55","normal"
"46990","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46990 Various sync issues.","Bug 46990  Synchronize target can be changed midway","synchron target chang midway","","","""java/org/apache/catalina/tribes/membership/Membership.java""","2","2","2","1","10","0","7","2","3","0","1","20","20","20","6","20","0","0","1","19","317","36","182","57","106","101","100","150","62","88","7","7","7","3","3","1","44","44","46","26","normal"
"46990","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46990 Various sync issues.","Bug 46990  Synchronize target can be changed midway","synchron target chang midway","","","""java/org/apache/catalina/util/InstanceSupport.java""","2","2","2","1","20","2","10","8","1","0","0","12","12","12","2","12","0","0","0","12","338","77","132","63","79","129","79","116","54","62","6","6","6","3","2","1","34","34","34","14","normal"
"46990","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46990 Various sync issues.","Bug 46990  Synchronize target can be changed midway","synchron target chang midway","","","""java/org/apache/catalina/util/LifecycleSupport.java""","2","2","2","1","16","2","8","5","1","0","0","5","5","5","2","5","0","0","0","5","152","39","52","20","29","61","32","47","22","25","6","6","6","3","2","1","12","12","12","7","normal"
"46991","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46991 Update the counters before we recycle the request","Bug 46991  ""Bytes received ""  problem","byte receiv problem","use jk module

submit some data with post method ,but  ""Bytes received"" always show zero

see source file ,JkCoyoteHandler.java ,in ""inovke"" method

 public int invoke( Msg msg, MsgContext ep )
        throws IOException {
        if( ep.isLogTimeEnabled() )
            ep.setLong( MsgContext.TIMER_PRE_REQUEST, System.currentTimeMillis());

        Request req=ep.getRequest();
        Response res=req.getResponse();

        if( log.isDebugEnabled() )
            log.debug( ""Invoke "" + req + "" "" + res + "" "" + req.requestURI().toString());

        res.setNote( epNote, ep );
        ep.setStatus( MsgContext.JK_STATUS_HEAD );
        RequestInfo rp = req.getRequestProcessor();
        rp.setStage(Constants.STAGE_SERVICE);
        try {
            adapter.service( req, res );
        } catch( Exception ex ) {
            log.info(""Error servicing request "" + req,ex);
        }
        if(ep.getStatus() != MsgContext.JK_STATUS_CLOSED) {
            res.finish();
        }
      
        req.recycle();         
        req.updateCounters();   //see this line
         res.recycle();
        ep.recycle();
        if( ep.getStatus() == MsgContext.JK_STATUS_ERROR ) {
            return ERROR;
        }
        ep.setStatus( MsgContext.JK_STATUS_NEW );
        rp.setStage(Constants.STAGE_KEEPALIVE);
        return OK;
    }

 the request object recycled,the ""byteRead"" property must be set to zero ,but at the next line ,begin to ""updateCounters"",this may be a bug","use jk modul submit data post method byte receiv alway show zero see sourc file jk coyot handler jkcoyotehandl java inovk method public int invok msg msg msg context msgcontext ep throw except ioexcept ep is log time enabl islogtimeen ep set long setlong msg context msgcontext timer pre request system current time milli currenttimemilli request req ep get request getrequest respons re req get respons getrespons log is debug enabl isdebugen log debug invok req re req request requesturi to string tostr re set note setnot ep note epnot ep ep set statu setstatu msg context msgcontext jk statu head request info requestinfo rp req get request processor getrequestprocessor rp set stage setstag constant stage servic tri adapt servic req re catch except ex log info error servic request req ex ep get statu getstatu msg context msgcontext jk statu close re finish req recycl req updat counter updatecount see line re recycl ep recycl ep get statu getstatu msg context msgcontext jk statu error return error ep set statu setstatu msg context msgcontext jk statu new rp set stage setstag constant stage keepal return ok request object recycl byte read byteread properti must set zero next line begin updat counter updatecount may","""java/org/apache/jk/server/JkCoyoteHandler.java""","2","2","2","1","9","0","7","1","1","0","1","15","15","15","5","15","0","0","0","15","218","35","142","45","77","41","73","107","41","66","6","6","6","1","3","0","33","33","34","15","normal"
"46997","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46997 Code clean up Patch provided by Jens Kapitza","Bug 46997  small fix to TaskQueue","small fix task queue taskqueu","","","""java/org/apache/tomcat/util/threads/TaskQueue.java""","1","1","1","1","4","0","3","1","1","0","0","7","7","7","1","7","0","0","0","7","73","8","36","15","14","31","20","34","15","19","5","5","5","5","1","1","13","13","13","11","normal"
"46998","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46998 Reduce scope Patch provided by Jens Kapitza","Bug 46998  small fix to TaskThreadFactory","small fix task thread factori taskthreadfactori","","","""java/org/apache/tomcat/util/threads/TaskThreadFactory.java""","1","1","1","1","6","0","6","0","1","0","0","2","2","2","5","2","0","0","0","2","47","3","23","13","10","21","17","20","13","7","2","2","2","1","0","1","3","3","3","2","normal"
"47013","4","Mark Emlyn David Thomas","Fix secondary issue reported as part of bug47013","Bug 47013  JSP not compiled at startup when used as a servlet","jsp compil startup use servlet","","","""java/org/apache/catalina/core/Constants.java""","0","0","0","0","0","0","0","0","1","0","5","0","0","0","0","0","0","0","0","0","32","7","9","8","5","16","6","7","7","0","0","0","0","0","0","2","0","0","0","0","normal"
"47013","4","Mark Emlyn David Thomas","Fix secondary issue reported as part of bug47013","Bug 47013  JSP not compiled at startup when used as a servlet","jsp compil startup use servlet","","","""java/org/apache/catalina/core/StandardWrapper.java""","2","2","2","1","16","2","10","4","1","1","5","80","80","79","27","80","0","0","4","76","1782","383","885","225","574","516","382","573","206","367","23","23","29","3","5","1","182","182","199","90","normal"
"47046","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47046 Unregister all MBeans, including when non-default engine names are used (which changes the domain of some of the MBeans)","Bug 47046  Shutdown does not unregister all MBeans","shutdown unregist bean mbean","","","""java/org/apache/catalina/connector/MapperListener.java""","5","5","5","2","28","3","22","3","1","0","1","15","15","15","5","15","0","6","0","9","549","96","366","118","246","91","168","247","98","149","22","22","28","7","5","0","78","78","87","33","normal"
"47046","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47046 Unregister all MBeans, including when non-default engine names are used (which changes the domain of some of the MBeans)","Bug 47046  Shutdown does not unregister all MBeans","shutdown unregist bean mbean","","","""java/org/apache/catalina/mbeans/MBeanUtils.java""","3","3","3","1","26","2","16","8","1","60","5","60","60","0","0","60","55","0","0","5","1840","263","1054","450","732","524","543","763","352","411","13","13","13","3","3","1","219","219","220","66","normal"
"47046","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47046 Unregister all MBeans, including when non-default engine names are used (which changes the domain of some of the MBeans)","Bug 47046  Shutdown does not unregister all MBeans","shutdown unregist bean mbean","","","""java/org/apache/catalina/mbeans/ServerLifecycleListener.java""","5","5","5","1","32","3","18","10","1","0","1","33","33","33","1","33","0","0","28","5","1226","204","656","137","412","366","258","447","125","322","25","25","25","3","3","1","192","192","197","35","normal"
"47050","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47050 Remove unnecessary filtering","Bug 47050  StandardHostValve.status unnecessarily HTML-escapes the error message","standard host valv standardhostvalv statu unnecessarili escap htmlescap error messag","","","""java/org/apache/catalina/core/StandardHostValve.java""","5","5","5","2","47","6","26","14","1","1","3","7","7","6","0","7","0","0","4","3","435","86","210","58","145","139","103","141","48","93","11","11","12","5","3","1","38","38","39","15","normal"
"47111","4","Mark Emlyn David Thomas","Clean up inspired by https://issues.apache.org/bugzilla/show_bug.cgi?id=47111 Remove unused code.","Bug 47111  do caching the resources like the docu say it (StringManager)","cach resourc like docu say string manag stringmanag","","","""java/org/apache/tomcat/util/res/StringManager.java""","1","1","1","1","14","0","6","7","1","3","1","8","8","5","2","8","0","3","0","5","191","22","65","26","33","104","35","49","25","24","3","3","3","1","1","2","13","13","13","8","normal"
"47158","29","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47158 Thread safety issues","Bug 47158  I think AccessLogValve has race condition problem","think access log valv accesslogvalv race condit problem","","","""java/org/apache/catalina/valves/AccessLogValve.java""","2","2","2","1","12","0","8","3","26","0","3","73","74","74","40","74","0","7","2","65","1485","228","778","237","447","486","348","524","208","316","21","10","21","4","4","1","169","146","179","78","normal"
"47161","132","Mark Emlyn David Thomas","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=47161 Correctly report maxThreads Note 6.0.x will need a different fix as it still uses threadpools","Bug 47161  Manager ignores executors on status pages","manag ignor executor statu page","When displaying the thread pools, the StatusManagerServlet ignores executors and uses the 'standard' ThreadPool information for each connector. This causes incorrect information to be displayed when a connector is configured to use an executor.

On a related topic, it appears that the connector<->executor link is not exposed via JMX (which it will need to be to fix this).","display thread pool statu manag servlet statusmanagerservlet ignor executor us standard thread pool threadpool inform connector caus incorrect inform display connector configur use executor relat topic appear connector executor link expos via jmx need fix","""java/org/apache/tomcat/util/net/AbstractEndpoint.java""","1","1","1","1","4","0","4","0","1","0","6","39","39","39","18","39","0","0","1","38","376","56","197","84","129","124","111","175","84","91","8","8","8","4","2","1","63","63","66","47","normal"
"47161","132","Mark Emlyn David Thomas","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=47161 Correctly report maxThreads Note 6.0.x will need a different fix as it still uses threadpools","Bug 47161  Manager ignores executors on status pages","manag ignor executor statu page","When displaying the thread pools, the StatusManagerServlet ignores executors and uses the 'standard' ThreadPool information for each connector. This causes incorrect information to be displayed when a connector is configured to use an executor.

On a related topic, it appears that the connector<->executor link is not exposed via JMX (which it will need to be to fix this).","display thread pool statu manag servlet statusmanagerservlet ignor executor us standard thread pool threadpool inform connector caus incorrect inform display connector configur use executor relat topic appear connector executor link expos via jmx need fix","""java/org/apache/tomcat/util/threads/ResizableExecutor.java""","0","0","0","0","0","0","0","0","1","0","0","0","4","4","0","4","0","0","0","4","38","6","8","7","0","24","6","7","7","0","0","0","0","0","0","3","0","0","0","0","normal"
"47216","6","Mark Emlyn David Thomas","Reduce visibility of parseHost as discussed as a side issue to bug 47216.","Bug 47216  Possible NPE in Http11Processor.action()","possibl npe http11 processor http11processor action","The code at around line 1075:

        } else if (actionCode == ActionCode.ACTION_REQ_LOCAL_ADDR_ATTRIBUTE) {

            if (localAddr == null)
               localAddr = socket.getLocalAddress().getHostAddress();

fails to check if ""socket != null"".

Since this is checked everywhere else in the method this is probably a bug.

The method Http11Processor.parseHost() also references ""socket"" without checking for null. Within the class, it is only called by process(Socket), which guarantees that it won't be null.

However once process() returns normally, socket will be set to null.

The parseHost() method is public, so it may be called when socket == null.

Perhaps the parseHost() method should be private?","code around line els action code actioncod action code actioncod action req local addr attribut local addr localaddr null local addr localaddr socket get local address getlocaladdress get host address gethostaddress fail check socket null sinc check everywher els method probabl method http11 processor http11processor pars host parsehost refer socket without check null within class call process socket guarante won null howev process return normal socket set null pars host parsehost method public may call socket null perhap pars host parsehost method privat","""java/org/apache/coyote/http11/Http11Processor.java""","4","4","5","1","27","2","17","6","2","0","3","48","48","48","34","48","0","4","7","37","1697","310","937","211","677","462","489","699","212","487","44","44","50","10","4","0","216","214","253","88","normal"
"47225","119","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47225 Buffer length is end-offset","Bug 47225  Wrong argument in redirectPath.setChars in Mapper.internalMapWrapper()","wrong argument redirect path redirectpath set char setchar mapper intern map wrapper internalmapwrapp","","","""java/org/apache/tomcat/util/http/mapper/Mapper.java""","4","4","5","2","28","1","21","5","6","12","1","41","41","29","18","41","0","17","3","21","1467","203","910","250","626","357","461","672","234","438","25","25","36","11","6","0","202","202","223","102","minor"
"47234","0","Filip Hanik","Consolidate the use of service start time into one local variable https://issues.apache.org/bugzilla/show_bug.cgi?id=47234","Bug 47234  serviceStartTime is different in MemberImpl from McastServiceImpl","servic start time servicestarttim differ member impl memberimpl mcast servic impl mcastserviceimpl","Hi,
I'm using the tribes cluster module in my own application (which has nothing to do with tomcat) and I'm using the member alive time value to sort all the cluster members.
This bug produces the following:
I have 2 nodes that were started almost at the same time and both nodes claim that the other node was started before them

NODE1:
Remote members: (-52.63.57.110:4001 ready=true suspect=false failing=false aliveTime=1526)
Local member: (-52.63.57.109:4000 ready=true suspect=false failing=false aliveTime=1236)


NODE2:
Remote members: (-52.63.57.109:4000 ready=true suspect=false failing=false aliveTime=2021)
Local member: (-52.63.57.110:4001 ready=true suspect=false failing=false aliveTime=1069)


My code do the following:
Member[] members = groupChannel.getMembers();
printRemote(members);
Member localMember = groupChannel.getLocalMember(true);
printLocal(localMember);


In that code (due to timing issues) it should possible the other way around (that every node claim to be started before the other) but not that case.

The issue occurs because when the McastService is started, it assigns a start  time to the local member. 
public class McastService .... {
public void start(int level) {
     ....
    localMember.setServiceStartTime(System.currentTimeMillis());
    ....
    impl = new McastServiceImpl(localMember, ....);
    impl.start(level);
}
}
But, then it creates and starts a McastServiceImpl which also stores a new serviceStartTime :-(
 
public class McastServiceImpl {
protected long serviceStartTime;
public void start(int level) {
     ....
    serviceStartTime = System.currentTimeMillis();
    ....
}
}

So, we have 2 different start times. Unfortunately both times are used:
To get the local member, the impl.getServiceStartTime() is used:

public class McastService .... {
public Member getLocalMember(boolean alive) {
  if ( alive && localMember != null && impl != null)
      localMember.setMemberAliveTime(System.currentTimeMillis()-impl.getServiceStartTime());
    return localMember;
  }
}

But, when the member is transmited throw the network, the MemberImpl.getServiceStartTime() is used.
public class MemberImpl .... {
    public byte[] getData(boolean getalive, boolean reset)  {
        if ( reset ) dataPkg = null;
        //look in cache first
        if ( dataPkg!=null ) {
            if ( getalive ) {
                //you'd be surprised, but System.currentTimeMillis
                //shows up on the profiler
                long alive=System.currentTimeMillis()-getServiceStartTime();
                XByteBuffer.toBytes( (long) alive, dataPkg, TRIBES_MBR_BEGIN.length+4);
            }
            return dataPkg;
        }
 ......
}

That produces that weird behaviour.
IMHO, the fix should be setting the same ""serviceStartTime"" to both components.

This issue is affecting seriously my code. I would appreciate if you could fix it asap.
I've verified that the same code is present in trunk repository.

Regards,
Ariel","hi use tribe cluster modul applic noth tomcat use member aliv time valu sort cluster member produc follow node start almost time node claim node start e1 node1 remot member readi true suspect fals fail fals aliv time alivetim local member readi true suspect fals fail fals aliv time alivetim e2 node2 remot member readi true suspect fals fail fals aliv time alivetim local member readi true suspect fals fail fals aliv time alivetim code follow member member group channel groupchannel get member getmemb print remot printremot member member local member localmemb group channel groupchannel get local member getlocalmemb true print local printloc local member localmemb code due time issu possibl way around everi node claim start case issu occur mcast servic mcastservic start assign start time local member public class mcast servic mcastservic public void start int level local member localmemb set servic start time setservicestarttim system current time milli currenttimemilli impl new mcast servic impl mcastserviceimpl local member localmemb impl start level creat start mcast servic impl mcastserviceimpl store new servic start time servicestarttim public class mcast servic impl mcastserviceimpl protect long servic start time servicestarttim public void start int level servic start time servicestarttim system current time milli currenttimemilli differ start time unfortun time use get local member impl get servic start time getservicestarttim use public class mcast servic mcastservic public member get local member getlocalmemb boolean aliv aliv local member localmemb null impl null local member localmemb set member aliv time setmemberalivetim system current time milli currenttimemilli impl get servic start time getservicestarttim return local member localmemb member transmit throw network member impl memberimpl get servic start time getservicestarttim use public class member impl memberimpl public byte get data getdata boolean getal boolean reset reset data pkg datapkg null look cach first data pkg datapkg null getal surpris system current time milli currenttimemilli show profil long aliv system current time milli currenttimemilli get servic start time getservicestarttim byte buffer xbytebuff to byte tobyt long aliv data pkg datapkg tribe mbr begin length return data pkg datapkg produc weird behaviour imho fix set servic start time servicestarttim compon issu affect serious code would appreci could fix asap verifi code present trunk repositori regard ariel","""java/org/apache/catalina/tribes/membership/McastServiceImpl.java""","3","3","3","1","15","0","13","1","8","1","3","32","32","31","30","32","0","3","2","27","649","46","461","119","297","147","249","370","112","258","12","12","13","3","5","0","113","113","116","34","critical"
"47299","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47299 Simplify fireContainerEvent method and enable it to work with implementations that extend StandardContext. See http://svn.apache.org/viewvc?view=rev&revision=287710 for why it was written this way originally.","Bug 47299  Cannot override StandardContext in embedding case because of StandardSession.fireContainerEvent","cannot overrid standard context standardcontext embed case standard session standardsess fire contain event firecontainerev","StandardSession.fireContainerEvent checks for the String class name! Why not just use an instanceof check here?","standard session standardsess fire contain event firecontainerev check string class name use instanceof check","""java/org/apache/catalina/session/StandardSession.java""","2","2","2","1","20","2","10","7","3","0","8","65","65","65","19","65","0","0","7","58","1778","377","744","199","490","660","358","528","193","335","20","20","26","6","4","1","165","165","179","94","normal"
"47308","15","Filip Hanik","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47308 Patch provided by Keiichi Fujino with one change, default is false","Bug 47308  Cannot join in the cluster membership.","cannot join cluster membership","","","""java/org/apache/catalina/tribes/membership/McastService.java""","1","1","1","1","7","0","5","1","1","1","3","61","61","60","10","61","0","0","1","60","628","80","379","112","211","169","199","296","113","183","10","10","10","3","3","0","96","96","104","63","normal"
"47308","15","Filip Hanik","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47308 Patch provided by Keiichi Fujino with one change, default is false","Bug 47308  Cannot join in the cluster membership.","cannot join cluster membership","","","""java/org/apache/catalina/tribes/membership/McastServiceImpl.java""","3","3","3","1","15","0","13","1","8","1","3","32","32","31","29","32","0","3","2","27","643","45","459","118","295","144","247","368","111","257","12","12","13","3","5","0","114","114","117","34","normal"
"47319","580","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47319 Don't return null for getRemoteHost() if the IP address cannot be resolved.","Bug 47319  With APR, getRemoteHost() returns NULL for unknown clients","apr get remot host getremotehost return null unknown client","","","""java/org/apache/coyote/http11/Http11AprProcessor.java""","9","9","11","3","55","6","41","8","1","0","1","14","14","14","7","14","0","0","6","8","915","132","624","131","468","161","354","480","123","357","47","47","57","18","6","0","130","130","162","52","normal"
"47320","114","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47320 Don't rely on the platform default encoding being suitable to parse the session ID","Bug 47320  Decoding jsessionid bug on z/os","decod jsessionid","If you receive a rewritten URL on z/os with uss (unix on a mainframe), Tomcat
does not properly decode the jsessionid portion of the URL.

The problem is in org.apache.catalina.connector.CoyoteAdapter in the parseSessionId method.

The two instantiations of a String object do not specify the encdoding to use.

e.g. String sid = new String(uriBC.getBuffer(), start + sessionIdStart,
                            semicolon2 - sessionIdStart); 

...as well as the second String instantiation in this method.

Consequently z/os uses its default encoding which (I think) is EBCDIC.

If I recompile with a hardcoded ""UTF-8"" for the encoding then the jsessionid decodes properly.  Not that I am suggesting this literally for the official fix.

e.g. String sid = new String(uriBC.getBuffer(), start + sessionIdStart,
                            semicolon2 - sessionIdStart, ""UTF-8"");","receiv rewritten url us unix mainfram tomcat properli decod jsessionid portion url problem apach catalina connector coyot adapt coyoteadapt pars session id parsesessionid method two instanti string object specifi encdod use string sid new string uri uribc get buffer getbuff start session id start sessionidstart semicolon2 session id start sessionidstart well second string instanti method consequ us default encod think ebcdic recompil hardcod utf encod jsessionid decod properli suggest liter offici fix string sid new string uri uribc get buffer getbuff start session id start sessionidstart semicolon2 session id start sessionidstart utf","""java/org/apache/catalina/connector/CoyoteAdapter.java""","9","9","12","4","64","6","45","13","1","3","6","13","13","10","2","13","0","0","7","6","990","145","633","126","467","212","340","468","118","350","25","25","27","13","6","0","129","129","157","52","normal"
"47331","146","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47331 Uninterpreted tags are essentially template text so apply the rules of JSp.2.2 there too.","Bug 47331  No translation error messag when using #{...} in template text","translat error messag use templat text","","","""java/org/apache/jasper/compiler/Validator.java""","4","4","6","1","26","2","21","2","8","3","15","58","58","55","13","58","5","16","0","37","1772","229","1298","356","945","247","537","811","278","533","44","44","51","6","8","0","270","270","371","80","normal"
"47342","170","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47342 Make sure replicated context is initialised before accessing fields Patch provided by Keiichi Fujino","Bug 47342  ReplicatedContext#start throws NullPointerException.","replic context replicatedcontext start throw null pointer except nullpointerexcept","","","""java/org/apache/catalina/ha/context/ReplicatedContext.java""","2","2","2","1","6","0","5","0","3","0","2","20","20","20","4","20","0","0","2","18","211","31","158","64","74","23","78","121","55","66","6","6","6","3","3","0","40","40","42","24","normal"
"47343","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47343 Regression in https://issues.apache.org/bugzilla/show_bug.cgi?id=42747 context.xml can now be edited without resources being deleted","Bug 47343  Fails re-deploying, when we update context.xml.","fail re deploy redeploy updat context xml","","","""java/org/apache/catalina/startup/HostConfig.java""","4","4","4","1","25","2","18","5","2","1","3","44","44","43","16","44","0","0","19","25","1418","227","865","197","616","326","420","624","193","431","30","30","37","10","7","0","195","195","212","87","normal"
"47364","141","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47364 Document that HttpServletRequest.getAttributeNames() does not return the names of all attributes (internal Tomcat attributes are excluded)","Bug 47364  HttpServletRequest.getAttributeNames() does not return the names of all attributes","http servlet request httpservletrequest get attribut name getattributenam return name attribut","In an email exchange that involved Ranier (see attachment), he suggested I log this in Bugzilla, so I am.

I was using Tomcat 6.0.20 on Windows XP SP3 with the latest Java 6 JVM. In the doGet method of a servlet, I was trying to see all request attributes to see if the ""sendfile supported"" attribute was set (specifically the request attribute org.apache.tomcat.sendfile.support). On my first pass at this I just used HttpServletRequest.getAttributeNames() to dump all the names of the attributes expecting to see this one listed, but I got no attributes listed at all. Then I actually got the attribute via getAttribute(""org.apache.tomcat.sendfile.support"") which worked. So getAttributeNames is not returning the names of all attributes.

So either:

1. getAttributeNames needs to be fixed to return the names of all attributes (i.e., a code change); or

2. The Tomcat doc needs to be updated in some way as to say thatgetAttributeNames only returns certain attributes and blah blah (i.e., a doc change).

Again my original email and Ranier's reply is attached.

Thanks!","email exchang involv ranier see attach suggest log bugzilla use tomcat window xp p3 sp3 latest java jvm do get doget method servlet tri see request attribut see sendfil support attribut set specif request attribut apach tomcat sendfil support first pa use http servlet request httpservletrequest get attribut name getattributenam dump name attribut expect see one list got attribut list actual got attribut via get attribut getattribut apach tomcat sendfil support work get attribut name getattributenam return name attribut either get attribut name getattributenam need fix return name attribut code chang tomcat doc need updat way say thatget attribut name thatgetattributenam return certain attribut blah blah doc chang origin email ranier repli attach thank","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","13","1","8","4","1","2","5","147","147","145","48","147","1","0","12","134","2738","544","1325","373","838","879","647","978","361","617","20","20","24","10","3","1","334","334","369","210","normal"
"47369","0","Filip Hanik","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47369 Patch provided by Keiichi Fujino","Bug 47369  DeltaRequest is never reset. (use BackupManager)","delta request deltarequest never reset use backup manag backupmanag","","","""java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java""","2","2","3","1","10","0","9","1","4","0","13","108","111","111","30","111","0","1","10","100","1468","175","1061","308","673","255","564","841","304","537","20","20","25","7","5","0","281","272","327","143","normal"
"47378","75","Timothy A. Funk","Allow welcome files without a physical backing. Inspired by this bug https://issues.apache.org/bugzilla/show_bug.cgi?id=47378","Bug 47378  welcome-file ignores servlet mapping","welcom file welcomefil ignor servlet map","Web applications that use a servlet mapping for their welcome-file are ignored
and the server returns either a directory listing or a 404 if the listing is
disabled.
I have JSF servlet defined and a servlet-mapping for *.jsf to go to the
FacesServlet.
I have ""index.jsf"" listed as by welcome-file and I get a 404 with directory
listing disabled.
I also have a custom servlet defined with its mapping and set the welcome-file
to its mapping and get a 404 as well.","web applic use servlet map welcom file welcomefil ignor server return either directori list list disabl jsf servlet defin servlet map servletmap jsf go face servlet facesservlet index jsf list welcom file welcomefil get directori list disabl custom servlet defin map set welcom file welcomefil map get well","""java/org/apache/tomcat/util/http/mapper/Mapper.java""","4","4","5","2","27","1","20","5","6","12","1","41","41","29","18","41","0","17","3","21","1437","201","889","248","609","350","449","656","231","425","21","21","31","11","6","0","198","198","218","102","enhancement"
"47389","0","Filip Hanik","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47389 patch provided by  Keiichi Fujino","Bug 47389  DeltaManager doesn't do the session replication. (notifySessionListenersOnReplication=false)","delta manag deltamanag doesn session replic notifi session listen on replic notifysessionlistenersonrepl fals","","","""java/org/apache/catalina/ha/session/DeltaManager.java""","2","2","2","1","14","0","9","4","1","0","4","90","90","90","38","90","0","0","21","69","1543","155","888","224","582","517","460","673","229","444","15","15","20","4","7","1","223","213","246","100","normal"
"47439","1","Filip Hanik","Better error message according to https://issues.apache.org/bugzilla/show_bug.cgi?id=47439","Bug 47439  PooledConnection.connect() fails to check for null connection","pool connect pooledconnect connect fail check null connect","PooledConnection.connect() fails to check for null return from java.sql.Driver.connect() method.

This can result in an NPE when the connection is used later.","pool connect pooledconnect connect fail check null return java sql driver connect method result npe connect use later","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/PooledConnection.java""","2","2","2","1","9","0","7","1","1","0","6","28","28","28","12","28","0","2","0","26","419","49","252","67","156","123","118","189","67","122","15","15","16","6","3","0","73","73","83","38","normal"
"47440","2","Filip Hanik","Make properties configurable and resolve https://issues.apache.org/bugzilla/show_bug.cgi?id=47440","Bug 47440  Remove DB-specific SQL statements from test cases (SELECT 1)","remov specif dbspecif sql statement case select","Some of the test cases assume that the JDBC provider supports ""SELECT 1"" as a valid SQL statement; however this is not always the case, e.g. Derby requires a table name to select from.

The solution provided in the patches is to use the validation query defined in the properties set up for the test, rather than always using ""SELECT 1"".","case assum jdbc provid support select valid sql statement howev alway case derbi requir tabl name select solut provid patch use valid queri defin properti set rather alway use select","""modules/jdbc-pool/test/org/apache/tomcat/jdbc/test/CheckOutThreadTest.java""","2","2","2","1","21","0","20","0","2","0","0","18","18","18","3","18","0","0","0","18","433","23","390","85","321","20","330","374","102","272","8","8","8","1","5","0","41","41","41","18","enhancement"
"47440","2","Filip Hanik","Make properties configurable and resolve https://issues.apache.org/bugzilla/show_bug.cgi?id=47440","Bug 47440  Remove DB-specific SQL statements from test cases (SELECT 1)","remov specif dbspecif sql statement case select","Some of the test cases assume that the JDBC provider supports ""SELECT 1"" as a valid SQL statement; however this is not always the case, e.g. Derby requires a table name to select from.

The solution provided in the patches is to use the validation query defined in the properties set up for the test, rather than always using ""SELECT 1"".","case assum jdbc provid support select valid sql statement howev alway case derbi requir tabl name select solut provid patch use valid queri defin properti set rather alway use select","""modules/jdbc-pool/test/org/apache/tomcat/jdbc/test/DefaultProperties.java""","1","1","1","1","34","0","34","2","1","0","0","1","1","1","0","1","0","0","0","1","63","3","40","6","32","22","37","38","6","32","1","1","1","1","0","1","1","1","1","1","enhancement"
"47440","2","Filip Hanik","Make properties configurable and resolve https://issues.apache.org/bugzilla/show_bug.cgi?id=47440","Bug 47440  Remove DB-specific SQL statements from test cases (SELECT 1)","remov specif dbspecif sql statement case select","Some of the test cases assume that the JDBC provider supports ""SELECT 1"" as a valid SQL statement; however this is not always the case, e.g. Derby requires a table name to select from.

The solution provided in the patches is to use the validation query defined in the properties set up for the test, rather than always using ""SELECT 1"".","case assum jdbc provid support select valid sql statement howev alway case derbi requir tabl name select solut provid patch use valid queri defin properti set rather alway use select","""modules/jdbc-pool/test/org/apache/tomcat/jdbc/test/TestSlowQueryReport.java""","2","2","2","1","23","0","22","0","1","0","0","4","4","4","0","4","0","0","0","4","131","12","102","44","77","17","89","100","49","51","4","4","4","1","2","0","10","10","10","4","enhancement"
"47451","125","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47451 Don't trigger an NPE if headers with null or zero length name or set or if a null value is specified. Silently ignore any such calls in the same way the calls are ignored if the response has already been committed.","Bug 47451  NPE if response contains null content-encoding header","npe respons contain null content encod contentencod header","","","""java/org/apache/catalina/connector/Response.java""","2","2","2","1","15","1","8","5","4","0","2","79","79","79","17","79","0","3","2","74","1614","336","719","190","450","562","337","522","178","344","12","12","19","8","3","1","184","184","206","128","normal"
"47462","144","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47462 Need to be able to override metadata complete if set in the global web.xml Patch provided by Keiichi Fujino","Bug 47462  The annotation doesn't become effective.(metadata-complete=""false"" is not effective.)","annot doesn becom effect metadata complet metadatacomplet fals effect","","","""java/org/apache/catalina/startup/WebRuleSet.java""","1","1","1","1","21","2","16","2","16","0","1","38","38","38","12","38","0","0","2","36","1108","187","724","146","538","197","331","412","115","297","10","10","14","1","3","0","65","65","70","38","normal"
"47478","0","Filip Hanik","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47478 Patch provided by Keiichi Fujino","Bug 47478  DeltaSession ignores notifyListenersOnReplication when BackupManager is used.","delta session deltasess ignor notifi listen on replic notifylistenersonrepl backup manag backupmanag use","","","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","7","4","2","0","2","51","51","51","6","51","0","2","7","42","811","100","425","120","244","288","220","329","117","212","8","8","9","5","3","1","95","95","106","62","normal"
"47499","75","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47499 Don't swallow BindException","Bug 47499  provide better insight on BindException: Cannot assign requested address","provid better insight bind except bindexcept cannot assign request address","1) cite the address you attempt to listen (not just the port)
2) proper exception chaining

the following info is currently lost: <<java.net.BindException: Cannot assign requested address
	at java.net.PlainSocketImpl.socketBind(Native Method)
	at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:359)
	at java.net.ServerSocket.bind(ServerSocket.java:319)
	at java.net.ServerSocket.<init>(ServerSocket.java:185)
	at javax.net.ssl.SSLServerSocket.<init>(SSLServerSocket.java:106)
	at com.privasphere.net.ssl.SSLServerSocketImpl.<init>(SSLServerSocketImpl.java:106)
	at com.privasphere.net.ssl.SSLServerSocketFactoryImpl.createServerSocket(SSLServerSocketFactoryImpl.java:71)
	at org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocketFactory.java:100)
	at org.apache.tomcat.util.net.PoolTcpEndpoint.initEndpoint(PoolTcpEndpoint.java:295)
	at org.apache.coyote.http11.Http11BaseProtocol.init(Http11BaseProtocol.java:139)
	at org.apache.catalina.connector.Connector.initialize(Connector.java:1017)
	at org.apache.catalina.core.StandardService.initialize(StandardService.java:578)>>","cite address attempt listen port proper except chain follow info current lost java net bind except bindexcept cannot assign request address java net plain socket impl plainsocketimpl socket bind socketbind nativ method java net plain socket impl plainsocketimpl bind plain socket impl plainsocketimpl java java net server socket serversocket bind server socket serversocket java java net server socket serversocket init server socket serversocket java javax net ssl server socket sslserversocket init server socket sslserversocket java privaspher net ssl server socket impl sslserversocketimpl init server socket impl sslserversocketimpl java privaspher net ssl server socket factori impl sslserversocketfactoryimpl creat server socket createserversocket server socket factori impl sslserversocketfactoryimpl java apach tomcat util net jsse socket factori jssesocketfactori creat socket createsocket socket factori jssesocketfactori java apach tomcat util net pool tcp endpoint pooltcpendpoint init endpoint initendpoint pool tcp endpoint pooltcpendpoint java apach coyot http11 http11 base protocol http11baseprotocol init http11 base protocol http11baseprotocol java apach catalina connector connector initi connector java apach catalina core standard servic standardservic initi standard servic standardservic java","""java/org/apache/tomcat/util/net/JIoEndpoint.java""","2","2","2","1","11","0","8","2","4","0","1","20","21","21","6","21","0","0","2","19","367","71","190","46","117","106","81","138","45","93","9","9","9","3","4","1","55","55","57","24","normal"
"47502","145","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47502 Don't try and replicate attributes we know to be non-serializable Patch by Tim Funk","Bug 47502  clustering fails on serializing javax.security.auth.subject","cluster fail serial javax secur auth subject","Clustering fails on serializing javax.security.auth.subject. See stack below.

I looked a little into the Tomcat code. In ./java/org/apache/catalina/connector/Request.java on line 1752 Tomcat puts the 'javax.security.auth.subject' on the session if you use a securitymanager. This is the MemoryUser in my case I think.

I must use the securitymanager because I use RMI.

Is there a solution possible by making the MemoryUser serializable or by not putting it in the session as an attribute. Mark Thomas <markt_at_apache_dot_org> suggested a note on the session at the Tomcat user-mailinglist. I've never seen notes on sessions.

The MemoryUser comes from the security-constraint in my web.xml.


Jul 8, 2009 5:53:52 PM org.apache.catalina.ha.session.DeltaSession writeObject
SEVERE: Cannot serialize session attribute javax.security.auth.subject for session 9C533E0EB4A79ED5B206B8F5A5DB09AD
java.io.NotSerializableException: org.apache.catalina.users.MemoryUser
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1156)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:326)
    at java.util.LinkedList.writeObject(LinkedList.java:943)
    at sun.reflect.GeneratedMethodAccessor216.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1461)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150)
    at java.io.ObjectOutputStream.access$300(ObjectOutputStream.java:143)
    at java.io.ObjectOutputStream$PutFieldImpl.writeFields(ObjectOutputStream.java:1668)
    at java.io.ObjectOutputStream.writeFields(ObjectOutputStream.java:454)
    at javax.security.auth.Subject$SecureSet.writeObject(Subject.java:1281)
    at sun.reflect.GeneratedMethodAccessor215.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1461)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509)
    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:416)
    at java.util.Collections$SynchronizedCollection.writeObject(Collections.java:1602)
    at sun.reflect.GeneratedMethodAccessor214.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1461)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509)
    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:416)
    at javax.security.auth.Subject.writeObject(Subject.java:919)
    at sun.reflect.GeneratedMethodAccessor213.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1461)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:326)
    at org.apache.catalina.ha.session.DeltaSession.writeObject(DeltaSession.java:714)
    at org.apache.catalina.ha.session.DeltaSession.writeObjectData(DeltaSession.java:475)
    at org.apache.catalina.ha.session.DeltaSession.writeObjectData(DeltaSession.java:472)
    at org.apache.catalina.ha.session.DeltaManager.serializeSessions(DeltaManager.java:733)
    at org.apache.catalina.ha.session.DeltaManager.sendSessions(DeltaManager.java:1513)
    at org.apache.catalina.ha.session.DeltaManager.handleGET_ALL_SESSIONS(DeltaManager.java:1479)
    at org.apache.catalina.ha.session.DeltaManager.messageReceived(DeltaManager.java:1310)
    at org.apache.catalina.ha.session.DeltaManager.messageDataReceived(DeltaManager.java:1093)
    at org.apache.catalina.ha.session.ClusterSessionListener.messageReceived(ClusterSessionListener.java:87)
    at org.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:901)
    at org.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:882)
    at org.apache.catalina.tribes.group.GroupChannel.messageReceived(GroupChannel.java:269)
    at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)
    at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)
    at org.apache.catalina.tribes.group.interceptors.TcpFailureDetector.messageReceived(TcpFailureDetector.java:110)
    at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)
    at org.apache.catalina.tribes.group.ChannelCoordinator.messageReceived(ChannelCoordinator.java:241)
    at org.apache.catalina.tribes.transport.ReceiverBase.messageDataReceived(ReceiverBase.java:225)
    at org.apache.catalina.tribes.transport.nio.NioReplicationTask.drainChannel(NioReplicationTask.java:188)
    at org.apache.catalina.tribes.transport.nio.NioReplicationTask.run(NioReplicationTask.java:91)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)","cluster fail serial javax secur auth subject see stack look littl tomcat code java apach catalina connector request java line tomcat put javax secur auth subject session use securitymanag memori user memoryus case think must use securitymanag use rmi solut possibl make memori user memoryus serializ put session attribut mark thoma markt apach dot suggest note session tomcat user mailinglist usermailinglist never seen note session memori user memoryus come secur constraint securityconstraint web xml jul pm apach catalina session delta session deltasess write object writeobject sever cannot serial session attribut javax secur auth subject session c533 e0 b4 a79 d5 b206 b8 f5 a5 b09 9c533e0eb4a79ed5b206b8f5a5db09ad java not serializ except notserializableexcept apach catalina user memori user memoryus java object output stream objectoutputstream write object0 writeobject0 object output stream objectoutputstream java java object output stream objectoutputstream write object writeobject object output stream objectoutputstream java java util link list linkedlist write object writeobject link list linkedlist java sun reflect gener method accessor216 generatedmethodaccessor216 invok unknown sourc sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java java object stream class objectstreamclass invok write object invokewriteobject object stream class objectstreamclass java java object output stream objectoutputstream write serial data writeserialdata object output stream objectoutputstream java java object output stream objectoutputstream write ordinari object writeordinaryobject object output stream objectoutputstream java java object output stream objectoutputstream write object0 writeobject0 object output stream objectoutputstream java java object output stream objectoutputstream access object output stream objectoutputstream java java object output stream objectoutputstream put field impl putfieldimpl write field writefield object output stream objectoutputstream java java object output stream objectoutputstream write field writefield object output stream objectoutputstream java javax secur auth subject secur set secureset write object writeobject subject java sun reflect gener method accessor215 generatedmethodaccessor215 invok unknown sourc sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java java object stream class objectstreamclass invok write object invokewriteobject object stream class objectstreamclass java java object output stream objectoutputstream write serial data writeserialdata object output stream objectoutputstream java java object output stream objectoutputstream write ordinari object writeordinaryobject object output stream objectoutputstream java java object output stream objectoutputstream write object0 writeobject0 object output stream objectoutputstream java java object output stream objectoutputstream default write field defaultwritefield object output stream objectoutputstream java java object output stream objectoutputstream default write object defaultwriteobject object output stream objectoutputstream java java util collect synchron collect synchronizedcollect write object writeobject collect java sun reflect gener method accessor214 generatedmethodaccessor214 invok unknown sourc sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java java object stream class objectstreamclass invok write object invokewriteobject object stream class objectstreamclass java java object output stream objectoutputstream write serial data writeserialdata object output stream objectoutputstream java java object output stream objectoutputstream write ordinari object writeordinaryobject object output stream objectoutputstream java java object output stream objectoutputstream write object0 writeobject0 object output stream objectoutputstream java java object output stream objectoutputstream default write field defaultwritefield object output stream objectoutputstream java java object output stream objectoutputstream default write object defaultwriteobject object output stream objectoutputstream java javax secur auth subject write object writeobject subject java sun reflect gener method accessor213 generatedmethodaccessor213 invok unknown sourc sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java java object stream class objectstreamclass invok write object invokewriteobject object stream class objectstreamclass java java object output stream objectoutputstream write serial data writeserialdata object output stream objectoutputstream java java object output stream objectoutputstream write ordinari object writeordinaryobject object output stream objectoutputstream java java object output stream objectoutputstream write object0 writeobject0 object output stream objectoutputstream java java object output stream objectoutputstream write object writeobject object output stream objectoutputstream java apach catalina session delta session deltasess write object writeobject delta session deltasess java apach catalina session delta session deltasess write object data writeobjectdata delta session deltasess java apach catalina session delta session deltasess write object data writeobjectdata delta session deltasess java apach catalina session delta manag deltamanag serial session serializesess delta manag deltamanag java apach catalina session delta manag deltamanag send session sendsess delta manag deltamanag java apach catalina session delta manag deltamanag handl handleget session delta manag deltamanag java apach catalina session delta manag deltamanag messag receiv messagereceiv delta manag deltamanag java apach catalina session delta manag deltamanag messag data receiv messagedatareceiv delta manag deltamanag java apach catalina session cluster session listen clustersessionlisten messag receiv messagereceiv cluster session listen clustersessionlisten java apach catalina tcp simpl tcp cluster simpletcpclust messag receiv messagereceiv simpl tcp cluster simpletcpclust java apach catalina tcp simpl tcp cluster simpletcpclust messag receiv messagereceiv simpl tcp cluster simpletcpclust java apach catalina tribe group group channel groupchannel messag receiv messagereceiv group channel groupchannel java apach catalina tribe group channel interceptor base channelinterceptorbas messag receiv messagereceiv channel interceptor base channelinterceptorbas java apach catalina tribe group channel interceptor base channelinterceptorbas messag receiv messagereceiv channel interceptor base channelinterceptorbas java apach catalina tribe group interceptor tcp failur detector tcpfailuredetector messag receiv messagereceiv tcp failur detector tcpfailuredetector java apach catalina tribe group channel interceptor base channelinterceptorbas messag receiv messagereceiv channel interceptor base channelinterceptorbas java apach catalina tribe group channel coordin channelcoordin messag receiv messagereceiv channel coordin channelcoordin java apach catalina tribe transport receiv base receiverbas messag data receiv messagedatareceiv receiv base receiverbas java apach catalina tribe transport nio nio replic task nioreplicationtask drain channel drainchannel nio replic task nioreplicationtask java apach catalina tribe transport nio nio replic task nioreplicationtask run nio replic task nioreplicationtask java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","7","4","2","0","2","52","52","52","6","52","0","2","7","43","855","103","463","141","259","291","230","345","123","222","8","8","10","5","3","1","101","101","114","63","critical"
"47515","3","Filip Hanik","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47515 Patch submitted by Ryuichi Yoshihara","Bug 47515  Tomcat can't replicate session when it is started.","tomcat replic session start","","","""java/org/apache/catalina/ha/session/DeltaManager.java""","2","2","2","1","14","0","9","4","1","0","4","90","90","90","38","90","0","0","21","69","1545","155","890","224","583","517","461","674","229","445","15","15","20","4","7","1","223","213","246","100","normal"
"47518","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47518 Fix reference to old method in Valve Javadoc Patch by Christopher Schultz","Bug 47518  Valve Interface Javadocs for invoke method references non-existent method","valv interfac javadoc invok method refer non exist nonexist method","It appears that the Valve interface javadoc hasn't been updated since around TC 5.5. Here is a snip of what it currently available from TC's website (6.0.20 I would guess):

""
# If the corresponding Response was not generated (and control was not returned, call the next Valve in the pipeline (if there is one) by executing context.invokeNext().

.
.
.

# Modify the HTTP headers included with the Response after the invokeNext() method has returned.
# Perform any actions on the output stream associated with the specified Response after the invokeNext() method has returned.
""

The invokeNext method has not existed in the Valve interface in many versions. I believe the replacement is:

this.getNext().invoke(request, response)

I'm happy to provide a doc patch if getNext().invoke(request, response) is the expected replacement for invokeNext(request, response).

Note that the docs for 5.5 also have the same problem. Please let me know if I should log that separately.","appear valv interfac javadoc hasn updat sinc around tc snip current avail tc websit would guess correspond respons gener control return call next valv pipelin one execut context invok next invokenext modifi http header includ respons invok next invokenext method return perform action output stream associ specifi respons invok next invokenext method return invok next invokenext method exist valv interfac mani version believ replac get next getnext invok request respons happi provid doc patch get next getnext invok request respons expect replac invok next invokenext request respons note doc problem pleas let know log separ","""java/org/apache/catalina/Valve.java""","0","0","0","0","0","0","0","0","1","0","0","0","6","6","0","6","0","0","0","6","148","26","15","14","0","107","11","12","12","0","0","0","0","0","0","7","0","0","0","0","normal"
"47524","0","Filip Hanik","Patch by arielandres@hotmail.com Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=47524","Bug 47524  McastServiceImpl executor is not dispatching events.","mcast servic impl mcastserviceimpl executor dispatch event","","","""java/org/apache/catalina/tribes/membership/McastServiceImpl.java""","3","3","3","1","15","0","13","1","8","1","3","32","32","31","30","32","0","3","2","27","651","46","462","120","297","148","249","370","112","258","12","12","13","3","5","0","114","114","117","34","normal"
"47524","0","Filip Hanik","Patch by arielandres@hotmail.com Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=47524","Bug 47524  McastServiceImpl executor is not dispatching events.","mcast servic impl mcastserviceimpl executor dispatch event","","","""java/org/apache/catalina/tribes/transport/ReceiverBase.java""","1","1","1","1","4","0","3","0","3","0","2","92","92","92","35","92","1","0","2","89","628","111","409","158","183","111","195","313","158","155","5","5","5","5","3","0","116","116","116","100","normal"
"47537","148","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47537 Return an error page if a forward during form auth fails rather than a zero length 200 response.","Bug 47537  Empty response when forward to login page fails","empti respons forward login page fail","When tomcat receives a POST request on a session that has timedout, it will forward to the form based login page (form-login-page). 
If this forward fails for some reason (an error in the login page for instance), tomcat will return an empty HTTP response, without any error code. 

The tomcat log says ""Unexpected error forwarding to login page"" and contains the detailed stacktrace, but i would expect the error to show up in the browser as well (at least a 500 status)","tomcat receiv post request session timedout forward form base login page form login page formloginpag forward fail reason error login page instanc tomcat return empti http respons without error code tomcat log say unexpect error forward login page contain detail stacktrac would expect error show browser well least statu","""java/org/apache/catalina/authenticator/FormAuthenticator.java""","6","6","7","2","43","4","28","10","1","0","2","10","10","10","1","10","0","0","6","4","543","86","318","97","227","139","166","232","79","153","32","32","34","14","4","0","65","65","70","27","normal"
"47568","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47568 Create the tmp dir where intended Remove it when we are done","Bug 47568  TestTomcat fails to delete work directory","test tomcat testtomcat fail delet work directori","TestTomcat.setUp() creates a work directory, but does not delete it in tearDown()","test tomcat testtomcat set up setup creat work directori delet tear down teardown","""test/org/apache/catalina/startup/TestTomcat.java""","1","1","1","1","11","1","8","2","2","2","1","8","8","6","4","8","0","0","0","8","149","21","92","49","46","38","60","72","43","29","3","3","3","1","1","0","10","10","10","8","trivial"
"47569","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47569 Use the new base class so tests clean up after themselves","Bug 47569  Test cases do not clear up afterwards","case clear afterward","Some of the test cases (e.g. TestTomcat) start a Tomcat server,

This creates the directory tree

tomcat.8080/work...

which is not deleted when the test finishes.","case test tomcat testtomcat start tomcat server creat directori tree tomcat work delet finish","""test/org/apache/catalina/connector/TestRequest.java""","1","1","1","1","13","1","10","2","4","0","4","16","17","17","8","17","0","1","1","15","316","47","219","71","136","61","131","163","69","94","5","5","6","4","2","0","27","27","28","19","minor"
"47569","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47569 Use the new base class so tests clean up after themselves","Bug 47569  Test cases do not clear up afterwards","case clear afterward","Some of the test cases (e.g. TestTomcat) start a Tomcat server,

This creates the directory tree

tomcat.8080/work...

which is not deleted when the test finishes.","case test tomcat testtomcat start tomcat server creat directori tree tomcat work delet finish","""test/org/apache/catalina/startup/TestTomcat.java""","1","1","1","1","11","1","8","2","2","2","2","8","8","6","4","8","0","0","0","8","153","23","94","50","48","38","62","74","44","30","3","3","3","1","1","0","10","10","10","8","minor"
"47576","5","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=47576 Fix exception name in Javadoc Patch provided by sebb","Bug 47576  Javadoc errors - Exception name misspelt","javadoc error except name misspelt","The files

FairBlockingQueue.java
MultiLockFairBlockingQueue.java

use
 
* @throws UnsupportedOperation

This should be

* @throws UnsupportedOperationException","file fair block queue fairblockingqueu java multi lock fair block queue multilockfairblockingqueu java use throw unsupport oper unsupportedoper throw unsupport oper except unsupportedoperationexcept","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/FairBlockingQueue.java""","1","1","1","1","8","0","5","2","4","0","1","41","41","41","10","41","0","0","0","41","512","54","275","88","150","184","131","200","87","113","4","4","6","4","3","1","57","57","62","46","normal"
"47576","5","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=47576 Fix exception name in Javadoc Patch provided by sebb","Bug 47576  Javadoc errors - Exception name misspelt","javadoc error except name misspelt","The files

FairBlockingQueue.java
MultiLockFairBlockingQueue.java

use
 
* @throws UnsupportedOperation

This should be

* @throws UnsupportedOperationException","file fair block queue fairblockingqueu java multi lock fair block queue multilockfairblockingqueu java use throw unsupport oper unsupportedoper throw unsupport oper except unsupportedoperationexcept","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/MultiLockFairBlockingQueue.java""","1","1","1","1","9","0","6","2","4","0","0","43","43","43","13","43","0","0","0","43","537","57","306","103","171","175","164","241","109","132","4","4","6","4","3","1","66","66","70","54","normal"
"47576","5","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=47576 Fix exception name in Javadoc Patch provided by sebb","Bug 47576  Javadoc errors - Exception name misspelt","javadoc error except name misspelt","The files

FairBlockingQueue.java
MultiLockFairBlockingQueue.java

use
 
* @throws UnsupportedOperation

This should be

* @throws UnsupportedOperationException","file fair block queue fairblockingqueu java multi lock fair block queue multilockfairblockingqueu java use throw unsupport oper unsupportedoper throw unsupport oper except unsupportedoperationexcept","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/MultiLockFairBlockingQueue.java""","1","1","1","1","9","0","6","2","4","0","0","43","43","43","13","43","0","0","0","43","537","57","306","103","171","175","164","241","109","132","4","4","6","4","3","1","66","66","70","54","normal"
"47583","4","Mark Emlyn David Thomas","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=47583 Fix timing related failures. Patch suggested by sebb","Bug 47583  Fix occasional test failure in TestConcurrency","fix occasion failur test concurr testconcurr","","","""modules/jdbc-pool/test/org/apache/tomcat/jdbc/test/TestConcurrency.java""","3","3","3","1","22","0","22","1","4","0","1","9","9","9","1","9","0","0","1","8","194","13","180","34","131","7","123","155","41","114","7","7","7","1","3","0","31","31","31","9","normal"
"47612","5","Filip Hanik","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47612 patch provided by sebb Abstract classes, private-> protected for subclass access","Bug 47612  [PATCH] fix unsafe public string array in AbstractCreateStatementInterceptor","patch fix unsaf public string array abstract creat statement interceptor abstractcreatestatementinterceptor","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/interceptor/AbstractCreateStatementInterceptor.java""","1","1","2","1","10","0","7","3","1","0","2","4","6","6","0","6","0","0","1","5","102","9","42","21","20","51","24","32","20","12","3","3","3","3","2","1","7","7","8","6","enhancement"
"47612","5","Filip Hanik","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47612 patch provided by sebb Abstract classes, private-> protected for subclass access","Bug 47612  [PATCH] fix unsafe public string array in AbstractCreateStatementInterceptor","patch fix unsaf public string array abstract creat statement interceptor abstractcreatestatementinterceptor","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/interceptor/AbstractQueryReport.java""","3","3","4","1","17","0","10","7","2","0","2","10","12","12","4","12","0","0","6","6","266","20","133","50","78","114","75","106","48","58","14","14","15","5","3","1","35","35","45","16","enhancement"
"47705","12","Timothy A. Funk","https://issues.apache.org/bugzilla/show_bug.cgi?id=47705","Bug 47705  ArithmeticException: / by zero when expiring sessions via manager","arithmet except arithmeticexcept zero expir session via manag","Received ArithmeticException: / by zero when expiring sessions via Tomcat manager webapp.

This exception was thrown only if session-timeout is set as -1 on webapp web.xml. Moreover, the exception was also thrown regardless of the idle parameter value (/expire?path=/xxx&idle=mm) as long as session-timeout = -1.

Result:
Exception stacktrace:
ERROR: 19/08/2009 00:18:22 [http-80-exec-33] (org.apache.catalina.core.ApplicationContext:669) HTMLManager: ManagerServlet.sessions[/contextpath]
java.lang.ArithmeticException: / by zero
        at org.apache.catalina.manager.ManagerServlet.sessions(ManagerServlet.java:1133)
        at org.apache.catalina.manager.HTMLManagerServlet.sessions(HTMLManagerServlet.java:573)
        at org.apache.catalina.manager.HTMLManagerServlet.expireSessions(HTMLManagerServlet.java:660)
        at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:118)
        at org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:157)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
        at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:880)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:719)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:2081)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:619)","receiv arithmet except arithmeticexcept zero expir session via tomcat manag webapp except thrown session timeout sessiontimeout set webapp web xml moreov except thrown regardless idl paramet valu expir path xxx idl mm long session timeout sessiontimeout result except stacktrac error http 80 exec 80exec apach catalina core applic context applicationcontext manag htmlmanag manag servlet managerservlet session contextpath java lang arithmet except arithmeticexcept zero apach catalina manag manag servlet managerservlet session manag servlet managerservlet java apach catalina manag manag servlet htmlmanagerservlet session manag servlet htmlmanagerservlet java apach catalina manag manag servlet htmlmanagerservlet expir session expiresess manag servlet htmlmanagerservlet java apach catalina manag manag servlet htmlmanagerservlet do get doget manag servlet htmlmanagerservlet java apach catalina manag manag servlet htmlmanagerservlet do post dopost manag servlet htmlmanagerservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 nio processor http11nioprocessor process http11 nio processor http11nioprocessor java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""java/org/apache/catalina/manager/ManagerServlet.java""","6","6","7","2","38","2","28","7","1","2","1","34","34","32","12","34","0","0","26","8","1639","212","1026","205","763","401","492","712","191","521","21","21","32","6","5","0","215","215","253","81","normal"
"47718","93","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47718 Correct file descriptor leak on context reload/stop Patch provided by George Sexton","Bug 47718  ManagerBase leaks fd to /dev/urandom when context stopped","manag base managerbas leak fd dev urandom context stop","On operating systems where /dev/urandom exists, org.apache.catalina.session.ManagerBase will use it as a source of data for getRandomBytes().

If you stop a context or undeploy a host, the number of file descriptors that have /dev/urandom open tomcat remains constant.

For example, if you use the manager application to stop or undeploy a context, the number of file descriptors to /dev/urandom is the same as before the stop.

File descriptor use is determined by using lsof or examining the /proc/<pid>/fd directory on Linux.

The same issue is seen if you undeploy a virtual host.

If you undeploy/deploy a context, or remove/add a virtual host, the # of file descriptors to /dev/urandom will increase each time.

This is because ManagerBase does not close the DataInputStream it holds to /dev/urandom.

The patch shown below resolves this issue. Stopping a context, or undeploying a virtual host will close the session manager's reference to /dev/urandom.

--- apache-tomcat-5.5.28-src/container/catalina/src/share/org/apache/catalina/session/ManagerBase.java	2009-07-24 13:35:00.000000000 -0600
+++ apache-tomcat-5.5.28-gls/container/catalina/src/share/org/apache/catalina/session/ManagerBase.java	2009-08-20 13:38:03.000000000 -0600
@@ -688,10 +688,17 @@
     }

    public void destroy() {
         if( oname != null )
             Registry.getRegistry(null, null).unregisterComponent(oname);
+        if (randomIS!=null) {
+            try {
+                randomIS.close();
+            } catch (IOException ioe) {
+            }
+            randomIS=null;
+        }
         initialized=false;
         oname = null;
         // Don't clear log since it is required in case attributes are changed
         // (eg via JMX) whilst the manager is stopped.
     }","oper system dev urandom exist apach catalina session manag base managerbas use sourc data get random byte getrandombyt stop context undeploy host number file descriptor dev urandom open tomcat remain constant exampl use manag applic stop undeploy context number file descriptor dev urandom stop file descriptor use determin use lsof examin proc pid fd directori linux issu seen undeploy virtual host undeploy deploy context remov add virtual host file descriptor dev urandom increas time manag base managerbas close data input stream datainputstream hold dev urandom patch shown resolv issu stop context undeploy virtual host close session manag refer dev urandom apach tomcat apachetomcat 28 src 28src contain catalina src share apach catalina session manag base managerbas java apach tomcat apachetomcat 28 gl 28gl contain catalina src share apach catalina session manag base managerbas java public void destroy onam null registri get registri getregistri null null unregist compon unregistercompon onam random randomi null tri random randomi close catch except ioexcept ioe random randomi null initi fals onam null clear log sinc requir case attribut chang via jmx whilst manag stop","""java/org/apache/catalina/session/ManagerBase.java""","2","2","2","1","12","1","7","4","2","0","4","74","74","74","27","74","0","0","3","71","1306","265","613","202","372","428","320","469","202","267","8","8","9","4","4","1","149","149","154","86","normal"
"47744","109","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47744 Prevent medium term memory leak when ussing SSL with a security manager Based on a patch by Greg Vanore","Bug 47744  Memory leak when using SSL + Java security manager","memori leak use ssl java secur manag","","","""java/org/apache/tomcat/util/net/jsse/JSSESupport.java""","3","3","3","2","14","0","12","1","2","0","1","12","12","12","4","12","3","0","2","7","252","30","178","60","108","45","101","143","55","88","9","9","9","7","3","0","41","41","42","27","major"
"47799","75","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47799 Unable to configure domain in Membership and DomainFilterInterceptor Patch provided by Keiichi Fujino","Bug 47799  Domain does not work in Membership and DomainFilterInterceptor.","domain work membership domain filter interceptor domainfilterinterceptor","","","""java/org/apache/catalina/tribes/group/interceptors/DomainFilterInterceptor.java""","1","1","1","1","4","0","4","0","1","0","0","10","10","10","2","10","0","0","1","9","107","17","65","29","26","26","30","52","22","30","4","4","4","1","1","0","19","19","19","10","normal"
"47799","75","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47799 Unable to configure domain in Membership and DomainFilterInterceptor Patch provided by Keiichi Fujino","Bug 47799  Domain does not work in Membership and DomainFilterInterceptor.","domain work membership domain filter interceptor domainfilterinterceptor","","","""java/org/apache/catalina/tribes/membership/McastService.java""","1","1","1","1","7","0","5","1","1","1","4","62","62","61","9","62","0","0","1","61","644","80","395","125","213","169","200","298","114","184","10","10","10","3","3","0","97","97","105","64","normal"
"47820","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47820 Add non-static versions of static methods","Bug 47820  Static utility methods in Tomcat should be instance methods","static util method tomcat instanc method","Why are the static addServlet() methods in Tomcat static?  I can see
they don't use any state from the instance, but isn't it cleaner to use
an instance method, so that the API is uniform (everything I want to do
to a tomcat instance goes through the instance)?  It would be more
consistent to follow the pattern of addServlet(String,String,String),
and search for the context by name instead of requiring the instance to
be passed in to a static method.","static add servlet addservlet method tomcat static see use state instanc isn cleaner use instanc method api uniform everyth tomcat instanc go instanc would consist follow pattern add servlet addservlet string string string search context name instead requir instanc pass static method","""java/org/apache/catalina/startup/Tomcat.java""","1","1","1","1","12","0","7","4","5","3","2","38","38","35","14","38","0","1","5","32","842","86","517","287","360","240","179","244","103","141","6","6","6","1","3","0","61","61","62","38","normal"
"47826","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47826 Broken debug message","Bug 47826  a logging statement error in org.apache.catalina.startup.Bootstrap.java","log statement error apach catalina startup bootstrap java","// Local repository
            boolean replace = false;
            String before = repository;
            while ((i=repository.indexOf(CATALINA_HOME_TOKEN))>=0) {
                replace=true;
                if (i>0) {
                repository = repository.substring(0,i) + getCatalinaHome() 
                    + repository.substring(i+CATALINA_HOME_TOKEN.length());
                } else {
                    repository = getCatalinaHome() 
                        + repository.substring(CATALINA_HOME_TOKEN.length());
                }
            }
            while ((i=repository.indexOf(CATALINA_BASE_TOKEN))>=0) {
                replace=true;
                if (i>0) {
                repository = repository.substring(0,i) + getCatalinaBase() 
                    + repository.substring(i+CATALINA_BASE_TOKEN.length());
                } else {
                    repository = getCatalinaBase() 
                        + repository.substring(CATALINA_BASE_TOKEN.length());
                }
            }
            if (replace && log.isDebugEnabled())
                log.debug(""Expanded "" + before + "" to "" + replace);

The last line should be: ""log.debug(""Expanded "" + before + "" to "" + repository);""","local repositori boolean replac fals string repositori repositori index of indexof catalina home token replac true repositori repositori substr get catalina home getcatalinahom repositori substr catalina home token length els repositori get catalina home getcatalinahom repositori substr catalina home token length repositori index of indexof catalina base token replac true repositori repositori substr get catalina base getcatalinabas repositori substr catalina base token length els repositori get catalina base getcatalinabas repositori substr catalina base token length replac log is debug enabl isdebugen log debug expand replac last line log debug expand repositori","""java/org/apache/catalina/startup/Bootstrap.java""","2","2","2","1","19","2","14","3","1","3","4","19","19","16","4","19","0","5","0","14","498","108","292","100","193","98","152","204","80","124","12","12","14","4","3","0","51","51","55","24","trivial"
"47828","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47828 Change Tomcat.setSilent() to setSilent(boolean) so it can be turned on and off","Bug 47828  Change Tomcat.setSilent() to setSilent(boolean)","chang tomcat set silent setsil set silent setsil boolean","Change Tomcat.setSilent() to setSilent(boolean).  It's nicer for clients to have a JavaBean type setter, and it doesn't seem to make sense that you can set something but not unset it.","chang tomcat set silent setsil set silent setsil boolean nicer client java bean javabean type setter doesn seem make sens set someth unset","""java/org/apache/catalina/startup/Tomcat.java""","1","1","1","1","13","0","7","4","5","3","2","40","40","37","14","40","0","1","5","34","890","88","529","294","365","274","184","251","108","143","6","6","6","1","3","1","63","63","64","40","normal"
"47836","70","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47836 Don't keep TLD/listener info between reloads","Bug 47836  TldConfig keeps an internal list of ApplicationListeners","tld config tldconfig keep intern list applic listen applicationlisten","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","2","10","4","1","0","3","267","267","267","104","267","0","14","6","247","5804","1223","2930","766","1891","1661","1383","2119","752","1367","62","62","80","9","5","1","661","661","712","345","normal"
"47836","70","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47836 Don't keep TLD/listener info between reloads","Bug 47836  TldConfig keeps an internal list of ApplicationListeners","tld config tldconfig keep intern list applic listen applicationlisten","","","""java/org/apache/catalina/startup/TldConfig.java""","3","3","3","1","16","0","11","3","2","2","7","24","24","22","7","24","0","7","0","17","638","82","377","98","243","180","187","268","94","174","10","10","13","6","5","0","77","77","84","32","normal"
"47866","3","Mark Emlyn David Thomas","Add a test case for https://issues.apache.org/bugzilla/show_bug.cgi?id=47866 Fix a couple of places where expected and actual were the wrong way around","Bug 47866  NullPointerException in embedded tomcat","null pointer except nullpointerexcept embed tomcat","It seems that the WebappClassLoader was stopped?

{noformat}
Caused by: java.lang.NullPointerException
	at org.apache.catalina.loader.WebappClassLoader.findResources(WebappClassLoader.java:994)
	at java.lang.ClassLoader.getResources(ClassLoader.java:1016)
{noformat}

All I did was launch a server add a context and then ask it to load a resource from its classpath.  It's a bit more complicated than that, so I'll try and narrow it down if needed.","seem webapp class loader webappclassload stop noformat caus java lang null pointer except nullpointerexcept apach catalina loader webapp class loader webappclassload find resourc findresourc webapp class loader webappclassload java java lang class loader classload get resourc getresourc class loader classload java noformat launch server add context ask load resourc classpath bit complic ll tri narrow need","""test/org/apache/catalina/startup/TestTomcat.java""","1","1","1","1","15","2","10","3","3","2","3","8","8","6","0","8","0","0","0","8","193","36","114","65","63","46","75","89","56","33","3","3","3","1","1","0","11","11","11","8","normal"
"47881","42","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47881 Fix processing of ""startd"" and ""stopd"" arguments, when they are not alone. Patch by Qingyang Xu","Bug 47881  org.apache.catalina.startup.Bootstrap's main method handles 'startd' or 'stopd' wrongly","apach catalina startup bootstrap main method handl startd stopd wrongli","String command = ""start"";
if (args.length > 0) {
    command = args[args.length - 1];
}

if (command.equals(""startd"")) {
    args[0] = ""start"";
    daemon.load(args);
    daemon.start();
} else if (command.equals(""stopd"")) {
    args[0] = ""stop"";
    daemon.stop();
} 
... ...


should be: 

String command = ""start"";
if (args.length > 0) {
    command = args[args.length - 1];
}
if (command.equals(""startd"")) {
    args[args.length - 1] = ""start"";
    daemon.load(args);
    daemon.start();
} else if (command.equals(""stopd"")) {
    args[args.length - 1] = ""stop"";
    daemon.stop();
} 
... ...

Please refer to the following usage method of  org.apache.catalina.startup.Catalina:
protected void usage() {

        System.out.println
            (""usage: java org.apache.catalina.startup.Catalina""
             + "" [ -config {pathname} ]""
             + "" [ -nonaming ] { start | stop }"");

    }","string command start arg length command arg arg length command equal startd arg start daemon load arg daemon start els command equal stopd arg stop daemon stop string command start arg length command arg arg length command equal startd arg arg length start daemon load arg daemon start els command equal stopd arg arg length stop daemon stop pleas refer follow usag method apach catalina startup catalina protect void usag system println usag java apach catalina startup catalina config pathnam nonam start stop","""java/org/apache/catalina/startup/Bootstrap.java""","2","2","2","1","19","2","14","3","1","3","4","19","19","16","4","19","0","5","0","14","498","108","292","100","193","98","152","204","80","124","12","12","14","4","3","0","51","51","55","24","minor"
"47930","77","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47930 Make swapIn thread safe so parallel requests for the same session don't result in multiple session objects for one sesison.","Bug 47930  PersistentManager (using filestore) can return different session objects linked to the same session ID, when Tomcat is restarted","persist manag persistentmanag use filestor return differ session object link session id tomcat restart","","","""java/org/apache/catalina/session/PersistentManagerBase.java""","2","2","3","1","17","2","10","5","6","0","3","51","51","51","13","51","5","0","9","37","1173","257","570","142","367","349","253","404","133","271","10","10","12","7","4","1","141","141","155","80","normal"
"47997","38","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47997 Process changes to the naming resources for all JNDI contexts, not just the global one. Patch by Michael Allman","Bug 47997  NamingContextListener fails to add itself as a PropertyChangeListener to all namingResources","name context listen namingcontextlisten fail add properti chang listen propertychangelisten name resourc namingresourc","","","""java/org/apache/catalina/core/NamingContextListener.java""","7","7","7","1","38","4","28","5","1","0","2","26","26","26","9","26","0","3","1","22","1217","214","806","211","555","197","366","564","190","374","36","36","36","7","4","0","200","200","201","32","normal"
"48004","89","Mark Emlyn David Thomas","Fix bug 48004. Allow applications to set the server header.","Bug 48004  setHeader() does not replace the previous value for a ""Server""","set header sethead replac previou valu server","","","""java/org/apache/coyote/http11/Http11AprProcessor.java""","4","4","5","2","30","3","19","7","1","0","2","47","47","47","34","47","0","4","7","36","1803","319","1014","229","738","481","546","771","233","538","55","55","66","10","6","0","233","231","279","94","normal"
"48004","89","Mark Emlyn David Thomas","Fix bug 48004. Allow applications to set the server header.","Bug 48004  setHeader() does not replace the previous value for a ""Server""","set header sethead replac previou valu server","","","""java/org/apache/coyote/http11/Http11NioProcessor.java""","11","11","14","4","66","8","47","12","1","0","1","17","17","17","10","17","0","0","7","10","1311","199","860","165","666","270","475","668","165","503","62","62","72","31","7","0","203","203","250","80","normal"
"48004","89","Mark Emlyn David Thomas","Fix bug 48004. Allow applications to set the server header.","Bug 48004  setHeader() does not replace the previous value for a ""Server""","set header sethead replac previou valu server","","","""java/org/apache/coyote/http11/Http11Processor.java""","12","12","14","2","74","9","51","12","2","0","1","12","12","12","5","12","0","0","6","6","1032","177","660","115","506","198","356","498","117","381","47","47","53","9","4","0","146","146","174","35","normal"
"48006","76","Mark Emlyn David Thomas","Update X-Powered-By header for Servlet 3.0 / JSP 2.2 and add additional information as suggested by the Servlet Spec and https://issues.apache.org/bugzilla/show_bug.cgi?id=48006","Bug 48006  Implement the header X-Powered-By suggested by the servlet specification","implement header power suggest servlet specif","","","""java/org/apache/catalina/connector/CoyoteAdapter.java""","10","10","12","4","66","6","46","13","1","3","7","13","13","10","1","13","0","0","7","6","1010","143","649","129","479","218","348","479","121","358","25","25","27","13","6","0","132","132","162","52","enhancement"
"48009","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48009 Add a check in case the file is in the middle of being renamed. It isn't perfect (it can't be) but this should cover most cases","Bug 48009  Editing context.xml may cause unwanted undeploy of a webapp","edit context xml may caus unwant undeploy webapp","Tomcat polls context.xml files for changes.  If a previously-existing context.xml is missing at the instant Tomcat polls, then the application is undeployed.

Some text editors (notably vi and its derivatives) create backup files by: 1) Renaming the original file, then 2) creating a new file and writing the edited contents to that file.

Therefore there is a race condition.  There is a small but non-zero probability that a user editing and saving context.xml using such an editor will see their webapp undeployed.  Messages on tomcat-users indicate that such a situation has occurred on a production server at least once.  It's undoubtedly rare.

Suggested fixes:

- Examine the directory for the presence of backup files for context.xml, and do not undeploy if one is found even if context.xml is missing.  This is horribly ugly and makes the semantics of ""a backup file"" very peculiar, but is actually the only way to *prevent* the race - anything else only makes it less likely, as on a heavily loaded system (or one where context.xml is being edited via a network file share) the interval between the old context.xml being renamed and the new one being created may be arbitrarily long.

- Only undeploy if the file is missing for a period of time.  The discussion is then around that period.  On tomcat-users, Mark Thomas suggested polling again after 500ms; I suggested remembering the state between polls and only undeploying if the file was missing for two successive polls.  This is a cleaner fix to explain, but is not a complete solution as it does not remove the possibility of such a race.

---

As an aside, there may well be a similar issue where Tomcat polls for context.xml as it is being written, finds it has changed, and reads a part-written version.  In mitigation, the files involved are typically small and may well be written in one or very few operations; however, Tomcat should probably not assume that any file change is atomic.","tomcat poll context xml file chang previous exist previouslyexist context xml miss instant tomcat poll applic undeploy text editor notabl deriv creat backup file renam origin file creat new file write edit content file therefor race condit small non zero nonzero probabl user edit save context xml use editor see webapp undeploy messag tomcat user tomcatus indic situat occur product server least undoubtedli rare suggest fix examin directori presenc backup file context xml undeploy one found even context xml miss horribl ugli make semant backup file peculiar actual way prevent race anyth els make le like heavili load system one context xml edit via network file share interv old context xml renam new one creat may arbitrarili long undeploy file miss period time discuss around period tomcat user tomcatus mark thoma suggest poll 500m suggest rememb state poll undeploy file miss two success poll cleaner fix explain complet solut remov possibl race asid may well similar issu tomcat poll context xml written find chang read part written partwritten version mitig file involv typic small may well written one oper howev tomcat probabl assum file chang atom","""java/org/apache/catalina/startup/HostConfig.java""","4","4","4","1","25","2","18","5","2","1","3","44","44","43","16","44","0","0","19","25","1424","228","870","197","619","326","421","627","193","434","30","30","37","10","7","0","197","197","215","87","normal"
"48019","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48019 Be more careful to skip over all of nodes we aren't interested it","Bug 48019  StackOverflowError on ""include""","stack overflow error stackoverflowerror includ","JSP file name: 
/common/headers.jsp


It's cotent:

<% // example: <%@ include file=""/common/headers.jsp"" % >
%>
<meta http-equiv=""Content-Type"" content=""text/html;charset=utf-8"" />
<meta http-equiv=""Cache-Control"" content=""no-store"" />
<meta http-equiv=""Pragma"" content=""no-cache"" />
<meta http-equiv=""Expires"" content=""0"" />
<link href=""../css/css.css"" rel=""stylesheet"" type=""text/css"">


Console output:

java.lang.StackOverflowError
	at java.text.DateFormat.format(DateFormat.java:275)
	at java.text.Format.format(Format.java:140)
	at java.text.MessageFormat.subformat(MessageFormat.java:1288)
	at java.text.MessageFormat.format(MessageFormat.java:795)
	at java.util.logging.SimpleFormatter.format(SimpleFormatter.java:50)
	at java.util.logging.StreamHandler.publish(StreamHandler.java:179)
	at java.util.logging.ConsoleHandler.publish(ConsoleHandler.java:88)
	at java.util.logging.Logger.log(Logger.java:458)
	at java.util.logging.Logger.doLog(Logger.java:480)
	at java.util.logging.Logger.logp(Logger.java:680)
	at org.apache.juli.logging.DirectJDKLog.log(DirectJDKLog.java:167)
	at org.apache.juli.logging.DirectJDKLog.error(DirectJDKLog.java:135)
	at org.apache.jasper.compiler.JspReader.pushFile(JspReader.java:606)
	at org.apache.jasper.compiler.JspReader.<init>(JspReader.java:141)
	at org.apache.jasper.compiler.JspReader.<init>(JspReader.java:119)
	at org.apache.jasper.compiler.ParserController.determineSyntaxAndEncoding(ParserController.java:399)
	at org.apache.jasper.compiler.ParserController.doParse(ParserController.java:207)
	at org.apache.jasper.compiler.ParserController.parse(ParserController.java:137)
	at org.apache.jasper.compiler.Parser.processIncludeDirective(Parser.java:339)
	at org.apache.jasper.compiler.Parser.parseIncludeDirective(Parser.java:376)
	at org.apache.jasper.compiler.Parser.parseDirective(Parser.java:484)
	at org.apache.jasper.compiler.Parser.parseTagFileDirectives(Parser.java:1784)
	at org.apache.jasper.compiler.Parser.parse(Parser.java:127)


This not exist in ""6.0.18"".","jsp file name common header jsp cotent exampl includ file common header jsp meta http equiv httpequiv content type content text html charset utf meta http equiv httpequiv cach control content no store nostor meta http equiv httpequiv pragma content no cach nocach meta http equiv httpequiv expir content link href cs cs cs rel stylesheet type text cs consol output java lang stack overflow error stackoverflowerror java text date format dateformat format date format dateformat java java text format format format java java text messag format messageformat subformat messag format messageformat java java text messag format messageformat format messag format messageformat java java util log simpl formatt simpleformatt format simpl formatt simpleformatt java java util log stream handler streamhandl publish stream handler streamhandl java java util log consol handler consolehandl publish consol handler consolehandl java java util log logger log logger java java util log logger do log dolog logger java java util log logger logp logger java apach juli log direct log directjdklog log direct log directjdklog java apach juli log direct log directjdklog error direct log directjdklog java apach jasper compil jsp reader jspreader push file pushfil jsp reader jspreader java apach jasper compil jsp reader jspreader init jsp reader jspreader java apach jasper compil jsp reader jspreader init jsp reader jspreader java apach jasper compil parser control parsercontrol determin syntax and encod determinesyntaxandencod parser control parsercontrol java apach jasper compil parser control parsercontrol do pars dopars parser control parsercontrol java apach jasper compil parser control parsercontrol pars parser control parsercontrol java apach jasper compil parser process includ direct processincludedirect parser java apach jasper compil parser pars includ direct parseincludedirect parser java apach jasper compil parser pars direct parsedirect parser java apach jasper compil parser pars tag file direct parsetagfiledirect parser java apach jasper compil parser pars parser java exist","""java/org/apache/jasper/compiler/Parser.java""","5","5","6","2","24","1","20","2","1","2","4","57","57","55","10","57","1","54","0","2","1792","174","1228","229","906","393","578","893","210","683","20","20","23","20","5","0","316","316","368","120","normal"
"48049","28","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48049 Correct copy and paste error and call correct function","Bug 48049  org.apache.naming.NamingContext's destroySubcontext() method doesn't  invoke itself recursively, but invoke unbind() method","apach name name context namingcontext destroy subcontext destroysubcontext method doesn invok recurs invok unbind method","Below is the original implementation of destroySubcontext(Name name) method:

public void destroySubcontext(Name name)
        throws NamingException {
        
        checkWritable();
        
        while ((!name.isEmpty()) && (name.get(0).length() == 0))
            name = name.getSuffix(1);
        if (name.isEmpty())
            throw new NamingException
                (sm.getString(""namingContext.invalidName""));
        
        NamingEntry entry = (NamingEntry) bindings.get(name.get(0));
        
        if (entry == null) {
            throw new NameNotFoundException
                (sm.getString(""namingContext.nameNotBound"", name.get(0)));
        }
        
        if (name.size() > 1) {
            if (entry.type == NamingEntry.CONTEXT) {
                ((Context) entry.value).unbind(name.getSuffix(1));
            } else {
                throw new NamingException
                    (sm.getString(""namingContext.contextExpected""));
            }
        } else {
            if (entry.type == NamingEntry.CONTEXT) {
                ((Context) entry.value).close();
                bindings.remove(name.get(0));
            } else {
                throw new NotContextException
                    (sm.getString(""namingContext.contextExpected""));
            }
        }
        
    }


However, the method invokes 'unbind' method rather than invokes itself recursively. 

if (name.size() > 1) {
            if (entry.type == NamingEntry.CONTEXT) {
                ((Context) entry.value).unbind(name.getSuffix(1));
            } else {
                throw new NamingException
                    (sm.getString(""namingContext.contextExpected""));
            }

should be: 

if (name.size() > 1) {
            if (entry.type == NamingEntry.CONTEXT) {
                ((Context) entry.value).destroySubcontext(name.getSuffix(1));
            } else {
                throw new NamingException
                    (sm.getString(""namingContext.contextExpected""));
            }","origin implement destroy subcontext destroysubcontext name name method public void destroy subcontext destroysubcontext name name throw name except namingexcept check writabl checkwrit name is empti isempti name get length name name get suffix getsuffix name is empti isempti throw new name except namingexcept sm get string getstr name context namingcontext invalid name invalidnam name entri namingentri entri name entri namingentri bind get name get entri null throw new name not found except namenotfoundexcept sm get string getstr name context namingcontext name not bound namenotbound name get name size entri type name entri namingentri context context entri valu unbind name get suffix getsuffix els throw new name except namingexcept sm get string getstr name context namingcontext context expect contextexpect els entri type name entri namingentri context context entri valu close bind remov name get els throw new not context except notcontextexcept sm get string getstr name context namingcontext context expect contextexpect howev method invok unbind method rather invok recurs name size entri type name entri namingentri context context entri valu unbind name get suffix getsuffix els throw new name except namingexcept sm get string getstr name context namingcontext context expect contextexpect name size entri type name entri namingentri context context entri valu destroy subcontext destroysubcontext name get suffix getsuffix els throw new name except namingexcept sm get string getstr name context namingcontext context expect contextexpect","""java/org/apache/naming/NamingContext.java""","2","2","2","1","21","0","9","10","1","0","3","35","35","35","3","35","0","0","4","31","912","135","366","115","202","411","137","220","77","143","12","12","14","8","4","1","83","83","92","45","normal"
"48102","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48102 and https://issues.apache.org/bugzilla/show_bug.cgi?id=48103 Typos in Javadoc","Bug 48102  'Bootstrap' is misspelled as 'Boostrap' in the javadoc of the class of 'org.apache.catalina.startup.Bootstrap'","bootstrap misspel boostrap javadoc class apach catalina startup bootstrap","Below is the javadoc of the class of 'org.apache.catalina.startup.Bootstrap':

/**
 * Boostrap loader for Catalina.  This application constructs a class loader
 * for use in loading the Catalina internal classes (by accumulating all of the
 * JAR files found in the ""server"" directory under ""catalina.home""), and
 * starts the regular execution of the container.  The purpose of this
 * roundabout approach is to keep the Catalina internal classes (and any
 * other classes they depend on, such as an XML parser) out of the system
 * class path and therefore not visible to application level classes.
 *
 * @author Craig R. McClanahan
 * @author Remy Maucherat
 * @version $Revision: 831860 $ $Date: 2009-11-02 19:00:01 +0800 (Mon, 02 Nov 2009) $
 */

the first word ommits a 't' letter. It sould be 'Bootstrap', not 'Boostrap'.","javadoc class apach catalina startup bootstrap boostrap loader catalina applic construct class loader use load catalina intern class accumul jar file found server directori catalina home start regular execut contain purpos roundabout approach keep catalina intern class class depend xml parser system class path therefor visibl applic level class author craig mc clanahan mcclanahan author remi maucherat version revis date nov first word ommit letter sould bootstrap boostrap","""java/org/apache/catalina/startup/Bootstrap.java""","2","2","2","1","19","2","14","3","1","3","4","19","19","16","4","19","0","5","0","14","498","108","292","100","193","98","152","204","80","124","12","12","14","4","3","0","51","51","55","24","minor"
"48104","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48104 Align Javadoc, usage message and code","Bug 48104  the javadoc of class 'org.apache.catalina.startup.Catalina' is not complete, as in the usage() method","javadoc class apach catalina startup catalina complet usag method","Below is the javadoc of class 'org.apache.catalina.startup.Catalina':

/**
 * Startup/Shutdown shell program for Catalina.  The following command line
 * options are recognized:
 * <ul>
 * <li><b>-config {pathname}</b> - Set the pathname of the configuration file
 *     to be processed.  If a relative path is specified, it will be
 *     interpreted as relative to the directory pathname specified by the
 *     ""catalina.base"" system property.   [conf/server.xml]
 * <li><b>-help</b> - Display usage information.
 * <li><b>-stop</b> - Stop the currently running instance of Catalina.
 * </u>
 *
 * Should do the same thing as Embedded, but using a server.xml file.
 *
 * @author Craig R. McClanahan
 * @author Remy Maucherat
 * @version $Revision: 752323 $ $Date: 2009-03-11 08:46:54 +0800 (Wed, 11 Mar 2009) $
 */

However, it doesn't allude the '-nonmaing' option, and 'start' option.

Below is the usage() method of the same class:

/**
     * Print usage information for this application.
     */
    protected void usage() {

        System.out.println
            (""usage: java org.apache.catalina.startup.Catalina""
             + "" [ -config {pathname} ]""
             + "" [ -nonaming ] { start | stop }"");

    }

It is not complete either. It lacks the '-help' option.","javadoc class apach catalina startup catalina startup shutdown shell program catalina follow command line option recogn ul config pathnam set pathnam configur file process rel path specifi interpret rel directori pathnam specifi catalina base system properti conf server xml help display usag inform stop stop current run instanc catalina thing embed use server xml file author craig mc clanahan mcclanahan author remi maucherat version revis date wed mar howev doesn allud nonma option start option usag method class print usag inform applic protect void usag system println usag java apach catalina startup catalina config pathnam nonam start stop complet either lack help option","""java/org/apache/catalina/startup/Catalina.java""","2","2","2","1","18","2","12","3","3","1","1","28","28","27","8","28","0","0","5","23","723","165","397","88","278","166","192","270","85","185","12","12","13","9","3","0","75","75","76","38","minor"
"48109","97","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48109 Extent try catch block (diff is a lot simpler if you ignore whitespace) to ensure InputStream is closed.","Bug 48109  Improve binaryStream processing in WebappClassLoader#findResourceInternal","improv binari stream binarystream process webapp class loader webappclassload find resourc intern findresourceintern","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","6","6","6","2","33","3","23","7","4","1","6","71","71","70","31","71","3","9","20","39","2949","476","1774","410","1241","705","835","1259","367","892","42","42","48","28","9","0","430","430","460","189","minor"
"48112","64","Mark Emlyn David Thomas","Add a test case for bug 48112 (note this passes - need to check when used in a JSP)","Bug 48112  Closing curly brace in literal string incorrectly treated as expression terminator.","close curli brace liter string incorrectli treat express termin","On tomcat 6.0.20 something like the following line in a JSP causes a exception:

<c:out value=""${fn:trim('{world}')}""/>

After removing the closing curly brace from the literal ('{world}' -> '{world') the JSP works. This behaviour seems specific to 6.0.20, as on 6.0.18 and 6.0.16 the line above works fine.

Example of exception:
=====================
org.apache.jasper.JasperException: An exception occurred processing JSP page /test.jsp at line 11

8: <meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8"">
9: </head>
10: <body>
11: <c:out value=""${fn:trim('{world}')}""/>
12: </body>
13: </html>


Stacktrace:
	org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:505)
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:416)
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
root cause

javax.el.ELException: Error Parsing: ${fn:trim('{world}
	org.apache.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:125)
	org.apache.el.lang.ExpressionBuilder.build(ExpressionBuilder.java:150)
	org.apache.el.lang.ExpressionBuilder.createValueExpression(ExpressionBuilder.java:194)
	org.apache.el.ExpressionFactoryImpl.createValueExpression(ExpressionFactoryImpl.java:68)
	org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:934)
	org.apache.jsp.test_jsp._jspx_meth_c_005fout_005f0(test_jsp.java:98)
	org.apache.jsp.test_jsp._jspService(test_jsp.java:72)
	org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
root cause

org.apache.el.parser.ParseException: Encountered "" <ILLEGAL_CHARACTER> ""\' """" at line 1, column 11.
Was expecting one of:
    <INTEGER_LITERAL> ...
    <FLOATING_POINT_LITERAL> ...
    <STRING_LITERAL> ...
    ""true"" ...
    ""false"" ...
    ""null"" ...
    ""("" ...
    "")"" ...
    ""!"" ...
    ""not"" ...
    ""empty"" ...
    ""-"" ...
    <IDENTIFIER> ...
    
	org.apache.el.parser.ELParser.generateParseException(ELParser.java:2142)
	org.apache.el.parser.ELParser.jj_consume_token(ELParser.java:2024)
	org.apache.el.parser.ELParser.Function(ELParser.java:1207)
	org.apache.el.parser.ELParser.NonLiteral(ELParser.java:1114)
	org.apache.el.parser.ELParser.ValuePrefix(ELParser.java:1016)
	org.apache.el.parser.ELParser.Value(ELParser.java:965)
	org.apache.el.parser.ELParser.Unary(ELParser.java:947)
	org.apache.el.parser.ELParser.Multiplication(ELParser.java:711)
	org.apache.el.parser.ELParser.Math(ELParser.java:631)
	org.apache.el.parser.ELParser.Compare(ELParser.java:443)
	org.apache.el.parser.ELParser.Equality(ELParser.java:337)
	org.apache.el.parser.ELParser.And(ELParser.java:281)
	org.apache.el.parser.ELParser.Or(ELParser.java:225)
	org.apache.el.parser.ELParser.Choice(ELParser.java:182)
	org.apache.el.parser.ELParser.Expression(ELParser.java:174)
	org.apache.el.parser.ELParser.DynamicExpression(ELParser.java:146)
	org.apache.el.parser.ELParser.CompositeExpression(ELParser.java:43)
	org.apache.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:93)
	org.apache.el.lang.ExpressionBuilder.build(ExpressionBuilder.java:150)
	org.apache.el.lang.ExpressionBuilder.createValueExpression(ExpressionBuilder.java:194)
	org.apache.el.ExpressionFactoryImpl.createValueExpression(ExpressionFactoryImpl.java:68)
	org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:934)
	org.apache.jsp.test_jsp._jspx_meth_c_005fout_005f0(test_jsp.java:98)
	org.apache.jsp.test_jsp._jspService(test_jsp.java:72)
	org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)","tomcat someth like follow line jsp caus except valu fn trim world remov close curli brace liter world world jsp work behaviour seem specif line work fine exampl except apach jasper jasper except jasperexcept except occur process jsp page jsp line meta http equiv httpequiv content type content text html charset utf head bodi valu fn trim world bodi html stacktrac apach jasper servlet jsp servlet wrapper jspservletwrapp handl jsp except handlejspexcept jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet wrapper jspservletwrapp servic jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet jspservlet servic jsp file servicejspfil jsp servlet jspservlet java apach jasper servlet jsp servlet jspservlet servic jsp servlet jspservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java root caus javax except elexcept error pars fn trim world apach lang express builder expressionbuild creat node intern createnodeintern express builder expressionbuild java apach lang express builder expressionbuild build express builder expressionbuild java apach lang express builder expressionbuild creat valu express createvalueexpress express builder expressionbuild java apach express factori impl expressionfactoryimpl creat valu express createvalueexpress express factori impl expressionfactoryimpl java apach jasper runtim page context impl pagecontextimpl proprietari evalu proprietaryevalu page context impl pagecontextimpl java apach jsp jsp jspx meth 005fout 005f0 jsp java apach jsp jsp jsp servic jspservic jsp java apach jasper runtim http jsp base httpjspbase servic http jsp base httpjspbase java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach jasper servlet jsp servlet wrapper jspservletwrapp servic jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet jspservlet servic jsp file servicejspfil jsp servlet jspservlet java apach jasper servlet jsp servlet jspservlet servic jsp servlet jspservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java root caus apach parser pars except parseexcept encount illeg charact line column expect one integ liter float point liter string liter true fals null empti identifi apach parser parser elpars gener pars except generateparseexcept parser elpars java apach parser parser elpars jj consum token parser elpars java apach parser parser elpars function parser elpars java apach parser parser elpars non liter nonliter parser elpars java apach parser parser elpars valu prefix valueprefix parser elpars java apach parser parser elpars valu parser elpars java apach parser parser elpars unari parser elpars java apach parser parser elpars multipl parser elpars java apach parser parser elpars math parser elpars java apach parser parser elpars compar parser elpars java apach parser parser elpars equal parser elpars java apach parser parser elpars parser elpars java apach parser parser elpars parser elpars java apach parser parser elpars choic parser elpars java apach parser parser elpars express parser elpars java apach parser parser elpars dynam express dynamicexpress parser elpars java apach parser parser elpars composit express compositeexpress parser elpars java apach lang express builder expressionbuild creat node intern createnodeintern express builder expressionbuild java apach lang express builder expressionbuild build express builder expressionbuild java apach lang express builder expressionbuild creat valu express createvalueexpress express builder expressionbuild java apach express factori impl expressionfactoryimpl creat valu express createvalueexpress express factori impl expressionfactoryimpl java apach jasper runtim page context impl pagecontextimpl proprietari evalu proprietaryevalu page context impl pagecontextimpl java apach jsp jsp jspx meth 005fout 005f0 jsp java apach jsp jsp jsp servic jspservic jsp java apach jasper runtim http jsp base httpjspbase servic http jsp base httpjspbase java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach jasper servlet jsp servlet wrapper jspservletwrapp servic jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet jspservlet servic jsp file servicejspfil jsp servlet jspservlet java apach jasper servlet jsp servlet jspservlet servic jsp servlet jspservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java","""test/org/apache/el/TestELEvaluation.java""","1","1","1","1","11","0","8","2","1","0","0","7","7","7","0","7","0","2","0","5","124","18","71","22","46","35","51","60","21","39","2","2","2","1","1","0","8","8","8","7","normal"
"48117","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48117 Spelling errors","Bug 48117  two misspellings in the javadoc of class ""org.apache.catalina.startup.ContextConfig""","two misspel javadoc class apach catalina startup context config contextconfig","in protected synchronized void stop(): (Line: 1059)

// Removing sercurity role

'security' is misspelled to 'sercurity'




in protected InputSource getWebXmlSource(String filename, String path): (Line: 1354)

/**
     * 
     * @param filename  Name of the file (possibly with one or more leading path
     *                  segemnts) to read
     * @param path      Location that filename is relative to 
     * @return
     */

'segments' is misspelled to 'segemnts'.","protect synchron void stop line remov sercur role secur misspel sercur protect input sourc inputsourc get web xml sourc getwebxmlsourc string filenam string path line param filenam name file possibl one lead path segemnt read param path locat filenam rel return segment misspel segemnt","""java/org/apache/catalina/startup/ContextConfig.java""","5","5","6","1","33","3","23","6","3","1","12","39","39","38","10","39","0","0","25","14","1650","260","1051","245","745","342","549","774","234","540","20","20","23","14","6","0","218","218","238","59","trivial"
"48118","0","Ian Darwin","Bugfix typos from 48118","Bug 48118  two misspellings in the javadoc of class ""org.apache.catalina.startup.Embeded""","two misspel javadoc class apach catalina startup embed","Line: 230
/**
     * Return true if redirction of standard streams is enabled.
     */
    public boolean isRedirectStreams() {

        return (this.redirectStreams);

    }

'redirection' was misspelled to 'redirction'


Line: 875

/** Initialize naming - this should only enable java:env and root naming.
     * If tomcat is embeded in an application that already defines those -
     * it shouldn't do it.
     *
     * XXX The 2 should be separated, you may want to enable java: but not
     * the initial context and the reverse
     * XXX Can we ""guess"" - i.e. lookup java: and if something is returned assume
     * false ?
     * XXX We have a major problem with the current setting for java: url
     */
    protected void initNaming() {


'embedded' was mispelled to 'embeded'","line return true redirct standard stream enabl public boolean is redirect stream isredirectstream return redirect stream redirectstream redirect misspel redirct line initi name enabl java env root name tomcat embed applic alreadi defin shouldn xxx separ may enabl java initi context revers xxx guess lookup java someth return assum fals xxx major problem current set java url protect void init name initnam embed mispel embed","""java/org/apache/catalina/startup/Embedded.java""","3","3","3","1","19","2","10","5","1","0","3","38","38","38","8","38","0","0","4","34","995","197","459","118","295","340","238","359","123","236","16","16","16","8","4","1","122","122","125","55","trivial"
"48119","0","Ian Darwin","Bugfix typos from 48119","Bug 48119  5 misspellings in the javadoc of class ""org.apache.catalina.startup.HostConfig'","misspel javadoc class apach catalina startup host config hostconfig","No.1

Line 146:

/**
     * Attribute value used to turn on/off XML namespace awarenes.
     */
    protected boolean xmlNamespaceAware = false;

'awareness' was misspelled as 'awarenes'


No.2

Line 268:

/**
     * Get the server.xml &lt;host&gt; attribute's xmlNamespaceAware.
     * @return true if namespace awarenes is enabled.
     *
     */
    public boolean getXmlNamespaceAware(){
        return xmlNamespaceAware;
    }

'awareness' was misspelled as 'awarenes'

No.3

Line 366:

/**
     * Has the specified application been deployed? Note applications defined
     * in server.xml will not have been deployed.
     * @return <code>true</code> if the application has been deployed and
     * <code>false</code> if the applciation has not been deployed or does not
     * exist
     */
    public boolean isDeployed(String name) {

'application' was misspelled as 'applciation'

No.4

Line 1328:

/**
     * Add a new Context to be managed by us.
     * Entry point for the admin webapp, and other JMX Context controlers.
     */
    public void manageApp(Context context)  {    

'controllers' was misspelled as 'controlers'

Line 1382:

/**
     * Remove a webapp from our control.
     * Entry point for the admin webapp, and other JMX Context controlers.
     */
    public void unmanageApp(String contextPath) {

'controllers' was misspelled as 'controlers'","line attribut valu use turn xml namespac awaren protect boolean xml namespac awar xmlnamespaceawar fals awar misspel awaren line get server xml lt host gt attribut xml namespac awar xmlnamespaceawar return true namespac awaren enabl public boolean get xml namespac awar getxmlnamespaceawar return xml namespac awar xmlnamespaceawar awar misspel awaren line specifi applic deploy note applic defin server xml deploy return code true code applic deploy code fals code applciat deploy exist public boolean is deploy isdeploy string name applic misspel applciat line add new context manag u entri point admin webapp jmx context control public void manag app manageapp context context control misspel control line remov webapp control entri point admin webapp jmx context control public void unmanag app unmanageapp string context path contextpath control misspel control","""java/org/apache/catalina/startup/HostConfig.java""","4","4","4","2","26","2","18","5","2","1","3","44","44","43","16","44","0","0","19","25","1435","228","877","197","624","330","423","631","193","438","32","32","39","10","7","0","199","199","217","88","trivial"
"48120","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48120 Spelling errors","Bug 48120  one misspelling in the javadoc of class ""org.apache.catalina.startup.SetNextNamingRule""","one misspel javadoc class apach catalina startup set next name rule setnextnamingrul","Line 50:

/**
     * Construct a ""set next"" rule with the specified method name.
     *
     * @param methodName Method name of the parent method to call
     * @param paramType Java class of the parent method's argument
     *  (if you wish to use a primitive type, specify the corresonding
     *  Java wrapper class instead, such as <code>java.lang.Boolean</code>
     *  for a <code>boolean</code> parameter)
     */
    public SetNextNamingRule(String methodName,
                       String paramType) {

'corresponding' was misspelled as 'corresonding'","line construct set next rule specifi method name param method name methodnam method name parent method call param param type paramtyp java class parent method argument wish use primit type specifi corresond java wrapper class instead code java lang boolean code code boolean code paramet public set next name rule setnextnamingrul string method name methodnam string param type paramtyp correspond misspel corresond","""java/org/apache/catalina/startup/SetNextNamingRule.java""","1","1","1","1","19","2","8","7","1","0","0","3","3","3","2","3","0","0","0","3","126","32","35","16","20","59","22","27","15","12","2","2","2","1","1","2","4","4","4","3","trivial"
"48121","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48121 Spelling errors","Bug 48121  2 misspellings in the javadoc of class ""org.apache.catalina.startup.TldConfig""","misspel javadoc class apach catalina startup tld config tldconfig","No.1

Line 194:

/**
     * Attribute value used to turn on/off TLD  namespace awarenes.
     */
    private boolean tldNamespaceAware = false;

'awareness' was misspelled as 'awarenes'


No.2

Line 261

/**
     * Get the server.xml &lt;host&gt; attribute's xmlNamespaceAware.
     * @return true if namespace awarenes is enabled.
     *
     */
    public boolean getTldNamespaceAware(){
        return this.tldNamespaceAware;
    }

'awareness' was misspelled as 'awarenes'","line attribut valu use turn tld namespac awaren privat boolean tld namespac awar tldnamespaceawar fals awar misspel awaren line get server xml lt host gt attribut xml namespac awar xmlnamespaceawar return true namespac awaren enabl public boolean get tld namespac awar gettldnamespaceawar return tld namespac awar tldnamespaceawar awar misspel awaren","""java/org/apache/catalina/startup/TldConfig.java""","3","3","3","1","16","0","11","3","2","2","7","24","24","22","7","24","0","7","0","17","640","82","376","98","242","183","187","267","94","173","10","10","13","6","5","0","76","76","83","32","trivial"
"48123","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48123 Spelling errors","Bug 48123  4 misspellings in the javadoc of class ""org.apache.catalina.startup.WebRuleSet""","misspel javadoc class apach catalina startup web rule set webruleset","No.1

Line: 99

/**
     * Construct an instance of this <code>RuleSet</code> with the default
     * matching pattern prefix and default fargment setting.
     */
    public WebRuleSet() {

'fragment' was misspelled as 'fargment'

No.2

Line: 614

/**
 * Rule to check that the <code>login-config</code> is occuring 
 * only 1 time within the web.xml
 */
final class SetLoginConfig extends Rule {

'occurring' was misspelled as 'occuring'

No.3

Line 635

/**
 * Rule to check that the <code>jsp-config</code> is occuring 
 * only 1 time within the web.xml
 */
final class SetJspConfig extends Rule {

'occurring' was misspelled as 'occuring'

No.4

Line 656

/**
 * Rule to check that the <code>session-config</code> is occuring 
 * only 1 time within the web.xml
 */
final class SetSessionConfig extends Rule {

'occurring' was misspelled as 'occuring'","line construct instanc code rule set ruleset code default match pattern prefix default fargment set public web rule set webruleset fragment misspel fargment line rule check code login config loginconfig code occur time within web xml final class set login config setloginconfig extend rule occur misspel occur line rule check code jsp config jspconfig code occur time within web xml final class set jsp config setjspconfig extend rule occur misspel occur line rule check code session config sessionconfig code occur time within web xml final class set session config setsessionconfig extend rule occur misspel occur","""java/org/apache/catalina/startup/WebRuleSet.java""","1","1","1","1","20","2","16","2","16","0","1","38","38","38","12","38","0","0","2","36","1068","187","695","130","525","186","325","406","115","291","10","10","14","1","3","0","65","65","70","38","trivial"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/ServletContext.java""","0","0","0","0","0","0","0","0","1","0","2","0","51","51","0","51","0","0","0","51","938","162","77","76","2","699","63","64","64","0","0","0","0","0","0","9","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/ServletRequest.java""","0","0","0","0","0","0","0","0","1","0","0","0","36","36","0","36","0","0","0","36","660","137","45","44","0","478","42","43","43","0","0","0","0","0","0","11","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/ServletRequest.java""","0","0","0","0","0","0","0","0","1","0","0","0","36","36","0","36","0","0","0","36","660","137","45","44","0","478","42","43","43","0","0","0","0","0","0","11","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/ServletRequestWrapper.java""","1","1","1","1","8","0","3","4","1","0","0","41","41","41","1","41","0","0","0","41","515","133","152","51","53","230","54","102","49","53","3","3","3","3","1","2","47","47","47","45","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/SingleThreadModel.java""","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","50","2","3","2","0","45","1","2","2","0","0","0","0","0","0","15","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/UnavailableException.java""","1","1","1","1","19","0","5","13","1","0","0","7","7","7","3","7","0","0","0","7","206","22","42","13","21","145","21","31","12","19","2","2","2","1","1","3","10","10","10","7","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/http/HttpServletRequest.java""","0","0","0","0","0","0","0","0","1","0","4","0","30","30","0","30","0","0","0","30","716","138","44","43","4","534","40","41","41","0","0","0","0","0","0","12","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/http/HttpServletRequest.java""","0","0","0","0","0","0","0","0","1","0","4","0","30","30","0","30","0","0","0","30","716","138","44","43","4","534","40","41","41","0","0","0","0","0","0","12","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/http/HttpServletRequest.java""","0","0","0","0","0","0","0","0","1","0","4","0","30","30","0","30","0","0","0","30","716","138","44","43","4","534","40","41","41","0","0","0","0","0","0","12","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/http/HttpServletRequestWrapper.java""","1","1","1","1","6","0","3","3","1","0","0","32","32","32","0","32","0","1","0","31","308","50","105","40","32","153","38","71","39","32","1","1","1","1","0","1","32","32","32","32","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/http/HttpServletRequestWrapper.java""","1","1","1","1","6","0","3","3","1","0","0","32","32","32","0","32","0","1","0","31","308","50","105","40","32","153","38","71","39","32","1","1","1","1","0","1","32","32","32","32","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/http/HttpServletResponse.java""","0","0","0","0","0","0","0","0","1","0","41","0","21","21","0","21","0","0","0","21","676","135","68","67","41","473","66","67","67","0","0","0","0","0","0","7","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/http/HttpServletResponse.java""","0","0","0","0","0","0","0","0","1","0","41","0","21","21","0","21","0","0","0","21","676","135","68","67","41","473","66","67","67","0","0","0","0","0","0","7","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/http/HttpServletResponseWrapper.java""","1","1","1","1","6","0","3","3","1","0","0","23","23","23","0","23","0","1","0","22","234","38","75","28","23","121","27","51","28","23","1","1","1","1","0","2","23","23","23","23","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/http/HttpSession.java""","0","0","0","0","0","0","0","0","1","0","0","0","17","17","0","17","0","0","0","17","424","92","22","21","0","310","20","21","21","0","0","0","0","0","0","14","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/http/HttpSessionContext.java""","0","0","0","0","0","0","0","0","1","0","0","0","2","2","0","2","0","0","0","2","71","18","6","5","0","47","4","5","5","0","0","0","0","0","0","8","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/http/HttpUtils.java""","4","4","5","1","45","2","21","22","1","4","2","5","5","1","0","5","0","1","0","4","283","30","117","37","84","138","68","89","36","53","7","7","7","3","4","1","23","22","26","7","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/jsp/JspException.java""","1","1","1","1","12","0","2","9","1","0","0","5","5","5","0","5","0","0","0","5","99","14","17","7","4","68","5","11","7","4","1","1","1","1","0","4","5","5","5","5","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/jsp/el/ELException.java""","1","1","1","1","8","0","3","5","1","0","0","5","5","5","0","5","0","0","0","5","78","7","18","7","5","53","6","12","7","5","1","1","1","1","0","3","5","5","5","5","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/jsp/el/ELParseException.java""","1","1","1","1","8","0","4","4","1","0","0","2","2","2","0","2","0","0","0","2","51","7","11","4","2","33","3","6","4","2","1","1","1","1","0","3","2","2","2","2","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/jsp/el/Expression.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","0","0","0","1","53","6","5","4","0","42","2","3","3","0","0","0","0","0","0","8","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/jsp/el/ExpressionEvaluator.java""","0","0","0","0","0","0","0","0","1","0","0","0","2","2","0","2","0","0","0","2","108","7","12","11","0","89","3","4","4","0","0","0","0","0","0","7","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/jsp/el/FunctionMapper.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","0","0","0","1","40","2","5","4","0","33","2","3","3","0","0","0","0","0","0","7","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/jsp/el/VariableResolver.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","0","0","0","1","51","3","6","4","0","42","2","3","3","0","0","0","0","0","0","7","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/javax/servlet/jsp/tagext/BodyTag.java""","0","0","0","0","0","0","0","0","1","0","2","0","2","2","0","2","2","0","0","0","186","14","8","7","2","164","6","7","7","0","0","0","0","0","0","21","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/Cluster.java""","0","0","0","0","0","0","0","0","1","0","0","0","11","11","0","11","0","0","0","11","126","18","14","13","0","94","12","13","13","0","0","0","0","0","0","7","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/Manager.java""","0","0","0","0","0","0","0","0","1","0","0","0","34","34","0","34","0","0","0","34","366","79","39","38","0","248","37","38","38","0","0","0","0","0","0","6","0","0","0","0","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","14","1","8","4","1","2","5","147","147","145","48","147","1","0","12","134","2761","544","1325","373","838","902","647","978","361","617","20","20","24","10","3","1","334","334","369","210","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/connector/Response.java""","2","2","2","1","16","1","8","5","4","0","2","79","79","79","17","79","0","3","2","74","1638","342","737","190","462","562","343","534","178","356","12","12","19","8","3","1","190","190","220","134","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/core/ApplicationContext.java""","2","2","2","1","15","1","9","4","2","2","3","64","64","62","13","64","1","5","4","54","1286","280","668","217","396","338","304","463","185","278","12","12","13","9","3","1","156","156","164","107","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/core/ApplicationContextFacade.java""","2","2","2","1","9","0","8","0","2","0","0","59","59","59","3","59","0","6","0","53","795","145","561","129","315","89","182","304","95","209","4","4","4","3","3","0","121","121","122","63","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/core/ApplicationHttpResponse.java""","1","1","1","1","11","1","3","5","1","0","2","23","23","23","1","23","3","0","0","20","395","117","102","37","44","176","34","75","34","41","2","2","3","1","1","2","40","40","41","23","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/core/ApplicationHttpResponse.java""","1","1","1","1","11","1","3","5","1","0","2","23","23","23","1","23","3","0","0","20","395","117","102","37","44","176","34","75","34","41","2","2","3","1","1","2","40","40","41","23","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/core/DummyRequest.java""","1","1","1","1","1","0","1","0","2","0","1","132","132","132","7","132","0","0","0","132","303","35","243","185","101","25","131","264","173","91","1","1","1","1","0","0","132","132","132","132","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/core/DummyRequest.java""","1","1","1","1","1","0","1","0","2","0","1","132","132","132","7","132","0","0","0","132","303","35","243","185","101","25","131","264","173","91","1","1","1","1","0","0","132","132","132","132","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/core/DummyResponse.java""","1","1","1","1","1","0","1","0","1","0","0","69","69","69","0","69","0","0","0","69","135","13","97","88","33","25","46","116","83","33","1","1","1","1","0","0","69","69","69","69","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/core/DummyResponse.java""","1","1","1","1","1","0","1","0","1","0","0","69","69","69","0","69","0","0","0","69","135","13","97","88","33","25","46","116","83","33","1","1","1","1","0","0","69","69","69","69","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","7","4","2","0","2","52","52","52","6","52","0","2","7","43","840","103","448","126","259","291","230","345","123","222","8","8","10","5","3","1","101","101","114","63","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/ha/tcp/SimpleTcpCluster.java""","1","1","2","1","10","0","6","4","1","0","12","63","63","63","19","63","0","0","4","59","964","129","468","161","263","367","247","364","160","204","7","7","9","1","3","1","120","120","133","63","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/ha/tcp/SimpleTcpCluster.java""","1","1","2","1","10","0","6","4","1","0","12","63","63","63","19","63","0","0","4","59","964","129","468","161","263","367","247","364","160","204","7","7","9","1","3","1","120","120","133","63","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/realm/JAASRealm.java""","2","2","3","1","18","1","10","6","1","0","4","20","20","20","6","20","0","0","7","13","608","103","240","71","148","265","115","171","64","107","21","21","21","10","4","1","59","59","60","32","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/session/ManagerBase.java""","2","2","2","1","12","1","7","4","2","0","4","74","74","74","27","74","0","0","3","71","1305","265","612","201","372","428","320","469","202","267","8","8","9","4","4","1","149","149","154","86","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/session/StandardSession.java""","2","2","2","1","20","2","10","7","3","0","7","65","65","65","18","65","0","0","7","58","1766","373","744","197","489","651","356","528","192","336","20","20","26","7","4","1","167","167","183","95","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/session/StandardSessionFacade.java""","1","1","1","1","4","0","3","1","1","0","0","19","19","19","1","19","0","0","0","19","174","56","68","27","22","50","27","47","26","21","1","1","1","1","0","1","19","19","19","19","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/startup/Catalina.java""","2","2","2","1","18","2","12","3","3","1","1","28","28","27","8","28","0","0","5","23","726","165","398","88","279","168","192","270","85","185","12","12","13","9","3","0","75","75","76","38","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/tribes/io/XByteBuffer.java""","1","1","2","1","10","0","7","2","1","18","4","43","43","25","3","43","0","0","0","43","603","70","364","107","240","174","208","289","103","186","12","12","15","10","3","0","82","82","92","65","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/tribes/membership/McastService.java""","1","1","1","1","7","0","5","1","1","1","3","62","62","61","10","62","0","0","1","61","632","80","383","113","213","169","200","298","114","184","10","10","10","3","3","0","97","97","105","64","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/catalina/tribes/transport/ReceiverBase.java""","1","1","1","1","4","0","3","0","2","0","2","86","86","86","34","86","1","0","2","83","583","104","378","146","169","103","178","284","146","138","5","5","5","3","3","0","105","105","105","90","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/el/parser/SimpleCharStream.java""","1","1","1","1","11","0","9","1","1","0","1","36","36","36","15","36","0","0","5","31","472","71","353","77","191","48","154","218","65","153","10","10","10","1","3","0","67","65","69","36","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/jasper/servlet/JspCServletContext.java""","1","1","1","1","7","1","4","2","1","0","0","52","52","52","3","52","0","0","0","52","599","176","251","108","91","172","100","167","89","78","7","7","8","4","2","1","66","66","67","57","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/jasper/servlet/JspCServletContext.java""","1","1","1","1","7","1","4","2","1","0","0","52","52","52","3","52","0","0","0","52","599","176","251","108","91","172","100","167","89","78","7","7","8","4","2","1","66","66","67","57","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/naming/resources/ResourceAttributes.java""","4","4","4","1","19","0","14","4","1","0","18","35","35","35","12","35","0","0","0","35","991","152","558","136","394","283","265","426","135","291","24","24","24","24","6","1","159","159","164","68","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/tomcat/util/digester/Rule.java""","1","1","1","1","12","1","2","8","1","0","0","12","12","12","2","12","0","0","0","12","224","57","39","20","9","128","11","24","17","7","1","1","1","1","0","3","12","12","12","12","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/tomcat/util/digester/SetNextRule.java""","1","1","1","1","18","1","5","10","1","0","0","8","8","8","3","8","0","0","0","8","221","46","54","19","30","121","24","35","17","18","3","3","3","1","2","2","10","10","10","8","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/tomcat/util/digester/SetNextRule.java""","1","1","1","1","18","1","5","10","1","0","0","8","8","8","3","8","0","0","0","8","221","46","54","19","30","121","24","35","17","18","3","3","3","1","2","2","10","10","10","8","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/tomcat/util/digester/SetPropertiesRule.java""","3","3","3","1","29","2","14","12","1","0","0","7","7","7","2","7","0","0","0","7","274","47","106","23","68","121","57","81","28","53","12","12","14","4","4","1","23","23","26","10","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/tomcat/util/digester/SetPropertiesRule.java""","3","3","3","1","29","2","14","12","1","0","0","7","7","7","2","7","0","0","0","7","274","47","106","23","68","121","57","81","28","53","12","12","14","4","4","1","23","23","26","10","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/tomcat/util/digester/SetPropertyRule.java""","2","2","3","1","24","2","11","10","1","0","0","4","4","4","2","4","0","0","0","4","161","36","53","17","34","72","27","38","17","21","7","7","9","1","2","1","10","10","12","4","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/tomcat/util/digester/SetPropertyRule.java""","2","2","3","1","24","2","11","10","1","0","0","4","4","4","2","4","0","0","0","4","161","36","53","17","34","72","27","38","17","21","7","7","9","1","2","1","10","10","12","4","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/tomcat/util/digester/SetRootRule.java""","1","1","1","1","18","1","5","10","1","0","0","8","8","8","3","8","0","0","0","8","222","47","54","19","30","121","24","35","17","18","3","3","3","1","2","2","10","10","10","8","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/tomcat/util/digester/SetRootRule.java""","1","1","1","1","18","1","5","10","1","0","0","8","8","8","3","8","0","0","0","8","222","47","54","19","30","121","24","35","17","18","3","3","3","1","2","2","10","10","10","8","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/tomcat/util/digester/SetTopRule.java""","1","1","1","1","18","2","5","10","1","0","0","8","8","8","3","8","0","0","0","8","222","48","54","19","30","120","24","35","17","18","3","3","3","1","2","2","10","10","10","8","normal"
"48131","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48131 Patch provided by sebb","Bug 48131  Add @deprecated annotations to deprecated elements","add deprec annot deprec element","","","""java/org/apache/tomcat/util/digester/SetTopRule.java""","1","1","1","1","18","2","5","10","1","0","0","8","8","8","3","8","0","0","0","8","222","48","54","19","30","120","24","35","17","18","3","3","3","1","2","2","10","10","10","8","normal"
"48133","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48133 Spelling errors in javadoc Patch provided by qingyang.xu","Bug 48133  misspellings in the javadoc and comment of the various classes in the package of ""org.apache.core""","misspel javadoc comment variou class packag apach core","","","""java/org/apache/catalina/core/ApplicationDispatcher.java""","5","5","6","2","38","3","28","7","4","0","3","20","20","20","19","20","3","11","0","6","1011","149","628","160","458","235","301","416","132","284","25","25","28","8","3","0","119","119","138","47","minor"
"48133","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48133 Spelling errors in javadoc Patch provided by qingyang.xu","Bug 48133  misspellings in the javadoc and comment of the various classes in the package of ""org.apache.core""","misspel javadoc comment variou class packag apach core","","","""java/org/apache/catalina/core/ApplicationFilterFactory.java""","7","7","12","6","44","4","31","10","1","1","3","7","7","6","0","7","0","5","0","2","393","62","233","43","165","101","90","143","41","102","23","23","37","11","3","0","55","52","87","42","minor"
"48133","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48133 Spelling errors in javadoc Patch provided by qingyang.xu","Bug 48133  misspellings in the javadoc and comment of the various classes in the package of ""org.apache.core""","misspel javadoc comment variou class packag apach core","","","""java/org/apache/catalina/core/ApplicationHttpRequest.java""","2","2","3","2","16","2","9","4","2","0","3","40","40","40","18","40","9","1","6","24","967","221","451","143","283","297","221","333","124","209","9","9","12","6","3","1","110","110","123","80","minor"
"48133","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48133 Spelling errors in javadoc Patch provided by qingyang.xu","Bug 48133  misspellings in the javadoc and comment of the various classes in the package of ""org.apache.core""","misspel javadoc comment variou class packag apach core","","","""java/org/apache/catalina/core/ContainerBase.java""","2","2","3","1","16","1","9","5","3","0","2","73","73","73","28","73","1","1","5","66","1628","329","774","197","477","527","357","569","191","378","13","13","19","3","4","1","204","204","238","87","minor"
"48133","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48133 Spelling errors in javadoc Patch provided by qingyang.xu","Bug 48133  misspellings in the javadoc and comment of the various classes in the package of ""org.apache.core""","misspel javadoc comment variou class packag apach core","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","2","10","4","1","0","3","266","266","266","104","266","0","14","6","246","5783","1221","2911","759","1879","1661","1371","2101","744","1357","62","62","80","9","5","1","655","655","705","339","minor"
"48133","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48133 Spelling errors in javadoc Patch provided by qingyang.xu","Bug 48133  misspellings in the javadoc and comment of the various classes in the package of ""org.apache.core""","misspel javadoc comment variou class packag apach core","","","""java/org/apache/catalina/core/StandardEngine.java""","2","2","2","1","14","1","9","4","1","0","2","27","27","27","7","27","0","1","0","26","553","105","292","86","162","157","124","191","66","125","13","13","13","1","3","1","66","66","66","27","minor"
"48133","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48133 Spelling errors in javadoc Patch provided by qingyang.xu","Bug 48133  misspellings in the javadoc and comment of the various classes in the package of ""org.apache.core""","misspel javadoc comment variou class packag apach core","","","""java/org/apache/catalina/core/StandardHost.java""","2","2","2","1","13","1","7","4","1","0","2","45","45","45","17","45","0","0","0","45","880","200","391","127","235","290","185","284","111","173","14","14","16","6","5","1","94","94","96","57","minor"
"48133","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48133 Spelling errors in javadoc Patch provided by qingyang.xu","Bug 48133  misspellings in the javadoc and comment of the various classes in the package of ""org.apache.core""","misspel javadoc comment variou class packag apach core","","","""java/org/apache/catalina/core/StandardPipeline.java""","3","3","3","1","21","2","12","5","1","0","2","20","20","20","6","20","0","2","0","18","571","121","280","65","177","170","125","196","62","134","13","13","14","7","3","1","71","71","75","31","minor"
"48133","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48133 Spelling errors in javadoc Patch provided by qingyang.xu","Bug 48133  misspellings in the javadoc and comment of the various classes in the package of ""org.apache.core""","misspel javadoc comment variou class packag apach core","","","""java/org/apache/catalina/core/StandardService.java""","2","2","2","1","16","1","9","4","1","0","3","33","33","33","15","33","0","0","0","33","724","151","370","94","208","203","177","280","99","181","12","12","14","3","3","1","87","87","95","37","minor"
"48133","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48133 Spelling errors in javadoc Patch provided by qingyang.xu","Bug 48133  misspellings in the javadoc and comment of the various classes in the package of ""org.apache.core""","misspel javadoc comment variou class packag apach core","","","""java/org/apache/catalina/core/StandardWrapperFacade.java""","1","1","1","1","5","0","4","0","1","0","0","5","5","5","2","5","0","0","0","5","96","32","30","13","12","34","14","22","12","10","3","3","4","1","2","1","7","7","8","5","minor"
"48133","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48133 Spelling errors in javadoc Patch provided by qingyang.xu","Bug 48133  misspellings in the javadoc and comment of the various classes in the package of ""org.apache.core""","misspel javadoc comment variou class packag apach core","","","""java/org/apache/catalina/core/StandardWrapperValve.java""","5","5","6","1","32","1","25","5","1","0","1","15","15","15","5","15","0","1","0","14","587","64","413","86","303","110","201","270","74","196","42","42","51","1","5","0","79","79","92","15","minor"
"48135","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48135 Also add generics where possible and other Eclipse warnings","Bug 48135  ServiceRefFactory: impossible null check of serviceInterfaceClass","servic ref factori servicereffactori imposs null check servic interfac class serviceinterfaceclass","The ServiceRefFactory class performs an impossible null check of serviceInterfaceClass at line 238:

237: Class[] serviceInterfaces = serviceInterfaceClass.getInterfaces();
238: if (serviceInterfaceClass != null) {

If it were null, line 237 would generate an NPE.","servic ref factori servicereffactori class perform imposs null check servic interfac class serviceinterfaceclass line class servic interfac serviceinterfac servic interfac class serviceinterfaceclass get interfac getinterfac servic interfac class serviceinterfaceclass null null line would gener npe","""java/org/apache/naming/factory/webservices/ServiceProxy.java""","2","2","2","2","16","1","10","4","1","0","2","5","5","5","2","5","0","2","0","3","147","23","68","30","36","56","37","50","28","22","4","4","4","4","2","1","13","13","13","12","normal"
"48135","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48135 Also add generics where possible and other Eclipse warnings","Bug 48135  ServiceRefFactory: impossible null check of serviceInterfaceClass","servic ref factori servicereffactori imposs null check servic interfac class serviceinterfaceclass","The ServiceRefFactory class performs an impossible null check of serviceInterfaceClass at line 238:

237: Class[] serviceInterfaces = serviceInterfaceClass.getInterfaces();
238: if (serviceInterfaceClass != null) {

If it were null, line 237 would generate an NPE.","servic ref factori servicereffactori class perform imposs null check servic interfac class serviceinterfaceclass line class servic interfac serviceinterfac servic interfac class serviceinterfaceclass get interfac getinterfac servic interfac class serviceinterfaceclass null null line would gener npe","""java/org/apache/naming/factory/webservices/ServiceRefFactory.java""","15","15","15","2","94","7","79","7","1","0","0","3","3","3","0","3","0","2","0","1","372","49","273","102","197","50","173","218","98","120","40","40","41","6","6","0","46","46","47","8","normal"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/Cluster.java""","0","0","0","0","0","0","0","0","1","0","0","0","11","11","0","11","0","0","0","11","128","18","16","15","0","94","12","13","13","0","0","0","0","0","0","6","0","0","0","0","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/CometEvent.java""","1","1","1","1","0","0","0","0","3","0","0","4","6","10","10","10","0","0","0","10","147","16","16","15","0","115","11","14","14","0","1","1","1","1","0","7","4","4","4","4","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/CometProcessor.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","0","0","0","1","45","7","8","7","0","30","5","6","6","0","0","0","0","0","0","4","0","0","0","0","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/Context.java""","0","0","0","0","0","0","0","0","1","0","1","0","128","128","0","128","0","0","0","128","1100","272","143","142","1","685","141","142","142","0","0","0","0","0","0","5","0","0","0","0","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/Host.java""","0","0","0","0","0","0","0","0","1","0","2","0","22","22","0","22","0","0","0","22","247","56","27","26","2","164","25","26","26","0","0","0","0","0","0","6","0","0","0","0","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/Pipeline.java""","0","0","0","0","0","0","0","0","1","0","0","0","7","7","0","7","0","0","0","7","127","24","10","9","0","93","8","9","9","0","0","0","0","0","0","9","0","0","0","0","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ant/BaseRedirectorHelperTask.java""","1","1","1","1","12","0","6","6","1","0","0","20","20","20","10","20","0","1","8","11","375","35","152","45","82","188","71","106","41","65","4","4","4","1","2","1","34","34","34","20","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ant/JKStatusUpdateTask.java""","1","1","2","1","10","0","6","4","1","0","0","30","30","30","14","30","0","1","1","28","417","52","224","52","125","147","91","149","51","98","16","16","20","1","3","1","57","57","61","30","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ant/jmx/JMXAccessorQueryTask.java""","3","3","4","2","21","1","14","5","1","0","1","6","6","6","1","6","0","0","2","4","217","30","101","33","63","86","47","71","30","41","11","11","16","9","5","1","23","23","28","14","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ant/jmx/JMXAccessorSetTask.java""","1","1","1","1","10","0","5","4","1","0","1","12","12","12","4","12","0","0","2","10","223","30","87","39","38","106","39","59","32","27","4","4","5","1","3","1","19","19","21","12","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ant/jmx/JMXAccessorTask.java""","2","2","2","1","12","0","8","3","1","2","3","42","42","40","14","42","0","0","7","35","731","81","420","129","248","231","186","290","124","166","21","21","27","5","4","1","108","108","123","48","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/authenticator/AuthenticatorBase.java""","3","3","3","1","21","2","11","7","1","0","6","28","29","29","12","29","0","0","7","22","893","184","391","122","241","320","192","284","109","175","29","29","33","8","5","1","91","91","97","39","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/authenticator/FormAuthenticator.java""","6","6","7","2","43","4","28","10","1","0","2","10","10","10","1","10","0","0","6","4","545","86","320","97","229","139","169","235","80","155","32","32","34","14","4","0","65","65","70","27","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/authenticator/SingleSignOn.java""","2","2","3","1","24","2","10","10","1","0","2","22","22","22","6","22","0","0","8","14","710","130","270","80","164","310","123","196","69","127","16","16","16","5","3","1","64","64","72","28","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/connector/Connector.java""","1","1","1","1","12","1","6","5","1","0","4","71","71","71","32","71","0","0","2","69","1236","305","536","161","315","395","238","361","145","216","12","12","12","3","3","1","123","123","128","75","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/connector/CoyoteAdapter.java""","10","10","12","4","66","6","46","13","1","3","6","13","13","10","2","13","0","0","7","6","1012","144","650","129","480","218","349","480","121","359","25","25","27","13","6","0","132","132","162","52","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/connector/CoyoteInputStream.java""","2","2","2","1","13","1","11","0","6","0","0","14","14","14","1","14","1","0","2","11","241","50","153","48","88","38","51","81","36","45","4","4","4","3","2","0","29","29","29","22","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/connector/CoyoteReader.java""","2","2","2","1","9","0","8","0","1","0","2","13","13","13","2","13","1","0","1","11","219","57","129","50","61","33","51","79","29","50","15","15","18","5","5","0","27","27","30","17","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/connector/OutputBuffer.java""","2","2","2","1","11","1","7","2","2","0","2","34","34","34","13","34","0","1","2","31","609","172","280","87","153","158","124","195","64","131","7","7","7","3","2","1","70","70","72","38","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","14","1","8","4","1","2","5","147","147","145","48","147","1","0","12","134","2763","544","1327","375","838","902","647","978","361","617","20","20","24","10","3","1","334","334","369","210","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/connector/RequestFacade.java""","1","1","1","1","7","1","6","0","14","0","1","88","88","88","6","88","0","0","1","87","1010","316","639","156","315","55","194","366","136","230","4","4","4","1","2","0","158","158","158","88","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/connector/Response.java""","2","2","2","1","16","1","8","5","4","0","2","79","79","79","17","79","0","3","2","74","1641","342","740","193","462","562","343","534","178","356","12","12","19","8","3","1","190","190","220","134","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/deploy/ContextService.java""","1","1","1","1","5","0","5","0","1","0","0","25","25","25","7","25","0","0","0","25","254","46","140","40","71","68","63","101","38","63","12","12","12","1","1","0","37","37","37","25","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/filters/WebdavFixFilter.java""","2","2","2","1","13","0","9","3","1","0","4","5","5","5","0","5","0","2","0","3","147","15","66","31","35","67","36","47","25","22","6","6","9","1","2","1","10","10","13","5","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/authenticator/ClusterSingleSignOn.java""","2","2","2","1","18","3","10","5","1","0","1","18","18","18","3","18","0","0","12","6","457","107","211","70","125","139","95","138","48","90","8","8","12","1","6","1","42","42","49","18","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/authenticator/ClusterSingleSignOn.java""","2","2","2","1","18","3","10","5","1","0","1","18","18","18","3","18","0","0","12","6","457","107","211","70","125","139","95","138","48","90","8","8","12","1","6","1","42","42","49","18","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/backend/CollectedInfo.java""","3","3","4","2","18","2","13","3","1","0","0","3","3","3","6","3","0","0","0","3","105","17","56","30","37","35","40","50","30","20","6","6","8","5","2","1","9","9","12","7","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/backend/HeartbeatListener.java""","1","1","1","1","4","0","4","0","1","0","1","14","14","14","9","14","0","0","0","14","130","19","77","35","55","36","50","73","34","39","9","9","9","6","3","0","22","22","22","19","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/deploy/FarmWarDeployer.java""","2","2","2","1","14","0","10","3","1","0","2","40","40","40","15","40","0","0","11","29","766","83","449","138","299","235","214","318","125","193","14","14","14","5","6","1","100","100","102","47","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/deploy/FileMessageFactory.java""","3","3","3","1","31","0","19","11","1","2","2","8","8","6","12","8","0","1","1","6","376","32","183","47","130","167","91","123","39","84","10","10","10","7","2","1","29","29","29","14","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/deploy/WarWatcher.java""","1","1","1","1","7","0","5","2","3","0","1","18","18","18","6","18","0","0","2","16","243","37","122","44","66","85","59","92","42","50","7","7","7","1","2","1","31","31","34","18","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/session/DeltaManager.java""","2","2","2","1","14","0","9","5","1","0","4","91","91","91","38","91","0","0","21","70","1574","156","903","231","587","532","463","678","230","448","15","15","20","4","7","1","225","215","250","101","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/session/DeltaRequest.java""","2","1","2","1","8","0","7","1","2","0","11","31","31","31","8","31","0","0","2","29","391","50","278","95","166","70","149","210","83","127","13","10","13","1","4","0","64","61","64","31","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/session/DeltaRequest.java""","2","1","2","1","8","0","7","1","2","0","11","31","31","31","8","31","0","0","2","29","391","50","278","95","166","70","149","210","83","127","13","10","13","1","4","0","64","61","64","31","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","7","4","2","0","2","52","52","52","6","52","0","2","7","43","855","103","463","141","259","291","230","345","123","222","8","8","10","5","3","1","101","101","114","63","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/session/JvmRouteBinderValve.java""","2","2","3","1","18","0","10","7","1","0","2","23","23","23","7","23","0","0","8","15","591","58","273","89","164","260","121","182","80","102","9","9","11","3","4","1","60","60","70","25","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/session/SessionMessageImpl.java""","1","1","1","1","7","0","4","3","1","0","0","13","13","13","7","13","0","1","0","12","164","19","76","35","30","69","34","51","23","28","8","2","8","1","1","1","21","15","21","13","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/tcp/ReplicationValve.java""","2","2","2","1","13","0","8","4","1","0","3","36","36","36","14","36","0","0","13","23","664","70","368","118","219","226","162","252","109","143","13","13","16","5","5","1","91","91","100","40","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/tcp/SimpleTcpCluster.java""","1","1","2","1","10","0","6","4","1","0","12","63","63","63","19","63","0","0","4","59","966","129","470","163","263","367","247","364","160","204","7","7","9","1","3","1","120","120","133","63","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ha/tcp/SimpleTcpCluster.java""","1","1","2","1","10","0","6","4","1","0","12","63","63","63","19","63","0","0","4","59","966","129","470","163","263","367","247","364","160","204","7","7","9","1","3","1","120","120","133","63","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","6","6","6","2","33","3","22","7","4","1","6","59","59","58","28","59","3","0","21","35","2478","423","1446","324","1008","611","691","1057","297","760","41","41","47","28","9","0","360","360","383","163","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","28","2","20","6","11","0","17","34","34","34","1","34","0","0","13","21","1266","121","899","188","722","253","406","531","178","353","17","17","21","9","4","0","124","124","143","60","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","28","2","20","6","11","0","17","34","34","34","1","34","0","0","13","21","1266","121","899","188","722","253","406","531","178","353","17","17","21","9","4","0","124","124","143","60","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/manager/JMXProxyServlet.java""","3","3","4","3","21","2","16","2","1","0","0","8","8","8","2","8","0","1","0","7","235","34","156","54","99","45","92","124","50","74","12","12","14","11","4","0","31","31","33","24","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/manager/ManagerServlet.java""","6","6","7","2","38","2","28","7","1","2","1","34","34","32","12","34","0","0","26","8","1645","212","1032","209","765","401","493","714","191","523","21","21","32","6","5","0","216","216","254","81","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/manager/host/HTMLHostManagerServlet.java""","3","3","4","1","49","6","32","10","1","0","10","8","8","8","1","8","0","0","5","3","604","89","391","91","325","125","209","240","78","162","10","10","11","1","4","0","30","30","34","8","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/manager/host/HTMLHostManagerServlet.java""","3","3","4","1","49","6","32","10","1","0","10","8","8","8","1","8","0","0","5","3","604","89","391","91","325","125","209","240","78","162","10","10","11","1","4","0","30","30","34","8","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/manager/util/SessionUtils.java""","5","5","7","3","27","1","21","4","1","6","5","7","7","1","0","7","0","1","0","6","258","23","171","44","106","69","85","123","47","76","19","19","26","10","6","0","40","40","49","24","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/mbeans/ContextEnvironmentMBean.java""","2","2","2","1","24","2","10","12","1","0","0","2","2","2","0","2","0","0","0","2","107","23","34","20","12","50","20","24","16","8","3","3","3","1","1","1","4","4","4","2","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/mbeans/ContextResourceLinkMBean.java""","2","2","2","1","24","2","10","12","1","0","0","2","2","2","0","2","0","0","0","2","107","23","34","20","12","50","20","24","16","8","3","3","3","1","1","1","4","4","4","2","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/mbeans/ContextResourceMBean.java""","7","7","7","2","42","3","25","12","1","0","0","3","3","3","0","3","0","0","0","3","187","31","92","28","61","64","43","63","21","42","10","10","10","6","2","1","21","21","21","8","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/mbeans/MBeanFactory.java""","2","2","2","1","24","2","13","9","1","0","2","33","33","33","1","33","0","6","0","27","970","153","483","235","312","334","285","355","195","160","6","6","7","5","3","1","71","71","76","49","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/mbeans/ServerLifecycleListener.java""","5","5","6","1","32","3","19","9","1","0","1","32","32","32","1","32","0","0","27","5","1203","200","657","136","417","346","266","453","125","328","25","25","25","3","3","1","190","190","195","34","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/realm/DataSourceRealm.java""","1","1","2","1","16","1","9","6","1","0","3","28","28","28","9","28","0","2","9","17","657","127","293","92","178","238","133","191","74","117","7","7","7","3","3","1","55","55","56","30","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/realm/JAASCallbackHandler.java""","5","5","5","1","35","1","21","12","1","0","1","3","3","3","10","3","0","0","0","3","226","32","88","32","54","106","51","69","27","42","14","14","14","1","3","1","17","17","17","3","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/realm/JAASMemoryLoginModule.java""","4","4","4","1","33","3","20","10","1","0","2","8","8","8","7","8","0","0","1","7","426","70","201","66","141","156","131","165","64","101","10","10","11","3","3","1","34","34","36","12","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/realm/JAASRealm.java""","2","2","3","1","18","1","10","6","1","0","4","20","20","20","6","20","0","0","7","13","617","103","249","80","148","265","115","171","64","107","21","21","21","10","4","1","59","59","60","32","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/realm/JDBCRealm.java""","2","2","2","1","18","2","9","7","1","0","3","31","31","31","13","31","0","0","9","22","805","174","322","93","202","310","150","221","77","144","8","8","8","4","5","1","68","68","69","40","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/realm/JNDIRealm.java""","3","3","3","1","22","3","11","7","2","0","3","72","72","72","32","72","1","2","21","48","2192","464","922","277","613","809","449","669","236","433","28","28","33","14","7","1","221","217","244","118","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/realm/LockOutRealm.java""","1","1","1","1","13","0","7","4","3","0","1","22","22","22","7","22","0","3","1","18","421","68","185","57","105","168","79","120","49","71","4","4","5","3","2","1","37","37","40","24","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/realm/RealmBase.java""","4","4","4","1","21","2","14","5","2","3","8","54","57","54","20","57","1","2","9","45","1489","266","860","219","540","367","407","628","209","419","53","53","63","21","6","0","216","216","241","103","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/security/SecurityUtil.java""","3","3","4","1","27","1","16","8","2","11","17","12","12","1","0","12","0","3","0","9","431","56","236","94","139","139","94","137","58","79","13","13","15","7","3","1","42","42","51","18","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/servlets/CGIServlet.java""","4","4","5","1","45","4","26","14","5","0","7","32","32","32","24","32","1","3","24","4","1918","265","922","213","689","742","509","652","191","461","27","27","30","7","5","1","147","142","172","42","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/servlets/DefaultServlet.java""","5","5","7","2","48","7","29","11","2","0","6","39","39","39","15","39","0","0","35","4","2191","420","1256","342","905","520","622","853","256","597","42","42","52","14","5","0","230","230","273","110","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/servlets/WebdavServlet.java""","8","8","9","3","64","10","45","8","4","2","45","38","38","36","14","38","0","15","14","9","3138","633","1897","427","1478","609","953","1273","343","930","68","64","75","16","6","0","328","318","354","115","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/session/JDBCStore.java""","3","3","3","1","20","1","13","5","1","0","2","38","38","38","21","38","0","0","4","34","991","120","565","146","394","307","265","383","135","248","16","16","16","3","4","1","115","115","117","50","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/session/PersistentManagerBase.java""","2","2","3","1","17","2","10","5","6","0","3","51","51","51","13","51","5","0","9","37","1173","257","570","142","367","349","253","404","133","271","10","10","12","7","4","1","141","141","155","80","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/session/StandardManager.java""","3","3","4","1","22","2","14","6","3","0","2","25","25","25","6","25","2","0","3","20","758","133","404","101","266","221","186","288","92","196","26","26","26","4","3","1","99","99","103","28","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ssi/ExpressionParseTree.java""","1","1","1","1","7","0","6","1","11","0","3","30","32","32","8","32","0","3","1","28","410","53","245","87","121","114","105","162","65","97","20","8","20","6","3","0","58","46","58","35","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ssi/SSIFsize.java""","3","3","4","1","19","0","18","0","1","0","2","4","4","4","0","4","0","0","1","3","122","10","82","28","59","30","46","62","27","35","6","6","6","1","3","0","15","15","16","4","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ssi/SSIServletExternalResolver.java""","4","4","5","1","18","0","17","0","2","0","0","24","24","24","9","24","0","0","12","12","573","61","455","133","300","57","196","316","107","209","62","62","62","6","6","0","118","118","124","32","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/ssi/SSIStopProcessingException.java""","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","31","2","3","2","0","26","1","2","2","0","0","0","0","0","0","9","0","0","0","0","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/Channel.java""","0","0","0","0","0","0","0","0","1","0","13","0","15","15","0","15","0","0","0","15","362","32","32","31","13","298","30","31","31","0","0","0","0","0","0","9","0","0","0","0","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/ChannelListener.java""","0","0","0","0","0","0","0","0","1","0","0","0","4","4","0","4","0","0","0","4","68","7","8","7","0","53","6","7","7","0","0","0","0","0","0","7","0","0","0","0","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/Heartbeat.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","0","0","0","1","34","3","4","3","0","27","2","3","3","0","0","0","0","0","0","7","0","0","0","0","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/Member.java""","0","0","0","0","0","0","0","0","1","0","1","0","13","13","0","13","0","0","0","13","125","18","17","16","1","90","15","16","16","0","0","0","0","0","0","5","0","0","0","0","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/UniqueId.java""","1","1","2","1","4","0","4","0","1","0","0","7","7","7","1","7","0","0","0","7","75","10","41","18","17","25","20","33","15","18","5","5","8","1","2","1","12","12","15","7","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/group/GroupChannel.java""","2","2","2","1","12","0","7","5","3","1","2","39","39","38","13","39","0","0","4","35","680","62","358","114","204","272","191","282","110","172","13","13","15","5","4","1","89","89","97","45","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/group/GroupChannel.java""","2","2","2","1","12","0","7","5","3","1","2","39","39","38","13","39","0","0","4","35","680","62","358","114","204","272","191","282","110","172","13","13","15","5","4","1","89","89","97","45","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/group/interceptors/MessageDispatch15Interceptor.java""","1","1","1","1","3","0","3","0","2","0","0","14","14","14","6","14","0","0","0","14","119","19","76","39","30","25","38","54","32","22","2","2","2","1","1","0","15","15","15","14","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/io/ObjectReader.java""","1","1","1","1","6","0","4","1","1","0","1","17","17","17","4","17","0","0","0","17","168","26","83","34","37","59","44","66","35","31","2","2","2","1","1","1","21","21","21","17","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/membership/McastServiceImpl.java""","3","3","3","1","15","0","13","1","8","1","3","32","32","31","30","32","0","3","2","27","653","46","464","122","297","148","248","369","111","258","12","12","13","3","5","0","114","114","117","34","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/transport/PooledSender.java""","1","1","1","1","6","0","5","1","2","0","0","22","23","23","7","23","0","0","0","23","218","33","137","48","73","52","73","110","48","62","8","8","10","4","3","0","36","36","38","25","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/transport/bio/BioReplicationTask.java""","3","3","3","1","14","0","10","3","1","0","1","7","7","7","2","7","0","0","3","4","167","20","90","30","51","58","54","80","30","50","8","8","8","1","4","1","25","25","25","7","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/transport/bio/BioSender.java""","3","3","4","1","20","0","14","5","1","0","3","10","10","10","4","10","0","0","4","6","299","33","168","46","116","98","103","141","43","98","10","10","13","4","3","1","37","37","40","13","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/transport/bio/util/FastQueue.java""","2","2","2","1","12","0","8","3","1","0","1","21","21","21","13","21","0","0","0","21","373","59","196","44","126","118","96","151","44","107","17","17","18","3","4","1","53","53","54","23","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/transport/nio/NioSender.java""","3","3","4","1","15","0","12","3","1","0","1","18","18","18","10","18","0","4","2","12","381","40","254","57","174","92","149","216","55","161","11","11","12","8","4","0","68","68","75","29","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/transport/nio/ParallelNioSender.java""","5","5","5","1","18","0","16","1","1","0","1","13","13","13","3","13","0","5","0","8","315","33","245","77","163","40","152","218","78","140","17","17","19","1","5","0","67","67","70","13","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/tribes/transport/nio/ParallelNioSender.java""","5","5","5","1","18","0","16","1","1","0","1","13","13","13","3","13","0","5","0","8","315","33","245","77","163","40","152","218","78","140","17","17","19","1","5","0","67","67","70","13","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/users/MemoryUserDatabase.java""","2","2","2","1","15","1","10","3","4","0","2","37","37","37","14","37","1","0","0","36","814","180","435","123","271","200","205","305","120","185","16","16","16","3","4","0","80","80","82","39","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/util/Base64.java""","5","5","5","2","39","4","28","6","1","5","10","5","5","0","0","5","0","0","0","5","286","40","187","44","127","59","124","151","52","99","11","11","11","4","2","0","25","25","27","11","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/util/DateTool.java""","1","1","1","1","5","0","5","0","5","0","11","4","4","4","0","4","0","0","0","4","116","18","50","29","31","48","28","33","25","8","1","1","1","1","0","1","4","4","4","4","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/util/ExtensionValidator.java""","7","7","7","3","48","2","33","11","1","6","4","6","6","0","4","6","0","4","0","2","434","51","250","95","161","133","112","160","75","85","14","14","15","10","5","1","43","43","46","23","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/util/IOTools.java""","1","1","1","1","9","0","5","4","1","4","1","5","5","1","0","5","0","1","0","4","87","8","35","21","9","45","15","23","17","6","2","2","2","1","1","1","7","7","7","5","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/util/ManifestResource.java""","2","2","2","1","14","1","9","4","1","0","3","12","12","12","4","12","0","3","0","9","243","34","123","43","85","86","77","99","40","59","5","5","5","5","2","1","26","24","26","19","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/util/ParameterMap.java""","1","1","1","1","12","2","4","6","1","0","1","10","10","10","1","10","0","0","0","10","218","61","55","22","24","102","20","35","17","18","2","2","2","1","1","2","14","14","14","10","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/util/RequestUtil.java""","4","3","4","2","27","1","14","11","1","13","1","13","13","0","0","13","0","2","0","11","431","60","205","45","146","169","98","148","41","107","12","12","13","10","4","1","55","49","62","28","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/util/SchemaResolver.java""","3","3","3","1","22","2","11","9","1","0","0","3","3","3","4","3","0","0","0","3","135","24","46","19","24","65","24","34","17","17","6","6","7","3","1","1","9","9","10","5","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/util/Strftime.java""","2","2","3","1","18","1","10","6","1","0","1","8","8","8","1","8","0","0","3","5","263","26","134","30","93","108","83","105","30","75","9","9","13","1","5","1","21","21","26","8","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/valves/AccessLogValve.java""","2","1","2","1","11","0","8","2","28","0","5","76","77","77","38","77","0","7","3","67","1467","220","784","248","441","465","346","521","215","306","21","10","21","4","4","1","168","145","178","81","minor"
"48137","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=48137 Fix javadoc typos Patch provided by qingyang.xu","Bug 48137  some misspellings I can find in the ""org.apache.catalina"" package","misspel find apach catalina packag","","","""java/org/apache/catalina/valves/CometConnectionManagerValve.java""","3","3","3","1","21","1","13","6","1","0","1","12","12","12","5","12","0","0","0","12","400","73","204","72","117","123","93","134","61","73","12","12","17","1","7","1","37","37","43","12","minor"
"48139","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48139 Correct javadoc - patch provided by sebb Also fix remaining Eclipse warnings","Bug 48139  Tomcat Javadoc and unthrown exception fixes","tomcat javadoc unthrown except fix","","","""java/org/apache/catalina/startup/Tomcat.java""","1","1","1","1","13","0","7","4","5","3","2","40","40","37","14","40","0","1","5","34","900","88","536","297","368","277","185","253","108","145","6","6","6","1","3","1","64","64","65","40","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/javax/servlet/SessionCookieConfig.java""","0","0","0","0","0","0","0","0","1","0","0","0","14","14","0","14","0","0","0","14","90","16","17","16","0","57","15","16","16","0","0","0","0","0","0","3","0","0","0","0","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/ant/jmx/JMXAccessorCreateTask.java""","2","2","2","1","11","0","7","3","1","0","1","10","10","10","3","10","0","0","1","9","209","23","90","29","48","96","41","62","26","36","9","9","10","1","3","1","20","20","21","10","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/core/ApplicationFilterChain.java""","3","3","4","1","27","1","18","7","3","2","8","15","15","13","5","15","5","2","0","8","587","94","314","90","221","179","146","195","77","118","19","19","20","1","3","1","58","58","60","15","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/core/StandardContextValve.java""","4","4","5","3","38","3","17","17","1","0","2","6","6","6","1","6","0","1","0","5","330","54","134","47","79","142","63","89","38","51","19","19","26","14","3","1","26","26","33","19","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/core/StandardEngineValve.java""","1","1","1","1","15","1","6","7","1","0","2","4","4","4","0","4","0","0","0","4","143","34","45","26","15","64","20","27","18","9","3","3","3","1","1","1","6","6","6","4","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/core/StandardHostValve.java""","5","5","5","2","42","6","23","12","1","1","3","8","8","7","0","8","0","0","4","4","447","88","219","62","148","140","105","145","49","96","11","11","12","5","3","1","40","40","41","16","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/core/StandardWrapperValve.java""","5","5","6","1","32","1","25","5","1","0","1","15","15","15","5","15","0","1","0","14","587","64","413","86","303","110","201","270","74","196","42","42","51","1","5","0","79","79","92","15","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/ha/ClusterManager.java""","0","0","0","0","0","0","0","0","1","0","0","0","15","15","0","15","0","0","0","15","112","20","21","20","0","71","19","20","20","0","0","0","0","0","0","3","0","0","0","0","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","7","4","2","0","2","52","52","52","6","52","0","2","7","43","855","103","463","141","259","291","230","345","123","222","8","8","10","5","3","1","101","101","114","63","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/ha/tcp/SimpleTcpCluster.java""","1","1","2","1","10","0","6","4","1","0","13","63","63","63","18","63","0","0","4","59","966","129","470","163","263","367","247","364","160","204","7","7","9","1","3","1","120","120","133","63","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/manager/StatusTransformer.java""","5","5","5","1","41","3","33","5","1","20","0","20","20","0","0","20","0","0","2","18","930","128","684","139","530","128","381","482","101","381","21","14","23","4","4","0","111","101","114","28","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/realm/CombinedRealm.java""","3","3","3","1","20","1","12","6","1","0","2","12","12","12","1","12","0","0","3","9","329","45","180","54","95","104","67","118","46","72","7","7","8","3","3","1","42","42","43","20","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/realm/LockOutRealm.java""","1","1","1","1","13","0","7","4","3","0","1","22","22","22","7","22","0","3","1","18","421","68","185","57","105","168","79","120","49","71","4","4","5","3","2","1","37","37","40","24","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/startup/Embedded.java""","3","3","3","1","19","2","10","5","1","0","3","38","38","38","8","38","0","0","4","34","1002","197","466","125","295","340","238","359","123","236","16","16","16","8","4","1","122","122","125","55","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/startup/WebRuleSet.java""","1","1","1","1","21","2","16","2","16","0","1","38","38","38","12","38","0","0","2","36","1096","187","723","146","537","186","331","412","115","297","10","10","14","1","3","0","65","65","70","38","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/tribes/group/ChannelCoordinator.java""","2","2","2","1","10","0","6","3","1","0","0","23","23","23","5","23","0","0","2","21","338","46","195","62","103","101","93","142","47","95","12","12","12","5","3","1","49","49","49","30","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/tribes/io/ChannelData.java""","1","1","1","1","10","0","6","4","1","5","2","27","27","22","5","27","0","0","0","27","363","32","195","66","122","165","126","157","62","95","2","2","3","1","1","1","30","30","33","27","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/tribes/io/ObjectReader.java""","1","1","1","1","6","0","4","1","1","0","1","17","17","17","4","17","0","0","0","17","168","26","83","34","37","59","44","66","35","31","2","2","2","1","1","1","21","21","21","17","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/tribes/io/ReplicationStream.java""","3","3","3","1","15","0","11","3","1","0","0","7","7","7","1","7","0","0","1","6","166","21","94","35","53","51","44","65","28","37","9","9","10","4","4","1","22","22","23","12","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/tribes/io/XByteBuffer.java""","1","1","2","1","10","0","7","2","1","18","4","43","43","25","3","43","0","0","0","43","606","70","367","110","240","174","208","289","103","186","12","12","15","10","3","0","82","82","92","65","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/tribes/membership/McastServiceImpl.java""","3","3","3","1","15","0","13","1","8","1","3","32","32","31","30","32","0","3","2","27","653","46","464","122","297","148","248","369","111","258","12","12","13","3","5","0","114","114","117","34","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/tribes/membership/MemberImpl.java""","1","1","1","1","10","0","7","2","1","6","6","46","46","40","13","46","0","0","1","45","638","93","356","111","230","206","211","272","104","168","5","5","5","3","3","1","64","64","67","50","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/tribes/membership/Membership.java""","2","2","2","1","10","0","7","2","3","0","1","20","20","20","7","20","0","0","1","19","320","37","184","59","107","101","101","151","63","88","7","7","7","3","3","1","44","44","46","26","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/tribes/transport/bio/util/LinkObject.java""","1","1","1","1","6","0","3","2","1","0","0","9","9","9","5","9","0","0","0","9","108","16","43","20","13","49","23","33","20","13","2","2","2","1","0","1","10","10","10","9","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/tribes/transport/nio/NioReceiver.java""","4","4","5","1","21","0","15","5","1","1","3","16","16","15","5","16","0","1","6","9","439","43","279","74","187","123","159","229","70","159","17","17","20","7","6","0","73","73","80","24","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/users/MemoryUserDatabase.java""","2","2","2","1","15","1","10","3","4","0","2","37","37","37","14","37","1","0","0","36","814","180","435","123","271","200","205","305","120","185","16","16","16","3","4","0","80","80","82","39","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/valves/RemoteIpValve.java""","2","2","2","1","14","0","8","6","1","4","4","20","20","16","7","20","0","0","4","16","712","46","196","73","112","471","103","148","75","73","12","12","13","5","3","2","42","42","44","26","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/coyote/http11/Http11Processor.java""","12","12","14","2","74","9","51","12","2","0","0","12","12","12","5","12","0","0","6","6","1025","176","657","112","505","195","353","495","114","381","47","47","53","9","4","0","146","146","174","35","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/jasper/compiler/ParserController.java""","4","4","5","2","31","2","20","8","1","0","1","15","15","15","12","15","0","8","0","7","622","63","341","100","220","218","160","226","79","147","17","17","21","9","3","1","65","65","81","35","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/jasper/compiler/TagFileProcessor.java""","3","3","4","1","23","1","17","3","4","1","8","22","22","21","22","22","6","4","0","12","704","102","477","192","328","131","215","295","135","160","18","18","26","4","3","0","76","76","96","25","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/jasper/compiler/TldLocationsCache.java""","5","5","5","2","25","1","19","4","2","2","10","12","12","10","4","12","0","6","0","6","555","42","334","92","228","179","182","248","86","162","16","16","17","6","5","1","60","60","65","25","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/naming/HandlerRef.java""","2","2","2","1","17","0","12","4","1","0","9","4","4","4","0","4","0","0","0","4","189","48","70","30","44","71","43","53","25","28","3","3","3","3","2","1","9","9","9","6","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/naming/ServiceRef.java""","2","2","2","1","13","0","10","2","1","0","8","7","7","7","1","7","0","0","0","7","218","52","95","36","57","71","53","69","29","40","6","6","6","3","2","1","15","15","15","9","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/naming/resources/BaseDirContext.java""","1","1","1","1","14","0","5","9","2","0","1","57","78","78","10","78","0","1","3","74","1396","202","375","193","130","822","147","227","127","100","7","7","11","3","2","2","77","77","81","65","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/tomcat/buildutil/Txt2Html.java""","3","3","3","1","26","1","17","7","1","0","0","4","4","4","2","4","0","1","0","3","165","17","92","40","48","56","52","65","38","27","7","7","8","1","4","1","14","13","15","4","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/tomcat/util/digester/SetPropertiesRule.java""","3","3","3","1","29","2","14","12","1","0","0","7","7","7","2","7","0","0","0","7","277","47","109","26","68","121","57","81","28","53","12","12","14","4","4","1","23","23","26","10","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/tomcat/util/digester/SetPropertyRule.java""","2","2","3","1","24","2","11","10","1","0","0","4","4","4","2","4","0","0","0","4","164","36","56","20","34","72","27","38","17","21","7","7","9","1","2","1","10","10","12","4","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/tomcat/util/modeler/BaseModelMBean.java""","3","3","3","1","24","1","12","10","2","1","3","35","35","34","8","35","2","0","1","32","1178","161","486","141","310","534","195","311","104","207","13","13","14","12","3","1","117","117","120","53","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/tomcat/util/net/NioBlockingSelector.java""","4","4","5","2","20","0","18","2","6","0","2","18","18","18","7","18","0","0","0","18","395","28","318","83","221","63","178","266","81","185","20","20","22","7","5","0","87","87","100","36","normal"
"48143","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48143 Javadoc updates. Patch provide by sebb.","Bug 48143  Javadoc fixes","javadoc fix","","","""java/org/apache/tomcat/util/net/SSLSessionManager.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","0","0","0","1","32","2","4","3","0","26","2","3","3","0","0","0","0","0","0","7","0","0","0","0","normal"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/jni/BIOCallback.java""","0","0","0","0","0","0","0","0","1","0","0","0","4","4","0","4","0","0","0","4","56","8","7","6","0","41","5","6","6","0","0","0","0","0","0","6","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/jni/Directory.java""","0","0","0","0","0","0","0","0","1","8","0","0","8","0","0","8","0","0","0","8","97","13","12","11","0","72","9","10","10","0","0","0","0","0","0","6","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/jni/File.java""","0","0","0","0","0","0","0","0","1","42","69","0","42","0","0","42","0","0","0","42","722","67","121","120","69","570","113","114","114","0","0","0","0","0","0","5","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/jni/Local.java""","0","0","0","0","0","0","0","0","1","5","0","0","5","0","0","5","0","0","0","5","75","9","10","9","0","56","6","7","7","0","0","0","0","0","0","6","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/jni/OS.java""","0","0","0","0","0","0","0","0","1","8","22","0","8","0","0","8","0","1","0","7","130","15","33","32","22","82","31","32","32","0","0","0","0","0","0","2","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/jni/Poll.java""","0","0","0","0","0","0","0","0","1","9","11","0","9","0","0","9","0","0","0","9","157","16","27","26","11","124","21","22","22","0","0","0","0","0","0","5","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/jni/Pool.java""","0","0","0","0","0","0","0","0","1","13","0","0","13","0","0","13","0","0","0","13","164","21","17","16","0","126","15","16","16","0","0","0","0","0","0","7","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/jni/Proc.java""","0","0","0","0","0","0","0","0","1","7","34","0","7","0","0","7","0","0","0","7","210","21","47","46","34","154","42","43","43","0","0","0","0","0","0","3","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/jni/SSL.java""","0","0","0","0","0","0","0","0","1","14","118","0","14","0","0","14","0","0","0","14","328","37","137","136","118","154","133","134","134","0","0","0","0","0","0","1","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/jni/SSLContext.java""","0","0","0","0","0","0","0","0","1","14","0","0","14","0","0","14","0","0","0","14","284","19","27","26","0","238","15","16","16","0","0","0","0","0","0","9","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/jni/Shm.java""","0","0","0","0","0","0","0","0","1","8","0","0","8","0","0","8","0","0","0","8","124","13","14","13","0","97","10","11","11","0","0","0","0","0","0","7","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/jni/Socket.java""","0","0","0","0","0","0","0","0","1","37","34","0","37","0","0","37","0","1","0","36","586","46","96","95","34","459","73","74","74","0","0","0","0","0","0","5","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/jni/Time.java""","1","1","1","1","5","0","4","1","1","6","2","2","6","0","0","6","0","0","0","6","74","11","17","10","4","46","9","12","10","2","1","1","1","1","0","3","2","2","2","2","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/jni/User.java""","0","0","0","0","0","0","0","0","1","10","0","0","10","0","0","10","0","0","0","10","127","15","21","20","0","91","11","12","12","0","0","0","0","0","0","4","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/DomUtil.java""","2","2","3","2","13","0","10","2","2","14","1","15","15","1","0","15","0","0","0","15","270","35","181","70","102","54","101","147","67","80","7","7","10","7","2","0","44","44","53","33","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/IntrospectionUtils.java""","5","5","6","2","26","1","21","3","4","30","4","31","33","3","0","33","0","0","0","33","904","92","678","157","495","138","325","505","155","350","29","29","36","14","6","0","185","185","205","92","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/buf/B2CConverter.java""","1","1","1","1","7","0","5","1","3","0","2","14","14","14","5","14","1","0","1","12","195","35","103","43","40","58","37","62","32","30","8","8","8","4","4","1","23","23","23","17","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/buf/ByteChunk.java""","2","2","2","1","11","0","8","2","3","7","1","56","58","51","9","58","0","3","0","55","824","120","480","136","278","229","240","371","136","235","8","8","11","6","3","0","131","131","153","110","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/buf/C2BConverter.java""","1","1","1","1","6","0","4","1","3","0","1","25","25","25","7","25","3","0","0","22","275","42","134","53","54","99","56","90","44","46","5","5","5","1","2","1","31","31","31","25","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/buf/CharChunk.java""","2","2","2","1","10","0","8","2","3","1","0","52","54","53","8","54","0","2","0","52","718","115","443","122","258","166","218","338","119","219","8","8","11","6","3","0","119","119","137","95","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/buf/MessageBytes.java""","2","2","2","1","13","0","10","2","2","2","5","38","38","36","11","38","0","2","1","35","649","66","416","82","290","167","222","309","82","227","8","7","12","8","3","0","100","85","109","66","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/buf/StringCache.java""","3","3","3","1","19","0","14","3","3","8","14","25","25","17","5","25","0","0","6","19","681","111","417","135","281","153","213","305","122","183","14","14","16","9","6","0","85","85","94","49","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/buf/UDecoder.java""","4","3","5","1","18","1","14","2","1","3","1","12","12","9","0","12","0","3","0","9","276","40","181","54","119","57","93","136","47","89","11","11","17","8","3","0","48","46","67","23","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/buf/UEncoder.java""","3","3","3","1","16","0","12","3","1","0","1","7","7","7","4","7","0","1","0","6","174","21","103","27","67","51","64","88","26","62","10","10","12","1","6","1","23","23","25","7","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/collections/MultiMap.java""","2","2","2","1","10","0","6","3","2","0","2","14","14","14","7","14","2","0","0","12","236","29","109","33","54","98","61","91","39","52","4","4","4","4","2","1","28","28","28","25","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/collections/MultiMapNamesEnumeration.java""","2","2","2","2","10","0","7","2","1","0","0","4","4","4","4","4","1","1","0","2","81","9","39","13","18","33","24","32","13","19","5","5","5","5","3","1","8","8","8","8","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/digester/AbstractRulesImpl.java""","1","1","1","1","10","0","4","6","1","0","0","5","9","9","2","9","0","0","1","8","151","26","31","14","9","94","15","23","14","9","3","3","3","1","1","3","7","7","7","5","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/digester/CallMethodRule.java""","2","2","3","1","25","1","13","10","1","0","0","17","17","17","7","17","0","0","1","16","586","78","240","60","143","269","122","173","47","126","17","17","21","5","3","1","50","50","54","21","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/digester/Digester.java""","1","1","1","1","17","2","7","8","2","0","2","125","125","125","31","125","1","2","2","120","2787","571","1044","320","569","1178","412","647","242","405","18","18","20","4","4","1","233","233","240","142","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/digester/FactoryCreateRule.java""","2","2","2","1","19","2","8","8","1","0","0","15","15","15","5","15","0","0","1","14","403","85","143","43","77","175","53","86","30","56","9","9","9","3","4","1","33","33","35","17","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/digester/GenericParser.java""","3","3","3","1","27","2","20","5","1","1","3","1","1","0","0","1","0","0","0","1","87","14","37","25","15","38","20","24","18","6","3","3","3","1","2","1","3","3","3","1","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/digester/NodeCreateRule.java""","2","2","2","1","23","2","11","9","2","0","0","11","11","11","7","11","0","0","0","11","441","88","154","56","85","199","73","100","44","56","5","5","7","1","3","1","25","25","28","11","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/digester/RuleSet.java""","0","0","0","0","0","0","0","0","1","0","0","0","2","2","0","2","0","0","0","2","67","14","5","4","0","48","3","4","4","0","0","0","0","0","0","10","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/digester/RulesBase.java""","2","2","3","1","18","2","9","7","1","0","0","9","9","9","4","9","0","0","1","8","277","63","97","32","56","117","44","69","31","38","7","7","9","3","5","1","24","24","29","11","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/digester/SetNextRule.java""","1","1","1","1","18","1","5","10","1","0","0","8","8","8","3","8","0","0","0","8","225","46","58","23","30","121","24","35","17","18","3","3","3","1","2","2","10","10","10","8","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/digester/SetPropertiesRule.java""","3","3","3","1","29","2","14","12","1","0","0","7","7","7","2","7","0","0","0","7","277","47","109","26","68","121","57","81","28","53","12","12","14","4","4","1","23","23","26","10","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/digester/SetPropertyRule.java""","2","2","3","1","24","2","11","10","1","0","0","4","4","4","2","4","0","0","0","4","164","36","56","20","34","72","27","38","17","21","7","7","9","1","2","1","10","10","12","4","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/digester/SetRootRule.java""","1","1","1","1","18","1","5","10","1","0","0","8","8","8","3","8","0","0","0","8","226","47","58","23","30","121","24","35","17","18","3","3","3","1","2","2","10","10","10","8","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/digester/SetTopRule.java""","1","1","1","1","18","2","5","10","1","0","0","8","8","8","3","8","0","0","0","8","226","48","58","23","30","120","24","35","17","18","3","3","3","1","2","2","10","10","10","8","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/digester/WithDefaultsRulesWrapper.java""","1","1","1","1","7","0","5","2","1","0","0","11","11","11","3","11","0","0","0","11","160","22","64","22","30","74","30","47","22","25","3","3","3","1","1","1","16","16","17","11","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/http/ContentType.java""","4","4","10","3","30","2","20","7","1","2","0","2","2","0","0","2","0","0","0","2","96","12","44","10","34","40","19","29","10","19","5","5","13","3","2","1","9","9","20","6","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/http/Cookies.java""","5","4","8","2","32","2","20","9","1","5","2","13","13","8","4","13","0","6","1","6","490","58","287","55","214","153","142","205","55","150","28","26","48","17","5","1","65","63","104","38","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/http/MimeHeaders.java""","1","1","1","1","8","0","6","2","4","0","1","32","32","32","15","32","1","4","0","27","477","59","230","76","114","188","127","184","82","102","5","5","5","5","4","1","58","58","60","44","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/http/fileupload/FileItem.java""","0","0","0","0","0","0","0","0","1","0","0","0","15","15","0","15","15","0","0","0","223","37","24","23","0","162","22","23","23","0","0","0","0","0","0","7","0","0","0","0","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/http/fileupload/MultipartStream.java""","2","2","2","1","18","0","9","8","5","1","12","34","34","33","18","34","7","3","2","22","1031","117","391","120","213","523","183","267","96","171","7","7","8","6","4","1","83","83","86","61","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/http/mapper/Mapper.java""","4","4","5","2","28","1","21","5","6","12","1","41","41","29","18","41","0","17","3","21","1467","203","910","250","626","357","461","672","234","438","25","25","36","11","6","0","202","202","223","102","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/modeler/AttributeInfo.java""","1","1","1","1","6","0","4","2","1","0","1","14","14","14","6","14","1","1","0","12","164","34","72","26","38","58","33","53","26","27","3","3","3","1","2","1","19","19","19","14","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/modeler/BaseModelMBean.java""","3","3","3","1","22","1","12","8","2","1","3","35","35","34","8","35","2","0","1","32","1178","161","486","141","310","534","195","311","104","207","13","13","14","12","3","1","117","117","120","53","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/modeler/Registry.java""","3","3","3","1","20","1","12","6","1","2","3","35","35","33","7","35","0","4","0","31","902","109","484","120","294","310","222","343","108","235","11","11","12","6","3","1","120","120","129","64","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/modeler/modules/MbeansDescriptorsIntrospectionSource.java""","5","5","6","3","28","1","19","7","1","1","5","11","11","10","5","11","0","3","1","7","421","46","275","77","189","100","141","198","69","129","20","20","23","15","5","0","56","56","67","35","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/net/AprEndpoint.java""","2","2","3","1","12","0","9","2","9","0","1","81","83","83","58","83","0","0","10","73","1457","223","845","211","588","389","460","698","221","477","27","27","35","9","6","0","221","221","248","106","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/net/DefaultServerSocketFactory.java""","1","1","1","1","4","0","3","0","1","0","0","6","6","6","0","6","1","0","0","5","75","13","32","21","4","30","7","14","10","4","1","1","1","1","0","1","6","6","6","6","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/net/DefaultServerSocketFactory.java""","1","1","1","1","4","0","3","0","1","0","0","6","6","6","0","6","1","0","0","5","75","13","32","21","4","30","7","14","10","4","1","1","1","1","0","1","6","6","6","6","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/net/NioEndpoint.java""","2","2","3","1","9","0","8","1","13","0","4","119","124","124","53","124","0","0","14","110","1604","200","1139","311","805","294","637","954","320","634","22","22","27","8","7","0","334","334","378","140","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/net/ServerSocketFactory.java""","1","1","2","1","11","0","4","6","1","1","1","4","9","8","1","9","0","0","1","8","174","23","40","25","9","111","17","25","18","7","3","3","3","1","1","3","7","7","8","4","minor"
"48146","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48146 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48146  some misspellings I can find in the ""org.apache.tomcat"" package","misspel find apach tomcat packag","","","""java/org/apache/tomcat/util/net/jsse/JSSESocketFactory.java""","4","4","5","1","28","2","21","4","2","0","9","23","23","23","8","23","1","3","12","7","822","91","564","190","348","169","268","377","152","225","14","14","16","11","7","0","112","112","120","43","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/NamingEntry.java""","1","1","1","1","5","0","5","0","1","0","4","3","3","3","3","3","0","0","0","3","83","26","27","14","12","30","14","19","12","7","2","2","3","1","1","1","4","4","5","3","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/NamingService.java""","1","1","1","1","13","2","9","2","1","0","0","10","10","10","4","10","0","0","0","10","230","65","108","32","69","57","49","68","27","41","5","5","6","1","2","1","18","18","19","10","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/NamingServiceMBean.java""","0","0","0","0","0","0","0","0","1","0","7","0","6","6","0","6","0","0","0","6","98","29","18","17","7","51","14","15","15","0","0","0","0","0","0","3","0","0","0","0","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/ResourceRef.java""","2","2","2","1","19","0","13","5","1","0","4","4","4","4","0","4","0","0","0","4","170","38","71","27","42","61","40","51","20","31","4","4","4","3","2","1","10","10","10","6","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/factory/EjbFactory.java""","12","12","12","4","116","7","74","35","1","0","0","1","1","1","0","1","0","0","0","1","176","27","87","36","57","62","41","54","26","28","12","12","12","4","4","1","12","12","12","4","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/factory/OpenEjbFactory.java""","4","4","4","1","36","9","21","6","1","0","1","1","1","1","0","1","0","0","0","1","90","24","35","23","15","31","22","27","20","7","4","4","4","1","2","1","4","4","4","1","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/factory/OpenEjbFactory.java""","4","4","4","1","36","9","21","6","1","0","1","1","1","1","0","1","0","0","0","1","90","24","35","23","15","31","22","27","20","7","4","4","4","1","2","1","4","4","4","1","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/factory/ResourceEnvFactory.java""","10","10","10","3","66","3","55","8","1","0","0","1","1","1","0","1","0","0","0","1","125","23","67","28","41","35","31","42","20","22","10","10","10","3","5","1","10","10","10","3","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/factory/TransactionFactory.java""","10","10","10","3","66","4","55","7","1","0","0","1","1","1","0","1","0","0","0","1","125","24","67","28","41","34","31","42","20","22","10","10","10","3","5","1","10","10","10","3","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/resources/BaseDirContext.java""","1","1","1","1","14","0","5","9","2","0","1","57","78","78","10","78","0","1","3","74","1396","202","375","193","130","822","147","227","127","100","7","7","11","3","2","2","77","77","81","65","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/resources/DirContextURLConnection.java""","4","4","4","2","20","2","14","3","1","0","0","14","14","14","7","14","0","0","1","13","440","93","244","90","130","104","108","169","69","100","10","10","10","8","5","0","60","60","61","40","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/resources/FileDirContext.java""","2","2","2","1","19","1","8","9","3","0","2","42","42","42","8","42","0","0","6","36","1113","208","424","167","227","482","175","273","109","164","13","13","14","8","4","1","94","94","98","54","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/resources/ProxyDirContext.java""","1","1","2","1","19","0","7","11","1","0","3","69","69","69","12","69","0","0","7","62","1630","203","583","208","306","846","233","363","139","224","16","16","23","7","4","1","127","127","139","91","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/resources/Resource.java""","1","1","1","1","6","0","3","2","1","0","0","7","7","7","2","7","0","0","0","7","112","29","32","15","10","51","13","22","14","8","2","2","2","1","1","2","8","8","8","7","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/resources/ResourceCache.java""","2","2","2","1","14","0","10","3","1","1","0","19","19","18","10","19","0","3","0","16","423","86","222","63","147","116","114","166","63","103","15","15","15","9","5","1","52","52","55","33","minor"
"48147","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48147 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48147  some misspellings I can find in the ""org.apache.naming"" package","misspel find apach name packag","","","""java/org/apache/naming/resources/WARDirContext.java""","1","1","1","1","17","0","7","9","3","0","1","43","43","43","6","43","0","0","8","35","995","169","374","169","182","452","164","245","116","129","7","7","7","5","5","1","78","78","81","51","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/Constants.java""","0","0","0","0","0","0","0","0","1","0","33","0","0","0","0","0","0","0","0","0","212","29","81","76","44","108","37","38","38","0","0","0","0","0","0","1","0","0","0","0","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/EmbeddedServletOptions.java""","3","3","3","1","13","0","10","2","1","0","0","33","33","33","28","33","0","0","0","33","654","99","375","104","235","180","161","266","101","165","71","71","75","1","3","0","104","104","109","33","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/EmbeddedServletOptions.java""","3","3","3","1","13","0","10","2","1","0","0","33","33","33","28","33","0","0","0","33","654","99","375","104","235","180","161","266","101","165","71","71","75","1","3","0","104","104","109","33","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/JasperException.java""","1","1","1","1","5","0","3","2","1","0","0","3","3","3","0","3","0","0","0","3","46","5","12","5","3","29","4","8","5","3","1","1","1","1","0","2","3","3","3","3","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/JspC.java""","2","2","3","1","13","0","10","2","1","1","34","80","80","79","47","80","0","0","11","69","1420","167","947","274","603","306","465","689","263","426","36","36","36","29","5","0","225","225","240","138","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/JspCompilationContext.java""","2","2","2","1","10","0","7","2","1","2","1","54","54","52","30","54","0","0","6","48","745","95","480","143","258","170","216","328","128","200","13","11","17","9","6","0","118","116","126","64","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/Options.java""","0","0","0","0","0","0","0","0","1","0","0","0","28","28","0","28","0","0","0","28","197","34","37","36","0","126","35","36","36","0","0","0","0","0","0","3","0","0","0","0","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/Collector.java""","1","1","2","1","8","0","7","0","2","1","0","16","16","15","6","16","0","1","0","15","217","32","149","52","82","36","73","105","39","66","5","5","14","4","3","0","30","30","43","21","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/Compiler.java""","4","4","4","2","32","3","20","8","1","0","0","14","15","15","8","15","0","1","2","12","550","78","322","81","210","150","155","222","73","149","18","18","20","13","4","0","65","65","69","28","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/ELFunctionMapper.java""","2","2","2","1","13","1","11","1","3","1","0","16","16","15","6","16","0","4","0","12","291","38","192","66","112","63","103","143","57","86","12","12","12","5","5","0","37","37","40","23","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","36","3","27","5","12","6","4","112","112","106","47","112","11","51","0","50","4235","511","3028","528","2348","723","1838","2332","485","1847","21","21","28","20","5","0","498","492","557","202","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/JarScannerFactory.java""","1","1","1","1","7","0","5","2","1","1","0","2","2","1","0","2","0","1","0","1","52","8","15","8","4","29","6","10","7","3","2","2","2","1","1","2","3","3","3","2","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/JspConfig.java""","4","4","5","2","21","2","17","1","3","0","1","20","20","20","21","20","1","4","0","15","535","74","399","125","264","64","191","280","117","163","26","26","31","10","6","0","85","85","101","49","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/JspDocumentParser.java""","5","5","6","1","37","2","33","2","2","3","3","31","31","28","17","31","1","13","0","17","1456","125","1086","195","814","253","330","499","140","359","39","39","46","12","5","0","171","171","208","51","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/JspReader.java""","3","3","3","1","18","1","12","5","1","0","0","27","27","27","9","27","20","5","0","2","625","75","357","94","223","195","179","260","83","177","12","12","17","6","5","1","84","84","99","52","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/JspRuntimeContext.java""","2","2","3","1","19","1","11","6","1","0","0","16","16","16","12","16","0","2","0","14","450","60","246","72","150","144","124","172","74","98","13","13","15","3","5","1","45","45","50","18","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/JspUtil.java""","4","3","4","2","21","1","15","4","2","37","6","40","40","3","3","40","2","2","0","36","974","94","663","150","462","218","315","473","134","339","17","17","18","11","4","0","167","159","191","91","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/Node.java""","1","1","1","1","5","0","4","0","40","0","1","298","299","299","92","299","4","2","2","291","2570","461","1572","602","621","542","633","1030","506","524","6","6","6","6","5","0","364","360","375","323","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/TagFileProcessor.java""","3","3","4","1","23","1","17","3","4","1","8","22","22","21","22","22","6","4","0","12","704","102","477","192","328","131","215","295","135","160","18","18","26","4","3","0","76","76","96","25","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/TagLibraryInfoImpl.java""","8","8","10","1","40","3","33","4","1","0","0","16","16","16","6","16","4","7","0","5","775","80","581","170","431","120","284","424","155","269","21","21","33","4","4","0","138","138","171","19","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/TextOptimizer.java""","1","1","1","1","5","0","4","0","2","1","0","11","11","10","6","11","0","1","0","10","123","21","68","32","24","34","25","41","23","18","3","3","5","1","1","1","14","14","16","11","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/TldLocationsCache.java""","5","5","5","2","24","1","19","4","2","2","10","12","12","10","4","12","0","6","0","6","550","42","334","92","228","174","182","248","86","162","16","16","17","6","5","1","60","60","65","25","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/Validator.java""","4","4","6","1","26","2","21","2","8","3","15","59","59","56","13","59","5","17","0","37","1837","231","1357","395","964","251","549","830","284","546","44","44","51","6","8","0","277","277","381","84","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/compiler/tagplugin/TagPluginContext.java""","0","0","0","0","0","0","0","0","1","0","0","0","14","14","0","14","14","0","0","0","124","18","17","16","0","89","15","16","16","0","0","0","0","0","0","5","0","0","0","0","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/runtime/BodyContentImpl.java""","1","1","2","1","13","0","6","7","1","0","2","37","37","37","4","37","1","2","0","34","637","56","285","88","137","296","103","171","53","118","5","5","9","4","2","1","73","73","78","40","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/runtime/JspContextWrapper.java""","1","1","1","1","8","0","6","1","1","0","0","39","39","39","7","39","0","4","0","35","493","78","334","125","147","81","127","202","85","117","9","7","10","3","3","0","76","74","77","41","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/servlet/JspServlet.java""","3","3","3","2","26","1","17","7","1","0","0","10","10","10","5","10","1","2","0","7","355","45","205","73","120","110","97","133","55","78","10","10","10","8","3","1","37","37","37","20","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/servlet/JspServletWrapper.java""","3","3","4","1","21","1","16","3","1","0","0","19","19","19","15","19","0","0","1","18","523","55","357","86","217","113","148","218","73","145","28","28","30","9","3","0","73","73","77","35","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/tagplugins/jstl/core/Import.java""","11","11","11","1","352","55","257","46","1","0","0","1","1","1","0","1","0","0","0","1","382","63","263","30","243","62","213","225","30","195","11","11","11","1","2","0","11","11","11","1","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/util/Enumerator.java""","1","1","1","1","12","2","4","6","1","0","0","8","8","8","1","8","0","0","0","8","176","49","45","19","17","82","22","33","19","14","3","3","3","1","2","2","10","10","10","8","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/xmlparser/UTF8Reader.java""","7","7","7","4","45","2","31","11","1","0","2","12","12","12","5","12","0","3","0","9","643","60","405","84","285","186","199","277","64","213","44","44","44","39","5","0","86","86","86","54","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/jasper/xmlparser/XMLEncodingDetector.java""","6","6","8","3","41","2","27","11","2","1","5","35","35","34","31","35","2","10","0","23","1645","134","1014","202","692","501","482","693","174","519","31","29","39","20","6","0","230","228","294","118","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/juli/ClassLoaderLogManager.java""","3","3","4","1","21","1","16","4","7","1","0","21","21","20","9","21","6","0","5","10","588","84","377","129","231","127","178","258","113","145","15","15","19","7","5","0","77","77","84","34","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/juli/OneLineFormatter.java""","2","2","2","1","23","2","16","5","1","0","3","3","3","3","6","3","0","1","0","2","127","17","71","28","46","44","49","58","25","33","3","3","3","1","2","1","7","7","7","3","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/juli/logging/DirectJDKLog.java""","1","1","1","1","3","0","3","0","1","2","2","22","22","20","4","22","2","1","0","19","182","33","111","41","48","38","45","76","41","35","4","4","5","1","2","0","25","25","26","22","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/juli/logging/DirectJDKLog.java""","1","1","1","1","3","0","3","0","1","2","2","22","22","20","4","22","2","1","0","19","182","33","111","41","48","38","45","76","41","35","4","4","5","1","2","0","25","25","26","22","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/juli/logging/Log.java""","0","0","0","0","0","0","0","0","1","0","0","0","18","18","0","18","0","0","0","18","234","45","21","20","0","168","19","20","20","0","0","0","0","0","0","8","0","0","0","0","minor"
"48148","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48148 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48148  some misspellings I  found in the ""org.apache.jasper"" package and ""org.apache.juli"" package","misspel found apach jasper packag apach juli packag","","","""java/org/apache/juli/logging/LogFactory.java""","1","1","1","1","12","0","3","9","1","6","5","15","15","9","1","15","1","1","0","13","363","50","67","33","23","247","24","41","25","16","2","2","2","1","1","4","16","16","16","15","minor"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/ActionCode.java""","1","1","1","1","5","0","3","2","1","0","29","2","2","2","1","2","0","1","0","1","201","59","40","35","31","102","33","36","34","2","1","1","1","1","0","3","2","2","2","2","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/ProtocolHandler.java""","0","0","0","0","0","0","0","0","1","0","0","0","10","10","0","10","0","0","0","10","85","20","19","18","0","46","12","13","13","0","0","0","0","0","0","2","0","0","0","0","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/Request.java""","1","1","1","1","4","0","3","0","1","0","0","59","59","59","34","59","0","0","0","59","536","137","275","109","136","124","141","210","107","103","4","4","5","1","2","0","69","69","72","59","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/RequestGroupInfo.java""","2","2","2","1","7","0","7","0","1","0","0","15","15","15","7","15","0","0","0","15","164","19","124","43","77","21","89","120","55","65","3","3","3","1","2","0","30","30","30","15","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/RequestInfo.java""","1","1","1","1","3","0","3","0","1","0","0","37","37","37","14","37","1","0","0","36","247","51","152","57","60","44","68","111","57","54","3","3","3","1","2","0","42","42","42","37","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/Response.java""","1","1","1","1","8","0","5","1","1","0","1","45","45","45","17","45","0","1","0","44","592","141","292","85","169","161","139","210","83","127","8","8","18","5","2","1","70","70","86","58","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/ajp/AjpAprProcessor.java""","6","5","6","2","43","5","30","8","3","0","5","22","22","22","28","22","0","1","7","14","1330","261","755","167","567","317","427","557","153","404","32","23","37","12","5","0","141","129","153","60","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/ajp/AjpAprProtocol.java""","1","1","1","1","5","0","4","0","3","0","2","60","60","60","18","60","0","0","3","57","504","95","328","119","206","82","173","269","116","153","6","6","6","5","3","0","95","95","95","64","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/ajp/AjpProcessor.java""","5","5","6","2","38","5","26","7","3","0","5","23","23","23","30","23","0","1","6","16","1263","257","691","167","517","318","404","524","155","369","32","22","37","12","5","0","131","119","141","55","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/ajp/AjpProtocol.java""","1","1","1","1","5","0","4","0","3","0","2","53","53","53","19","53","0","0","3","50","491","93","318","114","199","80","169","257","111","146","5","5","5","4","3","0","87","87","87","56","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/http11/AbstractHttp11Processor.java""","2","1","2","1","11","0","6","4","1","0","3","37","37","37","29","37","0","3","3","31","729","149","297","108","178","292","146","219","107","112","10","10","13","10","4","1","75","73","86","54","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/http11/AbstractHttp11Processor.java""","2","1","2","1","11","0","6","4","1","0","3","37","37","37","29","37","0","3","3","31","729","149","297","108","178","292","146","219","107","112","10","10","13","10","4","1","75","73","86","54","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/http11/AbstractInputBuffer.java""","1","1","1","1","14","2","7","4","1","0","1","11","14","14","13","14","0","0","1","13","327","103","111","45","52","113","71","92","44","48","4","4","4","4","3","1","20","20","21","14","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/http11/AbstractOutputBuffer.java""","2","2","2","1","18","2","9","6","2","0","1","22","24","24","10","24","0","0","6","18","566","139","232","65","139","196","138","187","67","120","7","5","7","4","3","1","50","48","52","25","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/http11/Http11AprProcessor.java""","4","4","5","2","30","3","19","7","1","0","2","47","47","47","34","47","0","4","7","36","1802","319","1013","228","738","481","544","769","231","538","55","55","66","10","6","0","233","231","279","94","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/http11/Http11NioProcessor.java""","11","11","14","4","66","8","47","12","1","0","0","17","17","17","10","17","0","0","7","10","1304","198","857","162","665","267","472","665","162","503","62","62","72","31","7","0","203","203","250","80","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/http11/Http11Processor.java""","12","12","14","2","74","9","51","12","2","0","0","12","12","12","5","12","0","0","6","6","1025","176","657","112","505","195","353","495","114","381","47","47","53","9","4","0","146","146","174","35","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/http11/InternalAprInputBuffer.java""","5","5","6","1","35","6","20","7","2","0","1","18","18","18","14","18","0","0","1","17","843","217","410","80","275","216","209","308","74","234","35","35","43","6","4","1","98","98","114","34","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/http11/InternalAprOutputBuffer.java""","2","2","2","1","17","2","9","5","2","0","1","29","29","29","12","29","0","0","7","22","734","195","295","84","175","245","167","231","78","153","6","5","6","4","3","1","64","62","66","32","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/http11/InternalInputBuffer.java""","8","8","10","1","55","12","32","11","2","0","0","8","8","8","0","8","0","0","2","6","512","125","271","42","193","116","124","195","34","161","31","31","39","4","4","0","70","70","82","13","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/http11/InternalNioInputBuffer.java""","4","4","5","3","25","2","16","6","5","0","0","24","20","24","21","24","0","2","2","20","737","116","441","76","302","191","222","331","68","263","41","41","49","29","5","0","110","110","126","74","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/http11/InternalNioOutputBuffer.java""","2","2","2","1","12","1","7","3","2","0","0","16","16","16","5","16","0","2","2","12","328","74","153","56","83","103","82","116","47","69","8","8","8","3","3","1","32","32","33","18","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/http11/InternalOutputBuffer.java""","1","1","1","1","12","1","6","4","2","0","0","13","13","13","3","13","0","0","1","12","286","84","109","39","50","93","45","68","25","43","3","3","3","1","2","1","21","21","21","13","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/coyote/http11/filters/VoidInputFilter.java""","1","1","1","1","7","0","2","4","1","0","2","7","7","7","0","7","0","0","0","7","126","36","33","19","7","57","13","21","16","5","1","1","1","1","0","2","7","7","7","7","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/el/parser/AstValue.java""","2","2","3","1","13","0","11","0","2","0","1","9","9","9","2","9","0","2","0","7","186","26","132","56","77","28","69","92","46","46","6","6","8","4","2","0","22","22","28","14","normal"
"48149","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48149 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48149  some misspellings I  found in the ""org.apache.coyote"" package and ""org.apache.el"" package","misspel found apach coyot packag apach packag","","","""java/org/apache/el/parser/ParseException.java""","5","3","5","1","28","0","21","7","1","0","0","5","5","5","5","5","0","0","1","4","199","13","114","23","79","72","70","88","23","65","12","10","13","4","3","1","25","17","26","8","normal"
"48150","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48150 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48150  some misspellings I found in the ""javax.servlet"" package","misspel found javax servlet packag","","","""java/javax/servlet/GenericServlet.java""","1","1","1","1","15","0","2","12","1","0","0","12","13","13","1","13","0","0","0","13","326","65","44","20","10","217","15","28","18","10","1","1","1","1","0","5","12","12","12","12","minor"
"48150","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48150 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48150  some misspellings I found in the ""javax.servlet"" package","misspel found javax servlet packag","","","""java/javax/servlet/http/HttpServlet.java""","2","2","2","1","29","1","10","16","3","1","13","22","22","21","4","22","4","2","9","7","822","90","286","121","171","446","147","212","95","117","19","19","19","1","3","2","62","62","63","22","minor"
"48150","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48150 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48150  some misspellings I found in the ""javax.servlet"" package","misspel found javax servlet packag","","","""java/javax/servlet/jsp/JspWriter.java""","1","1","1","1","7","0","2","5","1","0","3","3","28","28","2","28","0","0","1","27","445","70","42","38","7","333","36","40","36","4","1","1","1","1","0","8","3","3","3","3","minor"
"48150","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48150 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48150  some misspellings I found in the ""javax.servlet"" package","misspel found javax servlet packag","","","""java/javax/servlet/jsp/PageContext.java""","1","1","1","1","12","0","4","8","1","0","13","3","17","17","0","17","0","0","0","17","524","65","62","50","20","398","39","43","41","2","1","1","1","1","0","6","3","3","3","3","minor"
"48150","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48150 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48150  some misspellings I found in the ""javax.servlet"" package","misspel found javax servlet packag","","","""java/javax/servlet/jsp/SkipPageException.java""","1","1","1","1","7","0","3","4","1","0","0","4","4","4","0","4","0","0","0","4","76","7","17","7","4","52","5","10","6","4","1","1","1","1","0","3","4","4","4","4","minor"
"48150","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48150 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48150  some misspellings I found in the ""javax.servlet"" package","misspel found javax servlet packag","","","""java/javax/servlet/jsp/tagext/JspFragment.java""","0","0","0","0","0","0","0","0","1","0","0","0","2","2","0","2","0","0","0","2","83","6","9","8","0","68","6","7","7","0","0","0","0","0","0","8","0","0","0","0","minor"
"48150","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48150 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48150  some misspellings I found in the ""javax.servlet"" package","misspel found javax servlet packag","","","""java/javax/servlet/jsp/tagext/PageData.java""","1","1","1","1","7","0","2","5","1","0","0","1","2","2","0","2","0","0","0","2","50","7","7","5","0","36","3","5","5","0","1","1","1","1","0","5","1","1","1","1","minor"
"48150","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48150 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48150  some misspellings I found in the ""javax.servlet"" package","misspel found javax servlet packag","","","""java/javax/servlet/jsp/tagext/SimpleTagSupport.java""","1","1","2","1","17","0","5","11","1","1","0","9","9","8","3","9","0","0","2","7","211","18","61","20","25","132","24","39","19","20","8","8","13","5","2","2","16","16","21","13","minor"
"48150","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48150 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48150  some misspellings I found in the ""javax.servlet"" package","misspel found javax servlet packag","","","""java/javax/servlet/jsp/tagext/SimpleTagSupport.java""","1","1","2","1","17","0","5","11","1","1","0","9","9","8","3","9","0","0","2","7","211","18","61","20","25","132","24","39","19","20","8","8","13","5","2","2","16","16","21","13","minor"
"48150","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48150 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48150  some misspellings I found in the ""javax.servlet"" package","misspel found javax servlet packag","","","""java/javax/servlet/jsp/tagext/TagLibraryInfo.java""","1","1","1","1","12","0","5","7","1","0","0","13","14","14","10","14","0","0","1","13","303","50","83","30","32","175","43","66","33","33","4","4","5","4","2","2","22","22","25","22","minor"
"48150","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48150 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48150  some misspellings I found in the ""javax.servlet"" package","misspel found javax servlet packag","","","""java/javax/servlet/jsp/tagext/TagLibraryValidator.java""","1","1","1","1","10","0","3","7","1","0","0","5","5","5","1","5","0","0","0","5","144","12","20","10","4","112","7","13","9","4","1","1","1","1","0","6","5","5","5","5","minor"
"48150","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48150 Correct JavaDoc typos. Patch provided by gingyang.xu","Bug 48150  some misspellings I found in the ""javax.servlet"" package","misspel found javax servlet packag","","","""java/javax/servlet/jsp/tagext/TagSupport.java""","1","1","1","1","13","0","5","8","1","1","0","15","15","14","4","15","0","0","0","15","279","30","89","28","38","160","37","60","28","32","5","5","10","5","2","2","24","24","29","19","minor"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""java/org/apache/catalina/startup/DefaultJarScanner.java""","3","3","3","1","15","1","12","1","1","0","4","9","9","9","3","9","0","2","0","7","214","28","141","56","80","45","65","96","50","46","13","13","15","1","6","0","30","30","35","9","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""java/org/apache/tomcat/JarScannerCallback.java""","0","0","0","0","0","0","0","0","1","0","0","0","2","2","0","2","0","0","0","2","18","5","8","7","0","5","6","7","7","0","0","0","0","0","0","1","0","0","0","0","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/jdbc-pool/test/org/apache/tomcat/jdbc/test/TestConcurrency.java""","3","3","3","1","22","0","22","1","4","0","1","9","9","9","1","9","0","0","1","8","194","13","180","34","131","7","123","155","41","114","7","7","7","1","3","0","31","31","31","9","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/jdbc-pool/test/org/apache/tomcat/jdbc/test/TestException.java""","1","1","1","1","5","0","4","0","2","0","0","3","3","3","0","3","0","0","0","3","37","12","24","12","7","1","10","16","11","5","2","2","2","1","1","0","4","4","4","3","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/jdbc-pool/test/org/apache/tomcat/jdbc/test/driver/ResultSet.java""","1","1","1","1","4","0","2","0","1","0","0","189","189","189","1","189","0","0","0","189","1183","280","725","440","97","178","118","308","213","95","1","1","1","1","0","0","189","189","189","189","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/examples/spring/TomcatSpring.java""","1","1","1","1","10","1","8","0","2","1","0","3","3","2","0","3","1","0","0","2","57","11","27","13","13","19","16","21","14","7","2","2","2","1","1","1","4","4","4","3","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/addons/Filesystem.java""","1","1","1","1","3","0","3","0","1","0","0","2","2","2","0","2","0","0","0","2","26","4","13","8","2","9","7","10","8","2","1","1","1","1","0","1","2","2","2","2","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/addons/UserAuthentication.java""","0","0","0","0","0","0","0","0","1","0","0","0","2","2","0","2","0","0","0","2","47","6","13","12","0","28","7","8","8","0","0","0","0","0","0","2","0","0","0","0","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/addons/UserSessionManager.java""","0","0","0","0","0","0","0","0","1","0","0","0","7","7","0","7","7","0","0","0","45","15","13","12","0","17","11","12","12","0","0","0","0","0","0","1","0","0","0","0","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/addons/UserTemplateClassMapper.java""","0","0","0","0","0","0","0","0","1","0","0","0","2","2","0","2","0","0","0","2","39","4","11","10","0","24","7","8","8","0","0","0","0","0","0","2","0","0","0","0","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/integration/ObjectManager.java""","1","1","1","1","8","0","5","3","1","0","1","5","5","5","1","5","0","0","0","5","83","9","33","13","13","41","12","25","15","10","3","3","3","3","2","1","9","9","9","7","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/integration/jmx/JmxObjectManagerSpi.java""","1","1","1","1","4","0","4","0","1","0","0","4","4","4","2","4","0","0","0","4","41","8","26","12","9","7","11","17","11","6","2","2","2","1","1","0","5","5","5","4","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/integration/simple/LocalFilesystem.java""","1","1","1","1","3","0","3","0","1","0","0","1","1","1","0","1","0","0","0","1","16","4","10","7","1","2","6","8","7","1","1","1","1","1","0","0","1","1","1","1","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/integration/simple/LocalFilesystem.java""","1","1","1","1","3","0","3","0","1","0","0","1","1","1","0","1","0","0","0","1","16","4","10","7","1","2","6","8","7","1","1","1","1","1","0","0","1","1","1","1","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/integration/simple/Main.java""","4","4","4","1","33","7","21","5","1","1","0","1","1","0","0","1","0","0","0","1","50","10","25","9","15","15","14","19","8","11","4","4","4","1","2","1","4","4","4","1","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/integration/simple/ServletHelper.java""","2","2","2","1","21","5","13","3","1","2","0","2","2","0","0","2","0","0","0","2","60","18","34","20","19","8","22","28","20","8","3","3","3","1","2","0","5","5","5","2","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/integration/simple/SimpleObjectManager.java""","2","2","2","1","11","0","9","1","1","0","1","13","13","13","3","13","0","2","0","11","210","24","138","49","79","49","68","99","46","53","8","8","8","4","3","0","29","29","29","19","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/integration/simple/SimpleObjectManager.java""","2","2","2","1","11","0","9","1","1","0","1","13","13","13","3","13","0","2","0","11","210","24","138","49","79","49","68","99","46","53","8","8","8","4","3","0","29","29","29","19","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/lite/BodyWriter.java""","1","1","1","1","10","1","6","1","4","0","3","40","40","40","20","40","0","3","2","35","655","188","314","93","183","155","153","228","76","152","6","6","6","3","2","0","74","74","75","42","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/lite/Connector.java""","0","0","0","0","0","0","0","0","1","0","0","0","17","17","0","17","1","0","0","16","89","23","25","24","0","41","23","24","24","0","0","0","0","0","0","2","0","0","0","0","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/lite/ContextPreinitListener.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","0","0","0","1","23","3","5","4","0","15","3","4","4","0","0","0","0","0","0","3","0","0","0","0","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/lite/WebappContextMapper.java""","2","2","2","1","10","0","8","2","1","0","0","8","8","8","2","8","0","1","0","7","132","18","83","40","34","31","40","57","33","24","6","6","7","1","2","0","16","16","17","8","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/lite/coyote/CoyoteConnector.java""","1","1","1","1","9","1","7","0","4","2","4","38","38","36","8","38","0","0","1","37","470","101","305","115","180","65","166","219","109","110","6","6","6","3","2","0","53","53","54","40","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/lite/coyote/CoyoteConnector.java""","1","1","1","1","9","1","7","0","4","2","4","38","38","36","8","38","0","0","1","37","470","101","305","115","180","65","166","219","109","110","6","6","6","3","2","0","53","53","54","40","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/lite/webxml/ServletContextConfig.java""","1","1","1","1","3","0","3","0","7","0","6","2","2","2","47","2","0","0","0","2","144","37","78","67","31","34","59","68","66","2","1","1","1","1","0","0","2","2","2","2","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/lite/webxml/TomcatLiteWebXmlConfig.java""","2","2","2","1","18","0","10","8","1","0","0","2","2","2","0","2","0","0","1","1","64","7","28","14","11","30","12","18","11","7","3","3","3","1","1","1","5","5","5","2","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/lite/webxml/WebXml.java""","3","3","4","1","23","2","20","0","1","0","0","14","14","14","1","14","0","10","0","4","373","51","302","85","215","20","188","244","84","160","23","23","24","3","3","0","55","55","57","16","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/servlets/file/CopyUtils.java""","4","4","4","3","38","4","22","11","1","6","1","6","6","0","0","6","0","0","0","6","257","41","148","46","101","68","77","103","37","66","6","6","7","4","3","0","27","27","29","18","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/servlets/file/FileCopyUtils.java""","2","2","2","1","20","3","11","6","1","4","1","4","4","0","0","4","0","0","0","4","112","22","62","33","27","28","31","39","24","15","4","4","4","1","1","0","9","9","9","4","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/servlets/file/FileCopyUtils.java""","2","2","2","1","20","3","11","6","1","4","1","4","4","0","0","4","0","0","0","4","112","22","62","33","27","28","31","39","24","15","4","4","4","1","1","0","9","9","9","4","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/servlets/jsp/PreCompileFilter.java""","5","5","5","4","23","0","19","6","1","0","1","2","2","2","0","2","1","0","0","1","71","4","47","15","28","25","22","33","14","19","9","9","9","8","1","1","10","10","10","9","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/servlets/jsp/SingleThreadedProxyServlet.java""","2","2","2","1","15","3","8","4","1","0","0","2","2","2","3","2","0","0","0","2","61","13","28","15","12","21","14","20","15","5","3","3","3","1","2","1","4","4","4","2","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/servlets/sec/UserDB.java""","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","14","2","3","2","0","9","1","2","2","0","0","0","0","0","0","3","0","0","0","0","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/servlets/session/RandomGenerator.java""","2","2","2","1","17","1","11","5","1","0","1","15","15","15","9","15","0","0","1","14","349","50","190","60","126","109","104","145","61","84","6","6","7","4","3","1","40","40","42","20","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/servlets/util/Range.java""","4","4","5","4","28","4","20","3","1","2","0","4","4","2","3","4","0","0","0","4","146","25","92","23","62","29","44","63","21","42","8","8","8","7","4","0","18","18","21","16","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/servlets/util/UrlUtils.java""","12","12","12","10","61","9","36","18","1","1","0","1","1","0","0","1","0","0","0","1","67","12","39","8","31","18","18","31","8","23","12","12","12","10","2","0","12","12","12","10","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/util/http/HttpRequest.java""","1","1","1","1","5","0","4","0","1","0","0","35","35","35","24","35","0","1","0","34","291","73","198","72","94","20","113","154","65","89","3","3","4","1","1","0","41","41","44","35","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/java/org/apache/tomcat/util/http/HttpResponse.java""","1","1","1","1","3","0","3","0","1","0","0","18","18","18","6","18","0","0","0","18","118","24","77","30","33","17","34","55","30","25","2","2","3","1","1","0","21","21","22","18","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/test/org/apache/tomcat/lite/LiteTestHelper.java""","1","1","1","1","10","1","7","1","3","4","0","7","7","3","1","7","0","0","0","7","102","21","70","35","34","11","43","54","33","21","2","2","2","1","1","0","9","9","9","7","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/test/org/apache/tomcat/lite/PropertiesSpiTest.java""","1","1","1","1","5","1","4","0","2","0","0","5","5","5","2","5","0","0","0","5","54","17","35","17","14","2","20","27","17","10","1","1","1","1","0","0","5","5","5","5","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/test/org/apache/tomcat/lite/SimpleServlet.java""","1","1","1","1","5","0","5","0","1","0","0","2","2","2","0","2","0","0","0","2","22","3","17","10","4","2","9","12","8","4","1","1","1","1","0","0","2","2","2","2","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/test/org/apache/tomcat/test/watchdog/WatchdogTest.java""","2","2","2","1","14","1","12","0","1","0","0","5","5","5","5","5","0","0","0","5","105","18","81","30","46","6","52","66","32","34","7","7","7","3","2","0","13","13","13","9","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""modules/tomcat-lite/test/org/apache/tomcat/util/buf/UEncoderTest.java""","1","1","1","1","20","7","12","2","1","0","0","1","1","1","1","1","0","0","0","1","36","11","17","6","11","9","13","15","6","9","1","1","1","1","0","1","1","1","1","1","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""test/org/apache/TestAll.java""","1","1","1","1","25","3","12","10","1","1","0","1","1","0","0","1","0","0","0","1","43","8","25","14","10","10","21","23","14","9","1","1","1","1","0","0","1","1","1","1","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""test/org/apache/catalina/startup/SimpleHttpClient.java""","1","1","1","1","6","0","5","0","1","0","5","16","17","17","9","17","0","0","0","17","156","29","117","52","57","10","71","94","52","42","6","6","8","1","2","0","21","21","23","16","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""test/org/apache/catalina/startup/TestWebXml.java""","1","1","1","1","19","2","16","0","1","0","0","10","10","10","8","10","0","0","1","9","228","37","179","50","137","12","147","162","49","113","2","2","2","1","1","0","14","14","14","10","normal"
"48151","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48151 Add missing AL2 headers","Bug 48151  Java files that don't have AL headers","java file header","","","""test/org/apache/catalina/startup/TestWebXml.java""","1","1","1","1","19","2","16","0","1","0","0","10","10","10","8","10","0","0","1","9","228","37","179","50","137","12","147","162","49","113","2","2","2","1","1","0","14","14","14","10","normal"
"48170","89","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48170 Remove unnecessary syncs that cause issues under heavy load","Bug 48170  Unnecessary synchronization by JspFactory.getDefaultFactory contributes to stability problems","unnecessari synchron jsp factori jspfactori get default factori getdefaultfactori contribut stabil problem","I have a soak test at constant load that is initially stable.  Within the hour, an ever increasing number of blocked threads develops.  The vast majority of threads are in JSP rendering, blocked on JspFactory.getDefaultFactory().

The server eventually crashes.

We are running Java 6.

Upon code inspection, there appears to be no real reason for synchronizing the getDefaultFactory() and setDefaultFactory() as the setter is called only once upon startup when the sub-class loads.

Patching the jar, I tried three other experiments:
1) Removing the synchronized keyword entirely.
2) Locking on an inner static class instead of the JspFactory.class.
3) Using volatile for the static member variable.

Both experiments #1 and #3 showed vastly better stability.  I was able to double the throughput of the server without seeing increasing number of blocked threads.

Experiment #2 yielded the same behavior as the original code.  Thus, no other code
is synchronizing on JspFactory.class.  Rather, there seem to be some sort of contention in the java.lang.Class monitor.

Using volatile would preserve the multi-threading semantics while avoiding contributing to the instability issue.","soak constant load initi stabl within hour ever increas number block thread develop vast major thread jsp render block jsp factori jspfactori get default factori getdefaultfactori server eventu crash run java upon code inspect appear real reason synchron get default factori getdefaultfactori set default factori setdefaultfactori setter call upon startup sub class subclass load patch jar tri three experi remov synchron keyword entir lock inner static class instead jsp factori jspfactori class use volatil static member variabl experi show vastli better stabil abl doubl throughput server without see increas number block thread experi yield behavior origin code thu code synchron jsp factori jspfactori class rather seem sort content java lang class monitor use volatil would preserv multi thread multithread semant avoid contribut instabl issu","""java/javax/servlet/jsp/JspFactory.java""","1","1","1","1","8","0","2","6","1","2","1","3","7","5","0","7","0","0","0","7","158","15","25","19","3","118","13","17","15","2","1","1","1","1","0","5","3","3","3","3","major"
"48172","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48172 Potential threading issues, make fields final where possible","Bug 48172  JspRuntimeContext synch. problems.","jsp runtim context jspruntimecontext synch problem","JspRuntimeContext.jspReloadCount is synchronised when updated, but not when read by getJspReloadCount().

If the instance is accessed from multiple threads, then the returned value may not be the current value, it could be arbitrarily stale.

If this is acceptable, then the Javadoc should say so; otherwise the getter needs to be synch. (or the field needs to be volatile) Or just use AtomicInteger.

==

Various other fields are neither final nor synchronized, e.g.

classpath
codeSource
etc.

As far as I can tell, these could easily be made final as they are only written by the constructor.","jsp runtim context jspruntimecontext jsp reload count jspreloadcount synchronis updat read get jsp reload count getjspreloadcount instanc access multipl thread return valu may current valu could arbitrarili stale accept javadoc say otherwis getter need synch field need volatil use atom integ atomicinteg variou field neither final synchron classpath code sourc codesourc etc far tell could easili made final written constructor","""java/org/apache/jasper/compiler/JspRuntimeContext.java""","2","2","3","1","19","1","11","6","1","0","0","16","16","16","12","16","0","2","0","14","450","60","246","72","150","144","124","172","74","98","13","13","15","3","5","1","45","45","50","18","normal"
"48173","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48173 Use final","Bug 48173  org.apache.catalina.tribes.io.ChannelData.EMPTY_DATA_ARRAY should be final","apach catalina tribe channel data channeldata empti data array final","org.apache.catalina.tribes.io.ChannelData.EMPTY_DATA_ARRAY should be final","apach catalina tribe channel data channeldata empti data array final","""java/org/apache/catalina/tribes/io/ChannelData.java""","1","1","1","1","10","0","6","4","1","5","2","27","27","22","5","27","0","0","0","27","365","32","195","66","122","167","126","157","62","95","2","2","3","1","1","1","30","30","33","27","normal"
"48174","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48174 Use final","Bug 48174  org.apache.tomcat.jni.Address.APR_ANYADDR should be final","apach tomcat jni address apr anyaddr final","org.apache.tomcat.jni.Address.APR_ANYADDR should be final","apach tomcat jni address apr anyaddr final","""java/org/apache/tomcat/jni/Address.java""","0","0","0","0","0","0","0","0","1","8","1","0","8","0","0","8","0","0","0","8","114","11","15","14","1","88","10","11","11","0","0","0","0","0","0","6","0","0","0","0","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/core/ApplicationFilterConfig.java""","2","2","2","1","19","2","12","5","1","0","2","15","15","15","5","15","5","3","0","7","431","83","216","69","126","133","98","138","58","80","7","7","7","1","4","1","40","40","42","15","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/core/ContainerBase.java""","2","2","3","1","16","1","9","5","3","0","2","73","73","73","28","73","1","1","5","66","1628","329","774","197","477","527","357","569","191","378","13","13","19","3","4","1","204","204","238","87","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/core/StandardHost.java""","2","2","2","1","13","1","7","4","1","0","2","45","45","45","17","45","0","0","0","45","880","200","391","127","235","290","185","284","111","173","14","14","16","6","5","1","94","94","96","57","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/core/StandardWrapper.java""","2","2","2","1","16","2","10","4","1","1","5","80","80","79","27","80","0","0","4","76","1789","383","892","232","574","516","382","573","206","367","23","23","29","3","5","1","182","182","199","90","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/ha/ClusterListener.java""","1","1","1","1","3","0","3","0","1","0","2","7","9","9","1","9","0","0","0","9","116","28","41","20","15","47","19","31","18","13","3","3","3","1","2","1","11","11","11","7","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/ha/context/ReplicatedContext.java""","2","2","2","1","6","0","5","0","3","0","2","20","20","20","4","20","0","0","2","18","208","30","156","62","74","23","76","119","53","66","6","6","6","3","3","0","40","40","42","24","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/ha/deploy/FarmWarDeployer.java""","2","2","2","1","14","0","10","3","1","0","2","40","40","40","15","40","0","0","11","29","766","83","449","138","299","235","214","318","125","193","14","14","14","5","6","1","100","100","102","47","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/ha/deploy/FileMessageFactory.java""","3","3","3","1","31","0","19","11","1","2","2","8","8","6","12","8","0","1","1","6","376","32","183","47","130","167","91","123","39","84","10","10","10","7","2","1","29","29","29","14","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/ha/deploy/WarWatcher.java""","1","1","1","1","7","0","5","2","3","0","1","18","18","18","6","18","0","0","2","16","243","37","122","44","66","85","59","92","42","50","7","7","7","1","2","1","31","31","34","18","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/ha/session/BackupManager.java""","1","1","1","1","6","0","4","1","1","0","2","32","32","32","5","32","0","0","0","32","314","46","182","75","82","87","85","129","67","62","4","4","4","1","1","0","42","42","43","32","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/ha/session/DeltaManager.java""","2","2","2","1","14","0","9","5","1","0","4","91","91","91","38","91","0","0","21","70","1574","156","903","231","587","532","463","678","230","448","15","15","20","4","7","1","225","215","250","101","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/ha/session/DeltaRequest.java""","2","1","2","1","8","0","7","1","2","0","11","31","31","31","8","31","0","0","2","29","391","50","278","95","166","70","149","210","83","127","13","10","13","1","4","0","64","61","64","31","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","7","4","2","0","2","52","52","52","6","52","0","2","7","43","855","103","463","141","259","291","230","345","123","222","8","8","10","5","3","1","101","101","114","63","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/ha/session/JvmRouteBinderValve.java""","2","2","3","1","18","0","10","7","1","0","3","23","23","23","6","23","0","0","8","15","591","58","273","89","164","260","121","182","80","102","9","9","11","3","4","1","60","60","70","25","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/ha/session/SerializablePrincipal.java""","2","2","2","1","9","0","6","2","1","3","2","14","14","11","5","14","0","0","0","14","251","54","121","51","66","76","67","94","45","49","5","5","6","1","2","1","29","29","30","14","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/ha/session/SimpleTcpReplicationManager.java""","2","2","2","1","15","0","11","3","1","0","1","35","35","35","16","35","0","0","4","31","693","67","455","126","288","183","210","296","112","184","13","12","14","7","5","0","89","85","94","44","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/ha/tcp/ReplicationValve.java""","2","2","2","1","13","0","8","4","1","0","3","36","36","36","14","36","0","0","13","23","664","70","368","118","219","226","162","252","109","143","13","13","16","5","5","1","91","91","100","40","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","6","6","6","2","34","3","22","7","4","1","6","59","59","58","28","59","3","0","21","35","2485","423","1454","326","1013","610","693","1061","298","763","40","40","46","28","9","0","361","361","384","163","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/loader/WebappLoader.java""","3","3","3","1","20","3","13","4","1","0","4","46","46","46","15","46","0","7","0","39","1237","273","679","210","457","286","346","504","194","310","24","24","25","13","5","0","158","158","163","83","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/mbeans/MBeanFactory.java""","2","2","2","1","24","2","13","9","1","0","2","33","33","33","1","33","0","6","0","27","970","153","483","235","312","334","285","355","195","160","6","6","7","5","3","1","71","71","76","49","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/security/SecurityConfig.java""","2","2","2","1","12","0","8","4","1","1","4","5","5","4","2","5","0","2","0","3","134","25","60","19","35","49","21","34","16","18","3","3","4","1","2","1","12","12","13","5","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/security/SecurityUtil.java""","3","3","4","1","27","1","16","8","2","11","17","12","12","1","0","12","0","3","0","9","431","56","236","94","139","139","94","137","58","79","13","13","15","7","3","1","42","42","51","18","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/startup/Catalina.java""","2","2","2","1","19","2","13","3","3","1","1","28","28","27","8","28","0","0","5","23","742","166","413","96","284","168","195","275","85","190","13","13","15","9","3","0","77","77","79","38","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/startup/CatalinaProperties.java""","2","2","3","1","16","2","10","4","1","6","2","6","6","0","0","6","0","4","0","2","172","44","79","27","44","49","34","52","25","27","12","12","13","1","2","1","17","17","18","6","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/startup/ContextConfig.java""","5","5","5","1","33","3","23","6","3","0","12","38","38","38","10","38","0","0","24","14","1602","255","1017","233","725","333","542","752","220","532","18","18","21","10","4","0","205","205","223","54","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/startup/DefaultJarScanner.java""","3","3","3","1","15","1","12","1","1","0","4","9","9","9","3","9","0","2","0","7","231","29","141","56","80","61","65","96","50","46","13","13","15","1","6","0","30","30","35","9","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/startup/DigesterFactory.java""","1","1","1","1","27","4","17","5","1","5","1","5","5","0","0","5","0","0","2","3","187","38","98","19","75","51","39","47","15","32","2","2","2","1","1","1","7","7","7","5","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/startup/EngineConfig.java""","2","2","2","1","13","2","6","4","1","0","2","3","3","3","1","3","0","0","2","1","112","33","34","16","16","45","16","25","13","12","4","4","4","1","1","1","8","8","8","3","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/startup/HostConfig.java""","4","4","4","2","26","2","18","5","2","1","3","44","44","43","16","44","0","0","19","25","1435","228","877","197","624","330","423","631","193","438","32","32","39","10","7","0","199","199","217","88","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/startup/TldConfig.java""","3","3","3","1","16","0","11","3","2","2","7","24","24","22","7","24","0","7","0","17","640","82","376","98","242","183","187","267","94","173","10","10","13","6","5","0","76","76","83","32","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/startup/UserConfig.java""","1","1","1","1","13","2","6","4","1","0","2","15","15","15","6","15","0","4","0","11","339","99","118","49","66","122","60","88","43","45","5","5","6","3","2","1","27","27","28","17","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/startup/WebXml.java""","3","3","3","2","11","0","10","0","1","1","3","81","81","80","35","81","0","5","1","75","1192","122","897","200","575","173","334","656","247","409","64","64","65","46","6","0","248","248","273","166","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/group/ChannelInterceptorBase.java""","1","1","1","1","5","0","3","2","1","0","1","21","21","21","3","21","0","0","0","21","172","29","79","33","27","64","33","67","31","36","2","2","2","1","1","1","33","33","33","21","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/group/GroupChannel.java""","2","2","2","1","12","0","7","5","3","1","2","39","39","38","13","39","0","0","4","35","680","62","358","114","204","272","191","282","110","172","13","13","15","5","4","1","89","89","97","45","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/group/RpcChannel.java""","1","1","1","1","7","0","6","1","3","1","5","22","22","21","10","22","0","0","1","21","267","38","184","72","97","48","93","137","64","73","8","8","8","5","4","0","41","39","43","26","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/group/interceptors/FragmentationInterceptor.java""","1","1","2","1","7","0","6","0","3","0","1","20","20","20","9","20","0","0","0","20","247","39","169","70","93","40","101","141","71","70","5","5","6","1","3","0","37","37","40","20","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/group/interceptors/MessageDispatchInterceptor.java""","2","2","2","1","6","0","6","0","1","0","1","20","20","20","7","20","0","0","1","19","214","29","156","48","85","44","74","117","44","73","8","8","8","4","3","0","40","40","44","25","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/group/interceptors/TcpFailureDetector.java""","2","2","3","1","10","0","8","1","1","1","2","25","25","24","8","25","0","0","5","20","369","48","266","86","156","70","135","208","78","130","10","10","13","7","3","0","71","71","78","31","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/group/interceptors/TcpPingInterceptor.java""","2","2","2","1","7","0","6","0","2","0","3","13","13","13","7","13","0","0","2","11","184","30","124","45","70","34","60","90","38","52","5","5","5","1","2","0","29","29","32","13","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/group/interceptors/ThroughputInterceptor.java""","1","1","1","1","5","0","5","0","1","0","1","15","15","15","13","15","0","0","0","15","162","25","116","47","68","21","75","99","45","54","6","6","6","1","2","0","23","23","23","15","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/group/interceptors/TwoPhaseCommitInterceptor.java""","2","2","2","1","9","0","8","0","2","0","3","9","9","9","6","9","0","0","0","9","151","16","102","43","56","35","57","77","40","37","5","5","6","1","4","0","18","18","20","9","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/io/ObjectReader.java""","1","1","1","1","6","0","4","1","1","0","1","17","17","17","4","17","0","0","0","17","168","26","83","34","37","59","44","66","35","31","2","2","2","1","1","1","21","21","21","17","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/io/XByteBuffer.java""","1","1","2","1","10","0","7","2","1","18","4","43","43","25","3","43","0","0","0","43","598","70","367","110","240","166","208","289","103","186","12","12","15","10","3","0","82","82","92","65","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/membership/McastService.java""","1","1","1","1","7","0","5","1","1","1","4","62","62","61","9","62","0","0","1","61","644","80","395","125","213","169","200","298","114","184","10","10","10","3","3","0","97","97","105","64","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/membership/McastServiceImpl.java""","3","3","3","1","15","0","13","1","8","1","3","32","32","31","30","32","0","3","2","27","653","46","464","122","297","148","248","369","111","258","12","12","13","3","5","0","114","114","117","34","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/tipis/LazyReplicatedMap.java""","3","3","4","1","19","0","11","7","1","0","1","5","5","5","0","5","0","0","2","3","191","23","72","29","43","96","41","57","26","31","12","12","16","5","4","1","16","16","20","9","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/tipis/LazyReplicatedMap.java""","3","3","4","1","19","0","11","7","1","0","1","5","5","5","0","5","0","0","2","3","191","23","72","29","43","96","41","57","26","31","12","12","16","5","4","1","16","16","20","9","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/tipis/ReplicatedMap.java""","1","1","1","1","11","0","4","6","1","0","1","5","5","5","0","5","0","0","2","3","124","14","34","20","12","76","19","27","17","10","3","3","5","3","1","2","7","7","9","7","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/transport/bio/BioReceiver.java""","2","2","2","1","12","0","11","1","1","0","1","8","8","8","1","8","0","0","2","6","159","21","105","28","66","36","62","86","26","60","10","10","10","6","3","0","23","23","23","13","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/transport/bio/BioReplicationTask.java""","3","3","3","1","14","0","10","3","1","0","1","7","7","7","2","7","0","0","3","4","167","20","90","30","51","58","54","80","30","50","8","8","8","1","4","1","25","25","25","7","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/transport/bio/BioSender.java""","3","3","4","1","20","0","14","5","1","0","3","10","10","10","4","10","0","0","4","6","299","33","168","46","116","98","103","141","43","98","10","10","13","4","3","1","37","37","40","13","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/transport/bio/util/FastQueue.java""","2","2","2","1","12","0","8","3","1","0","1","21","21","21","13","21","0","0","0","21","373","59","196","44","126","118","96","151","44","107","17","17","18","3","4","1","53","53","54","23","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/transport/nio/NioReceiver.java""","4","4","5","1","21","0","15","5","1","1","3","16","16","15","5","16","0","1","6","9","439","43","279","74","187","123","159","229","70","159","17","17","20","7","6","0","73","73","80","24","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/transport/nio/NioReplicationTask.java""","5","5","5","1","23","1","18","5","3","0","1","12","12","12","4","12","0","2","3","7","339","33","223","55","149","90","119","179","56","123","22","22","23","6","4","0","64","64","65","17","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/transport/nio/NioSender.java""","3","3","4","1","15","0","12","3","1","0","1","18","18","18","10","18","0","4","2","12","381","40","254","57","174","92","149","216","55","161","11","11","12","8","4","0","68","68","75","29","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/transport/nio/ParallelNioSender.java""","5","5","5","1","18","0","16","1","1","0","1","13","13","13","3","13","0","5","0","8","315","33","245","77","163","40","152","218","78","140","17","17","19","1","5","0","67","67","70","13","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/transport/nio/ParallelNioSender.java""","5","5","5","1","18","0","16","1","1","0","1","13","13","13","3","13","0","5","0","8","315","33","245","77","163","40","152","218","78","140","17","17","19","1","5","0","67","67","70","13","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/tribes/util/Logs.java""","0","0","0","0","0","0","0","0","1","0","1","0","0","0","0","0","0","0","0","0","29","1","6","5","1","22","4","5","5","0","0","0","0","0","0","4","0","0","0","0","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/catalina/util/ExtensionValidator.java""","7","7","7","3","48","2","33","11","1","6","4","6","6","0","4","6","0","4","0","2","434","51","250","95","161","133","112","160","75","85","14","14","15","10","5","1","43","43","46","23","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/coyote/ajp/AjpAprProcessor.java""","6","5","6","2","43","5","30","8","3","0","5","22","22","22","28","22","0","1","7","14","1330","261","755","167","567","317","427","557","153","404","32","23","37","12","5","0","141","129","153","60","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/coyote/ajp/AjpAprProtocol.java""","1","1","1","1","5","0","4","0","3","0","2","60","60","60","18","60","0","0","3","57","504","95","328","119","206","82","173","269","116","153","6","6","6","5","3","0","95","95","95","64","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/coyote/ajp/AjpMessage.java""","2","2","2","1","12","0","9","3","1","2","2","26","26","24","3","26","0","0","2","24","464","77","250","61","162","141","141","198","64","134","6","6","6","3","2","1","56","56","62","28","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/coyote/ajp/AjpProcessor.java""","5","5","6","2","38","5","26","7","3","0","5","23","23","23","30","23","0","1","6","16","1263","257","691","167","517","318","404","524","155","369","32","22","37","12","5","0","131","119","141","55","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/coyote/ajp/AjpProtocol.java""","1","1","1","1","5","0","4","0","3","0","2","53","53","53","19","53","0","0","3","50","491","93","318","114","199","80","169","257","111","146","5","5","5","4","3","0","87","87","87","56","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/coyote/http11/AbstractHttp11Processor.java""","2","1","2","1","11","0","6","4","1","0","3","37","37","37","29","37","0","3","3","31","729","149","297","108","178","292","146","219","107","112","10","10","13","10","4","1","75","73","86","54","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/coyote/http11/Http11AprProcessor.java""","4","4","5","2","30","3","19","7","1","0","2","47","47","47","34","47","0","4","7","36","1802","319","1013","228","738","481","544","769","231","538","55","55","66","10","6","0","233","231","279","94","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/coyote/http11/Http11AprProtocol.java""","1","1","1","1","3","0","3","0","3","0","2","119","119","119","30","119","1","0","3","115","703","120","430","194","307","153","265","424","191","233","7","7","7","4","3","0","160","160","161","122","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/coyote/http11/Http11NioProtocol.java""","2","2","2","1","11","0","9","0","3","0","2","31","31","31","8","31","1","0","0","30","471","72","341","83","226","59","170","242","82","160","11","11","12","4","3","0","73","73","74","36","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/coyote/http11/Http11Protocol.java""","2","2","2","1","14","0","12","1","3","0","1","15","15","15","9","15","1","0","3","11","341","62","229","57","159","50","119","163","57","106","8","8","8","4","3","0","43","43","44","18","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/jasper/JspCompilationContext.java""","2","2","2","1","10","0","7","2","1","2","1","54","54","52","30","54","0","0","6","48","745","95","480","143","258","170","216","328","128","200","13","11","17","9","6","0","118","116","126","64","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/jasper/compiler/SmapUtil.java""","2","2","2","1","10","0","9","1","4","9","2","53","53","44","11","53","24","4","0","25","738","97","560","189","344","101","288","400","157","243","18","9","18","1","5","0","119","109","122","53","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/jasper/security/SecurityClassLoad.java""","3","3","3","1","77","9","68","0","1","1","1","1","1","0","0","1","0","0","0","1","111","15","73","6","65","23","34","38","5","33","3","3","3","1","1","0","3","3","3","1","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/jasper/xmlparser/UCSReader.java""","3","3","3","2","21","0","10","12","1","0","5","10","10","10","4","10","0","0","0","10","309","25","133","51","86","167","71","103","45","58","15","15","15","8","4","1","34","34","34","21","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/jasper/xmlparser/UTF8Reader.java""","7","7","7","4","45","2","31","11","1","0","2","12","12","12","5","12","0","3","0","9","643","60","405","84","285","186","199","277","64","213","44","44","44","39","5","0","86","86","86","54","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/naming/NamingContext.java""","2","2","2","1","21","0","9","10","1","0","3","35","35","35","3","35","0","0","4","31","912","135","366","115","202","411","137","220","77","143","12","12","14","8","4","1","83","83","92","45","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/naming/SelectorContext.java""","1","1","1","1","17","0","6","10","1","0","5","34","34","34","2","34","0","0","3","31","750","124","226","87","96","400","72","124","53","71","6","6","6","3","2","2","51","51","54","40","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/naming/resources/FileDirContext.java""","2","2","2","1","19","1","8","9","3","0","2","42","42","42","8","42","0","0","6","36","1113","208","424","167","227","482","175","273","109","164","13","13","14","8","4","1","94","94","98","54","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/naming/resources/WARDirContext.java""","1","1","1","1","17","0","7","9","3","0","1","43","43","43","6","43","0","0","8","35","995","169","374","169","182","452","164","245","116","129","7","7","7","5","5","1","78","78","81","51","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/tomcat/util/DomUtil.java""","2","2","3","2","13","0","10","2","2","14","1","15","15","1","0","15","0","0","0","15","270","35","181","70","102","54","101","147","67","80","7","7","10","7","2","0","44","44","53","33","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/tomcat/util/IntrospectionUtils.java""","5","5","6","2","26","1","21","3","4","30","4","31","33","3","0","33","0","0","0","33","904","92","678","157","495","138","325","505","155","350","29","29","36","14","6","0","185","185","205","92","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/tomcat/util/IntrospectionUtils.java""","5","5","6","2","26","1","21","3","4","30","4","31","33","3","0","33","0","0","0","33","904","92","678","157","495","138","325","505","155","350","29","29","36","14","6","0","185","185","205","92","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/tomcat/util/buf/B2CConverter.java""","1","1","1","1","7","0","5","1","3","0","2","14","14","14","5","14","1","0","1","12","195","35","103","43","40","58","37","62","32","30","8","8","8","4","4","1","23","23","23","17","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/tomcat/util/buf/C2BConverter.java""","1","1","1","1","6","0","4","1","3","0","1","25","25","25","7","25","3","0","0","22","275","42","134","53","54","99","56","90","44","46","5","5","5","1","2","1","31","31","31","25","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/tomcat/util/buf/StringCache.java""","3","3","3","1","19","0","14","3","3","8","14","25","25","17","5","25","0","0","6","19","681","111","417","135","281","153","213","305","122","183","14","14","16","9","6","0","85","85","94","49","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/tomcat/util/buf/UEncoder.java""","3","3","3","1","16","0","12","3","1","0","1","7","7","7","4","7","0","1","0","6","174","21","103","27","67","51","64","88","26","62","10","10","12","1","6","1","23","23","25","7","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/tomcat/util/http/Cookies.java""","5","4","8","2","32","2","20","9","1","5","2","13","13","8","4","13","0","6","1","6","490","58","287","55","214","153","142","205","55","150","28","26","48","17","5","1","65","63","104","38","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/tomcat/util/http/Parameters.java""","3","3","3","1","16","1","14","1","1","0","3","17","17","17","12","17","0","2","0","15","379","48","276","76","191","55","164","220","75","145","20","20","22","3","4","0","58","58","63","23","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/tomcat/util/http/mapper/Mapper.java""","4","4","5","2","28","1","21","5","6","12","1","41","41","29","18","41","0","17","3","21","1467","203","910","250","626","357","461","672","234","438","25","25","36","11","6","0","202","202","223","102","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/tomcat/util/net/SSLImplementation.java""","4","4","4","3","19","1","16","2","1","2","3","2","6","4","0","6","0","0","0","6","87","13","49","20","23","25","22","32","16","16","5","5","5","4","3","1","9","9","9","7","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/tomcat/util/net/jsse/JSSEImplementation.java""","1","1","1","1","4","0","3","0","1","0","2","5","5","5","1","5","0","0","0","5","72","16","35","22","12","21","18","24","18","6","1","1","1","1","0","1","5","5","5","5","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/tomcat/util/net/jsse/JSSESocketFactory.java""","4","4","5","1","28","2","21","4","2","0","9","23","23","23","8","23","1","3","12","7","822","91","564","190","348","169","268","377","152","225","14","14","16","11","7","0","112","112","120","43","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""java/org/apache/tomcat/util/net/jsse/JSSESupport.java""","3","3","3","2","14","0","12","1","2","0","1","12","12","12","4","12","3","0","2","7","246","29","174","60","104","44","97","139","55","84","9","9","9","7","3","0","41","41","42","26","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""modules/tomcat-lite/java/org/apache/tomcat/util/http/mapper/BaseMapper.java""","4","4","5","2","26","1","19","5","6","12","1","43","43","31","18","43","0","16","6","21","1460","211","893","254","607","359","449","656","233","423","16","16","23","11","4","0","198","198","217","104","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""modules/tomcat-lite/java/org/apache/tomcat/util/http/mapper/BaseMapper.java""","4","4","5","2","26","1","19","5","6","12","1","43","43","31","18","43","0","16","6","21","1460","211","893","254","607","359","449","656","233","423","16","16","23","11","4","0","198","198","217","104","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""test/org/apache/catalina/tribes/demos/IntrospectionUtils.java""","5","5","6","2","26","1","21","3","4","30","4","31","33","3","0","33","0","0","0","33","904","92","678","157","495","138","325","505","155","350","29","29","36","14","6","0","185","185","205","92","normal"
"48175","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48175 Make loggers final. Patch by sebb with minor modification as original patch broke compilation","Bug 48175  Loggers should be final","logger final","","","""test/org/apache/catalina/tribes/demos/IntrospectionUtils.java""","5","5","6","2","26","1","21","3","4","30","4","31","33","3","0","33","0","0","0","33","904","92","678","157","495","138","325","505","155","350","29","29","36","14","6","0","185","185","205","92","normal"
"48176","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48176 Make fields final. Patch by sebb.","Bug 48176  Fields that should be final","field final","","","""java/org/apache/catalina/tribes/io/BufferPool.java""","2","2","2","1","7","0","7","0","2","1","3","5","9","8","1","9","0","1","0","8","92","18","51","20","25","27","26","42","20","22","7","7","7","1","4","1","14","14","14","5","normal"
"48176","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48176 Make fields final. Patch by sebb.","Bug 48176  Fields that should be final","field final","","","""java/org/apache/jasper/compiler/ServletWriter.java""","1","1","1","1","6","0","4","2","1","0","2","14","14","14","4","14","0","0","0","14","156","26","67","25","32","63","33","51","25","26","2","2","3","1","1","1","17","17","19","14","normal"
"48176","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48176 Make fields final. Patch by sebb.","Bug 48176  Fields that should be final","field final","","","""modules/tomcat-lite/java/org/apache/tomcat/util/http/MimeMap.java""","1","1","1","1","6","0","5","1","1","1","1","7","7","6","1","7","0","0","0","7","194","19","140","20","116","35","115","127","18","109","3","3","3","1","1","0","11","11","11","7","normal"
"48196","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48196 Reduce visibility. Patch by sebb.","Bug 48196  Public arrays that should be private","public array privat","","","""java/org/apache/catalina/startup/Tomcat.java""","1","1","1","1","13","0","7","4","5","3","2","40","40","37","14","40","0","1","5","34","901","88","537","296","370","277","185","253","108","145","6","6","6","1","3","1","64","64","65","40","normal"
"48196","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48196 Reduce visibility. Patch by sebb.","Bug 48196  Public arrays that should be private","public array privat","","","""java/org/apache/catalina/tribes/group/interceptors/TwoPhaseCommitInterceptor.java""","2","2","2","1","9","0","8","0","2","0","3","9","9","9","6","9","0","0","0","9","151","16","102","43","56","35","57","77","40","37","5","5","6","1","4","0","18","18","20","9","normal"
"48196","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48196 Reduce visibility. Patch by sebb.","Bug 48196  Public arrays that should be private","public array privat","","","""java/org/apache/catalina/util/HexUtils.java""","4","4","6","1","26","1","16","8","1","4","2","4","4","0","0","4","0","1","0","3","179","27","91","34","72","61","45","65","18","47","9","9","15","1","2","1","19","19","25","4","normal"
"48197","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48197 Reduce visibility where possible Fix javadoc Based on a patch by sebb","Bug 48197  XByteBuffer: privatize public fields; fix Javadoc","byte buffer xbytebuff privat public field fix javadoc","","","""java/org/apache/catalina/tribes/io/XByteBuffer.java""","1","1","2","1","10","0","7","2","1","18","4","43","43","25","3","43","0","0","0","43","598","70","367","110","240","166","208","289","103","186","12","12","15","10","3","0","82","82","92","65","normal"
"48217","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48217 Make logs final and private; add missing @Override markers Patch provided by sebb.","Bug 48217  Loggers should be final","logger final","","","""java/org/apache/coyote/http11/AbstractHttp11Protocol.java""","1","1","1","1","2","0","1","0","1","0","2","103","105","105","21","105","0","0","0","105","405","84","245","146","157","78","165","281","145","136","4","4","4","1","2","0","115","115","118","103","normal"
"48217","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48217 Make logs final and private; add missing @Override markers Patch provided by sebb.","Bug 48217  Loggers should be final","logger final","","","""java/org/apache/coyote/http11/AbstractHttp11Protocol.java""","1","1","1","1","2","0","1","0","1","0","2","103","105","105","21","105","0","0","0","105","405","84","245","146","157","78","165","281","145","136","4","4","4","1","2","0","115","115","118","103","normal"
"48217","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48217 Make logs final and private; add missing @Override markers Patch provided by sebb.","Bug 48217  Loggers should be final","logger final","","","""java/org/apache/coyote/http11/Http11NioProtocol.java""","2","2","2","1","11","0","9","0","3","0","2","31","31","31","8","31","1","0","0","30","471","72","341","83","226","59","170","242","82","160","11","11","12","4","3","0","73","73","74","36","normal"
"48217","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48217 Make logs final and private; add missing @Override markers Patch provided by sebb.","Bug 48217  Loggers should be final","logger final","","","""java/org/apache/coyote/http11/Http11Protocol.java""","2","2","2","1","14","0","12","1","3","0","1","15","15","15","9","15","1","0","3","11","341","62","229","57","159","50","119","163","57","106","8","8","8","4","3","0","43","43","44","18","normal"
"48230","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48230 Remove unused imports. Patch provided by sebb.","Bug 48230  Unused imports","unus import","","","""java/org/apache/catalina/Authenticator.java""","0","0","0","0","0","0","0","0","1","0","0","0","2","2","0","2","0","0","0","2","74","10","14","13","0","50","9","10","10","0","0","0","0","0","0","4","0","0","0","0","normal"
"48230","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48230 Remove unused imports. Patch provided by sebb.","Bug 48230  Unused imports","unus import","","","""java/org/apache/catalina/authenticator/FormAuthenticator.java""","6","6","7","2","43","4","28","10","1","0","2","10","10","10","1","10","0","0","6","4","544","86","319","98","227","139","167","233","80","153","32","32","34","14","4","0","65","65","70","27","normal"
"48230","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48230 Remove unused imports. Patch provided by sebb.","Bug 48230  Unused imports","unus import","","","""java/org/apache/catalina/authenticator/FormAuthenticator.java""","6","6","7","2","43","4","28","10","1","0","2","10","10","10","1","10","0","0","6","4","544","86","319","98","227","139","167","233","80","153","32","32","34","14","4","0","65","65","70","27","normal"
"48230","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48230 Remove unused imports. Patch provided by sebb.","Bug 48230  Unused imports","unus import","","","""java/org/apache/tomcat/util/net/NioEndpoint.java""","2","2","3","1","9","0","8","1","13","0","4","119","124","124","53","124","0","0","14","110","1604","200","1139","311","805","294","637","954","320","634","22","22","27","8","7","0","334","334","378","140","normal"
"48230","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48230 Remove unused imports. Patch provided by sebb.","Bug 48230  Unused imports","unus import","","","""modules/jdbc-pool/test/org/apache/tomcat/jdbc/test/TestSuspectTimeout.java""","1","1","1","1","10","0","10","0","1","0","0","2","2","2","0","2","0","0","0","2","50","7","27","9","17","16","21","24","9","15","1","1","1","1","0","1","2","2","2","2","normal"
"48234","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48234 Align Javadoc with code","Bug 48234  org.apache.catalina.core.ContainerBase.getLogger() not thread-safe?","apach catalina core contain base containerbas get logger getlogg thread safe threadsaf","org.apache.catalina.core.ContainerBase.getLogger() is not synchronised, yet all the other methods which access org.apache.catalina.core.ContainerBase.logger are synch. This seems wrong.

org.apache.catalina.core.ContainerBase.logger should probably be private to prevent unsynch. access by subclasses.

Similar considerations apply to logName and logName()

The Javadoc for getLogger() states that it can return null - that does not appear to be possible. [Not sure if the method ever returns the parent logger either.]","apach catalina core contain base containerbas get logger getlogg synchronis yet method access apach catalina core contain base containerbas logger synch seem wrong apach catalina core contain base containerbas logger probabl privat prevent unsynch access subclass similar consider appli log name lognam log name lognam javadoc get logger getlogg state return null appear possibl sure method ever return parent logger either","""java/org/apache/catalina/core/ContainerBase.java""","2","2","3","1","16","1","9","5","3","0","2","73","73","73","28","73","1","1","5","66","1628","329","774","197","477","527","357","569","191","378","13","13","19","3","4","1","204","204","238","87","normal"
"48239","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48239 HexUtils exposes public array Based on a patch provided by sebb","Bug 48239  HexUtils exposes public array","hex util hexutil expos public array","","","""java/org/apache/coyote/ajp/AjpAprProcessor.java""","6","5","6","2","43","5","30","8","3","0","5","22","22","22","28","22","0","1","7","14","1330","261","755","167","567","317","427","557","153","404","32","23","37","12","5","0","141","129","153","60","normal"
"48239","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48239 HexUtils exposes public array Based on a patch provided by sebb","Bug 48239  HexUtils exposes public array","hex util hexutil expos public array","","","""java/org/apache/coyote/ajp/AjpProcessor.java""","5","5","6","2","38","5","26","7","3","0","5","23","23","23","30","23","0","1","6","16","1263","257","691","167","517","318","404","524","155","369","32","22","37","12","5","0","131","119","141","55","normal"
"48239","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48239 HexUtils exposes public array Based on a patch provided by sebb","Bug 48239  HexUtils exposes public array","hex util hexutil expos public array","","","""java/org/apache/coyote/http11/Http11AprProcessor.java""","4","4","5","2","30","3","19","7","1","0","2","47","47","47","34","47","0","4","7","36","1802","319","1013","228","738","481","544","769","231","538","55","55","66","10","6","0","233","231","279","94","normal"
"48239","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48239 HexUtils exposes public array Based on a patch provided by sebb","Bug 48239  HexUtils exposes public array","hex util hexutil expos public array","","","""java/org/apache/coyote/http11/Http11NioProcessor.java""","11","11","14","4","66","8","47","12","1","0","0","17","17","17","10","17","0","0","7","10","1304","198","857","162","665","267","472","665","162","503","62","62","72","31","7","0","203","203","250","80","normal"
"48239","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48239 HexUtils exposes public array Based on a patch provided by sebb","Bug 48239  HexUtils exposes public array","hex util hexutil expos public array","","","""java/org/apache/coyote/http11/Http11Processor.java""","12","12","14","2","74","9","51","12","2","0","0","12","12","12","5","12","0","0","6","6","1025","176","657","112","505","195","353","495","114","381","47","47","53","9","4","0","146","146","174","35","normal"
"48239","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48239 HexUtils exposes public array Based on a patch provided by sebb","Bug 48239  HexUtils exposes public array","hex util hexutil expos public array","","","""java/org/apache/coyote/http11/filters/ChunkedInputFilter.java""","3","3","3","2","20","3","12","5","1","0","2","11","11","11","8","11","0","0","4","7","361","96","155","45","99","112","79","118","38","80","12","12","12","11","3","1","38","38","38","24","normal"
"48239","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48239 HexUtils exposes public array Based on a patch provided by sebb","Bug 48239  HexUtils exposes public array","hex util hexutil expos public array","","","""java/org/apache/coyote/http11/filters/ChunkedOutputFilter.java""","1","1","1","1","11","1","5","4","1","0","3","7","7","7","4","7","0","0","0","7","187","57","61","30","31","69","36","46","26","20","3","3","3","1","1","1","9","9","9","7","normal"
"48239","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48239 HexUtils exposes public array Based on a patch provided by sebb","Bug 48239  HexUtils exposes public array","hex util hexutil expos public array","","","""java/org/apache/tomcat/util/buf/HexUtils.java""","1","1","1","1","6","0","2","4","1","1","2","1","1","0","0","1","0","0","0","1","76","14","27","25","19","35","3","5","5","0","1","1","1","1","0","1","1","1","1","1","normal"
"48239","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48239 HexUtils exposes public array Based on a patch provided by sebb","Bug 48239  HexUtils exposes public array","hex util hexutil expos public array","","","""java/org/apache/tomcat/util/buf/MessageBytes.java""","2","2","2","1","13","0","10","2","2","2","5","38","38","36","11","38","0","2","1","35","649","66","416","82","290","167","222","309","82","227","8","7","12","8","3","0","100","85","109","66","normal"
"48248","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48248 Use volatile since field is accessed by multiple threads","Bug 48248  tribes.group.interceptors.MessageDispatchInterceptor.run should be volatile","tribe group interceptor messag dispatch interceptor messagedispatchinterceptor run volatil","org.apache.catalina.tribes.group.interceptors.MessageDispatchInterceptor.run should be volatile, as it is used to communicate between running threads.","apach catalina tribe group interceptor messag dispatch interceptor messagedispatchinterceptor run volatil use commun run thread","""java/org/apache/catalina/tribes/group/GroupChannel.java""","2","2","2","1","12","0","7","5","3","1","2","39","39","38","13","39","0","0","4","35","680","62","358","114","204","272","191","282","110","172","13","13","15","5","4","1","89","89","97","45","normal"
"48248","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48248 Use volatile since field is accessed by multiple threads","Bug 48248  tribes.group.interceptors.MessageDispatchInterceptor.run should be volatile","tribe group interceptor messag dispatch interceptor messagedispatchinterceptor run volatil","org.apache.catalina.tribes.group.interceptors.MessageDispatchInterceptor.run should be volatile, as it is used to communicate between running threads.","apach catalina tribe group interceptor messag dispatch interceptor messagedispatchinterceptor run volatil use commun run thread","""java/org/apache/catalina/tribes/group/interceptors/MessageDispatchInterceptor.java""","2","2","2","1","6","0","6","0","1","0","1","20","20","20","7","20","0","0","1","19","214","29","156","48","85","44","74","117","44","73","8","8","8","4","3","0","40","40","44","25","normal"
"48248","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48248 Use volatile since field is accessed by multiple threads","Bug 48248  tribes.group.interceptors.MessageDispatchInterceptor.run should be volatile","tribe group interceptor messag dispatch interceptor messagedispatchinterceptor run volatil","org.apache.catalina.tribes.group.interceptors.MessageDispatchInterceptor.run should be volatile, as it is used to communicate between running threads.","apach catalina tribe group interceptor messag dispatch interceptor messagedispatchinterceptor run volatil use commun run thread","""java/org/apache/catalina/tribes/group/interceptors/TcpPingInterceptor.java""","2","2","2","1","7","0","6","0","2","0","3","13","13","13","7","13","0","0","2","11","184","30","124","45","70","34","60","90","38","52","5","5","5","1","2","0","29","29","32","13","normal"
"48248","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48248 Use volatile since field is accessed by multiple threads","Bug 48248  tribes.group.interceptors.MessageDispatchInterceptor.run should be volatile","tribe group interceptor messag dispatch interceptor messagedispatchinterceptor run volatil","org.apache.catalina.tribes.group.interceptors.MessageDispatchInterceptor.run should be volatile, as it is used to communicate between running threads.","apach catalina tribe group interceptor messag dispatch interceptor messagedispatchinterceptor run volatil use commun run thread","""java/org/apache/catalina/tribes/membership/McastServiceImpl.java""","3","3","3","1","15","0","13","1","8","1","3","32","32","31","30","32","0","3","2","27","653","46","464","122","297","148","248","369","111","258","12","12","13","3","5","0","114","114","117","34","normal"
"48249","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48249 Use volatile since field is accessed by multiple threads","Bug 48249  org.apache.tomcat.util.net.NioBlockingSelector.BlockPoller.run <= volatile","apach tomcat util net nio block selector nioblockingselector block poller blockpol run volatil","org.apache.tomcat.util.net.NioBlockingSelector.BlockPoller.run should be volatile, as it is used to communicate between running threads.","apach tomcat util net nio block selector nioblockingselector block poller blockpol run volatil use commun run thread","""java/org/apache/tomcat/util/net/NioBlockingSelector.java""","4","4","5","2","20","0","18","2","6","0","2","18","18","18","7","18","0","0","0","18","394","28","318","83","221","62","178","266","81","185","20","20","22","7","5","0","87","87","100","36","normal"
"48252","0","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=48252 Fix potential recursion","Bug 48252  StackOverflowError in NioEndpoint.setProperty when setting jkHome","stack overflow error stackoverflowerror nio endpoint nioendpoint set properti setproperti set jk home jkhome","- Noticed only when running in debugger with breakpoint set for StackOverflowError.
- The error is translated by Java's reflection mechanism to an InvocationTargetException, which is caught and silently ignored by IntrospectionUtils.

- Connector.initialize() sets jkHome property on Http11NioProtocol.
- Http11NioProtocol sets jkHome property on NioEndpoint.
- NioEndpoint recursively invokes its own setProperty method via IntrospectionUtils.setProperty, causing the stack overflow.

- Using embedded Tomcat.
- Using Nio connector. Does not happen for standard connector.
- Happens in 6.0.18 and 6.0.20; haven't tested with earlier versions.","notic run debugg breakpoint set stack overflow error stackoverflowerror error translat java reflect mechan invoc target except invocationtargetexcept caught silent ignor introspect util introspectionutil connector initi set jk home jkhome properti http11 nio protocol http11nioprotocol http11 nio protocol http11nioprotocol set jk home jkhome properti nio endpoint nioendpoint nio endpoint nioendpoint recurs invok set properti setproperti method via introspect util introspectionutil set properti setproperti caus stack overflow use embed tomcat use nio connector happen standard connector happen haven test earlier version","""java/org/apache/tomcat/util/IntrospectionUtils.java""","5","5","6","2","26","1","21","3","4","30","4","31","33","3","0","33","0","0","0","33","904","92","678","157","495","138","325","505","155","350","29","29","36","14","6","0","185","185","205","92","normal"
"48252","0","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=48252 Fix potential recursion","Bug 48252  StackOverflowError in NioEndpoint.setProperty when setting jkHome","stack overflow error stackoverflowerror nio endpoint nioendpoint set properti setproperti set jk home jkhome","- Noticed only when running in debugger with breakpoint set for StackOverflowError.
- The error is translated by Java's reflection mechanism to an InvocationTargetException, which is caught and silently ignored by IntrospectionUtils.

- Connector.initialize() sets jkHome property on Http11NioProtocol.
- Http11NioProtocol sets jkHome property on NioEndpoint.
- NioEndpoint recursively invokes its own setProperty method via IntrospectionUtils.setProperty, causing the stack overflow.

- Using embedded Tomcat.
- Using Nio connector. Does not happen for standard connector.
- Happens in 6.0.18 and 6.0.20; haven't tested with earlier versions.","notic run debugg breakpoint set stack overflow error stackoverflowerror error translat java reflect mechan invoc target except invocationtargetexcept caught silent ignor introspect util introspectionutil connector initi set jk home jkhome properti http11 nio protocol http11nioprotocol http11 nio protocol http11nioprotocol set jk home jkhome properti nio endpoint nioendpoint nio endpoint nioendpoint recurs invok set properti setproperti method via introspect util introspectionutil set properti setproperti caus stack overflow use embed tomcat use nio connector happen standard connector happen haven test earlier version","""java/org/apache/tomcat/util/net/AbstractEndpoint.java""","1","1","1","1","3","0","3","0","3","0","28","86","89","91","43","91","0","0","1","90","584","85","367","197","243","134","228","348","189","159","8","8","8","4","2","0","119","119","123","97","normal"
"48266","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48266 Generics and unused imports. Patch by sebb","Bug 48266  Patch to fix generics in catalina","patch fix gener catalina","","","""java/org/apache/catalina/ant/jmx/JMXAccessorTask.java""","2","2","2","1","12","0","8","3","1","2","3","42","42","40","14","42","0","0","7","35","731","81","420","129","248","231","186","290","124","166","21","21","27","5","4","1","108","108","123","48","normal"
"48266","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48266 Generics and unused imports. Patch by sebb","Bug 48266  Patch to fix generics in catalina","patch fix gener catalina","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","14","1","8","4","1","2","5","147","147","145","48","147","1","0","12","134","2884","558","1417","406","899","919","695","1039","390","649","20","20","24","10","3","1","348","348","388","212","normal"
"48266","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48266 Generics and unused imports. Patch by sebb","Bug 48266  Patch to fix generics in catalina","patch fix gener catalina","","","""java/org/apache/catalina/core/StandardPart.java""","1","1","1","1","6","0","6","0","1","0","0","10","10","10","2","10","0","0","0","10","124","17","86","42","31","21","38","56","31","25","3","3","3","1","2","0","17","17","17","10","normal"
"48266","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48266 Generics and unused imports. Patch by sebb","Bug 48266  Patch to fix generics in catalina","patch fix gener catalina","","","""java/org/apache/catalina/ha/backend/CollectedInfo.java""","3","3","4","2","18","2","13","3","1","0","0","3","3","3","6","3","0","0","0","3","105","17","56","30","37","35","40","50","30","20","6","6","8","5","2","1","9","9","12","7","normal"
"48266","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48266 Generics and unused imports. Patch by sebb","Bug 48266  Patch to fix generics in catalina","patch fix gener catalina","","","""java/org/apache/catalina/ha/session/BackupManager.java""","1","1","1","1","6","0","4","1","1","0","2","32","32","32","5","32","0","0","0","32","317","47","184","77","82","87","87","131","69","62","4","4","4","1","1","0","42","42","43","32","normal"
"48266","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48266 Generics and unused imports. Patch by sebb","Bug 48266  Patch to fix generics in catalina","patch fix gener catalina","","","""java/org/apache/catalina/ha/tcp/ReplicationValve.java""","2","2","2","1","13","0","8","4","1","0","3","36","36","36","14","36","0","0","13","23","664","70","368","118","219","226","162","252","109","143","13","13","16","5","5","1","91","91","100","40","normal"
"48266","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48266 Generics and unused imports. Patch by sebb","Bug 48266  Patch to fix generics in catalina","patch fix gener catalina","","","""java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java""","2","2","3","1","10","0","9","1","4","0","13","108","111","111","30","111","0","1","10","100","1490","175","1083","329","674","255","565","842","304","538","20","20","25","7","5","0","281","272","327","143","normal"
"48266","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48266 Generics and unused imports. Patch by sebb","Bug 48266  Patch to fix generics in catalina","patch fix gener catalina","","","""java/org/apache/catalina/tribes/transport/bio/MultipointBioSender.java""","2","2","2","1","8","0","8","0","1","0","0","10","10","10","2","10","0","1","1","8","149","21","103","44","55","25","63","93","43","50","7","7","7","1","3","0","29","29","29","10","normal"
"48267","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48267 Generics Patch provided by sebb","Bug 48267  Patch to fix generics in javax packages","patch fix gener javax packag","","","""java/javax/annotation/Resource.java""","1","1","1","1","0","0","0","0","2","0","0","2","6","8","2","8","0","0","0","8","40","5","19","17","0","16","11","13","13","0","1","1","1","1","0","1","2","2","2","2","normal"
"48267","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48267 Generics Patch provided by sebb","Bug 48267  Patch to fix generics in javax packages","patch fix gener javax packag","","","""java/javax/ejb/EJB.java""","0","0","0","0","0","0","0","0","1","0","0","0","5","5","0","5","5","0","0","0","35","5","14","13","0","16","10","11","11","0","0","0","0","0","0","1","0","0","0","0","normal"
"48267","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48267 Generics Patch provided by sebb","Bug 48267  Patch to fix generics in javax packages","patch fix gener javax packag","","","""java/javax/el/BeanELResolver.java""","2","2","2","1","10","0","9","0","4","1","0","24","24","23","12","24","0","6","0","18","352","52","281","83","151","19","122","185","72","113","8","8","9","8","3","0","63","63","71","37","normal"
"48267","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48267 Generics Patch provided by sebb","Bug 48267  Patch to fix generics in javax packages","patch fix gener javax packag","","","""java/javax/el/ELContext.java""","1","1","1","1","5","0","4","0","1","0","0","7","10","10","3","10","0","0","0","10","82","18","42","18","13","22","20","31","18","13","3","3","4","1","1","1","10","10","11","7","normal"
"48267","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48267 Generics Patch provided by sebb","Bug 48267  Patch to fix generics in javax packages","patch fix gener javax packag","","","""java/javax/el/ListELResolver.java""","3","3","4","1","14","1","13","0","1","1","1","9","9","8","1","9","0","1","0","8","177","23","138","42","77","16","61","91","30","61","7","7","7","5","2","0","33","33","38","17","normal"
"48267","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48267 Generics Patch provided by sebb","Bug 48267  Patch to fix generics in javax packages","patch fix gener javax packag","","","""java/javax/el/MapELResolver.java""","2","2","2","1","12","1","11","0","1","0","1","8","8","8","1","8","0","0","0","8","147","23","108","37","54","16","48","70","24","46","5","5","5","1","2","0","22","22","23","8","normal"
"48267","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48267 Generics Patch provided by sebb","Bug 48267  Patch to fix generics in javax packages","patch fix gener javax packag","","","""java/javax/el/ResourceBundleELResolver.java""","2","2","2","1","13","1","12","0","1","0","0","7","7","7","0","7","0","0","0","7","134","18","100","34","49","16","42","63","21","42","5","5","5","4","3","0","20","20","20","10","normal"
"48267","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48267 Generics Patch provided by sebb","Bug 48267  Patch to fix generics in javax packages","patch fix gener javax packag","","","""java/javax/xml/ws/WebServiceRef.java""","0","0","0","0","0","0","0","0","1","0","0","0","5","5","0","5","0","0","0","5","35","5","14","13","0","16","10","11","11","0","0","0","0","0","0","1","0","0","0","0","normal"
"48282","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48282 Correct possible NPE Patch provided by sebb","Bug 48282  Possible NPE in org.apache.tomcat.util.modeler.Registry","possibl npe apach tomcat util model registri","","","""java/org/apache/tomcat/util/modeler/Registry.java""","3","3","3","1","20","1","12","6","1","2","3","35","35","33","7","35","0","4","0","31","902","109","484","120","294","310","222","343","108","235","11","11","12","6","3","1","120","120","129","64","normal"
"48285","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48285 Add handling of Async dispatcher types","Bug 48285  ApplicationFilterFactory.matchDispatcher() fails to check ASYNC","applic filter factori applicationfilterfactori match dispatch matchdispatch fail check async","catalina.core.ApplicationFilterFactory.matchDispatcher(FilterMap filterMap, DispatcherType type) fails to check for type == ASYNC

The extra case ought to be added (but I don't know what it should contain, so cannot provide a patch)","catalina core applic filter factori applicationfilterfactori match dispatch matchdispatch filter map filtermap filter map filtermap dispatch type dispatchertyp type fail check type async extra case ought ad know contain cannot provid patch","""java/org/apache/catalina/core/ApplicationFilterFactory.java""","7","7","8","6","40","4","27","10","1","1","3","7","7","6","0","7","0","5","0","2","362","61","205","43","137","99","90","143","41","102","23","23","24","11","3","0","55","52","59","42","normal"
"48285","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48285 Add handling of Async dispatcher types","Bug 48285  ApplicationFilterFactory.matchDispatcher() fails to check ASYNC","applic filter factori applicationfilterfactori match dispatch matchdispatch fail check async","catalina.core.ApplicationFilterFactory.matchDispatcher(FilterMap filterMap, DispatcherType type) fails to check for type == ASYNC

The extra case ought to be added (but I don't know what it should contain, so cannot provide a patch)","catalina core applic filter factori applicationfilterfactori match dispatch matchdispatch filter map filtermap filter map filtermap dispatch type dispatchertyp type fail check type async extra case ought ad know contain cannot provid patch","""java/org/apache/catalina/deploy/FilterMap.java""","1","1","1","1","9","0","6","2","1","0","6","11","11","11","6","11","0","0","0","11","207","45","88","33","54","74","52","73","34","39","5","5","5","1","1","1","20","20","20","11","normal"
"48287","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48287 Eclipse warnings Patch provided by sebb","Bug 48287  ApplicationContextFacade - generics fixes","applic context facad applicationcontextfacad gener fix","","","""java/org/apache/catalina/core/ApplicationContextFacade.java""","2","2","2","1","9","0","8","0","2","0","0","59","59","59","3","59","0","6","0","53","799","145","565","133","315","89","182","304","95","209","4","4","4","3","3","0","121","121","122","63","normal"
"48288","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48288 Supress some warnings Patch provided by sebb","Bug 48288  Patch to fix generics in javax.el package helpers","patch fix gener javax packag helper","","","""java/org/apache/el/lang/EvaluationContext.java""","1","1","1","1","3","0","3","0","1","0","0","11","11","11","3","11","0","0","0","11","90","18","56","31","13","16","22","34","21","13","1","1","1","1","0","0","11","11","11","11","normal"
"48288","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48288 Supress some warnings Patch provided by sebb","Bug 48288  Patch to fix generics in javax.el package helpers","patch fix gener javax packag helper","","","""java/org/apache/jasper/el/ELContextWrapper.java""","1","1","1","1","3","0","3","0","1","0","0","10","10","10","2","10","0","0","0","10","87","15","51","28","12","21","20","32","19","13","2","2","2","1","1","0","11","11","11","10","normal"
"48289","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48289 Javadoc / generics fixes Patch procided by sebb","Bug 48289  ElSupport - Javadoc and generics fixes","el support elsupport javadoc gener fix","","","""java/org/apache/el/lang/ELSupport.java""","4","4","6","4","17","0","16","1","1","22","1","23","23","1","0","23","0","0","2","21","476","38","383","67","242","55","137","243","56","187","13","13","19","13","3","0","110","108","156","101","normal"
"48289","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48289 Javadoc / generics fixes Patch procided by sebb","Bug 48289  ElSupport - Javadoc and generics fixes","el support elsupport javadoc gener fix","","","""test/org/apache/el/TestELEvaluation.java""","1","1","1","1","5","0","4","0","1","0","0","4","4","4","0","4","0","1","0","3","59","10","26","14","11","23","15","20","13","7","1","1","1","1","0","1","4","4","4","4","normal"
"48296","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48296 Generics and JavaDoc fixes Patch provided by sebb","Bug 48296  Generics fixes","gener fix","","","""java/org/apache/catalina/ant/jmx/JMXAccessorTask.java""","2","2","2","1","12","0","8","3","1","2","3","42","42","40","14","42","0","0","7","35","731","81","420","129","248","231","186","290","124","166","21","21","27","5","4","1","108","108","123","48","normal"
"48296","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48296 Generics and JavaDoc fixes Patch provided by sebb","Bug 48296  Generics fixes","gener fix","","","""java/org/apache/catalina/tribes/membership/Membership.java""","2","2","2","1","10","0","7","2","3","0","1","20","20","20","7","20","0","0","1","19","321","37","184","59","107","102","101","151","63","88","7","7","7","3","3","1","44","44","46","26","normal"
"48296","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48296 Generics and JavaDoc fixes Patch provided by sebb","Bug 48296  Generics fixes","gener fix","","","""java/org/apache/naming/resources/DirContextURLConnection.java""","4","4","4","2","20","2","14","3","1","0","0","14","14","14","7","14","0","0","1","13","440","93","244","90","130","104","108","169","69","100","10","10","10","8","5","0","60","60","61","40","normal"
"48318","73","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48318 Handle case where WebDAV resource is in directory listing but is not accessible","Bug 48318  WebDAV servlet returns 500 if files not readable","web webdav servlet return file readabl","If a directory contains a file that is not readable by the Tomcat
process (eg file permissions, dangling symlink) then Tomcat throws a
NullPointerException and returns a 500 Internal Server Error to the
client.

Throwing NPE in these circumstances is certainly wrong.  Returning 500
with no further information is unhelpful behavior and should be fixed.
Generally, interfaces of this type at least list inaccessible files
(Windows Explorer, UNIX ls(1), BSD FTP client, ...) and only return an
error when one attempts to access such a file.

markt suggests an alternative of simply ignoring inaccessible files but notes
that ""could cause issues if a user tries to upload a file of that name"" and
suggests better error reporting.


Stack:

    SEVERE: Servlet.service() for servlet webdav threw exception
    java.lang.NullPointerException
            at org.apache.catalina.servlets.WebdavServlet.parseProperties(Unknown Source)
            at org.apache.catalina.servlets.WebdavServlet.doPropfind(Unknown Source)
            at org.apache.catalina.servlets.WebdavServlet.service(Unknown Source)
            at javax.servlet.http.HttpServlet.service(Unknown Source)
            ...


Method parseProperties() is in
java/org/apache/catalina/servlets/WebdavServlet.java.org and the NPE
happens when cacheEntry.attributes is null (case FIND_BY_PROPERTY in my
testing and possibly in other cases too).

Following the breadcrumbs via:

    cacheEntry = resources.lookupCache(path);

leads eventually to java/org/apache/naming/resources/FileDirContext.java:

    public Attributes getAttributes(String name, String[] attrIds)
        throws NamingException {
        // Building attribute list
        File file = file(name);
        if (file == null)
            throw new NamingException
                (sm.getString(""resources.notFound"", name));
    ...
    protected File file(String name) {
        File file = new File(base, name);
        if (file.exists() && file.canRead()) {
            ... // do useful stuff
        } else {
            return null; // ouch
        }","directori contain file readabl tomcat process file permiss dangl symlink tomcat throw null pointer except nullpointerexcept return intern server error client throw npe circumst certainli wrong return inform unhelp behavior fix gener interfac type least list inaccess file window explor unix l bsd ftp client return error one attempt access file markt suggest altern simpli ignor inaccess file note could caus issu user tri upload file name suggest better error report stack sever servlet servic servlet webdav threw except java lang null pointer except nullpointerexcept apach catalina servlet webdav servlet webdavservlet pars properti parseproperti unknown sourc apach catalina servlet webdav servlet webdavservlet do propfind dopropfind unknown sourc apach catalina servlet webdav servlet webdavservlet servic unknown sourc javax servlet http http servlet httpservlet servic unknown sourc method pars properti parseproperti java apach catalina servlet webdav servlet webdavservlet java npe happen cach entri cacheentri attribut null case find properti test possibl case follow breadcrumb via cach entri cacheentri resourc lookup cach lookupcach path lead eventu java apach name resourc file dir context filedircontext java public attribut get attribut getattribut string name string attr id attrid throw name except namingexcept build attribut list file file file name file null throw new name except namingexcept sm get string getstr resourc not found notfound name protect file file string name file file new file base name file exist file can read canread use stuff els return null ouch","""java/org/apache/catalina/servlets/WebdavServlet.java""","8","8","9","3","64","10","45","8","4","2","46","38","38","36","14","38","0","15","14","9","3137","631","1896","428","1478","611","954","1273","344","929","67","63","74","16","6","0","327","317","353","115","normal"
"48324","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48324 Correct JavaDoc. Patch by sebb","Bug 48324  Javadoc fixes for connector.Request.java","javadoc fix connector request java","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","14","1","8","4","1","2","5","147","147","145","48","147","1","0","12","134","2889","558","1422","405","904","919","696","1041","389","652","20","20","24","10","3","1","349","349","390","212","normal"
"48345","23","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48345 Patch provided by Keiichi Fujino","Bug 48345  Session does time-out shorter than setting in web.xml when PersistentManager is used.","session time out timeout shorter set web xml persist manag persistentmanag use","I am encountering the problem that Session does time-out shorter than setting in web.xml.

This is a simple scenario where the problem occurs. 

I am using PersistentManager by the following configuration.
<Context>
  <Manager className=""org.apache.catalina.session.PersistentManager""
           maxIdleSwap=""120"">
    <Store className=""org.apache.catalina.session.FileStore""/>
  </Manager>
</Context>

I am setting the session-timeout at five minutes.
<session-config>
    <session-timeout>5</session-timeout>
</session-config>

[scenario]
1. Create Session.
2. 120 seconds pass. 
   Session does swapOut. 
3. In addition, 120 seconds pass. 
   Get Session.
   Session does swapIn and access time of session in the memory is updated. 
4. In addition, 90 seconds pass.
   Get Session.

Because the access time of the session has been updated in (3),
The session should be able to be acquired.
However, the session can not be acquired. 

This cause is StoreBase#processExpires invoked between (3) and (4).
StoreBase#processExpire deletes the session saved in Store.
StoreBase#processExpires is as follows.

=====StoreBase#processExpires=====
public void processExpires() {
...
    for (int i = 0; i < keys.length; i++) {
        try {
            StandardSession session = (StandardSession) load(keys[i]);
            if (session == null) {
                continue;
            }
            if (session.isValid()) {
                continue;
            }
              ...
            if ( ( (PersistentManagerBase) manager).isLoaded( keys[i] )) {
                // recycle old backup session
                session.recycle();
            } else {
                // expire swapped out session
                session.expire();
            }
            remove(session.getIdInternal());
        } catch (Exception e) {
            ...
        }
    }
}
======

The session saved in Store is loaded, and StandardSession#isValid() is executed. 
StandardSession#expire(true) is invoked for the session that passes 
session time-out in ""StandardSession#isValid()"". 

StandardSession#expire(true) invokes Manager#remove(Session).
As a result, the session is deleted from the session map. 

In a word, session in memory is deleted by invalidating old session in Store. 
As a result, session does time-out shorter than setting in web.xml

I made a patch against trunk.

Best regards.","encount problem session time out timeout shorter set web xml simpl scenario problem occur use persist manag persistentmanag follow configur context manag class name classnam apach catalina session persist manag persistentmanag max idl swap maxidleswap store class name classnam apach catalina session file store filestor manag context set session timeout sessiontimeout five minut session config sessionconfig session timeout sessiontimeout session timeout sessiontimeout session config sessionconfig scenario creat session second pa session swap out swapout addit second pa get session session swap in swapin access time session memori updat addit second pa get session access time session updat session abl acquir howev session acquir caus store base storebas process expir processexpir invok store base storebas process expir processexpir delet session save store store base storebas process expir processexpir follow store base storebas process expir processexpir public void process expir processexpir int key length tri standard session standardsess session standard session standardsess load key session null continu session is valid isvalid continu persist manag base persistentmanagerbas manag is load isload key recycl old backup session session recycl els expir swap session session expir remov session get id intern getidintern catch except session save store load standard session standardsess is valid isvalid execut standard session standardsess expir true invok session pass session time out timeout standard session standardsess is valid isvalid standard session standardsess expir true invok manag remov session result session delet session map word session memori delet invalid old session store result session time out timeout shorter set web xml made patch trunk best regard","""java/org/apache/catalina/session/StoreBase.java""","2","2","2","1","13","0","7","5","1","0","3","12","12","12","4","12","0","0","0","12","265","46","106","35","57","113","53","78","35","43","11","11","11","7","3","1","24","24","24","18","normal"
"48370","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48370 Remove some unused imports","Bug 48370  PublishRequest.java can not be compiled","publish request publishrequest java compil","There is a log used in org.apache.tomcat.bayeux.request.PublishRequest,but it was not be defined,so the class can not be complied successfully,there should be something like this?

private static final Log log = LogFactory.getLog(PublishRequest.class);","log use apach tomcat bayeux request publish request publishrequest defin class compli success someth like privat static final log log log factori logfactori get log getlog publish request publishrequest class","""modules/bayeux/java/org/apache/tomcat/bayeux/request/PublishRequest.java""","5","5","7","2","26","1","20","4","1","0","1","3","3","3","1","3","0","0","0","3","140","14","89","34","53","38","59","75","33","42","11","11","13","5","3","0","17","17","22","7","normal"
"48371","64","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48371 Skip comments when working out where to insert generated servlets and associated mappings","Bug 48371  addWebXmlMappings does not place servlet tags correctly","add web xml map addwebxmlmap place servlet tag correctli","If there is a commented-out <security-constraint> or commented-out <servlet> tag and addWebXmlMappings=""true"", the JSP's servlet and servlet-mapping tags are placed incorrectly and Tomcat will not start due to ""--"" being inside a comment.

Basically, it seems the web.xml is not parsed correctly when using addWebXmlMappings and you cannot have above tags commented out, or new servlet tags will be placed incorrectly and comment tags not respected.","comment out commentedout secur constraint securityconstraint comment out commentedout servlet tag add web xml map addwebxmlmap true jsp servlet servlet map servletmap tag place incorrectli tomcat start due insid comment basic seem web xml pars correctli use add web xml map addwebxmlmap cannot tag comment new servlet tag place incorrectli comment tag respect","""java/org/apache/jasper/JspC.java""","2","2","3","1","13","0","10","2","1","1","34","80","80","79","47","80","0","0","11","69","1420","167","947","274","603","306","465","689","263","426","36","36","36","29","5","0","225","225","240","138","minor"
"48373","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48373 Patch suggested by wujunchen","Bug 48373  Can not get clients from TomcatBayeux","get client tomcat bayeux tomcatbayeux","When call the getClients method,there will be a Exception:
java.lang.ArrayStoreException: java.util.HashMap$Entry

maybe this method should be:

public List<Client> getClients() {
    return java.util.Arrays.asList(clients.values().toArray(new Client[0]));
}

instead of this:

public List<Client> getClients() {
    return java.util.Arrays.asList(clients.entrySet().toArray(new Client[0]));
}","call get client getclient method except java lang array store except arraystoreexcept java util hash map hashmap entri mayb method public list client get client getclient return java util array list aslist client valu to array toarray new client instead public list client get client getclient return java util array list aslist client entri set entryset to array toarray new client","""modules/bayeux/java/org/apache/tomcat/bayeux/TomcatBayeux.java""","1","1","1","1","4","0","3","0","1","1","1","22","22","21","4","22","0","0","4","18","176","28","106","47","44","42","54","83","48","35","3","3","3","1","1","0","27","27","28","22","normal"
"48384","61","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48384 Add a per context xslt option for directory listings Make the fallback options work as described in the docs","Bug 48384  globalXsltFile parameter for the DefaultServlet","global xslt file globalxsltfil paramet default servlet defaultservlet","When overriding the DefaultServlet for a given application, the globalXsltFile path need to be relative to Tomcat root.

for example:
<init-param>
<param-name>globalXsltFile</param-name>
<param-value>webapps/quercus/WEB-INF/listing.xsl</param-value>
</init-param>

it would be nice if the path could be relative to the application context.","overrid default servlet defaultservlet given applic global xslt file globalxsltfil path need rel tomcat root exampl init param initparam param name paramnam global xslt file globalxsltfil param name paramnam param valu paramvalu webapp quercu web inf list xsl param valu paramvalu init param initparam would nice path could rel applic context","""java/org/apache/catalina/servlets/DefaultServlet.java""","5","5","7","2","48","7","29","11","2","0","7","39","39","39","15","39","0","0","35","4","2195","422","1258","344","907","520","624","855","258","597","42","42","52","14","5","0","230","230","273","110","trivial"
"48387","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48387 Make configuration attributes consistent between Filter and Valves Patch provided by Cyrille Le Clerc","Bug 48387  Make RemoteIpFilter parameters consistent with RemoteIpValve","make remot ip filter remoteipfilt paramet consist remot ip valv remoteipvalv","","","""java/org/apache/catalina/filters/RemoteIpFilter.java""","2","2","2","1","9","0","7","2","3","4","10","42","42","38","13","42","0","0","6","36","939","85","366","132","193","489","173","257","127","130","13","13","14","5","3","1","84","84","91","50","normal"
"48399","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48399 Make locks final Patch by sebb","Bug 48399  Lock fields should be final","lock field final","","","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","7","4","2","0","2","52","52","52","6","52","0","2","7","43","855","103","463","141","259","291","230","345","123","222","8","8","10","5","3","1","101","101","115","63","normal"
"48399","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48399 Make locks final Patch by sebb","Bug 48399  Lock fields should be final","lock field final","","","""java/org/apache/catalina/tribes/group/interceptors/OrderInterceptor.java""","2","2","2","1","8","0","7","0","3","1","0","27","27","26","13","27","0","0","5","22","333","43","235","77","141","57","129","191","74","117","12","12","14","5","3","0","57","57","60","31","normal"
"48399","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48399 Make locks final Patch by sebb","Bug 48399  Lock fields should be final","lock field final","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/MultiLockFairBlockingQueue.java""","1","1","1","1","9","0","6","2","4","0","0","43","43","43","13","43","0","0","0","43","537","57","306","103","171","175","164","241","109","132","4","4","6","4","3","1","66","66","70","54","normal"
"48421","22","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48421 Clean up a web application's logs and handlers when it stops. This involved modifying the fix that prevented log messages being lost in shutdown.","Bug 48421  JULI webapp logging files will not closed when webapp is stopped,reloaded or undeployed","juli webapp log file close webapp stop reload undeploy","In Tomcat 6  the JULI logging files which are (can be) declared in webapp/WEB-INF/classes/logging.properties will not closed, when the
webapp is reloaded, stopped or even undeployed. The files will at last be closed, when tomcat is shut down or restarted.

This is also true for the normally used Handler org.apache.juli.FileHandler, which opens a new File every day and closes the old.

On windows this has following effects:
A) If  the webapp is undeployed the files which are open at this moment are locked and cannot be deleted until tomcat is (someday) stopped or restarted.
B) If the webapp is reloaded the file is opened a second time. So the file has two open handles.
The next day the FileHandler closes one handle but the file is kept locked through the other handle and cannot be deleted.

Every time a webapp is reloaded the associated logfile is opened again (but not closed).
This has the consequence that after reloading webapps a few times tomcat must be restarted from time to time.

When tomcat is shutdown the unnecessary (and other) open files are closed and will get the shutdown time as modification time.
That means any old log files will receive a current modification time, which is irritating.

Steps to verify on windows: (for example: undeploy)
1. create in the examples webapp: of tomcat 6.0.20:
examples/WEB-INF/classes/logging.properties:

handlers = org.apache.juli.FileHandler
org.apache.juli.FileHandler.level = FINE
org.apache.juli.FileHandler.directory = ${catalina.base}/logs
org.apache.juli.FileHandler.prefix = servlet-examples.

2. start tomcat
3. undeploy examples using manager
Actual Results:
file ${catalina.base}/logs/servlet-examples.<date>.log cannot be deleted (nor at the next day)
Expected:
file ${catalina.base}/logs/servlet-examples.<date>.log can be deleted

very cumbersome Workaround (working for reload):
The getHead method of a custom Formatter is extended to track the handlers along with the classloader and webapp.
If for a webapp a different (i.e. new) classloader is detected the close method of the handlers assigned to the old classloader is called. So the assigned file is proper closed (and the Formatter.getTail result is appended)

I have set severity at minor because tomcat can be used (without webapp logging). But it is a bug because with this logging the same logfile can be useless multiple open (as described above), which should be considered as buggy.","tomcat juli log file declar webapp web inf class log properti close webapp reload stop even undeploy file last close tomcat shut restart true normal use handler apach juli file handler filehandl open new file everi day close old window follow effect webapp undeploy file open moment lock cannot delet tomcat someday stop restart webapp reload file open second time file two open handl next day file handler filehandl close one handl file kept lock handl cannot delet everi time webapp reload associ logfil open close consequ reload webapp time tomcat must restart time time tomcat shutdown unnecessari open file close get shutdown time modif time mean old log file receiv current modif time irrit step verifi window exampl undeploy creat exampl webapp tomcat exampl web inf class log properti handler apach juli file handler filehandl apach juli file handler filehandl level fine apach juli file handler filehandl directori catalina base log apach juli file handler filehandl prefix servlet exampl servletexampl start tomcat undeploy exampl use manag actual result file catalina base log servlet exampl servletexampl date log cannot delet next day expect file catalina base log servlet exampl servletexampl date log delet cumbersom workaround work reload get head gethead method custom formatt extend track handler along classload webapp webapp differ new classload detect close method handler assign old classload call assign file proper close formatt get tail gettail result append set sever minor tomcat use without webapp log log logfil useless multipl open describ consid buggi","""java/org/apache/juli/ClassLoaderLogManager.java""","3","3","3","1","21","1","15","4","7","1","0","23","23","22","9","23","6","1","5","11","615","87","396","133","241","132","183","272","119","153","15","15","19","7","5","0","83","83","90","36","minor"
"48421","22","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48421 Clean up a web application's logs and handlers when it stops. This involved modifying the fix that prevented log messages being lost in shutdown.","Bug 48421  JULI webapp logging files will not closed when webapp is stopped,reloaded or undeployed","juli webapp log file close webapp stop reload undeploy","In Tomcat 6  the JULI logging files which are (can be) declared in webapp/WEB-INF/classes/logging.properties will not closed, when the
webapp is reloaded, stopped or even undeployed. The files will at last be closed, when tomcat is shut down or restarted.

This is also true for the normally used Handler org.apache.juli.FileHandler, which opens a new File every day and closes the old.

On windows this has following effects:
A) If  the webapp is undeployed the files which are open at this moment are locked and cannot be deleted until tomcat is (someday) stopped or restarted.
B) If the webapp is reloaded the file is opened a second time. So the file has two open handles.
The next day the FileHandler closes one handle but the file is kept locked through the other handle and cannot be deleted.

Every time a webapp is reloaded the associated logfile is opened again (but not closed).
This has the consequence that after reloading webapps a few times tomcat must be restarted from time to time.

When tomcat is shutdown the unnecessary (and other) open files are closed and will get the shutdown time as modification time.
That means any old log files will receive a current modification time, which is irritating.

Steps to verify on windows: (for example: undeploy)
1. create in the examples webapp: of tomcat 6.0.20:
examples/WEB-INF/classes/logging.properties:

handlers = org.apache.juli.FileHandler
org.apache.juli.FileHandler.level = FINE
org.apache.juli.FileHandler.directory = ${catalina.base}/logs
org.apache.juli.FileHandler.prefix = servlet-examples.

2. start tomcat
3. undeploy examples using manager
Actual Results:
file ${catalina.base}/logs/servlet-examples.<date>.log cannot be deleted (nor at the next day)
Expected:
file ${catalina.base}/logs/servlet-examples.<date>.log can be deleted

very cumbersome Workaround (working for reload):
The getHead method of a custom Formatter is extended to track the handlers along with the classloader and webapp.
If for a webapp a different (i.e. new) classloader is detected the close method of the handlers assigned to the old classloader is called. So the assigned file is proper closed (and the Formatter.getTail result is appended)

I have set severity at minor because tomcat can be used (without webapp logging). But it is a bug because with this logging the same logfile can be useless multiple open (as described above), which should be considered as buggy.","tomcat juli log file declar webapp web inf class log properti close webapp reload stop even undeploy file last close tomcat shut restart true normal use handler apach juli file handler filehandl open new file everi day close old window follow effect webapp undeploy file open moment lock cannot delet tomcat someday stop restart webapp reload file open second time file two open handl next day file handler filehandl close one handl file kept lock handl cannot delet everi time webapp reload associ logfil open close consequ reload webapp time tomcat must restart time time tomcat shutdown unnecessari open file close get shutdown time modif time mean old log file receiv current modif time irrit step verifi window exampl undeploy creat exampl webapp tomcat exampl web inf class log properti handler apach juli file handler filehandl apach juli file handler filehandl level fine apach juli file handler filehandl directori catalina base log apach juli file handler filehandl prefix servlet exampl servletexampl start tomcat undeploy exampl use manag actual result file catalina base log servlet exampl servletexampl date log cannot delet next day expect file catalina base log servlet exampl servletexampl date log delet cumbersom workaround work reload get head gethead method custom formatt extend track handler along classload webapp webapp differ new classload detect close method handler assign old classload call assign file proper close formatt get tail gettail result append set sever minor tomcat use without webapp log log logfil useless multipl open describ consid buggi","""java/org/apache/juli/logging/LogFactory.java""","1","1","1","1","12","0","3","9","1","6","5","15","15","9","1","15","1","1","0","13","363","50","67","33","23","247","24","41","25","16","2","2","2","1","1","4","16","16","16","15","minor"
"48424","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48424 Based on a patch by Ivan Ensure that the ObjectNames for the Connectors are always generated using the same method","Bug 48424  Keep same logic for creating the objectnames for connector mbeans","keep logic creat objectnam connector mbean","Currently, for connector MBeans, they are registered and unregistered by Connector classes themselves. But in the ServerLifecycle and MBeanUtils, there are also codes for unregistering the connector MBeans. Suppose it is used for double check ?
The question is that the codes for creating connector object name are not same, in the MBeanUtils, it always assume that address property is of String type, sometimes that a ClassCastException would be thrown.","current connector bean mbean regist unregist connector class server lifecycl serverlifecycl bean util mbeanutil code unregist connector bean mbean suppos use doubl check question code creat connector object name bean util mbeanutil alway assum address properti string type sometim class cast except classcastexcept would thrown","""java/org/apache/catalina/connector/Connector.java""","1","1","1","1","12","1","6","5","1","0","5","71","71","71","31","71","0","0","2","69","1231","305","531","161","310","395","233","356","145","211","12","12","12","3","3","1","123","123","128","75","normal"
"48424","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48424 Based on a patch by Ivan Ensure that the ObjectNames for the Connectors are always generated using the same method","Bug 48424  Keep same logic for creating the objectnames for connector mbeans","keep logic creat objectnam connector mbean","Currently, for connector MBeans, they are registered and unregistered by Connector classes themselves. But in the ServerLifecycle and MBeanUtils, there are also codes for unregistering the connector MBeans. Suppose it is used for double check ?
The question is that the codes for creating connector object name are not same, in the MBeanUtils, it always assume that address property is of String type, sometimes that a ClassCastException would be thrown.","current connector bean mbean regist unregist connector class server lifecycl serverlifecycl bean util mbeanutil code unregist connector bean mbean suppos use doubl check question code creat connector object name bean util mbeanutil alway assum address properti string type sometim class cast except classcastexcept would thrown","""java/org/apache/catalina/mbeans/MBeanUtils.java""","3","3","3","1","27","2","16","8","1","52","4","52","52","0","0","52","47","0","0","5","1620","237","914","385","628","470","461","657","297","360","13","13","13","3","2","1","191","191","192","56","normal"
"48443","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48443 Correct FileNotFoundException on ROOT context start when annotation scanning is enabled Patch provided by wujunchen","Bug 48443  when the context path is empty,tomcat will startup with a FileNotFoundException","context path empti tomcat startup file not found except filenotfoundexcept","","","""java/org/apache/naming/resources/DirContextURLConnection.java""","4","4","4","2","21","2","14","4","1","0","0","14","14","14","7","14","0","0","1","13","450","95","245","93","130","112","110","171","71","100","10","10","10","8","5","0","60","60","61","40","normal"
"48454","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48454 Give the stderr reader a chance to finish before terminating the CGI process. This avoids ""Bad file descriptor"" errors. The period to wait is configurable. Based on a patch by Markus Grieder","Bug 48454  ""Bad file descriptor""-IOException in CGIServlet for some programs","bad file descriptor except ioexcept servlet cgiservlet program","","","""java/org/apache/catalina/servlets/CGIServlet.java""","4","4","5","1","45","4","26","14","5","0","8","32","32","32","24","32","1","3","24","4","1922","267","924","216","689","742","510","653","192","461","27","27","30","7","5","1","147","142","172","42","normal"
"48498","40","Mark Emlyn David Thomas","Workaround Java 6/7 bug described in https://issues.apache.org/bugzilla/show_bug.cgi?id=48498 Avoid the ArrayIndexOutOfBoundsException","Bug 48498  6.0.22RC: ArrayIndexOutOfBoundsException from Jasper when compilation error inside a CDATA block","22 22rc array index out of bound except arrayindexoutofboundsexcept jasper compil error insid cdata block","","","""java/org/apache/jasper/compiler/JavacErrorDetail.java""","2","2","2","1","18","1","10","7","1","0","0","9","9","9","6","9","0","1","0","8","223","26","107","44","54","90","56","77","38","39","11","11","12","6","5","1","20","20","21","14","normal"
"48516","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48516 Fix possible NPE when user does not exist in directory Patch provided by Kevin Conaway","Bug 48516  NullPointerException in JNDIRealm","null pointer except nullpointerexcept realm jndirealm","","","""java/org/apache/catalina/realm/JNDIRealm.java""","3","2","3","1","22","3","11","7","2","0","3","75","75","75","33","75","1","2","21","51","2235","477","935","282","619","826","454","678","240","438","28","28","33","14","7","1","225","221","248","121","normal"
"48517","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48517 Reduce scope of @SupressWarnings and document reasoning Based on a patch by sebb","Bug 48517  @SuppressWarnings(""unchecked"") - document and reduce scope","suppress warn suppresswarn uncheck document reduc scope","","","""java/javax/el/BeanELResolver.java""","3","3","3","1","13","0","12","0","4","1","0","25","25","24","12","25","0","6","0","19","444","59","362","102","210","24","160","240","90","150","18","18","19","8","3","0","81","81","90","45","enhancement"
"48517","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48517 Reduce scope of @SupressWarnings and document reasoning Based on a patch by sebb","Bug 48517  @SuppressWarnings(""unchecked"") - document and reduce scope","suppress warn suppresswarn uncheck document reduc scope","","","""java/javax/el/ELContext.java""","1","1","1","1","5","0","4","0","1","0","0","7","10","10","3","10","0","0","0","10","84","18","44","20","13","24","20","31","18","13","3","3","4","1","1","1","10","10","11","7","enhancement"
"48517","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48517 Reduce scope of @SupressWarnings and document reasoning Based on a patch by sebb","Bug 48517  @SuppressWarnings(""unchecked"") - document and reduce scope","suppress warn suppresswarn uncheck document reduc scope","","","""java/javax/el/ResourceBundleELResolver.java""","2","2","2","1","13","1","12","0","1","0","0","7","7","7","0","7","0","0","0","7","135","18","101","35","49","17","42","63","21","42","5","5","5","4","3","0","20","20","20","10","enhancement"
"48517","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48517 Reduce scope of @SupressWarnings and document reasoning Based on a patch by sebb","Bug 48517  @SuppressWarnings(""unchecked"") - document and reduce scope","suppress warn suppresswarn uncheck document reduc scope","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","6","6","6","2","33","3","22","7","4","1","6","70","70","69","31","70","3","8","20","39","2892","467","1733","403","1207","694","817","1237","361","876","42","42","48","28","9","0","424","424","454","187","enhancement"
"48517","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48517 Reduce scope of @SupressWarnings and document reasoning Based on a patch by sebb","Bug 48517  @SuppressWarnings(""unchecked"") - document and reduce scope","suppress warn suppresswarn uncheck document reduc scope","","","""java/org/apache/el/lang/ELSupport.java""","4","4","6","4","19","0","16","3","1","22","1","23","23","1","0","23","0","0","2","21","519","38","390","71","246","91","140","247","58","189","14","14","20","14","3","0","111","109","157","102","enhancement"
"48517","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48517 Reduce scope of @SupressWarnings and document reasoning Based on a patch by sebb","Bug 48517  @SuppressWarnings(""unchecked"") - document and reduce scope","suppress warn suppresswarn uncheck document reduc scope","","","""java/org/apache/el/lang/EvaluationContext.java""","1","1","1","1","3","0","3","0","1","0","0","11","11","11","3","11","0","0","0","11","92","18","58","33","13","18","22","34","21","13","1","1","1","1","0","0","11","11","11","11","enhancement"
"48517","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48517 Reduce scope of @SupressWarnings and document reasoning Based on a patch by sebb","Bug 48517  @SuppressWarnings(""unchecked"") - document and reduce scope","suppress warn suppresswarn uncheck document reduc scope","","","""java/org/apache/el/parser/AstIdentifier.java""","2","2","2","2","11","0","10","0","1","0","0","8","8","8","0","8","0","1","0","7","145","16","103","40","53","26","42","64","28","36","6","6","6","3","2","0","21","21","21","16","enhancement"
"48517","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48517 Reduce scope of @SupressWarnings and document reasoning Based on a patch by sebb","Bug 48517  @SuppressWarnings(""unchecked"") - document and reduce scope","suppress warn suppresswarn uncheck document reduc scope","","","""java/org/apache/el/parser/AstValue.java""","2","2","3","1","13","0","12","0","2","0","1","9","9","9","2","9","0","2","0","7","190","26","136","58","79","28","69","92","46","46","6","6","8","4","2","0","22","22","28","14","enhancement"
"48517","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48517 Reduce scope of @SupressWarnings and document reasoning Based on a patch by sebb","Bug 48517  @SuppressWarnings(""unchecked"") - document and reduce scope","suppress warn suppresswarn uncheck document reduc scope","","","""java/org/apache/el/parser/SimpleNode.java""","1","1","1","1","4","0","4","0","1","0","0","20","20","20","4","20","0","0","0","20","167","30","104","43","35","33","41","70","36","34","4","4","4","1","3","0","29","29","30","20","enhancement"
"48517","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48517 Reduce scope of @SupressWarnings and document reasoning Based on a patch by sebb","Bug 48517  @SuppressWarnings(""unchecked"") - document and reduce scope","suppress warn suppresswarn uncheck document reduc scope","","","""java/org/apache/naming/resources/VirtualDirContext.java""","3","3","4","2","16","2","10","3","1","0","0","8","8","8","3","8","0","2","2","4","226","33","108","44","57","85","51","78","38","40","7","7","10","7","3","1","25","25","32","20","enhancement"
"48523","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48523 Resolve duplicate keys","Bug 48523  Duplicate property keys in various files","duplic properti key variou file","There are some properties files with non-unique property keys; normally these should be unique.

File: java\org\apache\catalina\realm\LocalStrings.properties
Duplicate key: 'jaasRealm.userPrincipalSuccess'
jaasRealm.userPrincipalSuccess=Principal ""{0}"" is a valid user class. We will use this as the user Principal.
jaasRealm.userPrincipalSuccess=Subject for username ""{0}"" returned user Principal ""{1}""
Duplicate key: 'jaasRealm.userPrincipalFailure'
jaasRealm.userPrincipalFailure=No valid user Principal found
jaasRealm.userPrincipalFailure=Subject for username ""{0}"" did not return a valid user Principal
File: java\org\apache\catalina\realm\LocalStrings_es.properties
Duplicate key: 'jaasRealm.userPrincipalSuccess'
jaasRealm.userPrincipalSuccess = El Principal ""{0}"" es una clase v\u00E1lida de usuario. La vamos a usar como usuario Principal.
jaasRealm.userPrincipalSuccess = El asunto para el nombre de usuario ""{0}"" devolvi\u00F3 usuario Principal ""{1}""
Duplicate key: 'jaasRealm.userPrincipalFailure'
jaasRealm.userPrincipalFailure = No se ha hallado usuario Principal
jaasRealm.userPrincipalFailure = El asunto para el nombre de usuario ""{0}"" no devolvi\u00F3 un usuario Principal v\u00E1lido
File: java\org\apache\catalina\startup\LocalStrings.properties
Duplicate key: 'contextConfig.jndiUrl'
contextConfig.jndiUrl=The connection created for URL [{0}] was not a DirContextURLConnection
contextConfig.jndiUrl=Unable to process JNDI URL [{0}] for annotations
Duplicate key: 'webXml.mergeConflictFilter'
webXml.mergeConflictFilter=The Servlet [{0}] was defined inconsistently in multiple fragments including fragment with name [{1}] located at [{2}]
webXml.mergeConflictFilter=The Filter [{0}] was defined inconsistently in multiple fragments including fragment with name [{1}] located at [{2}]
File: java\org\apache\jasper\resources\LocalStrings.properties
Duplicate key: 'jsp.error.page.invalid.buffer'
jsp.error.page.invalid.buffer=Page directive: invalid value for buffer
jsp.error.page.invalid.buffer=Page directive: invalid buffer size
Duplicate key: 'jsp.error.xml.invalidHighSurrogate'
jsp.error.xml.invalidHighSurrogate = High surrogate bits in UTF-8 sequence must not exceed 0x10 but found 0x{0}.
jsp.error.xml.invalidHighSurrogate = High surrogate bits in UTF-8 sequence must not exceed 0x10 but found 0x{0}.
File: java\org\apache\jasper\resources\LocalStrings_es.properties
Duplicate key: 'jsp.error.page.invalid.buffer'
jsp.error.page.invalid.buffer = Directiva Page\: valor incorrecto para b\u00FAfer
jsp.error.page.invalid.buffer = Directiva Page\: valor incorrecto para buffer
Duplicate key: 'jsp.error.xml.invalidHighSurrogate'
jsp.error.xml.invalidHighSurrogate = Los bits de surrogaci\u00F3n alta en secuencai UTF-8 no deben de exceder 0x10 pero se hall\u00F3 0x{0}.
jsp.error.xml.invalidHighSurrogate = Surrogaci\u00F3n Alta de bits en secuencia UTF-8 no debe de exceder 0x10, pero se hall\u00F3 0x{0}.
File: java\org\apache\jasper\resources\LocalStrings_ja.properties
Duplicate key: 'jsp.error.page.invalid.buffer'
jsp.error.page.invalid.buffer=page\u6307\u793a\u5b50: buffer\u5c5e\u6027\u306e\u5024\u304c\u7121\u52b9\u3067\u3059
jsp.error.page.invalid.buffer=page\u6307\u793a\u5b50: \u7121\u52b9\u306a\u30d0\u30c3\u30d5\u30a1\u30b5\u30a4\u30ba\u3067\u3059
Duplicate key: 'jsp.error.xml.invalidHighSurrogate'
jsp.error.xml.invalidHighSurrogate = UTF-8\u30b7\u30fc\u30b1\u30f3\u30b9\u306e\u30cf\u30a4\u30b5\u30ed\u30b2\u30fc\u30c8\u30d3\u30c3\u30c8\u306f0x10\u3092\u8d8a\u3048\u3066\u306f\u3044\u3051\u307e\u305b\u3093\u304c\u30010x{0}\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f
jsp.error.xml.invalidHighSurrogate = UTF-8\u30b7\u30fc\u30b1\u30f3\u30b9\u306e\u30cf\u30a4\u30b5\u30ed\u30b2\u30fc\u30c8\u30d3\u30c3\u30c8\u306f0x10\u3092\u8d8a\u3048\u3066\u306f\u3044\u3051\u307e\u305b\u3093\u304c\u30010x{0}\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f
File: java\org\apache\tomcat\util\net\res\LocalStrings.properties
Duplicate key: 'endpoint.poll.fail'
endpoint.poll.fail=Socket [{0}] poll event: [{1}] {2}
endpoint.poll.fail=Critical poller failure (restarting poller): [{0}] {1}
File: java\org\apache\tomcat\util\net\res\LocalStrings_es.properties
Duplicate key: 'endpoint.poll.fail'
endpoint.poll.fail = Conector [{0}] evento de encuesta\: [{1}] {2}
endpoint.poll.fail = Fallo cr\u00EDtico de encuestador (reiniciando encuestador)\: [{0}] {1}
File: java\org\apache\tomcat\util\net\res\LocalStrings.properties
Duplicate key: 'endpoint.poll.fail'
endpoint.poll.fail=Socket [{0}] poll event: [{1}] {2}
endpoint.poll.fail=Critical poller failure (restarting poller): [{0}] {1}
File: java\org\apache\tomcat\util\net\res\LocalStrings_es.properties
Duplicate key: 'endpoint.poll.fail'
endpoint.poll.fail = Conector [{0}] evento de encuesta\: [{1}] {2}
endpoint.poll.fail = Fallo cr\u00EDtico de encuestador (reiniciando encuestador)\: [{0}] {1}","properti file non uniqu nonuniqu properti key normal uniqu file java apach catalina realm local string localstr properti duplic key jaa realm jaasrealm user princip success userprincipalsuccess jaa realm jaasrealm user princip success userprincipalsuccess princip valid user class use user princip jaa realm jaasrealm user princip success userprincipalsuccess subject usernam return user princip duplic key jaa realm jaasrealm user princip failur userprincipalfailur jaa realm jaasrealm user princip failur userprincipalfailur valid user princip found jaa realm jaasrealm user princip failur userprincipalfailur subject usernam return valid user princip file java apach catalina realm local string localstr properti duplic key jaa realm jaasrealm user princip success userprincipalsuccess jaa realm jaasrealm user princip success userprincipalsuccess princip clase u00 e1lida u00e1lida usuario vamo usar usuario princip jaa realm jaasrealm user princip success userprincipalsuccess asunto nombr usuario devolvi u00 f3 u00f3 usuario princip duplic key jaa realm jaasrealm user princip failur userprincipalfailur jaa realm jaasrealm user princip failur userprincipalfailur hallado usuario princip jaa realm jaasrealm user princip failur userprincipalfailur asunto nombr usuario devolvi u00 f3 u00f3 usuario princip u00 e1lido u00e1lido file java apach catalina startup local string localstr properti duplic key context config contextconfig jndi url jndiurl context config contextconfig jndi url jndiurl connect creat url dir context connect dircontexturlconnect context config contextconfig jndi url jndiurl unabl process jndi url annot duplic key web xml webxml merg conflict filter mergeconflictfilt web xml webxml merg conflict filter mergeconflictfilt servlet defin inconsist multipl fragment includ fragment name locat web xml webxml merg conflict filter mergeconflictfilt filter defin inconsist multipl fragment includ fragment name locat file java apach jasper resourc local string localstr properti duplic key jsp error page invalid buffer jsp error page invalid buffer page direct invalid valu buffer jsp error page invalid buffer page direct invalid buffer size duplic key jsp error xml invalid high surrog invalidhighsurrog jsp error xml invalid high surrog invalidhighsurrog high surrog bit utf sequenc must exceed 0x10 found 0x jsp error xml invalid high surrog invalidhighsurrog high surrog bit utf sequenc must exceed 0x10 found 0x file java apach jasper resourc local string localstr properti duplic key jsp error page invalid buffer jsp error page invalid buffer directiva page valor incorrecto u00 afer u00faf jsp error page invalid buffer directiva page valor incorrecto buffer duplic key jsp error xml invalid high surrog invalidhighsurrog jsp error xml invalid high surrog invalidhighsurrog bit surrogaci u00 f3n u00f3n alta secuencai utf deben exced 0x10 hall u00 f3 u00f3 0x jsp error xml invalid high surrog invalidhighsurrog surrogaci u00 f3n u00f3n alta bit secuencia utf debe exced 0x10 hall u00 f3 u00f3 0x file java apach jasper resourc local string localstr properti duplic key jsp error page invalid buffer jsp error page invalid buffer page u6307 u793a u5b50 buffer u5c5 u6027 u306 u5024 u304c u7121 u52b9 u3067 u3059 jsp error page invalid buffer page u6307 u793a u5b50 u7121 u52b9 u306a u30d0 u30c3 u30d5 u30a1 u30b5 u30a4 u30ba u3067 u3059 duplic key jsp error xml invalid high surrog invalidhighsurrog jsp error xml invalid high surrog invalidhighsurrog utf u30b7 u30fc u30b1 u30f3 u30b9 u306 u30cf u30a4 u30b5 u30 u30b2 u30fc u30c8 u30d3 u30c3 u30c8 u306f0x10 u3092 u8d8a u3048 u3066 u306f u3044 u3051 u307 u305b u3093 u304c u30010x u304c u898b u3064 u304b u308a u307 u3057 u305f jsp error xml invalid high surrog invalidhighsurrog utf u30b7 u30fc u30b1 u30f3 u30b9 u306 u30cf u30a4 u30b5 u30 u30b2 u30fc u30c8 u30d3 u30c3 u30c8 u306f0x10 u3092 u8d8a u3048 u3066 u306f u3044 u3051 u307 u305b u3093 u304c u30010x u304c u898b u3064 u304b u308a u307 u3057 u305f file java apach tomcat util net re local string localstr properti duplic key endpoint poll fail endpoint poll fail socket poll event endpoint poll fail critic poller failur restart poller file java apach tomcat util net re local string localstr properti duplic key endpoint poll fail endpoint poll fail conector evento encuesta endpoint poll fail fallo cr u00 dtico u00edtico encuestador reiniciando encuestador file java apach tomcat util net re local string localstr properti duplic key endpoint poll fail endpoint poll fail socket poll event endpoint poll fail critic poller failur restart poller file java apach tomcat util net re local string localstr properti duplic key endpoint poll fail endpoint poll fail conector evento encuesta endpoint poll fail fallo cr u00 dtico u00edtico encuestador reiniciando encuestador","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","6","1","34","3","25","5","3","0","11","47","47","47","10","47","0","0","33","14","1921","279","1303","316","917","342","640","947","306","641","18","18","23","10","5","0","289","289","313","67","normal"
"48551","18","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48551 Use entrySet() rather than keySet() + get() Patch provided by sebb","Bug 48551  StringCache: Use entrySet() rather than keySet() + get()","string cach stringcach use entri set entryset rather key set keyset get","","","""java/org/apache/catalina/deploy/WebXml.java""","4","4","4","2","21","1","18","1","1","9","6","85","85","76","35","85","0","8","0","77","2034","159","1667","222","1224","211","681","1193","315","878","111","111","112","89","6","0","387","387","420","221","enhancement"
"48551","18","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48551 Use entrySet() rather than keySet() + get() Patch provided by sebb","Bug 48551  StringCache: Use entrySet() rather than keySet() + get()","string cach stringcach use entri set entryset rather key set keyset get","","","""java/org/apache/tomcat/util/buf/StringCache.java""","3","3","3","1","19","0","14","3","3","8","14","25","25","17","5","25","0","0","6","19","681","111","417","135","281","153","213","305","122","183","14","14","16","9","6","0","85","85","94","49","enhancement"
"48580","26","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48580 Prevent AccessControlException if first access is to a JSP that uses a FunctionMapper","Bug 48580  6.0.24: AccessControlException in ProtectedFunctionMapper on first access to certain JSP","access control except accesscontrolexcept protect function mapper protectedfunctionmapp first access certain jsp","","","""java/org/apache/jasper/security/SecurityClassLoad.java""","3","3","3","1","77","9","68","0","1","1","1","1","1","0","0","1","0","0","0","1","111","15","73","6","65","23","34","38","5","33","3","3","3","1","1","0","3","3","3","1","normal"
"48582","26","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48582 Avoid NPE as config may be null but ctxt won't be","Bug 48582  JspServletWrapper.getServletContext() throws NullPointerException","jsp servlet wrapper jspservletwrapp get servlet context getservletcontext throw null pointer except nullpointerexcept","","","""java/org/apache/jasper/servlet/JspServletWrapper.java""","3","3","4","1","21","1","16","3","1","0","0","19","19","19","15","19","0","0","1","18","522","56","354","83","218","114","148","218","73","145","28","28","30","9","3","0","73","73","78","35","major"
"48643","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48643 Clean up","Bug 48643  catalina.session.FileStore.save() and load() - close() bugs","catalina session file store filestor save load close bug","The code for the save() method reads:

try {
    fos = new FileOutputStream(file.getAbsolutePath());
    oos = new ObjectOutputStream(new BufferedOutputStream(fos));
} catch (IOException e) {
    if (oos != null) { <== oos can only be null here
        try {
            oos.close();
        } catch (IOException f) {
            // Ignore
        }
    }
    throw e;
}

Presumably the catch statement should try to close fos instead?

Similarly for the load() method; at line 280/281 there is the code:

        } catch (IOException e) {
            if (ois != null) {

However, ois is the last object created by the try clause, so must be null.
Probably the code should check and close bis and/or fis.

At the end of the load() method, the code says:

            // Close the input stream
            if (ois != null) {

However, ois cannot be null at that point.

Note: these bugs were detected by the Eclipse compiler.","code save method read tri fo new file output stream fileoutputstream file get absolut path getabsolutepath oo new object output stream objectoutputstream new buffer output stream bufferedoutputstream fo catch except ioexcept oo null oo null tri oo close catch except ioexcept ignor throw presum catch statement tri close fo instead similarli load method line code catch except ioexcept oi null howev oi last object creat tri claus must null probabl code check close fi load method code say close input stream oi null howev oi cannot null point note bug detect compil","""java/org/apache/catalina/session/FileStore.java""","3","3","3","1","23","2","14","6","1","0","4","13","13","13","2","13","0","2","0","11","439","84","219","71","137","136","109","158","67","91","14","14","14","5","3","1","47","47","49","21","minor"
"48643","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48643 Clean up","Bug 48643  catalina.session.FileStore.save() and load() - close() bugs","catalina session file store filestor save load close bug","The code for the save() method reads:

try {
    fos = new FileOutputStream(file.getAbsolutePath());
    oos = new ObjectOutputStream(new BufferedOutputStream(fos));
} catch (IOException e) {
    if (oos != null) { <== oos can only be null here
        try {
            oos.close();
        } catch (IOException f) {
            // Ignore
        }
    }
    throw e;
}

Presumably the catch statement should try to close fos instead?

Similarly for the load() method; at line 280/281 there is the code:

        } catch (IOException e) {
            if (ois != null) {

However, ois is the last object created by the try clause, so must be null.
Probably the code should check and close bis and/or fis.

At the end of the load() method, the code says:

            // Close the input stream
            if (ois != null) {

However, ois cannot be null at that point.

Note: these bugs were detected by the Eclipse compiler.","code save method read tri fo new file output stream fileoutputstream file get absolut path getabsolutepath oo new object output stream objectoutputstream new buffer output stream bufferedoutputstream fo catch except ioexcept oo null oo null tri oo close catch except ioexcept ignor throw presum catch statement tri close fo instead similarli load method line code catch except ioexcept oi null howev oi last object creat tri claus must null probabl code check close fi load method code say close input stream oi null howev oi cannot null point note bug detect compil","""java/org/apache/catalina/session/StandardManager.java""","3","3","4","1","22","2","14","6","3","0","2","25","25","25","7","25","2","0","3","20","762","134","407","104","267","222","189","291","95","196","26","26","26","4","3","1","99","99","103","28","minor"
"48645","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48645 Use specified encoding rather than null","Bug 48645  RequestUtil.URLDecode(byte[] bytes, String enc)","request util requestutil decod urldecod byte byte string enc","the enc is not used in the implementation

  public static String URLDecode(byte[] bytes, String enc) {
        return URLDecode(bytes, null, false);
    }","enc use implement public static string decod urldecod byte byte string enc return decod urldecod byte null fals","""java/org/apache/catalina/util/RequestUtil.java""","4","3","4","2","27","1","14","11","1","13","1","13","13","0","0","13","0","2","0","11","431","60","205","45","146","169","98","148","41","107","12","12","13","10","4","1","55","49","62","28","normal"
"48647","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48647 RemoteIpFilter : request.secure and request.scheme are not forced to ""false"" and ""http"" if X-Forwarded-Proto=http Patch provided by Cyrille Le Clerc","Bug 48647  RemoteIpFilter : request.secure and request.scheme are not forced to ""false"" and ""http"" if X-Forwarded-Proto=http","remot ip filter remoteipfilt request secur request scheme forc fals http forward proto http","","","""java/org/apache/catalina/filters/RemoteIpFilter.java""","2","2","2","1","9","0","7","2","3","4","10","42","42","38","13","42","0","0","6","36","940","85","366","132","193","490","173","257","127","130","13","13","14","5","3","1","84","84","91","50","normal"
"48648","62","Mark Emlyn David Thomas","Fix the immediate problem described in https://issues.apache.org/bugzilla/show_bug.cgi?id=48648 Still need review remainder of bug report","Bug 48648  Blank page (dropped connection) when running TC7 with TCnative (APR)","blank page drop connect run c7 tc7 cnativ tcnativ apr","","","""java/org/apache/tomcat/util/net/AprEndpoint.java""","2","2","3","1","12","0","9","2","9","0","1","83","85","85","59","85","0","0","10","75","1480","224","861","215","601","395","467","712","225","487","31","31","39","9","6","0","228","228","255","108","normal"
"48653","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48653 RemoteIpValve : request.secure and request.scheme are not forced to ""false"" and ""http"" if X-Forwarded-Proto=http Patch provided by Cyrille Le Clerc","Bug 48653  RemoteIpValve : request.secure and request.scheme are not forced to ""false"" and ""http"" if X-Forwarded-Proto=http","remot ip valv remoteipvalv request secur request scheme forc fals http forward proto http","","","""java/org/apache/catalina/valves/RemoteIpValve.java""","2","2","2","1","14","0","8","6","1","4","4","20","20","16","7","20","0","0","4","16","712","46","196","73","112","471","103","148","75","73","12","12","13","5","3","2","42","42","44","26","normal"
"48653","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48653 RemoteIpValve : request.secure and request.scheme are not forced to ""false"" and ""http"" if X-Forwarded-Proto=http Patch provided by Cyrille Le Clerc","Bug 48653  RemoteIpValve : request.secure and request.scheme are not forced to ""false"" and ""http"" if X-Forwarded-Proto=http","remot ip valv remoteipvalv request secur request scheme forc fals http forward proto http","","","""test/org/apache/catalina/valves/TestRemoteIpValve.java""","1","1","1","1","20","3","15","1","2","0","0","16","16","16","2","16","0","1","0","15","386","85","261","107","208","40","214","235","105","130","3","3","3","1","1","0","18","18","18","16","normal"
"48653","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48653 RemoteIpValve : request.secure and request.scheme are not forced to ""false"" and ""http"" if X-Forwarded-Proto=http Patch provided by Cyrille Le Clerc","Bug 48653  RemoteIpValve : request.secure and request.scheme are not forced to ""false"" and ""http"" if X-Forwarded-Proto=http","remot ip valv remoteipvalv request secur request scheme forc fals http forward proto http","","","""test/org/apache/catalina/valves/TestRemoteIpValve.java""","1","1","1","1","20","3","15","1","2","0","0","16","16","16","2","16","0","1","0","15","386","85","261","107","208","40","214","235","105","130","3","3","3","1","1","0","18","18","18","16","normal"
"48661","33","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48661 If the response has been committed, include the error page like Jasper does","Bug 48661  inconsistent error page behavior","inconsist error page behavior","There seems to be a bug or at least an inconsistency in how tomcat handles the error page.

In Tomcat 6.0.20, if I define my error page like this in web.xml:

<error-page>
      <exception-type>java.lang.Exception</exception-type>
      <location>/unexpectedErrors.jsp</location>
</error-page>

Then, if the response has already been committed, Tomcat does this on
the system console:

Feb 1, 2010 5:59:04 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.NullPointerException
       at org.apache.jsp.cpe_jsp._jspService(cpe_jsp.java:693)
       at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
       at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
       at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
       at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
       at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
       at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
       at com.eaglecreektech.expedience.provisioning.web.servletFilters.AuthFilter.doFilter(AuthFilter.java:133)
       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
       at com.eaglecreektech.expedience.provisioning.web.servletFilters.RequestVolumeFilter.doFilter(RequestVolumeFilter.java:141)
       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
       at com.eaglecreektech.expedience.provisioning.web.servletFilters.StartupCheckFilter.doFilter(StartupCheckFilter.java:65)
       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
       at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
       at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
       at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
       at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
       at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
       at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
       at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
       at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
       at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
       at java.lang.Thread.run(Thread.java:619)
Feb 1, 2010 5:59:04 PM org.apache.catalina.core.StandardHostValve custom
SEVERE: Exception Processing
ErrorPage[exceptionType=java.lang.Exception,
location=/unexpectedErrors.jsp]
java.lang.IllegalStateException: Cannot reset buffer after response
has been committed
       at org.apache.catalina.connector.Response.resetBuffer(Response.java:691)
       at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:409)
       at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:271)
       at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
       at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
       at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
       at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
       at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
       at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
       at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
       at java.lang.Thread.run(Thread.java:619)


And it doesn't put any error text into the broken page - the page just
shows how ever far it got before it encountered the error.

This behavior doesn't seem correct - it seems like it should at least
behave the same way as it does when the error page is defined in a jsp
page:

<%@ page errorPage=""unexpectedErrors.jsp"" %>

If the response has already been committed, then it just appends the
error page onto the end of the response (not ideal, but nothing else can be done, as far as I know)

If the response has not been committed, it clears the buffer and
writes the error page (which looks nice and pretty , like it should)

I'd suggest that the error handling code for the error page as defined in web.xml should check if the response has been committed, and not try to clear the buffer if it is already committed - just append to the end, the same way that the jsp error handler does.","seem least inconsist tomcat handl error page tomcat defin error page like web xml error page errorpag except type exceptiontyp java lang except except type exceptiontyp locat unexpect error unexpectederror jsp locat error page errorpag respons alreadi commit tomcat system consol feb pm apach catalina core standard wrapper valv standardwrappervalv invok sever servlet servic servlet jsp threw except java lang null pointer except nullpointerexcept apach jsp cpe jsp jsp servic jspservic cpe jsp java apach jasper runtim http jsp base httpjspbase servic http jsp base httpjspbase java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach jasper servlet jsp servlet wrapper jspservletwrapp servic jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet jspservlet servic jsp file servicejspfil jsp servlet jspservlet java apach jasper servlet jsp servlet jspservlet servic jsp servlet jspservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java eaglecreektech expedi provis web servlet filter servletfilt auth filter authfilt do filter dofilt auth filter authfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java eaglecreektech expedi provis web servlet filter servletfilt request volum filter requestvolumefilt do filter dofilt request volum filter requestvolumefilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java eaglecreektech expedi provis web servlet filter servletfilt startup check filter startupcheckfilt do filter dofilt startup check filter startupcheckfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process http11 protocol http11protocol java apach tomcat util net io endpoint jioendpoint worker run io endpoint jioendpoint java java lang thread run thread java feb pm apach catalina core standard host valv standardhostvalv custom sever except process error page errorpag except type exceptiontyp java lang except locat unexpect error unexpectederror jsp java lang illeg state except illegalstateexcept cannot reset buffer respons commit apach catalina connector respons reset buffer resetbuff respons java apach catalina core standard host valv standardhostvalv custom standard host valv standardhostvalv java apach catalina core standard host valv standardhostvalv throwabl standard host valv standardhostvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process http11 protocol http11protocol java apach tomcat util net io endpoint jioendpoint worker run io endpoint jioendpoint java java lang thread run thread java doesn put error text broken page page show ever far got encount error behavior doesn seem correct seem like least behav way error page defin jsp page page error page errorpag unexpect error unexpectederror jsp respons alreadi commit append error page onto respons ideal noth els done far know respons commit clear buffer write error page look nice pretti like suggest error handl code error page defin web xml check respons commit tri clear buffer alreadi commit append way jsp error handler","""java/org/apache/catalina/core/StandardHostValve.java""","5","5","5","2","42","6","23","12","1","1","3","8","8","7","0","8","0","0","4","4","446","88","219","62","148","139","105","145","49","96","11","11","12","5","3","1","40","40","41","16","minor"
"48662","53","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48662 Make extraction of context.xml files configurable and disable it by default for Tomcat 7","Bug 48662  context.xml expansion on deployment improvements","context xml expans deploy improv","Two parts:

1. Log a warning/info message if Tomcat ignores a bundled context.xml in favour of one in CATALINA_BASE/<engine name>/<host name>

2. Make the extraction/copying of context.xml configurable, probably via a new attribute extractXml on the host","two part log warn info messag tomcat ignor bundl context xml favour one catalina base engin name host name make extract copi context xml configur probabl via new attribut extract xml extractxml host","""java/org/apache/catalina/Context.java""","0","0","0","0","0","0","0","0","1","0","1","0","139","139","0","139","0","0","0","139","1185","289","156","155","1","740","153","154","154","0","0","0","0","0","0","5","0","0","0","0","enhancement"
"48662","53","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48662 Make extraction of context.xml files configurable and disable it by default for Tomcat 7","Bug 48662  context.xml expansion on deployment improvements","context xml expans deploy improv","Two parts:

1. Log a warning/info message if Tomcat ignores a bundled context.xml in favour of one in CATALINA_BASE/<engine name>/<host name>

2. Make the extraction/copying of context.xml configurable, probably via a new attribute extractXml on the host","two part log warn info messag tomcat ignor bundl context xml favour one catalina base engin name host name make extract copi context xml configur probabl via new attribut extract xml extractxml host","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","1","0","3","280","280","280","111","280","0","14","8","258","5906","1245","2959","798","1897","1708","1403","2136","782","1354","57","57","74","9","5","1","662","662","713","355","enhancement"
"48662","53","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48662 Make extraction of context.xml files configurable and disable it by default for Tomcat 7","Bug 48662  context.xml expansion on deployment improvements","context xml expans deploy improv","Two parts:

1. Log a warning/info message if Tomcat ignores a bundled context.xml in favour of one in CATALINA_BASE/<engine name>/<host name>

2. Make the extraction/copying of context.xml configurable, probably via a new attribute extractXml on the host","two part log warn info messag tomcat ignor bundl context xml favour one catalina base engin name host name make extract copi context xml configur probabl via new attribut extract xml extractxml host","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","1","0","3","280","280","280","111","280","0","14","8","258","5906","1245","2959","798","1897","1708","1403","2136","782","1354","57","57","74","9","5","1","662","662","713","355","enhancement"
"48662","53","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48662 Make extraction of context.xml files configurable and disable it by default for Tomcat 7","Bug 48662  context.xml expansion on deployment improvements","context xml expans deploy improv","Two parts:

1. Log a warning/info message if Tomcat ignores a bundled context.xml in favour of one in CATALINA_BASE/<engine name>/<host name>

2. Make the extraction/copying of context.xml configurable, probably via a new attribute extractXml on the host","two part log warn info messag tomcat ignor bundl context xml favour one catalina base engin name host name make extract copi context xml configur probabl via new attribut extract xml extractxml host","""java/org/apache/catalina/core/StandardHost.java""","2","2","2","1","14","1","7","4","2","0","2","47","47","47","17","47","0","0","1","46","937","211","425","143","248","302","199","306","127","179","12","12","13","6","4","1","99","99","100","63","enhancement"
"48662","53","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48662 Make extraction of context.xml files configurable and disable it by default for Tomcat 7","Bug 48662  context.xml expansion on deployment improvements","context xml expans deploy improv","Two parts:

1. Log a warning/info message if Tomcat ignores a bundled context.xml in favour of one in CATALINA_BASE/<engine name>/<host name>

2. Make the extraction/copying of context.xml configurable, probably via a new attribute extractXml on the host","two part log warn info messag tomcat ignor bundl context xml favour one catalina base engin name host name make extract copi context xml configur probabl via new attribut extract xml extractxml host","""java/org/apache/catalina/mbeans/MBeanFactory.java""","2","2","2","1","24","2","13","9","1","0","2","33","33","33","1","33","0","6","0","27","970","153","483","235","312","334","285","355","195","160","6","6","7","5","3","1","71","71","76","49","enhancement"
"48662","53","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48662 Make extraction of context.xml files configurable and disable it by default for Tomcat 7","Bug 48662  context.xml expansion on deployment improvements","context xml expans deploy improv","Two parts:

1. Log a warning/info message if Tomcat ignores a bundled context.xml in favour of one in CATALINA_BASE/<engine name>/<host name>

2. Make the extraction/copying of context.xml configurable, probably via a new attribute extractXml on the host","two part log warn info messag tomcat ignor bundl context xml favour one catalina base engin name host name make extract copi context xml configur probabl via new attribut extract xml extractxml host","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","6","1","34","3","25","5","3","0","11","47","47","47","10","47","0","0","33","14","1916","278","1300","316","914","341","637","943","306","637","18","18","23","10","5","0","288","288","312","67","enhancement"
"48662","53","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48662 Make extraction of context.xml files configurable and disable it by default for Tomcat 7","Bug 48662  context.xml expansion on deployment improvements","context xml expans deploy improv","Two parts:

1. Log a warning/info message if Tomcat ignores a bundled context.xml in favour of one in CATALINA_BASE/<engine name>/<host name>

2. Make the extraction/copying of context.xml configurable, probably via a new attribute extractXml on the host","two part log warn info messag tomcat ignor bundl context xml favour one catalina base engin name host name make extract copi context xml configur probabl via new attribut extract xml extractxml host","""java/org/apache/catalina/startup/HostConfig.java""","4","4","4","1","26","2","19","5","2","1","3","45","45","44","17","45","0","1","19","25","1503","242","915","209","651","346","436","643","202","441","32","32","39","10","7","0","198","198","217","88","enhancement"
"48665","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48665 Correct package in Javadoc Patch provided by Cyrille Le Clerc","Bug 48665  RemoteIpValve examples refer to ""connector"" package","remot ip valv remoteipvalv exampl refer connector packag","","","""java/org/apache/catalina/valves/RemoteIpValve.java""","2","2","2","1","14","0","7","6","1","4","4","22","22","18","8","22","0","0","4","18","756","50","209","77","120","498","110","158","79","79","13","13","13","5","3","2","45","45","46","28","normal"
"48678","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48678 StandardService already defines server. Having two in the type hierarchy just causes confusion","Bug 48678  org.apache.catalina.startup.Catalina incorrectly duplicates super class member","apach catalina startup catalina incorrectli duplic super class member","","","""java/org/apache/catalina/startup/Catalina.java""","2","2","2","1","19","2","13","3","3","1","1","26","26","25","8","26","0","0","5","21","721","164","404","92","281","158","192","270","83","187","13","13","15","9","3","0","75","75","77","36","normal"
"48689","78","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48689 Access TLD files through a new JarResource interface to make extending Jasper simpler, particularly in OSGi environments. Patch provided by Jarek Gawor.","Bug 48689  Jar abstraction for Jasper","jar abstract jasper","Jasper can load TLD files through the ServletContext or from a Jar file. To load TLDs from Jar file, an URL to a Jar file must be passed. However, in some environments (e.g. in OSGi) it might not be easy to provide an URL to a jar file. It would be nice to abstract the way Jasper is looking up the embedded TLDs so that different ways of looking up TLDs within Jar files or Bundles or whatever could be used.","jasper load tld file servlet context servletcontext jar file load tld jar file url jar file must pass howev environ gi osgi might easi provid url jar file would nice abstract way jasper look embed tld differ way look tld within jar file bundl whatev could use","""java/org/apache/jasper/JspCompilationContext.java""","2","2","2","1","10","0","7","2","1","2","1","54","54","52","30","54","0","0","6","48","751","95","484","143","262","173","220","333","130","203","13","11","17","9","6","0","119","117","128","64","enhancement"
"48689","78","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48689 Access TLD files through a new JarResource interface to make extending Jasper simpler, particularly in OSGi environments. Patch provided by Jarek Gawor.","Bug 48689  Jar abstraction for Jasper","jar abstract jasper","Jasper can load TLD files through the ServletContext or from a Jar file. To load TLDs from Jar file, an URL to a Jar file must be passed. However, in some environments (e.g. in OSGi) it might not be easy to provide an URL to a jar file. It would be nice to abstract the way Jasper is looking up the embedded TLDs so that different ways of looking up TLDs within Jar files or Bundles or whatever could be used.","jasper load tld file servlet context servletcontext jar file load tld jar file url jar file must pass howev environ gi osgi might easi provid url jar file would nice abstract way jasper look embed tld differ way look tld within jar file bundl whatev could use","""java/org/apache/jasper/compiler/ImplicitTagLibraryInfo.java""","8","8","9","1","51","5","38","8","1","0","7","3","3","3","4","3","0","0","0","3","220","29","144","54","92","49","74","99","46","53","19","19","24","3","7","0","24","24","29","5","enhancement"
"48689","78","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48689 Access TLD files through a new JarResource interface to make extending Jasper simpler, particularly in OSGi environments. Patch provided by Jarek Gawor.","Bug 48689  Jar abstraction for Jasper","jar abstract jasper","Jasper can load TLD files through the ServletContext or from a Jar file. To load TLDs from Jar file, an URL to a Jar file must be passed. However, in some environments (e.g. in OSGi) it might not be easy to provide an URL to a jar file. It would be nice to abstract the way Jasper is looking up the embedded TLDs so that different ways of looking up TLDs within Jar files or Bundles or whatever could be used.","jasper load tld file servlet context servletcontext jar file load tld jar file url jar file must pass howev environ gi osgi might easi provid url jar file would nice abstract way jasper look embed tld differ way look tld within jar file bundl whatev could use","""java/org/apache/jasper/compiler/JspDocumentParser.java""","5","5","6","1","37","2","33","2","2","3","3","31","31","28","17","31","1","13","0","17","1473","125","1102","198","825","254","336","510","144","366","39","39","46","12","5","0","176","176","214","51","enhancement"
"48689","78","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48689 Access TLD files through a new JarResource interface to make extending Jasper simpler, particularly in OSGi environments. Patch provided by Jarek Gawor.","Bug 48689  Jar abstraction for Jasper","jar abstract jasper","Jasper can load TLD files through the ServletContext or from a Jar file. To load TLDs from Jar file, an URL to a Jar file must be passed. However, in some environments (e.g. in OSGi) it might not be easy to provide an URL to a jar file. It would be nice to abstract the way Jasper is looking up the embedded TLDs so that different ways of looking up TLDs within Jar files or Bundles or whatever could be used.","jasper load tld file servlet context servletcontext jar file load tld jar file url jar file must pass howev environ gi osgi might easi provid url jar file would nice abstract way jasper look embed tld differ way look tld within jar file bundl whatev could use","""java/org/apache/jasper/compiler/JspDocumentParser.java""","5","5","6","1","37","2","33","2","2","3","3","31","31","28","17","31","1","13","0","17","1473","125","1102","198","825","254","336","510","144","366","39","39","46","12","5","0","176","176","214","51","enhancement"
"48689","78","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48689 Access TLD files through a new JarResource interface to make extending Jasper simpler, particularly in OSGi environments. Patch provided by Jarek Gawor.","Bug 48689  Jar abstraction for Jasper","jar abstract jasper","Jasper can load TLD files through the ServletContext or from a Jar file. To load TLDs from Jar file, an URL to a Jar file must be passed. However, in some environments (e.g. in OSGi) it might not be easy to provide an URL to a jar file. It would be nice to abstract the way Jasper is looking up the embedded TLDs so that different ways of looking up TLDs within Jar files or Bundles or whatever could be used.","jasper load tld file servlet context servletcontext jar file load tld jar file url jar file must pass howev environ gi osgi might easi provid url jar file would nice abstract way jasper look embed tld differ way look tld within jar file bundl whatev could use","""java/org/apache/jasper/compiler/Parser.java""","5","5","6","2","25","1","21","2","1","2","3","56","56","54","10","56","1","53","0","2","1770","174","1208","223","890","391","566","878","206","672","20","20","21","20","5","0","313","313","358","120","enhancement"
"48689","78","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48689 Access TLD files through a new JarResource interface to make extending Jasper simpler, particularly in OSGi environments. Patch provided by Jarek Gawor.","Bug 48689  Jar abstraction for Jasper","jar abstract jasper","Jasper can load TLD files through the ServletContext or from a Jar file. To load TLDs from Jar file, an URL to a Jar file must be passed. However, in some environments (e.g. in OSGi) it might not be easy to provide an URL to a jar file. It would be nice to abstract the way Jasper is looking up the embedded TLDs so that different ways of looking up TLDs within Jar files or Bundles or whatever could be used.","jasper load tld file servlet context servletcontext jar file load tld jar file url jar file must pass howev environ gi osgi might easi provid url jar file would nice abstract way jasper look embed tld differ way look tld within jar file bundl whatev could use","""java/org/apache/jasper/compiler/ParserController.java""","4","4","5","2","31","2","20","8","1","0","1","15","15","15","12","15","0","8","0","7","622","63","341","100","220","218","160","226","79","147","17","17","21","9","3","1","65","65","81","35","enhancement"
"48689","78","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48689 Access TLD files through a new JarResource interface to make extending Jasper simpler, particularly in OSGi environments. Patch provided by Jarek Gawor.","Bug 48689  Jar abstraction for Jasper","jar abstract jasper","Jasper can load TLD files through the ServletContext or from a Jar file. To load TLDs from Jar file, an URL to a Jar file must be passed. However, in some environments (e.g. in OSGi) it might not be easy to provide an URL to a jar file. It would be nice to abstract the way Jasper is looking up the embedded TLDs so that different ways of looking up TLDs within Jar files or Bundles or whatever could be used.","jasper load tld file servlet context servletcontext jar file load tld jar file url jar file must pass howev environ gi osgi might easi provid url jar file would nice abstract way jasper look embed tld differ way look tld within jar file bundl whatev could use","""java/org/apache/jasper/compiler/TagFileProcessor.java""","3","3","4","1","26","2","19","4","4","1","8","19","19","18","22","19","6","4","0","9","682","99","468","189","325","121","212","289","132","157","18","18","26","4","3","0","73","73","93","22","enhancement"
"48689","78","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48689 Access TLD files through a new JarResource interface to make extending Jasper simpler, particularly in OSGi environments. Patch provided by Jarek Gawor.","Bug 48689  Jar abstraction for Jasper","jar abstract jasper","Jasper can load TLD files through the ServletContext or from a Jar file. To load TLDs from Jar file, an URL to a Jar file must be passed. However, in some environments (e.g. in OSGi) it might not be easy to provide an URL to a jar file. It would be nice to abstract the way Jasper is looking up the embedded TLDs so that different ways of looking up TLDs within Jar files or Bundles or whatever could be used.","jasper load tld file servlet context servletcontext jar file load tld jar file url jar file must pass howev environ gi osgi might easi provid url jar file would nice abstract way jasper look embed tld differ way look tld within jar file bundl whatev could use","""java/org/apache/jasper/compiler/TagLibraryInfoImpl.java""","8","8","10","1","40","3","33","4","1","0","0","16","16","16","6","16","4","7","0","5","775","80","581","170","431","120","284","424","155","269","21","21","33","4","4","0","138","138","171","19","enhancement"
"48689","78","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48689 Access TLD files through a new JarResource interface to make extending Jasper simpler, particularly in OSGi environments. Patch provided by Jarek Gawor.","Bug 48689  Jar abstraction for Jasper","jar abstract jasper","Jasper can load TLD files through the ServletContext or from a Jar file. To load TLDs from Jar file, an URL to a Jar file must be passed. However, in some environments (e.g. in OSGi) it might not be easy to provide an URL to a jar file. It would be nice to abstract the way Jasper is looking up the embedded TLDs so that different ways of looking up TLDs within Jar files or Bundles or whatever could be used.","jasper load tld file servlet context servletcontext jar file load tld jar file url jar file must pass howev environ gi osgi might easi provid url jar file would nice abstract way jasper look embed tld differ way look tld within jar file bundl whatev could use","""java/org/apache/jasper/compiler/TldLocationsCache.java""","4","4","4","2","22","1","17","3","2","2","8","12","12","10","3","12","0","6","0","6","442","37","247","79","154","158","114","174","75","99","9","9","11","6","5","1","54","54","58","24","enhancement"
"48689","78","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48689 Access TLD files through a new JarResource interface to make extending Jasper simpler, particularly in OSGi environments. Patch provided by Jarek Gawor.","Bug 48689  Jar abstraction for Jasper","jar abstract jasper","Jasper can load TLD files through the ServletContext or from a Jar file. To load TLDs from Jar file, an URL to a Jar file must be passed. However, in some environments (e.g. in OSGi) it might not be easy to provide an URL to a jar file. It would be nice to abstract the way Jasper is looking up the embedded TLDs so that different ways of looking up TLDs within Jar files or Bundles or whatever could be used.","jasper load tld file servlet context servletcontext jar file load tld jar file url jar file must pass howev environ gi osgi might easi provid url jar file would nice abstract way jasper look embed tld differ way look tld within jar file bundl whatev could use","""java/org/apache/jasper/servlet/JspServletWrapper.java""","3","3","4","1","21","1","16","3","1","0","0","20","20","20","16","20","0","0","1","19","539","57","370","86","227","114","154","229","76","153","31","31","33","9","3","0","77","77","82","36","enhancement"
"48692","299","Christopher Schultz","Fixed bug 48692: Provide option to parse application/x-www-form-urlencoded PUT requests","Bug 48692  Provide option to parse application/x-www-form-urlencoded PUT requests","provid option pars applic www form urlencod xwwwformurlencod put request","Provide an option to treat application/x-www-form-urlencoded encoded parameters in a PUT request in a similar manner to application/x-www-form-urlencoded parameters in a POST request","provid option treat applic www form urlencod xwwwformurlencod encod paramet put request similar manner applic www form urlencod xwwwformurlencod paramet post request","""java/org/apache/catalina/connector/Connector.java""","1","1","1","1","12","1","5","5","1","0","5","58","58","58","22","58","0","0","7","51","984","267","388","126","220","329","178","261","113","148","8","8","8","3","2","1","82","82","85","60","enhancement"
"48692","299","Christopher Schultz","Fixed bug 48692: Provide option to parse application/x-www-form-urlencoded PUT requests","Bug 48692  Provide option to parse application/x-www-form-urlencoded PUT requests","provid option pars applic www form urlencod xwwwformurlencod put request","Provide an option to treat application/x-www-form-urlencoded encoded parameters in a PUT request in a similar manner to application/x-www-form-urlencoded parameters in a POST request","provid option treat applic www form urlencod xwwwformurlencod encod paramet put request similar manner applic www form urlencod xwwwformurlencod paramet post request","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","14","1","8","4","1","2","5","153","153","151","52","153","1","1","14","137","3062","591","1548","479","929","932","725","1089","397","692","22","22","24","11","5","1","366","366","407","223","enhancement"
"48692","299","Christopher Schultz","Fixed bug 48692: Provide option to parse application/x-www-form-urlencoded PUT requests","Bug 48692  Provide option to parse application/x-www-form-urlencoded PUT requests","provid option pars applic www form urlencod xwwwformurlencod put request","Provide an option to treat application/x-www-form-urlencoded encoded parameters in a PUT request in a similar manner to application/x-www-form-urlencoded parameters in a POST request","provid option treat applic www form urlencod xwwwformurlencod encod paramet put request similar manner applic www form urlencod xwwwformurlencod paramet post request","""test/org/apache/catalina/connector/TestRequest.java""","1","1","1","1","21","2","15","4","5","0","6","12","12","12","1","12","0","3","3","6","348","61","230","82","160","73","149","177","71","106","5","5","5","4","2","0","23","23","23","15","enhancement"
"48692","299","Christopher Schultz","Fixed bug 48692: Provide option to parse application/x-www-form-urlencoded PUT requests","Bug 48692  Provide option to parse application/x-www-form-urlencoded PUT requests","provid option pars applic www form urlencod xwwwformurlencod put request","Provide an option to treat application/x-www-form-urlencoded encoded parameters in a PUT request in a similar manner to application/x-www-form-urlencoded parameters in a POST request","provid option treat applic www form urlencod xwwwformurlencod encod paramet put request similar manner applic www form urlencod xwwwformurlencod paramet post request","""test/org/apache/catalina/connector/TestRequest.java""","1","1","1","1","21","2","15","4","5","0","6","12","12","12","1","12","0","3","3","6","348","61","230","82","160","73","149","177","71","106","5","5","5","4","2","0","23","23","23","15","enhancement"
"48717","46","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48717 When a node joins a cluster and it receives all the current sessions, ensure the sessionCreated event is fired if the Manager is configured to replicate session events","Bug 48717  Session listeners not called on cluster node start","session listen call cluster node start","","","""java/org/apache/catalina/ha/session/DeltaManager.java""","2","2","2","1","14","0","9","4","1","0","4","88","88","88","36","88","0","0","23","65","1522","149","887","228","576","503","454","664","225","439","14","14","19","4","7","1","220","210","245","97","regression"
"48726","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48726 Prevent OOME when uploading large files with the deployer Patch provided by 'adam'","Bug 48726  DeployTask throws OutOfMemoryErrors when deploying large WAR files","deploy task deploytask throw out of memori error outofmemoryerror deploy larg file","","","""java/org/apache/catalina/ant/AbstractCatalinaTask.java""","2","2","3","1","17","1","12","3","1","0","1","11","11","11","4","11","0","0","0","11","290","53","154","45","96","84","74","107","41","66","21","21","23","7","6","1","32","32","36","17","major"
"48726","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48726 Prevent OOME when uploading large files with the deployer Patch provided by 'adam'","Bug 48726  DeployTask throws OutOfMemoryErrors when deploying large WAR files","deploy task deploytask throw out of memori error outofmemoryerror deploy larg file","","","""java/org/apache/catalina/ant/DeployTask.java""","1","1","2","1","8","0","7","0","1","0","0","13","13","13","6","13","0","0","0","13","207","44","111","36","62","52","52","77","35","42","12","12","17","1","3","0","24","24","29","13","major"
"48729","25","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48729 Return roles defined by both userRoleName and roleName mechanisms Patch provided by 'eric'","Bug 48729  JNDIRealm.java not parsing roles correctly","realm jndirealm java pars role correctli","","","""java/org/apache/catalina/realm/JNDIRealm.java""","2","2","3","1","21","3","10","7","2","0","3","79","79","79","33","79","0","2","23","54","2258","480","953","289","621","828","462","691","247","444","28","28","33","14","7","1","230","226","253","125","normal"
"48737","23","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48737 Don't assume paths that start with /META-INF/... are always in JARs. This is not true for some IDEs Patch provided by Fabrizio Giustina","Bug 48737  JspCompilationContext assumes that tagfile with a path starting with META-INF are in jars without checking","jsp compil context jspcompilationcontext assum tagfil path start meta inf jar without check","","","""java/org/apache/jasper/JspCompilationContext.java""","2","2","2","1","10","0","7","2","1","2","1","54","54","52","30","54","0","0","6","48","744","95","479","143","258","171","218","330","130","200","13","11","17","9","6","0","118","116","126","64","normal"
"48738","191","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48738 Workaround a couple of long standing JDK bugs to enable GZIP compressed output streams to be flushed. Based on a patch provided by Jiong Wang.","Bug 48738  [PATCH]Allow GzipOutputFilter to send partial result when flushBuffer() is called","patch allow gzip output filter gzipoutputfilt send partial result flush buffer flushbuff call","","","""java/org/apache/coyote/http11/AbstractOutputBuffer.java""","2","2","2","1","18","2","9","6","2","0","1","22","24","24","10","24","0","0","6","18","567","139","233","65","140","196","138","187","67","120","7","5","8","4","3","1","50","48","53","25","enhancement"
"48738","191","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48738 Workaround a couple of long standing JDK bugs to enable GZIP compressed output streams to be flushed. Based on a patch provided by Jiong Wang.","Bug 48738  [PATCH]Allow GzipOutputFilter to send partial result when flushBuffer() is called","patch allow gzip output filter gzipoutputfilt send partial result flush buffer flushbuff call","","","""java/org/apache/coyote/http11/filters/GzipOutputFilter.java""","1","1","1","1","7","0","4","3","2","0","2","10","10","10","5","10","0","0","0","10","175","42","69","37","25","66","31","45","27","18","2","2","2","1","1","1","12","12","12","10","enhancement"
"48760","19","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48760 Remove potential race condition that can result in multiple threads trying to use the same InputStream","Bug 48760  Tomcat breaks in serving large files (>=1.8MB) under high load and high threading.","tomcat break serv larg file 8mb high load high thread","","","""java/org/apache/naming/resources/FileDirContext.java""","2","2","2","1","19","1","8","9","3","0","2","42","42","42","8","42","0","0","6","36","1113","208","424","167","227","482","175","273","109","164","13","13","14","8","4","1","94","94","98","54","major"
"48760","19","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48760 Remove potential race condition that can result in multiple threads trying to use the same InputStream","Bug 48760  Tomcat breaks in serving large files (>=1.8MB) under high load and high threading.","tomcat break serv larg file 8mb high load high thread","","","""java/org/apache/naming/resources/WARDirContext.java""","1","1","1","1","17","0","7","9","3","0","1","43","43","43","6","43","0","0","8","35","995","169","374","169","182","452","164","245","116","129","7","7","7","5","5","1","78","78","81","51","major"
"48837","267","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48837 Extend thread local memory leak detection to include classes loaded by subordinate class loaders to the web application's class loader such as the Jasper class loader. Based on a patch by Sylvain Laurent.","Bug 48837  Memory leaks protection does not detect leaks triggered by JSP pages code","memori leak protect detect leak trigger jsp page code","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","6","2","31","3","21","6","4","1","6","87","87","86","36","87","3","11","20","53","3382","531","2032","466","1409","826","926","1402","408","994","43","43","49","28","10","0","487","487","528","210","enhancement"
"48895","17","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48895 Make clearing thread locals optional and disabled by default since it isn't thread-safe","Bug 48895  WebAppClassLoader.clearThreadLocalMap() concurrency issues","web app class loader webappclassload clear thread local map clearthreadlocalmap concurr issu","I think that the memory leak protection of WebAppClassLoader.clearReferencesThreadLocals() which detects and clears ThreadLocals that would prevent GC the WebAppClassLoader instance has issues regarding concurrency :

- It enumerates Threads and looks into internal structures of the Thread class, but there are no ""memory barrier"" that would ensure a consistent state of the ThreadLocalMap being examined.
So, it is theoretically possible that a ThreadLocal in Thread A was properly cleaned up by the application, but the current thread B (that is undeploying the application) does not see the up to date state because there's no synchronization between those threads.

- Much more severe : after detecting such a leak, it invokes java.lang.ThreadLocal.ThreadLocalMap.remove(ThreadLocal) on Thread A's ThreadLocalMap instance but the invocation is done by Thread B (the thread that undeploys the app). The remove() method is not thread safe at all, and nor is the expungeStaleEntries() method which may also be invoked in clearThreadLocalMap().
So, if a webapp is being undeployed while other applications continue to receive a heavy load of requests, this could corrupt the internal structures of the ThreadLocalMap instance !

I propose to keep the detection of leaks as it is, but to make the actual clearing optional (and disabled by default) to avoid encountering big problems in production.

Idea to improve the clearing in a safe way : if the thread that is ""provoking"" the leak is one of tomcat's worker threads, we could mark it as ""dirty"", and then have a background task that would end such threads (renew those threads in the pool).","think memori leak protect web app class loader webappclassload clear refer thread local clearreferencesthreadloc detect clear thread local threadloc would prevent gc web app class loader webappclassload instanc issu regard concurr enumer thread look intern structur thread class memori barrier would ensur consist state thread local map threadlocalmap examin theoret possibl thread local threadloc thread properli clean applic current thread undeploy applic see date state synchron thread much sever detect leak invok java lang thread local threadloc thread local map threadlocalmap remov thread local threadloc thread thread local map threadlocalmap instanc invoc done thread thread undeploy app remov method thread safe expung stale entri expungestaleentri method may invok clear thread local map clearthreadlocalmap webapp undeploy applic continu receiv heavi load request could corrupt intern structur thread local map threadlocalmap instanc propos keep detect leak make actual clear option disabl default avoid encount big problem product idea improv clear safe way thread provok leak one tomcat worker thread could mark dirti background task would thread renew thread pool","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","1","0","3","280","280","280","111","280","0","14","8","258","5907","1245","2960","799","1897","1708","1404","2137","783","1354","57","57","74","9","5","1","662","662","713","355","normal"
"48895","17","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48895 Make clearing thread locals optional and disabled by default since it isn't thread-safe","Bug 48895  WebAppClassLoader.clearThreadLocalMap() concurrency issues","web app class loader webappclassload clear thread local map clearthreadlocalmap concurr issu","I think that the memory leak protection of WebAppClassLoader.clearReferencesThreadLocals() which detects and clears ThreadLocals that would prevent GC the WebAppClassLoader instance has issues regarding concurrency :

- It enumerates Threads and looks into internal structures of the Thread class, but there are no ""memory barrier"" that would ensure a consistent state of the ThreadLocalMap being examined.
So, it is theoretically possible that a ThreadLocal in Thread A was properly cleaned up by the application, but the current thread B (that is undeploying the application) does not see the up to date state because there's no synchronization between those threads.

- Much more severe : after detecting such a leak, it invokes java.lang.ThreadLocal.ThreadLocalMap.remove(ThreadLocal) on Thread A's ThreadLocalMap instance but the invocation is done by Thread B (the thread that undeploys the app). The remove() method is not thread safe at all, and nor is the expungeStaleEntries() method which may also be invoked in clearThreadLocalMap().
So, if a webapp is being undeployed while other applications continue to receive a heavy load of requests, this could corrupt the internal structures of the ThreadLocalMap instance !

I propose to keep the detection of leaks as it is, but to make the actual clearing optional (and disabled by default) to avoid encountering big problems in production.

Idea to improve the clearing in a safe way : if the thread that is ""provoking"" the leak is one of tomcat's worker threads, we could mark it as ""dirty"", and then have a background task that would end such threads (renew those threads in the pool).","think memori leak protect web app class loader webappclassload clear refer thread local clearreferencesthreadloc detect clear thread local threadloc would prevent gc web app class loader webappclassload instanc issu regard concurr enumer thread look intern structur thread class memori barrier would ensur consist state thread local map threadlocalmap examin theoret possibl thread local threadloc thread properli clean applic current thread undeploy applic see date state synchron thread much sever detect leak invok java lang thread local threadloc thread local map threadlocalmap remov thread local threadloc thread thread local map threadlocalmap instanc invoc done thread thread undeploy app remov method thread safe expung stale entri expungestaleentri method may invok clear thread local map clearthreadlocalmap webapp undeploy applic continu receiv heavi load request could corrupt intern structur thread local map threadlocalmap instanc propos keep detect leak make actual clear option disabl default avoid encount big problem product idea improv clear safe way thread provok leak one tomcat worker thread could mark dirti background task would thread renew thread pool","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","6","2","33","3","23","7","4","1","6","76","76","75","33","76","3","10","20","43","3141","501","1891","434","1326","756","873","1316","388","928","43","43","49","28","10","0","452","452","484","194","normal"
"48895","17","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48895 Make clearing thread locals optional and disabled by default since it isn't thread-safe","Bug 48895  WebAppClassLoader.clearThreadLocalMap() concurrency issues","web app class loader webappclassload clear thread local map clearthreadlocalmap concurr issu","I think that the memory leak protection of WebAppClassLoader.clearReferencesThreadLocals() which detects and clears ThreadLocals that would prevent GC the WebAppClassLoader instance has issues regarding concurrency :

- It enumerates Threads and looks into internal structures of the Thread class, but there are no ""memory barrier"" that would ensure a consistent state of the ThreadLocalMap being examined.
So, it is theoretically possible that a ThreadLocal in Thread A was properly cleaned up by the application, but the current thread B (that is undeploying the application) does not see the up to date state because there's no synchronization between those threads.

- Much more severe : after detecting such a leak, it invokes java.lang.ThreadLocal.ThreadLocalMap.remove(ThreadLocal) on Thread A's ThreadLocalMap instance but the invocation is done by Thread B (the thread that undeploys the app). The remove() method is not thread safe at all, and nor is the expungeStaleEntries() method which may also be invoked in clearThreadLocalMap().
So, if a webapp is being undeployed while other applications continue to receive a heavy load of requests, this could corrupt the internal structures of the ThreadLocalMap instance !

I propose to keep the detection of leaks as it is, but to make the actual clearing optional (and disabled by default) to avoid encountering big problems in production.

Idea to improve the clearing in a safe way : if the thread that is ""provoking"" the leak is one of tomcat's worker threads, we could mark it as ""dirty"", and then have a background task that would end such threads (renew those threads in the pool).","think memori leak protect web app class loader webappclassload clear refer thread local clearreferencesthreadloc detect clear thread local threadloc would prevent gc web app class loader webappclassload instanc issu regard concurr enumer thread look intern structur thread class memori barrier would ensur consist state thread local map threadlocalmap examin theoret possibl thread local threadloc thread properli clean applic current thread undeploy applic see date state synchron thread much sever detect leak invok java lang thread local threadloc thread local map threadlocalmap remov thread local threadloc thread thread local map threadlocalmap instanc invoc done thread thread undeploy app remov method thread safe expung stale entri expungestaleentri method may invok clear thread local map clearthreadlocalmap webapp undeploy applic continu receiv heavi load request could corrupt intern structur thread local map threadlocalmap instanc propos keep detect leak make actual clear option disabl default avoid encount big problem product idea improv clear safe way thread provok leak one tomcat worker thread could mark dirti background task would thread renew thread pool","""java/org/apache/catalina/loader/WebappLoader.java""","3","3","3","1","21","3","14","4","1","0","4","43","43","43","13","43","0","7","2","34","1194","259","669","207","450","267","340","493","189","304","24","24","25","13","5","0","153","153","158","80","normal"
"48934","0","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=48934 The wrong sender was disconnected, should only be the sender holding the actual TCP connections.","Bug 48934  Cluster's regression. When replication fails once, replication can be never done again.","cluster regress replic fail replic never done","","","""java/org/apache/catalina/tribes/transport/ReplicationTransmitter.java""","1","1","1","1","6","0","3","3","1","0","2","10","10","10","1","10","0","0","0","10","139","25","47","22","17","67","22","35","22","13","2","2","2","1","1","1","12","12","12","10","regression"
"48934","0","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=48934 The wrong sender was disconnected, should only be the sender holding the actual TCP connections.","Bug 48934  Cluster's regression. When replication fails once, replication can be never done again.","cluster regress replic fail replic never done","","","""java/org/apache/catalina/tribes/transport/nio/PooledParallelSender.java""","2","2","2","1","7","0","7","0","1","0","0","5","5","5","1","5","0","0","0","5","85","8","51","21","25","26","29","41","19","22","5","5","5","1","2","1","10","10","10","5","regression"
"48956","450","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48956 Implement regular expression support for SSI","Bug 48956  SSI regular expressions not working","ssi regular express work","","","""java/org/apache/catalina/ssi/ExpressionParseTree.java""","1","1","1","1","7","0","6","1","11","0","3","30","32","32","8","32","0","3","1","28","410","53","245","87","121","114","105","162","65","97","20","8","20","6","3","0","58","46","58","35","enhancement"
"48960","113","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48960 Disable exec by default in SSI and provide an option to enable it for both  Servlet and Filter","Bug 48960  SSI Servlet should support safe configuration","ssi servlet support safe configur","The current configuration of the SSI module is ""All"" or ""None"". The ""ALL"" option will expose all the legacy Apache SSI directive (echo, printenv, if, exec, ...). As documented, allowing SSI will allow execution of arbitrary programs using the ""exec"". As a result, there is no safe way to expose sites/projects containing SSI directive, without taking a security risk, or reviewing of every file.

The ""exec"" directive, with the cmd option is a major risk. Even for Apache, you have the option to allowing the ""safe"" include (includeNoExec). The includeNoExec allow pages to be served, even when the content is not reviewed, or when users are allowed to upload content to the site.

I have a big site which need to be converted into JSP. I would like to use the SSI servlet to allow for transition over time. The extra risk from ( from exec cmd) make it impossible to deploy the SSI.

My request: Modify the configuration of SSI as follow: By default, it will only allow ""safe"" directive (no exec cmd=...). This will eliminate the risk from arbitrary execution of commands (""del *.*""). It will also remove many potentail load problems. The cmd= should only be allowed using a directive like ""allowUnsafeExec"", which will default to false.

I think that the change will make it easier to use the SSI feature, without exposing the server to big risk. The risk associated with the ""safer"" version of SSI is similar to the risk from running JSP pages.","current configur ssi modul none option expos legaci apach ssi direct echo printenv exec document allow ssi allow execut arbitrari program use exec result safe way expos site project contain ssi direct without take secur risk review everi file exec direct cmd option major risk even apach option allow safe includ includ no exec includenoexec includ no exec includenoexec allow page serv even content review user allow upload content site big site need convert jsp would like use ssi servlet allow transit time extra risk exec cmd make imposs deploy ssi request modifi configur ssi follow default allow safe direct exec cmd elimin risk arbitrari execut command remov mani potentail load problem cmd allow use direct like allow unsaf exec allowunsafeexec default fals think chang make easier use ssi featur without expos server big risk risk associ safer version ssi similar risk run jsp page","""java/org/apache/catalina/ssi/SSIFilter.java""","4","4","4","1","38","6","24","7","1","0","0","3","3","3","6","3","0","0","0","3","182","26","103","55","60","53","61","75","46","29","8","8","8","1","2","1","14","14","14","3","enhancement"
"48960","113","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48960 Disable exec by default in SSI and provide an option to enable it for both  Servlet and Filter","Bug 48960  SSI Servlet should support safe configuration","ssi servlet support safe configur","The current configuration of the SSI module is ""All"" or ""None"". The ""ALL"" option will expose all the legacy Apache SSI directive (echo, printenv, if, exec, ...). As documented, allowing SSI will allow execution of arbitrary programs using the ""exec"". As a result, there is no safe way to expose sites/projects containing SSI directive, without taking a security risk, or reviewing of every file.

The ""exec"" directive, with the cmd option is a major risk. Even for Apache, you have the option to allowing the ""safe"" include (includeNoExec). The includeNoExec allow pages to be served, even when the content is not reviewed, or when users are allowed to upload content to the site.

I have a big site which need to be converted into JSP. I would like to use the SSI servlet to allow for transition over time. The extra risk from ( from exec cmd) make it impossible to deploy the SSI.

My request: Modify the configuration of SSI as follow: By default, it will only allow ""safe"" directive (no exec cmd=...). This will eliminate the risk from arbitrary execution of commands (""del *.*""). It will also remove many potentail load problems. The cmd= should only be allowed using a directive like ""allowUnsafeExec"", which will default to false.

I think that the change will make it easier to use the SSI feature, without exposing the server to big risk. The risk associated with the ""safer"" version of SSI is similar to the risk from running JSP pages.","current configur ssi modul none option expos legaci apach ssi direct echo printenv exec document allow ssi allow execut arbitrari program use exec result safe way expos site project contain ssi direct without take secur risk review everi file exec direct cmd option major risk even apach option allow safe includ includ no exec includenoexec includ no exec includenoexec allow page serv even content review user allow upload content site big site need convert jsp would like use ssi servlet allow transit time extra risk exec cmd make imposs deploy ssi request modifi configur ssi follow default allow safe direct exec cmd elimin risk arbitrari execut command remov mani potentail load problem cmd allow use direct like allow unsaf exec allowunsafeexec default fals think chang make easier use ssi featur without expos server big risk risk associ safer version ssi similar risk run jsp page","""java/org/apache/catalina/ssi/SSIProcessor.java""","4","4","6","2","26","0","20","5","1","0","3","10","10","10","3","10","0","1","6","3","326","21","223","68","161","84","131","177","63","114","14","14","17","8","7","0","47","47","64","26","enhancement"
"48960","113","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48960 Disable exec by default in SSI and provide an option to enable it for both  Servlet and Filter","Bug 48960  SSI Servlet should support safe configuration","ssi servlet support safe configur","The current configuration of the SSI module is ""All"" or ""None"". The ""ALL"" option will expose all the legacy Apache SSI directive (echo, printenv, if, exec, ...). As documented, allowing SSI will allow execution of arbitrary programs using the ""exec"". As a result, there is no safe way to expose sites/projects containing SSI directive, without taking a security risk, or reviewing of every file.

The ""exec"" directive, with the cmd option is a major risk. Even for Apache, you have the option to allowing the ""safe"" include (includeNoExec). The includeNoExec allow pages to be served, even when the content is not reviewed, or when users are allowed to upload content to the site.

I have a big site which need to be converted into JSP. I would like to use the SSI servlet to allow for transition over time. The extra risk from ( from exec cmd) make it impossible to deploy the SSI.

My request: Modify the configuration of SSI as follow: By default, it will only allow ""safe"" directive (no exec cmd=...). This will eliminate the risk from arbitrary execution of commands (""del *.*""). It will also remove many potentail load problems. The cmd= should only be allowed using a directive like ""allowUnsafeExec"", which will default to false.

I think that the change will make it easier to use the SSI feature, without exposing the server to big risk. The risk associated with the ""safer"" version of SSI is similar to the risk from running JSP pages.","current configur ssi modul none option expos legaci apach ssi direct echo printenv exec document allow ssi allow execut arbitrari program use exec result safe way expos site project contain ssi direct without take secur risk review everi file exec direct cmd option major risk even apach option allow safe includ includ no exec includenoexec includ no exec includenoexec allow page serv even content review user allow upload content site big site need convert jsp would like use ssi servlet allow transit time extra risk exec cmd make imposs deploy ssi request modifi configur ssi follow default allow safe direct exec cmd elimin risk arbitrari execut command remov mani potentail load problem cmd allow use direct like allow unsaf exec allowunsafeexec default fals think chang make easier use ssi featur without expos server big risk risk associ safer version ssi similar risk run jsp page","""java/org/apache/catalina/ssi/SSIServlet.java""","4","4","4","1","29","2","19","8","1","0","0","5","5","5","6","5","0","0","2","3","220","23","123","53","77","74","70","92","43","49","7","7","9","3","1","1","22","22","24","7","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/Globals.java""","0","0","0","0","0","0","0","0","1","0","39","0","0","0","0","0","0","0","0","0","332","75","79","78","39","178","40","41","41","0","0","0","0","0","0","2","0","0","0","0","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/connector/Connector.java""","1","1","1","1","12","1","5","5","1","0","5","57","57","57","23","57","0","0","7","50","974","266","378","125","213","330","175","255","112","143","8","8","8","3","2","1","79","79","82","59","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","15","1","9","4","2","0","3","283","283","283","115","283","0","13","11","259","5876","1242","2880","785","1828","1757","1359","2079","772","1307","55","55","70","9","5","1","639","639","691","358","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/ha/deploy/FarmWarDeployer.java""","2","2","2","1","14","0","10","3","1","0","2","40","40","40","15","40","0","0","11","29","767","84","449","138","298","235","215","319","126","193","14","14","14","5","6","1","100","100","102","47","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/manager/ManagerServlet.java""","6","6","7","2","38","2","28","6","1","2","1","35","35","33","12","35","0","0","27","8","1664","217","1049","213","775","398","502","727","195","532","21","21","32","6","5","0","219","219","257","82","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/manager/host/HostManagerServlet.java""","6","6","6","3","39","3","27","8","1","0","2","13","13","13","6","13","0","0","8","5","696","113","392","95","271","191","190","270","82","188","22","22","25","11","4","0","79","79","86","40","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/manager/host/HostManagerServlet.java""","6","6","6","3","39","3","27","8","1","0","2","13","13","13","6","13","0","0","8","5","696","113","392","95","271","191","190","270","82","188","22","22","25","11","4","0","79","79","86","40","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/realm/JAASMemoryLoginModule.java""","3","3","3","1","31","3","18","10","1","0","1","7","7","7","7","7","0","0","1","6","364","65","157","49","112","142","105","129","49","80","8","8","8","3","3","1","24","24","25","9","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/realm/MemoryRealm.java""","2","2","2","1","17","2","9","5","1","0","4","11","11","11","2","11","1","0","6","4","317","76","130","47","77","112","59","86","38","48","6","6","7","3","2","1","25","25","27","13","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/startup/Bootstrap.java""","2","2","2","1","19","2","14","3","1","3","4","19","19","16","4","19","0","5","0","14","500","108","293","101","194","99","153","205","81","124","12","12","14","4","3","0","51","51","55","24","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/startup/Catalina.java""","2","2","3","1","19","2","14","2","3","0","2","32","32","32","10","32","0","0","9","23","855","179","506","118","356","175","242","339","110","229","13","13","15","9","3","0","94","94","98","42","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/startup/CatalinaProperties.java""","2","2","3","1","16","2","11","3","1","6","2","6","6","0","0","6","0","4","0","2","174","45","83","28","47","46","38","56","26","30","12","12","13","1","2","1","17","17","18","6","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/startup/Embedded.java""","3","3","3","1","18","2","10","5","1","0","3","38","38","38","7","38","0","0","6","32","985","196","455","127","282","335","234","350","124","226","15","15","15","8","4","1","117","117","119","55","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/startup/ExpandWar.java""","5","5","6","1","40","2","27","11","1","9","2","9","9","0","0","9","0","1","1","7","440","45","269","73","181","126","129","183","69","114","16","16","18","5","4","0","52","52","57","15","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/startup/HostConfig.java""","4","4","4","2","27","2","19","5","2","1","3","47","47","46","18","47","0","1","19","27","1586","254","980","217","698","352","464","684","209","475","32","32","39","14","7","0","210","210","231","94","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/startup/Tomcat.java""","1","1","1","1","13","0","7","4","5","3","2","42","42","39","14","42","0","1","5","36","936","95","551","301","376","291","198","269","116","153","6","6","6","1","3","1","67","67","67","42","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/startup/Tool.java""","10","10","10","3","63","5","50","7","1","2","6","2","2","0","0","2","0","1","0","1","244","39","115","26","92","90","64","86","26","60","20","20","20","6","2","1","21","21","21","7","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/users/MemoryUserDatabase.java""","2","2","2","1","15","1","10","3","4","0","2","37","37","37","14","37","1","0","0","36","816","181","437","124","272","199","207","307","121","186","16","16","16","3","4","0","80","80","82","39","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/catalina/valves/AccessLogValve.java""","2","1","2","1","11","0","8","2","28","0","6","74","75","75","35","75","0","7","5","63","1427","209","779","246","438","441","343","517","213","304","21","10","21","4","4","1","167","144","178","79","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/jasper/compiler/AntCompiler.java""","1","1","1","1","9","0","7","0","3","2","3","37","37","35","5","37","0","1","7","29","527","108","346","133","186","74","165","233","95","138","19","19","19","1","2","0","64","64","64","37","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/tomcat/util/net/AbstractEndpoint.java""","1","1","1","1","3","0","3","0","3","0","28","88","91","93","44","93","0","0","1","92","587","83","372","202","246","134","233","355","194","161","8","8","8","4","2","0","121","121","125","99","enhancement"
"48967","162","Rainer Jung","BZ 48967: Replace strings ""catalina.base"" and ""catalina.home"" by globally defined constants.","Bug 48967  Externalize Strings ""catalina.base"" and ""catalina.home""","extern string catalina base catalina home","","","""java/org/apache/tomcat/util/net/jsse/JSSESocketFactory.java""","5","5","5","2","31","2","24","5","1","0","10","21","21","21","7","21","1","3","11","6","830","88","582","203","371","162","270","377","153","224","15","15","17","12","7","0","111","111","119","42","enhancement"
"48971","69","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48971 Make stopping of TimerThreads optional and disabled by default","Bug 48971  memory leak protection : stopping TimeThreads should be optional and disabled by default","memori leak protect stop time thread timethread option disabl default","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","15","1","9","4","2","0","3","280","280","280","114","280","0","12","11","257","5830","1239","2853","777","1810","1741","1349","2064","766","1298","53","53","68","9","5","1","634","634","686","355","normal"
"48971","69","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48971 Make stopping of TimerThreads optional and disabled by default","Bug 48971  memory leak protection : stopping TimeThreads should be optional and disabled by default","memori leak protect stop time thread timethread option disabl default","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","6","2","31","3","22","6","4","1","6","83","83","82","35","83","3","10","20","50","3265","522","1964","448","1369","786","904","1368","399","969","43","43","49","28","10","0","474","474","513","201","normal"
"48971","69","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48971 Make stopping of TimerThreads optional and disabled by default","Bug 48971  memory leak protection : stopping TimeThreads should be optional and disabled by default","memori leak protect stop time thread timethread option disabl default","","","""java/org/apache/catalina/loader/WebappLoader.java""","3","3","3","1","23","3","15","4","1","0","4","39","39","39","11","39","0","7","4","28","1189","256","658","203","451","276","337","485","184","301","26","26","27","12","5","0","148","148","153","76","normal"
"48983","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48983 Additional debug logging for when RemoteIp(Valve|Filter) is not invoked","Bug 48983  Enhance RemoteIpValve and RemoteIpFilter logging","enhanc remot ip valv remoteipvalv remot ip filter remoteipfilt log","","","""java/org/apache/catalina/filters/RemoteIpFilter.java""","2","2","2","1","10","0","7","2","3","4","11","43","43","39","14","43","0","0","6","37","987","89","383","135","206","516","181","269","130","139","14","14","14","5","3","1","88","88","94","51","normal"
"48983","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48983 Additional debug logging for when RemoteIp(Valve|Filter) is not invoked","Bug 48983  Enhance RemoteIpValve and RemoteIpFilter logging","enhanc remot ip valv remoteipvalv remot ip filter remoteipfilt log","","","""java/org/apache/catalina/valves/RemoteIpValve.java""","2","2","2","1","14","0","7","6","1","4","4","22","22","18","8","22","0","0","4","18","756","50","209","77","120","498","110","158","79","79","13","13","13","5","3","2","45","45","46","28","normal"
"49018","8","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49018 Fix processing of time argument in the ""Expire sessions"" action in the Manager web application","Bug 49018  Timeout argument misprocessed when expiring sessions from Tomcat Manager","timeout argument misprocess expir session tomcat manag","Steps to reproduce:
1. Login to the Tomcat Manager Application
2. Select a web application that has several sessions that are inactive for more than 2 minutes
3. In the text field next to the ""Expire sessions"" button print ""2""
4. Press ""Expire sessions""
5. Sample observed result:

OK - Session information for application at context path /myapp
Default maximum session inactive interval 30 minutes
<1 minutes:16 sessions
1 - <2 minutes:2 sessions
2 - <3 minutes:5 sessions
3 - <4 minutes:1 sessions
4 - <5 minutes:2 sessions
5 - <6 minutes:1 sessions
6 - <7 minutes:2 sessions
9 - <10 minutes:1 sessions
8 minutes:expired 0 sessions

Actually some sessions were expired (even if the above message prints ""0"").

Expected result:
All sessions with idle time > 2 minutes had to be expired.

The bug is in the following lines of ManagerServlet#sessions(PrintWriter, String, int):

Lines 1176-1179
                if (idle >= 0 && time >= idle*60) {
                    sessions[i].expire();
                    idle++;
                }

The patch would be to replace ""idle++"" with ""expired++"",
because ""idle"" is the time (in minutes) as submitted from the web form and ""expired"" is the counter.","step reproduc login tomcat manag applic select web applic sever session inact minut text field next expir session button print press expir session sampl observ result ok session inform applic context path myapp default maximum session inact interv minut minut session minut session minut session minut session minut session minut session minut session minut session minut expir session actual session expir even messag print expect result session idl time minut expir follow line manag servlet managerservlet session print writer printwrit string int line idl time idl session expir idl patch would replac idl expir idl time minut submit web form expir counter","""java/org/apache/catalina/manager/ManagerServlet.java""","6","6","7","2","38","2","28","7","1","2","1","35","35","33","12","35","0","0","27","8","1663","217","1044","212","771","402","497","722","194","528","21","21","32","6","5","0","219","219","257","82","minor"
"49045","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49045 Add support for adding Services and Engines via JMX Based on a patch by Chamith Buddhika","Bug 49045  JMX Enhancement- Provision of MBeanFactory createStandardService","jmx enhanc provis bean factori mbeanfactori creat standard servic createstandardservic","Currently MBeanFactory doesn't have a method for creating a new StandardService MBean. This would become an issue for future enhancements of JMX support in Tomcat. As per discussions with Mark, this enhancement is suggested as a starting point for possible future enhancements in JMX support.","current bean factori mbeanfactori doesn method creat new standard servic standardservic bean mbean would becom issu futur enhanc jmx support tomcat discuss mark enhanc suggest start point possibl futur enhanc jmx support","""java/org/apache/catalina/mbeans/MBeanFactory.java""","2","2","2","1","24","2","13","9","1","0","2","33","33","33","1","33","0","6","0","27","970","153","483","235","312","334","285","355","195","160","6","6","7","5","3","1","71","71","76","49","normal"
"49075","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49075 NPE protection if roles is null and roles needs to be modifiable","Bug 49075  protected Class User doesn't check argument roles for null","protect class user doesn check argument role null","","","""java/org/apache/catalina/realm/JNDIRealm.java""","2","2","3","1","21","3","10","7","2","0","3","79","79","79","33","79","0","2","23","54","2259","480","954","289","622","828","463","692","247","445","28","28","33","14","7","1","230","226","253","125","normal"
"49086","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49086 Add Javadocs to javax.servlet.annotation Patch provided by Pid.","Bug 49086  Addition of Javadoc for Servlet 3.0 annotations","addit javadoc servlet annot","","","""java/javax/servlet/annotation/HandlesTypes.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","1","0","0","0","33","2","11","10","0","21","6","7","7","0","0","0","0","0","0","2","0","0","0","0","enhancement"
"49086","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49086 Add Javadocs to javax.servlet.annotation Patch provided by Pid.","Bug 49086  Addition of Javadoc for Servlet 3.0 annotations","addit javadoc servlet annot","","","""java/javax/servlet/annotation/HttpConstraint.java""","0","0","0","0","0","0","0","0","1","0","0","0","3","3","0","3","3","0","0","0","36","3","13","12","0","20","9","10","10","0","0","0","0","0","0","2","0","0","0","0","enhancement"
"49086","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49086 Add Javadocs to javax.servlet.annotation Patch provided by Pid.","Bug 49086  Addition of Javadoc for Servlet 3.0 annotations","addit javadoc servlet annot","","","""java/javax/servlet/annotation/HttpMethodConstraint.java""","0","0","0","0","0","0","0","0","1","0","0","0","4","4","0","4","4","0","0","0","37","3","14","13","0","20","10","11","11","0","0","0","0","0","0","1","0","0","0","0","enhancement"
"49086","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49086 Add Javadocs to javax.servlet.annotation Patch provided by Pid.","Bug 49086  Addition of Javadoc for Servlet 3.0 annotations","addit javadoc servlet annot","","","""java/javax/servlet/annotation/MultipartConfig.java""","0","0","0","0","0","0","0","0","1","0","0","0","4","4","0","4","4","0","0","0","35","2","13","12","0","20","9","10","10","0","0","0","0","0","0","2","0","0","0","0","enhancement"
"49086","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49086 Add Javadocs to javax.servlet.annotation Patch provided by Pid.","Bug 49086  Addition of Javadoc for Servlet 3.0 annotations","addit javadoc servlet annot","","","""java/javax/servlet/annotation/ServletSecurity.java""","1","1","1","1","0","0","0","0","3","0","0","4","2","6","4","6","2","0","0","4","45","2","23","20","0","20","9","12","12","0","1","1","1","1","0","1","4","4","4","4","enhancement"
"49086","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49086 Add Javadocs to javax.servlet.annotation Patch provided by Pid.","Bug 49086  Addition of Javadoc for Servlet 3.0 annotations","addit javadoc servlet annot","","","""java/javax/servlet/annotation/WebFilter.java""","0","0","0","0","0","0","0","0","1","0","0","0","11","11","0","11","11","0","0","0","46","3","23","22","0","20","18","19","19","0","0","0","0","0","0","1","0","0","0","0","enhancement"
"49086","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49086 Add Javadocs to javax.servlet.annotation Patch provided by Pid.","Bug 49086  Addition of Javadoc for Servlet 3.0 annotations","addit javadoc servlet annot","","","""java/javax/servlet/annotation/WebInitParam.java""","0","0","0","0","0","0","0","0","1","0","0","0","3","3","0","3","3","0","0","0","36","2","14","13","0","20","9","10","10","0","0","0","0","0","0","1","0","0","0","0","enhancement"
"49086","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49086 Add Javadocs to javax.servlet.annotation Patch provided by Pid.","Bug 49086  Addition of Javadoc for Servlet 3.0 annotations","addit javadoc servlet annot","","","""java/javax/servlet/annotation/WebListener.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","1","0","0","0","34","2","12","11","0","20","7","8","8","0","0","0","0","0","0","2","0","0","0","0","enhancement"
"49086","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49086 Add Javadocs to javax.servlet.annotation Patch provided by Pid.","Bug 49086  Addition of Javadoc for Servlet 3.0 annotations","addit javadoc servlet annot","","","""java/javax/servlet/annotation/WebServlet.java""","0","0","0","0","0","0","0","0","1","0","0","0","10","10","0","10","10","0","0","0","43","2","21","20","0","20","16","17","17","0","0","0","0","0","0","1","0","0","0","0","enhancement"
"49089","2","Mark Emlyn David Thomas","Alternative fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=49089","Bug 49089  ChannelData.USE_SECURE_RANDOM_FOR_UUID public static mutable field","channel data channeldata use secur random uui uuid public static mutabl field","catalina.tribes.io.ChannelData.USE_SECURE_RANDOM_FOR_UUID is a mutable public static field.

It's only used by an instance method, so there's no need for it to be static.
Probably no need for it to be public either; it could be a private field with a setter - or better a final field set by the constructor.","catalina tribe channel data channeldata use secur random uui uuid mutabl public static field use instanc method need static probabl need public either could privat field setter better final field set constructor","""java/org/apache/catalina/tribes/io/ChannelData.java""","1","1","1","1","10","0","6","4","1","5","2","27","27","22","5","27","0","0","0","27","365","32","195","66","122","167","126","157","62","95","2","2","3","1","1","1","30","30","33","27","normal"
"49091","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49091 Reduce visibility","Bug 49091  Util.specialCharactersRepresentation should be private","util special charact represent specialcharactersrepresent privat","jasper.tagplugins.jstl.Util.specialCharactersRepresentation is a mutable public static array; it is not used outside the class as far as I can tell and so should be made private","jasper tagplugin jstl util special charact represent specialcharactersrepresent mutabl public static array use outsid class far tell made privat","""java/org/apache/jasper/tagplugins/jstl/Util.java""","2","2","3","1","13","0","9","4","3","6","4","17","17","11","7","17","0","0","0","17","335","40","208","72","119","92","105","157","62","95","8","8","8","5","4","0","50","50","52","32","normal"
"49092","19","Mark Emlyn David Thomas","Another fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=49092 Make constant final","Bug 49092  util.IntrospectionUtils.PATH_SEPARATOR should be final","util introspect util introspectionutil path separ final","The field

org.apache.tomcat.util.IntrospectionUtils.PATH_SEPARATOR

should be final.","field apach tomcat util introspect util introspectionutil path separ final","""test/org/apache/catalina/tribes/demos/IntrospectionUtils.java""","5","5","6","2","26","1","21","3","4","30","4","31","33","3","0","33","0","0","0","33","904","92","678","157","495","138","325","505","155","350","29","29","36","14","6","0","185","185","205","92","normal"
"49102","163","Tim Whittington","https://issues.apache.org/bugzilla/show_bug.cgi?id=49102","Bug 49102  coyote.ajp.Constants - 3 ""constant"" arrays are mutable","coyot ajp constant constant array mutabl","The class coyote.ajp.Constants contains 3 public static non-empty String[] arrays:

methodTransArray
responseTransArray
headerTransArray

responseTransArray only appears to be locally, so could be made private.

The others are used in index lookups, so get(index) methods could be used to protect them.","class coyot ajp constant contain public static non empti nonempti string array method tran array methodtransarray respons tran array responsetransarray header tran array headertransarray respons tran array responsetransarray appear local could made privat other use index lookup get index method could use protect","""java/org/apache/coyote/ajp/AjpAprProcessor.java""","6","6","7","3","45","5","32","8","3","0","5","23","23","23","28","23","0","1","7","15","1416","259","836","180","630","326","476","622","167","455","32","29","37","18","5","0","158","146","175","73","enhancement"
"49102","163","Tim Whittington","https://issues.apache.org/bugzilla/show_bug.cgi?id=49102","Bug 49102  coyote.ajp.Constants - 3 ""constant"" arrays are mutable","coyot ajp constant constant array mutabl","The class coyote.ajp.Constants contains 3 public static non-empty String[] arrays:

methodTransArray
responseTransArray
headerTransArray

responseTransArray only appears to be locally, so could be made private.

The others are used in index lookups, so get(index) methods could be used to protect them.","class coyot ajp constant contain public static non empti nonempti string array method tran array methodtransarray respons tran array responsetransarray header tran array headertransarray respons tran array responsetransarray appear local could made privat other use index lookup get index method could use protect","""java/org/apache/coyote/ajp/AjpProcessor.java""","6","5","6","2","40","4","28","7","3","0","5","24","24","24","29","24","0","1","6","17","1351","251","780","181","587","325","459","594","170","424","32","27","37","17","5","0","147","135","161","67","enhancement"
"49102","163","Tim Whittington","https://issues.apache.org/bugzilla/show_bug.cgi?id=49102","Bug 49102  coyote.ajp.Constants - 3 ""constant"" arrays are mutable","coyot ajp constant constant array mutabl","The class coyote.ajp.Constants contains 3 public static non-empty String[] arrays:

methodTransArray
responseTransArray
headerTransArray

responseTransArray only appears to be locally, so could be made private.

The others are used in index lookups, so get(index) methods could be used to protect them.","class coyot ajp constant contain public static non empti nonempti string array method tran array methodtransarray respons tran array responsetransarray header tran array headertransarray respons tran array responsetransarray appear local could made privat other use index lookup get index method could use protect","""java/org/apache/coyote/ajp/Constants.java""","2","2","2","1","8","0","8","0","1","1","105","1","1","0","1","1","0","0","0","1","394","78","193","174","164","126","115","120","112","8","2","2","2","1","1","1","2","2","2","1","enhancement"
"49103","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49103 Add @Override where appropriate","Bug 49103  Missing annotations","miss annot","","","""java/org/apache/coyote/http11/Http11NioProtocol.java""","2","2","2","1","10","0","9","0","3","0","2","32","32","32","8","32","1","0","1","30","477","74","345","87","227","59","173","246","85","161","11","11","12","4","3","0","74","74","75","37","normal"
"49103","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49103 Add @Override where appropriate","Bug 49103  Missing annotations","miss annot","","","""java/org/apache/coyote/http11/Http11Protocol.java""","2","2","2","1","13","0","12","0","3","0","2","17","17","17","10","17","1","0","3","13","368","61","258","70","175","49","136","185","68","117","10","10","11","4","3","0","49","49","50","20","normal"
"49103","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49103 Add @Override where appropriate","Bug 49103  Missing annotations","miss annot","","","""java/org/apache/tomcat/util/net/AprEndpoint.java""","2","2","3","1","12","0","9","2","9","0","1","83","85","85","59","85","0","0","10","75","1480","224","861","215","601","395","467","712","225","487","31","31","39","9","6","0","228","228","255","108","normal"
"49103","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49103 Add @Override where appropriate","Bug 49103  Missing annotations","miss annot","","","""java/org/apache/tomcat/util/net/NioEndpoint.java""","2","2","3","1","9","0","8","1","13","0","4","119","124","124","53","124","0","0","14","110","1614","200","1149","312","812","294","639","959","321","638","22","22","27","8","7","0","337","337","381","140","normal"
"49103","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49103 Add @Override where appropriate","Bug 49103  Missing annotations","miss annot","","","""java/org/apache/tomcat/util/net/jsse/JSSEImplementation.java""","1","1","1","1","4","0","3","0","1","0","2","5","5","5","1","5","0","0","0","5","72","16","35","22","12","21","18","24","18","6","1","1","1","1","0","1","5","5","5","5","normal"
"49104","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49104 Generics","Bug 49104  Fix up some raw types","fix raw type","","","""java/org/apache/coyote/ajp/AjpProtocol.java""","1","1","1","1","5","0","5","0","3","0","2","54","54","54","20","54","0","0","3","51","508","91","337","122","209","80","181","272","119","153","8","8","8","4","3","0","91","91","91","57","normal"
"49104","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49104 Generics","Bug 49104  Fix up some raw types","fix raw type","","","""java/org/apache/coyote/http11/Http11Protocol.java""","2","2","2","1","13","0","12","0","3","0","2","17","17","17","10","17","1","0","3","13","369","61","259","71","175","49","136","185","68","117","10","10","11","4","3","0","49","49","50","20","normal"
"49104","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49104 Generics","Bug 49104  Fix up some raw types","fix raw type","","","""java/org/apache/tomcat/util/net/JIoEndpoint.java""","3","3","3","1","16","0","13","2","6","0","1","23","25","25","8","25","1","0","2","22","558","81","355","81","233","122","157","242","73","169","11","11","12","4","5","0","81","81","85","28","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/javax/el/ExpressionFactory.java""","4","4","4","1","22","0","17","3","5","5","5","9","13","8","0","13","0","3","0","10","284","28","205","53","131","51","78","110","46","64","16","16","16","5","3","0","37","37","40","17","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/javax/servlet/HttpConstraintElement.java""","1","1","1","1","6","0","4","2","1","0","2","7","7","7","3","7","0","0","0","7","92","12","42","20","18","38","19","28","17","11","2","2","4","1","1","1","8","8","10","7","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/javax/servlet/ServletContext.java""","0","0","0","0","0","0","0","0","1","0","2","0","51","51","0","51","0","0","0","51","941","158","80","79","2","707","62","63","63","0","0","0","0","0","0","9","0","0","0","0","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/javax/servlet/ServletContext.java""","0","0","0","0","0","0","0","0","1","0","2","0","51","51","0","51","0","0","0","51","941","158","80","79","2","707","62","63","63","0","0","0","0","0","0","9","0","0","0","0","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/catalina/Context.java""","0","0","0","0","0","0","0","0","1","0","1","0","139","139","0","139","0","0","0","139","1187","290","157","156","1","740","154","155","155","0","0","0","0","0","0","5","0","0","0","0","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/catalina/Host.java""","0","0","0","0","0","0","0","0","1","0","2","0","22","22","0","22","0","0","0","22","247","56","27","26","2","164","25","26","26","0","0","0","0","0","0","6","0","0","0","0","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/catalina/Lifecycle.java""","0","0","0","0","0","0","0","0","1","0","11","0","6","6","0","6","0","0","0","6","237","42","20","19","11","175","18","19","19","0","0","0","0","0","0","9","0","0","0","0","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/catalina/Session.java""","0","0","0","0","0","0","0","0","1","0","4","0","32","32","0","32","0","0","0","32","319","84","42","41","4","193","40","41","41","0","0","0","0","0","0","5","0","0","0","0","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/catalina/authenticator/FormAuthenticator.java""","6","6","7","2","45","4","29","10","1","0","2","10","10","10","1","10","0","0","6","4","560","86","329","102","235","145","173","239","82","157","32","32","34","14","4","0","65","65","70","27","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","14","1","8","4","1","2","5","149","149","147","48","149","1","0","12","136","2922","563","1441","409","916","928","703","1054","392","662","20","20","24","10","3","1","355","355","402","214","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/catalina/core/ApplicationSessionCookieConfig.java""","1","1","1","1","7","0","5","1","1","2","0","16","16","14","7","16","0","0","0","16","190","34","115","51","44","41","45","71","34","37","7","7","11","4","2","0","25","25","31","19","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/catalina/core/ContainerBase.java""","2","2","3","1","16","1","10","5","3","0","2","63","63","63","26","63","1","1","7","54","1470","281","721","188","444","470","333","528","180","348","12","12","16","3","4","1","187","187","219","77","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","1","0","3","282","282","282","112","282","0","14","8","260","5944","1254","2973","805","1904","1723","1409","2144","787","1357","57","57","74","9","5","1","664","664","715","357","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","1","0","3","282","282","282","112","282","0","14","8","260","5944","1254","2973","805","1904","1723","1409","2144","787","1357","57","57","74","9","5","1","664","664","715","357","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/catalina/session/StandardSession.java""","2","2","2","1","20","2","10","7","4","0","7","67","67","67","19","67","1","0","7","59","1835","380","799","216","518","658","372","554","199","355","20","20","26","7","5","1","175","175","192","97","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/catalina/session/StandardSession.java""","2","2","2","1","20","2","10","7","4","0","7","67","67","67","19","67","1","0","7","59","1835","380","799","216","518","658","372","554","199","355","20","20","26","7","5","1","175","175","192","97","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/catalina/tribes/ChannelListener.java""","0","0","0","0","0","0","0","0","1","0","0","0","4","4","0","4","0","0","0","4","68","7","8","7","0","53","6","7","7","0","0","0","0","0","0","7","0","0","0","0","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/catalina/tribes/group/RpcChannel.java""","1","1","1","1","7","0","6","1","3","1","5","22","22","21","10","22","0","0","1","21","269","38","186","74","97","48","95","139","66","73","8","8","8","5","4","0","41","39","43","26","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/el/parser/AstValue.java""","2","2","3","1","17","0","14","1","3","0","2","12","12","12","2","12","0","2","0","10","296","34","221","76","138","41","99","135","59","76","7","7","10","4","3","0","35","35","45","18","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""java/org/apache/jasper/compiler/Node.java""","1","1","1","1","5","0","4","0","40","0","1","299","300","300","93","300","4","2","2","292","2584","463","1580","605","625","546","636","1035","508","527","6","6","6","6","5","0","366","362","377","324","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""webapps/examples/WEB-INF/classes/chat/ChatServlet.java""","2","2","2","1","15","1","12","2","2","0","1","12","12","12","4","12","0","0","5","7","261","42","169","58","98","52","87","124","47","77","8","8","8","5","4","0","28","28","28","19","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""webapps/examples/WEB-INF/classes/filters/ExampleFilter.java""","1","1","1","1","15","2","7","6","1","0","0","4","4","4","2","4","0","0","0","4","140","34","41","21","20","65","24","31","18","13","2","2","2","1","1","2","6","6","6","4","normal"
"49105","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49105 Misc Javadoc corrections.","Bug 49105  Javadoc corrections","javadoc correct","","","""webapps/examples/WEB-INF/classes/filters/SetCharacterEncodingFilter.java""","2","2","2","1","18","2","7","8","1","0","0","4","4","4","3","4","0","0","1","3","172","37","44","21","22","91","24","34","18","16","4","4","4","1","2","2","9","9","10","4","normal"
"49106","1","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=49106 Remove unused import","Bug 49106  Unused imports","unus import","","","""java/org/apache/catalina/realm/JNDIRealm.java""","2","2","3","1","21","3","11","7","2","0","3","79","79","79","33","79","0","2","23","54","2261","480","956","289","624","828","463","693","247","446","28","28","33","14","7","1","231","227","254","125","normal"
"49109","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49109 Remove unused authenticate() method with a broken default impl","Bug 49109  RealmBase.authenticate uses toString on byte array","realm base realmbas authent us to string tostr byte array","catalina.realm.RealmBase.authenticate(String username, byte[] credentials)
has the following code:

return (authenticate(username, credentials.toString()));

This looks wrong, as credentials is a byte array.

It should probably be:

return (authenticate(username, new String(credentials[,charset])));","catalina realm realm base realmbas authent string usernam byte credenti follow code return authent usernam credenti to string tostr look wrong credenti byte array probabl return authent usernam new string credenti charset","""java/org/apache/catalina/Realm.java""","0","0","0","0","0","0","0","0","1","0","0","0","14","14","0","14","0","0","0","14","202","37","35","34","0","130","22","23","23","0","0","0","0","0","0","4","0","0","0","0","normal"
"49109","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49109 Remove unused authenticate() method with a broken default impl","Bug 49109  RealmBase.authenticate uses toString on byte array","realm base realmbas authent us to string tostr byte array","catalina.realm.RealmBase.authenticate(String username, byte[] credentials)
has the following code:

return (authenticate(username, credentials.toString()));

This looks wrong, as credentials is a byte array.

It should probably be:

return (authenticate(username, new String(credentials[,charset])));","catalina realm realm base realmbas authent string usernam byte credenti follow code return authent usernam credenti to string tostr look wrong credenti byte array probabl return authent usernam new string credenti charset","""java/org/apache/catalina/realm/CombinedRealm.java""","3","3","3","1","20","1","13","6","1","0","1","12","12","12","1","12","0","0","5","7","332","45","187","55","101","100","71","122","47","75","7","7","8","3","3","1","43","43","44","20","normal"
"49109","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49109 Remove unused authenticate() method with a broken default impl","Bug 49109  RealmBase.authenticate uses toString on byte array","realm base realmbas authent us to string tostr byte array","catalina.realm.RealmBase.authenticate(String username, byte[] credentials)
has the following code:

return (authenticate(username, credentials.toString()));

This looks wrong, as credentials is a byte array.

It should probably be:

return (authenticate(username, new String(credentials[,charset])));","catalina realm realm base realmbas authent string usernam byte credenti follow code return authent usernam credenti to string tostr look wrong credenti byte array probabl return authent usernam new string credenti charset","""java/org/apache/catalina/realm/CombinedRealm.java""","3","3","3","1","20","1","13","6","1","0","1","12","12","12","1","12","0","0","5","7","332","45","187","55","101","100","71","122","47","75","7","7","8","3","3","1","43","43","44","20","normal"
"49109","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49109 Remove unused authenticate() method with a broken default impl","Bug 49109  RealmBase.authenticate uses toString on byte array","realm base realmbas authent us to string tostr byte array","catalina.realm.RealmBase.authenticate(String username, byte[] credentials)
has the following code:

return (authenticate(username, credentials.toString()));

This looks wrong, as credentials is a byte array.

It should probably be:

return (authenticate(username, new String(credentials[,charset])));","catalina realm realm base realmbas authent string usernam byte credenti follow code return authent usernam credenti to string tostr look wrong credenti byte array probabl return authent usernam new string credenti charset","""java/org/apache/catalina/realm/LockOutRealm.java""","1","1","1","1","13","0","7","4","3","0","2","22","22","22","7","22","0","3","2","17","422","68","187","58","106","167","81","122","51","71","4","4","5","3","2","1","37","37","40","24","normal"
"49109","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49109 Remove unused authenticate() method with a broken default impl","Bug 49109  RealmBase.authenticate uses toString on byte array","realm base realmbas authent us to string tostr byte array","catalina.realm.RealmBase.authenticate(String username, byte[] credentials)
has the following code:

return (authenticate(username, credentials.toString()));

This looks wrong, as credentials is a byte array.

It should probably be:

return (authenticate(username, new String(credentials[,charset])));","catalina realm realm base realmbas authent string usernam byte credenti follow code return authent usernam credenti to string tostr look wrong credenti byte array probabl return authent usernam new string credenti charset","""java/org/apache/catalina/realm/LockOutRealm.java""","1","1","1","1","13","0","7","4","3","0","2","22","22","22","7","22","0","3","2","17","422","68","187","58","106","167","81","122","51","71","4","4","5","3","2","1","37","37","40","24","normal"
"49109","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49109 Remove unused authenticate() method with a broken default impl","Bug 49109  RealmBase.authenticate uses toString on byte array","realm base realmbas authent us to string tostr byte array","catalina.realm.RealmBase.authenticate(String username, byte[] credentials)
has the following code:

return (authenticate(username, credentials.toString()));

This looks wrong, as credentials is a byte array.

It should probably be:

return (authenticate(username, new String(credentials[,charset])));","catalina realm realm base realmbas authent string usernam byte credenti follow code return authent usernam credenti to string tostr look wrong credenti byte array probabl return authent usernam new string credenti charset","""java/org/apache/catalina/realm/RealmBase.java""","4","4","4","1","21","2","14","4","2","3","8","52","55","52","18","55","1","2","11","41","1436","251","844","217","529","345","399","614","205","409","53","53","63","21","6","0","210","210","235","101","normal"
"49110","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49110 Make inner class static to prevent possible memory leak - found by FindBugs","Bug 49110  runtime.JspFactoryImpl$PageContextPool needs to be static","runtim jsp factori impl jspfactoryimpl page context pool pagecontextpool need static","Findbugs says:

Bug: org.apache.jasper.runtime.JspFactoryImpl$PageContextPool needs to be _static_ to avoid a deadly embrace with org.apache.jasper.runtime.JspFactoryImpl.localPool
Pattern id: SIC_THREADLOCAL_DEADLY_EMBRACE, type: SIC, category: CORRECTNESS


This class is an inner class, but should probably be a static inner class. As it is, there is a serious danger of a deadly embrace between the inner class and the thread local in the outer class. Because the inner class isn't static, it retains a reference to the outer class. If the thread local contains a reference to an instance of the inner class, the inner and outer instance will both be reachable and not eligible for garbage collection.","findbug say apach jasper runtim jsp factori impl jspfactoryimpl page context pool pagecontextpool need static avoid deadli embrac apach jasper runtim jsp factori impl jspfactoryimpl local pool localpool pattern id sic threadloc deadli embrac type sic categori correct class inner class probabl static inner class seriou danger deadli embrac inner class thread local outer class inner class isn static retain refer outer class thread local contain refer instanc inner class inner outer instanc reachabl elig garbag collect","""java/org/apache/jasper/runtime/JspFactoryImpl.java""","1","1","1","1","8","0","8","0","6","0","3","15","15","15","14","15","2","2","0","11","219","29","167","71","79","23","76","106","55","51","5","5","5","1","3","0","26","26","27","15","normal"
"49116","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49116 If session is already invalid, expire session to prevent memory leak.","Bug 49116  Memory leak by HttpSession.","memori leak http session httpsession","When session is stored in StandardManager#doUnload method, 
an invalid session is stored. 

For instance, 
If HttpSession#invalidate is executed while executing StandardManager#doUnload,
session of ""isValid=false"" is stored.

The session of isValid=false is restored in StandardManager#doLoad, 
and it registers in session map (sessions). 
However, no one can invalidate this session. 

If isValid is false, StandardSession#invalidate() and StandardSession#isValid() can not expire session.
They are throws IllegalStateException or return immediately. 

Consequently, the session of isValid=false is never deleted from the session map(sessions). 

I made a patch.
If session is already invalid, expire session to prevent memory leak.

Best Regards.
Keiichi.","session store standard manag standardmanag do unload dounload method invalid session store instanc http session httpsession invalid execut execut standard manag standardmanag do unload dounload session is valid isvalid fals store session is valid isvalid fals restor standard manag standardmanag do load doload regist session map session howev one invalid session is valid isvalid fals standard session standardsess invalid standard session standardsess is valid isvalid expir session throw illeg state except illegalstateexcept return immedi consequ session is valid isvalid fals never delet session map session made patch session alreadi invalid expir session prevent memori leak best regard keiichi","""java/org/apache/catalina/session/StandardManager.java""","4","4","4","1","23","2","14","6","3","0","2","22","22","22","5","22","2","0","5","15","690","116","377","99","246","198","172","266","89","177","25","25","25","4","3","1","90","90","94","25","normal"
"49118","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=49118 Use StringBuilder rather than concatenation","Bug 49118  Inefficient use of String concatenation in loop","ineffici use string concaten loop","","","""java/javax/servlet/http/HttpServlet.java""","2","2","2","1","29","1","10","16","3","1","13","22","22","21","4","22","4","2","9","7","822","90","286","121","171","446","147","212","95","117","19","19","19","1","3","2","62","62","63","22","normal"
"49125","243","Christopher Schultz","Fixed bug #49125: toString on byte[] array probably is not correct - Added HexUtils.toHexString method - Wrapped output of byte[] objects with a call to HexUtils.toHexString","Bug 49125  toString on byte[] array probably is not correct","to string tostr byte array probabl correct","Two examples of using toString() on a byte[] array, which is unlikely to produce the desired output:

ha.deploy.FileMessageFactory.writeMessage()
log message uses toString on msg.getData() which is a byte[] array

coyote.ajp.AjpMessage.dump
use toString on ""msg"" which is of type byte[]","two exampl use to string tostr byte array unlik produc desir output deploy file messag factori filemessagefactori write messag writemessag log messag us to string tostr msg get data getdata byte array coyot ajp ajp messag ajpmessag dump use to string tostr msg type byte","""java/org/apache/catalina/ha/deploy/FileMessageFactory.java""","3","3","3","1","31","0","19","11","1","2","2","8","8","6","12","8","0","1","1","6","378","33","184","48","129","167","93","125","41","84","10","10","10","7","2","1","29","29","29","14","enhancement"
"49125","243","Christopher Schultz","Fixed bug #49125: toString on byte[] array probably is not correct - Added HexUtils.toHexString method - Wrapped output of byte[] objects with a call to HexUtils.toHexString","Bug 49125  toString on byte[] array probably is not correct","to string tostr byte array probabl correct","Two examples of using toString() on a byte[] array, which is unlikely to produce the desired output:

ha.deploy.FileMessageFactory.writeMessage()
log message uses toString on msg.getData() which is a byte[] array

coyote.ajp.AjpMessage.dump
use toString on ""msg"" which is of type byte[]","two exampl use to string tostr byte array unlik produc desir output deploy file messag factori filemessagefactori write messag writemessag log messag us to string tostr msg get data getdata byte array coyot ajp ajp messag ajpmessag dump use to string tostr msg type byte","""java/org/apache/coyote/ajp/AjpMessage.java""","2","2","2","1","12","0","9","3","1","2","2","23","23","21","3","23","0","0","2","21","423","69","227","57","146","130","129","181","61","120","6","6","6","1","2","1","51","51","56","23","enhancement"
"49125","243","Christopher Schultz","Fixed bug #49125: toString on byte[] array probably is not correct - Added HexUtils.toHexString method - Wrapped output of byte[] objects with a call to HexUtils.toHexString","Bug 49125  toString on byte[] array probably is not correct","to string tostr byte array probabl correct","Two examples of using toString() on a byte[] array, which is unlikely to produce the desired output:

ha.deploy.FileMessageFactory.writeMessage()
log message uses toString on msg.getData() which is a byte[] array

coyote.ajp.AjpMessage.dump
use toString on ""msg"" which is of type byte[]","two exampl use to string tostr byte array unlik produc desir output deploy file messag factori filemessagefactori write messag writemessag log messag us to string tostr msg get data getdata byte array coyot ajp ajp messag ajpmessag dump use to string tostr msg type byte","""java/org/apache/tomcat/util/buf/HexUtils.java""","1","1","1","1","4","0","2","1","1","3","2","3","3","0","0","3","0","0","0","3","83","15","33","27","21","35","5","9","7","2","1","1","1","1","0","1","3","3","3","3","enhancement"
"49127","90","Mark Emlyn David Thomas","Fxi https://issues.apache.org/bugzilla/show_bug.cgi?id=49127 Don't swallow exceptions unnecessarily","Bug 49127  SimpleTcpReplicationManager.startInternal() ignores Exception","simpl tcp replic manag simpletcpreplicationmanag start intern startintern ignor except","ha.session.SimpleTcpReplicationManager.startInternal() ignores Exception when invoking Thread.sleep() - it only needs to ignore InterruptedException.","session simpl tcp replic manag simpletcpreplicationmanag start intern startintern ignor except invok thread sleep need ignor interrupt except interruptedexcept","""java/org/apache/catalina/ha/session/SimpleTcpReplicationManager.java""","2","2","2","1","14","0","11","3","1","0","1","37","37","37","14","37","0","0","6","31","704","73","459","128","285","184","209","296","114","182","13","11","13","7","5","0","90","86","95","45","enhancement"
"49128","90","Mark Emlyn David Thomas","Fxi https://issues.apache.org/bugzilla/show_bug.cgi?id=49128 Don't swallow exceptions unnecessarily","Bug 49128  loader.WebappClassLoader.start() ignores Exception","loader webapp class loader webappclassload start ignor except","catalina.loader.WebappClassLoader.start() ignores Exception.

However, it probably only needs to ignore SecurityException","catalina loader webapp class loader webappclassload start ignor except howev probabl need ignor secur except securityexcept","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","6","2","31","3","21","6","4","1","6","86","86","85","36","86","3","11","20","52","3324","530","1993","455","1387","808","915","1386","406","980","43","43","49","28","10","0","482","482","523","207","enhancement"
"49129","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49129","Bug 49129  DigestAuthenticator.md5Helper - possible incorrect lazy initialisation","digest authent digestauthent md5 helper md5helper possibl incorrect lazi initialis","Findbugs says:

""This method contains an unsynchronized lazy initialization of a non-volatile static field. Because the compiler or processor may reorder instructions, threads are not guaranteed to see a completely initialized object, if the method can be called by multiple threads. You can make the field volatile to correct the problem.""","findbug say method contain unsynchron lazi initi non volatil nonvolatil static field compil processor may reorder instruct thread guarante see complet initi object method call multipl thread make field volatil correct problem","""java/org/apache/catalina/authenticator/DigestAuthenticator.java""","4","4","4","2","35","3","18","13","1","3","4","9","9","6","1","9","0","0","6","3","427","80","189","82","126","158","100","142","63","79","15","15","19","7","2","1","38","38","44","25","normal"
"49140","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49140 Use appropriate iterators and for-each where possible","Bug 49140  Inefficient use of keySet() iterator in StandardContext.java","ineffici use key set keyset iter standard context standardcontext java","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","15","1","8","4","1","2","5","150","150","148","50","150","1","1","12","136","2989","576","1487","413","953","936","723","1085","396","689","21","21","24","11","5","1","366","366","414","220","enhancement"
"49140","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49140 Use appropriate iterators and for-each where possible","Bug 49140  Inefficient use of keySet() iterator in StandardContext.java","ineffici use key set keyset iter standard context standardcontext java","","","""java/org/apache/catalina/core/ApplicationHttpRequest.java""","2","2","3","1","16","1","9","4","2","0","3","41","41","41","18","41","9","1","6","25","976","223","455","145","284","300","223","336","125","211","10","10","14","6","4","1","111","111","125","81","enhancement"
"49140","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49140 Use appropriate iterators and for-each where possible","Bug 49140  Inefficient use of keySet() iterator in StandardContext.java","ineffici use key set keyset iter standard context standardcontext java","","","""java/org/apache/catalina/core/ApplicationHttpRequest.java""","2","2","3","1","16","1","9","4","2","0","3","41","41","41","18","41","9","1","6","25","976","223","455","145","284","300","223","336","125","211","10","10","14","6","4","1","111","111","125","81","enhancement"
"49140","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49140 Use appropriate iterators and for-each where possible","Bug 49140  Inefficient use of keySet() iterator in StandardContext.java","ineffici use key set keyset iter standard context standardcontext java","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","1","0","3","284","284","284","113","284","0","14","8","262","5999","1262","3001","813","1920","1742","1420","2161","794","1367","59","59","76","9","5","1","669","669","720","361","enhancement"
"49140","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49140 Use appropriate iterators and for-each where possible","Bug 49140  Inefficient use of keySet() iterator in StandardContext.java","ineffici use key set keyset iter standard context standardcontext java","","","""java/org/apache/catalina/ha/authenticator/ClusterSingleSignOnListener.java""","3","3","3","1","17","1","12","3","1","0","1","7","7","7","1","7","0","1","0","6","182","31","103","28","71","48","47","69","26","43","12","9","13","5","4","0","26","21","27","11","enhancement"
"49140","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49140 Use appropriate iterators and for-each where possible","Bug 49140  Inefficient use of keySet() iterator in StandardContext.java","ineffici use key set keyset iter standard context standardcontext java","","","""java/org/apache/catalina/ha/session/ClusterSessionListener.java""","2","2","3","1","15","0","9","5","1","0","1","4","4","4","0","4","0","0","0","4","109","14","45","19","25","50","19","31","17","14","8","8","9","1","5","1","11","11","12","4","enhancement"
"49140","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49140 Use appropriate iterators and for-each where possible","Bug 49140  Inefficient use of keySet() iterator in StandardContext.java","ineffici use key set keyset iter standard context standardcontext java","","","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","6","1","36","3","26","5","3","0","11","51","51","51","12","51","0","0","37","14","2173","308","1481","367","1037","386","709","1059","351","708","18","18","23","10","5","0","328","328","353","74","enhancement"
"49141","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49141 Stop Findbugs complaining","Bug 49141  Impossible cast in naming.factory.SendMailFactory.getObjectInstance","imposs cast name factori send mail factori sendmailfactori get object instanc getobjectinst","naming.factory.SendMailFactory.getObjectInstance contains an impossible cast from javax.mail.internet.MimeMessage to javax.mail.internet.MimePart

[Findbugs]","name factori send mail factori sendmailfactori get object instanc getobjectinst contain imposs cast javax mail internet mime messag mimemessag javax mail internet mime part mimepart findbug","""java/javax/mail/internet/MimeMessage.java""","1","1","1","1","2","0","2","0","1","0","0","3","3","3","0","3","0","0","0","3","28","2","10","6","0","16","2","6","6","0","1","1","1","1","0","2","3","3","3","3","normal"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/GenericServlet.java""","1","1","1","1","12","0","2","9","1","0","0","12","13","13","1","13","0","0","0","13","238","16","52","29","10","170","15","28","18","10","1","1","1","1","0","3","12","12","12","12","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/ServletContextAttributeEvent.java""","1","1","1","1","8","0","4","4","1","0","0","3","3","3","2","3","0","0","0","3","57","4","17","8","5","36","8","12","7","5","1","1","1","1","0","2","3","3","3","3","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/ServletContextEvent.java""","1","1","1","1","8","0","3","5","1","0","0","2","2","2","0","2","0","0","0","2","46","3","9","4","2","34","3","6","4","2","1","1","1","1","0","4","2","2","2","2","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/ServletException.java""","1","1","1","1","12","0","3","9","1","0","0","5","5","5","0","5","0","0","0","5","92","6","18","7","5","68","6","12","7","5","1","1","1","1","0","4","5","5","5","5","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/ServletRequestAttributeEvent.java""","1","1","1","1","13","0","4","9","1","0","0","3","3","3","2","3","0","0","0","3","71","4","17","8","5","50","8","12","7","5","1","1","1","1","0","3","3","3","3","3","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/ServletRequestEvent.java""","1","1","1","1","8","0","3","5","1","0","0","3","3","3","1","3","0","0","0","3","56","4","14","6","4","38","6","10","6","4","1","1","1","1","0","3","3","3","3","3","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/UnavailableException.java""","1","1","1","1","16","0","5","10","1","0","0","7","7","7","3","7","0","0","0","7","179","11","48","15","25","123","25","35","12","23","2","2","2","1","1","3","10","10","10","7","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/http/HttpServlet.java""","2","2","2","1","29","1","10","16","3","1","13","22","22","21","4","22","4","2","9","7","822","90","286","121","171","446","147","212","95","117","19","19","19","1","3","2","62","62","63","22","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/http/HttpSessionBindingEvent.java""","1","1","1","1","12","0","4","8","1","0","0","5","5","5","2","5","0","0","0","5","113","11","26","11","9","76","12","18","9","9","1","1","1","1","0","3","5","5","5","5","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/http/HttpSessionEvent.java""","1","1","1","1","4","0","3","1","1","0","0","2","2","2","0","2","0","0","0","2","35","2","9","4","2","24","3","6","4","2","1","1","1","1","0","3","2","2","2","2","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/jsp/JspException.java""","1","1","1","1","12","0","2","9","1","0","0","5","5","5","0","5","0","0","0","5","98","12","18","8","4","69","5","11","7","4","1","1","1","1","0","4","5","5","5","5","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/jsp/JspTagException.java""","1","1","1","1","13","0","3","10","1","0","0","4","4","4","0","4","0","0","0","4","83","5","15","6","4","63","5","10","6","4","1","1","1","1","0","4","4","4","4","4","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/jsp/SkipPageException.java""","1","1","1","1","8","0","3","5","1","0","0","4","4","4","0","4","0","0","0","4","75","5","15","6","4","55","5","10","6","4","1","1","1","1","0","4","4","4","4","4","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/jsp/el/ELException.java""","1","1","1","1","8","0","3","5","1","0","0","5","5","5","0","5","0","0","0","5","79","7","19","8","5","54","6","12","7","5","1","1","1","1","0","3","5","5","5","5","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/jsp/el/ELParseException.java""","1","1","1","1","8","0","4","4","1","0","0","2","2","2","0","2","0","0","0","2","51","6","12","5","2","34","3","6","4","2","1","1","1","1","0","3","2","2","2","2","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/javax/servlet/jsp/tagext/TagSupport.java""","1","1","1","1","13","0","5","8","1","1","0","15","15","14","4","15","0","0","0","15","289","30","98","37","38","161","37","60","28","32","5","5","10","5","2","2","24","24","29","19","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/ha/deploy/FileMessage.java""","1","1","1","1","3","0","3","0","1","0","0","15","15","15","7","15","0","0","0","15","111","15","68","30","23","28","33","49","27","22","1","1","1","1","0","0","15","15","15","15","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/ha/deploy/UndeployMessage.java""","1","1","1","1","4","0","3","1","1","0","0","16","16","16","7","16","0","0","0","16","115","15","68","32","22","33","31","48","28","20","1","1","1","1","0","0","16","16","16","16","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/manager/StatusManagerServlet.java""","7","7","8","1","59","7","42","9","1","0","1","4","4","4","5","4","0","0","0","4","347","64","201","59","143","82","118","149","50","99","15","15","15","1","4","0","30","30","33","4","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/session/StandardSession.java""","2","2","2","1","20","2","10","7","4","0","9","67","67","67","21","67","1","0","7","59","1893","379","862","267","528","654","380","562","200","362","20","20","26","7","5","1","174","174","191","97","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/ssi/SSIServlet.java""","4","4","4","1","30","2","19","8","1","0","0","5","5","5","7","5","0","0","2","3","226","25","126","54","80","75","72","94","44","50","7","7","9","3","1","1","22","22","24","7","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/ssi/SSIStopProcessingException.java""","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","31","2","3","2","0","26","1","2","2","0","0","0","0","0","0","9","0","0","0","0","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/tribes/ChannelException.java""","1","1","1","1","7","0","4","2","2","0","1","15","15","15","3","15","0","0","0","15","182","19","79","30","34","84","38","63","28","35","3","3","4","1","2","1","24","24","28","15","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/tribes/RemoteProcessException.java""","1","1","1","1","3","0","3","0","1","0","0","4","4","4","0","4","0","0","0","4","47","5","15","6","4","27","5","10","6","4","1","1","1","1","0","2","4","4","4","4","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/tribes/UniqueId.java""","1","1","2","1","4","0","4","0","1","0","0","7","7","7","1","7","0","0","0","7","76","11","41","18","17","25","20","33","15","18","5","5","8","1","2","1","12","12","15","7","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/tribes/io/ChannelData.java""","1","1","1","1","10","0","6","4","1","5","2","27","27","22","5","27","0","0","0","27","364","31","195","66","122","167","126","157","62","95","2","2","3","1","1","1","30","30","33","27","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java""","2","2","3","1","10","0","9","1","4","0","13","109","112","112","30","112","0","1","10","101","1517","174","1109","343","684","257","573","855","308","547","20","20","25","7","5","0","285","276","331","144","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java""","2","2","3","1","10","0","9","1","4","0","13","109","112","112","30","112","0","1","10","101","1517","174","1109","343","684","257","573","855","308","547","20","20","25","7","5","0","285","276","331","144","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/tribes/tipis/LazyReplicatedMap.java""","3","3","4","1","19","0","11","7","1","0","1","5","5","5","0","5","0","0","2","3","182","16","70","27","43","96","40","56","25","31","12","12","16","5","4","1","16","16","20","9","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/tribes/tipis/LazyReplicatedMap.java""","3","3","4","1","19","0","11","7","1","0","1","5","5","5","0","5","0","0","2","3","182","16","70","27","43","96","40","56","25","31","12","12","16","5","4","1","16","16","20","9","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/tribes/tipis/ReplicatedMap.java""","1","1","1","1","11","0","4","6","1","0","0","5","5","5","0","5","0","0","2","3","119","13","30","16","11","76","15","23","13","10","3","3","5","3","1","3","7","7","9","7","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/tribes/util/ExecutorFactory.java""","1","1","1","1","5","0","4","0","2","2","0","8","8","6","1","8","0","0","0","8","84","12","49","24","20","24","28","43","23","20","5","5","5","5","1","0","13","13","13","12","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/util/ParameterMap.java""","1","1","1","1","12","2","4","6","1","0","1","10","10","10","1","10","0","0","0","10","218","61","55","22","24","102","20","35","17","18","2","2","2","1","1","2","14","14","14","10","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/catalina/util/ResourceSet.java""","1","1","1","1","11","2","4","5","1","0","1","9","9","9","1","9","0","0","0","9","190","56","48","20","20","86","18","31","16","15","2","2","2","1","1","2","12","12","12","9","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/jasper/JasperException.java""","1","1","1","1","5","0","3","2","1","0","0","3","3","3","0","3","0","0","0","3","46","5","12","5","3","29","4","8","5","3","1","1","1","1","0","2","3","3","3","3","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/jasper/compiler/JspDocumentParser.java""","5","5","6","1","37","2","33","2","2","3","3","31","31","28","17","31","1","13","0","17","1473","124","1103","198","826","254","336","510","144","366","39","39","46","12","5","0","176","176","214","51","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/jasper/runtime/HttpJspBase.java""","1","1","1","1","3","0","3","0","1","0","0","9","10","10","0","10","0","0","2","8","86","15","47","28","7","24","17","27","20","7","1","1","1","1","0","1","9","9","9","9","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/juli/logging/LogConfigurationException.java""","1","1","1","1","8","0","3","4","1","0","0","5","5","5","1","5","0","0","0","5","93","22","21","9","7","51","8","14","8","6","2","2","2","1","0","2","6","6","6","5","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/naming/EjbRef.java""","2","2","2","1","17","0","11","6","1","0","4","3","3","3","0","3","0","0","0","3","139","33","46","18","25","60","22","31","14","17","4","4","4","3","2","1","8","8","8","5","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/naming/HandlerRef.java""","2","2","2","1","14","0","12","1","1","0","9","4","4","4","0","4","0","0","0","4","179","48","70","30","44","61","43","53","25","28","3","3","3","3","2","1","9","9","9","6","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/naming/JndiPermission.java""","1","1","1","1","8","0","3","5","1","0","0","2","2","2","0","2","0","0","0","2","62","9","10","5","2","43","4","7","5","2","1","1","1","1","0","4","2","2","2","2","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/naming/ResourceEnvRef.java""","1","1","1","1","12","0","6","5","1","0","1","3","3","3","0","3","0","0","0","3","100","25","29","13","12","46","11","17","9","8","3","3","3","3","2","2","5","5","5","5","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/naming/ResourceLinkRef.java""","2","2","2","1","13","0","8","5","1","0","2","3","3","3","0","3","0","0","0","3","112","27","36","16","17","49","16","23","12","11","3","3","3","3","2","1","6","6","6","5","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/naming/ServiceRef.java""","2","2","2","1","12","0","10","1","1","0","8","7","7","7","1","7","0","0","0","7","206","50","95","36","57","61","53","69","29","40","6","6","6","3","2","1","15","15","15","9","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/naming/TransactionRef.java""","1","1","1","1","10","0","6","4","1","0","1","3","3","3","0","3","0","0","0","3","96","25","28","12","12","43","11","17","9","8","3","3","3","3","2","2","5","5","5","5","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/tomcat/util/buf/CharChunk.java""","2","2","2","1","10","0","8","2","3","1","0","52","54","53","8","54","0","2","0","52","718","115","443","122","258","166","218","338","119","219","8","8","11","6","3","0","119","119","137","95","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/tomcat/util/buf/MessageBytes.java""","2","2","2","1","13","0","10","2","2","2","5","38","38","36","11","38","0","2","1","35","649","65","417","83","290","167","223","310","83","227","8","7","12","8","3","0","100","85","109","66","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/tomcat/util/modeler/BaseAttributeFilter.java""","1","1","1","1","15","2","6","6","1","0","0","6","6","6","1","6","0","0","0","6","160","42","49","15","24","69","18","35","14","21","5","5","5","5","1","1","11","11","11","10","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/tomcat/util/modeler/FixedNotificationFilter.java""","1","1","1","1","13","0","6","6","1","0","0","3","3","3","2","3","0","0","0","3","95","16","26","10","12","53","11","19","10","9","3","3","3","3","1","2","5","5","5","5","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/tomcat/util/modeler/ManagedBean.java""","2","2","2","1","18","1","11","5","1","0","3","26","26","26","10","26","2","0","0","24","630","104","321","103","212","207","167","233","92","141","11","11","12","1","4","1","65","65","68","26","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""java/org/apache/tomcat/util/net/URL.java""","4","4","5","2","27","3","16","7","1","1","0","21","21","20","9","21","0","2","0","19","732","140","361","65","275","235","185","275","60","215","18","18","25","9","4","1","93","93","106","47","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""test/org/apache/catalina/tribes/demos/MapDemo.java""","2","2","3","1","16","0","12","2","8","4","2","26","26","22","14","26","0","1","0","25","549","66","384","112","254","100","229","298","110","188","13","13","23","11","4","0","72","65","83","36","enhancement"
"49142","221","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49142 Add missing serialVersionUIDs using Eclipse's auto correct and a little manual formatting","Bug 49142  Missing serialVersionUIDs","miss serial versionui serialversionuid","org.apache.catalina.ha.ClusterMessageBase is Serializable; consider declaring a serialVersionUID

Similarly for:
org.apache.catalina.ha.session.ReplicatedSession 
org.apache.catalina.ha.session.SerializablePrincipal 
org.apache.catalina.session.StandardSession 
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.MapMessage
org.apache.tomcat.util.modeler.ManagedBean","apach catalina cluster messag base clustermessagebas serializ consid declar serial versionui serialversionuid similarli apach catalina session replic session replicatedsess apach catalina session serializ princip serializableprincip apach catalina session standard session standardsess apach catalina tribe tipi abstract replic map abstractreplicatedmap map messag mapmessag apach tomcat util model manag bean managedbean","""webapps/examples/WEB-INF/jsp/applet/Clock2.java""","2","2","2","1","16","0","14","0","1","0","0","10","10","10","13","10","0","0","0","10","217","23","165","39","112","38","111","135","34","101","7","7","10","1","2","0","23","23","26","10","enhancement"
"49143","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49143 Threading / initialisation issues. Not all were valid. Make them volatile anyway so FindBugs doesn't complain. Fix some additional issues - use of valueOf() - found along the way","Bug 49143  Possible incorrect lazy initialisations","possibl incorrect lazi initialis","Incorrect lazy initialization of static field:

org.apache.catalina.realm.RealmBase.md5Helper
org.apache.catalina.session.StandardSession.sessionContext
org.apache.catalina.startup.TldConfig.noTldJars
org.apache.catalina.util.ExtensionValidator.containerAvailableExtensions
org.apache.tomcat.util.modeler.modules.MbeansDescriptorsDigesterSource.digester

fields should probably all be made volatile","incorrect lazi initi static field apach catalina realm realm base realmbas md5 helper md5helper apach catalina session standard session standardsess session context sessioncontext apach catalina startup tld config tldconfig no tld jar notldjar apach catalina util extens valid extensionvalid contain avail extens containeravailableextens apach tomcat util model modul mbean descriptor digest sourc mbeansdescriptorsdigestersourc digest field probabl made volatil","""java/org/apache/catalina/realm/RealmBase.java""","4","4","4","1","22","2","14","4","2","3","8","51","54","51","18","54","1","2","11","40","1421","247","841","216","528","337","398","612","204","408","53","53","63","21","6","0","209","209","234","100","normal"
"49143","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49143 Threading / initialisation issues. Not all were valid. Make them volatile anyway so FindBugs doesn't complain. Fix some additional issues - use of valueOf() - found along the way","Bug 49143  Possible incorrect lazy initialisations","possibl incorrect lazi initialis","Incorrect lazy initialization of static field:

org.apache.catalina.realm.RealmBase.md5Helper
org.apache.catalina.session.StandardSession.sessionContext
org.apache.catalina.startup.TldConfig.noTldJars
org.apache.catalina.util.ExtensionValidator.containerAvailableExtensions
org.apache.tomcat.util.modeler.modules.MbeansDescriptorsDigesterSource.digester

fields should probably all be made volatile","incorrect lazi initi static field apach catalina realm realm base realmbas md5 helper md5helper apach catalina session standard session standardsess session context sessioncontext apach catalina startup tld config tldconfig no tld jar notldjar apach catalina util extens valid extensionvalid contain avail extens containeravailableextens apach tomcat util model modul mbean descriptor digest sourc mbeansdescriptorsdigestersourc digest field probabl made volatil","""java/org/apache/catalina/session/StandardSession.java""","2","2","2","1","20","2","10","7","4","0","7","67","67","67","19","67","1","0","7","59","1835","380","799","216","518","658","372","554","199","355","20","20","26","7","5","1","175","175","192","97","normal"
"49143","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49143 Threading / initialisation issues. Not all were valid. Make them volatile anyway so FindBugs doesn't complain. Fix some additional issues - use of valueOf() - found along the way","Bug 49143  Possible incorrect lazy initialisations","possibl incorrect lazi initialis","Incorrect lazy initialization of static field:

org.apache.catalina.realm.RealmBase.md5Helper
org.apache.catalina.session.StandardSession.sessionContext
org.apache.catalina.startup.TldConfig.noTldJars
org.apache.catalina.util.ExtensionValidator.containerAvailableExtensions
org.apache.tomcat.util.modeler.modules.MbeansDescriptorsDigesterSource.digester

fields should probably all be made volatile","incorrect lazi initi static field apach catalina realm realm base realmbas md5 helper md5helper apach catalina session standard session standardsess session context sessioncontext apach catalina startup tld config tldconfig no tld jar notldjar apach catalina util extens valid extensionvalid contain avail extens containeravailableextens apach tomcat util model modul mbean descriptor digest sourc mbeansdescriptorsdigestersourc digest field probabl made volatil","""java/org/apache/catalina/startup/TldConfig.java""","3","3","3","1","16","0","12","3","2","2","7","25","25","23","8","25","0","7","0","18","610","84","352","102","215","174","154","239","98","141","10","10","13","6","5","0","80","80","87","33","normal"
"49143","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49143 Threading / initialisation issues. Not all were valid. Make them volatile anyway so FindBugs doesn't complain. Fix some additional issues - use of valueOf() - found along the way","Bug 49143  Possible incorrect lazy initialisations","possibl incorrect lazi initialis","Incorrect lazy initialization of static field:

org.apache.catalina.realm.RealmBase.md5Helper
org.apache.catalina.session.StandardSession.sessionContext
org.apache.catalina.startup.TldConfig.noTldJars
org.apache.catalina.util.ExtensionValidator.containerAvailableExtensions
org.apache.tomcat.util.modeler.modules.MbeansDescriptorsDigesterSource.digester

fields should probably all be made volatile","incorrect lazi initi static field apach catalina realm realm base realmbas md5 helper md5helper apach catalina session standard session standardsess session context sessioncontext apach catalina startup tld config tldconfig no tld jar notldjar apach catalina util extens valid extensionvalid contain avail extens containeravailableextens apach tomcat util model modul mbean descriptor digest sourc mbeansdescriptorsdigestersourc digest field probabl made volatil","""java/org/apache/catalina/util/ExtensionValidator.java""","7","7","8","3","49","2","35","11","1","6","4","6","6","0","4","6","0","4","0","2","443","51","258","95","167","134","114","164","75","89","14","14","15","10","5","1","45","45","48","23","normal"
"49143","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49143 Threading / initialisation issues. Not all were valid. Make them volatile anyway so FindBugs doesn't complain. Fix some additional issues - use of valueOf() - found along the way","Bug 49143  Possible incorrect lazy initialisations","possibl incorrect lazi initialis","Incorrect lazy initialization of static field:

org.apache.catalina.realm.RealmBase.md5Helper
org.apache.catalina.session.StandardSession.sessionContext
org.apache.catalina.startup.TldConfig.noTldJars
org.apache.catalina.util.ExtensionValidator.containerAvailableExtensions
org.apache.tomcat.util.modeler.modules.MbeansDescriptorsDigesterSource.digester

fields should probably all be made volatile","incorrect lazi initi static field apach catalina realm realm base realmbas md5 helper md5helper apach catalina session standard session standardsess session context sessioncontext apach catalina startup tld config tldconfig no tld jar notldjar apach catalina util extens valid extensionvalid contain avail extens containeravailableextens apach tomcat util model modul mbean descriptor digest sourc mbeansdescriptorsdigestersourc digest field probabl made volatil","""java/org/apache/tomcat/util/modeler/modules/MbeansDescriptorsDigesterSource.java""","1","1","1","1","28","2","17","7","1","1","2","7","7","6","5","7","0","0","1","6","250","34","147","36","106","70","68","81","32","49","5","5","5","1","1","0","11","11","11","7","normal"
"49144","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49144 Not an issue but stop FindBugs complaining Also fix one other FindBugs report for this class.","Bug 49144  Incorrect lazy initialization and update of static fields?","incorrect lazi initi updat static field","Incorrect lazy initialization and update of static fields:

org.apache.catalina.startup.Bootstrap.daemon
org.apache.catalina.startup.ContextConfig.contextDigester

Findbugs says:

This method contains an unsynchronized lazy initialization of a static field. After the field is set, the object stored into that location is further updated or accessed. The setting of the field is visible to other threads as soon as it is set. If the futher accesses in the method that set the field serve to initialize the object, then you have a very serious multithreading bug, unless something else prevents any other thread from accessing the stored object until it is fully initialized. 

Even if you feel confident that the method is never called by multiple threads, it might be better to not set the static field until the value you are setting it to is fully populated/initialized.","incorrect lazi initi updat static field apach catalina startup bootstrap daemon apach catalina startup context config contextconfig context digest contextdigest findbug say method contain unsynchron lazi initi static field field set object store locat updat access set field visibl thread soon set futher access method set field serv initi object seriou multithread unless someth els prevent thread access store object fulli initi even feel confid method never call multipl thread might better set static field valu set fulli popul initi","""java/org/apache/catalina/startup/Bootstrap.java""","2","2","2","1","19","2","14","3","1","3","4","19","19","16","4","19","0","5","0","14","498","108","292","100","193","98","152","204","80","124","12","12","14","4","3","0","51","51","55","24","normal"
"49150","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49150","Bug 49150  All primary sessions are deleted at BackupManager#stopInternal.","primari session delet backup manag backupmanag stop intern stopintern","BackupManager#stopInternal is as follows.

=====
protected synchronized void stopInternal() throws LifecycleException {

    super.stopInternal();

    LazyReplicatedMap map = (LazyReplicatedMap)sessions;
        if ( map!=null ) {
            map.breakdown();
        }

        cluster.removeManager(this);
}
=====

In Tomcat 7.0.0 RC1, super#stopInternal() is called first.
In StandardManager#stopInternal() of the super class,
The session is stored, and expire all active sessions. 

Storing session is unnecessary in BackupManager.
and
When the session expired, the session is deleted from all cluster nodes.

As a Result,
All primary sessions (of own node has) are deleted  from all cluster nodes.

For instance,
Node1 : sessionA(primary), sessionB(proxy), sessionC(backup)
Node2 : sessionA(backup), sessionB(primary), sessionC(proxy)
Node3 : sessionA(proxy), sessionB(backup), sessionC(primary)

If Node1 is stopped, it becomes the following. 

Node1 : stopped
Node2 : sessionB(primary), sessionC(backup)
Node3 : sessionB(backup), sessionC(primary)

sessionA is expired.
It should be the following. 

Node1 : stopped
Node2 : sessionA(primary), sessionB(primary), sessionC(backup)
Node3 : sessionA(backup), sessionB(backup), sessionC(primary)


There is no problem in Tomcat6.0.x, 
because it executes super.stop() after LazyReplicatedMap#breakdown() .

I made a patch against trunk.

Best Regards.","backup manag backupmanag stop intern stopintern follow protect synchron void stop intern stopintern throw lifecycl except lifecycleexcept super stop intern stopintern lazi replic map lazyreplicatedmap map lazi replic map lazyreplicatedmap session map null map breakdown cluster remov manag removemanag tomcat c1 rc1 super stop intern stopintern call first standard manag standardmanag stop intern stopintern super class session store expir activ session store session unnecessari backup manag backupmanag session expir session delet cluster node result primari session node delet cluster node instanc node1 session sessiona primari session sessionb proxi session sessionc backup node2 session sessiona backup session sessionb primari session sessionc proxi node3 session sessiona proxi session sessionb backup session sessionc primari node1 stop becom follow node1 stop node2 session sessionb primari session sessionc backup node3 session sessionb backup session sessionc primari session sessiona expir follow node1 stop node2 session sessiona primari session sessionb primari session sessionc backup node3 session sessiona backup session sessionb backup session sessionc primari problem tomcat6 execut super stop lazi replic map lazyreplicatedmap breakdown made patch trunk best regard","""java/org/apache/catalina/ha/session/BackupManager.java""","1","1","1","1","6","0","4","1","1","0","2","32","32","32","5","32","0","0","2","30","315","52","176","79","74","89","83","124","70","54","2","2","3","1","1","1","39","39","40","32","normal"
"49151","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49151","Bug 49151  ClassCastException in BackupManager#stopInternal.","class cast except classcastexcept backup manag backupmanag stop intern stopintern","In BackupManager#startInternal,
When constructor of LazyReplicatedMap throws exception, 
sessions is not LazyReplicatedMap.
Actually, AbstractReplicatedMap#init has the possibility of throwing RuntimeException. 

In BackupManager#stopInternal ClassCastException is thrown 
because AbstractReplicatedMap#breakdown is executed regardless of the type of sessions. 

should be changed as follows to avoid ClassCastException. 
===
skip.
if (sessions instanceof LazyReplicatedMap) {
    LazyReplicatedMap map = (LazyReplicatedMap)sessions;
    if ( map!=null ) {
        map.breakdown();
    }
}
skip.
===

This problem exists in Tomcat7.0 and 6.0.

Best Regards.","backup manag backupmanag start intern startintern constructor lazi replic map lazyreplicatedmap throw except session lazi replic map lazyreplicatedmap actual abstract replic map abstractreplicatedmap init possibl throw runtim except runtimeexcept backup manag backupmanag stop intern stopintern class cast except classcastexcept thrown abstract replic map abstractreplicatedmap breakdown execut regardless type session chang follow avoid class cast except classcastexcept skip session instanceof lazi replic map lazyreplicatedmap lazi replic map lazyreplicatedmap map lazi replic map lazyreplicatedmap session map null map breakdown skip problem exist tomcat7 best regard","""java/org/apache/catalina/ha/session/BackupManager.java""","1","1","1","1","6","0","4","1","1","0","2","32","32","32","5","32","0","0","2","30","328","55","185","80","81","90","89","133","71","62","4","4","4","1","1","0","42","42","43","32","normal"
"49164","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49164 Improve unit tests by propagating failures from spawned threads to main thread. Patch provided by Felix Schumacher.","Bug 49164  junit test ignores failures in threads","junit ignor failur thread","","","""test/org/apache/catalina/tribes/test/interceptors/TestOrderInterceptor.java""","2","2","2","1","12","0","12","0","5","1","0","11","11","10","13","11","0","0","2","9","188","18","151","53","93","19","110","140","62","78","5","5","5","1","2","0","26","26","26","11","minor"
"49165","423","Rainer Jung","BZ 49165 and more: - Allow any time stamp formats supported   by SimpleDateFormat in AccessLogValve. - Support logging begin and/or end of request.","Bug 49165  Enhancement - Allow %{TIME_FORMAT}t As Configuration for AccessLogValve","enhanc allow time format configur access log valv accesslogvalv","AccessLogValve.DateAndTimeElement() can currently be configured only with %t which output the date/time in Common Log Format.

By adding the capability to configure with %{TIME_FORMAT}, one could override (at least) the timeFormatter property of the class ... or it could go further and allow overriding of all the [day, month, year, time]Formatter properties.

Justification for enhancement:  The log currenlty provide the ability to log processing time in millis (via %T), but an accurate log of the order in which requests are received cannot be determined without the capabilities of logging a  a format with milliseconds using the %t element.","access log valv accesslogvalv date and time element dateandtimeel current configur output date time common log format ad capabl configur time format one could overrid least time formatt timeformatt properti class could go allow overrid day month year time formatt properti justif enhanc log currenlti provid abil log process time milli via accur log order request receiv cannot determin without capabl log format millisecond use element","""java/org/apache/catalina/valves/AccessLogValve.java""","2","2","2","1","11","0","8","2","28","3","8","76","77","74","34","77","0","7","5","65","1506","202","857","277","467","449","359","545","217","328","21","10","21","4","4","1","179","156","192","81","enhancement"
"49170","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49170","Bug 49170  Transmission of duplicated session in DeltaManager#handleGET_ALL_SESSIONS.","transmiss duplic session delta manag deltamanag handl handleget session","","","""java/org/apache/catalina/ha/session/DeltaManager.java""","2","2","2","1","14","0","9","4","1","0","4","88","88","88","36","88","0","0","23","65","1525","149","890","228","578","503","455","666","225","441","14","14","19","4","7","1","221","211","246","97","normal"
"49171","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49171 Fix IDE warning Patch provided by sebb","Bug 49171  Avoid raw type warning in TagSupport","avoid raw type warn tag support tagsupport","","","""java/javax/servlet/jsp/tagext/TagSupport.java""","1","1","1","1","13","0","5","8","1","1","0","15","15","14","4","15","0","0","0","15","282","30","91","30","38","161","37","60","28","32","5","5","10","5","2","2","24","24","29","19","enhancement"
"49180","190","Timothy A. Funk","bug 49180","Bug 49180  Add option to disable log rotation in FileHandler.","add option disabl log rotat file handler filehandl","Small enhancement to FileHandler.java which allow susers to disable log rotation by setting the .rotation attribute to ""false"".","small enhanc file handler filehandl java allow suser disabl log rotat set rotat attribut fals","""java/org/apache/juli/FileHandler.java""","3","3","3","1","21","2","16","3","1","0","0","10","10","10","7","10","0","2","3","5","347","67","196","60","131","85","105","141","55","86","11","11","12","4","4","0","35","35","36","17","enhancement"
"49184","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49184 Prevent ArrayIndexOutOfBoundsException Patch provided by Pid","Bug 49184  Index out of bounds exception thrown when dynamically adding Filter","index bound except thrown dynam ad filter","When dynamically adding a filter to a context an exception is thrown.

java.lang.ArrayIndexOutOfBoundsException
	at java.lang.System.arraycopy(Native Method)
	at org.apache.catalina.core.StandardContext.addFilterMapBefore(StandardContext.java:2629)
	at org.apache.catalina.core.ApplicationFilterRegistration.addMappingForServletNames(ApplicationFilterRegistration.java:75)","dynam ad filter context except thrown java lang array index out of bound except arrayindexoutofboundsexcept java lang system arraycopi nativ method apach catalina core standard context standardcontext add filter map befor addfiltermapbefor standard context standardcontext java apach catalina core applic filter registr applicationfilterregistr add map for servlet name addmappingforservletnam applic filter registr applicationfilterregistr java","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","1","0","3","284","284","284","113","284","0","14","8","262","5993","1262","2995","807","1915","1742","1414","2157","790","1367","59","59","76","9","5","1","669","669","720","361","normal"
"49195","154","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49195 Avoid error message when shutting down Windows service when the shutdown port is disabled.","Bug 49195  Using -1 as shutdown port with Windows service works, but prints error message","use shutdown port window servic work print error messag","1. Install Tomcat as a service on Windows
2. Specify <Server port=""-1"" in server.xml
3. Start the service, and then stop the service.
4. The following is printed in the catalina.2010-04-27.log:

27.04.2010 17:49:13 org.apache.catalina.startup.Catalina stopServer
SEVERE: No shutdown port configured. Shut down server through OS signal. Server not shut down.

It is just a message. Tomcat stops regardless of it:
After printing the message Catalina#stopServer() performs System.exit(1) which results in Tomcat shutdown.

I think that when service launcher stops Tomcat, Catalina#server is not null. That can be used to differentiate the two use cases.

There could be improvements on how to stop Tomcat. E.g., to call Catalina.stop(). If that is the case, it would be better to use wait(10000) instead of sleep(10000) in StandardServer.await(), so that it could be woken by a notifyAll() call, or use interrupt() call to wake it up (if we know the thread). System.exit(0) would work regardless of all that.

I suppose that jsvc may show the same behaviour, but I have not tried.","instal tomcat servic window specifi server port server xml start servic stop servic follow print catalina log apach catalina startup catalina stop server stopserv sever shutdown port configur shut server signal server shut messag tomcat stop regardless print messag catalina stop server stopserv perform system exit result tomcat shutdown think servic launcher stop tomcat catalina server null use differenti two use case could improv stop tomcat call catalina stop case would better use wait instead sleep standard server standardserv await could woken notifi all notifyal call use interrupt call wake know thread system exit would work regardless suppos jsvc may show behaviour tri","""java/org/apache/catalina/startup/Catalina.java""","2","2","3","1","18","2","14","2","3","0","2","33","33","33","10","33","0","0","9","24","861","176","515","121","361","175","249","347","113","234","13","13","15","9","3","0","95","95","99","43","minor"
"49207","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49207 FilterMap#filterName was null when it was configured dynamically with addMappingForUrlPatterns() Patch provided by Pid","Bug 49207  Filter name not set when dynamically added","filter name set dynam ad","When dynamically adding a Filter the name is not set when calling the method ""addMappingForUrlPatterns"" in ApplicationFilterRegistration.java.

java.lang.IllegalArgumentException: Filter mapping specifies an unknown
filter name null
	at
org.apache.catalina.core.StandardContext.validateFilterMap(StandardContext.java:2650)
	at
org.apache.catalina.core.StandardContext.addFilterMapBefore(StandardContext.java:2622)
	at
org.apache.catalina.core.ApplicationFilterRegistration.addMappingForUrlPatterns(ApplicationFilterRegistration.java:102)
	at
org.pidster.tomcat.test7.dyn.TestDynamicsListener.contextInitialized(TestDynamicsListener.java:105)","dynam ad filter name set call method add map for url pattern addmappingforurlpattern applic filter registr applicationfilterregistr java java lang illeg argument except illegalargumentexcept filter map specifi unknown filter name null apach catalina core standard context standardcontext valid filter map validatefiltermap standard context standardcontext java apach catalina core standard context standardcontext add filter map befor addfiltermapbefor standard context standardcontext java apach catalina core applic filter registr applicationfilterregistr add map for url pattern addmappingforurlpattern applic filter registr applicationfilterregistr java pidster tomcat test7 dyn test dynam listen testdynamicslisten context initi contextiniti test dynam listen testdynamicslisten java","""java/org/apache/catalina/core/ApplicationFilterRegistration.java""","2","2","3","1","11","1","9","0","1","0","1","12","12","12","2","12","0","0","0","12","212","41","148","55","67","23","54","99","47","52","6","6","6","1","3","0","34","34","36","12","normal"
"49209","152","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49209 Prevent possible AccessControlException during undeployment when running with a security manager Patch provided by Sylvain Laurent","Bug 49209  AccessControlException when undeploying application","access control except accesscontrolexcept undeploy applic","When running Tomcat with a SecurityManager, an AccessControlException is thrown during undeployment.

Stack trace:

Caused by: java.security.AccessControlException: access denied (java.lang.RuntimePermission getClassLoader)
	at java.security.AccessControlContext.checkPermission(AccessControlContext.java:323)
	at java.security.AccessController.checkPermission(AccessController.java:546)
	at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
	at java.lang.Class.getClassLoader(Class.java:594)
	at org.apache.catalina.loader.JdbcLeakPrevention.clearJdbcDriverRegistrations(JdbcLeakPrevention.java:49)

I assume the default catalina.policy should be updated, to take this case into account.","run tomcat secur manag securitymanag access control except accesscontrolexcept thrown undeploy stack trace caus java secur access control except accesscontrolexcept access deni java lang runtim permiss runtimepermiss get class loader getclassload java secur access control context accesscontrolcontext check permiss checkpermiss access control context accesscontrolcontext java java secur access control accesscontrol check permiss checkpermiss access control accesscontrol java java lang secur manag securitymanag check permiss checkpermiss secur manag securitymanag java java lang class get class loader getclassload class java apach catalina loader jdbc leak prevent jdbcleakprevent clear jdbc driver registr clearjdbcdriverregistr jdbc leak prevent jdbcleakprevent java assum default catalina polici updat take case account","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","6","2","31","3","21","6","4","1","6","87","87","86","36","87","3","11","20","53","3366","531","2017","467","1395","825","923","1397","409","988","43","43","49","28","10","0","485","485","526","210","normal"
"49221","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49221 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49221  javax.servlet.http.Cookie.setDomain uses default charset","javax servlet http cooki set domain setdomain us default charset","javax.servlet.http.Cookie.setDomain(String pattern)
has the following code:

domain = pattern.toLowerCase();

The result of this depends on the default Locale; it would be safer to use a fixed locale, e.g. Local.ENGLISH.","javax servlet http cooki set domain setdomain string pattern follow code domain pattern to lower case tolowercas result depend default local would safer use fix local local english","""java/javax/servlet/http/Cookie.java""","1","1","1","1","17","0","4","13","1","0","10","20","20","20","11","20","0","1","0","19","614","117","148","56","78","363","65","94","51","43","3","3","13","3","2","2","25","25","39","22","normal"
"49224","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49224 Only try setting the username and password if they are non-null Patch provided by Matt Passell","Bug 49224  NullPointerException in PooledConnection when username or password are null","null pointer except nullpointerexcept pool connect pooledconnect usernam password null","I'm using jdbc-pool (version 1.0.8.5) to connect to a DataSource requiring no authentication.  Unless I explicitly set the username and password in the PoolProperties object to empty String (as opposed to leaving them null), a NullPointerException is thrown on lines 215 or 216 of PooledConnection.connectUsingDriver().","use jdbc pool jdbcpool version connect data sourc datasourc requir authent unless explicitli set usernam password pool properti poolproperti object empti string oppos leav null null pointer except nullpointerexcept thrown line pool connect pooledconnect connect use driver connectusingdriv","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/PooledConnection.java""","2","2","3","1","12","0","8","4","1","0","6","35","35","35","15","35","0","2","2","31","609","61","314","81","194","242","144","230","80","150","11","11","14","6","3","1","88","88","105","45","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/core/ApplicationPart.java""","1","1","2","1","7","0","7","0","1","0","0","12","12","12","2","12","0","0","0","12","159","18","113","52","47","28","51","75","40","35","5","5","6","1","4","0","23","23","24","12","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/core/StandardEngine.java""","1","1","1","1","11","1","5","5","1","0","2","16","16","16","4","16","0","0","2","14","289","66","109","46","49","114","50","74","38","36","3","3","3","1","1","1","23","23","23","16","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/core/StandardHost.java""","1","1","1","1","12","1","6","4","2","0","2","47","47","47","17","47","0","0","3","44","878","214","358","129","201","307","174","265","119","146","11","11","11","6","4","1","83","83","84","63","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/deploy/FilterMap.java""","2","2","2","1","9","0","7","1","1","0","7","12","12","12","6","12","0","0","0","12","216","45","111","37","69","60","62","90","38","52","6","6","6","1","1","1","27","27","27","12","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","28","2","20","5","11","0","18","36","36","36","1","36","0","1","14","21","1356","129","971","198","783","263","429","561","186","375","17","17","21","10","4","0","131","131","151","63","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/manager/util/SessionUtils.java""","5","5","7","3","27","1","21","4","1","6","5","7","7","1","0","7","0","1","0","6","259","23","172","44","107","69","85","123","47","76","19","19","26","10","6","0","40","40","49","24","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/servlets/CGIServlet.java""","4","4","5","1","45","4","27","14","5","0","8","32","32","32","25","32","1","3","24","4","1943","269","938","218","699","747","516","662","194","468","29","29","32","7","5","1","150","145","175","42","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/servlets/WebdavServlet.java""","8","8","9","3","64","10","45","8","4","2","46","38","38","36","14","38","0","15","14","9","3142","631","1899","428","1480","613","955","1275","344","931","67","63","74","16","6","0","328","318","354","117","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/ssi/ResponseIncludeWrapper.java""","2","2","2","1","14","0","9","4","1","0","4","12","12","12","7","12","0","0","0","12","267","26","154","55","73","87","67","100","44","56","4","4","4","1","2","1","30","30","30","12","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/ssi/SSIMediator.java""","2","2","2","1","10","0","8","1","1","0","4","23","23","23","9","23","0","0","4","19","352","51","236","77","149","65","144","189","73","116","14","14","16","11","3","0","47","47","50","33","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/ssi/SSIProcessor.java""","4","4","6","2","26","0","20","5","1","0","3","10","10","10","3","10","0","1","6","3","325","21","222","67","161","84","130","176","62","114","14","14","17","8","7","0","47","47","64","26","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/ssi/SSIServlet.java""","4","4","4","1","29","2","19","8","1","0","0","5","5","5","6","5","0","0","2","3","218","22","122","52","77","74","69","91","42","49","7","7","9","3","1","1","22","22","24","7","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/ssi/SSIServletExternalResolver.java""","4","4","5","1","18","0","17","0","2","0","0","24","24","24","9","24","0","0","12","12","573","61","455","133","300","57","196","316","107","209","62","62","62","6","6","0","118","118","124","32","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/startup/ClassLoaderFactory.java""","17","17","23","11","82","5","59","18","1","2","5","2","2","0","0","2","0","0","0","2","233","29","133","46","103","71","83","119","46","73","22","22","30","13","5","1","35","35","46","22","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","7","1","38","3","29","5","3","1","11","52","52","51","12","52","0","1","37","14","2325","317","1620","387","1137","390","753","1150","377","773","37","37","45","10","5","0","368","368","401","90","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/startup/HostConfig.java""","4","4","4","2","27","2","19","5","2","1","3","47","47","46","18","47","0","1","19","27","1586","254","980","215","700","352","465","685","208","477","32","32","39","14","7","0","210","210","230","94","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/util/ExtensionValidator.java""","7","7","8","3","49","2","35","11","1","6","4","6","6","0","4","6","0","4","0","2","445","51","263","97","170","131","118","168","76","92","14","14","15","10","5","1","45","45","48","23","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/catalina/util/MIME2Java.java""","1","1","1","1","12","0","2","9","1","2","2","3","3","1","0","3","0","1","0","2","603","12","91","9","77","501","81","85","8","77","1","1","1","1","0","6","3","3","3","3","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/tomcat/util/buf/MessageBytes.java""","2","2","2","1","13","0","10","2","2","2","5","38","38","36","11","38","0","2","1","35","649","66","416","82","290","167","222","309","82","227","8","7","12","8","3","0","100","85","109","66","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/tomcat/util/http/AcceptLanguage.java""","4","4","5","2","26","2","22","1","1","4","0","4","4","0","0","4","0","2","0","2","150","19","99","40","64","32","55","73","34","39","7","7","10","3","4","0","17","17","20","8","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/tomcat/util/http/fileupload/FileItemHeadersImpl.java""","1","1","1","1","8","0","7","1","1","0","1","4","4","4","2","4","0","0","0","4","89","9","43","23","21","37","26","34","22","12","2","2","2","1","1","1","7","7","7","4","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/tomcat/util/http/fileupload/FileUploadBase.java""","2","2","2","1","16","0","10","6","11","1","14","47","49","48","23","49","3","6","8","32","1126","111","520","169","306","495","232","332","151","181","11","11","12","9","4","1","99","99","109","69","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/tomcat/util/http/fileupload/ParameterParser.java""","3","3","4","1","21","0","11","9","1","0","0","12","12","12","6","12","0","5","0","7","329","23","154","38","94","154","74","112","36","76","7","7","10","3","4","1","37","37","48","18","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/tomcat/util/http/fileupload/ServletFileUpload.java""","1","1","1","1","15","0","5","10","1","1","0","5","5","4","0","5","0","0","0","5","146","19","34","14","12","93","13","22","11","11","4","4","4","4","1","3","8","8","8","8","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/tomcat/util/modeler/OperationInfo.java""","1","1","1","1","8","0","5","2","1","0","1","11","11","11","3","11","1","0","1","9","159","33","71","24","40","55","34","54","24","30","5","5","5","1","2","1","18","18","18","11","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/tomcat/util/net/URL.java""","4","4","5","2","27","3","16","7","1","1","0","21","21","20","9","21","0","2","0","19","734","143","360","64","275","235","184","274","59","215","18","18","25","9","4","1","93","93","106","47","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/tomcat/util/net/jsse/JSSESocketFactory.java""","5","5","5","2","31","2","23","4","1","0","10","21","21","21","7","21","1","3","11","6","819","89","570","200","363","162","265","370","150","220","15","15","17","12","7","0","109","109","116","42","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""webapps/examples/WEB-INF/classes/examples/ShowSource.java""","3","3","4","1","16","2","14","0","1","0","1","2","2","2","1","2","0","0","0","2","73","17","37","13","23","19","21","29","12","17","6","6","8","1","3","1","7","7","9","2","normal"
"49226","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49226 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49226  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""webapps/examples/WEB-INF/classes/jsp2/examples/el/Functions.java""","1","1","1","1","5","0","5","0","1","3","0","3","3","0","0","3","0","0","0","3","43","3","19","7","8","21","9","15","8","7","3","3","3","1","2","1","5","5","5","3","normal"
"49227","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49227 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49227  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/coyote/http11/Http11AprProcessor.java""","5","5","6","2","30","3","20","7","1","0","2","48","48","48","35","48","0","4","7","37","1889","326","1083","240","795","494","586","825","244","581","61","61","72","28","6","0","248","246","297","120","normal"
"49227","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49227 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49227  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/coyote/http11/Http11NioProcessor.java""","12","12","14","4","67","7","48","12","1","0","1","17","17","17","10","17","0","0","7","10","1325","198","870","166","675","275","479","675","166","509","62","62","72","31","7","0","206","206","252","80","normal"
"49227","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49227 Ensure case conversion behaves as expected Patch provided by sebb","Bug 49227  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/coyote/http11/Http11Processor.java""","11","11","12","4","65","8","47","10","2","0","1","15","15","15","6","15","0","0","6","9","1144","189","747","127","574","213","400","562","129","433","51","51","57","24","4","0","167","167","194","63","normal"
"49228","12","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=49228 Use English Locale since other Locale's may give add results","Bug 49228  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/jasper/compiler/Validator.java""","4","4","6","1","26","2","21","2","8","3","16","59","59","56","12","59","5","17","0","37","1835","228","1355","397","964","254","547","827","281","546","44","44","48","6","8","0","276","276","369","84","normal"
"49228","12","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=49228 Use English Locale since other Locale's may give add results","Bug 49228  toLowerCase()/toUpperCase() may not work OK in all Locales","to lower case tolowercas to upper case touppercas may work ok local","","","""java/org/apache/jasper/tagplugins/jstl/Util.java""","2","2","3","1","13","0","9","4","3","6","4","17","17","11","7","17","0","0","0","17","335","40","208","72","119","92","105","157","62","95","8","8","8","5","4","0","50","50","52","32","normal"
"49234","134","Mark Emlyn David Thomas","Further work for https://issues.apache.org/bugzilla/show_bug.cgi?id=49234 GSOC 2010. Enable the creation of Services, Engines, Connectors, Hosts and Contexts via JMX from a minimal server.xml that contains only a Server element. Based on a patch by Chamith Buddhika. I added the additional changes to pass the parent class loader down the hierarchy.","Bug 49234  JMX Descriptor Modifications","jmx descriptor modif","","","""java/org/apache/catalina/Server.java""","0","0","0","0","0","0","0","0","1","0","0","0","14","14","0","14","0","0","0","14","158","37","19","18","0","102","16","17","17","0","0","0","0","0","0","5","0","0","0","0","normal"
"49234","134","Mark Emlyn David Thomas","Further work for https://issues.apache.org/bugzilla/show_bug.cgi?id=49234 GSOC 2010. Enable the creation of Services, Engines, Connectors, Hosts and Contexts via JMX from a minimal server.xml that contains only a Server element. Based on a patch by Chamith Buddhika. I added the additional changes to pass the parent class loader down the hierarchy.","Bug 49234  JMX Descriptor Modifications","jmx descriptor modif","","","""java/org/apache/catalina/Service.java""","0","0","0","0","0","0","0","0","1","0","0","0","14","14","0","14","0","0","0","14","137","24","18","17","0","95","16","17","17","0","0","0","0","0","0","5","0","0","0","0","normal"
"49234","134","Mark Emlyn David Thomas","Further work for https://issues.apache.org/bugzilla/show_bug.cgi?id=49234 GSOC 2010. Enable the creation of Services, Engines, Connectors, Hosts and Contexts via JMX from a minimal server.xml that contains only a Server element. Based on a patch by Chamith Buddhika. I added the additional changes to pass the parent class loader down the hierarchy.","Bug 49234  JMX Descriptor Modifications","jmx descriptor modif","","","""java/org/apache/catalina/core/StandardEngine.java""","1","1","1","1","13","1","6","5","1","0","2","17","17","17","5","17","0","0","2","15","343","74","142","59","65","127","67","98","49","49","7","7","8","1","4","1","30","30","31","17","normal"
"49234","134","Mark Emlyn David Thomas","Further work for https://issues.apache.org/bugzilla/show_bug.cgi?id=49234 GSOC 2010. Enable the creation of Services, Engines, Connectors, Hosts and Contexts via JMX from a minimal server.xml that contains only a Server element. Based on a patch by Chamith Buddhika. I added the additional changes to pass the parent class loader down the hierarchy.","Bug 49234  JMX Descriptor Modifications","jmx descriptor modif","","","""java/org/apache/catalina/core/StandardServer.java""","2","2","2","1","16","2","9","5","1","0","3","32","32","32","13","32","0","1","6","25","757","172","353","111","207","235","182","261","106","155","18","18","18","11","3","1","75","75","76","47","normal"
"49234","134","Mark Emlyn David Thomas","Further work for https://issues.apache.org/bugzilla/show_bug.cgi?id=49234 GSOC 2010. Enable the creation of Services, Engines, Connectors, Hosts and Contexts via JMX from a minimal server.xml that contains only a Server element. Based on a patch by Chamith Buddhika. I added the additional changes to pass the parent class loader down the hierarchy.","Bug 49234  JMX Descriptor Modifications","jmx descriptor modif","","","""java/org/apache/catalina/core/StandardServer.java""","2","2","2","1","16","2","9","5","1","0","3","32","32","32","13","32","0","1","6","25","757","172","353","111","207","235","182","261","106","155","18","18","18","11","3","1","75","75","76","47","normal"
"49234","134","Mark Emlyn David Thomas","Further work for https://issues.apache.org/bugzilla/show_bug.cgi?id=49234 GSOC 2010. Enable the creation of Services, Engines, Connectors, Hosts and Contexts via JMX from a minimal server.xml that contains only a Server element. Based on a patch by Chamith Buddhika. I added the additional changes to pass the parent class loader down the hierarchy.","Bug 49234  JMX Descriptor Modifications","jmx descriptor modif","","","""java/org/apache/catalina/core/StandardService.java""","2","2","3","1","17","2","11","4","1","0","3","24","24","24","6","24","0","0","5","19","592","118","308","72","178","166","117","213","75","138","9","9","11","3","3","1","70","70","75","30","normal"
"49234","134","Mark Emlyn David Thomas","Further work for https://issues.apache.org/bugzilla/show_bug.cgi?id=49234 GSOC 2010. Enable the creation of Services, Engines, Connectors, Hosts and Contexts via JMX from a minimal server.xml that contains only a Server element. Based on a patch by Chamith Buddhika. I added the additional changes to pass the parent class loader down the hierarchy.","Bug 49234  JMX Descriptor Modifications","jmx descriptor modif","","","""java/org/apache/catalina/core/StandardService.java""","2","2","3","1","17","2","11","4","1","0","3","24","24","24","6","24","0","0","5","19","592","118","308","72","178","166","117","213","75","138","9","9","11","3","3","1","70","70","75","30","normal"
"49234","134","Mark Emlyn David Thomas","Further work for https://issues.apache.org/bugzilla/show_bug.cgi?id=49234 GSOC 2010. Enable the creation of Services, Engines, Connectors, Hosts and Contexts via JMX from a minimal server.xml that contains only a Server element. Based on a patch by Chamith Buddhika. I added the additional changes to pass the parent class loader down the hierarchy.","Bug 49234  JMX Descriptor Modifications","jmx descriptor modif","","","""java/org/apache/catalina/startup/Catalina.java""","2","2","3","1","19","2","14","2","3","0","2","32","32","32","10","32","0","0","9","23","854","177","507","119","356","175","243","340","111","229","13","13","15","9","3","0","94","94","98","42","normal"
"49235","11","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=49235 Fix handlesTypes with annotations. The annotated class should be reported, not the annotation class.","Bug 49235  ServletContainerInitializer onStartup(Set<Class<?>> classSet is not expect class","servlet contain initi servletcontaineriniti on startup onstartup set class class set classset expect class","","","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","7","1","38","3","29","5","3","0","11","51","51","51","12","51","0","0","37","14","2294","313","1596","383","1121","387","744","1133","372","761","37","37","45","10","5","0","361","361","394","84","normal"
"49240","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49240 If a class can't be loaded, don't scan HandlesTypes for it Also handle NoClassDefFoundError Patch provided by pid","Bug 49240  Error thrown during detection of ServletContainerInitializer's","error thrown detect servlet contain initi servletcontaineriniti","ContextConfig.checkHandlesTypes() throws a NoClassDefFoundError, which isn't caught, when the class being analysed is initialised if the class, or a class that it references(?), is not present in the classpath.

E.g. When a mysql connector/j jar (v5.x) is scanned, an attempt to load the following class occurs: com.mchange.v2.c3p0.QueryConnectionTester

java.lang.NoClassDefFoundError: com/mchange/v2/c3p0/QueryConnectionTester
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:698)
	at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
	at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)
	at java.net.URLClassLoader.access$000(URLClassLoader.java:56)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:195)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:315)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:250)
	at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:398)
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Class.java:247)

Also Class.forName is used here, referencing the WebappClassLoader, instead of calling WebappClassLoader.loadClass() directly.","context config contextconfig check handl type checkhandlestyp throw no class def found error noclassdeffounderror isn caught class analys initialis class class refer present classpath mysql connector jar v5 scan attempt load follow class occur mchang v2 c3p0 queri connect tester queryconnectiontest java lang no class def found error noclassdeffounderror mchang v2 c3p0 queri connect tester queryconnectiontest java lang class loader classload defin class1 defineclass1 nativ method java lang class loader classload defin class defineclass class loader classload java java secur secur class loader secureclassload defin class defineclass secur class loader secureclassload java java net class loader urlclassload defin class defineclass class loader urlclassload java java net class loader urlclassload access class loader urlclassload java java net class loader urlclassload run class loader urlclassload java java secur access control accesscontrol do privileg doprivileg nativ method java net class loader urlclassload find class findclass class loader urlclassload java java lang class loader classload load class loadclass class loader classload java java lang class loader classload load class loadclass class loader classload java java lang class loader classload load class intern loadclassintern class loader classload java java lang class for name0 forname0 nativ method java lang class for name fornam class java class for name fornam use referenc webapp class loader webappclassload instead call webapp class loader webappclassload load class loadclass directli","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","7","1","38","3","29","5","3","0","11","51","51","51","12","51","0","0","37","14","2290","313","1592","383","1117","387","741","1130","372","758","37","37","45","10","5","0","360","360","393","81","normal"
"49241","1","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=49241","Bug 49241  DataSourceFactory.parsePoolProperties() doesn't look for ""suspectTimeout""","data sourc factori datasourcefactori pars pool properti parsepoolproperti doesn look suspect timeout suspecttimeout","If you call the DataSourceFactory.parsePoolProperties() method, passing in a Properties object with the ""suspectTimeout"" property set, that key/value pair is never passed on to the PoolProperties.setSuspectTimeout() method.","call data sourc factori datasourcefactori pars pool properti parsepoolproperti method pass properti object suspect timeout suspecttimeout properti set key valu pair never pass pool properti poolproperti set suspect timeout setsuspecttimeout method","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/DataSourceFactory.java""","11","11","11","1","58","7","44","5","1","2","43","6","6","4","0","6","0","0","1","5","516","75","370","123","280","71","190","258","81","177","49","49","49","3","3","0","68","68","70","8","normal"
"49269","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49269 Set maxIdle to maxActive by default to prevent warning on start when maxIdle > maxActive Patch provided by Matt Passell","Bug 49269  Shouldn't see maxIdle > maxActive message with default props","shouldn see max idl maxidl max activ maxact messag default prop","In PoolProperties, the default value for maxIdle is Integer.MAX_VALUE and the default for maxActive is 100.  This results in a warning message being logged and the value for maxIdle set to match maxActive on lines 393/394 of ConnectionPool.  The default for maxIdle should match that of maxActive.","pool properti poolproperti default valu max idl maxidl integ max valu default max activ maxact result warn messag log valu max idl maxidl set match max activ maxact line connect pool connectionpool default max idl maxidl match max activ maxact","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/PoolProperties.java""","1","1","1","1","6","0","4","2","3","2","2","107","107","105","46","107","0","0","0","107","990","116","597","274","250","277","240","387","192","195","6","6","10","5","5","0","144","144","155","130","normal"
"49284","288","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49284 Support SSL re-negotiation in the HTTP NIO connector There is a fair amount of renaming in this patch. The real work is in the new rehandshake() method in the SecureNioChannel.","Bug 49284  Implement SSL renegotiation for the NIO connector","implement ssl renegoti nio connector","Summary says it all. Entered as a reminder that it would be good to do this.","summari say enter remind would good","""java/org/apache/coyote/http11/Http11NioProcessor.java""","9","9","11","3","50","4","37","8","1","0","1","17","17","17","9","17","0","0","7","10","1011","137","682","144","515","200","380","535","135","400","50","50","59","22","7","0","163","163","197","63","enhancement"
"49284","288","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49284 Support SSL re-negotiation in the HTTP NIO connector There is a fair amount of renaming in this patch. The real work is in the new rehandshake() method in the SecureNioChannel.","Bug 49284  Implement SSL renegotiation for the NIO connector","implement ssl renegoti nio connector","Summary says it all. Entered as a reminder that it would be good to do this.","summari say enter remind would good","""java/org/apache/tomcat/util/net/NioChannel.java""","1","1","1","1","6","0","3","2","1","0","1","23","23","23","4","23","0","0","0","23","220","33","101","45","40","87","52","80","44","36","5","5","7","1","1","1","32","32","35","23","enhancement"
"49284","288","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49284 Support SSL re-negotiation in the HTTP NIO connector There is a fair amount of renaming in this patch. The real work is in the new rehandshake() method in the SecureNioChannel.","Bug 49284  Implement SSL renegotiation for the NIO connector","implement ssl renegoti nio connector","Summary says it all. Entered as a reminder that it would be good to do this.","summari say enter remind would good","""java/org/apache/tomcat/util/net/SecureNioChannel.java""","3","2","3","1","17","0","10","6","2","0","0","23","26","26","8","26","0","0","4","22","503","54","282","82","172","174","153","217","67","150","17","13","18","12","4","1","71","67","81","42","enhancement"
"49284","288","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49284 Support SSL re-negotiation in the HTTP NIO connector There is a fair amount of renaming in this patch. The real work is in the new rehandshake() method in the SecureNioChannel.","Bug 49284  Implement SSL renegotiation for the NIO connector","implement ssl renegoti nio connector","Summary says it all. Entered as a reminder that it would be good to do this.","summari say enter remind would good","""java/org/apache/tomcat/util/net/SecureNioChannel.java""","3","2","3","1","17","0","10","6","2","0","0","23","26","26","8","26","0","0","4","22","503","54","282","82","172","174","153","217","67","150","17","13","18","12","4","1","71","67","81","42","enhancement"
"49290","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49290 Allow Tomcat to start when using a JarScanner with scanAllDirectories=true Patch by Larry Issacs (with minor tweaks)","Bug 49290  Using a JarScanner with scanAllDirectories=true causes Tomcat 7 not to start","use jar scanner jarscann scan all directori scanalldirectori true caus tomcat start","","","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","7","1","37","3","28","5","3","1","11","53","53","52","12","53","0","1","38","14","2308","315","1610","385","1129","385","749","1143","375","768","37","37","45","10","5","0","365","365","398","91","enhancement"
"49299","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49299 Implement the requirements of section 7.1.1 of the Servlet 3.0 spec that require the path parameter to change name as well. Remove the option to set the default via a system property for the sake of simplicity.","Bug 49299  Servlet 3.0 ch.7.1.1 says that custom cookie name affects URL rewriting","servlet ch say custom cooki name affect url rewrit","","","""java/org/apache/catalina/Globals.java""","0","0","0","0","0","0","0","0","1","0","40","0","0","0","0","0","0","0","0","0","342","77","82","80","41","183","41","42","42","0","0","0","0","0","0","2","0","0","0","0","normal"
"49299","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49299 Implement the requirements of section 7.1.1 of the Servlet 3.0 spec that require the path parameter to change name as well. Remove the option to set the default via a system property for the sake of simplicity.","Bug 49299  Servlet 3.0 ch.7.1.1 says that custom cookie name affects URL rewriting","servlet ch say custom cooki name affect url rewrit","","","""java/org/apache/catalina/connector/CoyoteAdapter.java""","10","10","13","4","68","6","48","13","1","3","8","13","13","10","1","13","0","0","7","6","1042","143","680","136","505","219","366","504","127","377","25","25","27","13","6","0","138","138","171","58","normal"
"49299","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49299 Implement the requirements of section 7.1.1 of the Servlet 3.0 spec that require the path parameter to change name as well. Remove the option to set the default via a system property for the sake of simplicity.","Bug 49299  Servlet 3.0 ch.7.1.1 says that custom cookie name affects URL rewriting","servlet ch say custom cooki name affect url rewrit","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","15","1","8","4","1","2","5","150","150","148","50","150","1","1","12","136","2999","590","1485","410","939","933","720","1085","394","691","21","21","24","11","5","1","367","367","415","220","normal"
"49299","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49299 Implement the requirements of section 7.1.1 of the Servlet 3.0 spec that require the path parameter to change name as well. Remove the option to set the default via a system property for the sake of simplicity.","Bug 49299  Servlet 3.0 ch.7.1.1 says that custom cookie name affects URL rewriting","servlet ch say custom cooki name affect url rewrit","","","""java/org/apache/catalina/connector/Response.java""","2","2","2","1","16","1","8","5","4","0","3","80","80","80","16","80","0","3","2","75","1668","341","764","202","479","566","356","553","188","365","12","12","19","8","3","1","196","196","226","135","normal"
"49299","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49299 Implement the requirements of section 7.1.1 of the Servlet 3.0 spec that require the path parameter to change name as well. Remove the option to set the default via a system property for the sake of simplicity.","Bug 49299  Servlet 3.0 ch.7.1.1 says that custom cookie name affects URL rewriting","servlet ch say custom cooki name affect url rewrit","","","""java/org/apache/catalina/core/ApplicationSessionCookieConfig.java""","1","1","1","1","7","0","5","1","1","2","0","16","16","14","7","16","0","0","0","16","190","34","115","51","44","41","45","71","34","37","7","7","11","4","2","0","25","25","31","19","normal"
"49299","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49299 Implement the requirements of section 7.1.1 of the Servlet 3.0 spec that require the path parameter to change name as well. Remove the option to set the default via a system property for the sake of simplicity.","Bug 49299  Servlet 3.0 ch.7.1.1 says that custom cookie name affects URL rewriting","servlet ch say custom cooki name affect url rewrit","","","""java/org/apache/catalina/realm/RealmBase.java""","4","4","4","2","24","2","16","5","2","3","8","43","46","43","10","46","1","2","12","31","1318","232","760","196","482","329","361","553","183","370","53","53","63","21","6","0","187","187","211","92","normal"
"49340","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49340 Simplify the mapper listener registration/de-registration process","Bug 49340  Webapp unavailable after deploy then stop then start","webapp unavail deploy stop start","Occurs with tomcat 7.0 RC3 but not with 6.0.26

Using the manager/html :

- deploy a war
- test one of its page, it should be deployed properly
- stop the webapp
- start the webapp
- test one of its page : FAILURE : tomcat returns a 404.

Notes :
- if using ""reload"" instead of stop/start it's OK, but it does not fix the unavailability
- if the webapp is present when tomcat is started, then the stop/start works normally
- The work around is to undeploy the webapp and redeploy it.","occur tomcat c3 rc3 use manag html deploy one page deploy properli stop webapp start webapp one page failur tomcat return note use reload instead stop start ok fix unavail webapp present tomcat start stop start work normal work around undeploy webapp redeploy","""java/org/apache/catalina/connector/MapperListener.java""","4","4","4","1","22","3","16","3","1","0","2","15","15","15","3","15","0","8","0","7","447","96","267","90","185","86","137","212","94","118","21","21","22","6","4","0","66","66","69","20","normal"
"49360","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49360 Managers will be restarted on Context reload","Bug 49360  Context class reload fails for PersistentManager","context class reload fail persist manag persistentmanag","On context class reload tomcat fails with

LifecycleException:  An invalid Lifecycle transition was attempted ([before_start]) for component [org.apache.catalina.session.PersistentManager[/xxx]] in state [DESTROYED]","context class reload tomcat fail lifecycl except lifecycleexcept invalid lifecycl transit attempt start compon apach catalina session persist manag persistentmanag xxx state destroy","""java/org/apache/catalina/ha/session/BackupManager.java""","1","1","1","1","6","0","4","1","1","0","2","32","32","32","5","32","0","0","2","30","324","54","182","80","79","90","88","130","71","59","3","3","3","1","1","0","40","40","41","32","normal"
"49360","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49360 Managers will be restarted on Context reload","Bug 49360  Context class reload fails for PersistentManager","context class reload fail persist manag persistentmanag","On context class reload tomcat fails with

LifecycleException:  An invalid Lifecycle transition was attempted ([before_start]) for component [org.apache.catalina.session.PersistentManager[/xxx]] in state [DESTROYED]","context class reload tomcat fail lifecycl except lifecycleexcept invalid lifecycl transit attempt start compon apach catalina session persist manag persistentmanag xxx state destroy","""java/org/apache/catalina/ha/session/DeltaManager.java""","2","2","2","1","14","0","9","4","1","0","4","88","88","88","36","88","0","0","23","65","1523","150","888","229","576","502","455","664","226","438","13","13","18","4","7","1","218","208","242","97","normal"
"49360","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49360 Managers will be restarted on Context reload","Bug 49360  Context class reload fails for PersistentManager","context class reload fail persist manag persistentmanag","On context class reload tomcat fails with

LifecycleException:  An invalid Lifecycle transition was attempted ([before_start]) for component [org.apache.catalina.session.PersistentManager[/xxx]] in state [DESTROYED]","context class reload tomcat fail lifecycl except lifecycleexcept invalid lifecycl transit attempt start compon apach catalina session persist manag persistentmanag xxx state destroy","""java/org/apache/catalina/session/PersistentManagerBase.java""","2","2","3","1","18","2","10","5","6","0","3","46","46","46","12","46","5","0","9","32","1129","235","564","143","363","333","248","395","131","264","12","12","13","7","5","1","134","134","149","71","normal"
"49376","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49376 Correct package names in info properties","Bug 49376  Minor corrections to info properties.","minor correct info properti","The static info properties appear to contain legacy packages.","static info properti appear contain legaci packag","""java/org/apache/catalina/ha/authenticator/ClusterSingleSignOn.java""","2","2","2","1","18","3","10","5","1","0","1","17","17","17","3","17","0","0","14","3","433","98","202","68","118","133","91","132","47","85","8","8","12","1","6","1","40","40","47","17","trivial"
"49376","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49376 Correct package names in info properties","Bug 49376  Minor corrections to info properties.","minor correct info properti","The static info properties appear to contain legacy packages.","static info properti appear contain legaci packag","""java/org/apache/catalina/ha/authenticator/ClusterSingleSignOnListener.java""","3","3","3","1","17","1","12","3","1","0","2","7","7","7","1","7","0","1","0","6","184","32","103","29","68","49","47","70","27","43","12","9","13","5","4","0","26","21","27","11","trivial"
"49376","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49376 Correct package names in info properties","Bug 49376  Minor corrections to info properties.","minor correct info properti","The static info properties appear to contain legacy packages.","static info properti appear contain legaci packag","""java/org/apache/catalina/ha/session/ClusterSessionListener.java""","2","2","3","1","15","0","8","6","1","0","2","4","4","4","0","4","0","0","0","4","114","15","48","21","24","51","20","33","19","14","8","8","9","1","5","1","11","11","12","4","trivial"
"49407","50","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49407 Make BackupManager and DeltaManager handle primary and backup sessions consistently","Bug 49407  backup manager reports too few current sessions","backup manag report current session","With 100 sessions shared across 4 nodes (i.e. 25 active sessions per node), the delta manager reports 100 current sessions per node (25 active and the copies of the sessions from the other nodes). The back manager reports 25. For consistency it should report 50. The 25 active sessions plus the 25 (or so) that are backed up on that node.","session share across node activ session node delta manag report current session node activ copi session node back manag report consist report activ session plu back node","""java/org/apache/catalina/session/ManagerBase.java""","2","2","2","1","13","1","7","4","2","0","4","75","75","75","26","75","0","0","5","70","1376","284","663","210","409","430","337","495","206","289","8","8","9","4","4","1","156","156","164","87","normal"
"49407","50","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49407 Make BackupManager and DeltaManager handle primary and backup sessions consistently","Bug 49407  backup manager reports too few current sessions","backup manag report current session","With 100 sessions shared across 4 nodes (i.e. 25 active sessions per node), the delta manager reports 100 current sessions per node (25 active and the copies of the sessions from the other nodes). The back manager reports 25. For consistency it should report 50. The 25 active sessions plus the 25 (or so) that are backed up on that node.","session share across node activ session node delta manag report current session node activ copi session node back manag report consist report activ session plu back node","""java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java""","2","2","3","1","10","0","9","1","4","0","13","108","111","111","30","111","0","1","10","100","1495","175","1087","330","677","257","568","845","304","541","20","20","25","7","5","0","281","272","327","143","normal"
"49426","127","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49426 Messages displayed to the user in the Manager (text and HTML) should be based on the Locale of the user, not the server","Bug 49426  Manager app wrongly localized","manag app wrongli local","","","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","28","2","20","5","11","0","16","36","36","36","2","36","0","1","14","21","1341","128","958","200","765","262","428","564","190","374","18","18","23","10","4","0","133","133","155","63","normal"
"49426","127","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49426 Messages displayed to the user in the Manager (text and HTML) should be based on the Locale of the user, not the server","Bug 49426  Manager app wrongly localized","manag app wrongli local","","","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","28","2","20","5","11","0","16","36","36","36","2","36","0","1","14","21","1341","128","958","200","765","262","428","564","190","374","18","18","23","10","4","0","133","133","155","63","normal"
"49426","127","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49426 Messages displayed to the user in the Manager (text and HTML) should be based on the Locale of the user, not the server","Bug 49426  Manager app wrongly localized","manag app wrongli local","","","""java/org/apache/catalina/manager/ManagerServlet.java""","6","6","7","2","38","2","28","6","1","2","1","35","35","33","12","35","0","0","27","8","1674","217","1059","214","784","398","512","737","196","541","21","21","32","6","5","0","219","219","257","82","normal"
"49426","127","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49426 Messages displayed to the user in the Manager (text and HTML) should be based on the Locale of the user, not the server","Bug 49426  Manager app wrongly localized","manag app wrongli local","","","""java/org/apache/tomcat/util/res/StringManager.java""","3","3","3","1","26","1","13","11","1","1","1","4","4","3","2","4","0","1","0","3","178","18","66","23","38","94","32","46","22","24","5","5","5","1","3","1","13","13","13","4","normal"
"49442","25","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49442 Trivial code clean-up. No functional change. Based on a patch provided by Sebb.","Bug 49442  Make StringManager fields final","make string manag stringmanag field final","","","""java/org/apache/tomcat/util/res/StringManager.java""","3","3","3","1","25","1","12","11","1","1","1","4","4","3","2","4","0","1","0","3","174","18","62","22","34","94","29","43","21","22","5","5","5","1","3","2","13","13","13","4","enhancement"
"49443","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49443 Use remoteIp... rather then remoteIP... consistently","Bug 49443  RemoteIpValve : remoteIpHeader vs remoteIPHeader","remot ip valv remoteipvalv remot ip header remoteiphead v remot header remoteiphead","","","""java/org/apache/catalina/filters/RemoteIpFilter.java""","2","2","2","1","10","0","7","2","3","4","11","43","43","39","14","43","0","0","6","37","991","89","387","135","209","516","182","271","130","141","15","15","15","5","3","1","89","89","95","51","minor"
"49443","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49443 Use remoteIp... rather then remoteIP... consistently","Bug 49443  RemoteIpValve : remoteIpHeader vs remoteIPHeader","remot ip valv remoteipvalv remot ip header remoteiphead v remot header remoteiphead","","","""java/org/apache/catalina/valves/RemoteIpValve.java""","2","2","2","1","14","0","8","6","1","4","4","22","22","18","8","22","0","0","4","18","761","50","214","77","124","498","111","160","79","81","14","14","14","5","3","2","46","46","47","28","minor"
"49445","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49445 The change in session ID is notified to other node.","Bug 49445  After session ID is changed on authentication, the session replication does not work.","session id chang authent session replic work","After r889716, 
session ID is changed on authentication. 
(default of changeSessionIdOnAuthentication is true. )
But DeltaManager doesn't notify other cluster nodes. 

Therefore, non-primary node keeps having old session ID. 
And, can not replicate of change of session attribute notified by new session ID. 

The workaround is ...
override changeSessionId method, and notify to change session ID.

BackupManager is OK. 
This problem is DeltaManager only.

Best regards.","r889716 session id chang authent default chang session id on authent changesessionidonauthent true delta manag deltamanag doesn notifi cluster node therefor non primari nonprimari node keep old session id replic chang session attribut notifi new session id workaround overrid chang session id changesessionid method notifi chang session id backup manag backupmanag ok problem delta manag deltamanag best regard","""java/org/apache/catalina/ha/session/DeltaManager.java""","2","2","2","1","14","0","9","4","1","0","4","88","88","88","36","88","0","0","23","65","1521","149","887","229","575","502","454","663","226","437","13","13","18","4","7","1","218","208","242","97","normal"
"49445","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49445 The change in session ID is notified to other node.","Bug 49445  After session ID is changed on authentication, the session replication does not work.","session id chang authent session replic work","After r889716, 
session ID is changed on authentication. 
(default of changeSessionIdOnAuthentication is true. )
But DeltaManager doesn't notify other cluster nodes. 

Therefore, non-primary node keeps having old session ID. 
And, can not replicate of change of session attribute notified by new session ID. 

The workaround is ...
override changeSessionId method, and notify to change session ID.

BackupManager is OK. 
This problem is DeltaManager only.

Best regards.","r889716 session id chang authent default chang session id on authent changesessionidonauthent true delta manag deltamanag doesn notifi cluster node therefor non primari nonprimari node keep old session id replic chang session attribut notifi new session id workaround overrid chang session id changesessionid method notifi chang session id backup manag backupmanag ok problem delta manag deltamanag best regard","""java/org/apache/catalina/ha/session/SessionMessage.java""","0","0","0","0","0","0","0","0","1","0","7","0","5","5","0","5","0","0","0","5","104","14","17","15","7","74","14","15","15","0","0","0","0","0","0","4","0","0","0","0","normal"
"49445","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49445 The change in session ID is notified to other node.","Bug 49445  After session ID is changed on authentication, the session replication does not work.","session id chang authent session replic work","After r889716, 
session ID is changed on authentication. 
(default of changeSessionIdOnAuthentication is true. )
But DeltaManager doesn't notify other cluster nodes. 

Therefore, non-primary node keeps having old session ID. 
And, can not replicate of change of session attribute notified by new session ID. 

The workaround is ...
override changeSessionId method, and notify to change session ID.

BackupManager is OK. 
This problem is DeltaManager only.

Best regards.","r889716 session id chang authent default chang session id on authent changesessionidonauthent true delta manag deltamanag doesn notifi cluster node therefor non primari nonprimari node keep old session id replic chang session attribut notifi new session id workaround overrid chang session id changesessionid method notifi chang session id backup manag backupmanag ok problem delta manag deltamanag best regard","""java/org/apache/catalina/ha/session/SessionMessageImpl.java""","1","1","1","1","7","0","4","3","1","0","0","13","13","13","7","13","0","1","0","12","164","19","76","35","30","69","34","51","23","28","8","2","8","1","1","1","21","15","21","13","normal"
"49476","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49476 CSRF protection was preventing access to session expiration features Also: - Switch Manager app to generic CSRF protection - Add support for multiple nonces to CSRF filter - Improve 403 page - Don't open JSP pages in session expiration in a new window - makes CSRF prevention a real pain","Bug 49476  Cannot expire selected session in Manager webapp","cannot expir select session manag webapp","","","""java/org/apache/catalina/filters/CsrfPreventionFilter.java""","2","2","2","1","15","1","11","2","2","0","1","10","10","10","3","10","0","1","2","7","228","38","141","61","79","49","74","101","51","50","7","7","9","4","3","0","24","24","27","13","normal"
"49476","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49476 CSRF protection was preventing access to session expiration features Also: - Switch Manager app to generic CSRF protection - Add support for multiple nonces to CSRF filter - Improve 403 page - Don't open JSP pages in session expiration in a new window - makes CSRF prevention a real pain","Bug 49476  Cannot expire selected session in Manager webapp","cannot expir select session manag webapp","","","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","28","2","20","5","11","0","18","36","36","36","1","36","0","1","14","21","1357","129","972","199","783","263","430","562","187","375","17","17","21","10","4","0","131","131","151","63","normal"
"49478","19","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49478 Add support for user specified character sets to the AddDefaultCharsetFilter. Based on a patch by Felix Schumacher.","Bug 49478  Add encoding parameter to AddDefaultCharSetFilter","add encod paramet add default char set filter adddefaultcharsetfilt","AddDefaultCharSetFilter adds a default charset to each request. It assumes ISO-8859-1 as the default charset.

The attached patch makes it configurable by introducing an ""encoding"" parameter. This parameter can take one of two special values ""default"" or ""system"". Every other value will be interpreted as a name of an character set, e.g ""utf-8"".

The meaning of the two special values are as follows:

 default: use ISO-8859-1. This value will also be used, if no parameter was specified, or if it is empty

 system: the jvm will be asked for the default charset. This charset will usually be set by system locale.

Together with this functional change, there are two minor changes and one bigger changes hidden. First use of annotation ""Override"" at overriden methods. Second use of keyword ""static"" for the ResponseWrapper, since it has no reference to outer class. The third and somewhat bigger change is use of HttpServletResponse#setCharacterEncoding(encoding) instead of manipulating the content-type.","add default char set filter adddefaultcharsetfilt add default charset request assum iso default charset attach patch make configur introduc encod paramet paramet take one two special valu default system everi valu interpret name charact set utf mean two special valu follow default use iso valu use paramet specifi empti system jvm ask default charset charset usual set system local togeth function chang two minor chang one bigger chang hidden first use annot overrid overriden method second use keyword static respons wrapper responsewrapp sinc refer outer class third somewhat bigger chang use http servlet respons httpservletrespons set charact encod setcharacterencod encod instead manipul content type contenttyp","""java/org/apache/catalina/filters/AddDefaultCharsetFilter.java""","1","1","1","1","6","0","5","1","2","0","0","5","5","5","0","5","0","0","0","5","94","16","40","21","11","38","16","25","18","7","2","2","4","1","1","1","7","7","9","5","enhancement"
"49503","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49503 Revert the protocol handler component of r940656. Subsequent lifecycle fixes have resolved the issues that required this change","Bug 49503  Connectors do not bind to their ports in Catalina.load(), but only later in start()","connector bind port catalina load later start","","","""java/org/apache/catalina/connector/Connector.java""","1","1","1","1","12","1","5","5","1","0","5","55","55","55","24","55","0","0","7","48","959","258","372","124","211","329","173","251","111","140","8","8","8","3","2","1","77","77","80","57","normal"
"49522","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49522 Just use host and path in NamingResources MBean name rather than full Context MBean name","Bug 49522  Complete Server status (status/all) causes stack trace","complet server statu statu caus stack trace","type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: javax.management.AttributeNotFoundException:  Cannot find attribute startTime for org.apache.catalina.deploy.NamingResources@d1c778
	org.apache.catalina.manager.StatusManagerServlet.doGet(StatusManagerServlet.java:292)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

javax.management.AttributeNotFoundException:  Cannot find attribute startTime for org.apache.catalina.deploy.NamingResources@d1c778
	org.apache.tomcat.util.modeler.ManagedBean.getGetter(ManagedBean.java:493)
	org.apache.tomcat.util.modeler.BaseModelMBean.getAttribute(BaseModelMBean.java:180)
	com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:666)
	com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:638)
	org.apache.catalina.manager.StatusTransformer.writeContext(StatusTransformer.java:656)
	org.apache.catalina.manager.StatusTransformer.writeDetailedState(StatusTransformer.java:590)
	org.apache.catalina.manager.StatusManagerServlet.doGet(StatusManagerServlet.java:287)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:722)","type except report messag descript server encount intern error prevent fulfil request except javax servlet servlet except servletexcept javax manag attribut not found except attributenotfoundexcept cannot find attribut start time starttim apach catalina deploy name resourc namingresourc d1c778 apach catalina manag statu manag servlet statusmanagerservlet do get doget statu manag servlet statusmanagerservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java root caus javax manag attribut not found except attributenotfoundexcept cannot find attribut start time starttim apach catalina deploy name resourc namingresourc d1c778 apach tomcat util model manag bean managedbean get getter getgett manag bean managedbean java apach tomcat util model base model bean basemodelmbean get attribut getattribut base model bean basemodelmbean java sun jmx interceptor default bean server interceptor defaultmbeanserverinterceptor get attribut getattribut default bean server interceptor defaultmbeanserverinterceptor java sun jmx mbeanserv jmx bean server jmxmbeanserv get attribut getattribut jmx bean server jmxmbeanserv java apach catalina manag statu transform statustransform write context writecontext statu transform statustransform java apach catalina manag statu transform statustransform write detail state writedetailedst statu transform statustransform java apach catalina manag statu manag servlet statusmanagerservlet do get doget statu manag servlet statusmanagerservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","15","1","9","4","2","0","3","282","282","282","115","282","0","12","11","259","5862","1245","2866","783","1817","1754","1354","2071","770","1301","53","53","68","9","5","1","636","636","688","357","normal"
"49525","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49525 Cookies for ROOT context need a path of /","Bug 49525  IE8: Unabled to store data in HttpSession (root context)","e8 ie8 unabl store data http session httpsession root context","Environment:

Tomcat 7.0.0 Beta
IE8

A simplest webapp only have a test.jsp below:

<%=request.getSession().getId()%>

this app installed as root context

the test.jsp works fine in firefox

but when using IE8

there is always a different session id where refresh the test page.

BTW: the test.jsp works find in Tomcat 6.x","environ tomcat beta e8 ie8 simplest webapp jsp request get session getsess get id getid app instal root context jsp work fine firefox use e8 ie8 alway differ session id refresh page btw jsp work find tomcat","""java/org/apache/catalina/core/ApplicationSessionCookieConfig.java""","1","1","1","1","8","1","5","1","1","4","2","18","18","14","7","18","0","1","0","17","220","44","130","56","54","46","52","82","39","43","7","7","11","4","2","0","29","29","35","21","blocker"
"49530","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49530 Make sure children are stopped if they are running when the parent stops.","Bug 49530  Context is not correctly stopped at shutdown","context correctli stop shutdown","","","""java/org/apache/catalina/core/ContainerBase.java""","3","3","3","1","18","2","10","5","4","0","2","53","53","53","21","53","1","1","8","43","1363","269","629","165","387","467","283","455","155","300","12","12","15","4","3","1","159","159","191","72","normal"
"49536","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49536 Ensure a 404 response for an unmapped request when no ROOT context is deployed. Most of the change is getting the mapper to use the Host object rather than the ObjectName or an empty string","Bug 49536  If no webapps deployed, accessing a URL returns 200 OK with no content instead of 404","webapp deploy access url return ok content instead","","","""java/org/apache/catalina/connector/CoyoteAdapter.java""","10","10","12","4","69","6","49","13","1","3","7","14","14","11","1","14","0","0","7","7","1119","157","739","143","554","223","393","539","131","408","23","23","27","13","6","0","146","146","179","58","regression"
"49536","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49536 Ensure a 404 response for an unmapped request when no ROOT context is deployed. Most of the change is getting the mapper to use the Host object rather than the ObjectName or an empty string","Bug 49536  If no webapps deployed, accessing a URL returns 200 OK with no content instead of 404","webapp deploy access url return ok content instead","","","""java/org/apache/catalina/connector/MapperListener.java""","4","4","4","1","22","3","16","3","1","0","2","15","15","15","3","15","0","8","0","7","442","93","265","90","183","86","135","210","94","116","21","21","22","6","4","0","66","66","69","20","regression"
"49536","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49536 Ensure a 404 response for an unmapped request when no ROOT context is deployed. Most of the change is getting the mapper to use the Host object rather than the ObjectName or an empty string","Bug 49536  If no webapps deployed, accessing a URL returns 200 OK with no content instead of 404","webapp deploy access url return ok content instead","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","15","1","8","4","1","2","5","152","152","150","51","152","1","1","14","136","3016","591","1498","413","946","936","725","1094","397","697","22","22","24","11","5","1","371","371","419","224","regression"
"49536","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49536 Ensure a 404 response for an unmapped request when no ROOT context is deployed. Most of the change is getting the mapper to use the Host object rather than the ObjectName or an empty string","Bug 49536  If no webapps deployed, accessing a URL returns 200 OK with no content instead of 404","webapp deploy access url return ok content instead","","","""java/org/apache/tomcat/util/http/mapper/Mapper.java""","5","5","5","2","28","1","21","5","6","12","2","44","44","32","18","44","0","17","3","24","1596","213","1009","281","695","377","510","744","263","481","25","25","36","11","6","0","225","225","246","123","regression"
"49550","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49550 Trivial code clean up","Bug 49550  [PATCH] Response class fix isSpace (deprecated) => isWhiteSpace","patch respons class fix is space isspac deprec is white space iswhitespac","","","""java/org/apache/catalina/connector/Response.java""","2","2","2","1","16","1","8","5","4","0","3","80","80","80","16","80","0","3","2","75","1673","341","769","204","483","566","357","554","189","365","12","12","19","8","3","1","196","196","226","135","normal"
"49551","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49551 Allow default context.xml file to be specified using an absolute path.","Bug 49551  When setting absolute path to default context.xml, in ContextConfig.contextConfig() it cannot be found","set absolut path default context xml context config contextconfig context config contextconfig cannot found","","","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","8","1","40","3","30","6","2","1","12","49","49","48","11","49","0","1","38","10","2305","308","1612","380","1138","387","751","1145","371","774","37","37","45","10","5","0","366","366","401","87","normal"
"49567","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49567 Better handling of calls to complete() from a separate thread. There are still a handful of TODOs around this which will follow shortly but I'm committing this since it passes the unit tests and the Servlet TCK (with BIO)","Bug 49567  when starting a new thread from a startAsync Runnable, an infinite amount of doPosts is generated","start new thread start async startasync runnabl infinit amount do post dopost gener","","","""java/org/apache/catalina/connector/CoyoteAdapter.java""","10","10","12","4","69","6","49","13","1","3","7","14","14","11","1","14","0","0","7","7","1129","158","745","143","559","226","397","544","131","413","24","24","27","13","6","0","147","147","180","59","normal"
"49567","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49567 Better handling of calls to complete() from a separate thread. There are still a handful of TODOs around this which will follow shortly but I'm committing this since it passes the unit tests and the Servlet TCK (with BIO)","Bug 49567  when starting a new thread from a startAsync Runnable, an infinite amount of doPosts is generated","start new thread start async startasync runnabl infinit amount do post dopost gener","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","15","1","8","4","1","2","5","152","152","150","51","152","1","1","14","136","3018","593","1499","413","947","935","725","1093","397","696","22","22","24","11","5","1","370","370","419","224","normal"
"49567","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49567 Better handling of calls to complete() from a separate thread. There are still a handful of TODOs around this which will follow shortly but I'm committing this since it passes the unit tests and the Servlet TCK (with BIO)","Bug 49567  when starting a new thread from a startAsync Runnable, an infinite amount of doPosts is generated","start new thread start async startasync runnabl infinit amount do post dopost gener","","","""java/org/apache/catalina/core/AsyncContextImpl.java""","2","2","2","1","10","0","9","0","5","0","1","33","31","33","19","33","0","0","1","32","430","43","351","103","213","36","163","249","91","158","22","22","22","1","4","0","86","86","92","33","normal"
"49567","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49567 Better handling of calls to complete() from a separate thread. There are still a handful of TODOs around this which will follow shortly but I'm committing this since it passes the unit tests and the Servlet TCK (with BIO)","Bug 49567  when starting a new thread from a startAsync Runnable, an infinite amount of doPosts is generated","start new thread start async startasync runnabl infinit amount do post dopost gener","","","""java/org/apache/coyote/http11/Http11Processor.java""","12","12","14","4","70","8","51","10","1","0","1","13","13","13","7","13","0","0","5","8","1064","172","703","117","547","194","380","532","116","416","51","51","57","24","4","0","157","157","184","57","normal"
"49567","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49567 Better handling of calls to complete() from a separate thread. There are still a handful of TODOs around this which will follow shortly but I'm committing this since it passes the unit tests and the Servlet TCK (with BIO)","Bug 49567  when starting a new thread from a startAsync Runnable, an infinite amount of doPosts is generated","start new thread start async startasync runnabl infinit amount do post dopost gener","","","""test/org/apache/catalina/core/TestAsyncContextImpl.java""","1","1","1","1","17","2","14","2","3","0","1","4","4","4","1","4","0","0","1","3","100","19","59","25","33","23","38","45","22","23","2","2","2","1","1","0","5","5","5","4","normal"
"49567","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49567 Better handling of calls to complete() from a separate thread. There are still a handful of TODOs around this which will follow shortly but I'm committing this since it passes the unit tests and the Servlet TCK (with BIO)","Bug 49567  when starting a new thread from a startAsync Runnable, an infinite amount of doPosts is generated","start new thread start async startasync runnabl infinit amount do post dopost gener","","","""test/org/apache/catalina/core/TestAsyncContextImpl.java""","1","1","1","1","17","2","14","2","3","0","1","4","4","4","1","4","0","0","1","3","100","19","59","25","33","23","38","45","22","23","2","2","2","1","1","0","5","5","5","4","normal"
"49570","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49570 When using the example compression filter, set the Vary header on compressed responses","Bug 49570  The CompressionFilter example should support HTTP proxies to cache gzipped content better by sending Vary: Accept-Encoding header","compress filter compressionfilt exampl support http proxi cach gzip content better send vari accept encod header","","","""webapps/examples/WEB-INF/classes/compressionFilters/CompressionResponseStream.java""","3","3","3","1","19","2","11","4","1","0","0","11","11","11","9","11","0","0","1","10","329","68","153","33","95","108","72","111","27","84","7","7","7","4","3","1","38","38","38","14","enhancement"
"49595","368","Jean-Frederic Clere","Fix for PR49595","Bug 49595  Tomcat crashes in tcnative-1.dll frequently","tomcat crash tcnativ dll frequent","","","""java/org/apache/coyote/ajp/AjpAprProcessor.java""","4","4","5","2","29","3","20","6","2","0","1","15","15","15","3","15","0","0","9","6","587","97","350","74","226","141","164","236","55","181","20","20","23","10","4","0","72","72","78","38","critical"
"49613","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49613 Improve performance for multiple calls to Request.getAttributeNames() when using SSL. Patch provided by Sampo Savolainen.","Bug 49613  Request.getAttributeNames() slows down some applications","request get attribut name getattributenam slow applic","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","15","1","8","4","1","2","5","152","152","150","51","152","1","1","14","136","3013","593","1498","413","946","931","725","1093","397","696","22","22","24","11","5","1","370","370","418","224","major"
"49617","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49617 Correct the ExpiresFilter documentation after changes to the submitted patch","Bug 49617  Fix ExpiresFilter docs (remove remaining ExpiresActive reference)","fix expir filter expiresfilt doc remov remain expir activ expiresact refer","Remove the last references to the removed configuration parameter ExpiresActive.","remov last refer remov configur paramet expir activ expiresact","""java/org/apache/catalina/filters/ExpiresFilter.java""","1","1","1","1","8","0","6","1","8","10","8","109","105","99","30","109","0","3","13","93","1651","180","876","290","460","595","354","538","209","329","20","20","29","7","3","1","183","182","202","123","minor"
"49617","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49617 Correct the ExpiresFilter documentation after changes to the submitted patch","Bug 49617  Fix ExpiresFilter docs (remove remaining ExpiresActive reference)","fix expir filter expiresfilt doc remov remain expir activ expiresact refer","Remove the last references to the removed configuration parameter ExpiresActive.","remov last refer remov configur paramet expir activ expiresact","""test/org/apache/catalina/filters/TestExpiresFilter.java""","1","1","1","1","18","2","15","0","11","0","11","26","26","26","0","26","0","0","12","14","493","90","374","118","270","30","193","231","112","119","9","9","10","1","5","0","34","34","35","26","minor"
"49617","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49617 Correct the ExpiresFilter documentation after changes to the submitted patch","Bug 49617  Fix ExpiresFilter docs (remove remaining ExpiresActive reference)","fix expir filter expiresfilt doc remov remain expir activ expiresact refer","Remove the last references to the removed configuration parameter ExpiresActive.","remov last refer remov configur paramet expir activ expiresact","""test/org/apache/catalina/filters/TestExpiresFilter.java""","1","1","1","1","18","2","15","0","11","0","11","26","26","26","0","26","0","0","12","14","493","90","374","118","270","30","193","231","112","119","9","9","10","1","5","0","34","34","35","26","minor"
"49625","69","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49625 Ensure Vary header is set if response may be compressed rather than only setting it if it is compressed.","Bug 49625  Tomcat doesn't send Vary consistently when gzip enabled","tomcat doesn send vari consist gzip enabl","HTTP requires that the Vary response header be sent consistently for all responses if they change based upon different aspects of the request.
My pages has both compressed and uncompressed variants available, negotiated by the Accept-Encoding request header, but it sends different Vary headers for each;

""accept-encoding"" when the response is compressed, and
"""" when it is not.
This can cause problems for downstream caches, because they cannot consistently determine what the cache key for a given URI is.

My server.xml content:
  <Service name=""Catalina"">
  
    <Connector port=""8080"" proxyPort=""80"" maxHttpHeaderSize=""8192"" protocol=""org.apache.coyote.http11.Http11Protocol"" 
    maxThreads=""200"" minSpareThreads=""25"" maxPostSize=""8"" 
    maxSpareThreads=""75"" enableLookups=""false"" keepAliveTimeout=""3000"" maxKeepAliveRequests=""100""
    redirectPort=""8443"" acceptCount=""100""
    connectionTimeout=""8000"" disableUploadTimeout=""true""
    compression=""on"" compressionMinSize=""2048""
    compressableMimeType=""text/html,text/xml,text/javascript,text/css"" />
    
    <Engine name=""Catalina"" defaultHost=""localhost"">
        <Host name=""localhost"" appBase=""webapps"" unpackWARs=""false"" autoDeploy=""false""
debug=""0""
            xmlValidation=""false"" xmlNamespaceAware=""false"">
	</Host>
    </Engine>
  </Service>","http requir vari respons header sent consist respons chang base upon differ aspect request page compress uncompress variant avail negoti accept encod request header send differ vari header accept encod acceptencod respons compress caus problem downstream cach cannot consist determin cach key given uri server xml content servic name catalina connector port proxi port proxyport max http header size maxhttpheaders protocol apach coyot http11 http11 protocol http11protocol max thread maxthread min spare thread minsparethread max post size maxposts max spare thread maxsparethread enabl lookup enablelookup fals keep aliv timeout keepalivetimeout max keep aliv request maxkeepaliverequest redirect port redirectport accept count acceptcount connect timeout connectiontimeout disabl upload timeout disableuploadtimeout true compress compress min size compressionmins compress mime type compressablemimetyp text html text xml text javascript text cs engin name catalina default host defaulthost localhost host name localhost app base appbas webapp unpack unpackwar fals auto deploy autodeploy fals debug xml valid xmlvalid fals xml namespac awar xmlnamespaceawar fals host engin servic","""java/org/apache/coyote/http11/AbstractHttp11Processor.java""","2","2","3","1","14","0","10","3","4","0","3","65","70","72","44","72","4","10","17","41","1380","236","756","214","491","397","366","537","199","338","21","21","29","10","4","1","174","172","198","98","normal"
"49655","5","Mark Emlyn David Thomas","Add an explicit test case for bug 49655","Bug 49655  ExpressionFactoryImpl.createMethodExpression() is not EL 2.2 Spec conform","express factori impl expressionfactoryimpl creat method express createmethodexpress spec conform","","","""test/org/apache/el/TestMethodExpressionImpl.java""","1","1","1","1","10","0","9","0","1","0","0","25","25","25","2","25","0","0","0","25","314","43","244","125","176","27","129","160","95","65","2","2","2","1","1","0","30","30","30","25","major"
"49665","61","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49665 Better handling for missing TLD files. Report JSP filename and location.","Bug 49665  When file not found error occurs it does not tell you which file caused the error.","file found error occur tell file caus error","","","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","36","3","27","5","12","6","5","111","111","105","47","111","11","50","0","50","4241","512","3020","528","2339","736","1832","2326","488","1838","22","22","28","20","5","0","498","492","551","208","normal"
"49665","61","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49665 Better handling for missing TLD files. Report JSP filename and location.","Bug 49665  When file not found error occurs it does not tell you which file caused the error.","file found error occur tell file caus error","","","""java/org/apache/jasper/compiler/JspDocumentParser.java""","5","5","6","1","37","2","33","2","2","3","3","31","31","28","17","31","1","13","0","17","1472","124","1102","198","825","254","336","510","144","366","39","39","46","12","5","0","176","176","214","51","normal"
"49665","61","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49665 Better handling for missing TLD files. Report JSP filename and location.","Bug 49665  When file not found error occurs it does not tell you which file caused the error.","file found error occur tell file caus error","","","""java/org/apache/jasper/compiler/JspDocumentParser.java""","5","5","6","1","37","2","33","2","2","3","3","31","31","28","17","31","1","13","0","17","1472","124","1102","198","825","254","336","510","144","366","39","39","46","12","5","0","176","176","214","51","normal"
"49665","61","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49665 Better handling for missing TLD files. Report JSP filename and location.","Bug 49665  When file not found error occurs it does not tell you which file caused the error.","file found error occur tell file caus error","","","""java/org/apache/jasper/compiler/Parser.java""","5","5","6","2","25","1","21","2","1","2","3","56","56","54","10","56","1","53","0","2","1769","174","1207","222","890","391","565","877","205","672","20","20","21","20","5","0","313","313","358","120","normal"
"49665","61","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49665 Better handling for missing TLD files. Report JSP filename and location.","Bug 49665  When file not found error occurs it does not tell you which file caused the error.","file found error occur tell file caus error","","","""java/org/apache/jasper/compiler/TagLibraryInfoImpl.java""","8","8","10","1","39","3","32","4","1","0","0","16","16","16","6","16","4","7","0","5","759","79","566","164","420","120","274","412","150","262","21","21","33","4","4","0","136","136","169","19","normal"
"49667","63","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49667 Ensure JDBC leak prevention code doesn't trigger the very memory leak it is meant to be fixing.","Bug 49667  JdbcLeakPrevention class can register unregistered JCBC Driver","jdbc leak prevent jdbcleakprevent class regist unregist jcbc driver","","","""java/org/apache/catalina/loader/JdbcLeakPrevention.java""","3","3","3","3","17","1","14","2","1","0","0","1","1","1","0","1","0","0","0","1","58","6","23","12","10","29","14","18","12","6","3","3","3","3","2","1","3","3","3","3","normal"
"49670","25","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49670 Fix SSO - broken by Lifecycle refactoring","Bug 49670  org.apache.catalina.authenticator.SingleSignOn valve does not function","apach catalina authent singl sign on singlesignon valv function","I have two web applications; neither declare a realm in the context.xml and both are configured for authentication in the web.xml using standard tomcat authentication methods.  I have enabled the tomcat valve in the host and have added a realm to the host as well.

      <Host name=""localhost""  appBase=""webapps"" unpackWARs=""true"" autoDeploy=""true"">
      	<Realm className=""org.apache.catalina.realm.JAASRealm"" appName=""SSO"" userClassNames=""a.b.c"" roleClassNames=""a.b.c"" useContextClassLoader=""false""/>
        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <Valve className=""org.apache.catalina.authenticator.SingleSignOn""/>
        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className=""org.apache.catalina.valves.AccessLogValve"" directory=""logs""  
               prefix=""localhost_access_log."" suffix="".txt"" pattern=""common"" resolveHosts=""false""/>
        -->

I have added a jaas configuration for the SSO app in the jaas.conf file for the server.  I am certain that the realm, jaas.conf are all configured properly as the web applications do require a user to authenticate before accessing the application, but if I have authenticated to one application I still am required to authenticate before accessing the other application.

I have this exact same configuration working on a tomcat 6 environment, but an identical configuration will not operate on a tomcat 7 server.","two web applic neither declar realm context xml configur authent web xml use standard tomcat authent method enabl tomcat valv host ad realm host well host name localhost app base appbas webapp unpack unpackwar true auto deploy autodeploy true realm class name classnam apach catalina realm realm jaasrealm app name appnam sso user class name userclassnam role class name roleclassnam use context class loader usecontextclassload fals singl sign on singlesignon valv share authent web applic document doc config valv html valv class name classnam apach catalina authent singl sign on singlesignon access log process exampl document doc config valv html valv class name classnam apach catalina valv access log valv accesslogvalv directori log prefix localhost access log suffix txt pattern common resolv host resolvehost fals ad jaa configur sso app jaa conf file server certain realm jaa conf configur properli web applic requir user authent access applic authent one applic still requir authent access applic exact configur work tomcat environ ident configur oper tomcat server","""java/org/apache/catalina/authenticator/AuthenticatorBase.java""","3","3","3","1","22","2","12","7","1","0","8","27","28","28","11","28","0","0","7","21","883","170","393","125","241","322","193","284","110","174","29","29","33","8","5","1","90","90","98","41","regression"
"49683","379","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49683 Use separate timeouts for socket  Timeout and keep-alive timeout","Bug 49683  Separate keep-alive and connection timeout with APR/native connector","separ keep aliv keepal connect timeout apr nativ connector","","","""java/org/apache/coyote/ajp/AjpAprProtocol.java""","1","1","1","1","4","0","3","0","2","0","1","13","13","13","2","13","0","0","6","7","145","35","72","38","30","38","38","54","27","27","2","2","2","1","1","1","14","14","14","13","enhancement"
"49683","379","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49683 Use separate timeouts for socket  Timeout and keep-alive timeout","Bug 49683  Separate keep-alive and connection timeout with APR/native connector","separ keep aliv keepal connect timeout apr nativ connector","","","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","16","0","12","3","11","0","1","85","86","86","63","86","1","1","9","75","1842","228","1182","281","818","433","594","906","263","643","40","40","51","11","7","0","287","287","329","125","enhancement"
"49683","379","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49683 Use separate timeouts for socket  Timeout and keep-alive timeout","Bug 49683  Separate keep-alive and connection timeout with APR/native connector","separ keep aliv keepal connect timeout apr nativ connector","","","""java/org/apache/coyote/http11/Http11AprProtocol.java""","1","1","1","1","3","0","2","0","2","0","1","50","50","50","2","50","1","0","8","41","267","57","136","80","83","74","85","140","64","76","3","3","3","1","1","1","53","53","53","50","enhancement"
"49714","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49714 The annotation process of Jar doesn't influence distributable element of web.xml.","Bug 49714  The annotation process of Jar should not impact distributable of web.xml.","annot process jar impact distribut web xml","Even if < distributable/> is set to web.xml(servlet3.0), 
distributable is changed from true to false by the annotation process of JAR. 

ContextConfig#processAnnotations is as follows. 
===ContextConfig#processAnnotations
protected void processAnnotations(Set<WebXml> fragments) {
    for(WebXml fragment : fragments) {
        if (!fragment.isMetadataComplete()) {
            WebXml annotations = new WebXml();
            URL url = fragment.getURL();
            processAnnotationsUrl(url, annotations);
            Set<WebXml> set = new HashSet<WebXml>();
            set.add(annotations);
            // Merge annotations into fragment - fragment takes priority
            fragment.merge(set);
        }
    }
}
===
distributable of ""annotations"" created by new WebXml() is false (default). 
If ""annotations"" is merged with ""fragment"", distributable of ""fragment"" becomes false. 

Because ""fragment"" is merged with web.xml of the web application,
even if < distributable/> is set to web.xml, distributable is changed from true to false. 

The following are necessary. 
annotations.setDistributable(true);

Best regards.","even distribut set web xml servlet3 distribut chang true fals annot process jar context config contextconfig process annot processannot follow context config contextconfig process annot processannot protect void process annot processannot set web xml webxml fragment web xml webxml fragment fragment fragment is metadata complet ismetadatacomplet web xml webxml annot new web xml webxml url url fragment get geturl process annot url processannotationsurl url annot set web xml webxml set new hash set hashset web xml webxml set add annot merg annot fragment fragment take prioriti fragment merg set distribut annot creat new web xml webxml fals default annot merg fragment distribut fragment becom fals fragment merg web xml web applic even distribut set web xml distribut chang true fals follow necessari annot set distribut setdistribut true best regard","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","8","1","40","3","30","6","2","1","12","49","49","48","11","49","0","1","38","10","2307","308","1615","380","1140","386","752","1147","371","776","37","37","45","10","5","0","367","367","402","87","normal"
"49721","16","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49721 All JARs can be resource JARs. Although the spec defines no order, use ordered JARs in order then the remaining JARs in any order.","Bug 49721  Fail to access the resources such as jsp files from a jar file which is supported by servlet 3.0","fail access resourc jsp file jar file support servlet","I put a jsp file in a jar file and test whether tomcat 7 supports it by viewing it from the browser and failed.","put jsp file jar file whether tomcat support view browser fail","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","8","1","40","3","30","6","2","1","12","49","49","48","11","49","0","1","38","10","2309","308","1616","380","1141","387","753","1148","371","777","37","37","45","10","5","0","367","367","402","87","normal"
"49726","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49726 Specifying a default content type via a JSP property group should not prevent a page from setting some other content type Includes test cases","Bug 49726  JSP 2.2 new configuration element <default-content-type> under <jsp-property-group> works incorrectly on tomcat trunk","jsp new configur element default content type defaultcontenttyp jsp properti group jsppropertygroup work incorrectli tomcat trunk","","","""java/org/apache/jasper/compiler/Compiler.java""","5","5","5","2","34","3","23","8","1","0","0","14","15","15","8","15","0","1","2","12","580","78","352","84","231","151","166","240","76","164","25","25","25","13","4","0","72","72","76","28","major"
"49730","51","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49730 Race condition in executor can lead to long delays in request processing","Bug 49730  Race condition in StandardThreadExecutor : requests are sometimes enqueued instead of creating new threads","race condit standard thread executor standardthreadexecutor request sometim enqueu instead creat new thread","In tomcat 6, I often configure an Executor with minSpareThreads=0 to work around memory leak issues upon redeployment.

Sometimes (especially in development), when I refresh a page of my webapp with Safari, Chrome or Firefox, some resources of the page take several seconds (>10s) to be served though they are static resources and should come in less than 50ms. For instance, over 15 requests for a page (1 for html, the others for resources like js, css, images...), I sometimes have 1 or 2 that take >10s. 

After analysis, I found that in org.apache.catalina.core.StandardThreadExecutor.TaskQueue.offer(Runnable) the statement 
if (parent.getActiveCount()<(parent.getPoolSize()))
is sometimes true unexpectedly. Here is the scenario :

- ThreadPoolExecutor is empty
- the user refreshes the page (or accesses it with an empty cache) in his web browser for a page that uses a more than 10-15 resources
- the browser establishes one TCP connection and a new Thread is created
- after the browser receives the response, it decides to load as many resources as possible in parallel. For this it establishes up to 6 TCP connections (in my tests)
- The Acceptor thread calls StandardThreadExecutor.execute to process each incoming connection.
- For each call, StandardThreadExecutor.TaskQueue.offer(Runnable) is being called
- if you study the sources of Java 6 ThreadPoolExecutor, you can see that there's a small delay between the time a new Thread is created (thus increasing poolSize) and the time it starts working on its first task (increasing the activeCount)
- Since in my case connections are established in a rapid burst, the calls to TaskQueue.offer() are sometimes faster than this small delay, so that we do have parent.getActiveCount()<parent.getPoolSize() and thus the task is enqueued instead of forcing the creation of a thread to serve it.
- Since Keep-Alive is enabled and tomcat 6 threads take care of only one TCP connection at a time, the requests in the queue must wait for the keep-alive timeout so that a Thread is returned to the pool to serve pending tasks.
- With 25s keepAliveTimeOut, it means that some requests take more than 25s to be served eventhough the pool was never full and the server quite idle!!!

Other facts about this issue :
- Although my test case starts with an empty pool, it can occur even on a loaded server. The thing that triggers the issue is the burst of new TCP connections.
- The problem is less severe with a lower keepAliveTimeout, or if keepalive is disabled. In any case, it also depends on the time taken to serve current requests.
- The issue also affects tomcat 7 but is less severe because tc7 threads are returned to the pool after each http request, even if the TCP connection is kept alive. The impact would the same as with tc6 with keepAlive disabled.","tomcat often configur executor min spare thread minsparethread work around memori leak issu upon redeploy sometim especi develop refresh page webapp safari chrome firefox resourc page take sever second 10 serv though static resourc le 50m instanc request page html other resourc like j cs imag sometim take 10 analysi found apach catalina core standard thread executor standardthreadexecutor task queue taskqueu offer runnabl statement parent get activ count getactivecount parent get pool size getpools sometim true unexpectedli scenario thread pool executor threadpoolexecutor empti user refresh page access empti cach web browser page us resourc browser establish one tcp connect new thread creat browser receiv respons decid load mani resourc possibl parallel establish tcp connect test acceptor thread call standard thread executor standardthreadexecutor execut process incom connect call standard thread executor standardthreadexecutor task queue taskqueu offer runnabl call studi sourc java thread pool executor threadpoolexecutor see small delay time new thread creat thu increas pool size poolsiz time start work first task increas activ count activecount sinc case connect establish rapid burst call task queue taskqueu offer sometim faster small delay parent get activ count getactivecount parent get pool size getpools thu task enqueu instead forc creation thread serv sinc keep aliv enabl tomcat thread take care one tcp connect time request queue must wait keep aliv keepal timeout thread return pool serv pend task 25 keep aliv time out keepalivetimeout mean request take 25 serv eventhough pool never full server quit idl fact issu although case start empti pool occur even load server thing trigger issu burst new tcp connect problem le sever lower keep aliv timeout keepalivetimeout keepal disabl case depend time taken serv current request issu affect tomcat le sever tc7 thread return pool http request even tcp connect kept aliv impact would tc6 keep aliv keepal disabl","""java/org/apache/tomcat/util/threads/TaskQueue.java""","1","1","1","1","4","0","3","1","1","0","0","7","7","7","1","7","0","0","0","7","74","8","37","16","14","31","20","34","15","19","5","5","5","5","1","1","13","13","13","11","normal"
"49730","51","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49730 Race condition in executor can lead to long delays in request processing","Bug 49730  Race condition in StandardThreadExecutor : requests are sometimes enqueued instead of creating new threads","race condit standard thread executor standardthreadexecutor request sometim enqueu instead creat new thread","In tomcat 6, I often configure an Executor with minSpareThreads=0 to work around memory leak issues upon redeployment.

Sometimes (especially in development), when I refresh a page of my webapp with Safari, Chrome or Firefox, some resources of the page take several seconds (>10s) to be served though they are static resources and should come in less than 50ms. For instance, over 15 requests for a page (1 for html, the others for resources like js, css, images...), I sometimes have 1 or 2 that take >10s. 

After analysis, I found that in org.apache.catalina.core.StandardThreadExecutor.TaskQueue.offer(Runnable) the statement 
if (parent.getActiveCount()<(parent.getPoolSize()))
is sometimes true unexpectedly. Here is the scenario :

- ThreadPoolExecutor is empty
- the user refreshes the page (or accesses it with an empty cache) in his web browser for a page that uses a more than 10-15 resources
- the browser establishes one TCP connection and a new Thread is created
- after the browser receives the response, it decides to load as many resources as possible in parallel. For this it establishes up to 6 TCP connections (in my tests)
- The Acceptor thread calls StandardThreadExecutor.execute to process each incoming connection.
- For each call, StandardThreadExecutor.TaskQueue.offer(Runnable) is being called
- if you study the sources of Java 6 ThreadPoolExecutor, you can see that there's a small delay between the time a new Thread is created (thus increasing poolSize) and the time it starts working on its first task (increasing the activeCount)
- Since in my case connections are established in a rapid burst, the calls to TaskQueue.offer() are sometimes faster than this small delay, so that we do have parent.getActiveCount()<parent.getPoolSize() and thus the task is enqueued instead of forcing the creation of a thread to serve it.
- Since Keep-Alive is enabled and tomcat 6 threads take care of only one TCP connection at a time, the requests in the queue must wait for the keep-alive timeout so that a Thread is returned to the pool to serve pending tasks.
- With 25s keepAliveTimeOut, it means that some requests take more than 25s to be served eventhough the pool was never full and the server quite idle!!!

Other facts about this issue :
- Although my test case starts with an empty pool, it can occur even on a loaded server. The thing that triggers the issue is the burst of new TCP connections.
- The problem is less severe with a lower keepAliveTimeout, or if keepalive is disabled. In any case, it also depends on the time taken to serve current requests.
- The issue also affects tomcat 7 but is less severe because tc7 threads are returned to the pool after each http request, even if the TCP connection is kept alive. The impact would the same as with tc6 with keepAlive disabled.","tomcat often configur executor min spare thread minsparethread work around memori leak issu upon redeploy sometim especi develop refresh page webapp safari chrome firefox resourc page take sever second 10 serv though static resourc le 50m instanc request page html other resourc like j cs imag sometim take 10 analysi found apach catalina core standard thread executor standardthreadexecutor task queue taskqueu offer runnabl statement parent get activ count getactivecount parent get pool size getpools sometim true unexpectedli scenario thread pool executor threadpoolexecutor empti user refresh page access empti cach web browser page us resourc browser establish one tcp connect new thread creat browser receiv respons decid load mani resourc possibl parallel establish tcp connect test acceptor thread call standard thread executor standardthreadexecutor execut process incom connect call standard thread executor standardthreadexecutor task queue taskqueu offer runnabl call studi sourc java thread pool executor threadpoolexecutor see small delay time new thread creat thu increas pool size poolsiz time start work first task increas activ count activecount sinc case connect establish rapid burst call task queue taskqueu offer sometim faster small delay parent get activ count getactivecount parent get pool size getpools thu task enqueu instead forc creation thread serv sinc keep aliv enabl tomcat thread take care one tcp connect time request queue must wait keep aliv keepal timeout thread return pool serv pend task 25 keep aliv time out keepalivetimeout mean request take 25 serv eventhough pool never full server quit idl fact issu although case start empti pool occur even load server thing trigger issu burst new tcp connect problem le sever lower keep aliv timeout keepalivetimeout keepal disabl case depend time taken serv current request issu affect tomcat le sever tc7 thread return pool http request even tcp connect kept aliv impact would tc6 keep aliv keepal disabl","""java/org/apache/tomcat/util/threads/ThreadPoolExecutor.java""","1","1","1","1","6","0","4","1","2","0","0","10","10","10","1","10","0","0","2","8","119","16","63","26","23","40","23","39","21","18","5","5","5","1","4","1","14","14","14","10","normal"
"49749","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49749","Bug 49749  SSO cookie should be added as HttpOnly","sso cooki ad http onli httponli","SSO cookies should be made HttpOnly by default.

In org.apache.catalina.authenticator.AuthenticatorBase#register(), 

798- response.addCookie(cookie);
798+ response.addCookieInternal(cookie, true);","sso cooki made http onli httponli default apach catalina authent authent base authenticatorbas regist respons add cooki addcooki cooki respons add cooki intern addcookieintern cooki true","""java/org/apache/catalina/authenticator/AuthenticatorBase.java""","3","3","3","1","22","2","11","7","1","0","8","27","28","28","11","28","0","0","7","21","878","170","388","124","238","322","190","280","109","171","29","29","33","8","5","1","89","89","97","40","normal"
"49750","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49750 Align WebappClassLoader.validate() implementation with Javadoc and ensure that javax.servlet.* classes can not be loaded by a WebappClassLoader instance. Patch provided by pid.","Bug 49750  WebappClassLoader.validate(name) does not validate javax.servlet.","webapp class loader webappclassload valid name valid javax servlet","The method does not validate the class name as described in the method documentation.

""Validate a classname. As per SRV.9.7.2, we must restrict loading of classes from J2SE (java.*) and classes of the servlet API (javax.servlet.*) ""","method valid class name describ method document valid classnam srv must restrict load class j2 j2se java class servlet api javax servlet","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","6","2","31","3","21","6","4","1","6","86","86","85","36","86","3","11","20","52","3324","530","1993","455","1387","808","915","1386","406","980","43","43","49","28","10","0","482","482","523","207","trivial"
"49757","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49757 Correct generics warnings and a couple of other warnings whilst I had the files open. Based on a patch by Gbor","Bug 49757  correcting some generics related warnings","correct gener relat warn","Patch attached. Thanks","patch attach thank","""java/org/apache/catalina/manager/JMXProxyServlet.java""","4","4","5","3","25","2","21","2","1","0","0","8","8","8","2","8","0","1","0","7","271","34","191","60","122","46","107","146","56","90","19","19","21","11","8","0","38","38","40","24","trivial"
"49757","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49757 Correct generics warnings and a couple of other warnings whilst I had the files open. Based on a patch by Gbor","Bug 49757  correcting some generics related warnings","correct gener relat warn","Patch attached. Thanks","patch attach thank","""java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java""","2","2","3","1","10","0","9","1","4","0","13","109","112","112","30","112","0","1","10","101","1499","176","1090","331","678","257","569","847","305","542","20","20","25","7","5","0","282","273","328","144","trivial"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/javax/annotation/Resource.java""","1","1","1","1","0","0","0","0","2","0","0","2","6","8","2","8","0","0","0","8","41","5","20","18","0","17","11","13","13","0","1","1","1","1","0","1","2","2","2","2","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/javax/ejb/EJB.java""","0","0","0","0","0","0","0","0","1","0","0","0","5","5","0","5","5","0","0","0","36","5","15","14","0","17","10","11","11","0","0","0","0","0","0","1","0","0","0","0","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/javax/el/BeanELResolver.java""","3","3","3","1","13","0","12","0","4","1","0","25","25","24","12","25","0","6","0","19","451","59","365","103","212","28","163","243","91","152","18","18","19","8","3","0","81","81","90","42","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/javax/el/ELContext.java""","1","1","1","1","5","0","4","0","1","0","0","7","10","10","3","10","0","0","0","10","85","18","43","19","13","24","20","31","18","13","3","3","4","1","1","1","10","10","11","7","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/javax/el/ResourceBundleELResolver.java""","2","2","2","1","13","1","12","0","1","0","0","7","7","7","0","7","0","0","0","7","136","18","101","35","49","17","42","63","21","42","5","5","5","4","3","0","20","20","20","10","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/javax/servlet/ServletRequestWrapper.java""","1","1","1","1","8","0","3","4","1","0","0","41","41","41","1","41","0","0","0","41","455","43","190","89","53","222","54","102","49","53","3","3","3","3","1","1","47","47","47","45","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/javax/servlet/ServletResponseWrapper.java""","1","1","1","1","8","0","3","4","1","0","0","20","20","20","1","20","0","0","0","20","239","23","101","42","32","115","31","58","26","32","3","3","3","3","1","1","26","26","26","24","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/javax/servlet/annotation/HandlesTypes.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","1","0","0","0","40","4","11","10","0","26","6","7","7","0","0","0","0","0","0","2","0","0","0","0","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/javax/servlet/jsp/el/ExpressionEvaluator.java""","0","0","0","0","0","0","0","0","1","0","0","0","2","2","0","2","0","0","0","2","115","4","12","11","0","101","3","4","4","0","0","0","0","0","0","8","0","0","0","0","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/javax/servlet/jsp/el/ImplicitObjectELResolver.java""","1","1","2","1","9","0","9","0","14","1","13","62","64","63","12","64","0","0","32","32","628","95","513","138","298","21","200","315","139","176","15","5","16","14","3","0","121","111","126","84","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/javax/servlet/jsp/tagext/TagSupport.java""","1","1","1","1","13","0","5","8","1","1","0","15","15","14","4","15","0","0","0","15","289","30","98","37","38","161","37","60","28","32","5","5","10","5","2","2","24","24","29","19","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/javax/xml/ws/WebServiceRef.java""","0","0","0","0","0","0","0","0","1","0","0","0","5","5","0","5","0","0","0","5","37","5","16","15","0","18","10","11","11","0","0","0","0","0","0","1","0","0","0","0","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/org/apache/el/lang/EvaluationContext.java""","1","1","1","1","3","0","3","0","1","0","0","11","11","11","3","11","0","0","0","11","93","18","57","32","13","18","22","34","21","13","1","1","1","1","0","0","11","11","11","11","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/org/apache/el/parser/AstValue.java""","2","2","3","1","16","0","14","1","3","0","2","14","14","14","2","14","0","4","0","10","331","40","249","83","157","42","115","157","67","90","7","7","10","4","3","0","41","41","51","20","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/org/apache/jasper/el/ELContextWrapper.java""","1","1","1","1","3","0","3","0","1","0","0","10","10","10","2","10","0","0","0","10","89","15","53","30","12","23","20","32","19","13","2","2","2","1","1","0","11","11","11","10","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/org/apache/jasper/el/ExpressionEvaluatorImpl.java""","1","1","1","1","8","0","8","0","1","0","0","3","3","3","1","3","0","0","0","3","64","7","41","27","10","18","17","23","16","7","3","3","3","1","2","0","5","5","5","3","normal"
"49758","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49758 Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb.","Bug 49758  [Patch] Generics warnings - rawtypes","patch gener warn rawtyp","","","""java/org/apache/naming/resources/DirContextURLConnection.java""","4","4","4","2","21","2","14","4","1","0","0","14","14","14","7","14","0","0","1","13","458","97","249","91","134","114","110","172","69","103","10","10","10","8","5","0","61","61","63","40","normal"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/catalina/connector/Connector.java""","1","1","1","1","12","1","5","5","1","0","5","57","57","57","23","57","0","0","7","50","975","266","379","126","213","330","176","256","113","143","8","8","8","3","2","1","79","79","82","59","regression"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/catalina/core/StandardService.java""","2","2","3","1","18","2","11","4","1","0","3","24","24","24","6","24","0","0","5","19","598","118","312","72","181","168","118","215","75","140","10","10","11","3","3","1","71","71","76","30","regression"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/coyote/ProtocolHandler.java""","0","0","0","0","0","0","0","0","1","0","0","0","11","11","0","11","0","0","0","11","88","19","16","15","0","53","14","15","15","0","0","0","0","0","0","3","0","0","0","0","regression"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/coyote/ajp/AjpAprProcessor.java""","6","6","7","3","45","5","32","8","3","0","5","23","23","23","29","23","0","1","7","15","1430","265","841","181","635","329","479","627","168","459","32","31","37","20","5","0","160","148","175","75","regression"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/coyote/ajp/AjpAprProtocol.java""","1","1","1","1","5","0","4","0","3","0","2","61","61","61","19","61","0","0","3","58","554","99","363","126","231","93","188","289","123","166","7","7","7","5","3","0","102","102","102","65","regression"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/coyote/ajp/AjpProcessor.java""","6","5","6","2","40","5","28","7","3","0","5","24","24","24","30","24","0","1","6","17","1365","257","785","182","592","328","462","599","171","428","32","29","37","19","5","0","149","137","162","69","regression"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/coyote/ajp/AjpProtocol.java""","1","1","1","1","5","0","5","0","3","0","2","54","54","54","20","54","0","0","3","51","508","91","337","122","209","80","181","272","119","153","8","8","8","4","3","0","91","91","91","57","regression"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/coyote/http11/AbstractHttp11Protocol.java""","1","1","1","1","2","0","2","0","1","0","1","73","75","75","21","75","0","0","1","74","388","71","231","130","127","88","136","223","115","108","4","4","4","1","2","0","86","86","89","73","regression"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/coyote/http11/Http11AprProcessor.java""","13","13","17","5","83","10","60","13","1","0","1","12","12","12","8","12","0","0","4","8","1154","176","772","138","603","210","437","597","139","458","60","60","71","28","6","0","166","166","204","63","regression"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/coyote/http11/Http11NioProcessor.java""","12","12","15","4","68","7","49","12","1","0","1","16","16","16","10","16","0","0","6","10","1263","185","839","158","656","257","463","651","156","495","62","62","72","31","7","0","198","198","244","75","regression"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/coyote/http11/Http11Processor.java""","12","12","14","4","70","8","51","10","1","0","1","13","13","13","7","13","0","0","5","8","1063","172","703","117","547","193","380","532","116","416","51","51","57","24","4","0","157","157","184","57","regression"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/tomcat/util/net/AbstractEndpoint.java""","1","1","1","1","3","0","3","0","3","0","28","88","91","93","44","93","0","0","1","92","586","81","373","203","246","134","234","356","195","161","8","8","8","4","2","0","121","121","125","99","regression"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","14","0","10","2","10","0","2","86","89","89","63","89","1","1","9","78","1677","233","1032","244","710","412","536","820","247","573","32","32","40","11","7","0","266","266","305","119","regression"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/tomcat/util/net/JIoEndpoint.java""","3","3","3","1","17","0","13","2","6","0","1","23","25","25","8","25","1","0","2","22","563","76","364","87","239","123","161","246","74","172","11","11","12","4","5","0","81","81","87","28","regression"
"49802","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49802 Allow the connectors to be stopped via JMX.","Bug 49802  Shutdown of AJP Connector do not work","shutdown ajp connector work","","","""java/org/apache/tomcat/util/net/NioEndpoint.java""","2","2","3","1","9","0","8","1","13","0","4","119","124","124","53","124","0","0","14","110","1603","184","1155","318","812","293","639","959","321","638","22","22","27","8","7","0","337","337","382","140","regression"
"49831","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49831 Make sure pooled XA connections are properly closed when the pool shuts down. Based on a patch by Daniel Mikusa.","Bug 49831  Issue with closing XAConnections on MSSQL","issu close connect xaconnect mssql","When using XAConnections with MSSQL it has been noticed that the physical connections are not being closed when DataSourceProxy.close(boolean all) is called. This method invokes org.apache.tomcat.jdbc.pool.PooledConnection.disconnent() which calls connection.close(). However, when used with SQLServer, the connection attribute is a proxy object (type com.microsoft.sqlserver.jdbc.SQLServerConnectionPoolProxy) which wraps the physical connection (of type com.microsoft.sqlserver.jdbc.SQLServerConnection). Calling close() on the proxy object only notifies the pool manager that the Connection is released back to the pool; it does not close the underlying physical connection.

This is what the PooledConnection.disconnent() implementation currently reads:

private void disconnect(boolean finalize) {
    if (isDiscarded()) {
        return;
    }
    setDiscarded(true);
    if (connection != null) {
        try {
            connection.close();
        }catch (Exception ignore) {
            if (log.isDebugEnabled()) {
                log.debug(""Unable to close underlying SQL connection"",ignore);
            }
        }
    }
    connection = null;
    xaConnection = null;
    lastConnected = -1;
    if (finalize) parent.finalize(this);
}

If the logic was changed to the following, it would properly closed the XAConnection with the MSSQL.

private void disconnect(boolean finalize) {
    if (isDiscarded()) {
        return;
    }
    setDiscarded(true);
    if (connection != null) {
        try {
            if (xaConnection != null) {
                xaConnection.close(); 
            } else {
                connection.close();
            }
        }catch (Exception ignore) {
            if (log.isDebugEnabled()) {
                log.debug(""Unable to close underlying SQL connection"",ignore);
            }
        }
    }
    connection = null;
    xaConnection = null;
    lastConnected = -1;
    if (finalize) parent.finalize(this);
}","use connect xaconnect mssql notic physic connect close data sourc proxi datasourceproxi close boolean call method invok apach tomcat jdbc pool pool connect pooledconnect disconn call connect close howev use server sqlserver connect attribut proxi object type microsoft sqlserver jdbc server connect pool proxi sqlserverconnectionpoolproxi wrap physic connect type microsoft sqlserver jdbc server connect sqlserverconnect call close proxi object notifi pool manag connect releas back pool close underli physic connect pool connect pooledconnect disconn implement current read privat void disconnect boolean final is discard isdiscard return set discard setdiscard true connect null tri connect close catch except ignor log is debug enabl isdebugen log debug unabl close underli sql connect ignor connect null xa connect xaconnect null last connect lastconnect final parent final logic chang follow would properli close connect xaconnect mssql privat void disconnect boolean final is discard isdiscard return set discard setdiscard true connect null tri xa connect xaconnect null xa connect xaconnect close els connect close catch except ignor log is debug enabl isdebugen log debug unabl close underli sql connect ignor connect null xa connect xaconnect null last connect lastconnect final parent final","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/PooledConnection.java""","2","2","3","1","12","0","8","4","1","0","5","35","35","35","14","35","0","2","2","31","610","63","319","78","196","236","141","230","77","153","11","11","14","6","3","1","90","90","107","45","normal"
"49856","29","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49856 Add an executorName attribute to Connectors so it is possible to trace ThreadPool to Connector to Executor via JMX.","Bug 49856  Connector/ThreadPool link to Executor not exposed via JMX","connector thread pool threadpool link executor expos via jmx","When viewing either Connector objects or ThreadPool objects via JMX the name of the executor is not shown. It would be helpful if this were exposed via JMX so the links between Connectors/ThreadPools and Executors could be determined.","view either connector object thread pool threadpool object via jmx name executor shown would help expos via jmx link connector thread pool threadpool executor could determin","""java/org/apache/catalina/connector/Connector.java""","1","1","1","1","12","1","5","5","1","0","5","57","57","57","23","57","0","0","7","50","983","267","386","126","219","330","178","259","113","146","8","8","8","3","2","1","80","80","83","59","normal"
"49861","29","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49861 Don't use commas when logging RMI port values","Bug 49861  Log format of RMI ports can be improved, remove "",""","log format rmi port improv remov","","","""java/org/apache/catalina/mbeans/JmxRemoteLifecycleListener.java""","2","2","2","1","17","1","11","4","2","0","4","12","12","12","12","12","0","3","0","9","309","46","191","78","116","74","96","125","65","60","8","8","8","3","2","0","27","27","27","14","null"
"49869","0","Rainer Jung","BZ 49869: Javadoc Fix.","Bug 49869  Javadoc for WebAppClassLoader constructor has copy/paste error","javadoc web app class loader webappclassload constructor copi past error","The constructor that takes a parent class loader has a copy of the doc string from the constructor that does not take a parent class loader.","constructor take parent class loader copi doc string constructor take parent class loader","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","6","2","31","3","21","6","4","1","6","86","86","85","36","86","3","11","20","52","3341","531","2003","464","1389","814","917","1389","407","982","43","43","49","28","10","0","483","483","524","208","normal"
"49876","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=49876 Generics warnings in the copied Apache Jakarta BCEL code. Based on a patch by Gbor. (markt)","Bug 49876  correcting generics related compile warning in org/apache/tomcat/util/bcel/classfile files","correct gener relat compil warn apach tomcat util bcel classfil file","Explanation:

Several files have compile time generics related warnings displayed for org/apache/tomcat/util/bcel/classfile. This patch cleans up several of those warnings.","explan sever file compil time gener relat warn display apach tomcat util bcel classfil patch clean sever warn","""java/org/apache/tomcat/util/bcel/classfile/AnnotationEntry.java""","1","1","1","1","9","0","6","3","1","1","1","5","5","4","3","5","0","0","0","5","97","14","44","22","18","41","30","38","24","14","2","2","2","1","1","1","7","7","7","5","trivial"
"49876","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=49876 Generics warnings in the copied Apache Jakarta BCEL code. Based on a patch by Gbor. (markt)","Bug 49876  correcting generics related compile warning in org/apache/tomcat/util/bcel/classfile files","correct gener relat compil warn apach tomcat util bcel classfil file","Explanation:

Several files have compile time generics related warnings displayed for org/apache/tomcat/util/bcel/classfile. This patch cleans up several of those warnings.","explan sever file compil time gener relat warn display apach tomcat util bcel classfil patch clean sever warn","""java/org/apache/tomcat/util/bcel/classfile/Attribute.java""","4","1","4","4","21","0","17","4","1","1","2","7","8","7","4","8","0","0","1","7","241","18","143","37","85","87","66","79","32","47","25","5","25","25","2","1","32","12","32","31","trivial"
"49876","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=49876 Generics warnings in the copied Apache Jakarta BCEL code. Based on a patch by Gbor. (markt)","Bug 49876  correcting generics related compile warning in org/apache/tomcat/util/bcel/classfile files","correct gener relat compil warn apach tomcat util bcel classfil file","Explanation:

Several files have compile time generics related warnings displayed for org/apache/tomcat/util/bcel/classfile. This patch cleans up several of those warnings.","explan sever file compil time gener relat warn display apach tomcat util bcel classfil patch clean sever warn","""java/org/apache/tomcat/util/bcel/classfile/JavaClass.java""","3","3","3","1","16","0","12","4","2","1","2","12","12","11","14","12","0","1","0","11","284","28","178","53","108","85","111","148","57","91","13","13","14","3","4","0","37","37","38","14","trivial"
"49876","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=49876 Generics warnings in the copied Apache Jakarta BCEL code. Based on a patch by Gbor. (markt)","Bug 49876  correcting generics related compile warning in org/apache/tomcat/util/bcel/classfile files","correct gener relat compil warn apach tomcat util bcel classfil file","Explanation:

Several files have compile time generics related warnings displayed for org/apache/tomcat/util/bcel/classfile. This patch cleans up several of those warnings.","explan sever file compil time gener relat warn display apach tomcat util bcel classfil patch clean sever warn","""java/org/apache/tomcat/util/bcel/classfile/Unknown.java""","1","1","2","1","13","0","7","5","1","0","2","6","6","6","2","6","1","0","0","5","144","17","64","26","30","63","33","45","21","24","3","3","4","1","1","1","11","11","12","6","trivial"
"49876","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=49876 Generics warnings in the copied Apache Jakarta BCEL code. Based on a patch by Gbor. (markt)","Bug 49876  correcting generics related compile warning in org/apache/tomcat/util/bcel/classfile files","correct gener relat compil warn apach tomcat util bcel classfil file","Explanation:

Several files have compile time generics related warnings displayed for org/apache/tomcat/util/bcel/classfile. This patch cleans up several of those warnings.","explan sever file compil time gener relat warn display apach tomcat util bcel classfil patch clean sever warn","""java/org/apache/tomcat/util/bcel/classfile/Utility.java""","7","3","7","2","33","0","22","12","2","19","5","20","20","1","1","20","0","4","1","15","783","41","478","72","368","296","253","319","80","239","76","23","77","18","4","1","144","77","150","52","trivial"
"49883","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49883 Return a name for use in log messages rather than throwing an UnsupportedOperationException","Bug 49883  java.lang.UnsupportedOperationException: The getName() method should never be called","java lang unsupport oper except unsupportedoperationexcept get name getnam method never call","","","""java/org/apache/catalina/realm/CombinedRealm.java""","3","3","3","1","19","1","12","6","1","0","1","11","11","11","1","11","0","0","5","6","297","39","166","52","88","92","64","108","44","64","7","7","8","3","3","1","37","37","38","17","normal"
"49890","24","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=49890 Detect when the JVM bug occurs and log an error asking for more information.","Bug 49890  Nio Selector issue on linux platform","nio selector issu linux platform","","","""java/org/apache/tomcat/util/net/NioEndpoint.java""","2","2","3","1","10","0","8","1","13","0","8","116","121","121","52","121","0","0","15","106","1615","177","1189","321","833","278","655","977","323","654","26","26","27","8","7","0","338","338","382","139","major"
"49892","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49892 Correct JNDI name for method resource injections Based on a patch by Gurkan Erdogdu","Bug 49892  Wrong JNDI Name for Method Resource Injections","wrong jndi name method resourc inject","Method based JNDI env. injections not worked correctly. Patch is attached. See Java EE 6 specification section, EE. 5.2.5 Annotations and Injections. Patch is provided that solves problem.","method base jndi env inject work correctli patch attach see java ee specif section ee annot inject patch provid solv problem","""java/org/apache/catalina/core/DefaultInstanceManager.java""","3","3","4","1","21","1","17","3","6","2","0","20","20","18","9","20","0","3","7","10","509","47","383","114","242","79","168","246","102","144","20","20","23","6","3","0","73","73","87","30","normal"
"49905","22","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49905 Prevent memory leak when using aysnc session replication","Bug 49905  In cluster, when using DeltaManager memory leak can occur","cluster use delta manag deltamanag memori leak occur","","","""java/org/apache/catalina/tribes/group/interceptors/MessageDispatch15Interceptor.java""","1","1","1","1","3","0","3","0","2","0","0","14","14","14","6","14","0","0","0","14","119","19","76","39","30","25","38","54","32","22","2","2","2","1","1","0","15","15","15","14","normal"
"49909","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49909 Re-enable JSTL. This was a regression in the fix for bz 47950","Bug 49909  jstl 1.2 not support","jstl support","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","6","2","31","3","21","6","4","1","6","87","87","86","36","87","3","11","20","53","3350","531","2007","466","1390","819","918","1391","408","983","43","43","49","28","10","0","484","484","525","209","normal"
"49915","20","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49915 Make error more obvious, particularly when accessed via JConsole, if StandardServer.storeConfig() is called when there is no StoreConfig implementation present.","Bug 49915  [Patch] o.a.c.c.StandardServer swallows error on storeConfig.","patch standard server standardserv swallow error store config storeconfig","When o.a.c.c.StandardServer#storeConfig is called all exceptions were getting swallowed. 

This lead to the impresssion it was working correctly when saved either through the manager application /manager/save or through jconsole.

I've removed the catch throwable block and thrown an exception upon not finding the registerd MBean.","standard server standardserv store config storeconfig call except get swallow lead impresss work correctli save either manag applic manag save jconsol remov catch throwabl block thrown except upon find registerd bean mbean","""java/org/apache/catalina/core/StandardServer.java""","2","2","2","1","16","2","8","5","1","0","3","35","35","35","14","35","0","1","6","28","791","177","373","120","215","244","191","274","112","162","18","18","18","11","3","1","79","79","80","50","normal"
"49924","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49924 When non-primary node changes into a primary node, make sure isPrimarySession is changed to true.","Bug 49924  When non-primary node changes into a primary node, isPrimarySession is not changed to true.","non primari nonprimari node chang primari node is primari session isprimarysess chang true","If BackupManager is used,
when a primary node is switched, 
DeltaSession#isPrimarySession is not changed to true. 

Non-primary node changes into a primary node 
when a primary node is stopped or we get a non-primary session. 

If a primary node is stopped, a primary node is switched. 
In AbstractReplicatedMap, when a primary node is switched, 
MapOwner(BackupManager)#objectMadePrimay is called. 
However, isPrimarySession does not change to true in this method. 
=====BackupManager#objectMadePrimay=====
public void objectMadePrimay(Object key, Object value) {
    if (value!=null && value instanceof DeltaSession) {
        DeltaSession session = (DeltaSession)value;
        synchronized (session) {
            session.access();
            session.endAccess();
        }
    }
}
=====

If we get a non-primary session,  a primary node is switched. 
However, isPrimarySession does not change to true. 
It is only a change of primary node.

I made a patch.
It contains the following. 
isPrimarySession is set to true in BackupManager#objectMadePrimay.
When get() is called in non-primary node, MapOwner#objectMadePrimay is called.


Best regards.","backup manag backupmanag use primari node switch delta session deltasess is primari session isprimarysess chang true non primari nonprimari node chang primari node primari node stop get non primari nonprimari session primari node stop primari node switch abstract replic map abstractreplicatedmap primari node switch map owner mapown backup manag backupmanag object made primay objectmadeprimay call howev is primari session isprimarysess chang true method backup manag backupmanag object made primay objectmadeprimay public void object made primay objectmadeprimay object key object valu valu null valu instanceof delta session deltasess delta session deltasess session delta session deltasess valu synchron session session access session end access endaccess get non primari nonprimari session primari node switch howev is primari session isprimarysess chang true chang primari node made patch contain follow is primari session isprimarysess set true backup manag backupmanag object made primay objectmadeprimay get call non primari nonprimari node map owner mapown object made primay objectmadeprimay call best regard","""java/org/apache/catalina/ha/session/BackupManager.java""","1","1","1","1","6","0","5","1","1","0","2","24","24","24","5","24","0","0","2","22","274","45","161","71","77","71","83","118","63","55","3","3","3","1","1","0","33","33","34","24","normal"
"49924","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49924 When non-primary node changes into a primary node, make sure isPrimarySession is changed to true.","Bug 49924  When non-primary node changes into a primary node, isPrimarySession is not changed to true.","non primari nonprimari node chang primari node is primari session isprimarysess chang true","If BackupManager is used,
when a primary node is switched, 
DeltaSession#isPrimarySession is not changed to true. 

Non-primary node changes into a primary node 
when a primary node is stopped or we get a non-primary session. 

If a primary node is stopped, a primary node is switched. 
In AbstractReplicatedMap, when a primary node is switched, 
MapOwner(BackupManager)#objectMadePrimay is called. 
However, isPrimarySession does not change to true in this method. 
=====BackupManager#objectMadePrimay=====
public void objectMadePrimay(Object key, Object value) {
    if (value!=null && value instanceof DeltaSession) {
        DeltaSession session = (DeltaSession)value;
        synchronized (session) {
            session.access();
            session.endAccess();
        }
    }
}
=====

If we get a non-primary session,  a primary node is switched. 
However, isPrimarySession does not change to true. 
It is only a change of primary node.

I made a patch.
It contains the following. 
isPrimarySession is set to true in BackupManager#objectMadePrimay.
When get() is called in non-primary node, MapOwner#objectMadePrimay is called.


Best regards.","backup manag backupmanag use primari node switch delta session deltasess is primari session isprimarysess chang true non primari nonprimari node chang primari node primari node stop get non primari nonprimari session primari node stop primari node switch abstract replic map abstractreplicatedmap primari node switch map owner mapown backup manag backupmanag object made primay objectmadeprimay call howev is primari session isprimarysess chang true method backup manag backupmanag object made primay objectmadeprimay public void object made primay objectmadeprimay object key object valu valu null valu instanceof delta session deltasess delta session deltasess session delta session deltasess valu synchron session session access session end access endaccess get non primari nonprimari session primari node switch howev is primari session isprimarysess chang true chang primari node made patch contain follow is primari session isprimarysess set true backup manag backupmanag object made primay objectmadeprimay get call non primari nonprimari node map owner mapown object made primay objectmadeprimay call best regard","""java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java""","2","2","3","1","10","0","9","1","4","0","13","109","112","112","30","112","0","1","10","101","1518","176","1108","343","683","257","572","853","308","545","20","20","25","7","5","0","284","275","330","144","normal"
"49937","17","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49937 Use InstanceManager to create AsyncListeners so annotations are processed. Based on a patch by David Jencks.","Bug 49937  Problems with AsyncListener and resource injection","problem async listen asynclisten resourc inject","","","""java/org/apache/catalina/core/AsyncContextImpl.java""","2","2","2","1","11","0","11","0","6","0","2","28","28","28","12","28","1","1","1","25","448","53","368","136","216","27","183","253","112","141","7","7","7","3","3","0","61","61","61","30","normal"
"49952","19","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49952 Allow ServletContainerInitializers to add listeners to a web application. Patch provided by David Jencks.","Bug 49952  ServletContainerInitializer can't actually add listeners","servlet contain initi servletcontaineriniti actual add listen","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","15","1","9","4","2","0","3","283","283","283","115","283","0","13","10","260","5877","1242","2882","785","1831","1757","1369","2086","772","1314","55","55","70","9","5","1","636","636","687","358","normal"
"49953","114","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=49953","Bug 49953  Missing @Override annotations","miss overrid annot","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/interceptor/StatementCache.java""","2","2","2","1","9","0","8","0","2","0","6","19","19","19","7","19","0","0","1","18","258","37","195","70","114","26","101","146","60","86","7","7","8","5","3","0","42","42","45","25","normal"
"49953","114","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=49953","Bug 49953  Missing @Override annotations","miss overrid annot","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/jmx/ConnectionPool.java""","1","1","1","1","3","0","2","0","1","1","7","107","107","106","3","107","0","0","0","107","640","180","345","140","113","115","117","231","140","91","4","4","4","1","2","0","112","112","112","107","normal"
"49956","18","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49956 Handle case when @Resource annotation uses the full JNDI name for a resource. Based on a patch by Gurkan Erdogdu.","Bug 49956  @Resource(name=) Normalization of JNDI Name","resourc name normal jndi name","","","""java/org/apache/catalina/core/DefaultInstanceManager.java""","3","3","4","1","21","1","17","2","6","3","0","21","21","18","9","21","0","3","7","11","523","51","392","117","248","80","174","253","105","148","20","20","23","6","3","0","74","74","89","31","normal"
"49972","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49972 Address potential thread safety issues.","Bug 49972  Double-check idiom. Possible data-race.","doubl check doublecheck idiom possibl data race datarac","","","""java/org/apache/tomcat/util/http/FastHttpDateFormat.java""","3","3","3","1","18","1","14","3","1","6","8","6","6","0","0","6","0","3","0","3","230","50","117","42","68","63","55","80","32","48","4","4","5","3","2","1","20","20","21","8","normal"
"49985","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49985 Make thread safe","Bug 49985  Lazy initialization without any synchronization - data race in AstInteger, AstFloatingPoint, AstString","lazi initi without synchron data race ast integ astinteg ast float point astfloatingpoint ast string aststr","","","""java/org/apache/el/parser/AstFloatingPoint.java""","1","1","1","1","5","0","5","0","1","0","0","4","4","4","1","4","0","0","0","4","61","10","30","14","9","21","11","18","10","8","3","3","3","1","2","1","6","6","6","4","normal"
"49985","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49985 Make thread safe","Bug 49985  Lazy initialization without any synchronization - data race in AstInteger, AstFloatingPoint, AstString","lazi initi without synchron data race ast integ astinteg ast float point astfloatingpoint ast string aststr","","","""java/org/apache/el/parser/AstInteger.java""","1","1","1","1","5","0","5","0","1","0","0","4","4","4","1","4","0","0","1","3","61","10","30","14","9","21","11","18","10","8","3","3","3","1","2","1","6","6","6","4","normal"
"49985","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49985 Make thread safe","Bug 49985  Lazy initialization without any synchronization - data race in AstInteger, AstFloatingPoint, AstString","lazi initi without synchron data race ast integ astinteg ast float point astfloatingpoint ast string aststr","","","""java/org/apache/el/parser/AstString.java""","2","2","2","1","7","0","7","0","1","0","0","5","5","5","1","5","0","0","0","5","77","10","46","19","20","21","21","32","15","17","5","5","8","1","3","0","10","10","13","5","normal"
"49986","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49986 Thread safety issues in JSP reload process. (timw)","Bug 49986  Double-check locking. Possible data-race in JspServletWrapper","doubl check doublecheck lock possibl data race datarac jsp servlet wrapper jspservletwrapp","","","""java/org/apache/jasper/servlet/JspServletWrapper.java""","3","3","4","1","20","1","15","3","1","0","0","20","20","20","16","20","0","0","1","19","534","61","361","89","216","115","157","232","78","154","31","31","33","9","3","0","77","77","82","36","normal"
"49987","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49987 Fix thread safety issue with population of servlet context initialization parameters.","Bug 49987  Data race in ApplicationContext","data race applic context applicationcontext","","","""java/org/apache/catalina/core/ApplicationContext.java""","2","2","3","1","18","2","11","5","2","2","5","67","67","65","14","67","1","7","5","54","1603","309","881","269","556","413","397","581","228","353","12","12","13","9","3","0","195","195","215","133","minor"
"49987","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49987 Fix thread safety issue with population of servlet context initialization parameters.","Bug 49987  Data race in ApplicationContext","data race applic context applicationcontext","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","15","1","9","4","2","0","3","283","283","283","115","283","0","13","10","260","5884","1242","2888","785","1835","1758","1371","2092","774","1318","55","55","70","9","5","1","638","638","689","358","minor"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/Authenticator.java""","0","0","0","0","0","0","0","0","1","0","0","0","2","2","0","2","0","0","0","2","73","10","13","12","0","50","8","9","9","0","0","0","0","0","0","4","0","0","0","0","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/Realm.java""","0","0","0","0","0","0","0","0","1","0","0","0","13","13","0","13","0","0","0","13","191","35","34","33","0","122","21","22","22","0","0","0","0","0","0","4","0","0","0","0","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/authenticator/AuthenticatorBase.java""","3","3","3","1","22","2","12","7","1","0","8","27","28","28","11","28","0","0","7","21","882","169","392","124","241","323","191","282","109","173","29","29","33","8","5","1","90","90","99","40","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/authenticator/BasicAuthenticator.java""","6","6","6","3","53","6","32","14","1","0","2","2","2","2","0","2","0","0","0","2","180","36","85","35","52","59","47","61","27","34","12","12","12","6","3","1","13","13","13","7","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/authenticator/BasicAuthenticator.java""","6","6","6","3","53","6","32","14","1","0","2","2","2","2","0","2","0","0","0","2","180","36","85","35","52","59","47","61","27","34","12","12","12","6","3","1","13","13","13","7","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/authenticator/DigestAuthenticator.java""","4","4","4","2","35","3","18","13","1","3","4","9","9","6","1","9","0","0","6","3","425","79","188","82","125","158","100","142","63","79","15","15","19","7","2","1","38","38","44","25","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/authenticator/DigestAuthenticator.java""","4","4","4","2","35","3","18","13","1","3","4","9","9","6","1","9","0","0","6","3","425","79","188","82","125","158","100","142","63","79","15","15","19","7","2","1","38","38","44","25","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/authenticator/FormAuthenticator.java""","6","6","7","2","46","4","30","11","1","0","2","10","10","10","1","10","0","0","6","4","575","88","339","106","242","148","180","247","85","162","32","32","34","14","4","0","66","66","71","27","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/authenticator/FormAuthenticator.java""","6","6","7","2","46","4","30","11","1","0","2","10","10","10","1","10","0","0","6","4","575","88","339","106","242","148","180","247","85","162","32","32","34","14","4","0","66","66","71","27","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/authenticator/NonLoginAuthenticator.java""","1","1","1","1","20","3","5","12","1","0","1","2","2","2","0","2","0","0","0","2","106","30","23","16","5","53","9","13","9","4","2","2","2","1","1","2","3","3","3","2","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/authenticator/NonLoginAuthenticator.java""","1","1","1","1","20","3","5","12","1","0","1","2","2","2","0","2","0","0","0","2","106","30","23","16","5","53","9","13","9","4","2","2","2","1","1","2","3","3","3","2","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/authenticator/SSLAuthenticator.java""","5","5","6","2","50","4","22","23","1","0","1","2","2","2","0","2","0","0","0","2","164","29","61","24","35","74","29","41","16","25","10","10","12","4","2","1","11","11","13","5","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/authenticator/SSLAuthenticator.java""","5","5","6","2","50","4","22","23","1","0","1","2","2","2","0","2","0","0","0","2","164","29","61","24","35","74","29","41","16","25","10","10","12","4","2","1","11","11","13","5","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","14","1","8","4","1","2","5","153","153","151","52","153","1","1","14","137","3090","594","1569","484","947","936","733","1101","402","699","22","22","24","11","5","1","370","370","414","225","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/realm/RealmBase.java""","4","4","4","2","24","2","16","5","2","3","8","43","46","43","10","46","1","2","12","31","1318","232","760","196","481","329","361","553","183","370","53","53","63","21","6","0","187","187","211","92","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/realm/UserDatabaseRealm.java""","2","2","2","1","18","2","10","5","1","0","2","9","9","9","2","9","0","0","5","4","286","63","124","52","65","99","59","85","42","43","10","10","10","8","2","1","25","25","25","16","normal"
"50016","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50016 Re-factor isUserInRole() and login() / logout() methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks.","Bug 50016  bad division of responsibility around isUserInRole and new Request login and logout methods","bad divis respons around is user in role isuserinrol new request login logout method","","","""java/org/apache/catalina/realm/UserDatabaseRealm.java""","2","2","2","1","18","2","10","5","1","0","2","9","9","9","2","9","0","0","5","4","286","63","124","52","65","99","59","85","42","43","10","10","10","8","2","1","25","25","25","16","normal"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/el/ValueReference.java""","1","1","1","1","3","0","3","0","1","0","1","3","3","3","2","3","0","0","0","3","44","8","17","9","5","19","9","13","9","4","1","1","1","1","0","1","3","3","3","3","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/AsyncEvent.java""","1","1","1","1","4","0","4","0","1","0","0","8","8","8","4","8","0","0","0","8","68","9","39","16","14","20","19","28","14","14","1","1","1","1","0","1","8","8","8","8","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/HttpConstraintElement.java""","1","1","1","1","6","0","4","2","1","0","2","7","7","7","3","7","0","0","0","7","92","12","42","20","18","38","19","28","17","11","2","2","4","1","1","1","8","8","10","7","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/HttpMethodConstraintElement.java""","1","1","2","1","7","0","7","0","1","0","2","3","3","3","1","3","0","0","0","3","57","7","29","11","14","21","11","17","9","8","2","2","3","1","1","1","5","5","7","3","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/MultipartConfigElement.java""","1","1","1","1","4","0","4","0","1","0","0","7","7","7","4","7","0","0","0","7","72","10","40","15","19","22","19","29","14","15","2","2","2","1","1","1","9","9","9","7","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/ServletContextAttributeEvent.java""","1","1","1","1","8","0","4","4","1","0","0","3","3","3","2","3","0","0","0","3","57","4","17","8","5","36","8","12","7","5","1","1","1","1","0","2","3","3","3","3","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/ServletRequestAttributeEvent.java""","1","1","1","1","13","0","4","9","1","0","0","3","3","3","2","3","0","0","0","3","71","4","17","8","5","50","8","12","7","5","1","1","1","1","0","3","3","3","3","3","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/ServletRequestEvent.java""","1","1","1","1","8","0","3","5","1","0","0","3","3","3","1","3","0","0","0","3","56","4","14","6","4","38","6","10","6","4","1","1","1","1","0","3","3","3","3","3","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/ServletSecurityElement.java""","1","1","1","1","10","0","7","3","1","0","0","8","8","8","1","8","0","1","0","7","131","14","70","28","33","47","29","44","24","20","4","4","4","1","2","1","13","13","13","8","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/UnavailableException.java""","1","1","1","1","16","0","5","10","1","0","0","7","7","7","3","7","0","0","0","7","177","13","44","15","21","123","21","31","12","19","2","2","2","1","1","3","10","10","10","7","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/http/HttpSessionBindingEvent.java""","1","1","1","1","12","0","3","8","1","0","0","5","5","5","2","5","0","0","0","5","112","11","25","11","8","76","11","17","9","8","1","1","1","1","0","3","5","5","5","5","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/jsp/ErrorData.java""","1","1","1","1","10","0","3","6","1","0","0","5","5","5","4","5","0","0","0","5","90","7","26","12","8","57","13","19","11","8","1","1","1","1","0","2","5","5","5","5","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/jsp/tagext/BodyContent.java""","1","1","1","1","10","0","4","6","1","0","0","4","7","7","1","7","0","0","1","6","125","12","29","15","8","84","15","21","14","7","2","2","2","1","1","3","5","5","5","4","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/jsp/tagext/FunctionInfo.java""","1","1","1","1","9","0","3","5","1","0","0","4","4","4","3","4","0","0","0","4","79","11","20","9","6","48","10","15","9","6","1","1","1","1","0","2","4","4","4","4","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/jsp/tagext/TagAttributeInfo.java""","1","1","1","1","10","0","4","5","1","1","1","15","15","14","10","15","0","0","0","15","236","34","89","35","38","114","49","67","30","37","3","3","3","3","2","1","17","17","17","17","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/jsp/tagext/TagData.java""","1","1","1","1","14","0","5","8","1","0","1","7","7","7","1","7","0","0","0","7","153","21","41","14","17","92","17","29","14","15","4","4","4","1","2","2","11","11","11","7","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/jsp/tagext/TagExtraInfo.java""","1","1","1","1","12","0","3","8","1","0","1","6","6","6","1","6","0","0","0","6","145","16","27","11","9","102","10","18","11","7","2","2","2","1","1","4","7","7","7","6","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/jsp/tagext/TagFileInfo.java""","1","1","1","1","12","0","3","8","1","0","0","4","4","4","3","4","0","0","0","4","86","8","20","9","6","58","10","15","9","6","1","1","1","1","0","3","4","4","4","4","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/jsp/tagext/TagVariableInfo.java""","1","1","1","1","11","0","3","7","1","0","0","6","6","6","5","6","0","0","0","6","109","8","31","14","10","75","16","23","13","10","1","1","1","1","0","2","6","6","6","6","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/jsp/tagext/TagVariableInfo.java""","1","1","1","1","11","0","3","7","1","0","0","6","6","6","5","6","0","0","0","6","109","8","31","14","10","75","16","23","13","10","1","1","1","1","0","2","6","6","6","6","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/jsp/tagext/ValidationMessage.java""","1","1","1","1","10","0","3","7","1","0","0","3","3","3","2","3","0","0","0","3","77","5","15","7","4","57","7","11","7","4","1","1","1","1","0","4","3","3","3","3","trivial"
"50017","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50017 Code clean-up. No functional change. Patch provided by sebb","Bug 50017  Make private immutable fields final","make privat immut field final","","","""java/javax/servlet/jsp/tagext/VariableInfo.java""","1","1","1","1","11","0","3","7","1","0","3","5","5","5","4","5","0","0","0","5","257","11","29","15","11","217","16","22","14","8","1","1","1","1","0","7","5","5","5","5","trivial"
"50018","1","Tim Whittington","https://issues.apache.org/bugzilla/show_bug.cgi?id=50018 Minor javadoc corrections in Jasper.","Bug 50018  Javadoc corrections","javadoc correct","","","""java/org/apache/jasper/compiler/ParserController.java""","4","4","5","2","33","2","21","9","1","0","1","14","14","14","12","14","0","7","0","7","610","60","332","96","214","218","154","218","75","143","17","17","21","9","3","1","64","64","80","34","minor"
"50018","1","Tim Whittington","https://issues.apache.org/bugzilla/show_bug.cgi?id=50018 Minor javadoc corrections in Jasper.","Bug 50018  Javadoc corrections","javadoc correct","","","""java/org/apache/jasper/compiler/TagFileProcessor.java""","3","3","4","1","26","2","19","4","4","1","8","19","19","18","22","19","6","4","0","9","674","99","461","187","321","120","210","286","130","156","18","18","26","4","3","0","72","72","92","22","minor"
"50021","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50021 Don't reference ExceptionUtisl from Bootstrap - it won't be visible at startup.","Bug 50021  ExceptionUtils class missing from bootstrap.jar","except util exceptionutil class miss bootstrap jar","o.a.c.startup.Bootstrap uses o.a.jasper.util.ExceptionUtils, but this class is not placed in bootstrap.jar, causing rather nasty failures if anything goes wrong during initial bootstrapping.

This should be a fairly simple matter of updating build.xml to include it, but I wasn't sure whether including Jasper classes in the bootstrap was the done thing.
There's an o.a.tomcat.util.ExceptionUtils that is identical, but that too looks like the wrong thing to grab.","startup bootstrap us jasper util except util exceptionutil class place bootstrap jar caus rather nasti failur anyth go wrong initi bootstrap fairli simpl matter updat build xml includ wasn sure whether includ jasper class bootstrap done thing tomcat util except util exceptionutil ident look like wrong thing grab","""java/org/apache/catalina/startup/Bootstrap.java""","2","2","2","1","19","2","14","3","1","3","4","19","19","16","4","19","0","5","0","14","505","108","298","103","197","99","158","210","83","127","12","12","14","4","3","0","51","51","55","24","critical"
"50025","96","Filip Hanik","add in ability to pass through credentials https://issues.apache.org/bugzilla/show_bug.cgi?id=50025","Bug 50025  getConnection method in class DataSourceProxy is ignoring credentials","get connect getconnect method class data sourc proxi datasourceproxi ignor credenti","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","4","4","4","1","22","0","15","7","3","2","2","43","43","41","19","43","1","1","16","25","1154","93","701","146","478","394","340","521","148","373","18","18","18","8","6","1","179","179","194","83","critical"
"50025","96","Filip Hanik","add in ability to pass through credentials https://issues.apache.org/bugzilla/show_bug.cgi?id=50025","Bug 50025  getConnection method in class DataSourceProxy is ignoring credentials","get connect getconnect method class data sourc proxi datasourceproxi ignor credenti","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","4","4","4","1","22","0","15","7","3","2","2","43","43","41","19","43","1","1","16","25","1154","93","701","146","478","394","340","521","148","373","18","18","18","8","6","1","179","179","194","83","critical"
"50025","96","Filip Hanik","add in ability to pass through credentials https://issues.apache.org/bugzilla/show_bug.cgi?id=50025","Bug 50025  getConnection method in class DataSourceProxy is ignoring credentials","get connect getconnect method class data sourc proxi datasourceproxi ignor credenti","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/DataSourceFactory.java""","11","11","12","1","59","8","46","5","1","2","45","6","6","4","0","6","0","0","1","5","529","78","380","125","288","71","196","266","83","183","51","51","51","3","3","0","70","70","72","8","critical"
"50025","96","Filip Hanik","add in ability to pass through credentials https://issues.apache.org/bugzilla/show_bug.cgi?id=50025","Bug 50025  getConnection method in class DataSourceProxy is ignoring credentials","get connect getconnect method class data sourc proxi datasourceproxi ignor credenti","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/DataSourceProxy.java""","1","1","1","1","6","0","3","2","1","0","1","120","120","120","2","120","0","0","0","120","1064","143","544","229","189","377","166","310","143","167","4","4","4","1","3","1","143","143","143","120","critical"
"50025","96","Filip Hanik","add in ability to pass through credentials https://issues.apache.org/bugzilla/show_bug.cgi?id=50025","Bug 50025  getConnection method in class DataSourceProxy is ignoring credentials","get connect getconnect method class data sourc proxi datasourceproxi ignor credenti","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/PoolConfiguration.java""","0","0","0","0","0","0","0","0","1","0","1","0","88","88","0","88","0","0","0","88","774","100","94","93","1","580","92","93","93","0","0","0","0","0","0","6","0","0","0","0","critical"
"50025","96","Filip Hanik","add in ability to pass through credentials https://issues.apache.org/bugzilla/show_bug.cgi?id=50025","Bug 50025  getConnection method in class DataSourceProxy is ignoring credentials","get connect getconnect method class data sourc proxi datasourceproxi ignor credenti","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/PoolProperties.java""","1","1","1","1","6","0","4","2","3","2","2","110","110","108","48","110","0","0","0","110","1035","121","628","283","268","286","253","405","198","207","6","6","10","5","5","0","152","152","163","133","critical"
"50025","96","Filip Hanik","add in ability to pass through credentials https://issues.apache.org/bugzilla/show_bug.cgi?id=50025","Bug 50025  getConnection method in class DataSourceProxy is ignoring credentials","get connect getconnect method class data sourc proxi datasourceproxi ignor credenti","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/PooledConnection.java""","2","2","3","1","13","0","8","4","1","0","5","35","35","35","14","35","0","2","2","31","614","63","323","78","199","236","142","232","77","155","11","11","14","6","3","1","91","91","108","45","critical"
"50025","96","Filip Hanik","add in ability to pass through credentials https://issues.apache.org/bugzilla/show_bug.cgi?id=50025","Bug 50025  getConnection method in class DataSourceProxy is ignoring credentials","get connect getconnect method class data sourc proxi datasourceproxi ignor credenti","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/PooledConnection.java""","2","2","3","1","13","0","8","4","1","0","5","35","35","35","14","35","0","2","2","31","614","63","323","78","199","236","142","232","77","155","11","11","14","6","3","1","91","91","108","45","critical"
"50025","96","Filip Hanik","add in ability to pass through credentials https://issues.apache.org/bugzilla/show_bug.cgi?id=50025","Bug 50025  getConnection method in class DataSourceProxy is ignoring credentials","get connect getconnect method class data sourc proxi datasourceproxi ignor credenti","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/jmx/ConnectionPool.java""","1","1","1","1","3","0","3","0","1","1","7","105","105","104","3","105","0","0","0","105","626","147","371","169","112","108","116","228","138","90","4","4","4","1","2","0","110","110","110","105","critical"
"50025","96","Filip Hanik","add in ability to pass through credentials https://issues.apache.org/bugzilla/show_bug.cgi?id=50025","Bug 50025  getConnection method in class DataSourceProxy is ignoring credentials","get connect getconnect method class data sourc proxi datasourceproxi ignor credenti","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/jmx/ConnectionPool.java""","1","1","1","1","3","0","3","0","1","1","7","105","105","104","3","105","0","0","0","105","626","147","371","169","112","108","116","228","138","90","4","4","4","1","2","0","110","110","110","105","critical"
"50025","96","Filip Hanik","add in ability to pass through credentials https://issues.apache.org/bugzilla/show_bug.cgi?id=50025","Bug 50025  getConnection method in class DataSourceProxy is ignoring credentials","get connect getconnect method class data sourc proxi datasourceproxi ignor credenti","","","""modules/jdbc-pool/test/org/apache/tomcat/jdbc/test/driver/Connection.java""","1","1","1","1","2","0","2","0","1","0","0","49","49","49","0","49","0","0","0","49","223","54","153","67","36","16","53","103","67","36","1","1","1","1","0","0","49","49","49","49","critical"
"50025","96","Filip Hanik","add in ability to pass through credentials https://issues.apache.org/bugzilla/show_bug.cgi?id=50025","Bug 50025  getConnection method in class DataSourceProxy is ignoring credentials","get connect getconnect method class data sourc proxi datasourceproxi ignor credenti","","","""modules/jdbc-pool/test/org/apache/tomcat/jdbc/test/driver/Driver.java""","1","1","1","1","3","0","3","0","1","1","3","8","8","7","0","8","0","0","0","8","72","11","45","20","17","16","22","32","19","13","1","1","1","1","0","0","8","8","8","8","critical"
"50027","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50027 Avoid NPE on start when a Context is defined in server.xml with one or more JNDI resources.","Bug 50027  NullPointerException if context.xml is present with <Resource>","null pointer except nullpointerexcept context xml present resourc","If you deploy a WAR with contex.xml in META-INF and the context.xml has <Resource> tag, Tomcat don t boot and gives this error:

java.lang.NullPointerException
	at org.apache.catalina.core.StandardContext.getObjectKeyPropertiesNameOnly(StandardContext.java:5570)
	at org.apache.catalina.core.StandardContext.setNamingResources(StandardContext.java:1757)
	at org.apache.catalina.core.StandardContext.getNamingResources(StandardContext.java:1735)
	at org.apache.catalina.startup.SetNextNamingRule.end(SetNextNamingRule.java:99)
	at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1058)
	at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:601)
	at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:180)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1343)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2755)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
	at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
	at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
	at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
	at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1544)
	at org.apache.catalina.startup.Catalina.load(Catalina.java:524)
	at org.apache.catalina.startup.Catalina.load(Catalina.java:560)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:260)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
29/09/2010 13:50:37 org.apache.catalina.startup.Catalina load
AVISO: Catalina.start using conf/server.xml: 
java.lang.NullPointerException
	at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2688)
	at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2714)
	at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1061)
	at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:601)
	at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:180)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1343)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2755)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
	at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
	at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
	at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
	at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1544)
	at org.apache.catalina.startup.Catalina.load(Catalina.java:524)
	at org.apache.catalina.startup.Catalina.load(Catalina.java:560)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:260)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.NullPointerException
	at org.apache.catalina.core.StandardContext.getObjectKeyPropertiesNameOnly(StandardContext.java:5570)
	at org.apache.catalina.core.StandardContext.setNamingResources(StandardContext.java:1757)
	at org.apache.catalina.core.StandardContext.getNamingResources(StandardContext.java:1735)
	at org.apache.catalina.startup.SetNextNamingRule.end(SetNextNamingRule.java:99)
	at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1058)
	... 20 more
29/09/2010 13:50:37 org.apache.tomcat.util.digester.SetPropertiesRule begin
AVISO: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:bestforkprime' did not find a matching property.
29/09/2010 13:50:37 org.apache.tomcat.util.digester.Digester endElement
GRAVE: End event threw exception
java.lang.NullPointerException
	at org.apache.catalina.core.StandardContext.getObjectKeyPropertiesNameOnly(StandardContext.java:5570)
	at org.apache.catalina.core.StandardContext.setNamingResources(StandardContext.java:1757)
	at org.apache.catalina.core.StandardContext.getNamingResources(StandardContext.java:1735)
	at org.apache.catalina.startup.SetNextNamingRule.end(SetNextNamingRule.java:99)
	at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1058)
	at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:601)
	at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:180)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1343)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2755)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
	at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
	at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
	at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
	at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1544)
	at org.apache.catalina.startup.Catalina.load(Catalina.java:524)
	at org.apache.catalina.startup.Catalina.start(Catalina.java:573)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:415)
29/09/2010 13:50:37 org.apache.catalina.startup.Catalina load
AVISO: Catalina.start using conf/server.xml: 
java.lang.NullPointerException
	at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2688)
	at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2714)
	at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1061)
	at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:601)
	at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:180)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1343)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2755)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
	at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
	at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
	at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
	at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1544)
	at org.apache.catalina.startup.Catalina.load(Catalina.java:524)
	at org.apache.catalina.startup.Catalina.start(Catalina.java:573)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:415)
Caused by: java.lang.NullPointerException
	at org.apache.catalina.core.StandardContext.getObjectKeyPropertiesNameOnly(StandardContext.java:5570)
	at org.apache.catalina.core.StandardContext.setNamingResources(StandardContext.java:1757)
	at org.apache.catalina.core.StandardContext.getNamingResources(StandardContext.java:1735)
	at org.apache.catalina.startup.SetNextNamingRule.end(SetNextNamingRule.java:99)
	at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1058)
	... 20 more
29/09/2010 13:50:37 org.apache.catalina.startup.Catalina start
GRAVE: Cannot start server. Server instance is not configured.

Here is my contex.xml OBS: some values were replaced with XXXX 


<?xml version=""1.0"" encoding=""UTF-8""?>
<Context privileged=""true"" reloadable=""true"">

	<WatchedResource>WEB-INF/web.xml</WatchedResource>
	<WatchedResource>META-INF/context.xml</WatchedResource>
	
	<Resource name=""jdbc/bestfork"" auth=""Container""
		type=""com.mchange.v2.c3p0.ComboPooledDataSource"" factory=""org.apache.naming.factory.BeanFactory""
		user=""xxx"" password=""xxxx"" driverClass=""org.postgresql.Driver""
		jdbcUrl=""jdbc:postgresql://localhost:5432/xxxxx"" minPoolSize=""5""
		maxPoolSize=""30"" acquireIncrement=""5"" idleConnectionTestPeriod=""100""
		maxIdleTime=""30""/>

	<Resource name=""mail/Session"" auth=""Container"" type=""javax.mail.Session""
		mail.smtp.host=""xxxx"" mail.smtp.auth=""true""
		username=""xxx"" password=""xxx""
		mail.user=""xxxx"" mail.password=""xxxx""
		mail.smtp.port=""587"" mail.transport.protocol=""smtp"" mail.debug=""true"" />

	<Realm className=""org.apache.catalina.realm.JDBCRealm""
		driverName=""org.postgresql.Driver"" connectionURL=""jdbc:postgresql://localhost:5432/xxxx""
		connectionName=""xxxx"" connectionPassword=""xxxx"" userTable=""usuario""
		userNameCol=""usuario_cpf"" userCredCol=""usuario_senha"" userRoleTable=""usuario_papel""
		roleNameCol=""papel_nome"" digest=""MD5"" />
				

</Context>","deploy contex xml meta inf context xml resourc tag tomcat boot give error java lang null pointer except nullpointerexcept apach catalina core standard context standardcontext get object key properti name onli getobjectkeypropertiesnameonli standard context standardcontext java apach catalina core standard context standardcontext set name resourc setnamingresourc standard context standardcontext java apach catalina core standard context standardcontext get name resourc getnamingresourc standard context standardcontext java apach catalina startup set next name rule setnextnamingrul set next name rule setnextnamingrul java apach tomcat util digest digest end element endel digest java sun apach xerc intern parser abstract parser abstractsaxpars end element endel abstract parser abstractsaxpars java sun apach xerc intern parser abstract document parser abstractxmldocumentpars empti element emptyel abstract document parser abstractxmldocumentpars java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl scan start element scanstartel document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl fragment content driver fragmentcontentdriv next document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern impl document scanner impl xmldocumentscannerimpl next document scanner impl xmldocumentscannerimpl java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl scan document scandocu document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern parser l11 configur xml11configur pars l11 configur xml11configur java sun apach xerc intern parser l11 configur xml11configur pars l11 configur xml11configur java sun apach xerc intern parser parser xmlparser pars parser xmlparser java sun apach xerc intern parser abstract parser abstractsaxpars pars abstract parser abstractsaxpars java sun apach xerc intern jaxp parser impl saxparserimpl parser jaxpsaxpars pars parser impl saxparserimpl java apach tomcat util digest digest pars digest java apach catalina startup catalina load catalina java apach catalina startup catalina load catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap load bootstrap java apach catalina startup bootstrap main bootstrap java apach catalina startup catalina load aviso catalina start use conf server xml java lang null pointer except nullpointerexcept apach tomcat util digest digest creat except createsaxexcept digest java apach tomcat util digest digest creat except createsaxexcept digest java apach tomcat util digest digest end element endel digest java sun apach xerc intern parser abstract parser abstractsaxpars end element endel abstract parser abstractsaxpars java sun apach xerc intern parser abstract document parser abstractxmldocumentpars empti element emptyel abstract document parser abstractxmldocumentpars java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl scan start element scanstartel document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl fragment content driver fragmentcontentdriv next document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern impl document scanner impl xmldocumentscannerimpl next document scanner impl xmldocumentscannerimpl java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl scan document scandocu document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern parser l11 configur xml11configur pars l11 configur xml11configur java sun apach xerc intern parser l11 configur xml11configur pars l11 configur xml11configur java sun apach xerc intern parser parser xmlparser pars parser xmlparser java sun apach xerc intern parser abstract parser abstractsaxpars pars abstract parser abstractsaxpars java sun apach xerc intern jaxp parser impl saxparserimpl parser jaxpsaxpars pars parser impl saxparserimpl java apach tomcat util digest digest pars digest java apach catalina startup catalina load catalina java apach catalina startup catalina load catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap load bootstrap java apach catalina startup bootstrap main bootstrap java caus java lang null pointer except nullpointerexcept apach catalina core standard context standardcontext get object key properti name onli getobjectkeypropertiesnameonli standard context standardcontext java apach catalina core standard context standardcontext set name resourc setnamingresourc standard context standardcontext java apach catalina core standard context standardcontext get name resourc getnamingresourc standard context standardcontext java apach catalina startup set next name rule setnextnamingrul set next name rule setnextnamingrul java apach tomcat util digest digest end element endel digest java apach tomcat util digest set properti rule setpropertiesrul begin aviso set properti rule setpropertiesrul server servic engin host context set properti sourc jst jee server bestforkprim find match properti apach tomcat util digest digest end element endel grave event threw except java lang null pointer except nullpointerexcept apach catalina core standard context standardcontext get object key properti name onli getobjectkeypropertiesnameonli standard context standardcontext java apach catalina core standard context standardcontext set name resourc setnamingresourc standard context standardcontext java apach catalina core standard context standardcontext get name resourc getnamingresourc standard context standardcontext java apach catalina startup set next name rule setnextnamingrul set next name rule setnextnamingrul java apach tomcat util digest digest end element endel digest java sun apach xerc intern parser abstract parser abstractsaxpars end element endel abstract parser abstractsaxpars java sun apach xerc intern parser abstract document parser abstractxmldocumentpars empti element emptyel abstract document parser abstractxmldocumentpars java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl scan start element scanstartel document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl fragment content driver fragmentcontentdriv next document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern impl document scanner impl xmldocumentscannerimpl next document scanner impl xmldocumentscannerimpl java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl scan document scandocu document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern parser l11 configur xml11configur pars l11 configur xml11configur java sun apach xerc intern parser l11 configur xml11configur pars l11 configur xml11configur java sun apach xerc intern parser parser xmlparser pars parser xmlparser java sun apach xerc intern parser abstract parser abstractsaxpars pars abstract parser abstractsaxpars java sun apach xerc intern jaxp parser impl saxparserimpl parser jaxpsaxpars pars parser impl saxparserimpl java apach tomcat util digest digest pars digest java apach catalina startup catalina load catalina java apach catalina startup catalina start catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap start bootstrap java apach catalina startup bootstrap main bootstrap java apach catalina startup catalina load aviso catalina start use conf server xml java lang null pointer except nullpointerexcept apach tomcat util digest digest creat except createsaxexcept digest java apach tomcat util digest digest creat except createsaxexcept digest java apach tomcat util digest digest end element endel digest java sun apach xerc intern parser abstract parser abstractsaxpars end element endel abstract parser abstractsaxpars java sun apach xerc intern parser abstract document parser abstractxmldocumentpars empti element emptyel abstract document parser abstractxmldocumentpars java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl scan start element scanstartel document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl fragment content driver fragmentcontentdriv next document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern impl document scanner impl xmldocumentscannerimpl next document scanner impl xmldocumentscannerimpl java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl scan document scandocu document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern parser l11 configur xml11configur pars l11 configur xml11configur java sun apach xerc intern parser l11 configur xml11configur pars l11 configur xml11configur java sun apach xerc intern parser parser xmlparser pars parser xmlparser java sun apach xerc intern parser abstract parser abstractsaxpars pars abstract parser abstractsaxpars java sun apach xerc intern jaxp parser impl saxparserimpl parser jaxpsaxpars pars parser impl saxparserimpl java apach tomcat util digest digest pars digest java apach catalina startup catalina load catalina java apach catalina startup catalina start catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap start bootstrap java apach catalina startup bootstrap main bootstrap java caus java lang null pointer except nullpointerexcept apach catalina core standard context standardcontext get object key properti name onli getobjectkeypropertiesnameonli standard context standardcontext java apach catalina core standard context standardcontext set name resourc setnamingresourc standard context standardcontext java apach catalina core standard context standardcontext get name resourc getnamingresourc standard context standardcontext java apach catalina startup set next name rule setnextnamingrul set next name rule setnextnamingrul java apach tomcat util digest digest end element endel digest java apach catalina startup catalina start grave cannot start server server instanc configur contex xml ob valu replac xxxx xml version encod utf context privileg true reload true watch resourc watchedresourc web inf web xml watch resourc watchedresourc watch resourc watchedresourc meta inf context xml watch resourc watchedresourc resourc name jdbc bestfork auth contain type mchang v2 c3p0 combo pool data sourc combopooleddatasourc factori apach name factori bean factori beanfactori user xxx password xxxx driver class driverclass postgresql driver jdbc url jdbcurl jdbc postgresql localhost xxxxx min pool size minpools max pool size maxpools acquir increment acquireincr idl connect test period idleconnectiontestperiod max idl time maxidletim resourc name mail session auth contain type javax mail session mail smtp host xxxx mail smtp auth true usernam xxx password xxx mail user xxxx mail password xxxx mail smtp port mail transport protocol smtp mail debug true realm class name classnam apach catalina realm realm jdbcrealm driver name drivernam postgresql driver connect connectionurl jdbc postgresql localhost xxxx connect name connectionnam xxxx connect password connectionpassword xxxx user tabl usert usuario user name col usernamecol usuario cpf user cred col usercredcol usuario senha user role tabl userrolet usuario papel role name col rolenamecol papel nome digest d5 md5 context","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","2","0","3","287","287","287","115","287","0","14","10","263","6003","1259","2959","808","1875","1789","1401","2143","798","1345","55","55","70","9","5","1","655","655","706","367","regression"
"50054","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50054 Correctly handle the setting of minSpareThreads in AJP connector. Other attributes (acceptorThreadCount etc.) are correctly set by this fix.","Bug 50054  When the AJP connector is used, minSpareThreads cannot be used.","ajp connector use min spare thread minsparethread cannot use","I found following warnning messages. 

==
Oct 7, 2010 2:25:27 PM org.apache.catalina.startup.SetAllPropertiesRule begin
WARNING: [SetAllPropertiesRule]{Server/Service/Connector} Setting property 'minSpareThreads' to '31' did not find a matching property.
==

The AJP connector's configs are the following. 
<Connector port=""8009"" protocol=""AJP/1.3"" redirectPort=""8443"" minSpareThreads=""100""/>

When I used the Http connector, minSpareThreads was able to be used. 

org.apache.coyote.ajp.AjpProtocol doesn't set the minSpareThreads to org.apache.tomcat.util.net.JIoEndpoint.

I made a patch.
This patch was made based on AbstractHttp11Protocol. 

Best regards.","found follow warn messag oct pm apach catalina startup set all properti rule setallpropertiesrul begin warn set all properti rule setallpropertiesrul server servic connector set properti min spare thread minsparethread find match properti ajp connector config follow connector port protocol ajp redirect port redirectport min spare thread minsparethread use http connector min spare thread minsparethread abl use apach coyot ajp ajp protocol ajpprotocol doesn set min spare thread minsparethread apach tomcat util net io endpoint jioendpoint made patch patch made base abstract http11 protocol abstracthttp11protocol best regard","""java/org/apache/coyote/ajp/AjpAprProtocol.java""","1","1","1","1","5","0","5","0","3","0","3","62","62","62","19","62","0","0","3","59","584","96","393","148","234","95","196","303","127","176","8","8","9","4","3","0","106","106","109","65","normal"
"50054","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50054 Correctly handle the setting of minSpareThreads in AJP connector. Other attributes (acceptorThreadCount etc.) are correctly set by this fix.","Bug 50054  When the AJP connector is used, minSpareThreads cannot be used.","ajp connector use min spare thread minsparethread cannot use","I found following warnning messages. 

==
Oct 7, 2010 2:25:27 PM org.apache.catalina.startup.SetAllPropertiesRule begin
WARNING: [SetAllPropertiesRule]{Server/Service/Connector} Setting property 'minSpareThreads' to '31' did not find a matching property.
==

The AJP connector's configs are the following. 
<Connector port=""8009"" protocol=""AJP/1.3"" redirectPort=""8443"" minSpareThreads=""100""/>

When I used the Http connector, minSpareThreads was able to be used. 

org.apache.coyote.ajp.AjpProtocol doesn't set the minSpareThreads to org.apache.tomcat.util.net.JIoEndpoint.

I made a patch.
This patch was made based on AbstractHttp11Protocol. 

Best regards.","found follow warn messag oct pm apach catalina startup set all properti rule setallpropertiesrul begin warn set all properti rule setallpropertiesrul server servic connector set properti min spare thread minsparethread find match properti ajp connector config follow connector port protocol ajp redirect port redirectport min spare thread minsparethread use http connector min spare thread minsparethread abl use apach coyot ajp ajp protocol ajpprotocol doesn set min spare thread minsparethread apach tomcat util net io endpoint jioendpoint made patch patch made base abstract http11 protocol abstracthttp11protocol best regard","""java/org/apache/coyote/ajp/AjpProtocol.java""","1","1","1","1","5","0","5","0","3","0","3","55","55","55","20","55","0","0","3","52","538","90","363","141","214","85","187","281","121","160","8","8","8","5","3","0","94","94","94","59","normal"
"50059","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50059 Always make JAR resources available","Bug 50059  Resources are not served from /WEB-INF/lib/{*.jar}/META-INF/resources if metadata-complete=""true"" is set in web.xml","resourc serv web inf lib jar meta inf resourc metadata complet metadatacomplet true set web xml","","","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","8","1","39","3","30","5","2","1","12","51","51","50","11","51","0","3","38","10","2360","311","1661","388","1170","390","771","1182","382","800","37","37","45","10","5","0","379","379","415","89","normal"
"50063","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50063 Fix apps with meta-data complete returning 404s","Bug 50063  Latest trunck can't configure context when metadata-complete is true and version is 3.0","latest trunck configur context metadata complet metadatacomplet true version","","","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","8","1","40","3","30","6","2","1","12","51","51","50","11","51","0","3","38","10","2376","311","1671","387","1178","396","773","1187","382","805","37","37","45","10","5","0","382","382","417","89","normal"
"50066","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50066 Fix building of recursive tag files when the file depends on a JAR file. Patch provided by Sylvain Laurent.","Bug 50066  Cannot compile recursive tag with ant if it uses a class from the webapp","cannot compil recurs tag ant us class webapp","","","""java/org/apache/jasper/compiler/TagFileProcessor.java""","3","3","4","1","26","2","19","4","4","1","8","19","19","18","22","19","6","4","0","9","674","99","461","187","321","120","210","286","130","156","18","18","26","4","3","0","72","72","92","22","major"
"50087","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50087 Catch ClassFormatErrors when scanning for annotations.","Bug 50087  When metadata-complete=""false"" throw illegal JVM_CONSTANT_Class name","metadata complet metadatacomplet fals throw illeg jvm constant class name","When metadata-complete=""false"" and add groovy-all-1.7.2.jar to app lib throw

java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:290)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:418)
Caused by: java.lang.ClassFormatError: groovy/jmx/builder/package-info : illegal JVM_CONSTANT_Class name: groovy/jmx/builder/package-info
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
	at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
	at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2804)
	at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1144)
	at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1639)
	at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1517)
	at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:1952)
	at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1915)
	at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1802)
	at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1761)
	at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1747)
	at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1252)
	at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:881)
	at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:315)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
	at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4700)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1028)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:773)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1028)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:278)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:429)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:662)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
	at org.apache.catalina.startup.Catalina.start(Catalina.java:592)
	... 6 more","metadata complet metadatacomplet fals add groovi all groovyal jar app lib throw java lang reflect invoc target except invocationtargetexcept sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap start bootstrap java apach catalina startup bootstrap main bootstrap java caus java lang class format error classformaterror groovi jmx builder packag info packageinfo illeg jvm constant class name groovi jmx builder packag info packageinfo java lang class loader classload defin class1 defineclass1 nativ method java lang class loader classload defin class cond defineclasscond class loader classload java java lang class loader classload defin class defineclass class loader classload java java secur secur class loader secureclassload defin class defineclass secur class loader secureclassload java apach catalina loader webapp class loader webappclassload find class intern findclassintern webapp class loader webappclassload java apach catalina loader webapp class loader webappclassload find class findclass webapp class loader webappclassload java apach catalina loader webapp class loader webappclassload load class loadclass webapp class loader webappclassload java apach catalina loader webapp class loader webappclassload load class loadclass webapp class loader webappclassload java apach catalina startup context config contextconfig check handl type checkhandlestyp context config contextconfig java apach catalina startup context config contextconfig process annot stream processannotationsstream context config contextconfig java apach catalina startup context config contextconfig process annot jar processannotationsjar context config contextconfig java apach catalina startup context config contextconfig process annot url processannotationsurl context config contextconfig java apach catalina startup context config contextconfig process annot processannot context config contextconfig java apach catalina startup context config contextconfig web config webconfig context config contextconfig java apach catalina startup context config contextconfig configur start configurestart context config contextconfig java apach catalina startup context config contextconfig lifecycl event lifecycleev context config contextconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina util lifecycl base lifecyclebas fire lifecycl event firelifecycleev lifecycl base lifecyclebas java apach catalina core standard context standardcontext start intern startintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core contain base containerbas start intern startintern contain base containerbas java apach catalina core standard host standardhost start intern startintern standard host standardhost java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core contain base containerbas start intern startintern contain base containerbas java apach catalina core standard engin standardengin start intern startintern standard engin standardengin java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core standard servic standardservic start intern startintern standard servic standardservic java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core standard server standardserv start intern startintern standard server standardserv java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina startup catalina start catalina java","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","8","1","40","3","30","6","2","1","12","51","51","50","11","51","0","3","38","10","2376","311","1671","386","1179","396","773","1187","381","806","37","37","45","10","5","0","382","382","417","89","normal"
"50105","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50105 Use Enum.name() rather than Enum.toString() in composite expressions","Bug 50105  Violation of JSP-EL spec version 2.1 when coerce Enum to String","violat jsp spec version coerc enum string","","","""java/org/apache/el/parser/AstCompositeExpression.java""","2","2","2","1","7","0","7","0","1","0","0","3","3","3","0","3","0","0","0","3","57","8","28","13","10","21","12","19","10","9","4","4","4","1","3","1","6","6","6","3","normal"
"50105","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50105 Use Enum.name() rather than Enum.toString() in composite expressions","Bug 50105  Violation of JSP-EL spec version 2.1 when coerce Enum to String","violat jsp spec version coerc enum string","","","""test/org/apache/el/TestValueExpressionImpl.java""","1","1","1","1","25","5","18","2","1","0","0","2","2","2","0","2","0","0","0","2","84","19","45","29","30","20","35","38","25","13","1","1","1","1","0","0","2","2","2","2","normal"
"50107","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50107 When removing a Host via JMX, do not attempt to destroy the host's pipeline twice. Patch provided by Eiji Takahashi.","Bug 50107  StandardPipeline is destroyed two times.","standard pipelin standardpipelin destroy two time","","","""java/org/apache/catalina/mbeans/MBeanFactory.java""","2","2","2","1","24","2","13","9","1","0","2","35","35","35","1","35","0","6","0","29","1011","163","500","237","326","348","296","370","199","171","6","6","7","5","3","1","75","75","80","51","minor"
"50108","37","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50108 Add get/set methods for Connector property minSpareThreads. Patch provided by Eiji Takahashi.","Bug 50108  Add missing setter/getter to AbstractXXXProtocol","add miss setter getter abstract protocol abstractxxxprotocol","","","""java/org/apache/coyote/ajp/AbstractAjpProtocol.java""","1","1","1","1","3","0","2","0","1","0","1","45","46","46","13","46","0","0","1","45","282","47","179","92","96","58","96","157","77","80","4","4","4","1","2","0","60","60","62","45","enhancement"
"50108","37","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50108 Add get/set methods for Connector property minSpareThreads. Patch provided by Eiji Takahashi.","Bug 50108  Add missing setter/getter to AbstractXXXProtocol","add miss setter getter abstract protocol abstractxxxprotocol","","","""java/org/apache/coyote/http11/AbstractHttp11Protocol.java""","1","1","1","1","2","0","2","0","1","0","1","76","78","78","22","78","0","0","1","77","410","73","247","135","137","92","143","235","119","116","4","4","4","1","2","0","91","91","94","76","enhancement"
"50127","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50127 Also fix all the other Eclipse warnings","Bug 50127  Possible NPEs in SimpleTCPCluster","possibl npe simpl cluster simpletcpclust","","","""java/org/apache/catalina/ha/tcp/SimpleTcpCluster.java""","1","1","2","1","10","0","6","3","1","0","13","62","62","62","16","62","0","0","8","54","922","126","468","167","256","328","240","355","158","197","7","7","9","1","3","1","118","118","131","62","normal"
"50129","3","Mark Emlyn David Thomas","Re-factor to avoid IDE warnings re possible nulls. Includes a fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=50129","Bug 50129  ContextConfig - unnecessary null checks","context config contextconfig unnecessari null check","","","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","8","1","40","3","30","6","2","1","12","51","51","50","11","51","0","3","38","10","2380","311","1675","386","1183","396","775","1189","381","808","37","37","45","10","5","0","383","383","418","90","normal"
"50138","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50138 Fix threading issues","Bug 50138  Lack of synchronization in org.apache.catalina.security.SecurityUtil","lack synchron apach catalina secur secur util securityutil","Symptom: all processor threads spin madly in:
==============
""tomcat-processor-20"" daemon prio=10 tid=0x09210800 nid=0x51fb runnable [0x61b76000]
   java.lang.Thread.State: RUNNABLE
	at java.util.HashMap.getEntry(HashMap.java:347)
	at java.util.HashMap.containsKey(HashMap.java:335)
	at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
	at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
	at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
...
==============

Cause: org.apache.catalina.security.SecurityUtil.objectCache is a HashMap, but access to it is not synchronized. The javadoc for HashMap says:
=============
Note that this implementation is not synchronized. If multiple threads access a hash map concurrently, and at least one of the threads modifies the map structurally, it must be synchronized externally.
=============

Proposed solution: change objectCache to ConcurrentHashMap;","symptom processor thread spin madli tomcat processor tomcatprocessor daemon prio tid 0x09210800 nid 0x51fb runnabl 0x61b76000 java lang thread state runnabl java util hash map hashmap get entri getentri hash map hashmap java java util hash map hashmap contain key containskey hash map hashmap java apach catalina secur secur util securityutil do privileg doasprivileg secur util securityutil java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain access applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain run applic filter chain applicationfilterchain java java secur access control accesscontrol do privileg doprivileg nativ method apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java caus apach catalina secur secur util securityutil object cach objectcach hash map hashmap access synchron javadoc hash map hashmap say note implement synchron multipl thread access hash map concurr least one thread modifi map structur must synchron extern propos solut chang object cach objectcach concurr hash map concurrenthashmap","""java/org/apache/catalina/security/SecurityUtil.java""","3","3","4","1","27","1","16","8","2","11","17","12","12","1","0","12","0","3","0","9","431","56","236","94","139","139","94","137","58","79","13","13","15","7","3","1","42","42","51","18","normal"
"50157","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50157 Ensure MapperListener is only added to a container object once. Also  - Improve debug logging for MapperListener registration.  - Expose names of LifecycleListeners and ContainerListers for StandardContext via JMX.","Bug 50157  a lot of MapperListener is registered as ContainerListener of StandardContext","lot mapper listen mapperlisten regist contain listen containerlisten standard context standardcontext","","","""java/org/apache/catalina/connector/MapperListener.java""","4","4","4","1","22","3","16","3","1","0","2","15","15","15","3","15","0","8","0","7","440","91","265","90","183","86","135","210","94","116","21","21","22","6","4","0","66","66","69","20","minor"
"50157","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50157 Ensure MapperListener is only added to a container object once. Also  - Improve debug logging for MapperListener registration.  - Expose names of LifecycleListeners and ContainerListers for StandardContext via JMX.","Bug 50157  a lot of MapperListener is registered as ContainerListener of StandardContext","lot mapper listen mapperlisten regist contain listen containerlisten standard context standardcontext","","","""java/org/apache/catalina/mbeans/ContainerMBean.java""","6","6","6","1","31","1","22","7","1","0","0","7","7","7","0","7","0","0","0","7","268","24","178","45","121","66","91","121","46","75","11","11","11","1","3","0","48","48","48","7","minor"
"50168","7","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=50168 Add a DESTROYING state and associated events and use them to ensure Contexts are only destroyed once.","Bug 50168  destory method is called twice while the child is destoryed directly","destori method call twice child destori directli","While calling the method destory() on the StandardContext directly, it seems that the method destoryInternal() is called twice in the LifecycleMBeanBase, the two stacktraces are below :
    a.  LifecycleMBeanBase.unregister(ObjectName) line: 191   
         LifecycleMBeanBase.destroyInternal() line: 73   
         ContainerBase.destroyInternal() line: 1109   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271   
         ContainerBase.removeChild(Container) line: 963   
         ContainerBase.destroyInternal() line: 1106   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271   
         ...
     b. LifecycleMBeanBase.unregister(ObjectName) line: 191   
         LifecycleMBeanBase.destroyInternal() line: 73   
         ContainerBase.destroyInternal() line: 1109   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271
         ...","call method destori standard context standardcontext directli seem method destori intern destoryintern call twice lifecycl bean base lifecyclembeanbas two stacktrac lifecycl bean base lifecyclembeanbas unregist object name objectnam line lifecycl bean base lifecyclembeanbas destroy intern destroyintern line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line contain base containerbas remov child removechild contain line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line lifecycl bean base lifecyclembeanbas unregist object name objectnam line lifecycl bean base lifecyclembeanbas destroy intern destroyintern line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line","""java/org/apache/catalina/Lifecycle.java""","0","0","0","0","0","0","0","0","1","0","12","0","9","9","0","9","0","0","0","9","297","48","24","23","12","225","22","23","23","0","0","0","0","0","0","9","0","0","0","0","normal"
"50168","7","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=50168 Add a DESTROYING state and associated events and use them to ensure Contexts are only destroyed once.","Bug 50168  destory method is called twice while the child is destoryed directly","destori method call twice child destori directli","While calling the method destory() on the StandardContext directly, it seems that the method destoryInternal() is called twice in the LifecycleMBeanBase, the two stacktraces are below :
    a.  LifecycleMBeanBase.unregister(ObjectName) line: 191   
         LifecycleMBeanBase.destroyInternal() line: 73   
         ContainerBase.destroyInternal() line: 1109   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271   
         ContainerBase.removeChild(Container) line: 963   
         ContainerBase.destroyInternal() line: 1106   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271   
         ...
     b. LifecycleMBeanBase.unregister(ObjectName) line: 191   
         LifecycleMBeanBase.destroyInternal() line: 73   
         ContainerBase.destroyInternal() line: 1109   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271
         ...","call method destori standard context standardcontext directli seem method destori intern destoryintern call twice lifecycl bean base lifecyclembeanbas two stacktrac lifecycl bean base lifecyclembeanbas unregist object name objectnam line lifecycl bean base lifecyclembeanbas destroy intern destroyintern line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line contain base containerbas remov child removechild contain line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line lifecycl bean base lifecyclembeanbas unregist object name objectnam line lifecycl bean base lifecyclembeanbas destroy intern destroyintern line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line","""java/org/apache/catalina/LifecycleState.java""","1","1","1","1","3","0","2","1","1","0","0","5","3","5","15","5","0","1","0","4","60","6","28","20","4","26","8","11","7","4","1","1","1","1","0","1","5","5","5","5","normal"
"50168","7","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=50168 Add a DESTROYING state and associated events and use them to ensure Contexts are only destroyed once.","Bug 50168  destory method is called twice while the child is destoryed directly","destori method call twice child destori directli","While calling the method destory() on the StandardContext directly, it seems that the method destoryInternal() is called twice in the LifecycleMBeanBase, the two stacktraces are below :
    a.  LifecycleMBeanBase.unregister(ObjectName) line: 191   
         LifecycleMBeanBase.destroyInternal() line: 73   
         ContainerBase.destroyInternal() line: 1109   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271   
         ContainerBase.removeChild(Container) line: 963   
         ContainerBase.destroyInternal() line: 1106   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271   
         ...
     b. LifecycleMBeanBase.unregister(ObjectName) line: 191   
         LifecycleMBeanBase.destroyInternal() line: 73   
         ContainerBase.destroyInternal() line: 1109   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271
         ...","call method destori standard context standardcontext directli seem method destori intern destoryintern call twice lifecycl bean base lifecyclembeanbas two stacktrac lifecycl bean base lifecyclembeanbas unregist object name objectnam line lifecycl bean base lifecyclembeanbas destroy intern destroyintern line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line contain base containerbas remov child removechild contain line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line lifecycl bean base lifecyclembeanbas unregist object name objectnam line lifecycl bean base lifecyclembeanbas destroy intern destroyintern line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line","""java/org/apache/catalina/core/AprLifecycleListener.java""","2","2","2","1","16","1","14","1","1","4","15","10","10","6","0","10","0","3","0","7","258","39","178","63","119","43","94","122","55","67","7","7","7","4","3","0","25","25","25","18","normal"
"50168","7","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=50168 Add a DESTROYING state and associated events and use them to ensure Contexts are only destroyed once.","Bug 50168  destory method is called twice while the child is destoryed directly","destori method call twice child destori directli","While calling the method destory() on the StandardContext directly, it seems that the method destoryInternal() is called twice in the LifecycleMBeanBase, the two stacktraces are below :
    a.  LifecycleMBeanBase.unregister(ObjectName) line: 191   
         LifecycleMBeanBase.destroyInternal() line: 73   
         ContainerBase.destroyInternal() line: 1109   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271   
         ContainerBase.removeChild(Container) line: 963   
         ContainerBase.destroyInternal() line: 1106   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271   
         ...
     b. LifecycleMBeanBase.unregister(ObjectName) line: 191   
         LifecycleMBeanBase.destroyInternal() line: 73   
         ContainerBase.destroyInternal() line: 1109   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271
         ...","call method destori standard context standardcontext directli seem method destori intern destoryintern call twice lifecycl bean base lifecyclembeanbas two stacktrac lifecycl bean base lifecyclembeanbas unregist object name objectnam line lifecycl bean base lifecyclembeanbas destroy intern destroyintern line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line contain base containerbas remov child removechild contain line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line lifecycl bean base lifecyclembeanbas unregist object name objectnam line lifecycl bean base lifecyclembeanbas destroy intern destroyintern line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line","""java/org/apache/catalina/core/ContainerBase.java""","3","3","3","1","18","2","10","5","4","0","2","53","53","53","21","53","1","1","8","43","1409","269","674","203","394","468","288","461","155","306","12","12","15","4","3","1","160","160","192","72","normal"
"50168","7","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=50168 Add a DESTROYING state and associated events and use them to ensure Contexts are only destroyed once.","Bug 50168  destory method is called twice while the child is destoryed directly","destori method call twice child destori directli","While calling the method destory() on the StandardContext directly, it seems that the method destoryInternal() is called twice in the LifecycleMBeanBase, the two stacktraces are below :
    a.  LifecycleMBeanBase.unregister(ObjectName) line: 191   
         LifecycleMBeanBase.destroyInternal() line: 73   
         ContainerBase.destroyInternal() line: 1109   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271   
         ContainerBase.removeChild(Container) line: 963   
         ContainerBase.destroyInternal() line: 1106   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271   
         ...
     b. LifecycleMBeanBase.unregister(ObjectName) line: 191   
         LifecycleMBeanBase.destroyInternal() line: 73   
         ContainerBase.destroyInternal() line: 1109   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271
         ...","call method destori standard context standardcontext directli seem method destori intern destoryintern call twice lifecycl bean base lifecyclembeanbas two stacktrac lifecycl bean base lifecyclembeanbas unregist object name objectnam line lifecycl bean base lifecyclembeanbas destroy intern destroyintern line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line contain base containerbas remov child removechild contain line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line lifecycl bean base lifecyclembeanbas unregist object name objectnam line lifecycl bean base lifecyclembeanbas destroy intern destroyintern line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","8","1","40","3","30","6","2","1","12","51","51","50","11","51","0","3","38","10","2372","314","1664","391","1174","396","777","1186","385","801","37","37","43","10","5","0","378","378","411","90","normal"
"50168","7","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=50168 Add a DESTROYING state and associated events and use them to ensure Contexts are only destroyed once.","Bug 50168  destory method is called twice while the child is destoryed directly","destori method call twice child destori directli","While calling the method destory() on the StandardContext directly, it seems that the method destoryInternal() is called twice in the LifecycleMBeanBase, the two stacktraces are below :
    a.  LifecycleMBeanBase.unregister(ObjectName) line: 191   
         LifecycleMBeanBase.destroyInternal() line: 73   
         ContainerBase.destroyInternal() line: 1109   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271   
         ContainerBase.removeChild(Container) line: 963   
         ContainerBase.destroyInternal() line: 1106   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271   
         ...
     b. LifecycleMBeanBase.unregister(ObjectName) line: 191   
         LifecycleMBeanBase.destroyInternal() line: 73   
         ContainerBase.destroyInternal() line: 1109   
         StandardContext.destroyInternal() line: 5114   
         LifecycleBase.destroy() line: 271
         ...","call method destori standard context standardcontext directli seem method destori intern destoryintern call twice lifecycl bean base lifecyclembeanbas two stacktrac lifecycl bean base lifecyclembeanbas unregist object name objectnam line lifecycl bean base lifecyclembeanbas destroy intern destroyintern line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line contain base containerbas remov child removechild contain line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line lifecycl bean base lifecyclembeanbas unregist object name objectnam line lifecycl bean base lifecyclembeanbas destroy intern destroyintern line contain base containerbas destroy intern destroyintern line standard context standardcontext destroy intern destroyintern line lifecycl base lifecyclebas destroy line","""java/org/apache/catalina/util/LifecycleBase.java""","2","2","3","1","16","2","10","3","1","0","2","13","17","17","2","17","0","1","7","9","335","68","164","46","96","103","66","102","35","67","9","9","13","3","2","1","35","35","45","15","normal"
"50169","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50169 Ensure that when a Container is started that it doesn't try and register with the mapper unless its parent has already started. Patch provided by Eiji Takahashi.","Bug 50169  Trying to register wrapper and welcomeFile to Mapper before context is registered on Mapper.","tri regist wrapper welcom file welcomefil mapper context regist mapper","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","2","0","3","293","293","293","118","293","0","14","9","270","6278","1279","3214","986","1939","1789","1446","2216","822","1394","54","54","69","9","5","1","678","678","731","383","minor"
"50169","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50169 Ensure that when a Container is started that it doesn't try and register with the mapper unless its parent has already started. Patch provided by Eiji Takahashi.","Bug 50169  Trying to register wrapper and welcomeFile to Mapper before context is registered on Mapper.","tri regist wrapper welcom file welcomefil mapper context regist mapper","","","""java/org/apache/catalina/core/StandardWrapper.java""","2","2","2","1","15","1","9","4","1","1","5","86","86","85","30","86","0","2","6","78","1849","388","957","287","573","505","400","597","214","383","19","19","24","4","5","1","186","186","201","97","minor"
"50173","170","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50173 Throw an exception and do not start the APR connector if it is configured for SSL and an invalid value is provided for SSLProtocol.","Bug 50173  JDBCSampler discards ResultSet from a PreparedStatement.","sampler jdbcsampler discard result set resultset prepar statement preparedstat","Hi,
 I am using JMeter with a Test Plan that uses a JDBC Request with a PreparedStatement query type.
 When running this I am getting the following error in the jmeter.log file

2010/10/28 11:30:31 INFO  - jmeter.threads.JMeterThread: Thread started: JDBC Users 1-1 
2010/10/28 12:13:38 ERROR - jmeter.threads.JMeterThread: Error while processing sampler 'PREPARED SELECT Customer JDBC Request' : java.lang.NullPointerException
	at org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler.getStringFromResultSet(JDBCSampler.java:415)
	at org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler.resultSetsToString(JDBCSampler.java:268)
	at org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler.sample(JDBCSampler.java:208)
	at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:348)
	at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:243)
	at java.lang.Thread.run(Thread.java:619)

 The query (below) can be expected to return a number of records 
SELECT * FROM Customer WHERE ID=?;
the param is set to 1

 If I use instead a SelectStatement results are returned so the query itself is not at fault.

 I have retrieved the code for the v2_4 tag to identify the root cause for the NPE and create a patch. This bug report includes a patch against trunk as the issue is also in trunk. 
 The root cause is due to:
org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler.sample(Entry e)
 
 The code path for PreparedStatements types starting on line 204 has in it a call to
org.hsqldb.jdbc.JDBCPreparedStatement.executeUpdate() 
which returns a ResultSet. The side effect of the call is to set the JDBCPreparedStatement.currentResultSet field member to null.
 JDBCSampler does not keep the ResultSet reference. Instead it is discarded.

 The call on the next line (208)
String sb = resultSetsToString(pstmt,true,null)
 again tries to get the ResultSet on line 267. This causes a NullPointerException because the JDBCPreparedStatement.currentResultSet field was set to null earlier.

 Looking at the code path for a CALLABLE statement type (line 190) shows better handling for queries that return ResultSet.

 The two lines 
207,208

 replaced with
                boolean hasResultSet = pstmt.execute();
                String sb = resultSetsToString(pstmt,hasResultSet,null);
                
 fixes the defect.

Regards,
Jeremy Whiting
Red Hat","hi use meter jmeter plan us jdbc request prepar statement preparedstat queri type run get follow error jmeter log file info jmeter thread meter thread jmeterthread thread start jdbc user error jmeter thread meter thread jmeterthread error process sampler prepar select custom jdbc request java lang null pointer except nullpointerexcept apach jmeter protocol jdbc sampler sampler jdbcsampler get string from result set getstringfromresultset sampler jdbcsampler java apach jmeter protocol jdbc sampler sampler jdbcsampler result set to string resultsetstostr sampler jdbcsampler java apach jmeter protocol jdbc sampler sampler jdbcsampler sampl sampler jdbcsampler java apach jmeter thread meter thread jmeterthread process sampler meter thread jmeterthread java apach jmeter thread meter thread jmeterthread run meter thread jmeterthread java java lang thread run thread java queri expect return number record select custom id param set use instead select statement selectstat result return queri fault retriev code v2 tag identifi root caus npe creat patch report includ patch trunk issu trunk root caus due apach jmeter protocol jdbc sampler sampler jdbcsampler sampl entri code path prepar statement preparedstat type start line call hsqldb jdbc prepar statement jdbcpreparedstat execut updat executeupd return result set resultset side effect call set prepar statement jdbcpreparedstat current result set currentresultset field member null sampler jdbcsampler keep result set resultset refer instead discard call next line string sb result set to string resultsetstostr pstmt true null tri get result set resultset line caus null pointer except nullpointerexcept prepar statement jdbcpreparedstat current result set currentresultset field set null earlier look code path callabl statement type line show better handl queri return result set resultset two line replac boolean ha result set hasresultset pstmt execut string sb result set to string resultsetstostr pstmt ha result set hasresultset null fix defect regard jeremi white red","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","15","0","11","2","11","0","2","85","88","88","64","88","1","1","9","77","1786","228","1138","283","782","420","581","882","265","617","32","32","40","11","7","0","278","278","317","118","null"
"50183","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50183 BIO sender was not scheduling tasks to the executor during normal operation. Patch provided by Ariel.","Bug 50183  [Tribes] Bio Sender is not scheduling the task to the excecutors","tribe bio sender schedul task excecutor","","","""java/org/apache/catalina/tribes/transport/bio/BioReceiver.java""","2","2","2","1","12","0","11","2","1","0","1","8","8","8","1","8","0","0","2","6","159","18","107","30","66","38","62","86","26","60","10","10","10","6","3","0","23","23","23","13","major"
"50183","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50183 BIO sender was not scheduling tasks to the executor during normal operation. Patch provided by Ariel.","Bug 50183  [Tribes] Bio Sender is not scheduling the task to the excecutors","tribe bio sender schedul task excecutor","","","""java/org/apache/catalina/tribes/transport/bio/BioReplicationTask.java""","3","3","3","1","14","0","10","4","1","0","1","7","7","7","2","7","0","0","3","4","168","19","93","33","51","61","56","82","32","50","8","8","8","1","4","1","25","25","25","7","major"
"50184","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50184 Add an option to the RpcChannel to enable the Channel send options to be set for the reply message. Based on a patch by Ariel.","Bug 50184  RpcChannel sends the answer without requesting an ACK","rpc channel rpcchannel send answer without request ack","","","""java/org/apache/catalina/tribes/group/RpcChannel.java""","1","1","1","1","7","0","6","1","3","1","5","22","22","21","10","22","0","0","1","21","272","37","189","78","97","49","95","139","67","72","8","8","8","5","4","0","41","39","43","26","normal"
"50189","109","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50189 Once the application has finished writing to the response, prevent further reads from the request since this causes various problems in the connectors which do not expect this.","Bug 50189  AJP connector sends GET BODY CHUNK when reading after response closed","ajp connector send get bodi chunk read respons close","If a servlet (probably incorrectly) closes the writer/outputstream of a response, and then attempts to read from the request, the AJP connector sends GET BODY CHUNK to the mod_jk worker.

This then starts a series of very confusing communication between the worker and tomcat.  The worker doesn't read it until it makes its next request.  After making its next request, it reads it, and then sends a response with 0 length.  At the same time, Tomcat responds to the request made by the worker with another GET BODY CHUNK, which the worker also responds with a message of 0 length.  Then the really weird thing happens, Tomcat replays the first request made by that worker.  At this point, based on what I'm looking at with tcpdump, I get too confused to work out exactly what is happening.","servlet probabl incorrectli close writer outputstream respons attempt read request ajp connector send get bodi chunk jk worker start seri confus commun worker tomcat worker doesn read make next request make next request read send respons length time tomcat respond request made worker anoth get bodi chunk worker respond messag length realli weird thing happen tomcat replay first request made worker point base look tcpdump get confus work exactli happen","""java/org/apache/catalina/connector/OutputBuffer.java""","2","2","2","1","11","1","7","2","2","0","2","31","31","31","13","31","0","1","2","28","589","169","263","84","144","158","117","182","60","122","7","7","7","3","2","1","64","64","66","35","normal"
"50192","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50192 Improve performance for EL when running under a security manager. Based on a patch by Robert Goff.","Bug 50192  performance issue after revision 746425","perform issu revis","","","""java/org/apache/jasper/el/ELContextImpl.java""","1","1","1","1","4","0","4","0","4","0","1","11","11","11","4","11","0","0","0","11","117","21","75","33","27","21","31","48","28","20","2","2","2","1","1","0","15","15","15","11","normal"
"50192","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50192 Improve performance for EL when running under a security manager. Based on a patch by Robert Goff.","Bug 50192  performance issue after revision 746425","perform issu revis","","","""java/org/apache/jasper/el/ELResolverImpl.java""","3","3","3","2","12","1","11","0","1","1","1","8","8","7","1","8","0","0","0","8","166","23","127","42","62","16","55","81","28","53","7","7","7","5","3","0","26","26","26","16","normal"
"50207","19","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50207","Bug 50207  CometProcessor async timeout events are not being fired","comet processor cometprocessor async timeout event fire","This is reproducible using the the default chat example (ie: ChatServlet, /examples/jsp/chat) and the following additional changes:

1) Enabled Http11Nio in conf/server.xml:

    <Connector 
        address=""0.0.0.0"" 
        port=""8080"" 
        protocol=""org.apache.coyote.http11.Http11NioProtocol""
        connectionTimeout=""20000"" 
        enableLookups=""false""
        acceptCount=""100""
        disableUploadTimeout=""true""
        maxThreads=""15""
        minSpareThreads=""15""
        maxSpareThreads=""15""
        RECYCLE_FACADES=""true""/>

2) Enabled the comet valve in conf/context.xml:

  <Valve className=""org.apache.catalina.valves.CometConnectionManagerValve"" />

The problem is CometEvent.EventType.ERROR (and subtype TIMEOUT) and CometEvent.EventType.END are never being fired.

This can be confirmed in the logs; the messages for these events are never printed.  This worked on Tomcat 6.0.29.

As an aside, what is the most complete/robust way to do async IO in tomcat 7 today, Servlet 3.0 or CometProcessor?","reproduc use default chat exampl ie chat servlet chatservlet exampl jsp chat follow addit chang enabl http11 nio http11nio conf server xml connector address port protocol apach coyot http11 http11 nio protocol http11nioprotocol connect timeout connectiontimeout enabl lookup enablelookup fals accept count acceptcount disabl upload timeout disableuploadtimeout true max thread maxthread min spare thread minsparethread max spare thread maxsparethread recycl facad true enabl comet valv conf context xml valv class name classnam apach catalina valv comet connect manag valv cometconnectionmanagervalv problem comet event cometev event type eventtyp error subtyp timeout comet event cometev event type eventtyp never fire confirm log messag event never print work tomcat asid complet robust way async tomcat today servlet comet processor cometprocessor","""java/org/apache/coyote/http11/Http11NioProtocol.java""","2","2","2","1","11","0","10","0","4","0","3","33","33","33","8","33","1","0","1","31","505","64","380","95","249","63","185","265","89","176","13","13","15","4","3","0","81","81","85","38","regression"
"50207","19","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50207","Bug 50207  CometProcessor async timeout events are not being fired","comet processor cometprocessor async timeout event fire","This is reproducible using the the default chat example (ie: ChatServlet, /examples/jsp/chat) and the following additional changes:

1) Enabled Http11Nio in conf/server.xml:

    <Connector 
        address=""0.0.0.0"" 
        port=""8080"" 
        protocol=""org.apache.coyote.http11.Http11NioProtocol""
        connectionTimeout=""20000"" 
        enableLookups=""false""
        acceptCount=""100""
        disableUploadTimeout=""true""
        maxThreads=""15""
        minSpareThreads=""15""
        maxSpareThreads=""15""
        RECYCLE_FACADES=""true""/>

2) Enabled the comet valve in conf/context.xml:

  <Valve className=""org.apache.catalina.valves.CometConnectionManagerValve"" />

The problem is CometEvent.EventType.ERROR (and subtype TIMEOUT) and CometEvent.EventType.END are never being fired.

This can be confirmed in the logs; the messages for these events are never printed.  This worked on Tomcat 6.0.29.

As an aside, what is the most complete/robust way to do async IO in tomcat 7 today, Servlet 3.0 or CometProcessor?","reproduc use default chat exampl ie chat servlet chatservlet exampl jsp chat follow addit chang enabl http11 nio http11nio conf server xml connector address port protocol apach coyot http11 http11 nio protocol http11nioprotocol connect timeout connectiontimeout enabl lookup enablelookup fals accept count acceptcount disabl upload timeout disableuploadtimeout true max thread maxthread min spare thread minsparethread max spare thread maxsparethread recycl facad true enabl comet valv conf context xml valv class name classnam apach catalina valv comet connect manag valv cometconnectionmanagervalv problem comet event cometev event type eventtyp error subtyp timeout comet event cometev event type eventtyp never fire confirm log messag event never print work tomcat asid complet robust way async tomcat today servlet comet processor cometprocessor","""java/org/apache/tomcat/util/net/NioEndpoint.java""","2","2","3","1","10","0","8","1","13","0","8","116","121","121","52","121","0","0","15","106","1615","177","1189","321","833","278","655","977","323","654","26","26","27","8","7","0","338","338","382","139","regression"
"50222","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50222 Pin the system rather than the common class loader in memory which will work better in an embedded environment.","Bug 50222  JreMemoryLeakPreventionListener should speculatively cause memory leaks using the system ClassLoader","jre memori leak prevent listen jrememoryleakpreventionlisten specul caus memori leak use system class loader classload","JreMemoryLeakPreventionListener intentionally invokes methods known to pin the context ClassLoader in memory in order to avoid having a WebappClassLoader unintentionally pin itself. This may cause undesirable behavior in embedded environments.

Instead, JMLPL could use a security context to temporarily set the current context ClassLoader to be the system ClassLoader and solve the embedded situation without the client having to remember to take this care.","jre memori leak prevent listen jrememoryleakpreventionlisten intent invok method known pin context class loader classload memori order avoid webapp class loader webappclassload unintent pin may caus undesir behavior embed environ instead jmlpl could use secur context temporarili set current context class loader classload system class loader classload solv embed situat without client rememb take care","""java/org/apache/catalina/core/JreMemoryLeakPreventionListener.java""","2","2","2","1","12","0","7","4","1","0","2","15","15","15","7","15","0","0","0","15","312","23","149","54","94","141","69","100","48","52","27","27","27","1","4","1","41","41","41","15","enhancement"
"50230","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50230 Add new DistributedManager interface that is implemented by the Backup Manager to remove circular dependency between tomcat-catalina-ha and tomcat-catalina modules. Also allows third-party distributed Manager implementations to report full session information through the HTML Manager.","Bug 50230  Recursive dependency between the tomcat-catalina-ha and tomcat-catalina","recurs depend tomcat catalina ha tomcatcatalinaha tomcat catalina tomcatcatalina","","","""java/org/apache/catalina/ha/session/BackupManager.java""","1","1","1","1","6","0","5","1","1","0","2","24","24","24","5","24","0","0","2","22","284","45","171","79","79","71","84","119","62","57","3","3","3","1","1","0","33","33","34","24","normal"
"50230","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50230 Add new DistributedManager interface that is implemented by the Backup Manager to remove circular dependency between tomcat-catalina-ha and tomcat-catalina modules. Also allows third-party distributed Manager implementations to report full session information through the HTML Manager.","Bug 50230  Recursive dependency between the tomcat-catalina-ha and tomcat-catalina","recurs depend tomcat catalina ha tomcatcatalinaha tomcat catalina tomcatcatalina","","","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","28","2","20","5","11","0","16","36","36","36","2","36","0","1","14","21","1360","132","973","219","764","262","429","564","194","370","18","18","23","10","4","0","132","132","154","63","normal"
"50232","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50232 Remove dependency between StoreBase and PersistentManager and associated code clean-up. Patch provided by Tiago Batista.","Bug 50232  org.apache.catalina.session.StoreBase has a hidden dependency on PersistentManager","apach catalina session store base storebas hidden depend persist manag persistentmanag","","","""java/org/apache/catalina/session/StoreBase.java""","1","1","1","1","11","0","7","4","1","0","3","12","12","12","2","12","0","0","4","8","245","40","112","44","54","93","51","75","35","40","11","11","11","7","3","1","23","23","23","18","minor"
"50252","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50252 Prevent ClassCastException when using a <ResourceLink>. Patch provided by Eiji Takahashi.","Bug 50252  ClassCastException occurs if context.xml contains <ResourceLink>.","class cast except classcastexcept occur context xml contain resourc link resourcelink","","","""java/org/apache/naming/NamingContext.java""","2","2","2","1","21","0","9","10","1","0","3","35","35","35","3","35","0","0","4","31","944","135","398","146","205","411","138","221","78","143","12","12","14","8","4","1","83","83","92","45","normal"
"50293","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50293 Increase default resolver array size. (Jasper adds 5 resolvers.)","Bug 50293  javax.el.CompositeELResolver synchronization issue","javax composit resolv compositeelresolv synchron issu","","","""java/javax/el/CompositeELResolver.java""","2","2","2","1","10","0","9","0","2","0","0","14","14","14","9","14","0","1","0","13","215","31","165","60","82","19","85","121","48","73","5","5","6","3","2","0","34","34","38","26","normal"
"50308","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50308 Allow asynchronous request processing to call AsyncContext.dispatch() once the asynchronous request has timed out.","Bug 50308  Call to AsyncContext.dispatch() in the onTimeout callback throws exception","call async context asynccontext dispatch on timeout ontimeout callback throw except","When dispatch() method is called inside the onTimeout() function of the AsyncListener, the exception is thrown:

SEVERE: An exception or error occurred in the container during the request processing
java.lang.IllegalStateException: Calling [dispatchAsync()] is not valid for a request with Async state [TIMING_OUT]
	at org.apache.coyote.AsyncStateMachine.asyncDispatch(AsyncStateMachine.java:220)
	at org.apache.coyote.http11.Http11NioProcessor.actionInternal(Http11NioProcessor.java:672)
	at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:937)
	at org.apache.coyote.Request.action(Request.java:348)
	at org.apache.catalina.core.AsyncContextImpl.dispatch(AsyncContextImpl.java:173)
	at org.apache.catalina.core.AsyncContextImpl.dispatch(AsyncContextImpl.java:135)
	at org.apache.catalina.core.AsyncContextImpl.dispatch(AsyncContextImpl.java:130)
	at com.juriy.snowball.SnowServlet$1.onTimeout(SnowServlet.java:23)
	at org.apache.catalina.core.AsyncListenerWrapper.fireOnTimeout(AsyncListenerWrapper.java:45)
	at org.apache.catalina.core.AsyncContextImpl.timeout(AsyncContextImpl.java:109)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:270)
	at org.apache.coyote.http11.Http11NioProcessor.asyncDispatch(Http11NioProcessor.java:232)
	at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.event(Http11NioProtocol.java:305)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1526)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:619)


The sample code is below:

	protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		AsyncContext context = request.startAsync();
		context.setTimeout(3000);
		context.addListener(new AsyncListener() {

			public void onComplete(AsyncEvent asyncEvent) throws IOException {}

			public void onTimeout(AsyncEvent asyncEvent) throws IOException {
				System.out.println(""HITTING TIMEOUT"");
				asyncEvent.getAsyncContext().dispatch();
			}

			public void onError(AsyncEvent asyncEvent) throws IOException {}

			public void onStartAsync(AsyncEvent asyncEvent) throws IOException {}
		});
}


It looks like the Servlet 3.0 specification allows to do such call, here's the quotation that explicitly states the flow of the timeouted async contexts (page 18):

""In the event that an asynchronous operation times out, the container must run
through the following steps:
 Invoke the AsyncListener.onTimeout method on all the AsyncListener
instances registered with the ServletRequest on which the asynchronous
operation was initiated.
 If none of the listeners called AsyncContext.complete() or any of the
AsyncContext.dispatch methods, perform an error dispatch with a status
code equal to HttpServletResponse.SC_INTERNAL_SERVER_ERROR.
 If no matching error page was found, or the error page did not call
AsyncContext.complete() or any of the AsyncContext.dispatch
methods, the container MUST call AsyncContext.complete()""

Second step assumes that the call to dispatch in onTimeout() is allowed.","dispatch method call insid on timeout ontimeout function async listen asynclisten except thrown sever except error occur contain request process java lang illeg state except illegalstateexcept call dispatch async dispatchasync valid request async state time apach coyot async state machin asyncstatemachin async dispatch asyncdispatch async state machin asyncstatemachin java apach coyot http11 http11 nio processor http11nioprocessor action intern actionintern http11 nio processor http11nioprocessor java apach coyot http11 abstract http11 processor abstracthttp11processor action abstract http11 processor abstracthttp11processor java apach coyot request action request java apach catalina core async context impl asynccontextimpl dispatch async context impl asynccontextimpl java apach catalina core async context impl asynccontextimpl dispatch async context impl asynccontextimpl java apach catalina core async context impl asynccontextimpl dispatch async context impl asynccontextimpl java juriy snowbal snow servlet snowservlet on timeout ontimeout snow servlet snowservlet java apach catalina core async listen wrapper asynclistenerwrapp fire on timeout fireontimeout async listen wrapper asynclistenerwrapp java apach catalina core async context impl asynccontextimpl timeout async context impl asynccontextimpl java apach catalina connector coyot adapt coyoteadapt async dispatch asyncdispatch coyot adapt coyoteadapt java apach coyot http11 http11 nio processor http11nioprocessor async dispatch asyncdispatch http11 nio processor http11nioprocessor java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl event http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java sampl code protect void servic http servlet request httpservletrequest request http servlet respons httpservletrespons respons throw servlet except servletexcept except ioexcept async context asynccontext context request start async startasync context set timeout settimeout context add listen addlisten new async listen asynclisten public void on complet oncomplet async event asyncev async event asyncev throw except ioexcept public void on timeout ontimeout async event asyncev async event asyncev throw except ioexcept system println hit timeout async event asyncev get async context getasynccontext dispatch public void on error onerror async event asyncev async event asyncev throw except ioexcept public void on start async onstartasync async event asyncev async event asyncev throw except ioexcept look like servlet specif allow call quotat explicitli state flow timeout async context page event asynchron oper time contain must run follow step invok async listen asynclisten on timeout ontimeout method async listen asynclisten instanc regist servlet request servletrequest asynchron oper initi none listen call async context asynccontext complet async context asynccontext dispatch method perform error dispatch statu code equal http servlet respons httpservletrespons sc intern server error match error page found error page call async context asynccontext complet async context asynccontext dispatch method contain must call async context asynccontext complet second step assum call dispatch on timeout ontimeout allow","""java/org/apache/coyote/AsyncStateMachine.java""","1","1","2","1","8","0","7","0","4","0","1","23","21","23","16","23","1","1","0","21","321","47","215","62","127","59","85","130","46","84","7","7","7","7","3","0","43","43","47","31","critical"
"50308","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50308 Allow asynchronous request processing to call AsyncContext.dispatch() once the asynchronous request has timed out.","Bug 50308  Call to AsyncContext.dispatch() in the onTimeout callback throws exception","call async context asynccontext dispatch on timeout ontimeout callback throw except","When dispatch() method is called inside the onTimeout() function of the AsyncListener, the exception is thrown:

SEVERE: An exception or error occurred in the container during the request processing
java.lang.IllegalStateException: Calling [dispatchAsync()] is not valid for a request with Async state [TIMING_OUT]
	at org.apache.coyote.AsyncStateMachine.asyncDispatch(AsyncStateMachine.java:220)
	at org.apache.coyote.http11.Http11NioProcessor.actionInternal(Http11NioProcessor.java:672)
	at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:937)
	at org.apache.coyote.Request.action(Request.java:348)
	at org.apache.catalina.core.AsyncContextImpl.dispatch(AsyncContextImpl.java:173)
	at org.apache.catalina.core.AsyncContextImpl.dispatch(AsyncContextImpl.java:135)
	at org.apache.catalina.core.AsyncContextImpl.dispatch(AsyncContextImpl.java:130)
	at com.juriy.snowball.SnowServlet$1.onTimeout(SnowServlet.java:23)
	at org.apache.catalina.core.AsyncListenerWrapper.fireOnTimeout(AsyncListenerWrapper.java:45)
	at org.apache.catalina.core.AsyncContextImpl.timeout(AsyncContextImpl.java:109)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:270)
	at org.apache.coyote.http11.Http11NioProcessor.asyncDispatch(Http11NioProcessor.java:232)
	at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.event(Http11NioProtocol.java:305)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1526)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:619)


The sample code is below:

	protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		AsyncContext context = request.startAsync();
		context.setTimeout(3000);
		context.addListener(new AsyncListener() {

			public void onComplete(AsyncEvent asyncEvent) throws IOException {}

			public void onTimeout(AsyncEvent asyncEvent) throws IOException {
				System.out.println(""HITTING TIMEOUT"");
				asyncEvent.getAsyncContext().dispatch();
			}

			public void onError(AsyncEvent asyncEvent) throws IOException {}

			public void onStartAsync(AsyncEvent asyncEvent) throws IOException {}
		});
}


It looks like the Servlet 3.0 specification allows to do such call, here's the quotation that explicitly states the flow of the timeouted async contexts (page 18):

""In the event that an asynchronous operation times out, the container must run
through the following steps:
 Invoke the AsyncListener.onTimeout method on all the AsyncListener
instances registered with the ServletRequest on which the asynchronous
operation was initiated.
 If none of the listeners called AsyncContext.complete() or any of the
AsyncContext.dispatch methods, perform an error dispatch with a status
code equal to HttpServletResponse.SC_INTERNAL_SERVER_ERROR.
 If no matching error page was found, or the error page did not call
AsyncContext.complete() or any of the AsyncContext.dispatch
methods, the container MUST call AsyncContext.complete()""

Second step assumes that the call to dispatch in onTimeout() is allowed.","dispatch method call insid on timeout ontimeout function async listen asynclisten except thrown sever except error occur contain request process java lang illeg state except illegalstateexcept call dispatch async dispatchasync valid request async state time apach coyot async state machin asyncstatemachin async dispatch asyncdispatch async state machin asyncstatemachin java apach coyot http11 http11 nio processor http11nioprocessor action intern actionintern http11 nio processor http11nioprocessor java apach coyot http11 abstract http11 processor abstracthttp11processor action abstract http11 processor abstracthttp11processor java apach coyot request action request java apach catalina core async context impl asynccontextimpl dispatch async context impl asynccontextimpl java apach catalina core async context impl asynccontextimpl dispatch async context impl asynccontextimpl java apach catalina core async context impl asynccontextimpl dispatch async context impl asynccontextimpl java juriy snowbal snow servlet snowservlet on timeout ontimeout snow servlet snowservlet java apach catalina core async listen wrapper asynclistenerwrapp fire on timeout fireontimeout async listen wrapper asynclistenerwrapp java apach catalina core async context impl asynccontextimpl timeout async context impl asynccontextimpl java apach catalina connector coyot adapt coyoteadapt async dispatch asyncdispatch coyot adapt coyoteadapt java apach coyot http11 http11 nio processor http11nioprocessor async dispatch asyncdispatch http11 nio processor http11nioprocessor java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl event http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java sampl code protect void servic http servlet request httpservletrequest request http servlet respons httpservletrespons respons throw servlet except servletexcept except ioexcept async context asynccontext context request start async startasync context set timeout settimeout context add listen addlisten new async listen asynclisten public void on complet oncomplet async event asyncev async event asyncev throw except ioexcept public void on timeout ontimeout async event asyncev async event asyncev throw except ioexcept system println hit timeout async event asyncev get async context getasynccontext dispatch public void on error onerror async event asyncev async event asyncev throw except ioexcept public void on start async onstartasync async event asyncev async event asyncev throw except ioexcept look like servlet specif allow call quotat explicitli state flow timeout async context page event asynchron oper time contain must run follow step invok async listen asynclisten on timeout ontimeout method async listen asynclisten instanc regist servlet request servletrequest asynchron oper initi none listen call async context asynccontext complet async context asynccontext dispatch method perform error dispatch statu code equal http servlet respons httpservletrespons sc intern server error match error page found error page call async context asynccontext complet async context asynccontext dispatch method contain must call async context asynccontext complet second step assum call dispatch on timeout ontimeout allow","""test/org/apache/catalina/core/TestAsyncContextImpl.java""","1","1","1","1","11","1","10","0","16","0","11","53","53","53","9","53","0","3","9","41","726","142","532","219","326","61","299","383","178","205","4","4","4","1","2","0","75","75","78","53","critical"
"50310","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50310 Ensure Servlet info is displayed in Manager application","Bug 50310  Manager detailed status page does not display servlets","manag detail statu page display servlet","To reproduce:
1. Login to the Manager webapp
2. Click ""Server Status"" and then ""Complete Server Status"" links.



In TC6 the ""Complete Server Status"" page lists servlets for each deployed application.

In the current TC7 it does not list them. Only summary information on each webapp is displayed.


Looking at the StatusManagerServlet and StatusTransformer classes, the code to iterate over servlets is still there, but probably the JMX names have changed and are not working any more.","reproduc login manag webapp click server statu complet server statu link c6 tc6 complet server statu page list servlet deploy applic current c7 tc7 list summari inform webapp display look statu manag servlet statusmanagerservlet statu transform statustransform class code iter servlet still probabl jmx name chang work","""java/org/apache/catalina/core/StandardWrapper.java""","2","2","2","1","15","1","9","4","1","1","5","86","86","85","30","86","0","2","6","78","1852","388","960","288","575","505","401","600","215","385","19","19","24","4","5","1","188","188","203","97","normal"
"50316","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50316 Fix display of negative values","Bug 50316  Minor glitch with display of negative TTL on sessionDetail.jsp","minor glitch display neg ttl session detail sessiondetail jsp","","","""java/org/apache/catalina/manager/JspHelper.java""","2","2","2","1","13","0","10","2","1","12","3","13","13","1","0","13","0","2","0","11","241","23","157","42","95","63","75","112","41","71","9","9","9","3","4","0","37","37","37","25","minor"
"50316","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50316 Fix display of negative values","Bug 50316  Minor glitch with display of negative TTL on sessionDetail.jsp","minor glitch display neg ttl session detail sessiondetail jsp","","","""java/org/apache/catalina/manager/StatusTransformer.java""","5","5","5","1","41","3","33","5","1","20","0","20","20","0","0","20","0","0","2","18","928","128","684","138","531","126","381","482","100","382","21","14","23","4","4","0","111","101","114","28","minor"
"50325","68","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50325 Use JVM provided solutions to CVE-2009-3555 if available (i.e. RFC 5746 support)","Bug 50325  Update Tomcat to use JRE provided solutions for CVE-2009-3555 if available","updat tomcat use jre provid solut cve avail","","","""java/org/apache/tomcat/util/net/jsse/JSSESocketFactory.java""","4","4","5","1","29","2","22","4","1","0","9","21","21","21","7","21","1","3","11","6","775","88","532","184","329","156","259","360","151","209","15","15","17","12","7","0","104","104","112","36","enhancement"
"50333","46","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50333 dont allow 0 or negative max active values","Bug 50333  IllegalArgumentException occurs when setting maxActive to smaller than 1.","illeg argument except illegalargumentexcept occur set max activ maxact smaller","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","4","4","4","1","21","0","14","7","3","2","2","45","45","43","20","45","1","1","16","27","1188","95","719","151","491","408","350","538","154","384","18","18","18","8","6","1","187","187","204","87","normal"
"50333","46","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50333 dont allow 0 or negative max active values","Bug 50333  IllegalArgumentException occurs when setting maxActive to smaller than 1.","illeg argument except illegalargumentexcept occur set max activ maxact smaller","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/PoolProperties.java""","1","1","1","1","6","0","4","2","3","2","2","112","112","110","49","112","0","0","0","112","1051","211","548","199","271","292","256","410","201","209","6","6","10","5","5","1","154","154","165","135","normal"
"50353","212","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50353 Rather than the eventual NPE, throw an ISE if an application attempts to access an AsyncContext after the request processing has ended.","Bug 50353  Calling asyncContext.getResponse() returns null after async timeout","call async context asynccontext get respons getrespons return null async timeout","If the async thread calls asyncContext.getResponse() after the async timeout, it gets a null reference. 
In the following example, it leads to a NPE.

The servlet spec is not very clear on the behavior to adopt after a timeout, but I don't think null should be returned. Maybe an IllegalStateException instead ? It seems to be the case if complete() is called after the timeout.

package test;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.AsyncContext;
import javax.servlet.AsyncEvent;
import javax.servlet.AsyncListener;
import javax.servlet.ServletException;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class MyServlet
 */
@WebServlet(value = ""/MyServlet"", asyncSupported = true)
public class MyServlet extends HttpServlet implements AsyncListener {
	private static final long serialVersionUID = 1L;

	protected void doGet(HttpServletRequest request,
			HttpServletResponse response) throws ServletException, IOException {
		final AsyncContext asyncContext = request.startAsync(request, response);
		asyncContext.addListener(this);
		asyncContext.setTimeout(10*1000);

		asyncContext.start(new Runnable() {

			@Override
			public void run() {
				System.out.println(""Entering async thread"");
				try {
					Thread.sleep(20 * 1000);
					System.out.println(""<Asyncthread> about to write response"");
					ServletResponse response2 = asyncContext.getResponse();
					PrintWriter writer = response2.getWriter();
					writer.write(""Hello world"");
					System.out.println(""<Asyncthread> about to complete"");
					asyncContext.complete();
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
		});
	}

	@Override
	public void onComplete(AsyncEvent evt) throws IOException {
		System.out.println(""onComplete "" + evt);
	}

	@Override
	public void onError(AsyncEvent evt) throws IOException {
		System.out.println(""onError "" + evt);
	}

	@Override
	public void onStartAsync(AsyncEvent evt) throws IOException {
		System.out.println(""onStartAsync "" + evt);
	}

	@Override
	public void onTimeout(AsyncEvent evt) throws IOException {
		System.out.println(""onTimeout "" + evt);
		evt.getAsyncContext().getResponse().getWriter().write(""Timed out"");
		evt.getAsyncContext().complete();
	}
}","async thread call async context asynccontext get respons getrespons async timeout get null refer follow exampl lead npe servlet spec clear behavior adopt timeout think null return mayb illeg state except illegalstateexcept instead seem case complet call timeout packag import java except ioexcept import java print writer printwrit import javax servlet async context asynccontext import javax servlet async event asyncev import javax servlet async listen asynclisten import javax servlet servlet except servletexcept import javax servlet servlet respons servletrespons import javax servlet annot web servlet webservlet import javax servlet http http servlet httpservlet import javax servlet http http servlet request httpservletrequest import javax servlet http http servlet respons httpservletrespons servlet implement class my servlet myservlet web servlet webservlet valu my servlet myservlet async support asyncsupport true public class my servlet myservlet extend http servlet httpservlet implement async listen asynclisten privat static final long serial versionui serialversionuid 1l protect void do get doget http servlet request httpservletrequest request http servlet respons httpservletrespons respons throw servlet except servletexcept except ioexcept final async context asynccontext async context asynccontext request start async startasync request respons async context asynccontext add listen addlisten async context asynccontext set timeout settimeout async context asynccontext start new runnabl overrid public void run system println enter async thread tri thread sleep system println asyncthread write respons servlet respons servletrespons response2 async context asynccontext get respons getrespons print writer printwrit writer response2 get writer getwrit writer write hello world system println asyncthread complet async context asynccontext complet catch except print stack trace printstacktrac overrid public void on complet oncomplet async event asyncev evt throw except ioexcept system println on complet oncomplet evt overrid public void on error onerror async event asyncev evt throw except ioexcept system println on error onerror evt overrid public void on start async onstartasync async event asyncev evt throw except ioexcept system println on start async onstartasync evt overrid public void on timeout ontimeout async event asyncev evt throw except ioexcept system println on timeout ontimeout evt evt get async context getasynccontext get respons getrespons get writer getwrit write time evt get async context getasynccontext complet","""java/org/apache/catalina/core/AsyncContextImpl.java""","2","2","2","1","12","0","11","0","6","0","2","29","29","29","13","29","1","2","1","25","481","53","401","149","236","27","200","273","123","150","7","7","7","3","3","0","67","67","67","31","enhancement"
"50358","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50358 Set correct state when stopping","Bug 50358  Embedded.stopInternal sets state to STARTING, should be STOPPING","embed stop intern stopintern set state start stop","","","""java/org/apache/catalina/startup/Embedded.java""","3","3","3","1","18","2","10","5","1","0","3","38","38","38","7","38","0","0","6","32","987","196","455","127","282","337","234","350","124","226","15","15","15","8","4","1","117","117","119","55","normal"
"50408","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50408 Fix <code>NoSuchMethodException</code> when using scoped variables with EL method invocation.","Bug 50408  Scoped EL variable in methodexpression is treated as Object","scope variabl methodexpress treat object","Consider following example:

<dl>
  <c:forEach items=""${pageContext.response.headerNames}"" var=""name"">
    <c:forEach items=""${pageContext.response.getHeaders(name)}"" var=""value"">
      <dt>${name}</dt><dd>${value}</dd>
    </c:forEach>
  </c:forEach>
</dl>

The ${name} is a String. The ${name.class.name} also proves that. The getHeaders(name) call however results in:

org.apache.jasper.el.JspELException: /test.jsp(23,12) '${pageContext.response.getHeaders(name)}' java.lang.NoSuchMethodException: org.apache.catalina.connector.ResponseFacade.getHeaders(java.lang.Object)

Another example which also results in NoSuchMethodException which suggests that an Object is been passed as argument:

<c:set var=""name"" value=""test"" />
${pageContext.response.getHeader(name)}

This works all fine on Glassfish v3.","consid follow exampl dl for each foreach item page context pagecontext respons header name headernam name for each foreach item page context pagecontext respons get header gethead name valu dt name dt dd valu dd for each foreach for each foreach dl name string name class name prof get header gethead name call howev result apach jasper jsp except jspelexcept jsp page context pagecontext respons get header gethead name java lang no such method except nosuchmethodexcept apach catalina connector respons facad responsefacad get header gethead java lang object anoth exampl result no such method except nosuchmethodexcept suggest object pass argument set name valu page context pagecontext respons get header gethead name work fine glassfish v3","""java/javax/el/CompositeELResolver.java""","2","2","2","1","10","0","9","0","2","0","0","14","14","14","9","14","0","1","0","13","215","31","165","60","82","19","85","121","48","73","5","5","6","3","2","0","34","34","38","26","normal"
"50448","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50448 Regression caused by http://svn.apache.org/viewvc?view=revision&revision=1036281","Bug 50448  StandardSession.expire causes IllegalStateException: getCreationTime: Session already invalidated","standard session standardsess expir caus illeg state except illegalstateexcept get creation time getcreationtim session alreadi invalid","Hi,

when verifying the fix for #50360 I ran into an issue with expired sessions during processExpires:

Dec 10, 2010 12:59:32 AM org.apache.catalina.core.ContainerBase backgroundProcess
WARNING: Exception processing manager de.javakaffee.web.msm.MemcachedBackupSessionManager[/] background process
java.lang.IllegalStateException: getCreationTime: Session already invalidated
	at org.apache.catalina.session.StandardSession.getCreationTime(StandardSession.java:1096)
	at org.apache.catalina.session.ManagerBase.remove(ManagerBase.java:802)
	at org.apache.catalina.session.StandardSession.expire(StandardSession.java:840)
	at org.apache.catalina.session.StandardSession.isValid(StandardSession.java:655)
	at org.apache.catalina.session.ManagerBase.processExpires(ManagerBase.java:609)
	at org.apache.catalina.session.ManagerBase.backgroundProcess(ManagerBase.java:594)
	at de.javakaffee.web.msm.MemcachedBackupSessionManager.backgroundProcess(MemcachedBackupSessionManager.java:1130)
	at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1214)

AFAICS in MemcachedBackupSessionManager I could override remove(Session session, boolean update) with calling super.remove(session, false) for invalid sessions.

Another option would be to change StandardSession.expire(StandardSession.java:840) so that it does not invoke manager.remove(this, true) but manager.remove(this, false).

Or even better: change ManagerBase.remove(ManagerBase.java:802) to invoke some session.getCreationTimeInternal() which skips validation.

What do you think?

Cheers,
Martin","hi verifi fix ran issu expir session process expir processexpir dec apach catalina core contain base containerbas background process backgroundprocess warn except process manag javakaffe web msm memcach backup session manag memcachedbackupsessionmanag background process java lang illeg state except illegalstateexcept get creation time getcreationtim session alreadi invalid apach catalina session standard session standardsess get creation time getcreationtim standard session standardsess java apach catalina session manag base managerbas remov manag base managerbas java apach catalina session standard session standardsess expir standard session standardsess java apach catalina session standard session standardsess is valid isvalid standard session standardsess java apach catalina session manag base managerbas process expir processexpir manag base managerbas java apach catalina session manag base managerbas background process backgroundprocess manag base managerbas java javakaffe web msm memcach backup session manag memcachedbackupsessionmanag background process backgroundprocess memcach backup session manag memcachedbackupsessionmanag java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java afaic memcach backup session manag memcachedbackupsessionmanag could overrid remov session session boolean updat call super remov session fals invalid session anoth option would chang standard session standardsess expir standard session standardsess java invok manag remov true manag remov fals even better chang manag base managerbas remov manag base managerbas java invok session get creation time intern getcreationtimeintern skip valid think cheer martin","""java/org/apache/catalina/Session.java""","0","0","0","0","0","0","0","0","1","0","4","0","32","32","0","32","0","0","0","32","319","84","42","41","4","193","40","41","41","0","0","0","0","0","0","5","0","0","0","0","normal"
"50448","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50448 Regression caused by http://svn.apache.org/viewvc?view=revision&revision=1036281","Bug 50448  StandardSession.expire causes IllegalStateException: getCreationTime: Session already invalidated","standard session standardsess expir caus illeg state except illegalstateexcept get creation time getcreationtim session alreadi invalid","Hi,

when verifying the fix for #50360 I ran into an issue with expired sessions during processExpires:

Dec 10, 2010 12:59:32 AM org.apache.catalina.core.ContainerBase backgroundProcess
WARNING: Exception processing manager de.javakaffee.web.msm.MemcachedBackupSessionManager[/] background process
java.lang.IllegalStateException: getCreationTime: Session already invalidated
	at org.apache.catalina.session.StandardSession.getCreationTime(StandardSession.java:1096)
	at org.apache.catalina.session.ManagerBase.remove(ManagerBase.java:802)
	at org.apache.catalina.session.StandardSession.expire(StandardSession.java:840)
	at org.apache.catalina.session.StandardSession.isValid(StandardSession.java:655)
	at org.apache.catalina.session.ManagerBase.processExpires(ManagerBase.java:609)
	at org.apache.catalina.session.ManagerBase.backgroundProcess(ManagerBase.java:594)
	at de.javakaffee.web.msm.MemcachedBackupSessionManager.backgroundProcess(MemcachedBackupSessionManager.java:1130)
	at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1214)

AFAICS in MemcachedBackupSessionManager I could override remove(Session session, boolean update) with calling super.remove(session, false) for invalid sessions.

Another option would be to change StandardSession.expire(StandardSession.java:840) so that it does not invoke manager.remove(this, true) but manager.remove(this, false).

Or even better: change ManagerBase.remove(ManagerBase.java:802) to invoke some session.getCreationTimeInternal() which skips validation.

What do you think?

Cheers,
Martin","hi verifi fix ran issu expir session process expir processexpir dec apach catalina core contain base containerbas background process backgroundprocess warn except process manag javakaffe web msm memcach backup session manag memcachedbackupsessionmanag background process java lang illeg state except illegalstateexcept get creation time getcreationtim session alreadi invalid apach catalina session standard session standardsess get creation time getcreationtim standard session standardsess java apach catalina session manag base managerbas remov manag base managerbas java apach catalina session standard session standardsess expir standard session standardsess java apach catalina session standard session standardsess is valid isvalid standard session standardsess java apach catalina session manag base managerbas process expir processexpir manag base managerbas java apach catalina session manag base managerbas background process backgroundprocess manag base managerbas java javakaffe web msm memcach backup session manag memcachedbackupsessionmanag background process backgroundprocess memcach backup session manag memcachedbackupsessionmanag java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java afaic memcach backup session manag memcachedbackupsessionmanag could overrid remov session session boolean updat call super remov session fals invalid session anoth option would chang standard session standardsess expir standard session standardsess java invok manag remov true manag remov fals even better chang manag base managerbas remov manag base managerbas java invok session get creation time intern getcreationtimeintern skip valid think cheer martin","""java/org/apache/catalina/manager/DummyProxySession.java""","1","1","1","1","3","0","2","0","1","0","0","33","33","33","1","33","0","0","0","33","195","38","126","74","18","31","26","60","42","18","1","1","1","1","0","0","33","33","33","33","normal"
"50448","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50448 Regression caused by http://svn.apache.org/viewvc?view=revision&revision=1036281","Bug 50448  StandardSession.expire causes IllegalStateException: getCreationTime: Session already invalidated","standard session standardsess expir caus illeg state except illegalstateexcept get creation time getcreationtim session alreadi invalid","Hi,

when verifying the fix for #50360 I ran into an issue with expired sessions during processExpires:

Dec 10, 2010 12:59:32 AM org.apache.catalina.core.ContainerBase backgroundProcess
WARNING: Exception processing manager de.javakaffee.web.msm.MemcachedBackupSessionManager[/] background process
java.lang.IllegalStateException: getCreationTime: Session already invalidated
	at org.apache.catalina.session.StandardSession.getCreationTime(StandardSession.java:1096)
	at org.apache.catalina.session.ManagerBase.remove(ManagerBase.java:802)
	at org.apache.catalina.session.StandardSession.expire(StandardSession.java:840)
	at org.apache.catalina.session.StandardSession.isValid(StandardSession.java:655)
	at org.apache.catalina.session.ManagerBase.processExpires(ManagerBase.java:609)
	at org.apache.catalina.session.ManagerBase.backgroundProcess(ManagerBase.java:594)
	at de.javakaffee.web.msm.MemcachedBackupSessionManager.backgroundProcess(MemcachedBackupSessionManager.java:1130)
	at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1214)

AFAICS in MemcachedBackupSessionManager I could override remove(Session session, boolean update) with calling super.remove(session, false) for invalid sessions.

Another option would be to change StandardSession.expire(StandardSession.java:840) so that it does not invoke manager.remove(this, true) but manager.remove(this, false).

Or even better: change ManagerBase.remove(ManagerBase.java:802) to invoke some session.getCreationTimeInternal() which skips validation.

What do you think?

Cheers,
Martin","hi verifi fix ran issu expir session process expir processexpir dec apach catalina core contain base containerbas background process backgroundprocess warn except process manag javakaffe web msm memcach backup session manag memcachedbackupsessionmanag background process java lang illeg state except illegalstateexcept get creation time getcreationtim session alreadi invalid apach catalina session standard session standardsess get creation time getcreationtim standard session standardsess java apach catalina session manag base managerbas remov manag base managerbas java apach catalina session standard session standardsess expir standard session standardsess java apach catalina session standard session standardsess is valid isvalid standard session standardsess java apach catalina session manag base managerbas process expir processexpir manag base managerbas java apach catalina session manag base managerbas background process backgroundprocess manag base managerbas java javakaffe web msm memcach backup session manag memcachedbackupsessionmanag background process backgroundprocess memcach backup session manag memcachedbackupsessionmanag java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java afaic memcach backup session manag memcachedbackupsessionmanag could overrid remov session session boolean updat call super remov session fals invalid session anoth option would chang standard session standardsess expir standard session standardsess java invok manag remov true manag remov fals even better chang manag base managerbas remov manag base managerbas java invok session get creation time intern getcreationtimeintern skip valid think cheer martin","""java/org/apache/catalina/manager/DummyProxySession.java""","1","1","1","1","3","0","2","0","1","0","0","33","33","33","1","33","0","0","0","33","195","38","126","74","18","31","26","60","42","18","1","1","1","1","0","0","33","33","33","33","normal"
"50448","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50448 Regression caused by http://svn.apache.org/viewvc?view=revision&revision=1036281","Bug 50448  StandardSession.expire causes IllegalStateException: getCreationTime: Session already invalidated","standard session standardsess expir caus illeg state except illegalstateexcept get creation time getcreationtim session alreadi invalid","Hi,

when verifying the fix for #50360 I ran into an issue with expired sessions during processExpires:

Dec 10, 2010 12:59:32 AM org.apache.catalina.core.ContainerBase backgroundProcess
WARNING: Exception processing manager de.javakaffee.web.msm.MemcachedBackupSessionManager[/] background process
java.lang.IllegalStateException: getCreationTime: Session already invalidated
	at org.apache.catalina.session.StandardSession.getCreationTime(StandardSession.java:1096)
	at org.apache.catalina.session.ManagerBase.remove(ManagerBase.java:802)
	at org.apache.catalina.session.StandardSession.expire(StandardSession.java:840)
	at org.apache.catalina.session.StandardSession.isValid(StandardSession.java:655)
	at org.apache.catalina.session.ManagerBase.processExpires(ManagerBase.java:609)
	at org.apache.catalina.session.ManagerBase.backgroundProcess(ManagerBase.java:594)
	at de.javakaffee.web.msm.MemcachedBackupSessionManager.backgroundProcess(MemcachedBackupSessionManager.java:1130)
	at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1214)

AFAICS in MemcachedBackupSessionManager I could override remove(Session session, boolean update) with calling super.remove(session, false) for invalid sessions.

Another option would be to change StandardSession.expire(StandardSession.java:840) so that it does not invoke manager.remove(this, true) but manager.remove(this, false).

Or even better: change ManagerBase.remove(ManagerBase.java:802) to invoke some session.getCreationTimeInternal() which skips validation.

What do you think?

Cheers,
Martin","hi verifi fix ran issu expir session process expir processexpir dec apach catalina core contain base containerbas background process backgroundprocess warn except process manag javakaffe web msm memcach backup session manag memcachedbackupsessionmanag background process java lang illeg state except illegalstateexcept get creation time getcreationtim session alreadi invalid apach catalina session standard session standardsess get creation time getcreationtim standard session standardsess java apach catalina session manag base managerbas remov manag base managerbas java apach catalina session standard session standardsess expir standard session standardsess java apach catalina session standard session standardsess is valid isvalid standard session standardsess java apach catalina session manag base managerbas process expir processexpir manag base managerbas java apach catalina session manag base managerbas background process backgroundprocess manag base managerbas java javakaffe web msm memcach backup session manag memcachedbackupsessionmanag background process backgroundprocess memcach backup session manag memcachedbackupsessionmanag java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java afaic memcach backup session manag memcachedbackupsessionmanag could overrid remov session session boolean updat call super remov session fals invalid session anoth option would chang standard session standardsess expir standard session standardsess java invok manag remov true manag remov fals even better chang manag base managerbas remov manag base managerbas java invok session get creation time intern getcreationtimeintern skip valid think cheer martin","""java/org/apache/catalina/session/ManagerBase.java""","2","2","2","1","13","1","7","4","2","0","4","77","77","77","27","77","0","0","7","70","1435","271","712","258","406","453","324","490","216","274","13","13","15","3","4","1","158","158","167","81","normal"
"50448","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50448 Regression caused by http://svn.apache.org/viewvc?view=revision&revision=1036281","Bug 50448  StandardSession.expire causes IllegalStateException: getCreationTime: Session already invalidated","standard session standardsess expir caus illeg state except illegalstateexcept get creation time getcreationtim session alreadi invalid","Hi,

when verifying the fix for #50360 I ran into an issue with expired sessions during processExpires:

Dec 10, 2010 12:59:32 AM org.apache.catalina.core.ContainerBase backgroundProcess
WARNING: Exception processing manager de.javakaffee.web.msm.MemcachedBackupSessionManager[/] background process
java.lang.IllegalStateException: getCreationTime: Session already invalidated
	at org.apache.catalina.session.StandardSession.getCreationTime(StandardSession.java:1096)
	at org.apache.catalina.session.ManagerBase.remove(ManagerBase.java:802)
	at org.apache.catalina.session.StandardSession.expire(StandardSession.java:840)
	at org.apache.catalina.session.StandardSession.isValid(StandardSession.java:655)
	at org.apache.catalina.session.ManagerBase.processExpires(ManagerBase.java:609)
	at org.apache.catalina.session.ManagerBase.backgroundProcess(ManagerBase.java:594)
	at de.javakaffee.web.msm.MemcachedBackupSessionManager.backgroundProcess(MemcachedBackupSessionManager.java:1130)
	at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1214)

AFAICS in MemcachedBackupSessionManager I could override remove(Session session, boolean update) with calling super.remove(session, false) for invalid sessions.

Another option would be to change StandardSession.expire(StandardSession.java:840) so that it does not invoke manager.remove(this, true) but manager.remove(this, false).

Or even better: change ManagerBase.remove(ManagerBase.java:802) to invoke some session.getCreationTimeInternal() which skips validation.

What do you think?

Cheers,
Martin","hi verifi fix ran issu expir session process expir processexpir dec apach catalina core contain base containerbas background process backgroundprocess warn except process manag javakaffe web msm memcach backup session manag memcachedbackupsessionmanag background process java lang illeg state except illegalstateexcept get creation time getcreationtim session alreadi invalid apach catalina session standard session standardsess get creation time getcreationtim standard session standardsess java apach catalina session manag base managerbas remov manag base managerbas java apach catalina session standard session standardsess expir standard session standardsess java apach catalina session standard session standardsess is valid isvalid standard session standardsess java apach catalina session manag base managerbas process expir processexpir manag base managerbas java apach catalina session manag base managerbas background process backgroundprocess manag base managerbas java javakaffe web msm memcach backup session manag memcachedbackupsessionmanag background process backgroundprocess memcach backup session manag memcachedbackupsessionmanag java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java afaic memcach backup session manag memcachedbackupsessionmanag could overrid remov session session boolean updat call super remov session fals invalid session anoth option would chang standard session standardsess expir standard session standardsess java invok manag remov true manag remov fals even better chang manag base managerbas remov manag base managerbas java invok session get creation time intern getcreationtimeintern skip valid think cheer martin","""java/org/apache/catalina/session/StandardSession.java""","2","2","2","1","20","2","10","7","4","0","10","67","67","67","21","67","1","0","7","59","1894","380","862","267","529","654","381","563","201","362","20","20","26","7","5","1","174","174","191","97","normal"
"50448","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50448 Regression caused by http://svn.apache.org/viewvc?view=revision&revision=1036281","Bug 50448  StandardSession.expire causes IllegalStateException: getCreationTime: Session already invalidated","standard session standardsess expir caus illeg state except illegalstateexcept get creation time getcreationtim session alreadi invalid","Hi,

when verifying the fix for #50360 I ran into an issue with expired sessions during processExpires:

Dec 10, 2010 12:59:32 AM org.apache.catalina.core.ContainerBase backgroundProcess
WARNING: Exception processing manager de.javakaffee.web.msm.MemcachedBackupSessionManager[/] background process
java.lang.IllegalStateException: getCreationTime: Session already invalidated
	at org.apache.catalina.session.StandardSession.getCreationTime(StandardSession.java:1096)
	at org.apache.catalina.session.ManagerBase.remove(ManagerBase.java:802)
	at org.apache.catalina.session.StandardSession.expire(StandardSession.java:840)
	at org.apache.catalina.session.StandardSession.isValid(StandardSession.java:655)
	at org.apache.catalina.session.ManagerBase.processExpires(ManagerBase.java:609)
	at org.apache.catalina.session.ManagerBase.backgroundProcess(ManagerBase.java:594)
	at de.javakaffee.web.msm.MemcachedBackupSessionManager.backgroundProcess(MemcachedBackupSessionManager.java:1130)
	at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1214)

AFAICS in MemcachedBackupSessionManager I could override remove(Session session, boolean update) with calling super.remove(session, false) for invalid sessions.

Another option would be to change StandardSession.expire(StandardSession.java:840) so that it does not invoke manager.remove(this, true) but manager.remove(this, false).

Or even better: change ManagerBase.remove(ManagerBase.java:802) to invoke some session.getCreationTimeInternal() which skips validation.

What do you think?

Cheers,
Martin","hi verifi fix ran issu expir session process expir processexpir dec apach catalina core contain base containerbas background process backgroundprocess warn except process manag javakaffe web msm memcach backup session manag memcachedbackupsessionmanag background process java lang illeg state except illegalstateexcept get creation time getcreationtim session alreadi invalid apach catalina session standard session standardsess get creation time getcreationtim standard session standardsess java apach catalina session manag base managerbas remov manag base managerbas java apach catalina session standard session standardsess expir standard session standardsess java apach catalina session standard session standardsess is valid isvalid standard session standardsess java apach catalina session manag base managerbas process expir processexpir manag base managerbas java apach catalina session manag base managerbas background process backgroundprocess manag base managerbas java javakaffe web msm memcach backup session manag memcachedbackupsessionmanag background process backgroundprocess memcach backup session manag memcachedbackupsessionmanag java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java afaic memcach backup session manag memcachedbackupsessionmanag could overrid remov session session boolean updat call super remov session fals invalid session anoth option would chang standard session standardsess expir standard session standardsess java invok manag remov true manag remov fals even better chang manag base managerbas remov manag base managerbas java invok session get creation time intern getcreationtimeintern skip valid think cheer martin","""java/org/apache/catalina/session/StandardSession.java""","2","2","2","1","20","2","10","7","4","0","10","67","67","67","21","67","1","0","7","59","1894","380","862","267","529","654","381","563","201","362","20","20","26","7","5","1","174","174","191","97","normal"
"50453","26","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50453 Correctly handle multiple X-Forwarded-For headers","Bug 50453  Multiple X-Forwarded-For headers not handled by RemoteIP valve","multipl forward header handl remot remoteip valv","","","""java/org/apache/catalina/filters/RemoteIpFilter.java""","2","2","2","1","10","0","7","2","3","4","11","43","43","39","14","43","0","0","6","37","994","89","390","138","209","516","182","271","130","141","15","15","15","5","3","1","89","89","95","51","normal"
"50453","26","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50453 Correctly handle multiple X-Forwarded-For headers","Bug 50453  Multiple X-Forwarded-For headers not handled by RemoteIP valve","multipl forward header handl remot remoteip valv","","","""java/org/apache/catalina/valves/RemoteIpValve.java""","2","2","2","1","14","0","8","6","1","4","3","22","22","18","8","22","0","0","4","18","751","49","208","71","123","495","105","154","73","81","14","14","14","5","3","2","46","46","47","28","normal"
"50453","26","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50453 Correctly handle multiple X-Forwarded-For headers","Bug 50453  Multiple X-Forwarded-For headers not handled by RemoteIP valve","multipl forward header handl remot remoteip valv","","","""test/org/apache/catalina/filters/TestRemoteIpFilter.java""","1","1","1","1","17","3","12","1","4","0","2","24","24","24","2","24","0","1","0","23","529","121","348","156","255","61","288","318","155","163","2","2","2","1","1","0","27","27","27","24","normal"
"50453","26","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50453 Correctly handle multiple X-Forwarded-For headers","Bug 50453  Multiple X-Forwarded-For headers not handled by RemoteIP valve","multipl forward header handl remot remoteip valv","","","""test/org/apache/catalina/filters/TestRemoteIpFilter.java""","1","1","1","1","17","3","12","1","4","0","2","24","24","24","2","24","0","1","0","23","529","121","348","156","255","61","288","318","155","163","2","2","2","1","1","0","27","27","27","24","normal"
"50453","26","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50453 Correctly handle multiple X-Forwarded-For headers","Bug 50453  Multiple X-Forwarded-For headers not handled by RemoteIP valve","multipl forward header handl remot remoteip valv","","","""test/org/apache/catalina/valves/TestRemoteIpValve.java""","1","1","1","1","25","5","18","2","2","0","0","23","23","23","5","23","0","1","0","22","659","152","437","176","368","70","376","404","174","230","3","3","3","1","1","0","25","25","25","23","normal"
"50453","26","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50453 Correctly handle multiple X-Forwarded-For headers","Bug 50453  Multiple X-Forwarded-For headers not handled by RemoteIP valve","multipl forward header handl remot remoteip valv","","","""test/org/apache/catalina/valves/TestRemoteIpValve.java""","1","1","1","1","25","5","18","2","2","0","0","23","23","23","5","23","0","1","0","22","659","152","437","176","368","70","376","404","174","230","3","3","3","1","1","0","25","25","25","23","normal"
"50460","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50460 Avoid leak caused by using a cached exception instance","Bug 50460  First access to a jspx page causes classloader leak in JspDocumentParser","first access jspx page caus classload leak jsp document parser jspdocumentpars","","","""java/org/apache/jasper/compiler/JspDocumentParser.java""","5","5","6","1","37","2","33","2","2","3","4","31","31","28","17","31","1","13","0","17","1482","125","1111","206","827","254","337","511","145","366","39","39","46","12","5","0","176","176","214","51","normal"
"50460","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50460 Avoid leak caused by using a cached exception instance","Bug 50460  First access to a jspx page causes classloader leak in JspDocumentParser","first access jspx page caus classload leak jsp document parser jspdocumentpars","","","""java/org/apache/naming/resources/ImmutableNameNotFoundException.java""","1","1","1","1","1","0","1","1","1","0","1","5","5","5","0","5","0","0","0","5","47","6","17","16","1","29","4","10","10","0","1","1","1","1","0","2","5","5","5","5","normal"
"50467","22","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50467 Protect against NPE that will cause Poller to fail","Bug 50467  Occasional NIO connector lockups on high load","occasion nio connector lockup high load","We've been running Tomcat 6.0.29 on FC8 2.6.21 with tens of thousands of long polling threads which usually work fine. Every few days though we will experience a sudden lockup of the NIO connector and it has to be restarted. These have been seen to be accompanied by the following stack trace:

Exception in thread ""http-8082-ClientPoller-0"" java.lang.NullPointerException
	at org.apache.tomcat.util.net.NioEndpoint$Poller.run(NioEndpoint.java:1620)
	at java.lang.Thread.run(Thread.java:662)

Looking at the source it seems the issue is likely to be a race condition where access() is called on a null attachment, probably while it's in the process of being cancelled:

                    while (iterator != null && iterator.hasNext()) {
                        SelectionKey sk = (SelectionKey) iterator.next();
                        KeyAttachment attachment = (KeyAttachment)sk.attachment();
/*NPE*/                 attachment.access();
                        iterator.remove();
                        processKey(sk, attachment);
                    }//while","run tomcat c8 fc8 ten thousand long poll thread usual work fine everi day though experi sudden lockup nio connector restart seen accompani follow stack trace except thread http client poller clientpol java lang null pointer except nullpointerexcept apach tomcat util net nio endpoint nioendpoint poller run nio endpoint nioendpoint java java lang thread run thread java look sourc seem issu like race condit access call null attach probabl process cancel iter null iter ha next hasnext select key selectionkey sk select key selectionkey iter next key attach keyattach attach key attach keyattach sk attach npe attach access iter remov process key processkey sk attach","""java/org/apache/tomcat/util/net/NioEndpoint.java""","2","2","3","1","10","0","9","1","13","0","8","116","121","121","52","121","0","0","15","106","1634","177","1208","321","850","280","662","988","325","663","26","26","27","8","7","0","340","340","385","139","major"
"50477","22","Filip Hanik","Fix bug https://issues.apache.org/bugzilla/show_bug.cgi?id=50477","Bug 50477  If you set 0 to initialSize, can't obtain Connection by using getConnectionAsync method.","set initi size initials obtain connect use get connect async getconnectionasync method","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","4","4","4","1","22","0","15","7","3","2","2","44","44","42","19","44","1","1","16","26","1178","95","709","148","484","408","345","530","151","379","18","18","18","8","6","1","183","183","198","85","normal"
"50500","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50500 Use correct coercions (as per the EL spec) for arithmetic operations involving string values containing '.', 'e' or 'E'. Based on a patch by Brian Weisleder.","Bug 50500  EL evaluation of floating-point String value vs BigInteger loses precision","evalu float point floatingpoint string valu v big integ biginteg lose precis","According to the EL spec ch.1.7.1,
the A+B,A-B,A*B expressions when A is a ""String containing ., e, or E"" and B is a BigInteger have to be evaluated as follows:

""coerce both A and B to BigDecimal and apply operator""

The actual implementation though, instead of coercing A as String -> BigDecimal, does two coercions:  String -> Double -> BigDecimal, which produces a different result.

To reproduce, run the following JSP page:
<%
  pageContext.setAttribute(""a"", ""1.1"");
  pageContext.setAttribute(""b"", new java.math.BigInteger(""1000000000000000000000""));
  // ""c"" is used to explicitly coerce arguments to BigDecimal
  pageContext.setAttribute(""c"", new java.math.BigDecimal(""0""));
%>${a + b}<br>
${(a+c) + (b+c)}<br>
${a - b}<br>
${(a+c) - (b+c)}<br>
${a * b}<br>
${(a+c) * (b+c)}

Actual result:
1000000000000000000001.100000000000000088817841970012523233890533447265625
1000000000000000000001.1
-999999999999999999998.899999999999999911182158029987476766109466552734375
-999999999999999999998.9
1100000000000000088817.841970012523233890533447265625000000000000000000000
1100000000000000000000.0 

Expected result:
1000000000000000000001.1
1000000000000000000001.1
-999999999999999999998.9
-999999999999999999998.9
1100000000000000000000.0 
1100000000000000000000.0 

I think it is a minor issue, though.
This is reproducible in the current tc6.0.x as well.

Maybe o.a.el.lang.ELArithmetic#add(Object, Object) should delegate to BIGDECIMAL instead of DOUBLE with these types of arguments.","accord spec ch express string contain big integ biginteg evalu follow coerc big decim bigdecim appli oper actual implement though instead coerc string big decim bigdecim two coercion string doubl big decim bigdecim produc differ result reproduc run follow jsp page page context pagecontext set attribut setattribut page context pagecontext set attribut setattribut new java math big integ biginteg use explicitli coerc argument big decim bigdecim page context pagecontext set attribut setattribut new java math big decim bigdecim br br br br br actual result expect result think minor issu though reproduc current tc6 well mayb lang arithmet elarithmet add object object deleg bigdecim instead doubl type argument","""java/org/apache/el/lang/ELArithmetic.java""","1","1","2","1","6","0","5","0","5","7","5","41","49","42","0","49","0","0","38","11","409","82","300","110","147","27","113","194","78","116","5","5","8","5","1","0","76","76","99","55","minor"
"50503","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50503. When web application has a version, Engine level Clustering works correctly.","Bug 50503  Engine level Clustering does not work correctly if the web application has a version.","engin level cluster work correctli web applic version","In Engine level clustering, the name of the cluster manager is  ""HostName#contextName"". 
SimpleTcpCluster#getManagerName(String, Manager) is as follows. 
====
public String getManagerName(String name, Manager manager) {
    String clusterName = name ;
    if ( clusterName == null ) clusterName = manager.getContainer().getName();
    if(getContainer() instanceof Engine) {
        Container context = manager.getContainer() ;
        if(context != null && context instanceof Context) {
            Container host = ((Context)context).getParent();
            if(host != null && host instanceof Host && clusterName!=null && !(clusterName.indexOf(""#"")>=0))
                clusterName = host.getName() +""#"" + clusterName ;
        }
    }
    return clusterName;
}
====

In this method, clusterName.indexOf(""#"") >= 0 is checked. 

Because the context name becomes contextName##version if the web application has a version, 
the name of the cluster manager doesn't become a format of ""HostName#contextName"". 
As a result, Engine level Clustering doesn't work correctly. 

Best regards.","engin level cluster name cluster manag host name hostnam context name contextnam simpl tcp cluster simpletcpclust get manag name getmanagernam string manag follow public string get manag name getmanagernam string name manag manag string cluster name clusternam name cluster name clusternam null cluster name clusternam manag get contain getcontain get name getnam get contain getcontain instanceof engin contain context manag get contain getcontain context null context instanceof context contain host context context get parent getpar host null host instanceof host cluster name clusternam null cluster name clusternam index of indexof cluster name clusternam host get name getnam cluster name clusternam return cluster name clusternam method cluster name clusternam index of indexof check context name becom context name contextnam version web applic version name cluster manag doesn becom format host name hostnam context name contextnam result engin level cluster doesn work correctli best regard","""java/org/apache/catalina/ha/tcp/SimpleTcpCluster.java""","1","1","2","1","10","0","6","3","1","0","13","62","62","62","16","62","0","0","8","54","965","126","509","204","260","330","240","355","158","197","7","7","9","1","3","1","118","118","131","62","normal"
"50541","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50541 Add support for sizeLimit and timeLimit on the JNDIRealm","Bug 50541  JNDIRealm: support configuring LDAP sizeLimit (countLimit in SearchControls)","realm jndirealm support configur ldap size limit sizelimit count limit countlimit search control searchcontrol","","","""java/org/apache/catalina/realm/JNDIRealm.java""","2","2","3","1","21","3","11","7","2","0","3","79","79","79","33","79","0","2","23","54","2259","477","957","288","626","828","464","694","247","447","28","28","33","14","7","1","231","227","254","125","normal"
"50547","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50547. Add time stamp for CHANGE_SESSION_ID and SESSION_EXPIRED message.","Bug 50547  The CHANGE_SESSION_ID message that received during cluster session synchronization is dropped.","chang session id messag receiv cluster session synchron drop","Neither CHANGE_SESSION_ID message nor SESSION_EXPIRED message set timestamp. 
If these messages are received during cluster sessions synchronization in DeltaManager startup, 
because the timestamp is not set, they are dropped. 

I made a patch that add timestamp for CHANGE_SESSION_ID and SESSION_EXPIRED message.

Best Regards.","neither chang session id messag session expir messag set timestamp messag receiv cluster session synchron delta manag deltamanag startup timestamp set drop made patch add timestamp chang session id session expir messag best regard","""java/org/apache/catalina/ha/session/DeltaManager.java""","2","2","2","1","15","0","9","5","1","0","4","83","83","83","33","83","0","0","26","57","1510","132","912","238","599","483","467","671","226","445","14","14","18","4","7","1","215","203","236","94","normal"
"50550","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50550 Make sure PROPFIND,MKCOL,PROPFIND returns 404,201,207 rather than 404,201,404","Bug 50550  PropFind 404 error after MkCol succes","prop find propfind error mk col mkcol succ","","","""java/org/apache/naming/resources/ProxyDirContext.java""","1","1","2","1","19","0","7","11","1","0","4","70","70","70","12","70","0","0","7","63","1703","205","651","267","314","849","240","372","144","228","16","16","23","7","4","1","129","129","141","92","normal"
"50552","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50552 Avoid NPE that hides error when using Ant tasks (schultz)","Bug 50552  Ant Tasks give a null pointer exception when an error occurs, masking true error","ant task give null pointer except error occur mask true error","","","""java/org/apache/catalina/ant/BaseRedirectorHelperTask.java""","1","1","1","1","12","0","6","6","1","0","0","19","19","19","10","19","0","1","7","11","361","34","145","44","78","182","69","102","40","62","4","4","4","1","2","1","32","32","32","19","normal"
"50554","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50554 Various FindBugs / Eclipse warnings Silence the false positives","Bug 50554  Bad use of getClass() could potentially lead to concurrency bugs in future","bad use get class getclass could potenti lead concurr bug futur","","","""java/org/apache/naming/java/javaURLContextFactory.java""","3","3","4","1","17","0","13","4","1","0","2","2","2","2","0","2","0","0","0","2","120","29","41","19","16","50","17","25","15","10","4","4","5","1","2","1","6","6","8","2","normal"
"50570","302","Christopher Schultz","Fixed bug #50570 - Allow explicit use of FIPS mode in APR lifecycle listener - Added ""FIPSMode"" attribute to AprLifecycleListener that causes OpenSSL to go into FIPS mode","Bug 50570  Allow explicit use of FIPS mode in APR lifecycle listener","allow explicit use fip mode apr lifecycl listen","","","""java/org/apache/catalina/core/AprLifecycleListener.java""","2","2","2","1","16","1","14","1","1","4","15","10","10","6","0","10","0","3","0","7","259","39","179","63","120","44","95","123","55","68","7","7","7","4","3","0","25","25","25","18","enhancement"
"50570","302","Christopher Schultz","Fixed bug #50570 - Allow explicit use of FIPS mode in APR lifecycle listener - Added ""FIPSMode"" attribute to AprLifecycleListener that causes OpenSSL to go into FIPS mode","Bug 50570  Allow explicit use of FIPS mode in APR lifecycle listener","allow explicit use fip mode apr lifecycl listen","","","""java/org/apache/tomcat/jni/SSL.java""","0","0","0","0","0","0","0","0","1","15","120","0","15","0","0","15","0","0","0","15","344","39","140","139","120","165","136","137","137","0","0","0","0","0","0","1","0","0","0","0","enhancement"
"50582","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50582 Refactor access logging so chunked encoding is not forced if bytes sent is logged","Bug 50582  Small JSPs do not set Content-Length (and use chunked encoding) if AccessLogValve is configured","small jsp set content length use chunk encod access log valv accesslogvalv configur","","","""java/org/apache/catalina/connector/CoyoteAdapter.java""","10","10","12","4","66","6","47","12","1","3","7","15","15","12","1","15","0","0","7","8","1160","166","766","153","565","228","402","552","136","416","33","33","34","17","6","0","151","151","181","60","regression"
"50582","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50582 Refactor access logging so chunked encoding is not forced if bytes sent is logged","Bug 50582  Small JSPs do not set Content-Length (and use chunked encoding) if AccessLogValve is configured","small jsp set content length use chunk encod access log valv accesslogvalv configur","","","""java/org/apache/catalina/valves/AccessLogValve.java""","2","1","2","1","11","0","8","2","28","0","5","74","75","75","35","75","0","7","5","63","1454","203","815","271","447","438","349","525","214","311","21","10","21","4","4","1","169","146","180","79","regression"
"50582","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50582 Refactor access logging so chunked encoding is not forced if bytes sent is logged","Bug 50582  Small JSPs do not set Content-Length (and use chunked encoding) if AccessLogValve is configured","small jsp set content length use chunk encod access log valv accesslogvalv configur","","","""java/org/apache/catalina/valves/JDBCAccessLogValve.java""","1","1","1","1","14","0","7","5","1","0","1","29","29","29","22","29","0","0","4","25","644","98","267","90","154","280","146","198","84","114","10","10","10","3","4","1","50","50","50","31","regression"
"50582","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50582 Refactor access logging so chunked encoding is not forced if bytes sent is logged","Bug 50582  Small JSPs do not set Content-Length (and use chunked encoding) if AccessLogValve is configured","small jsp set content length use chunk encod access log valv accesslogvalv configur","","","""java/org/apache/catalina/valves/JDBCAccessLogValve.java""","1","1","1","1","14","0","7","5","1","0","1","29","29","29","22","29","0","0","4","25","644","98","267","90","154","280","146","198","84","114","10","10","10","3","4","1","50","50","50","31","regression"
"50582","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50582 Refactor access logging so chunked encoding is not forced if bytes sent is logged","Bug 50582  Small JSPs do not set Content-Length (and use chunked encoding) if AccessLogValve is configured","small jsp set content length use chunk encod access log valv accesslogvalv configur","","","""java/org/apache/coyote/http11/AbstractOutputBuffer.java""","2","2","2","1","19","2","10","6","2","0","2","20","22","22","10","22","0","0","6","16","543","122","236","67","141","186","133","184","67","117","7","5","8","4","3","1","52","50","55","25","regression"
"50591","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50591 Do not throw NullPointerException when ReplicationValve#filter is not set.","Bug 50591  NPE in ReplicationValve in 7.0.6","npe replic valv replicationvalv","","","""java/org/apache/catalina/ha/tcp/ReplicationValve.java""","2","2","2","1","13","0","8","4","1","0","3","33","33","33","13","33","0","0","11","22","620","64","342","109","200","214","145","229","98","131","13","13","16","5","5","1","85","85","92","37","regression"
"50597","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50597 Don't instantiate a new instance of a Filter if an instance was provided via the ServletContext.addFilter(String, Filter) method. Patch provided by Ismael Juma.","Bug 50597  Class.newInstance is used for Dynamic instance filters causing InstantiationException","class new instanc newinst use dynam instanc filter caus instanti except instantiationexcept","Class.newInstance is called even when the following method ServletContext.addFilter method is called:

javax.servlet.FilterRegistration.Dynamic addFilter(java.lang.String s, javax.servlet.Filter filter);

This leads to an InstantiationException at runtime if there is no no-args constructor for the filter (pasted below). I'll supply a simple patch that fixes the issue for me.

SEVERE: Exception starting filter testFilter
java.lang.InstantiationException: test.TestFilter
        at java.lang.Class.newInstance0(Class.java:340)
        at java.lang.Class.newInstance(Class.java:308)
        at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultIn
stanceManager.java:119)
        at org.apache.catalina.core.ApplicationFilterConfig.getFilter(Applicatio
nFilterConfig.java:252)
        at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(Applica
tionFilterConfig.java:372)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFi
lterConfig.java:98)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.
java:4382)
        at org.apache.catalina.core.StandardContext$2.call(StandardContext.java:
5040)
        at org.apache.catalina.core.StandardContext$2.call(StandardContext.java:5035)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)","class new instanc newinst call even follow method servlet context servletcontext add filter addfilt method call javax servlet filter registr filterregistr dynam add filter addfilt java lang string javax servlet filter filter lead instanti except instantiationexcept runtim no arg noarg constructor filter past ll suppli simpl patch fix issu sever except start filter test filter testfilt java lang instanti except instantiationexcept test filter testfilt java lang class new instance0 newinstance0 class java java lang class new instanc newinst class java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default in defaultin stanc manag stancemanag java apach catalina core applic filter config applicationfilterconfig get filter getfilt applicatio filter config nfilterconfig java apach catalina core applic filter config applicationfilterconfig set filter def setfilterdef applica tion filter config tionfilterconfig java apach catalina core applic filter config applicationfilterconfig init applic fi applicationfi lter config lterconfig java apach catalina core standard context standardcontext filter start filterstart standard context standardcontext java apach catalina core standard context standardcontext call standard context standardcontext java apach catalina core standard context standardcontext call standard context standardcontext java java util concurr futur task futuretask sync inner run innerrun futur task futuretask java java util concurr futur task futuretask run futur task futuretask java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""java/org/apache/catalina/core/ApplicationFilterConfig.java""","2","2","2","1","19","2","11","5","1","0","3","16","16","16","5","16","5","4","0","7","447","84","231","75","131","133","103","146","60","86","7","7","7","1","4","1","42","42","44","16","normal"
"50598","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50598 Correct URL for manager text interface","Bug 50598  Sample build.xml uses wrong manager.url","sampl build xml us wrong manag url","","","""java/org/apache/catalina/ant/AbstractCatalinaTask.java""","2","2","3","1","17","1","12","3","1","0","1","11","11","11","4","11","0","0","0","11","290","52","155","46","96","84","75","108","42","66","21","21","23","7","6","1","32","32","36","17","normal"
"50600","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50600 Prevent ConcurrentModificationException when removing WAR via FarmWarDeployer","Bug 50600  ConcurrentModificationException removing WAR via FarmWarDeployer","concurr modif except concurrentmodificationexcept remov via farm war deploy farmwardeploy","The following exception was reported via $work

WARNING: Exception processing cluster org.apache.catalina.ha.tcp.SimpleTcpCluster@68e4e358 background process
java.util.ConcurrentModificationException
at java.util.HashMap$HashIterator.nextEntry(HashMap.java:810)
at java.util.HashMap$EntryIterator.next(HashMap.java:851)
at java.util.HashMap$EntryIterator.next(HashMap.java:849)
at org.apache.catalina.ha.deploy.WarWatcher.check(WarWatcher.java:87)
at org.apache.catalina.ha.deploy.FarmWarDeployer.backgroundProcess(FarmWarDeployer.java:609)
at org.apache.catalina.ha.tcp.SimpleTcpCluster.backgroundProcess(SimpleTcpCluster.java:596)
at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1302)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1601)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1610)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1590)
at java.lang.Thread.run(Thread.java:636)

The root cause is removing the entry directly from the Map rather than from the iterator. I have a patch that I'll apply shortly.","follow except report via work warn except process cluster apach catalina tcp simpl tcp cluster simpletcpclust 68e4e358 background process java util concurr modif except concurrentmodificationexcept java util hash map hashmap hash iter hashiter next entri nextentri hash map hashmap java java util hash map hashmap entri iter entryiter next hash map hashmap java java util hash map hashmap entri iter entryiter next hash map hashmap java apach catalina deploy war watcher warwatch check war watcher warwatch java apach catalina deploy farm war deploy farmwardeploy background process backgroundprocess farm war deploy farmwardeploy java apach catalina tcp simpl tcp cluster simpletcpclust background process backgroundprocess simpl tcp cluster simpletcpclust java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor run contain base containerbas java java lang thread run thread java root caus remov entri directli map rather iter patch ll appli shortli","""java/org/apache/catalina/ha/deploy/WarWatcher.java""","1","1","1","1","7","0","5","2","3","0","1","18","18","18","6","18","0","0","2","16","246","38","124","46","65","85","61","94","44","50","7","7","7","1","2","1","31","31","34","18","normal"
"50601","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50601 Code clean-up Patch provided by sebb","Bug 50601  Redundant null checks before instanceof in equals()","redund null check instanceof equal","","","""java/org/apache/catalina/core/ApplicationTaglibDescriptor.java""","3","3","3","2","9","0","9","0","1","0","0","5","5","5","2","5","0","0","0","5","81","10","55","17","28","16","22","37","13","24","10","10","10","10","2","0","16","16","16","14","enhancement"
"50601","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50601 Code clean-up Patch provided by sebb","Bug 50601  Redundant null checks before instanceof in equals()","redund null check instanceof equal","","","""java/org/apache/catalina/deploy/LoginConfig.java""","2","2","2","2","9","0","7","1","1","0","1","13","13","13","4","13","0","0","0","13","227","50","110","30","72","67","53","85","26","59","16","16","16","16","2","1","35","35","35","28","enhancement"
"50601","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50601 Code clean-up Patch provided by sebb","Bug 50601  Redundant null checks before instanceof in equals()","redund null check instanceof equal","","","""java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java""","2","2","3","1","10","0","9","1","4","0","15","109","112","112","30","112","0","1","10","101","1520","175","1111","345","686","257","575","857","310","547","20","20","25","7","5","0","285","276","331","144","enhancement"
"50601","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50601 Code clean-up Patch provided by sebb","Bug 50601  Redundant null checks before instanceof in equals()","redund null check instanceof equal","","","""java/org/apache/el/parser/SimpleNode.java""","1","1","1","1","5","0","5","0","1","0","0","23","23","23","4","23","0","0","0","23","221","34","152","67","54","35","55","92","42","50","9","9","9","9","2","0","38","38","39","31","enhancement"
"50601","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50601 Code clean-up Patch provided by sebb","Bug 50601  Redundant null checks before instanceof in equals()","redund null check instanceof equal","","","""java/org/apache/naming/NamingEntry.java""","1","1","1","1","5","0","5","0","1","0","4","3","3","3","3","3","0","0","0","3","83","26","27","14","12","30","14","19","12","7","2","2","3","1","1","1","4","4","5","3","enhancement"
"50601","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50601 Code clean-up Patch provided by sebb","Bug 50601  Redundant null checks before instanceof in equals()","redund null check instanceof equal","","","""java/org/apache/tomcat/util/net/URL.java""","4","4","5","2","26","3","16","7","1","1","1","22","22","21","9","22","0","2","0","20","747","142","374","70","285","235","194","285","64","221","18","18","25","9","4","1","98","98","111","48","enhancement"
"50606","2","Konstantin Kolinko","Fix http://issues.apache.org/bugzilla/show_bug.cgi?id=50606 Improve CGIServlet: Provide support for specifying empty value for the executable init-param. Provide support for explicit additional arguments for the executable. Those were broken when implementing fix for bug 49657","Bug 50606  Error running CGI executable in Tomcat 6.0.30","error run cgi execut tomcat","","","""java/org/apache/catalina/servlets/CGIServlet.java""","4","4","5","1","45","4","26","14","5","0","8","32","32","32","25","32","1","3","24","4","1898","243","922","216","685","744","505","649","192","457","27","27","30","7","5","1","148","143","173","42","normal"
"50613","0","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50613 Fix concurrency bug around size calculation for the pool","Bug 50613  ConnectionPool.size corruption when evictions enabled:","connect pool connectionpool size corrupt evict enabl","When (the various forms of) eviction run on the connection pool, ConnectionPool.size goes negative.  This appears to be a concurrency problem.

Attached is a unit test that illustrates the issue.","variou form evict run connect pool connect pool connectionpool size go neg appear concurr problem attach unit illustr issu","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","4","4","4","1","21","0","14","7","3","2","2","45","45","43","20","45","1","1","16","27","1192","95","723","151","494","408","352","541","154","387","19","19","19","8","6","1","188","188","205","87","major"
"50620","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50620 Exceptions calling session.endAccess should not prevent recycle() from completing normally","Bug 50620  Session related errors prevent clean recycle of Request and Response objects by CoyoteAdapter","session relat error prevent clean recycl request respons object coyot adapt coyoteadapt","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","14","1","8","4","1","2","5","153","153","151","52","153","1","1","14","137","3063","591","1549","480","930","932","725","1089","397","692","22","22","24","11","5","1","366","366","407","223","major"
"50629","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50629 Make StandardContext.bindThread() and StandardContext.unbindThread() protected to allow use by sub-classes.","Bug 50629  Make the bindThread/unbindThread method protected","make bind thread bindthread unbind thread unbindthread method protect","In the latest Tomcat codes, I saw that a new thread is created for listener start, filter start and loadOnStartup. But the two methods bindThread and unbindThread is marked as private, how about making those methods protected ? So that other containers could use those two methods for their own initialization works.
Thanks.","latest tomcat code saw new thread creat listen start filter start load on startup loadonstartup two method bind thread bindthread unbind thread unbindthread mark privat make method protect contain could use two method initi work thank","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","6","0","3","296","296","296","119","296","0","13","9","274","6312","1267","3262","996","1978","1788","1459","2235","834","1401","53","53","68","9","5","1","681","681","736","386","enhancement"
"50631","10","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50631 InternalNioInputBuffer should honor maxHttpHeadSize This addresses CVE-2011-0534","Bug 50631  InternalNioInputBuffer should honor maxHttpHeadSize","intern nio input buffer internalnioinputbuff honor max http head size maxhttpheads","InternalNioInputBuffer automatically expands its buffer while reading in request line, effectively ignoring the maxHttpHeaderSize setting.","intern nio input buffer internalnioinputbuff automat expand buffer read request line effect ignor max http header size maxhttpheaders set","""java/org/apache/coyote/http11/InternalNioInputBuffer.java""","4","4","5","3","26","2","17","6","5","0","1","23","19","23","20","23","0","2","2","19","744","109","454","78","312","192","224","335","68","267","44","44","52","31","5","0","112","112","127","75","normal"
"50642","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50642 Better fix for HttpClient keep-alive thread triggered memory leaks","Bug 50642  keepAliveProtection doesn't work","keep aliv protect keepaliveprotect doesn work","","","""java/org/apache/catalina/core/JreMemoryLeakPreventionListener.java""","2","2","2","1","13","0","9","3","1","0","2","19","19","19","9","19","0","0","0","19","396","31","203","62","134","163","82","123","55","68","32","32","32","1","5","1","50","50","50","19","normal"
"50642","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50642 Better fix for HttpClient keep-alive thread triggered memory leaks","Bug 50642  keepAliveProtection doesn't work","keep aliv protect keepaliveprotect doesn work","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","6","0","3","298","298","298","120","298","0","11","11","276","6343","1267","3272","1002","1981","1809","1462","2240","837","1403","53","53","68","9","5","1","683","683","738","388","normal"
"50642","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50642 Better fix for HttpClient keep-alive thread triggered memory leaks","Bug 50642  keepAliveProtection doesn't work","keep aliv protect keepaliveprotect doesn work","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","6","2","31","3","21","6","4","1","6","86","86","85","35","86","3","13","19","51","3337","528","2004","460","1388","812","916","1389","404","985","43","43","49","28","10","0","482","482","520","210","normal"
"50642","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50642 Better fix for HttpClient keep-alive thread triggered memory leaks","Bug 50642  keepAliveProtection doesn't work","keep aliv protect keepaliveprotect doesn work","","","""java/org/apache/catalina/loader/WebappLoader.java""","3","3","4","1","23","3","15","4","1","0","4","39","39","39","11","39","0","7","4","28","1208","254","679","218","455","276","339","489","184","305","28","28","29","12","5","0","151","151","156","76","normal"
"50646","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50646 Ensure larger Tribes messages are fully read. Patch provided by Olivier Costet.","Bug 50646  Tribes ByteMessage will get corrupted if message size exceeds the underlying buffer size","tribe byte messag bytemessag get corrupt messag size exce underli buffer size","The Tribes ByteMessage class is used to transfer byte payloads in the context of the tribes communication framework.

Due to how the message is deserialized, there will be data loss (and hence corruption) if the message size exceeds the underlying buffer size.

The solution is to replace an ObjectInput#read(byte[]) call by ObjectInput#readFully(byte[]).

Fix is attached.","tribe byte messag bytemessag class use transfer byte payload context tribe commun framework due messag deseri data loss henc corrupt messag size exce underli buffer size solut replac object input objectinput read byte call object input objectinput read fulli read byte fix attach","""java/org/apache/catalina/tribes/ByteMessage.java""","1","1","1","1","7","0","3","4","1","0","0","6","6","6","1","6","0","0","0","6","103","11","30","16","8","62","14","22","14","8","3","3","3","1","1","2","8","8","8","6","major"
"50673","5","Konstantin Kolinko","Fix http://issues.apache.org/bugzilla/show_bug.cgi?id=50673 Improve Catalina shutdown when running as a service. Do not call System.exit().","Bug 50673  Error when stopping Tomcat using services.msc","error stop tomcat use servic msc","When stopping Tomcat using services.msc, an error message is displayed: ""Windows could not stop the Apache Tomcat 7 service on Local Computer. Error 109: The pipe has been ended.""

Despite this error, Tomcat appears to stop normally.

No such problem was encountered in 6.0.29.","stop tomcat use servic msc error messag display window could stop apach tomcat servic local comput error pipe end despit error tomcat appear stop normal problem encount","""java/org/apache/catalina/core/StandardServer.java""","2","2","2","1","15","2","8","5","1","0","3","36","36","36","15","36","0","1","6","29","807","175","385","135","214","250","190","273","113","160","18","18","18","11","3","1","79","79","80","53","normal"
"50673","5","Konstantin Kolinko","Fix http://issues.apache.org/bugzilla/show_bug.cgi?id=50673 Improve Catalina shutdown when running as a service. Do not call System.exit().","Bug 50673  Error when stopping Tomcat using services.msc","error stop tomcat use servic msc","When stopping Tomcat using services.msc, an error message is displayed: ""Windows could not stop the Apache Tomcat 7 service on Local Computer. Error 109: The pipe has been ended.""

Despite this error, Tomcat appears to stop normally.

No such problem was encountered in 6.0.29.","stop tomcat use servic msc error messag display window could stop apach tomcat servic local comput error pipe end despit error tomcat appear stop normal problem encount","""java/org/apache/catalina/startup/Catalina.java""","3","3","3","1","19","2","14","2","3","0","2","33","33","33","10","33","0","0","9","24","886","176","540","121","381","175","258","361","113","248","17","17","19","10","3","0","101","101","105","45","normal"
"50679","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50679 Update the FarmWarDeployer to support parallel deployment. This deliberately breaks the API since the meaning of a number of method parameters has changed (context path -> context name).","Bug 50679  FarmDeployer doesn't support parallel deployment","farm deploy farmdeploy doesn support parallel deploy","Version: Tomcat 7.0.6
Component: Catalina
OS: Windows 7 64bit

Overview:

Parallel deployment works like a charm in a non-clustered environment. But when deploying a versioned app (APPNAME##VERSION.war) to a farm deployer directory, it seems that the filename encoding of the ## delimiter is not translated correctly to identify the war file on the file system:

## is translated to %23%23

Reproduce:

1. Create a version app file
2. Deploy file to watched farm deployer directory

Expected result:
- Versioned app is copyied to cluster members and deployed

Actual result:
- Versioned app is NOT copyied to cluster members.

catalina.log displays the following error messages:


[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.ha.deploy.FarmWarDeployer- Installing webapp[/Shop##201101261] from C:\Apache\Tomcat7\cluster\webapps\Shop##201101261.war

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.ha.deploy.FarmWarDeployer- Cluster wide remove of web app /Shop##201101261

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] ERROR org.apache.catalina.ha.deploy.FarmWarDeployer- Unable to install WAR file
java.io.FileNotFoundException: C:\Apache\Tomcat7\cluster\webapps\Shop%23%23201101261.war (Das System kann die angegebene Datei nicht finden)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:106)
        at org.apache.catalina.ha.deploy.FileMessageFactory.<init>(FileMessageFactory.java:152)
        at org.apache.catalina.ha.deploy.FileMessageFactory.getInstance(FileMessageFactory.java:175)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.install(FarmWarDeployer.java:372)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.fileModified(FarmWarDeployer.java:468)
        at org.apache.catalina.ha.deploy.WarWatcher.check(WarWatcher.java:95)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.backgroundProcess(FarmWarDeployer.java:591)
        at org.apache.catalina.ha.tcp.SimpleTcpCluster.backgroundProcess(SimpleTcpCluster.java:627)
        at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1200)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1393)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1403)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1382)
        at java.lang.Thread.run(Thread.java:662)

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.startup.HostConfig- Deploying web application archive Shop##201101261.war

Relevant configuration in server.xml:

...
      <Host name=""sbwebapp1"" appBase=""${catalina.base}/cluster/webapps""
            unpackWARs=""true"" autoDeploy=""true"">

	     <Cluster className=""org.apache.catalina.ha.tcp.SimpleTcpCluster""
	               channelSendOptions=""8"">
	
	        <Manager className=""org.apache.catalina.ha.session.DeltaManager""
	                 expireSessionsOnShutdown=""true""
	                 notifyListenersOnReplication=""false""
									 stateTransferTimeout=""5""/>
	
	        <Channel className=""org.apache.catalina.tribes.group.GroupChannel"">
	          <Membership className=""org.apache.catalina.tribes.membership.McastService""
	                      address=""228.0.0.4""
	                      port=""45564""
	                      frequency=""500""
	                      dropTime=""3000""/>
	          <Receiver className=""org.apache.catalina.tribes.transport.nio.NioReceiver""
	                    address=""192.168.222.220""
	                    port=""4000""
	                    autoBind=""100""
	                    selectorTimeout=""5000""
	                    maxThreads=""6""/>
	
	          <Sender className=""org.apache.catalina.tribes.transport.ReplicationTransmitter"">
	            <Transport className=""org.apache.catalina.tribes.transport.nio.PooledParallelSender""/>
	          </Sender>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.TcpFailureDetector""/>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor""/>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.ThroughputInterceptor""/>
	        </Channel>
	
	        <Valve className=""org.apache.catalina.ha.tcp.ReplicationValve""
	                 filter="".*\.gif;.*\.js;.*\.jpg;.*\.png;.*\.htm;.*\.html;.*\.css;.*\.txt;.*\.swf;.*\.flv;""/>
	        <Valve className=""org.apache.catalina.ha.session.JvmRouteBinderValve""/>	        
	
	        <ClusterListener className=""org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener""/>
	        <ClusterListener className=""org.apache.catalina.ha.session.ClusterSessionListener""/>
	        
	        <Deployer className=""org.apache.catalina.ha.deploy.FarmWarDeployer""
	                  tempDir=""${catalina.base}/cluster/temp/""
	                  deployDir=""${catalina.base}/cluster/webapps/""
	                  watchDir=""${catalina.base}/cluster/deploy/""
	                  watchEnabled=""true""/>        
	      </Cluster>

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html
             Note: The pattern used is equivalent to using pattern=""common"" -->
        <Valve className=""org.apache.catalina.valves.AccessLogValve"" directory=""logs""  
               prefix=""ajp_access_"" suffix="".log""
               pattern=""%h %l %u %t &quot;%r&quot; %s %b"" resolveHosts=""false""/>             

      </Host>
...","version tomcat compon catalina window 64bit overview parallel deploy work like charm non cluster nonclust environ deploy version app appnam version farm deploy directori seem filenam encod delimit translat correctli identifi file file system translat reproduc creat version app file deploy file watch farm deploy directori expect result version app copyi cluster member deploy actual result version app copyi cluster member catalina log display follow error messag contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina deploy farm war deploy farmwardeploy instal webapp shop apach tomcat7 cluster webapp shop contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina deploy farm war deploy farmwardeploy cluster wide remov web app shop contain background processor containerbackgroundprocessor standard engin standardengin catalina error apach catalina deploy farm war deploy farmwardeploy unabl instal file java file not found except filenotfoundexcept apach tomcat7 cluster webapp shop system angegeben datei finden java file input stream fileinputstream open nativ method java file input stream fileinputstream init file input stream fileinputstream java apach catalina deploy file messag factori filemessagefactori init file messag factori filemessagefactori java apach catalina deploy file messag factori filemessagefactori get instanc getinst file messag factori filemessagefactori java apach catalina deploy farm war deploy farmwardeploy instal farm war deploy farmwardeploy java apach catalina deploy farm war deploy farmwardeploy file modifi filemodifi farm war deploy farmwardeploy java apach catalina deploy war watcher warwatch check war watcher warwatch java apach catalina deploy farm war deploy farmwardeploy background process backgroundprocess farm war deploy farmwardeploy java apach catalina tcp simpl tcp cluster simpletcpclust background process backgroundprocess simpl tcp cluster simpletcpclust java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor run contain base containerbas java java lang thread run thread java contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina startup host config hostconfig deploy web applic archiv shop relev configur server xml host name sbwebapp1 app base appbas catalina base cluster webapp unpack unpackwar true auto deploy autodeploy true cluster class name classnam apach catalina tcp simpl tcp cluster simpletcpclust channel send option channelsendopt manag class name classnam apach catalina session delta manag deltamanag expir session on shutdown expiresessionsonshutdown true notifi listen on replic notifylistenersonrepl fals state transfer timeout statetransfertimeout channel class name classnam apach catalina tribe group group channel groupchannel membership class name classnam apach catalina tribe membership mcast servic mcastservic address port frequenc drop time droptim receiv class name classnam apach catalina tribe transport nio nio receiv nioreceiv address port auto bind autobind selector timeout selectortimeout max thread maxthread sender class name classnam apach catalina tribe transport replic transmitt replicationtransmitt transport class name classnam apach catalina tribe transport nio pool parallel sender pooledparallelsend sender interceptor class name classnam apach catalina tribe group interceptor tcp failur detector tcpfailuredetector interceptor class name classnam apach catalina tribe group interceptor messag dispatch15 interceptor messagedispatch15interceptor interceptor class name classnam apach catalina tribe group interceptor throughput interceptor throughputinterceptor channel valv class name classnam apach catalina tcp replic valv replicationvalv filter gif j jpg png htm html cs txt swf flv valv class name classnam apach catalina session jvm rout binder valv jvmroutebindervalv cluster listen clusterlisten class name classnam apach catalina session jvm rout session binder listen jvmroutesessionidbinderlisten cluster listen clusterlisten class name classnam apach catalina session cluster session listen clustersessionlisten deploy class name classnam apach catalina deploy farm war deploy farmwardeploy temp dir tempdir catalina base cluster temp deploy dir deploydir catalina base cluster webapp watch dir watchdir catalina base cluster deploy watch enabl watchen true cluster access log process exampl document doc config valv html note pattern use equival use pattern common valv class name classnam apach catalina valv access log valv accesslogvalv directori log prefix ajp access suffix log pattern quot quot resolv host resolvehost fals host","""java/org/apache/catalina/ha/ClusterDeployer.java""","0","0","0","0","0","0","0","0","1","0","0","0","7","7","1","7","0","0","0","7","122","12","15","14","1","95","13","14","14","0","0","0","0","0","0","6","0","0","0","0","normal"
"50679","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50679 Update the FarmWarDeployer to support parallel deployment. This deliberately breaks the API since the meaning of a number of method parameters has changed (context path -> context name).","Bug 50679  FarmDeployer doesn't support parallel deployment","farm deploy farmdeploy doesn support parallel deploy","Version: Tomcat 7.0.6
Component: Catalina
OS: Windows 7 64bit

Overview:

Parallel deployment works like a charm in a non-clustered environment. But when deploying a versioned app (APPNAME##VERSION.war) to a farm deployer directory, it seems that the filename encoding of the ## delimiter is not translated correctly to identify the war file on the file system:

## is translated to %23%23

Reproduce:

1. Create a version app file
2. Deploy file to watched farm deployer directory

Expected result:
- Versioned app is copyied to cluster members and deployed

Actual result:
- Versioned app is NOT copyied to cluster members.

catalina.log displays the following error messages:


[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.ha.deploy.FarmWarDeployer- Installing webapp[/Shop##201101261] from C:\Apache\Tomcat7\cluster\webapps\Shop##201101261.war

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.ha.deploy.FarmWarDeployer- Cluster wide remove of web app /Shop##201101261

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] ERROR org.apache.catalina.ha.deploy.FarmWarDeployer- Unable to install WAR file
java.io.FileNotFoundException: C:\Apache\Tomcat7\cluster\webapps\Shop%23%23201101261.war (Das System kann die angegebene Datei nicht finden)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:106)
        at org.apache.catalina.ha.deploy.FileMessageFactory.<init>(FileMessageFactory.java:152)
        at org.apache.catalina.ha.deploy.FileMessageFactory.getInstance(FileMessageFactory.java:175)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.install(FarmWarDeployer.java:372)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.fileModified(FarmWarDeployer.java:468)
        at org.apache.catalina.ha.deploy.WarWatcher.check(WarWatcher.java:95)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.backgroundProcess(FarmWarDeployer.java:591)
        at org.apache.catalina.ha.tcp.SimpleTcpCluster.backgroundProcess(SimpleTcpCluster.java:627)
        at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1200)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1393)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1403)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1382)
        at java.lang.Thread.run(Thread.java:662)

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.startup.HostConfig- Deploying web application archive Shop##201101261.war

Relevant configuration in server.xml:

...
      <Host name=""sbwebapp1"" appBase=""${catalina.base}/cluster/webapps""
            unpackWARs=""true"" autoDeploy=""true"">

	     <Cluster className=""org.apache.catalina.ha.tcp.SimpleTcpCluster""
	               channelSendOptions=""8"">
	
	        <Manager className=""org.apache.catalina.ha.session.DeltaManager""
	                 expireSessionsOnShutdown=""true""
	                 notifyListenersOnReplication=""false""
									 stateTransferTimeout=""5""/>
	
	        <Channel className=""org.apache.catalina.tribes.group.GroupChannel"">
	          <Membership className=""org.apache.catalina.tribes.membership.McastService""
	                      address=""228.0.0.4""
	                      port=""45564""
	                      frequency=""500""
	                      dropTime=""3000""/>
	          <Receiver className=""org.apache.catalina.tribes.transport.nio.NioReceiver""
	                    address=""192.168.222.220""
	                    port=""4000""
	                    autoBind=""100""
	                    selectorTimeout=""5000""
	                    maxThreads=""6""/>
	
	          <Sender className=""org.apache.catalina.tribes.transport.ReplicationTransmitter"">
	            <Transport className=""org.apache.catalina.tribes.transport.nio.PooledParallelSender""/>
	          </Sender>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.TcpFailureDetector""/>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor""/>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.ThroughputInterceptor""/>
	        </Channel>
	
	        <Valve className=""org.apache.catalina.ha.tcp.ReplicationValve""
	                 filter="".*\.gif;.*\.js;.*\.jpg;.*\.png;.*\.htm;.*\.html;.*\.css;.*\.txt;.*\.swf;.*\.flv;""/>
	        <Valve className=""org.apache.catalina.ha.session.JvmRouteBinderValve""/>	        
	
	        <ClusterListener className=""org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener""/>
	        <ClusterListener className=""org.apache.catalina.ha.session.ClusterSessionListener""/>
	        
	        <Deployer className=""org.apache.catalina.ha.deploy.FarmWarDeployer""
	                  tempDir=""${catalina.base}/cluster/temp/""
	                  deployDir=""${catalina.base}/cluster/webapps/""
	                  watchDir=""${catalina.base}/cluster/deploy/""
	                  watchEnabled=""true""/>        
	      </Cluster>

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html
             Note: The pattern used is equivalent to using pattern=""common"" -->
        <Valve className=""org.apache.catalina.valves.AccessLogValve"" directory=""logs""  
               prefix=""ajp_access_"" suffix="".log""
               pattern=""%h %l %u %t &quot;%r&quot; %s %b"" resolveHosts=""false""/>             

      </Host>
...","version tomcat compon catalina window 64bit overview parallel deploy work like charm non cluster nonclust environ deploy version app appnam version farm deploy directori seem filenam encod delimit translat correctli identifi file file system translat reproduc creat version app file deploy file watch farm deploy directori expect result version app copyi cluster member deploy actual result version app copyi cluster member catalina log display follow error messag contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina deploy farm war deploy farmwardeploy instal webapp shop apach tomcat7 cluster webapp shop contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina deploy farm war deploy farmwardeploy cluster wide remov web app shop contain background processor containerbackgroundprocessor standard engin standardengin catalina error apach catalina deploy farm war deploy farmwardeploy unabl instal file java file not found except filenotfoundexcept apach tomcat7 cluster webapp shop system angegeben datei finden java file input stream fileinputstream open nativ method java file input stream fileinputstream init file input stream fileinputstream java apach catalina deploy file messag factori filemessagefactori init file messag factori filemessagefactori java apach catalina deploy file messag factori filemessagefactori get instanc getinst file messag factori filemessagefactori java apach catalina deploy farm war deploy farmwardeploy instal farm war deploy farmwardeploy java apach catalina deploy farm war deploy farmwardeploy file modifi filemodifi farm war deploy farmwardeploy java apach catalina deploy war watcher warwatch check war watcher warwatch java apach catalina deploy farm war deploy farmwardeploy background process backgroundprocess farm war deploy farmwardeploy java apach catalina tcp simpl tcp cluster simpletcpclust background process backgroundprocess simpl tcp cluster simpletcpclust java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor run contain base containerbas java java lang thread run thread java contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina startup host config hostconfig deploy web applic archiv shop relev configur server xml host name sbwebapp1 app base appbas catalina base cluster webapp unpack unpackwar true auto deploy autodeploy true cluster class name classnam apach catalina tcp simpl tcp cluster simpletcpclust channel send option channelsendopt manag class name classnam apach catalina session delta manag deltamanag expir session on shutdown expiresessionsonshutdown true notifi listen on replic notifylistenersonrepl fals state transfer timeout statetransfertimeout channel class name classnam apach catalina tribe group group channel groupchannel membership class name classnam apach catalina tribe membership mcast servic mcastservic address port frequenc drop time droptim receiv class name classnam apach catalina tribe transport nio nio receiv nioreceiv address port auto bind autobind selector timeout selectortimeout max thread maxthread sender class name classnam apach catalina tribe transport replic transmitt replicationtransmitt transport class name classnam apach catalina tribe transport nio pool parallel sender pooledparallelsend sender interceptor class name classnam apach catalina tribe group interceptor tcp failur detector tcpfailuredetector interceptor class name classnam apach catalina tribe group interceptor messag dispatch15 interceptor messagedispatch15interceptor interceptor class name classnam apach catalina tribe group interceptor throughput interceptor throughputinterceptor channel valv class name classnam apach catalina tcp replic valv replicationvalv filter gif j jpg png htm html cs txt swf flv valv class name classnam apach catalina session jvm rout binder valv jvmroutebindervalv cluster listen clusterlisten class name classnam apach catalina session jvm rout session binder listen jvmroutesessionidbinderlisten cluster listen clusterlisten class name classnam apach catalina session cluster session listen clustersessionlisten deploy class name classnam apach catalina deploy farm war deploy farmwardeploy temp dir tempdir catalina base cluster temp deploy dir deploydir catalina base cluster webapp watch dir watchdir catalina base cluster deploy watch enabl watchen true cluster access log process exampl document doc config valv html note pattern use equival use pattern common valv class name classnam apach catalina valv access log valv accesslogvalv directori log prefix ajp access suffix log pattern quot quot resolv host resolvehost fals host","""java/org/apache/catalina/ha/deploy/FarmWarDeployer.java""","2","2","2","1","15","0","11","3","1","0","3","36","36","36","14","36","0","0","9","27","759","79","451","142","296","230","208","310","122","188","15","15","15","6","7","1","98","98","100","45","normal"
"50679","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50679 Update the FarmWarDeployer to support parallel deployment. This deliberately breaks the API since the meaning of a number of method parameters has changed (context path -> context name).","Bug 50679  FarmDeployer doesn't support parallel deployment","farm deploy farmdeploy doesn support parallel deploy","Version: Tomcat 7.0.6
Component: Catalina
OS: Windows 7 64bit

Overview:

Parallel deployment works like a charm in a non-clustered environment. But when deploying a versioned app (APPNAME##VERSION.war) to a farm deployer directory, it seems that the filename encoding of the ## delimiter is not translated correctly to identify the war file on the file system:

## is translated to %23%23

Reproduce:

1. Create a version app file
2. Deploy file to watched farm deployer directory

Expected result:
- Versioned app is copyied to cluster members and deployed

Actual result:
- Versioned app is NOT copyied to cluster members.

catalina.log displays the following error messages:


[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.ha.deploy.FarmWarDeployer- Installing webapp[/Shop##201101261] from C:\Apache\Tomcat7\cluster\webapps\Shop##201101261.war

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.ha.deploy.FarmWarDeployer- Cluster wide remove of web app /Shop##201101261

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] ERROR org.apache.catalina.ha.deploy.FarmWarDeployer- Unable to install WAR file
java.io.FileNotFoundException: C:\Apache\Tomcat7\cluster\webapps\Shop%23%23201101261.war (Das System kann die angegebene Datei nicht finden)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:106)
        at org.apache.catalina.ha.deploy.FileMessageFactory.<init>(FileMessageFactory.java:152)
        at org.apache.catalina.ha.deploy.FileMessageFactory.getInstance(FileMessageFactory.java:175)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.install(FarmWarDeployer.java:372)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.fileModified(FarmWarDeployer.java:468)
        at org.apache.catalina.ha.deploy.WarWatcher.check(WarWatcher.java:95)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.backgroundProcess(FarmWarDeployer.java:591)
        at org.apache.catalina.ha.tcp.SimpleTcpCluster.backgroundProcess(SimpleTcpCluster.java:627)
        at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1200)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1393)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1403)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1382)
        at java.lang.Thread.run(Thread.java:662)

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.startup.HostConfig- Deploying web application archive Shop##201101261.war

Relevant configuration in server.xml:

...
      <Host name=""sbwebapp1"" appBase=""${catalina.base}/cluster/webapps""
            unpackWARs=""true"" autoDeploy=""true"">

	     <Cluster className=""org.apache.catalina.ha.tcp.SimpleTcpCluster""
	               channelSendOptions=""8"">
	
	        <Manager className=""org.apache.catalina.ha.session.DeltaManager""
	                 expireSessionsOnShutdown=""true""
	                 notifyListenersOnReplication=""false""
									 stateTransferTimeout=""5""/>
	
	        <Channel className=""org.apache.catalina.tribes.group.GroupChannel"">
	          <Membership className=""org.apache.catalina.tribes.membership.McastService""
	                      address=""228.0.0.4""
	                      port=""45564""
	                      frequency=""500""
	                      dropTime=""3000""/>
	          <Receiver className=""org.apache.catalina.tribes.transport.nio.NioReceiver""
	                    address=""192.168.222.220""
	                    port=""4000""
	                    autoBind=""100""
	                    selectorTimeout=""5000""
	                    maxThreads=""6""/>
	
	          <Sender className=""org.apache.catalina.tribes.transport.ReplicationTransmitter"">
	            <Transport className=""org.apache.catalina.tribes.transport.nio.PooledParallelSender""/>
	          </Sender>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.TcpFailureDetector""/>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor""/>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.ThroughputInterceptor""/>
	        </Channel>
	
	        <Valve className=""org.apache.catalina.ha.tcp.ReplicationValve""
	                 filter="".*\.gif;.*\.js;.*\.jpg;.*\.png;.*\.htm;.*\.html;.*\.css;.*\.txt;.*\.swf;.*\.flv;""/>
	        <Valve className=""org.apache.catalina.ha.session.JvmRouteBinderValve""/>	        
	
	        <ClusterListener className=""org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener""/>
	        <ClusterListener className=""org.apache.catalina.ha.session.ClusterSessionListener""/>
	        
	        <Deployer className=""org.apache.catalina.ha.deploy.FarmWarDeployer""
	                  tempDir=""${catalina.base}/cluster/temp/""
	                  deployDir=""${catalina.base}/cluster/webapps/""
	                  watchDir=""${catalina.base}/cluster/deploy/""
	                  watchEnabled=""true""/>        
	      </Cluster>

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html
             Note: The pattern used is equivalent to using pattern=""common"" -->
        <Valve className=""org.apache.catalina.valves.AccessLogValve"" directory=""logs""  
               prefix=""ajp_access_"" suffix="".log""
               pattern=""%h %l %u %t &quot;%r&quot; %s %b"" resolveHosts=""false""/>             

      </Host>
...","version tomcat compon catalina window 64bit overview parallel deploy work like charm non cluster nonclust environ deploy version app appnam version farm deploy directori seem filenam encod delimit translat correctli identifi file file system translat reproduc creat version app file deploy file watch farm deploy directori expect result version app copyi cluster member deploy actual result version app copyi cluster member catalina log display follow error messag contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina deploy farm war deploy farmwardeploy instal webapp shop apach tomcat7 cluster webapp shop contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina deploy farm war deploy farmwardeploy cluster wide remov web app shop contain background processor containerbackgroundprocessor standard engin standardengin catalina error apach catalina deploy farm war deploy farmwardeploy unabl instal file java file not found except filenotfoundexcept apach tomcat7 cluster webapp shop system angegeben datei finden java file input stream fileinputstream open nativ method java file input stream fileinputstream init file input stream fileinputstream java apach catalina deploy file messag factori filemessagefactori init file messag factori filemessagefactori java apach catalina deploy file messag factori filemessagefactori get instanc getinst file messag factori filemessagefactori java apach catalina deploy farm war deploy farmwardeploy instal farm war deploy farmwardeploy java apach catalina deploy farm war deploy farmwardeploy file modifi filemodifi farm war deploy farmwardeploy java apach catalina deploy war watcher warwatch check war watcher warwatch java apach catalina deploy farm war deploy farmwardeploy background process backgroundprocess farm war deploy farmwardeploy java apach catalina tcp simpl tcp cluster simpletcpclust background process backgroundprocess simpl tcp cluster simpletcpclust java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor run contain base containerbas java java lang thread run thread java contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina startup host config hostconfig deploy web applic archiv shop relev configur server xml host name sbwebapp1 app base appbas catalina base cluster webapp unpack unpackwar true auto deploy autodeploy true cluster class name classnam apach catalina tcp simpl tcp cluster simpletcpclust channel send option channelsendopt manag class name classnam apach catalina session delta manag deltamanag expir session on shutdown expiresessionsonshutdown true notifi listen on replic notifylistenersonrepl fals state transfer timeout statetransfertimeout channel class name classnam apach catalina tribe group group channel groupchannel membership class name classnam apach catalina tribe membership mcast servic mcastservic address port frequenc drop time droptim receiv class name classnam apach catalina tribe transport nio nio receiv nioreceiv address port auto bind autobind selector timeout selectortimeout max thread maxthread sender class name classnam apach catalina tribe transport replic transmitt replicationtransmitt transport class name classnam apach catalina tribe transport nio pool parallel sender pooledparallelsend sender interceptor class name classnam apach catalina tribe group interceptor tcp failur detector tcpfailuredetector interceptor class name classnam apach catalina tribe group interceptor messag dispatch15 interceptor messagedispatch15interceptor interceptor class name classnam apach catalina tribe group interceptor throughput interceptor throughputinterceptor channel valv class name classnam apach catalina tcp replic valv replicationvalv filter gif j jpg png htm html cs txt swf flv valv class name classnam apach catalina session jvm rout binder valv jvmroutebindervalv cluster listen clusterlisten class name classnam apach catalina session jvm rout session binder listen jvmroutesessionidbinderlisten cluster listen clusterlisten class name classnam apach catalina session cluster session listen clustersessionlisten deploy class name classnam apach catalina deploy farm war deploy farmwardeploy temp dir tempdir catalina base cluster temp deploy dir deploydir catalina base cluster webapp watch dir watchdir catalina base cluster deploy watch enabl watchen true cluster access log process exampl document doc config valv html note pattern use equival use pattern common valv class name classnam apach catalina valv access log valv accesslogvalv directori log prefix ajp access suffix log pattern quot quot resolv host resolvehost fals host","""java/org/apache/catalina/ha/deploy/FileMessage.java""","1","1","1","1","3","0","3","0","1","0","1","15","15","15","7","15","0","0","0","15","113","16","69","31","24","28","34","50","28","22","1","1","1","1","0","0","15","15","15","15","normal"
"50679","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50679 Update the FarmWarDeployer to support parallel deployment. This deliberately breaks the API since the meaning of a number of method parameters has changed (context path -> context name).","Bug 50679  FarmDeployer doesn't support parallel deployment","farm deploy farmdeploy doesn support parallel deploy","Version: Tomcat 7.0.6
Component: Catalina
OS: Windows 7 64bit

Overview:

Parallel deployment works like a charm in a non-clustered environment. But when deploying a versioned app (APPNAME##VERSION.war) to a farm deployer directory, it seems that the filename encoding of the ## delimiter is not translated correctly to identify the war file on the file system:

## is translated to %23%23

Reproduce:

1. Create a version app file
2. Deploy file to watched farm deployer directory

Expected result:
- Versioned app is copyied to cluster members and deployed

Actual result:
- Versioned app is NOT copyied to cluster members.

catalina.log displays the following error messages:


[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.ha.deploy.FarmWarDeployer- Installing webapp[/Shop##201101261] from C:\Apache\Tomcat7\cluster\webapps\Shop##201101261.war

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.ha.deploy.FarmWarDeployer- Cluster wide remove of web app /Shop##201101261

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] ERROR org.apache.catalina.ha.deploy.FarmWarDeployer- Unable to install WAR file
java.io.FileNotFoundException: C:\Apache\Tomcat7\cluster\webapps\Shop%23%23201101261.war (Das System kann die angegebene Datei nicht finden)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:106)
        at org.apache.catalina.ha.deploy.FileMessageFactory.<init>(FileMessageFactory.java:152)
        at org.apache.catalina.ha.deploy.FileMessageFactory.getInstance(FileMessageFactory.java:175)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.install(FarmWarDeployer.java:372)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.fileModified(FarmWarDeployer.java:468)
        at org.apache.catalina.ha.deploy.WarWatcher.check(WarWatcher.java:95)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.backgroundProcess(FarmWarDeployer.java:591)
        at org.apache.catalina.ha.tcp.SimpleTcpCluster.backgroundProcess(SimpleTcpCluster.java:627)
        at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1200)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1393)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1403)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1382)
        at java.lang.Thread.run(Thread.java:662)

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.startup.HostConfig- Deploying web application archive Shop##201101261.war

Relevant configuration in server.xml:

...
      <Host name=""sbwebapp1"" appBase=""${catalina.base}/cluster/webapps""
            unpackWARs=""true"" autoDeploy=""true"">

	     <Cluster className=""org.apache.catalina.ha.tcp.SimpleTcpCluster""
	               channelSendOptions=""8"">
	
	        <Manager className=""org.apache.catalina.ha.session.DeltaManager""
	                 expireSessionsOnShutdown=""true""
	                 notifyListenersOnReplication=""false""
									 stateTransferTimeout=""5""/>
	
	        <Channel className=""org.apache.catalina.tribes.group.GroupChannel"">
	          <Membership className=""org.apache.catalina.tribes.membership.McastService""
	                      address=""228.0.0.4""
	                      port=""45564""
	                      frequency=""500""
	                      dropTime=""3000""/>
	          <Receiver className=""org.apache.catalina.tribes.transport.nio.NioReceiver""
	                    address=""192.168.222.220""
	                    port=""4000""
	                    autoBind=""100""
	                    selectorTimeout=""5000""
	                    maxThreads=""6""/>
	
	          <Sender className=""org.apache.catalina.tribes.transport.ReplicationTransmitter"">
	            <Transport className=""org.apache.catalina.tribes.transport.nio.PooledParallelSender""/>
	          </Sender>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.TcpFailureDetector""/>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor""/>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.ThroughputInterceptor""/>
	        </Channel>
	
	        <Valve className=""org.apache.catalina.ha.tcp.ReplicationValve""
	                 filter="".*\.gif;.*\.js;.*\.jpg;.*\.png;.*\.htm;.*\.html;.*\.css;.*\.txt;.*\.swf;.*\.flv;""/>
	        <Valve className=""org.apache.catalina.ha.session.JvmRouteBinderValve""/>	        
	
	        <ClusterListener className=""org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener""/>
	        <ClusterListener className=""org.apache.catalina.ha.session.ClusterSessionListener""/>
	        
	        <Deployer className=""org.apache.catalina.ha.deploy.FarmWarDeployer""
	                  tempDir=""${catalina.base}/cluster/temp/""
	                  deployDir=""${catalina.base}/cluster/webapps/""
	                  watchDir=""${catalina.base}/cluster/deploy/""
	                  watchEnabled=""true""/>        
	      </Cluster>

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html
             Note: The pattern used is equivalent to using pattern=""common"" -->
        <Valve className=""org.apache.catalina.valves.AccessLogValve"" directory=""logs""  
               prefix=""ajp_access_"" suffix="".log""
               pattern=""%h %l %u %t &quot;%r&quot; %s %b"" resolveHosts=""false""/>             

      </Host>
...","version tomcat compon catalina window 64bit overview parallel deploy work like charm non cluster nonclust environ deploy version app appnam version farm deploy directori seem filenam encod delimit translat correctli identifi file file system translat reproduc creat version app file deploy file watch farm deploy directori expect result version app copyi cluster member deploy actual result version app copyi cluster member catalina log display follow error messag contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina deploy farm war deploy farmwardeploy instal webapp shop apach tomcat7 cluster webapp shop contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina deploy farm war deploy farmwardeploy cluster wide remov web app shop contain background processor containerbackgroundprocessor standard engin standardengin catalina error apach catalina deploy farm war deploy farmwardeploy unabl instal file java file not found except filenotfoundexcept apach tomcat7 cluster webapp shop system angegeben datei finden java file input stream fileinputstream open nativ method java file input stream fileinputstream init file input stream fileinputstream java apach catalina deploy file messag factori filemessagefactori init file messag factori filemessagefactori java apach catalina deploy file messag factori filemessagefactori get instanc getinst file messag factori filemessagefactori java apach catalina deploy farm war deploy farmwardeploy instal farm war deploy farmwardeploy java apach catalina deploy farm war deploy farmwardeploy file modifi filemodifi farm war deploy farmwardeploy java apach catalina deploy war watcher warwatch check war watcher warwatch java apach catalina deploy farm war deploy farmwardeploy background process backgroundprocess farm war deploy farmwardeploy java apach catalina tcp simpl tcp cluster simpletcpclust background process backgroundprocess simpl tcp cluster simpletcpclust java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor run contain base containerbas java java lang thread run thread java contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina startup host config hostconfig deploy web applic archiv shop relev configur server xml host name sbwebapp1 app base appbas catalina base cluster webapp unpack unpackwar true auto deploy autodeploy true cluster class name classnam apach catalina tcp simpl tcp cluster simpletcpclust channel send option channelsendopt manag class name classnam apach catalina session delta manag deltamanag expir session on shutdown expiresessionsonshutdown true notifi listen on replic notifylistenersonrepl fals state transfer timeout statetransfertimeout channel class name classnam apach catalina tribe group group channel groupchannel membership class name classnam apach catalina tribe membership mcast servic mcastservic address port frequenc drop time droptim receiv class name classnam apach catalina tribe transport nio nio receiv nioreceiv address port auto bind autobind selector timeout selectortimeout max thread maxthread sender class name classnam apach catalina tribe transport replic transmitt replicationtransmitt transport class name classnam apach catalina tribe transport nio pool parallel sender pooledparallelsend sender interceptor class name classnam apach catalina tribe group interceptor tcp failur detector tcpfailuredetector interceptor class name classnam apach catalina tribe group interceptor messag dispatch15 interceptor messagedispatch15interceptor interceptor class name classnam apach catalina tribe group interceptor throughput interceptor throughputinterceptor channel valv class name classnam apach catalina tcp replic valv replicationvalv filter gif j jpg png htm html cs txt swf flv valv class name classnam apach catalina session jvm rout binder valv jvmroutebindervalv cluster listen clusterlisten class name classnam apach catalina session jvm rout session binder listen jvmroutesessionidbinderlisten cluster listen clusterlisten class name classnam apach catalina session cluster session listen clustersessionlisten deploy class name classnam apach catalina deploy farm war deploy farmwardeploy temp dir tempdir catalina base cluster temp deploy dir deploydir catalina base cluster webapp watch dir watchdir catalina base cluster deploy watch enabl watchen true cluster access log process exampl document doc config valv html note pattern use equival use pattern common valv class name classnam apach catalina valv access log valv accesslogvalv directori log prefix ajp access suffix log pattern quot quot resolv host resolvehost fals host","""java/org/apache/catalina/ha/deploy/FileMessageFactory.java""","3","3","3","1","31","0","19","11","1","2","3","8","8","6","12","8","0","1","1","6","384","33","190","52","131","167","96","129","44","85","10","10","10","7","3","1","30","30","30","14","normal"
"50679","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50679 Update the FarmWarDeployer to support parallel deployment. This deliberately breaks the API since the meaning of a number of method parameters has changed (context path -> context name).","Bug 50679  FarmDeployer doesn't support parallel deployment","farm deploy farmdeploy doesn support parallel deploy","Version: Tomcat 7.0.6
Component: Catalina
OS: Windows 7 64bit

Overview:

Parallel deployment works like a charm in a non-clustered environment. But when deploying a versioned app (APPNAME##VERSION.war) to a farm deployer directory, it seems that the filename encoding of the ## delimiter is not translated correctly to identify the war file on the file system:

## is translated to %23%23

Reproduce:

1. Create a version app file
2. Deploy file to watched farm deployer directory

Expected result:
- Versioned app is copyied to cluster members and deployed

Actual result:
- Versioned app is NOT copyied to cluster members.

catalina.log displays the following error messages:


[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.ha.deploy.FarmWarDeployer- Installing webapp[/Shop##201101261] from C:\Apache\Tomcat7\cluster\webapps\Shop##201101261.war

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.ha.deploy.FarmWarDeployer- Cluster wide remove of web app /Shop##201101261

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] ERROR org.apache.catalina.ha.deploy.FarmWarDeployer- Unable to install WAR file
java.io.FileNotFoundException: C:\Apache\Tomcat7\cluster\webapps\Shop%23%23201101261.war (Das System kann die angegebene Datei nicht finden)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:106)
        at org.apache.catalina.ha.deploy.FileMessageFactory.<init>(FileMessageFactory.java:152)
        at org.apache.catalina.ha.deploy.FileMessageFactory.getInstance(FileMessageFactory.java:175)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.install(FarmWarDeployer.java:372)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.fileModified(FarmWarDeployer.java:468)
        at org.apache.catalina.ha.deploy.WarWatcher.check(WarWatcher.java:95)
        at org.apache.catalina.ha.deploy.FarmWarDeployer.backgroundProcess(FarmWarDeployer.java:591)
        at org.apache.catalina.ha.tcp.SimpleTcpCluster.backgroundProcess(SimpleTcpCluster.java:627)
        at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1200)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1393)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1403)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1382)
        at java.lang.Thread.run(Thread.java:662)

[ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  org.apache.catalina.startup.HostConfig- Deploying web application archive Shop##201101261.war

Relevant configuration in server.xml:

...
      <Host name=""sbwebapp1"" appBase=""${catalina.base}/cluster/webapps""
            unpackWARs=""true"" autoDeploy=""true"">

	     <Cluster className=""org.apache.catalina.ha.tcp.SimpleTcpCluster""
	               channelSendOptions=""8"">
	
	        <Manager className=""org.apache.catalina.ha.session.DeltaManager""
	                 expireSessionsOnShutdown=""true""
	                 notifyListenersOnReplication=""false""
									 stateTransferTimeout=""5""/>
	
	        <Channel className=""org.apache.catalina.tribes.group.GroupChannel"">
	          <Membership className=""org.apache.catalina.tribes.membership.McastService""
	                      address=""228.0.0.4""
	                      port=""45564""
	                      frequency=""500""
	                      dropTime=""3000""/>
	          <Receiver className=""org.apache.catalina.tribes.transport.nio.NioReceiver""
	                    address=""192.168.222.220""
	                    port=""4000""
	                    autoBind=""100""
	                    selectorTimeout=""5000""
	                    maxThreads=""6""/>
	
	          <Sender className=""org.apache.catalina.tribes.transport.ReplicationTransmitter"">
	            <Transport className=""org.apache.catalina.tribes.transport.nio.PooledParallelSender""/>
	          </Sender>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.TcpFailureDetector""/>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor""/>
	          <Interceptor className=""org.apache.catalina.tribes.group.interceptors.ThroughputInterceptor""/>
	        </Channel>
	
	        <Valve className=""org.apache.catalina.ha.tcp.ReplicationValve""
	                 filter="".*\.gif;.*\.js;.*\.jpg;.*\.png;.*\.htm;.*\.html;.*\.css;.*\.txt;.*\.swf;.*\.flv;""/>
	        <Valve className=""org.apache.catalina.ha.session.JvmRouteBinderValve""/>	        
	
	        <ClusterListener className=""org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener""/>
	        <ClusterListener className=""org.apache.catalina.ha.session.ClusterSessionListener""/>
	        
	        <Deployer className=""org.apache.catalina.ha.deploy.FarmWarDeployer""
	                  tempDir=""${catalina.base}/cluster/temp/""
	                  deployDir=""${catalina.base}/cluster/webapps/""
	                  watchDir=""${catalina.base}/cluster/deploy/""
	                  watchEnabled=""true""/>        
	      </Cluster>

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html
             Note: The pattern used is equivalent to using pattern=""common"" -->
        <Valve className=""org.apache.catalina.valves.AccessLogValve"" directory=""logs""  
               prefix=""ajp_access_"" suffix="".log""
               pattern=""%h %l %u %t &quot;%r&quot; %s %b"" resolveHosts=""false""/>             

      </Host>
...","version tomcat compon catalina window 64bit overview parallel deploy work like charm non cluster nonclust environ deploy version app appnam version farm deploy directori seem filenam encod delimit translat correctli identifi file file system translat reproduc creat version app file deploy file watch farm deploy directori expect result version app copyi cluster member deploy actual result version app copyi cluster member catalina log display follow error messag contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina deploy farm war deploy farmwardeploy instal webapp shop apach tomcat7 cluster webapp shop contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina deploy farm war deploy farmwardeploy cluster wide remov web app shop contain background processor containerbackgroundprocessor standard engin standardengin catalina error apach catalina deploy farm war deploy farmwardeploy unabl instal file java file not found except filenotfoundexcept apach tomcat7 cluster webapp shop system angegeben datei finden java file input stream fileinputstream open nativ method java file input stream fileinputstream init file input stream fileinputstream java apach catalina deploy file messag factori filemessagefactori init file messag factori filemessagefactori java apach catalina deploy file messag factori filemessagefactori get instanc getinst file messag factori filemessagefactori java apach catalina deploy farm war deploy farmwardeploy instal farm war deploy farmwardeploy java apach catalina deploy farm war deploy farmwardeploy file modifi filemodifi farm war deploy farmwardeploy java apach catalina deploy war watcher warwatch check war watcher warwatch java apach catalina deploy farm war deploy farmwardeploy background process backgroundprocess farm war deploy farmwardeploy java apach catalina tcp simpl tcp cluster simpletcpclust background process backgroundprocess simpl tcp cluster simpletcpclust java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor run contain base containerbas java java lang thread run thread java contain background processor containerbackgroundprocessor standard engin standardengin catalina info apach catalina startup host config hostconfig deploy web applic archiv shop relev configur server xml host name sbwebapp1 app base appbas catalina base cluster webapp unpack unpackwar true auto deploy autodeploy true cluster class name classnam apach catalina tcp simpl tcp cluster simpletcpclust channel send option channelsendopt manag class name classnam apach catalina session delta manag deltamanag expir session on shutdown expiresessionsonshutdown true notifi listen on replic notifylistenersonrepl fals state transfer timeout statetransfertimeout channel class name classnam apach catalina tribe group group channel groupchannel membership class name classnam apach catalina tribe membership mcast servic mcastservic address port frequenc drop time droptim receiv class name classnam apach catalina tribe transport nio nio receiv nioreceiv address port auto bind autobind selector timeout selectortimeout max thread maxthread sender class name classnam apach catalina tribe transport replic transmitt replicationtransmitt transport class name classnam apach catalina tribe transport nio pool parallel sender pooledparallelsend sender interceptor class name classnam apach catalina tribe group interceptor tcp failur detector tcpfailuredetector interceptor class name classnam apach catalina tribe group interceptor messag dispatch15 interceptor messagedispatch15interceptor interceptor class name classnam apach catalina tribe group interceptor throughput interceptor throughputinterceptor channel valv class name classnam apach catalina tcp replic valv replicationvalv filter gif j jpg png htm html cs txt swf flv valv class name classnam apach catalina session jvm rout binder valv jvmroutebindervalv cluster listen clusterlisten class name classnam apach catalina session jvm rout session binder listen jvmroutesessionidbinderlisten cluster listen clusterlisten class name classnam apach catalina session cluster session listen clustersessionlisten deploy class name classnam apach catalina deploy farm war deploy farmwardeploy temp dir tempdir catalina base cluster temp deploy dir deploydir catalina base cluster webapp watch dir watchdir catalina base cluster deploy watch enabl watchen true cluster access log process exampl document doc config valv html note pattern use equival use pattern common valv class name classnam apach catalina valv access log valv accesslogvalv directori log prefix ajp access suffix log pattern quot quot resolv host resolvehost fals host","""java/org/apache/catalina/ha/deploy/UndeployMessage.java""","1","1","1","1","4","0","3","1","1","0","1","16","16","16","7","16","0","0","0","16","122","16","74","38","23","33","31","48","28","20","1","1","1","1","0","0","16","16","16","16","normal"
"50680","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50680 Prevent an NPE when using tag files from an exploded JAR file, e.g. from within an IDE. Patch provided by Larry Isaacs.","Bug 50680  NPE in TagFileProcessor when tag file is in an expanded directory ""jar""","npe tag file processor tagfileprocessor tag file expand directori jar","","","""java/org/apache/jasper/compiler/TagFileProcessor.java""","3","3","4","1","26","2","19","4","4","1","8","19","19","18","22","19","6","4","0","9","678","99","464","187","324","121","212","288","130","158","18","18","26","4","3","0","72","72","92","22","normal"
"50683","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50683 Scan annotations when unpackWars=false","Bug 50683  Servlet 3.0 annotations not scanned if unpackWars=""false""","servlet annot scan unpack war unpackwar fals","","","""java/org/apache/naming/resources/WARDirContext.java""","1","1","1","1","17","0","7","9","3","0","1","42","42","42","6","42","0","1","9","32","991","172","376","169","186","443","172","253","120","133","7","7","7","5","5","1","78","78","81","56","normal"
"50700","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50700 Ensure that the override attribute of context parameters is correctly followed.","Bug 50700  Context parameters are being overridden with parameters from the web application deployment descriptor","context paramet overridden paramet web applic deploy descriptor","Context parameters are being overridden with parameters from the web application deployment descriptor even through ""override"" attribute is set to ""false""

For example:
lines from context file
<Context path=""/path"" docBase=""/path/to/docbase"" cookies=""true"">
    <Parameter name=""parameter_name"" value=""test1"" override=""false""/>
....
</Context>

lines from web.xml
    <context-param>
        <description>default value for parameter_name</description>
        <param-name>parameter_name</param-name>
        <param-value>test2</param-value>
    </context-param>

Now servletContext.getInitParameter(""parameter_name"") returns ""test2""","context paramet overridden paramet web applic deploy descriptor even overrid attribut set fals exampl line context file context path path doc base docbas path docbas cooki true paramet name paramet name valu test1 overrid fals context line web xml context param contextparam descript default valu paramet name descript param name paramnam paramet name param name paramnam param valu paramvalu test2 param valu paramvalu context param contextparam servlet context servletcontext get init paramet getinitparamet paramet name return test2","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","6","0","3","300","300","300","120","300","0","11","11","278","6402","1274","3302","1005","1999","1831","1470","2258","839","1419","54","54","69","9","5","1","693","693","748","390","normal"
"50709","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50709 Make ApplicationContextFacade non-final to enable extension.","Bug 50709  Make class org.apache.catalina.core.ApplicationContextFacade non-final","make class apach catalina core applic context facad applicationcontextfacad non final nonfin","Please make class org.apache.catalina.core.ApplicationContextFacade non-final so it can be subclassed.
Need to extend ApplicationContextFacade so Mobicents Sip Servlet, working on top of Tomcat 7, to integrate with Weld.

Thanks
George","pleas make class apach catalina core applic context facad applicationcontextfacad non final nonfin subclass need extend applic context facad applicationcontextfacad mobic sip servlet work top tomcat integr weld thank georg","""java/org/apache/catalina/core/ApplicationContextFacade.java""","2","2","2","1","10","0","9","0","2","0","0","59","59","59","3","59","0","6","0","53","883","141","653","186","344","101","202","330","96","234","4","4","4","3","3","0","127","127","128","69","normal"
"50713","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50713 Remove roles command from Manager application","Bug 50713  The ""roles"" command doesn't work","role command doesn work","","","""java/org/apache/catalina/ant/RolesTask.java""","1","1","1","1","11","2","4","5","1","0","0","1","1","1","0","1","0","0","0","1","56","16","9","5","2","31","4","6","4","2","1","1","1","1","0","3","1","1","1","1","minor"
"50713","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50713 Remove roles command from Manager application","Bug 50713  The ""roles"" command doesn't work","role command doesn work","","","""java/org/apache/catalina/manager/ManagerServlet.java""","6","6","6","2","39","3","29","6","1","3","2","35","35","32","12","35","0","0","27","8","1706","227","1082","245","788","397","513","733","212","521","20","20","28","6","5","0","214","214","237","84","minor"
"50720","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50720 Ensure that the use of non-ISO-8859-1 character sets for web.xml does not trigger an error when Jasper parses the web.xml file.","Bug 50720  When using jsp mapped as servlet in web.xml, cyrillic characters are not allowed in web.xml","use jsp map servlet web xml cyril charact allow web xml","","","""java/org/apache/jasper/compiler/WebXml.java""","3","3","3","1","16","0","14","1","1","0","2","4","4","4","4","4","0","0","0","4","120","14","75","29","41","31","36","50","26","24","8","8","8","1","3","0","13","13","13","4","normal"
"50721","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50721 Correctly handle URL decoding where the URL ends in %nn. Patch (for fix) provided by Christof Marti. Additional test cases added.","Bug 50721  RequestUtil.URLDecode() throws IllegalArgumentException for URLs with %xx-Code as last character","request util requestutil decod urldecod throw illeg argument except illegalargumentexcept url xx code last charact","","","""java/org/apache/catalina/util/RequestUtil.java""","4","3","4","2","28","1","15","11","1","13","3","13","13","0","0","13","0","2","0","11","460","63","222","51","157","178","107","158","46","112","12","12","13","10","4","1","56","50","63","28","normal"
"50721","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50721 Correctly handle URL decoding where the URL ends in %nn. Patch (for fix) provided by Christof Marti. Additional test cases added.","Bug 50721  RequestUtil.URLDecode() throws IllegalArgumentException for URLs with %xx-Code as last character","request util requestutil decod urldecod throw illeg argument except illegalargumentexcept url xx code last charact","","","""test/org/apache/catalina/util/TestRequestUtil.java""","2","2","2","1","12","0","11","3","1","0","0","2","2","2","0","2","0","0","0","2","50","6","26","6","16","22","14","19","6","13","3","3","3","1","1","1","4","4","4","2","normal"
"50721","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50721 Correctly handle URL decoding where the URL ends in %nn. Patch (for fix) provided by Christof Marti. Additional test cases added.","Bug 50721  RequestUtil.URLDecode() throws IllegalArgumentException for URLs with %xx-Code as last character","request util requestutil decod urldecod throw illeg argument except illegalargumentexcept url xx code last charact","","","""test/org/apache/catalina/util/TestRequestUtil.java""","2","2","2","1","12","0","11","3","1","0","0","2","2","2","0","2","0","0","0","2","50","6","26","6","16","22","14","19","6","13","3","3","3","1","1","1","4","4","4","2","normal"
"50726","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50726 Ensure that the use of the genStringAsCharArray does not result in String constants that are too long for valid Java code.","Bug 50726  Jasper can generate uncompilable source code if genStringAsCharArray is turned on","jasper gener uncompil sourc code gen string char array genstringaschararray turn","Our jsp pages are compiled at build time. If I turn on genStringAsCharArray optimization switch, in some cases there will be longer lines in the generated java code than the javac compiler can process. It provides the following error message:

[javac] Compiling 1609 source files to d:\...\jspc\classes
[javac] d:\...\jspc\src\org\apache\jsp\WEB_002dINF\..._005fAPP\pages\termsconditions\TermsAndConditions_005fms_005fMY_jsp.java:96: constant string too long","jsp page compil build time turn gen string char array genstringaschararray optim switch case longer line gener java code javac compil process provid follow error messag javac compil sourc file jspc class javac jspc src apach jsp web 002d 002dinf 005f 005fapp page termscondit term and condit termsandcondit 005fm 005f 005fmi jsp java constant string long","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","36","3","27","5","12","6","5","111","111","105","47","111","11","50","0","50","4225","508","3009","527","2324","735","1839","2336","487","1849","22","22","30","20","5","0","499","493","554","209","normal"
"50751","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50751 Don't try to retrieve attributes if we don't need to. If anonymous bind is not allowed, the login will always fail.","Bug 50751  JNDIRealm invokes getAttributes with no attribute ids. Prevents using DOMAIN\{0} to login.","realm jndirealm invok get attribut getattribut attribut id prevent use domain login","","","""java/org/apache/catalina/realm/JNDIRealm.java""","2","2","3","1","20","3","10","6","2","0","3","83","83","83","35","83","0","2","23","58","2294","488","973","294","634","836","472","706","253","453","28","28","33","14","7","1","235","231","258","129","minor"
"50752","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50752 Correct typo","Bug 50752  Typo in Embedded.java log message","typo embed java log messag","There's a debug log message in Embedded.java with a typo in it:

""INITIAL_CONTEXT_FACTORY alread set ""


Attached is a patch against the 6_0_29 tag, but the issue exists in tc6.0.x/trunk","debug log messag embed java typo initi context factori alread set attach patch tag issu exist tc6 trunk","""java/org/apache/catalina/startup/Embedded.java""","3","3","3","1","18","2","10","5","1","0","3","38","38","38","7","38","0","0","6","32","986","196","454","126","281","337","232","348","123","225","15","15","15","8","4","1","117","117","119","55","trivial"
"50759","0","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50759 Update validation timestamp if using an external validator.","Bug 50759  ValidatorClassName Validation fails to set lastValidated timestamp","valid class name validatorclassnam valid fail set last valid lastvalid timestamp","","","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/PooledConnection.java""","2","2","3","1","13","0","9","4","1","0","7","36","36","36","15","36","0","2","2","32","665","73","364","88","235","236","173","274","87","187","13","13","14","6","3","1","102","102","126","46","normal"
"50771","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50771 Ensure HttpServletRequest#getAuthType() returns the name of the authentication scheme if request has already been authenticated.","Bug 50771  HttpServletRequest#getAuthType() returns null though the request is authenticated.","http servlet request httpservletrequest get auth type getauthtyp return null though request authent","","","""java/org/apache/catalina/ha/session/DeltaRequest.java""","2","2","2","1","9","0","7","1","2","0","11","30","30","30","8","30","0","0","2","28","391","48","281","98","166","69","149","209","82","127","13","10","13","1","4","0","63","60","63","30","normal"
"50771","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50771 Ensure HttpServletRequest#getAuthType() returns the name of the authentication scheme if request has already been authenticated.","Bug 50771  HttpServletRequest#getAuthType() returns null though the request is authenticated.","http servlet request httpservletrequest get auth type getauthtyp return null though request authent","","","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","7","4","1","0","2","50","50","50","5","50","0","2","7","41","813","94","460","142","256","261","223","335","114","221","9","9","10","5","3","1","99","99","113","61","normal"
"50780","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50780 Fix memory leak in APR implementation of AJP connector introduced by the refactoring for bug 49884","Bug 50780  AjpConnectionHandler keeps many connections causing memory leak","ajp connect handler ajpconnectionhandl keep mani connect caus memori leak","Hi,

Sorry for my english.

I use Tomcat 7.0.6 with APR 1.1.20. 

I noticed (from heap dump) many org.apache.tomcat.util.net.SocketWrapper objects, which are kept by ""connections"" atribute in org.apache.coyote.ajp.AjpAprProtocol$AjpConnectionHandler object. I don't understand, why there are so many objects representing old connections which are not active. In my example it was 300000 objects created, after 7 days of Tomcat work. Has someone forgotten to clean this HashMap from time to time?

best regards

Sergiusz Brzezinski","hi sorri english use tomcat apr notic heap dump mani apach tomcat util net socket wrapper socketwrapp object kept connect atribut apach coyot ajp ajp apr protocol ajpaprprotocol ajp connect handler ajpconnectionhandl object understand mani object repres old connect activ exampl object creat day tomcat work someon forgotten clean hash map hashmap time time best regard sergiusz brzezinski","""java/org/apache/coyote/ajp/AjpAprProtocol.java""","2","2","2","1","8","0","7","0","3","0","2","22","22","22","7","22","0","0","6","16","319","52","214","70","127","53","105","152","64","88","8","8","9","4","3","0","46","46","49","25","normal"
"50789","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50789 Provide an option to enable ServletRequestListeners for forwards as required by some CDI frameworks.","Bug 50789  custom error pages and CDI/weld problem","custom error page cdi weld problem","","","""java/org/apache/catalina/Context.java""","0","0","0","0","0","0","0","0","1","0","4","0","153","153","0","153","2","0","0","151","1319","306","181","180","4","832","176","177","177","0","0","0","0","0","0","5","0","0","0","0","normal"
"50789","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50789 Provide an option to enable ServletRequestListeners for forwards as required by some CDI frameworks.","Bug 50789  custom error pages and CDI/weld problem","custom error page cdi weld problem","","","""java/org/apache/catalina/core/ApplicationDispatcher.java""","5","5","6","2","37","3","27","7","4","0","4","20","20","20","20","20","3","11","0","6","1009","153","625","164","448","232","293","405","130","275","23","23","25","7","3","0","115","115","133","45","normal"
"50789","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50789 Provide an option to enable ServletRequestListeners for forwards as required by some CDI frameworks.","Bug 50789  custom error pages and CDI/weld problem","custom error page cdi weld problem","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","6","0","3","300","300","300","120","300","0","11","11","278","6399","1276","3299","1005","1998","1829","1471","2259","840","1419","54","54","69","9","5","1","692","692","747","390","normal"
"50789","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50789 Provide an option to enable ServletRequestListeners for forwards as required by some CDI frameworks.","Bug 50789  custom error pages and CDI/weld problem","custom error page cdi weld problem","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","6","0","3","300","300","300","120","300","0","11","11","278","6399","1276","3299","1005","1998","1829","1471","2259","840","1419","54","54","69","9","5","1","692","692","747","390","normal"
"50790","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50790 Improve method resolution in EL expressions Add test cases for this bug","Bug 50790  EL parser needs to be more dynamic","parser need dynam","String.containes(CharSequence) is not being resolved correctly in the following situation:

<span class=""#{(facesContext.externalContext.request.requestURI.contains(item.url)) ? 'activepage' : ''}"">#{template[item.labelKey]}</span>

Exception:


javax.el.ELException: /faces/template/mainLayout.xhtml: java.lang.NoSuchMethodException: java.lang.String.contains(java.lang.String)
	at com.sun.faces.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:87)
	at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:75)
	at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:285)
	at com.sun.faces.renderkit.html_basic.OutputLinkRenderer.encodeChildren(OutputLinkRenderer.java:125)
	at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:848)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1613)
	at com.sun.faces.facelets.component.RepeatRenderer.encodeChildren(RepeatRenderer.java:97)
	at com.sun.faces.facelets.component.UIRepeat.process(UIRepeat.java:496)
	at com.sun.faces.facelets.component.UIRepeat.encodeChildren(UIRepeat.java:926)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1613)
	at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
	at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:848)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1613)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1616)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1616)
	at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:380)
	at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:126)
	at com.ocpsoft.pretty.faces.application.PrettyViewHandler.renderView(PrettyViewHandler.java:157)
	at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:127)
	at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
	at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:313)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:306)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at com.reardeninc.tigris.ui.facesutil.FacesFilter.doFilter(FacesFilter.java:86)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:244)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:244)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:100)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:244)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:541)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:383)
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:288)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NoSuchMethodException: java.lang.String.contains(java.lang.String)
	at java.lang.Class.getMethod(Class.java:1605)
	at javax.el.BeanELResolver.invoke(BeanELResolver.java:405)
	at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:161)
	at org.apache.el.parser.AstValue.getValue(AstValue.java:159)
	at org.apache.el.parser.AstChoice.getValue(AstChoice.java:45)
	at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
	at com.sun.faces.facelets.el.ELText$ELTextVariable.toString(ELText.java:207)
	at com.sun.faces.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:82)
	... 46 more","string contain char sequenc charsequ resolv correctli follow situat span class face context facescontext extern context externalcontext request request requesturi contain item url activepag templat item label key labelkey span except javax except elexcept face templat main layout mainlayout xhtml java lang no such method except nosuchmethodexcept java lang string contain java lang string sun face facelet compil attribut instruct attributeinstruct write attribut instruct attributeinstruct java sun face facelet compil ui instruct uiinstruct encod begin encodebegin ui instruct uiinstruct java sun face renderkit html basic html basic render htmlbasicrender encod recurs encoderecurs html basic render htmlbasicrender java sun face renderkit html basic output link render outputlinkrender encod child encodechildren output link render outputlinkrender java javax face compon ui compon base uicomponentbas encod child encodechildren ui compon base uicomponentbas java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java sun face facelet compon repeat render repeatrender encod child encodechildren repeat render repeatrender java sun face facelet compon ui repeat uirepeat process ui repeat uirepeat java sun face facelet compon ui repeat uirepeat encod child encodechildren ui repeat uirepeat java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java javax face render render encod child encodechildren render java javax face compon ui compon base uicomponentbas encod child encodechildren ui compon base uicomponentbas java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java sun face applic view facelet view handl strategi faceletviewhandlingstrategi render view renderview facelet view handl strategi faceletviewhandlingstrategi java sun face applic view multi view handler multiviewhandl render view renderview multi view handler multiviewhandl java ocpsoft pretti face applic pretti view handler prettyviewhandl render view renderview pretti view handler prettyviewhandl java sun face lifecycl render respons phase renderresponsephas execut render respons phase renderresponsephas java sun face lifecycl phase do phase dophas phase java sun face lifecycl lifecycl impl lifecycleimpl render lifecycl impl lifecycleimpl java javax face webapp face servlet facesservlet servic face servlet facesservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java reardeninc tigri ui facesutil face filter facesfilt do filter dofilt face filter facesfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java primefac webapp filter file upload filter fileuploadfilt do filter dofilt file upload filter fileuploadfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java ocpsoft pretti pretti filter prettyfilt do filter dofilt pretti filter prettyfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina valv access log valv accesslogvalv invok access log valv accesslogvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process http11 protocol http11protocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java caus java lang no such method except nosuchmethodexcept java lang string contain java lang string java lang class get method getmethod class java javax bean resolv beanelresolv invok bean resolv beanelresolv java javax composit resolv compositeelresolv invok composit resolv compositeelresolv java apach parser ast valu astvalu get valu getvalu ast valu astvalu java apach parser ast choic astchoic get valu getvalu ast choic astchoic java apach valu express impl valueexpressionimpl get valu getvalu valu express impl valueexpressionimpl java sun face facelet text eltext text variabl eltextvari to string tostr text eltext java sun face facelet compil attribut instruct attributeinstruct write attribut instruct attributeinstruct java","""java/javax/el/BeanELResolver.java""","3","3","3","1","13","0","12","0","5","1","2","26","26","25","12","26","0","6","0","20","479","62","390","110","226","28","170","254","96","158","18","18","19","8","3","0","82","82","91","43","critical"
"50790","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50790 Improve method resolution in EL expressions Add test cases for this bug","Bug 50790  EL parser needs to be more dynamic","parser need dynam","String.containes(CharSequence) is not being resolved correctly in the following situation:

<span class=""#{(facesContext.externalContext.request.requestURI.contains(item.url)) ? 'activepage' : ''}"">#{template[item.labelKey]}</span>

Exception:


javax.el.ELException: /faces/template/mainLayout.xhtml: java.lang.NoSuchMethodException: java.lang.String.contains(java.lang.String)
	at com.sun.faces.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:87)
	at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:75)
	at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:285)
	at com.sun.faces.renderkit.html_basic.OutputLinkRenderer.encodeChildren(OutputLinkRenderer.java:125)
	at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:848)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1613)
	at com.sun.faces.facelets.component.RepeatRenderer.encodeChildren(RepeatRenderer.java:97)
	at com.sun.faces.facelets.component.UIRepeat.process(UIRepeat.java:496)
	at com.sun.faces.facelets.component.UIRepeat.encodeChildren(UIRepeat.java:926)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1613)
	at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
	at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:848)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1613)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1616)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1616)
	at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:380)
	at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:126)
	at com.ocpsoft.pretty.faces.application.PrettyViewHandler.renderView(PrettyViewHandler.java:157)
	at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:127)
	at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
	at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:313)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:306)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at com.reardeninc.tigris.ui.facesutil.FacesFilter.doFilter(FacesFilter.java:86)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:244)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:244)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:100)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:244)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:541)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:383)
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:288)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NoSuchMethodException: java.lang.String.contains(java.lang.String)
	at java.lang.Class.getMethod(Class.java:1605)
	at javax.el.BeanELResolver.invoke(BeanELResolver.java:405)
	at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:161)
	at org.apache.el.parser.AstValue.getValue(AstValue.java:159)
	at org.apache.el.parser.AstChoice.getValue(AstChoice.java:45)
	at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
	at com.sun.faces.facelets.el.ELText$ELTextVariable.toString(ELText.java:207)
	at com.sun.faces.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:82)
	... 46 more","string contain char sequenc charsequ resolv correctli follow situat span class face context facescontext extern context externalcontext request request requesturi contain item url activepag templat item label key labelkey span except javax except elexcept face templat main layout mainlayout xhtml java lang no such method except nosuchmethodexcept java lang string contain java lang string sun face facelet compil attribut instruct attributeinstruct write attribut instruct attributeinstruct java sun face facelet compil ui instruct uiinstruct encod begin encodebegin ui instruct uiinstruct java sun face renderkit html basic html basic render htmlbasicrender encod recurs encoderecurs html basic render htmlbasicrender java sun face renderkit html basic output link render outputlinkrender encod child encodechildren output link render outputlinkrender java javax face compon ui compon base uicomponentbas encod child encodechildren ui compon base uicomponentbas java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java sun face facelet compon repeat render repeatrender encod child encodechildren repeat render repeatrender java sun face facelet compon ui repeat uirepeat process ui repeat uirepeat java sun face facelet compon ui repeat uirepeat encod child encodechildren ui repeat uirepeat java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java javax face render render encod child encodechildren render java javax face compon ui compon base uicomponentbas encod child encodechildren ui compon base uicomponentbas java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java sun face applic view facelet view handl strategi faceletviewhandlingstrategi render view renderview facelet view handl strategi faceletviewhandlingstrategi java sun face applic view multi view handler multiviewhandl render view renderview multi view handler multiviewhandl java ocpsoft pretti face applic pretti view handler prettyviewhandl render view renderview pretti view handler prettyviewhandl java sun face lifecycl render respons phase renderresponsephas execut render respons phase renderresponsephas java sun face lifecycl phase do phase dophas phase java sun face lifecycl lifecycl impl lifecycleimpl render lifecycl impl lifecycleimpl java javax face webapp face servlet facesservlet servic face servlet facesservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java reardeninc tigri ui facesutil face filter facesfilt do filter dofilt face filter facesfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java primefac webapp filter file upload filter fileuploadfilt do filter dofilt file upload filter fileuploadfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java ocpsoft pretti pretti filter prettyfilt do filter dofilt pretti filter prettyfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina valv access log valv accesslogvalv invok access log valv accesslogvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process http11 protocol http11protocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java caus java lang no such method except nosuchmethodexcept java lang string contain java lang string java lang class get method getmethod class java javax bean resolv beanelresolv invok bean resolv beanelresolv java javax composit resolv compositeelresolv invok composit resolv compositeelresolv java apach parser ast valu astvalu get valu getvalu ast valu astvalu java apach parser ast choic astchoic get valu getvalu ast choic astchoic java apach valu express impl valueexpressionimpl get valu getvalu valu express impl valueexpressionimpl java sun face facelet text eltext text variabl eltextvari to string tostr text eltext java sun face facelet compil attribut instruct attributeinstruct write attribut instruct attributeinstruct java","""java/org/apache/el/parser/AstValue.java""","2","2","3","1","16","0","14","1","3","0","2","14","14","14","2","14","0","4","0","10","331","40","249","83","157","42","115","157","67","90","7","7","10","4","3","0","41","41","51","20","critical"
"50790","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50790 Improve method resolution in EL expressions Add test cases for this bug","Bug 50790  EL parser needs to be more dynamic","parser need dynam","String.containes(CharSequence) is not being resolved correctly in the following situation:

<span class=""#{(facesContext.externalContext.request.requestURI.contains(item.url)) ? 'activepage' : ''}"">#{template[item.labelKey]}</span>

Exception:


javax.el.ELException: /faces/template/mainLayout.xhtml: java.lang.NoSuchMethodException: java.lang.String.contains(java.lang.String)
	at com.sun.faces.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:87)
	at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:75)
	at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:285)
	at com.sun.faces.renderkit.html_basic.OutputLinkRenderer.encodeChildren(OutputLinkRenderer.java:125)
	at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:848)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1613)
	at com.sun.faces.facelets.component.RepeatRenderer.encodeChildren(RepeatRenderer.java:97)
	at com.sun.faces.facelets.component.UIRepeat.process(UIRepeat.java:496)
	at com.sun.faces.facelets.component.UIRepeat.encodeChildren(UIRepeat.java:926)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1613)
	at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
	at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:848)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1613)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1616)
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1616)
	at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:380)
	at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:126)
	at com.ocpsoft.pretty.faces.application.PrettyViewHandler.renderView(PrettyViewHandler.java:157)
	at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:127)
	at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
	at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:313)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:306)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at com.reardeninc.tigris.ui.facesutil.FacesFilter.doFilter(FacesFilter.java:86)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:244)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:244)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:100)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:244)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:541)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:383)
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:288)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NoSuchMethodException: java.lang.String.contains(java.lang.String)
	at java.lang.Class.getMethod(Class.java:1605)
	at javax.el.BeanELResolver.invoke(BeanELResolver.java:405)
	at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:161)
	at org.apache.el.parser.AstValue.getValue(AstValue.java:159)
	at org.apache.el.parser.AstChoice.getValue(AstChoice.java:45)
	at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
	at com.sun.faces.facelets.el.ELText$ELTextVariable.toString(ELText.java:207)
	at com.sun.faces.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:82)
	... 46 more","string contain char sequenc charsequ resolv correctli follow situat span class face context facescontext extern context externalcontext request request requesturi contain item url activepag templat item label key labelkey span except javax except elexcept face templat main layout mainlayout xhtml java lang no such method except nosuchmethodexcept java lang string contain java lang string sun face facelet compil attribut instruct attributeinstruct write attribut instruct attributeinstruct java sun face facelet compil ui instruct uiinstruct encod begin encodebegin ui instruct uiinstruct java sun face renderkit html basic html basic render htmlbasicrender encod recurs encoderecurs html basic render htmlbasicrender java sun face renderkit html basic output link render outputlinkrender encod child encodechildren output link render outputlinkrender java javax face compon ui compon base uicomponentbas encod child encodechildren ui compon base uicomponentbas java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java sun face facelet compon repeat render repeatrender encod child encodechildren repeat render repeatrender java sun face facelet compon ui repeat uirepeat process ui repeat uirepeat java sun face facelet compon ui repeat uirepeat encod child encodechildren ui repeat uirepeat java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java javax face render render encod child encodechildren render java javax face compon ui compon base uicomponentbas encod child encodechildren ui compon base uicomponentbas java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java javax face compon ui compon uicompon encod all encodeal ui compon uicompon java sun face applic view facelet view handl strategi faceletviewhandlingstrategi render view renderview facelet view handl strategi faceletviewhandlingstrategi java sun face applic view multi view handler multiviewhandl render view renderview multi view handler multiviewhandl java ocpsoft pretti face applic pretti view handler prettyviewhandl render view renderview pretti view handler prettyviewhandl java sun face lifecycl render respons phase renderresponsephas execut render respons phase renderresponsephas java sun face lifecycl phase do phase dophas phase java sun face lifecycl lifecycl impl lifecycleimpl render lifecycl impl lifecycleimpl java javax face webapp face servlet facesservlet servic face servlet facesservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java reardeninc tigri ui facesutil face filter facesfilt do filter dofilt face filter facesfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java primefac webapp filter file upload filter fileuploadfilt do filter dofilt file upload filter fileuploadfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java ocpsoft pretti pretti filter prettyfilt do filter dofilt pretti filter prettyfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina valv access log valv accesslogvalv invok access log valv accesslogvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process http11 protocol http11protocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java caus java lang no such method except nosuchmethodexcept java lang string contain java lang string java lang class get method getmethod class java javax bean resolv beanelresolv invok bean resolv beanelresolv java javax composit resolv compositeelresolv invok composit resolv compositeelresolv java apach parser ast valu astvalu get valu getvalu ast valu astvalu java apach parser ast choic astchoic get valu getvalu ast choic astchoic java apach valu express impl valueexpressionimpl get valu getvalu valu express impl valueexpressionimpl java sun face facelet text eltext text variabl eltextvari to string tostr text eltext java sun face facelet compil attribut instruct attributeinstruct write attribut instruct attributeinstruct java","""test/org/apache/el/TestMethodExpressionImpl.java""","1","1","1","1","9","0","8","0","1","0","0","29","29","29","2","29","0","0","0","29","352","47","272","143","196","33","143","178","107","71","2","2","2","1","1","0","34","34","34","29","critical"
"50793","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50793 Correctly fire request init/destroy events for astnc requests","Bug 50793  Invalid DispatchType in ServletRequestListener on async dispatch","invalid dispatch type dispatchtyp servlet request listen servletrequestlisten async dispatch","If a ServletRequestListener is defined, when is invoked after a call to AsyncContext#dispatch() the DispatcherType returned from the ServletRequest is REQUEST rather than ASYNC. When the actual servlet is invoked, the type is correctly set to ASYNC.

If the listener is intended to be invoked for each dispatch, then the DispatcherType should match the value returned in the filter/servlet.","servlet request listen servletrequestlisten defin invok call async context asynccontext dispatch dispatch type dispatchertyp return servlet request servletrequest request rather async actual servlet invok type correctli set async listen intend invok dispatch dispatch type dispatchertyp match valu return filter servlet","""java/org/apache/catalina/connector/CoyoteAdapter.java""","10","10","12","4","67","6","48","12","1","3","7","15","15","12","1","15","0","0","7","8","1174","165","779","156","575","230","407","559","139","420","33","33","34","17","6","0","153","153","184","60","normal"
"50793","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50793 Correctly fire request init/destroy events for astnc requests","Bug 50793  Invalid DispatchType in ServletRequestListener on async dispatch","invalid dispatch type dispatchtyp servlet request listen servletrequestlisten async dispatch","If a ServletRequestListener is defined, when is invoked after a call to AsyncContext#dispatch() the DispatcherType returned from the ServletRequest is REQUEST rather than ASYNC. When the actual servlet is invoked, the type is correctly set to ASYNC.

If the listener is intended to be invoked for each dispatch, then the DispatcherType should match the value returned in the filter/servlet.","servlet request listen servletrequestlisten defin invok call async context asynccontext dispatch dispatch type dispatchertyp return servlet request servletrequest request rather async actual servlet invok type correctli set async listen intend invok dispatch dispatch type dispatchertyp match valu return filter servlet","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","6","0","3","300","300","300","120","300","0","11","11","278","6408","1278","3304","1006","2000","1831","1472","2262","841","1421","54","54","69","9","5","1","694","694","749","392","normal"
"50793","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50793 Correctly fire request init/destroy events for astnc requests","Bug 50793  Invalid DispatchType in ServletRequestListener on async dispatch","invalid dispatch type dispatchtyp servlet request listen servletrequestlisten async dispatch","If a ServletRequestListener is defined, when is invoked after a call to AsyncContext#dispatch() the DispatcherType returned from the ServletRequest is REQUEST rather than ASYNC. When the actual servlet is invoked, the type is correctly set to ASYNC.

If the listener is intended to be invoked for each dispatch, then the DispatcherType should match the value returned in the filter/servlet.","servlet request listen servletrequestlisten defin invok call async context asynccontext dispatch dispatch type dispatchertyp return servlet request servletrequest request rather async actual servlet invok type correctli set async listen intend invok dispatch dispatch type dispatchertyp match valu return filter servlet","""java/org/apache/catalina/core/StandardContextValve.java""","2","2","3","1","22","2","10","9","1","0","1","6","6","6","1","6","0","1","0","5","222","45","86","32","44","91","36","53","24","29","10","10","15","5","2","1","17","17","22","10","normal"
"50793","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50793 Correctly fire request init/destroy events for astnc requests","Bug 50793  Invalid DispatchType in ServletRequestListener on async dispatch","invalid dispatch type dispatchtyp servlet request listen servletrequestlisten async dispatch","If a ServletRequestListener is defined, when is invoked after a call to AsyncContext#dispatch() the DispatcherType returned from the ServletRequest is REQUEST rather than ASYNC. When the actual servlet is invoked, the type is correctly set to ASYNC.

If the listener is intended to be invoked for each dispatch, then the DispatcherType should match the value returned in the filter/servlet.","servlet request listen servletrequestlisten defin invok call async context asynccontext dispatch dispatch type dispatchertyp return servlet request servletrequest request rather async actual servlet invok type correctli set async listen intend invok dispatch dispatch type dispatchertyp match valu return filter servlet","""test/org/apache/catalina/core/TestAsyncContextImpl.java""","1","1","1","1","12","1","10","0","20","0","13","60","60","60","11","60","0","3","11","46","867","169","641","262","398","68","359","457","212","245","5","5","6","1","2","0","87","87","90","60","normal"
"50802","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50802 Ensure that ServletContext.getResourcePaths() includes static resources packaged in JAR files in its output.","Bug 50802  Deviation from servlet3 spec concerning resource lookup from META-INF/resources","deviat servlet3 spec concern resourc lookup meta inf resourc","","","""java/org/apache/naming/resources/BaseDirContext.java""","1","1","1","1","16","0","6","9","2","0","2","60","81","81","11","81","0","1","4","76","1623","223","538","274","205","865","191","305","156","149","8","8","12","7","3","2","105","105","109","84","normal"
"50802","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50802 Ensure that ServletContext.getResourcePaths() includes static resources packaged in JAR files in its output.","Bug 50802  Deviation from servlet3 spec concerning resource lookup from META-INF/resources","deviat servlet3 spec concern resourc lookup meta inf resourc","","","""java/org/apache/naming/resources/FileDirContext.java""","2","2","2","1","19","1","8","9","3","0","3","42","42","42","7","42","0","0","7","35","1108","203","425","168","228","481","180","278","111","167","13","13","14","8","4","1","94","94","98","54","normal"
"50802","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50802 Ensure that ServletContext.getResourcePaths() includes static resources packaged in JAR files in its output.","Bug 50802  Deviation from servlet3 spec concerning resource lookup from META-INF/resources","deviat servlet3 spec concern resourc lookup meta inf resourc","","","""java/org/apache/naming/resources/VirtualDirContext.java""","3","3","4","2","16","2","10","3","1","0","0","8","8","8","3","8","0","2","2","4","225","33","107","43","57","85","51","78","38","40","7","7","10","7","3","1","25","25","32","20","normal"
"50802","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50802 Ensure that ServletContext.getResourcePaths() includes static resources packaged in JAR files in its output.","Bug 50802  Deviation from servlet3 spec concerning resource lookup from META-INF/resources","deviat servlet3 spec concern resourc lookup meta inf resourc","","","""java/org/apache/naming/resources/WARDirContext.java""","1","1","1","1","17","0","7","9","3","0","1","42","42","42","6","42","0","1","9","32","993","172","378","169","188","443","173","254","120","134","7","7","7","5","5","1","78","78","81","56","normal"
"50826","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50826 Avoid IAE when Tomcat instance is destroyed without every being started. Add a test case for this.","Bug 50826  (Embedded) Tomcat.destroy() throws java.lang.IllegalArgumentException","embed tomcat destroy throw java lang illeg argument except illegalargumentexcept","Embedded Tomcat sometimes throws this exception when calling destroy() method:

java.lang.IllegalArgumentException: null source
	at java.util.EventObject.<init>(EventObject.java:56)
	at javax.management.Notification.<init>(Notification.java:184)
	at org.apache.catalina.core.StandardContext.destroyInternal(StandardContext.java:5433)
	at org.apache.catalina.util.LifecycleBase.destroy(LifecycleBase.java:285)
	at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:969)
	at org.apache.catalina.core.ContainerBase.destroyInternal(ContainerBase.java:1108)
	at org.apache.catalina.util.LifecycleBase.destroy(LifecycleBase.java:285)
	at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:969)
	at org.apache.catalina.core.ContainerBase.destroyInternal(ContainerBase.java:1108)
	at org.apache.catalina.util.LifecycleBase.destroy(LifecycleBase.java:285)
	at org.apache.catalina.core.StandardService.destroyInternal(StandardService.java:593)
	at org.apache.catalina.util.LifecycleBase.destroy(LifecycleBase.java:285)
	at org.apache.catalina.core.StandardServer.destroyInternal(StandardServer.java:786)
	at org.apache.catalina.util.LifecycleBase.destroy(LifecycleBase.java:285)
	at org.apache.catalina.startup.Tomcat.destroy(Tomcat.java:323)
	at su.msk.jet.nioproxy.rule.config.EmbeddedWebserver.stop(EmbeddedWebserver.java:26)

I think that StandardContext.destroyInternal() misses check that this.getObjectName()!=null","embed tomcat sometim throw except call destroy method java lang illeg argument except illegalargumentexcept null sourc java util event object eventobject init event object eventobject java javax manag notif init notif java apach catalina core standard context standardcontext destroy intern destroyintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas destroy lifecycl base lifecyclebas java apach catalina core contain base containerbas remov child removechild contain base containerbas java apach catalina core contain base containerbas destroy intern destroyintern contain base containerbas java apach catalina util lifecycl base lifecyclebas destroy lifecycl base lifecyclebas java apach catalina core contain base containerbas remov child removechild contain base containerbas java apach catalina core contain base containerbas destroy intern destroyintern contain base containerbas java apach catalina util lifecycl base lifecyclebas destroy lifecycl base lifecyclebas java apach catalina core standard servic standardservic destroy intern destroyintern standard servic standardservic java apach catalina util lifecycl base lifecyclebas destroy lifecycl base lifecyclebas java apach catalina core standard server standardserv destroy intern destroyintern standard server standardserv java apach catalina util lifecycl base lifecyclebas destroy lifecycl base lifecyclebas java apach catalina startup tomcat destroy tomcat java msk jet nioproxi rule config embed webserv embeddedwebserv stop embed webserv embeddedwebserv java think standard context standardcontext destroy intern destroyintern miss check get object name getobjectnam null","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","6","0","3","302","302","302","121","302","0","11","11","280","6425","1283","3311","1010","2004","1836","1475","2265","843","1422","54","54","69","9","5","1","694","694","751","392","normal"
"50826","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50826 Avoid IAE when Tomcat instance is destroyed without every being started. Add a test case for this.","Bug 50826  (Embedded) Tomcat.destroy() throws java.lang.IllegalArgumentException","embed tomcat destroy throw java lang illeg argument except illegalargumentexcept","Embedded Tomcat sometimes throws this exception when calling destroy() method:

java.lang.IllegalArgumentException: null source
	at java.util.EventObject.<init>(EventObject.java:56)
	at javax.management.Notification.<init>(Notification.java:184)
	at org.apache.catalina.core.StandardContext.destroyInternal(StandardContext.java:5433)
	at org.apache.catalina.util.LifecycleBase.destroy(LifecycleBase.java:285)
	at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:969)
	at org.apache.catalina.core.ContainerBase.destroyInternal(ContainerBase.java:1108)
	at org.apache.catalina.util.LifecycleBase.destroy(LifecycleBase.java:285)
	at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:969)
	at org.apache.catalina.core.ContainerBase.destroyInternal(ContainerBase.java:1108)
	at org.apache.catalina.util.LifecycleBase.destroy(LifecycleBase.java:285)
	at org.apache.catalina.core.StandardService.destroyInternal(StandardService.java:593)
	at org.apache.catalina.util.LifecycleBase.destroy(LifecycleBase.java:285)
	at org.apache.catalina.core.StandardServer.destroyInternal(StandardServer.java:786)
	at org.apache.catalina.util.LifecycleBase.destroy(LifecycleBase.java:285)
	at org.apache.catalina.startup.Tomcat.destroy(Tomcat.java:323)
	at su.msk.jet.nioproxy.rule.config.EmbeddedWebserver.stop(EmbeddedWebserver.java:26)

I think that StandardContext.destroyInternal() misses check that this.getObjectName()!=null","embed tomcat sometim throw except call destroy method java lang illeg argument except illegalargumentexcept null sourc java util event object eventobject init event object eventobject java javax manag notif init notif java apach catalina core standard context standardcontext destroy intern destroyintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas destroy lifecycl base lifecyclebas java apach catalina core contain base containerbas remov child removechild contain base containerbas java apach catalina core contain base containerbas destroy intern destroyintern contain base containerbas java apach catalina util lifecycl base lifecyclebas destroy lifecycl base lifecyclebas java apach catalina core contain base containerbas remov child removechild contain base containerbas java apach catalina core contain base containerbas destroy intern destroyintern contain base containerbas java apach catalina util lifecycl base lifecyclebas destroy lifecycl base lifecyclebas java apach catalina core standard servic standardservic destroy intern destroyintern standard servic standardservic java apach catalina util lifecycl base lifecyclebas destroy lifecycl base lifecyclebas java apach catalina core standard server standardserv destroy intern destroyintern standard server standardserv java apach catalina util lifecycl base lifecyclebas destroy lifecycl base lifecyclebas java apach catalina startup tomcat destroy tomcat java msk jet nioproxi rule config embed webserv embeddedwebserv stop embed webserv embeddedwebserv java think standard context standardcontext destroy intern destroyintern miss check get object name getobjectnam null","""test/org/apache/catalina/startup/TestTomcat.java""","1","1","1","1","14","2","10","2","5","0","4","15","15","15","2","15","0","0","3","12","329","72","199","102","115","66","125","153","85","68","6","6","6","1","3","0","22","22","22","15","normal"
"50836","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50836 Better documentation of the meaning of Lifecycle.isAvailable() and correct a couple of cases where this could incorrectly return true.","Bug 50836  LifecycleState#isAvailable() to be more restrictive","lifecycl state lifecyclest is avail isavail restrict","I think some of the values returned by LifecycleState#isAvailable() are wrong.

1. I am certain that MUST_DESTROY should return false, because it is a state that is later than stopped.
2. I think that STOPPING_PREP should return false, because we can get there from the FAILED state.
3. I think that STARTING should return false, because it is too early to return true there.

As a result, the following is the complete list of states are to return true in #isAvailable():
STARTED, MUST_STOP","think valu return lifecycl state lifecyclest is avail isavail wrong certain must destroy return fals state later stop think stop prep return fals get fail state think start return fals earli return true result follow complet list state return true is avail isavail start must stop","""java/org/apache/catalina/Lifecycle.java""","0","0","0","0","0","0","0","0","1","0","13","0","9","9","0","9","0","0","0","9","304","50","25","24","13","229","23","24","24","0","0","0","0","0","0","9","0","0","0","0","normal"
"50836","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50836 Better documentation of the meaning of Lifecycle.isAvailable() and correct a couple of cases where this could incorrectly return true.","Bug 50836  LifecycleState#isAvailable() to be more restrictive","lifecycl state lifecyclest is avail isavail restrict","I think some of the values returned by LifecycleState#isAvailable() are wrong.

1. I am certain that MUST_DESTROY should return false, because it is a state that is later than stopped.
2. I think that STOPPING_PREP should return false, because we can get there from the FAILED state.
3. I think that STARTING should return false, because it is too early to return true there.

As a result, the following is the complete list of states are to return true in #isAvailable():
STARTED, MUST_STOP","think valu return lifecycl state lifecyclest is avail isavail wrong certain must destroy return fals state later stop think stop prep return fals get fail state think start return fals earli return true result follow complet list state return true is avail isavail start must stop","""java/org/apache/catalina/util/LifecycleBase.java""","3","3","4","1","18","2","12","4","1","0","2","14","18","18","2","18","0","2","7","9","378","72","200","50","121","106","77","120","36","84","9","9","13","3","2","1","42","42","57","18","normal"
"50836","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50836 Better documentation of the meaning of Lifecycle.isAvailable() and correct a couple of cases where this could incorrectly return true.","Bug 50836  LifecycleState#isAvailable() to be more restrictive","lifecycl state lifecyclest is avail isavail restrict","I think some of the values returned by LifecycleState#isAvailable() are wrong.

1. I am certain that MUST_DESTROY should return false, because it is a state that is later than stopped.
2. I think that STOPPING_PREP should return false, because we can get there from the FAILED state.
3. I think that STARTING should return false, because it is too early to return true there.

As a result, the following is the complete list of states are to return true in #isAvailable():
STARTED, MUST_STOP","think valu return lifecycl state lifecyclest is avail isavail wrong certain must destroy return fals state later stop think stop prep return fals get fail state think start return fals earli return true result follow complet list state return true is avail isavail start must stop","""java/org/apache/catalina/LifecycleListener.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","0","0","0","1","42","9","4","3","0","29","2","3","3","0","0","0","0","0","0","7","0","0","0","0","normal"
"50836","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50836 Better documentation of the meaning of Lifecycle.isAvailable() and correct a couple of cases where this could incorrectly return true.","Bug 50836  LifecycleState#isAvailable() to be more restrictive","lifecycl state lifecyclest is avail isavail restrict","I think some of the values returned by LifecycleState#isAvailable() are wrong.

1. I am certain that MUST_DESTROY should return false, because it is a state that is later than stopped.
2. I think that STOPPING_PREP should return false, because we can get there from the FAILED state.
3. I think that STARTING should return false, because it is too early to return true there.

As a result, the following is the complete list of states are to return true in #isAvailable():
STARTED, MUST_STOP","think valu return lifecycl state lifecyclest is avail isavail wrong certain must destroy return fals state later stop think stop prep return fals get fail state think start return fals earli return true result follow complet list state return true is avail isavail start must stop","""java/org/apache/catalina/LifecycleState.java""","1","1","1","1","3","0","2","1","1","0","0","5","3","5","16","5","0","1","0","4","61","6","29","21","4","26","8","11","7","4","1","1","1","1","0","1","5","5","5","5","normal"
"50855","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50855 Fix NPE on HttpServletRequest.logout() when debug logging is enabled.","Bug 50855  NullPointerException thrown in AuthenticatorBase.register method for null principal","null pointer except nullpointerexcept thrown authent base authenticatorbas regist method null princip","","","""java/org/apache/catalina/authenticator/AuthenticatorBase.java""","2","2","3","1","19","2","10","7","1","0","7","29","31","31","12","31","0","0","6","25","873","156","377","125","222","342","176","263","103","160","30","30","34","8","5","1","86","86","94","42","normal"
"50857","0","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50857 Timeouts have to be trapped, and properly handled","Bug 50857  Test failures on Windows 7, 24 thread system","failur window thread system","testPoolThreads20Connections10FairAsync

    [junit] java.sql.SQLException: [tomcat-pool-10] NoWait: Pool empty. Unable to fetch a connection, none available[10 in use].
    [junit]     at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:615)
    [junit]     at org.apache.tomcat.jdbc.pool.ConnectionPool.getConnectionAsync(ConnectionPool.java:143)
    [junit]     at org.apache.tomcat.jdbc.pool.DataSourceProxy.getConnectionAsync(DataSourceProxy.java:122)
    [junit]     at org.apache.tomcat.jdbc.test.FairnessTest$TestThread.run(FairnessTest.java:231)","test pool threads20 connections10 fair async testpoolthreads20connections10fairasync junit java sql except sqlexcept tomcat pool tomcatpool no wait nowait pool empti unabl fetch connect none avail use junit apach tomcat jdbc pool connect pool connectionpool borrow connect borrowconnect connect pool connectionpool java junit apach tomcat jdbc pool connect pool connectionpool get connect async getconnectionasync connect pool connectionpool java junit apach tomcat jdbc pool data sourc proxi datasourceproxi get connect async getconnectionasync data sourc proxi datasourceproxi java junit apach tomcat jdbc fair test fairnesstest test thread testthread run fair test fairnesstest java","""modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","4","4","4","1","22","0","15","7","3","2","2","45","45","43","20","45","1","1","16","27","1196","96","726","151","497","408","355","545","154","391","19","19","19","8","6","1","189","189","206","87","normal"
"50860","383","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50860 add option to log validation errors","Bug 50860  In case of invalid or empty slqQuery connection are always invalidated without usefull information","case invalid empti slq queri slqqueri connect alway invalid without useful inform","The code is (in PooledConnection.java#validate(int validateAction,String sql) )
        Statement stmt = null;
        try {
            stmt = connection.createStatement();
            stmt.execute(query);
            stmt.close();
            this.lastValidated = now;
            return true;
        } catch (Exception ignore) {
            if (log.isDebugEnabled())
                log.debug(""Unable to validate object:"",ignore);
            if (stmt!=null)
                try { stmt.close();} catch (Exception ignore2){/*NOOP*/}
        }
        return false;

So in the case of null or invalid query (connection is always invalidated : seems normal :-) ).
But without any usefull message (except if you use debug : but seems complicated in a production env).
So IMHO adding a log.warning in case of null query could be usefull.","code pool connect pooledconnect java valid int valid action validateact string sql statement stmt null tri stmt connect creat statement createstat stmt execut queri stmt close last valid lastvalid return true catch except ignor log is debug enabl isdebugen log debug unabl valid object ignor stmt null tri stmt close catch except ignore2 noop return fals case null invalid queri connect alway invalid seem normal without useful messag except use debug seem complic product env imho ad log warn case null queri could useful","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/jmx/ConnectionPool.java""","1","1","1","1","4","0","2","0","1","1","8","114","114","113","3","114","0","0","0","114","799","188","474","256","120","137","125","246","149","97","4","4","4","1","2","0","119","119","119","114","normal"
"50860","383","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50860 add option to log validation errors","Bug 50860  In case of invalid or empty slqQuery connection are always invalidated without usefull information","case invalid empti slq queri slqqueri connect alway invalid without useful inform","The code is (in PooledConnection.java#validate(int validateAction,String sql) )
        Statement stmt = null;
        try {
            stmt = connection.createStatement();
            stmt.execute(query);
            stmt.close();
            this.lastValidated = now;
            return true;
        } catch (Exception ignore) {
            if (log.isDebugEnabled())
                log.debug(""Unable to validate object:"",ignore);
            if (stmt!=null)
                try { stmt.close();} catch (Exception ignore2){/*NOOP*/}
        }
        return false;

So in the case of null or invalid query (connection is always invalidated : seems normal :-) ).
But without any usefull message (except if you use debug : but seems complicated in a production env).
So IMHO adding a log.warning in case of null query could be usefull.","code pool connect pooledconnect java valid int valid action validateact string sql statement stmt null tri stmt connect creat statement createstat stmt execut queri stmt close last valid lastvalid return true catch except ignor log is debug enabl isdebugen log debug unabl valid object ignor stmt null tri stmt close catch except ignore2 noop return fals case null invalid queri connect alway invalid seem normal without useful messag except use debug seem complic product env imho ad log warn case null queri could useful","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/DataSourceProxy.java""","1","1","1","1","6","0","3","2","1","0","1","131","131","131","2","131","0","1","0","130","1255","239","603","256","208","413","182","340","156","184","4","4","4","3","3","1","157","157","157","133","normal"
"50860","383","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50860 add option to log validation errors","Bug 50860  In case of invalid or empty slqQuery connection are always invalidated without usefull information","case invalid empti slq queri slqqueri connect alway invalid without useful inform","The code is (in PooledConnection.java#validate(int validateAction,String sql) )
        Statement stmt = null;
        try {
            stmt = connection.createStatement();
            stmt.execute(query);
            stmt.close();
            this.lastValidated = now;
            return true;
        } catch (Exception ignore) {
            if (log.isDebugEnabled())
                log.debug(""Unable to validate object:"",ignore);
            if (stmt!=null)
                try { stmt.close();} catch (Exception ignore2){/*NOOP*/}
        }
        return false;

So in the case of null or invalid query (connection is always invalidated : seems normal :-) ).
But without any usefull message (except if you use debug : but seems complicated in a production env).
So IMHO adding a log.warning in case of null query could be usefull.","code pool connect pooledconnect java valid int valid action validateact string sql statement stmt null tri stmt connect creat statement createstat stmt execut queri stmt close last valid lastvalid return true catch except ignor log is debug enabl isdebugen log debug unabl valid object ignor stmt null tri stmt close catch except ignore2 noop return fals case null invalid queri connect alway invalid seem normal without useful messag except use debug seem complic product env imho ad log warn case null queri could useful","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PoolConfiguration.java""","0","0","0","0","0","0","0","0","1","0","1","0","97","97","0","97","0","0","0","97","838","106","103","102","1","629","101","102","102","0","0","0","0","0","0","6","0","0","0","0","normal"
"50860","383","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50860 add option to log validation errors","Bug 50860  In case of invalid or empty slqQuery connection are always invalidated without usefull information","case invalid empti slq queri slqqueri connect alway invalid without useful inform","The code is (in PooledConnection.java#validate(int validateAction,String sql) )
        Statement stmt = null;
        try {
            stmt = connection.createStatement();
            stmt.execute(query);
            stmt.close();
            this.lastValidated = now;
            return true;
        } catch (Exception ignore) {
            if (log.isDebugEnabled())
                log.debug(""Unable to validate object:"",ignore);
            if (stmt!=null)
                try { stmt.close();} catch (Exception ignore2){/*NOOP*/}
        }
        return false;

So in the case of null or invalid query (connection is always invalidated : seems normal :-) ).
But without any usefull message (except if you use debug : but seems complicated in a production env).
So IMHO adding a log.warning in case of null query could be usefull.","code pool connect pooledconnect java valid int valid action validateact string sql statement stmt null tri stmt connect creat statement createstat stmt execut queri stmt close last valid lastvalid return true catch except ignor log is debug enabl isdebugen log debug unabl valid object ignor stmt null tri stmt close catch except ignore2 noop return fals case null invalid queri connect alway invalid seem normal without useful messag except use debug seem complic product env imho ad log warn case null queri could useful","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PoolProperties.java""","1","1","1","1","6","0","4","2","3","2","3","121","121","119","52","121","0","0","1","120","1223","220","688","314","289","315","274","438","215","223","6","6","10","5","5","0","164","164","175","144","normal"
"50860","383","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50860 add option to log validation errors","Bug 50860  In case of invalid or empty slqQuery connection are always invalidated without usefull information","case invalid empti slq queri slqqueri connect alway invalid without useful inform","The code is (in PooledConnection.java#validate(int validateAction,String sql) )
        Statement stmt = null;
        try {
            stmt = connection.createStatement();
            stmt.execute(query);
            stmt.close();
            this.lastValidated = now;
            return true;
        } catch (Exception ignore) {
            if (log.isDebugEnabled())
                log.debug(""Unable to validate object:"",ignore);
            if (stmt!=null)
                try { stmt.close();} catch (Exception ignore2){/*NOOP*/}
        }
        return false;

So in the case of null or invalid query (connection is always invalidated : seems normal :-) ).
But without any usefull message (except if you use debug : but seems complicated in a production env).
So IMHO adding a log.warning in case of null query could be usefull.","code pool connect pooledconnect java valid int valid action validateact string sql statement stmt null tri stmt connect creat statement createstat stmt execut queri stmt close last valid lastvalid return true catch except ignor log is debug enabl isdebugen log debug unabl valid object ignor stmt null tri stmt close catch except ignore2 noop return fals case null invalid queri connect alway invalid seem normal without useful messag except use debug seem complic product env imho ad log warn case null queri could useful","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PooledConnection.java""","2","2","3","1","14","0","9","4","1","0","7","36","36","36","15","36","0","2","2","32","669","72","369","88","239","236","175","277","87","190","13","13","15","7","3","1","103","103","128","47","normal"
"50864","404","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50864 Add in the ability to configure most pool properties even while the pool is running","Bug 50864  Reconfigure pool on the fly using JMX","reconfigur pool fli use jmx","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","4","4","4","1","21","0","14","6","3","6","4","51","51","45","21","51","1","3","17","30","1301","105","817","176","551","410","391","606","173","433","19","19","19","8","6","1","213","213","230","98","normal"
"50864","404","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50864 Add in the ability to configure most pool properties even while the pool is running","Bug 50864  Reconfigure pool on the fly using JMX","reconfigur pool fli use jmx","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","4","4","4","1","21","0","14","6","3","6","4","51","51","45","21","51","1","3","17","30","1301","105","817","176","551","410","391","606","173","433","19","19","19","8","6","1","213","213","230","98","normal"
"50864","404","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50864 Add in the ability to configure most pool properties even while the pool is running","Bug 50864  Reconfigure pool on the fly using JMX","reconfigur pool fli use jmx","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","1","1","1","1","4","0","2","0","1","1","8","118","118","117","3","118","0","0","0","118","832","193","490","264","124","149","129","254","153","101","4","4","4","1","2","0","123","123","123","118","normal"
"50864","404","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50864 Add in the ability to configure most pool properties even while the pool is running","Bug 50864  Reconfigure pool on the fly using JMX","reconfigur pool fli use jmx","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","1","1","1","1","4","0","2","0","1","1","8","118","118","117","3","118","0","0","0","118","832","193","490","264","124","149","129","254","153","101","4","4","4","1","2","0","123","123","123","118","normal"
"50864","404","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=50864 Add in the ability to configure most pool properties even while the pool is running","Bug 50864  Reconfigure pool on the fly using JMX","reconfigur pool fli use jmx","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PoolProperties.java""","1","1","1","1","6","0","4","2","3","2","4","125","125","123","54","125","0","0","1","124","1259","225","707","325","297","327","281","449","222","227","6","6","10","5","5","0","168","168","179","148","normal"
"50887","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50887 Add support for configuring the JSSE provider used to convert client certificates. Based on a patch by pknopp.","Bug 50887  Enhancement to set security-provider within AjpAprProcessor","enhanc set secur provid securityprovid within ajp apr processor ajpaprprocessor","","","""java/org/apache/coyote/ajp/AbstractAjpProcessor.java""","7","6","7","2","42","4","30","6","2","0","1","14","22","22","22","22","0","0","12","10","851","155","499","138","368","199","289","378","131","247","32","31","37","11","5","0","99","87","108","37","normal"
"50887","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50887 Add support for configuring the JSSE provider used to convert client certificates. Based on a patch by pknopp.","Bug 50887  Enhancement to set security-provider within AjpAprProcessor","enhanc set secur provid securityprovid within ajp apr processor ajpaprprocessor","","","""java/org/apache/coyote/AbstractProtocolHandler.java""","1","1","1","1","5","0","4","0","1","0","1","46","49","49","8","49","0","1","3","45","430","85","252","90","140","93","111","180","74","106","7","7","7","1","2","0","68","68","68","46","normal"
"50887","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50887 Add support for configuring the JSSE provider used to convert client certificates. Based on a patch by pknopp.","Bug 50887  Enhancement to set security-provider within AjpAprProcessor","enhanc set secur provid securityprovid within ajp apr processor ajpaprprocessor","","","""java/org/apache/coyote/ajp/AjpAprProtocol.java""","2","2","2","1","8","0","7","0","3","0","2","22","22","22","7","22","0","0","6","16","316","52","211","70","125","53","104","150","64","86","7","7","8","4","3","0","45","45","48","25","normal"
"50887","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50887 Add support for configuring the JSSE provider used to convert client certificates. Based on a patch by pknopp.","Bug 50887  Enhancement to set security-provider within AjpAprProcessor","enhanc set secur provid securityprovid within ajp apr processor ajpaprprocessor","","","""java/org/apache/coyote/ajp/AjpProtocol.java""","2","2","2","1","9","0","8","0","3","0","2","16","16","16","7","16","0","0","6","10","270","42","185","64","105","43","94","129","58","71","8","8","8","5","3","0","35","35","35","20","normal"
"50887","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50887 Add support for configuring the JSSE provider used to convert client certificates. Based on a patch by pknopp.","Bug 50887  Enhancement to set security-provider within AjpAprProcessor","enhanc set secur provid securityprovid within ajp apr processor ajpaprprocessor","","","""java/org/apache/coyote/http11/Http11AprProcessor.java""","9","9","11","3","55","6","41","8","1","0","1","14","14","14","7","14","0","0","6","8","918","132","627","131","470","161","355","482","123","359","48","48","58","18","6","0","131","131","163","52","normal"
"50887","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50887 Add support for configuring the JSSE provider used to convert client certificates. Based on a patch by pknopp.","Bug 50887  Enhancement to set security-provider within AjpAprProcessor","enhanc set secur provid securityprovid within ajp apr processor ajpaprprocessor","","","""java/org/apache/coyote/http11/Http11AprProtocol.java""","1","1","1","1","6","0","4","1","4","0","3","55","55","55","7","55","1","0","6","48","481","71","315","110","217","95","169","259","103","156","10","10","11","4","4","0","91","91","94","58","normal"
"50887","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50887 Add support for configuring the JSSE provider used to convert client certificates. Based on a patch by pknopp.","Bug 50887  Enhancement to set security-provider within AjpAprProcessor","enhanc set secur provid securityprovid within ajp apr processor ajpaprprocessor","","","""java/org/apache/catalina/valves/SSLValve.java""","3","3","3","1","17","0","15","1","1","0","0","3","3","3","0","3","0","0","0","3","119","11","59","26","35","49","36","47","24","23","6","6","7","3","2","1","10","10","11","5","normal"
"50895","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50895 Don't initialize classes during compilation","Bug 50895  JSP compiler initializes classes during compile which can result in failures","jsp compil initi class compil result failur","","","""java/org/apache/jasper/compiler/ELFunctionMapper.java""","2","2","2","1","13","1","10","1","4","1","0","18","18","17","6","18","0","5","0","13","332","45","219","78","123","70","116","161","67","94","12","12","12","5","5","0","41","41","44","25","normal"
"50903","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50903 If a connector is stopped, not not process any keep-alive connections. The exact behaviours are: - HTTP BIO - blocks until request line is read and then returns 503 - HTTP NIO - uses polling, so returns 503 immediately connector is stopped - HTTP APR - blocks until request line is read and then returns 503 - AJP BIO - blocks until request packet is received and then returns 503 - subsequent requests will timeout - AJP APR - no change - subsequent requests will timeout","Bug 50903  Current keep-alive request processed after connector.stop()","current keep aliv keepal request process connector stop","When the connector is stopped, if a connection is in a keep-alive state the next request received by that connection will be processed and then the connection will be closed. When the request is received, it should be rejected.

Outstanding questions:
- What return code (if any) should be sent back to the client?
- If the reading of a request starts before the connector is stopped, should that request be allowed to complete or should it be rejected?","connector stop connect keep aliv keepal state next request receiv connect process connect close request receiv reject outstand question return code sent back client read request start connector stop request allow complet reject","""java/org/apache/coyote/ajp/AjpProcessor.java""","3","3","4","2","25","2","17","5","2","0","4","17","17","17","8","17","0","0","8","9","643","115","372","86","250","157","212","277","70","207","21","21","25","8","4","0","66","66","71","34","normal"
"50903","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50903 If a connector is stopped, not not process any keep-alive connections. The exact behaviours are: - HTTP BIO - blocks until request line is read and then returns 503 - HTTP NIO - uses polling, so returns 503 immediately connector is stopped - HTTP APR - blocks until request line is read and then returns 503 - AJP BIO - blocks until request packet is received and then returns 503 - subsequent requests will timeout - AJP APR - no change - subsequent requests will timeout","Bug 50903  Current keep-alive request processed after connector.stop()","current keep aliv keepal request process connector stop","When the connector is stopped, if a connection is in a keep-alive state the next request received by that connection will be processed and then the connection will be closed. When the request is received, it should be rejected.

Outstanding questions:
- What return code (if any) should be sent back to the client?
- If the reading of a request starts before the connector is stopped, should that request be allowed to complete or should it be rejected?","connector stop connect keep aliv keepal state next request receiv connect process connect close request receiv reject outstand question return code sent back client read request start connector stop request allow complet reject","""java/org/apache/coyote/http11/Http11AprProcessor.java""","8","8","10","3","48","5","36","7","1","0","1","16","16","16","8","16","0","0","6","10","939","135","636","134","477","170","360","490","126","364","49","49","59","18","6","0","134","134","166","54","normal"
"50903","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50903 If a connector is stopped, not not process any keep-alive connections. The exact behaviours are: - HTTP BIO - blocks until request line is read and then returns 503 - HTTP NIO - uses polling, so returns 503 immediately connector is stopped - HTTP APR - blocks until request line is read and then returns 503 - AJP BIO - blocks until request packet is received and then returns 503 - subsequent requests will timeout - AJP APR - no change - subsequent requests will timeout","Bug 50903  Current keep-alive request processed after connector.stop()","current keep aliv keepal request process connector stop","When the connector is stopped, if a connection is in a keep-alive state the next request received by that connection will be processed and then the connection will be closed. When the request is received, it should be rejected.

Outstanding questions:
- What return code (if any) should be sent back to the client?
- If the reading of a request starts before the connector is stopped, should that request be allowed to complete or should it be rejected?","connector stop connect keep aliv keepal state next request receiv connect process connect close request receiv reject outstand question return code sent back client read request start connector stop request allow complet reject","""java/org/apache/coyote/http11/Http11NioProcessor.java""","9","9","11","3","51","5","38","8","1","0","1","17","17","17","9","17","0","0","7","10","1031","139","697","148","526","203","388","545","139","406","52","52","61","22","7","0","165","165","199","63","normal"
"50903","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50903 If a connector is stopped, not not process any keep-alive connections. The exact behaviours are: - HTTP BIO - blocks until request line is read and then returns 503 - HTTP NIO - uses polling, so returns 503 immediately connector is stopped - HTTP APR - blocks until request line is read and then returns 503 - AJP BIO - blocks until request packet is received and then returns 503 - subsequent requests will timeout - AJP APR - no change - subsequent requests will timeout","Bug 50903  Current keep-alive request processed after connector.stop()","current keep aliv keepal request process connector stop","When the connector is stopped, if a connection is in a keep-alive state the next request received by that connection will be processed and then the connection will be closed. When the request is received, it should be rejected.

Outstanding questions:
- What return code (if any) should be sent back to the client?
- If the reading of a request starts before the connector is stopped, should that request be allowed to complete or should it be rejected?","connector stop connect keep aliv keepal state next request receiv connect process connect close request receiv reject outstand question return code sent back client read request start connector stop request allow complet reject","""java/org/apache/coyote/http11/Http11Processor.java""","8","8","9","2","45","4","34","6","1","0","1","15","15","15","5","15","0","0","8","7","822","122","556","105","412","147","298","416","96","320","37","37","42","13","4","0","121","121","142","44","normal"
"50903","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50903 If a connector is stopped, not not process any keep-alive connections. The exact behaviours are: - HTTP BIO - blocks until request line is read and then returns 503 - HTTP NIO - uses polling, so returns 503 immediately connector is stopped - HTTP APR - blocks until request line is read and then returns 503 - AJP BIO - blocks until request packet is received and then returns 503 - subsequent requests will timeout - AJP APR - no change - subsequent requests will timeout","Bug 50903  Current keep-alive request processed after connector.stop()","current keep aliv keepal request process connector stop","When the connector is stopped, if a connection is in a keep-alive state the next request received by that connection will be processed and then the connection will be closed. When the request is received, it should be rejected.

Outstanding questions:
- What return code (if any) should be sent back to the client?
- If the reading of a request starts before the connector is stopped, should that request be allowed to complete or should it be rejected?","connector stop connect keep aliv keepal state next request receiv connect process connect close request receiv reject outstand question return code sent back client read request start connector stop request allow complet reject","""test/org/apache/catalina/startup/TomcatBaseTest.java""","2","2","3","1","17","0","13","2","2","6","2","14","14","8","2","14","0","0","1","13","321","36","226","81","128","59","109","159","72","87","13","13","13","1","4","0","41","41","44","14","normal"
"50927","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50927 Better error message if SSLCertificateFile not set","Bug 50927  [patch] More specific error message for missing SSLCertificateFile","patch specif error messag miss certif file sslcertificatefil","","","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","15","0","11","2","11","0","2","85","88","88","64","88","1","1","9","77","1780","227","1134","283","779","419","580","880","265","615","31","31","39","11","7","0","277","277","315","118","enhancement"
"50929","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50929 When wrapping an exception, set the root cause","Bug 50929  [patch] Ensure rethrown exceptions retain the original cause","patch ensur rethrown except retain origin caus","","","""java/org/apache/catalina/connector/CoyoteInputStream.java""","2","2","2","1","13","1","11","0","6","0","0","14","14","14","1","14","1","0","2","11","246","50","158","48","93","38","51","81","36","45","4","4","4","3","2","0","29","29","29","22","enhancement"
"50929","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50929 When wrapping an exception, set the root cause","Bug 50929  [patch] Ensure rethrown exceptions retain the original cause","patch ensur rethrown except retain origin caus","","","""java/javax/servlet/http/HttpUtils.java""","4","4","5","1","45","2","21","22","1","4","2","5","5","1","0","5","0","1","0","4","282","29","118","38","84","138","68","89","36","53","7","7","7","3","4","1","23","22","26","7","enhancement"
"50929","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50929 When wrapping an exception, set the root cause","Bug 50929  [patch] Ensure rethrown exceptions retain the original cause","patch ensur rethrown except retain origin caus","","","""java/org/apache/catalina/valves/JDBCAccessLogValve.java""","1","1","1","1","14","0","8","5","1","0","1","31","31","31","23","31","0","0","4","27","684","99","297","97","172","289","155","214","89","125","15","15","15","4","4","1","57","57","57","34","enhancement"
"50929","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50929 When wrapping an exception, set the root cause","Bug 50929  [patch] Ensure rethrown exceptions retain the original cause","patch ensur rethrown except retain origin caus","","","""java/org/apache/catalina/realm/JDBCRealm.java""","2","2","2","1","18","2","9","7","1","0","2","32","32","32","13","32","0","0","11","21","810","173","327","93","205","311","153","225","77","148","8","8","8","4","5","1","69","69","70","41","enhancement"
"50929","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50929 When wrapping an exception, set the root cause","Bug 50929  [patch] Ensure rethrown exceptions retain the original cause","patch ensur rethrown except retain origin caus","","","""java/org/apache/tomcat/util/digester/NodeCreateRule.java""","2","2","2","1","23","2","11","9","2","0","0","11","11","11","7","11","0","0","0","11","440","88","154","56","85","198","73","100","44","56","5","5","7","1","3","1","25","25","28","11","enhancement"
"50929","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50929 When wrapping an exception, set the root cause","Bug 50929  [patch] Ensure rethrown exceptions retain the original cause","patch ensur rethrown except retain origin caus","","","""java/org/apache/naming/resources/WARDirContext.java""","1","1","1","1","16","0","7","8","3","0","1","44","44","44","6","44","0","1","9","34","1003","175","385","172","190","443","175","259","121","138","7","7","7","5","5","1","81","81","84","58","enhancement"
"50950","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50950 Correct possible NotSerializableException for an authenticated session when running with a security manager.","Bug 50950  NotSerializableException: org.apache.catalina.realm.GenericPrincipal","not serializ except notserializableexcept apach catalina realm gener princip genericprincip","","","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","7","4","1","0","2","52","52","52","5","52","0","2","7","43","836","98","476","147","264","264","229","345","117","228","9","9","10","5","3","1","102","102","117","63","normal"
"50997","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50997 Relax the requirement that directories must have a name ending in .jar to be treated as an expanded JAR file by the default JarScanner. Based on patch by Rodion Zhitomirsky.","Bug 50997  StandardJarScanner ignores web-fragment.xml files in unpacked jars if they are not ending with "".jar""","standard jar scanner standardjarscann ignor web fragment webfrag xml file unpack jar end jar","","","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","8","1","40","3","30","6","2","1","12","51","51","50","11","51","0","3","38","10","2386","314","1675","394","1181","399","782","1192","387","805","37","37","43","11","5","0","379","379","412","91","minor"
"50997","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50997 Relax the requirement that directories must have a name ending in .jar to be treated as an expanded JAR file by the default JarScanner. Based on patch by Rodion Zhitomirsky.","Bug 50997  StandardJarScanner ignores web-fragment.xml files in unpacked jars if they are not ending with "".jar""","standard jar scanner standardjarscann ignor web fragment webfrag xml file unpack jar end jar","","","""java/org/apache/tomcat/util/scan/StandardJarScanner.java""","4","4","4","1","19","1","15","2","1","0","3","9","9","9","5","9","0","2","0","7","279","30","178","64","102","71","81","121","59","62","19","19","22","1","6","0","36","36","42","9","minor"
"51038","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51038 Ensure async requests are included in access logs.","Bug 51038  No access logs for Servlet 3.0 async requests","access log servlet async request","Access logs written by org.apache.catalina.valves.AccessLogValve are not being written for servlet 3.0 async requests.

To reproduce:
- Handle a request asynchronously by marking the servlet with @WebServlet(asyncSupported=true)
- Send some traffic and notice that nothing is being written to the access logs.

AccessLogValve.log() is called by org.apache.catalina.Context.logAccess().
From the source for version 7.0.11, in org.apache.catalina.connector.CoyoteAdapter.java, line 416:

            AsyncContextImpl asyncConImpl = (AsyncContextImpl)request.getAsyncContext();
            if (asyncConImpl != null) {
                async = true;
            } else if (!comet) {
                response.finishResponse();
                if (postParseSuccess) {
                    // Log only if processing was invoked.
                    // If postParseRequest() failed, it has already logged it.
                    ((Context) request.getMappingData().context).logAccess(
                            request, response,
                            System.currentTimeMillis() - req.getStartTime(),
                            false);
                }
                req.action(ActionCode.POST_REQUEST , null);
            }

In the async case logAccess() isn't called here. I've searched through the code and don't see logAccess() being called anywhere else, except in error cases. So, it looks like the async case is missing a call to logAccess() somewhere.","access log written apach catalina valv access log valv accesslogvalv written servlet async request reproduc handl request asynchron mark servlet web servlet webservlet async support asyncsupport true send traffic notic noth written access log access log valv accesslogvalv log call apach catalina context log access logaccess sourc version apach catalina connector coyot adapt coyoteadapt java line async context impl asynccontextimpl async con impl asyncconimpl async context impl asynccontextimpl request get async context getasynccontext async con impl asyncconimpl null async true els comet respons finish respons finishrespons post pars success postparsesuccess log process invok post pars request postparserequest fail alreadi log context request get map data getmappingdata context log access logaccess request respons system current time milli currenttimemilli req get start time getstarttim fals req action action code actioncod post request null async case log access logaccess isn call search code see log access logaccess call anywher els except error case look like async case miss call log access logaccess somewher","""java/org/apache/catalina/connector/CoyoteAdapter.java""","10","10","12","4","68","6","49","12","1","3","7","15","15","12","1","15","0","0","7","8","1192","166","792","157","585","234","413","568","140","428","33","33","34","17","6","0","156","156","188","60","normal"
"51038","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51038 Ensure async requests are included in access logs.","Bug 51038  No access logs for Servlet 3.0 async requests","access log servlet async request","Access logs written by org.apache.catalina.valves.AccessLogValve are not being written for servlet 3.0 async requests.

To reproduce:
- Handle a request asynchronously by marking the servlet with @WebServlet(asyncSupported=true)
- Send some traffic and notice that nothing is being written to the access logs.

AccessLogValve.log() is called by org.apache.catalina.Context.logAccess().
From the source for version 7.0.11, in org.apache.catalina.connector.CoyoteAdapter.java, line 416:

            AsyncContextImpl asyncConImpl = (AsyncContextImpl)request.getAsyncContext();
            if (asyncConImpl != null) {
                async = true;
            } else if (!comet) {
                response.finishResponse();
                if (postParseSuccess) {
                    // Log only if processing was invoked.
                    // If postParseRequest() failed, it has already logged it.
                    ((Context) request.getMappingData().context).logAccess(
                            request, response,
                            System.currentTimeMillis() - req.getStartTime(),
                            false);
                }
                req.action(ActionCode.POST_REQUEST , null);
            }

In the async case logAccess() isn't called here. I've searched through the code and don't see logAccess() being called anywhere else, except in error cases. So, it looks like the async case is missing a call to logAccess() somewhere.","access log written apach catalina valv access log valv accesslogvalv written servlet async request reproduc handl request asynchron mark servlet web servlet webservlet async support asyncsupport true send traffic notic noth written access log access log valv accesslogvalv log call apach catalina context log access logaccess sourc version apach catalina connector coyot adapt coyoteadapt java line async context impl asynccontextimpl async con impl asyncconimpl async context impl asynccontextimpl request get async context getasynccontext async con impl asyncconimpl null async true els comet respons finish respons finishrespons post pars success postparsesuccess log process invok post pars request postparserequest fail alreadi log context request get map data getmappingdata context log access logaccess request respons system current time milli currenttimemilli req get start time getstarttim fals req action action code actioncod post request null async case log access logaccess isn call search code see log access logaccess call anywher els except error case look like async case miss call log access logaccess somewher","""test/org/apache/catalina/core/TestAsyncContextImpl.java""","1","1","1","1","12","1","10","0","21","0","13","62","62","62","11","62","0","3","11","48","906","175","670","273","413","72","373","476","220","256","5","5","6","1","2","0","91","91","94","62","normal"
"51042","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51042 Don't trigger session creation listeners when changing the session ID during authentication.","Bug 51042  HttpSessionListener.sessionCreated() is called a second time when user is authenticated with no matching sessionDestroyed() call.","http session listen httpsessionlisten session creat sessioncr call second time user authent match session destroy sessiondestroy call","When my web application has a HttpSessionListener configured in its web.xml, then that classes sessionCreated() is called when a user is assigned a new session.

However, that method is *also* called when that user authenticates itself and the session is assigned a new ID (whether or not this is actually a ""new session"" can be disputed, but that's not the point of this bug).

When the session is removed (due to a timeout, for example), then a single sessionDestroyed() call is executed.

When the HttpSessionListener manages some kind of external resource, this behaviour leads to a resource leak, because sessionCreated() is called twice, while sessionRemoved() is only called once!

I'm aware of the reason for changing the session ID and (somehow) understand why sessionCreated() is called again (after all there's a new session ID), but there must be *some* way for the SessionListener to be notified that the ""old session"" no longer exists.

The same behaviour is seen in Tomcat 6.0 (and probably 5.5 as well, but I didn't test that).","web applic http session listen httpsessionlisten configur web xml class session creat sessioncr call user assign new session howev method call user authent session assign new id whether actual new session disput point session remov due timeout exampl singl session destroy sessiondestroy call execut http session listen httpsessionlisten manag kind extern resourc behaviour lead resourc leak session creat sessioncr call twice session remov sessionremov call awar reason chang session id somehow understand session creat sessioncr call new session id must way session listen sessionlisten notifi old session longer exist behaviour seen tomcat probabl well didn","""java/org/apache/catalina/ha/session/DeltaManager.java""","2","2","2","1","15","0","10","5","1","0","4","83","83","83","33","83","0","0","26","57","1516","132","918","238","603","483","469","675","226","449","14","14","18","4","7","1","215","203","236","94","normal"
"51042","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51042 Don't trigger session creation listeners when changing the session ID during authentication.","Bug 51042  HttpSessionListener.sessionCreated() is called a second time when user is authenticated with no matching sessionDestroyed() call.","http session listen httpsessionlisten session creat sessioncr call second time user authent match session destroy sessiondestroy call","When my web application has a HttpSessionListener configured in its web.xml, then that classes sessionCreated() is called when a user is assigned a new session.

However, that method is *also* called when that user authenticates itself and the session is assigned a new ID (whether or not this is actually a ""new session"" can be disputed, but that's not the point of this bug).

When the session is removed (due to a timeout, for example), then a single sessionDestroyed() call is executed.

When the HttpSessionListener manages some kind of external resource, this behaviour leads to a resource leak, because sessionCreated() is called twice, while sessionRemoved() is only called once!

I'm aware of the reason for changing the session ID and (somehow) understand why sessionCreated() is called again (after all there's a new session ID), but there must be *some* way for the SessionListener to be notified that the ""old session"" no longer exists.

The same behaviour is seen in Tomcat 6.0 (and probably 5.5 as well, but I didn't test that).","web applic http session listen httpsessionlisten configur web xml class session creat sessioncr call user assign new session howev method call user authent session assign new id whether actual new session disput point session remov due timeout exampl singl session destroy sessiondestroy call execut http session listen httpsessionlisten manag kind extern resourc behaviour lead resourc leak session creat sessioncr call twice session remov sessionremov call awar reason chang session id somehow understand session creat sessioncr call new session id must way session listen sessionlisten notifi old session longer exist behaviour seen tomcat probabl well didn","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","7","4","1","0","2","52","52","52","5","52","0","2","7","43","836","96","475","146","264","267","229","345","117","228","9","9","10","5","3","1","102","102","117","63","normal"
"51042","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51042 Don't trigger session creation listeners when changing the session ID during authentication.","Bug 51042  HttpSessionListener.sessionCreated() is called a second time when user is authenticated with no matching sessionDestroyed() call.","http session listen httpsessionlisten session creat sessioncr call second time user authent match session destroy sessiondestroy call","When my web application has a HttpSessionListener configured in its web.xml, then that classes sessionCreated() is called when a user is assigned a new session.

However, that method is *also* called when that user authenticates itself and the session is assigned a new ID (whether or not this is actually a ""new session"" can be disputed, but that's not the point of this bug).

When the session is removed (due to a timeout, for example), then a single sessionDestroyed() call is executed.

When the HttpSessionListener manages some kind of external resource, this behaviour leads to a resource leak, because sessionCreated() is called twice, while sessionRemoved() is only called once!

I'm aware of the reason for changing the session ID and (somehow) understand why sessionCreated() is called again (after all there's a new session ID), but there must be *some* way for the SessionListener to be notified that the ""old session"" no longer exists.

The same behaviour is seen in Tomcat 6.0 (and probably 5.5 as well, but I didn't test that).","web applic http session listen httpsessionlisten configur web xml class session creat sessioncr call user assign new session howev method call user authent session assign new id whether actual new session disput point session remov due timeout exampl singl session destroy sessiondestroy call execut http session listen httpsessionlisten manag kind extern resourc behaviour lead resourc leak session creat sessioncr call twice session remov sessionremov call awar reason chang session id somehow understand session creat sessioncr call new session id must way session listen sessionlisten notifi old session longer exist behaviour seen tomcat probabl well didn","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","7","4","1","0","2","52","52","52","5","52","0","2","7","43","836","96","475","146","264","267","229","345","117","228","9","9","10","5","3","1","102","102","117","63","normal"
"51042","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51042 Don't trigger session creation listeners when changing the session ID during authentication.","Bug 51042  HttpSessionListener.sessionCreated() is called a second time when user is authenticated with no matching sessionDestroyed() call.","http session listen httpsessionlisten session creat sessioncr call second time user authent match session destroy sessiondestroy call","When my web application has a HttpSessionListener configured in its web.xml, then that classes sessionCreated() is called when a user is assigned a new session.

However, that method is *also* called when that user authenticates itself and the session is assigned a new ID (whether or not this is actually a ""new session"" can be disputed, but that's not the point of this bug).

When the session is removed (due to a timeout, for example), then a single sessionDestroyed() call is executed.

When the HttpSessionListener manages some kind of external resource, this behaviour leads to a resource leak, because sessionCreated() is called twice, while sessionRemoved() is only called once!

I'm aware of the reason for changing the session ID and (somehow) understand why sessionCreated() is called again (after all there's a new session ID), but there must be *some* way for the SessionListener to be notified that the ""old session"" no longer exists.

The same behaviour is seen in Tomcat 6.0 (and probably 5.5 as well, but I didn't test that).","web applic http session listen httpsessionlisten configur web xml class session creat sessioncr call user assign new session howev method call user authent session assign new id whether actual new session disput point session remov due timeout exampl singl session destroy sessiondestroy call execut http session listen httpsessionlisten manag kind extern resourc behaviour lead resourc leak session creat sessioncr call twice session remov sessionremov call awar reason chang session id somehow understand session creat sessioncr call new session id must way session listen sessionlisten notifi old session longer exist behaviour seen tomcat probabl well didn","""java/org/apache/catalina/manager/DummyProxySession.java""","1","1","1","1","3","0","2","0","1","0","0","34","34","34","1","34","0","0","0","34","200","39","130","76","19","31","27","62","43","19","1","1","1","1","0","0","34","34","34","34","normal"
"51042","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51042 Don't trigger session creation listeners when changing the session ID during authentication.","Bug 51042  HttpSessionListener.sessionCreated() is called a second time when user is authenticated with no matching sessionDestroyed() call.","http session listen httpsessionlisten session creat sessioncr call second time user authent match session destroy sessiondestroy call","When my web application has a HttpSessionListener configured in its web.xml, then that classes sessionCreated() is called when a user is assigned a new session.

However, that method is *also* called when that user authenticates itself and the session is assigned a new ID (whether or not this is actually a ""new session"" can be disputed, but that's not the point of this bug).

When the session is removed (due to a timeout, for example), then a single sessionDestroyed() call is executed.

When the HttpSessionListener manages some kind of external resource, this behaviour leads to a resource leak, because sessionCreated() is called twice, while sessionRemoved() is only called once!

I'm aware of the reason for changing the session ID and (somehow) understand why sessionCreated() is called again (after all there's a new session ID), but there must be *some* way for the SessionListener to be notified that the ""old session"" no longer exists.

The same behaviour is seen in Tomcat 6.0 (and probably 5.5 as well, but I didn't test that).","web applic http session listen httpsessionlisten configur web xml class session creat sessioncr call user assign new session howev method call user authent session assign new id whether actual new session disput point session remov due timeout exampl singl session destroy sessiondestroy call execut http session listen httpsessionlisten manag kind extern resourc behaviour lead resourc leak session creat sessioncr call twice session remov sessionremov call awar reason chang session id somehow understand session creat sessioncr call new session id must way session listen sessionlisten notifi old session longer exist behaviour seen tomcat probabl well didn","""java/org/apache/catalina/manager/DummyProxySession.java""","1","1","1","1","3","0","2","0","1","0","0","34","34","34","1","34","0","0","0","34","200","39","130","76","19","31","27","62","43","19","1","1","1","1","0","0","34","34","34","34","normal"
"51042","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51042 Don't trigger session creation listeners when changing the session ID during authentication.","Bug 51042  HttpSessionListener.sessionCreated() is called a second time when user is authenticated with no matching sessionDestroyed() call.","http session listen httpsessionlisten session creat sessioncr call second time user authent match session destroy sessiondestroy call","When my web application has a HttpSessionListener configured in its web.xml, then that classes sessionCreated() is called when a user is assigned a new session.

However, that method is *also* called when that user authenticates itself and the session is assigned a new ID (whether or not this is actually a ""new session"" can be disputed, but that's not the point of this bug).

When the session is removed (due to a timeout, for example), then a single sessionDestroyed() call is executed.

When the HttpSessionListener manages some kind of external resource, this behaviour leads to a resource leak, because sessionCreated() is called twice, while sessionRemoved() is only called once!

I'm aware of the reason for changing the session ID and (somehow) understand why sessionCreated() is called again (after all there's a new session ID), but there must be *some* way for the SessionListener to be notified that the ""old session"" no longer exists.

The same behaviour is seen in Tomcat 6.0 (and probably 5.5 as well, but I didn't test that).","web applic http session listen httpsessionlisten configur web xml class session creat sessioncr call user assign new session howev method call user authent session assign new id whether actual new session disput point session remov due timeout exampl singl session destroy sessiondestroy call execut http session listen httpsessionlisten manag kind extern resourc behaviour lead resourc leak session creat sessioncr call twice session remov sessionremov call awar reason chang session id somehow understand session creat sessioncr call new session id must way session listen sessionlisten notifi old session longer exist behaviour seen tomcat probabl well didn","""java/org/apache/catalina/ha/session/JvmRouteBinderValve.java""","2","2","3","1","17","0","9","6","1","0","3","19","19","19","4","19","0","0","9","10","485","48","220","75","128","217","98","148","64","84","9","9","10","3","4","1","49","49","59","21","normal"
"51042","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51042 Don't trigger session creation listeners when changing the session ID during authentication.","Bug 51042  HttpSessionListener.sessionCreated() is called a second time when user is authenticated with no matching sessionDestroyed() call.","http session listen httpsessionlisten session creat sessioncr call second time user authent match session destroy sessiondestroy call","When my web application has a HttpSessionListener configured in its web.xml, then that classes sessionCreated() is called when a user is assigned a new session.

However, that method is *also* called when that user authenticates itself and the session is assigned a new ID (whether or not this is actually a ""new session"" can be disputed, but that's not the point of this bug).

When the session is removed (due to a timeout, for example), then a single sessionDestroyed() call is executed.

When the HttpSessionListener manages some kind of external resource, this behaviour leads to a resource leak, because sessionCreated() is called twice, while sessionRemoved() is only called once!

I'm aware of the reason for changing the session ID and (somehow) understand why sessionCreated() is called again (after all there's a new session ID), but there must be *some* way for the SessionListener to be notified that the ""old session"" no longer exists.

The same behaviour is seen in Tomcat 6.0 (and probably 5.5 as well, but I didn't test that).","web applic http session listen httpsessionlisten configur web xml class session creat sessioncr call user assign new session howev method call user authent session assign new id whether actual new session disput point session remov due timeout exampl singl session destroy sessiondestroy call execut http session listen httpsessionlisten manag kind extern resourc behaviour lead resourc leak session creat sessioncr call twice session remov sessionremov call awar reason chang session id somehow understand session creat sessioncr call new session id must way session listen sessionlisten notifi old session longer exist behaviour seen tomcat probabl well didn","""java/org/apache/catalina/session/ManagerBase.java""","1","1","1","1","12","1","6","4","2","0","4","75","75","75","27","75","0","0","5","70","1330","262","631","241","346","438","291","438","198","240","6","6","6","3","3","1","138","138","144","79","normal"
"51042","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51042 Don't trigger session creation listeners when changing the session ID during authentication.","Bug 51042  HttpSessionListener.sessionCreated() is called a second time when user is authenticated with no matching sessionDestroyed() call.","http session listen httpsessionlisten session creat sessioncr call second time user authent match session destroy sessiondestroy call","When my web application has a HttpSessionListener configured in its web.xml, then that classes sessionCreated() is called when a user is assigned a new session.

However, that method is *also* called when that user authenticates itself and the session is assigned a new ID (whether or not this is actually a ""new session"" can be disputed, but that's not the point of this bug).

When the session is removed (due to a timeout, for example), then a single sessionDestroyed() call is executed.

When the HttpSessionListener manages some kind of external resource, this behaviour leads to a resource leak, because sessionCreated() is called twice, while sessionRemoved() is only called once!

I'm aware of the reason for changing the session ID and (somehow) understand why sessionCreated() is called again (after all there's a new session ID), but there must be *some* way for the SessionListener to be notified that the ""old session"" no longer exists.

The same behaviour is seen in Tomcat 6.0 (and probably 5.5 as well, but I didn't test that).","web applic http session listen httpsessionlisten configur web xml class session creat sessioncr call user assign new session howev method call user authent session assign new id whether actual new session disput point session remov due timeout exampl singl session destroy sessiondestroy call execut http session listen httpsessionlisten manag kind extern resourc behaviour lead resourc leak session creat sessioncr call twice session remov sessionremov call awar reason chang session id somehow understand session creat sessioncr call new session id must way session listen sessionlisten notifi old session longer exist behaviour seen tomcat probabl well didn","""java/org/apache/catalina/Session.java""","0","0","0","0","0","0","0","0","1","0","4","0","33","33","0","33","0","0","0","33","326","86","43","42","4","197","41","42","42","0","0","0","0","0","0","5","0","0","0","0","normal"
"51042","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51042 Don't trigger session creation listeners when changing the session ID during authentication.","Bug 51042  HttpSessionListener.sessionCreated() is called a second time when user is authenticated with no matching sessionDestroyed() call.","http session listen httpsessionlisten session creat sessioncr call second time user authent match session destroy sessiondestroy call","When my web application has a HttpSessionListener configured in its web.xml, then that classes sessionCreated() is called when a user is assigned a new session.

However, that method is *also* called when that user authenticates itself and the session is assigned a new ID (whether or not this is actually a ""new session"" can be disputed, but that's not the point of this bug).

When the session is removed (due to a timeout, for example), then a single sessionDestroyed() call is executed.

When the HttpSessionListener manages some kind of external resource, this behaviour leads to a resource leak, because sessionCreated() is called twice, while sessionRemoved() is only called once!

I'm aware of the reason for changing the session ID and (somehow) understand why sessionCreated() is called again (after all there's a new session ID), but there must be *some* way for the SessionListener to be notified that the ""old session"" no longer exists.

The same behaviour is seen in Tomcat 6.0 (and probably 5.5 as well, but I didn't test that).","web applic http session listen httpsessionlisten configur web xml class session creat sessioncr call user assign new session howev method call user authent session assign new id whether actual new session disput point session remov due timeout exampl singl session destroy sessiondestroy call execut http session listen httpsessionlisten manag kind extern resourc behaviour lead resourc leak session creat sessioncr call twice session remov sessionremov call awar reason chang session id somehow understand session creat sessioncr call new session id must way session listen sessionlisten notifi old session longer exist behaviour seen tomcat probabl well didn","""java/org/apache/catalina/session/StandardSession.java""","2","2","2","1","20","2","10","7","4","0","10","68","68","68","21","68","1","0","7","60","1906","382","868","271","531","658","381","564","201","363","20","20","26","7","5","1","175","175","192","98","normal"
"51042","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51042 Don't trigger session creation listeners when changing the session ID during authentication.","Bug 51042  HttpSessionListener.sessionCreated() is called a second time when user is authenticated with no matching sessionDestroyed() call.","http session listen httpsessionlisten session creat sessioncr call second time user authent match session destroy sessiondestroy call","When my web application has a HttpSessionListener configured in its web.xml, then that classes sessionCreated() is called when a user is assigned a new session.

However, that method is *also* called when that user authenticates itself and the session is assigned a new ID (whether or not this is actually a ""new session"" can be disputed, but that's not the point of this bug).

When the session is removed (due to a timeout, for example), then a single sessionDestroyed() call is executed.

When the HttpSessionListener manages some kind of external resource, this behaviour leads to a resource leak, because sessionCreated() is called twice, while sessionRemoved() is only called once!

I'm aware of the reason for changing the session ID and (somehow) understand why sessionCreated() is called again (after all there's a new session ID), but there must be *some* way for the SessionListener to be notified that the ""old session"" no longer exists.

The same behaviour is seen in Tomcat 6.0 (and probably 5.5 as well, but I didn't test that).","web applic http session listen httpsessionlisten configur web xml class session creat sessioncr call user assign new session howev method call user authent session assign new id whether actual new session disput point session remov due timeout exampl singl session destroy sessiondestroy call execut http session listen httpsessionlisten manag kind extern resourc behaviour lead resourc leak session creat sessioncr call twice session remov sessionremov call awar reason chang session id somehow understand session creat sessioncr call new session id must way session listen sessionlisten notifi old session longer exist behaviour seen tomcat probabl well didn","""java/org/apache/catalina/session/StandardSession.java""","2","2","2","1","20","2","10","7","4","0","10","68","68","68","21","68","1","0","7","60","1906","382","868","271","531","658","381","564","201","363","20","20","26","7","5","1","175","175","192","98","normal"
"51056","98","Jean-Frederic Clere","Fix for 51056. remove SSLv2 from all. Needs native 1.1.21. Now to allow SSLv2 you have to use: SSLProtocol=""SSLv2+SSLv3"" for example.","Bug 51056  Disable / drop support for SSLv2","disabl drop support lv2 sslv2","","","""java/org/apache/tomcat/jni/SSL.java""","0","0","0","0","0","0","0","0","1","15","120","0","15","0","0","15","0","0","0","15","344","39","140","139","120","165","136","137","137","0","0","0","0","0","0","1","0","0","0","0","normal"
"51088","70","Mark Emlyn David Thomas","Better error handling that may help track down the cause of https://issues.apache.org/bugzilla/show_bug.cgi?id=51088","Bug 51088  ArrayIndexOutOfBoundsException from org.apache.el.parser.JJTELParserState","array index out of bound except arrayindexoutofboundsexcept apach parser parser state jjtelparserst","I found the following ArrayIndexOutOfBoundsException in my logfile.
It occurred directly after login into my webApp without any further user interaction. Unfortunately it is not reproducible at all.

I am not sure whether Jasper is the right component. However the class  JJTELParserState is in the jasper-el.jar.

Environment:
Tomcat 6.0.32 
Facelets 1.1.14
Myfaces 1.2.9

SCHWERWIEGEND: Error Rendering View[/facelets/myview.xhtml]
java.lang.ArrayIndexOutOfBoundsException: -1
	at java.util.ArrayList.remove(ArrayList.java:390)
	at org.apache.el.parser.JJTELParserState.closeNodeScope(JJTELParserState.java:108)
	at org.apache.el.parser.ELParser.CompositeExpression(ELParser.java:74)
	at org.apache.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:115)
	at org.apache.el.lang.ExpressionBuilder.build(ExpressionBuilder.java:172)
	at org.apache.el.lang.ExpressionBuilder.createValueExpression(ExpressionBuilder.java:216)
	at org.apache.el.ExpressionFactoryImpl.createValueExpression(ExpressionFactoryImpl.java:68)
	at com.sun.facelets.el.ELText$ELTextVariable.apply(ELText.java:161)
	at com.sun.facelets.compiler.AttributeInstruction.apply(AttributeInstruction.java:60)
	at com.sun.facelets.compiler.UIInstructionHandler.apply(UIInstructionHandler.java:95)
	at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
	at com.sun.facelets.tag.jstl.core.IfHandler.apply(IfHandler.java:54)
	at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
	at com.sun.facelets.tag.jsf.ComponentHandler.applyNextHandler(ComponentHandler.java:360)
	at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:190)
	at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
	at com.sun.facelets.tag.jsf.ComponentHandler.applyNextHandler(ComponentHandler.java:360)
	at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:190)
	at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
	at com.sun.facelets.tag.jsf.ComponentHandler.applyNextHandler(ComponentHandler.java:360)
	at org.apache.myfaces.custom.aliasbean.AliasBeansScopeTagHandler.applyNextHandler(AliasBeansScopeTagHandler.java:52)
	at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:190)
	at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
	at com.sun.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:124)
	at com.sun.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:49)
	at com.sun.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:39)
	at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:248)
	at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:294)
	at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:273)
	at com.sun.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:140)
	at com.sun.facelets.tag.ui.IncludeHandler.apply(IncludeHandler.java:66)
	at com.sun.facelets.tag.ui.DefineHandler.applyDefinition(DefineHandler.java:64)
	at com.sun.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:136)
	at com.sun.facelets.impl.DefaultFaceletContext$TemplateManager.apply(DefaultFaceletContext.java:337)
	at com.sun.facelets.impl.DefaultFaceletContext.includeDefinition(DefaultFaceletContext.java:307)
	at com.sun.facelets.tag.ui.InsertHandler.apply(InsertHandler.java:68)
	at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
	at com.sun.facelets.tag.jsf.ComponentHandler.applyNextHandler(ComponentHandler.java:360)
	at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:190)
	at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
	at com.sun.facelets.tag.jsf.ComponentHandler.applyNextHandler(ComponentHandler.java:360)
	at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:190)
	at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
	at com.sun.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:124)
	at com.sun.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:49)
	at com.sun.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:39)
	at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:248)
	at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:294)
	at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:273)
	at com.sun.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:140)
	at com.sun.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:116)
	at com.sun.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:49)
	at com.sun.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:39)
	at com.sun.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:95)
	at com.sun.facelets.FaceletViewHandler.buildView(FaceletViewHandler.java:596)
	at com.sun.facelets.FaceletViewHandler.renderView(FaceletViewHandler.java:651)
	at org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100)
	at org.ajax4jsf.application.AjaxViewHandler.renderView(AjaxViewHandler.java:176)
	at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:41)
	at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:140)
	at org.apache.myfaces.custom.ppr.PPRLifecycleWrapper.render(PPRLifecycleWrapper.java:84)
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:187)
	at com.foo..client.web.servlets.FacesServletWrapper.service(FacesServletWrapper.java:125)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)
	at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
	at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)
	at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:392)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at com.foo..client.web.filters.LoginFilter.doFilter(LoginFilter.java:219)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at com.foo..client.web.filters.CacheFilter.doFilter(CacheFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at com.foo..client.web.filters.EncodingFilter.doFilter(EncodingFilter.java:54)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at com.foo..client.web.filters.TimerFilter.doFilter(TimerFilter.java:80)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:470)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
	at java.lang.Thread.run(Thread.java:662)","found follow array index out of bound except arrayindexoutofboundsexcept logfil occur directli login web app webapp without user interact unfortun reproduc sure whether jasper right compon howev class parser state jjtelparserst jasper el jasperel jar environ tomcat facelet myfac schwerwiegend error render view facelet myview xhtml java lang array index out of bound except arrayindexoutofboundsexcept java util array list arraylist remov array list arraylist java apach parser parser state jjtelparserst close node scope closenodescop parser state jjtelparserst java apach parser parser elpars composit express compositeexpress parser elpars java apach lang express builder expressionbuild creat node intern createnodeintern express builder expressionbuild java apach lang express builder expressionbuild build express builder expressionbuild java apach lang express builder expressionbuild creat valu express createvalueexpress express builder expressionbuild java apach express factori impl expressionfactoryimpl creat valu express createvalueexpress express factori impl expressionfactoryimpl java sun facelet text eltext text variabl eltextvari appli text eltext java sun facelet compil attribut instruct attributeinstruct appli attribut instruct attributeinstruct java sun facelet compil ui instruct handler uiinstructionhandl appli ui instruct handler uiinstructionhandl java sun facelet tag composit facelet handler compositefacelethandl appli composit facelet handler compositefacelethandl java sun facelet tag jstl core if handler ifhandl appli if handler ifhandl java sun facelet tag composit facelet handler compositefacelethandl appli composit facelet handler compositefacelethandl java sun facelet tag jsf compon handler componenthandl appli next handler applynexthandl compon handler componenthandl java sun facelet tag jsf compon handler componenthandl appli compon handler componenthandl java sun facelet tag composit facelet handler compositefacelethandl appli composit facelet handler compositefacelethandl java sun facelet tag jsf compon handler componenthandl appli next handler applynexthandl compon handler componenthandl java sun facelet tag jsf compon handler componenthandl appli compon handler componenthandl java sun facelet tag composit facelet handler compositefacelethandl appli composit facelet handler compositefacelethandl java sun facelet tag jsf compon handler componenthandl appli next handler applynexthandl compon handler componenthandl java apach myfac custom aliasbean alia bean scope tag handler aliasbeansscopetaghandl appli next handler applynexthandl alia bean scope tag handler aliasbeansscopetaghandl java sun facelet tag jsf compon handler componenthandl appli compon handler componenthandl java sun facelet tag composit facelet handler compositefacelethandl appli composit facelet handler compositefacelethandl java sun facelet tag ui composit handler compositionhandl appli composit handler compositionhandl java sun facelet compil namespac handler namespacehandl appli namespac handler namespacehandl java sun facelet compil encod handler encodinghandl appli encod handler encodinghandl java sun facelet impl default facelet defaultfacelet includ default facelet defaultfacelet java sun facelet impl default facelet defaultfacelet includ default facelet defaultfacelet java sun facelet impl default facelet defaultfacelet includ default facelet defaultfacelet java sun facelet impl default facelet context defaultfaceletcontext includ facelet includefacelet default facelet context defaultfaceletcontext java sun facelet tag ui includ handler includehandl appli includ handler includehandl java sun facelet tag ui defin handler definehandl appli definit applydefinit defin handler definehandl java sun facelet tag ui composit handler compositionhandl appli composit handler compositionhandl java sun facelet impl default facelet context defaultfaceletcontext templat manag templatemanag appli default facelet context defaultfaceletcontext java sun facelet impl default facelet context defaultfaceletcontext includ definit includedefinit default facelet context defaultfaceletcontext java sun facelet tag ui insert handler inserthandl appli insert handler inserthandl java sun facelet tag composit facelet handler compositefacelethandl appli composit facelet handler compositefacelethandl java sun facelet tag jsf compon handler componenthandl appli next handler applynexthandl compon handler componenthandl java sun facelet tag jsf compon handler componenthandl appli compon handler componenthandl java sun facelet tag composit facelet handler compositefacelethandl appli composit facelet handler compositefacelethandl java sun facelet tag jsf compon handler componenthandl appli next handler applynexthandl compon handler componenthandl java sun facelet tag jsf compon handler componenthandl appli compon handler componenthandl java sun facelet tag composit facelet handler compositefacelethandl appli composit facelet handler compositefacelethandl java sun facelet tag ui composit handler compositionhandl appli composit handler compositionhandl java sun facelet compil namespac handler namespacehandl appli namespac handler namespacehandl java sun facelet compil encod handler encodinghandl appli encod handler encodinghandl java sun facelet impl default facelet defaultfacelet includ default facelet defaultfacelet java sun facelet impl default facelet defaultfacelet includ default facelet defaultfacelet java sun facelet impl default facelet defaultfacelet includ default facelet defaultfacelet java sun facelet impl default facelet context defaultfaceletcontext includ facelet includefacelet default facelet context defaultfaceletcontext java sun facelet tag ui composit handler compositionhandl appli composit handler compositionhandl java sun facelet compil namespac handler namespacehandl appli namespac handler namespacehandl java sun facelet compil encod handler encodinghandl appli encod handler encodinghandl java sun facelet impl default facelet defaultfacelet appli default facelet defaultfacelet java sun facelet facelet view handler faceletviewhandl build view buildview facelet view handler faceletviewhandl java sun facelet facelet view handler faceletviewhandl render view renderview facelet view handler faceletviewhandl java ajax4jsf applic view handler wrapper viewhandlerwrapp render view renderview view handler wrapper viewhandlerwrapp java ajax4jsf applic ajax view handler ajaxviewhandl render view renderview ajax view handler ajaxviewhandl java apach myfac lifecycl render respons executor renderresponseexecutor execut render respons executor renderresponseexecutor java apach myfac lifecycl lifecycl impl lifecycleimpl render lifecycl impl lifecycleimpl java apach myfac custom ppr lifecycl wrapper pprlifecyclewrapp render lifecycl wrapper pprlifecyclewrapp java javax face webapp face servlet facesservlet servic face servlet facesservlet java foo client web servlet face servlet wrapper facesservletwrapp servic face servlet wrapper facesservletwrapp java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java ajax4jsf webapp base filter basexmlfilt do xml filter doxmlfilt base filter basexmlfilt java ajax4jsf webapp base filter basefilt handl request handlerequest base filter basefilt java ajax4jsf webapp base filter basefilt process upload and handl request processuploadsandhandlerequest base filter basefilt java ajax4jsf webapp base filter basefilt do filter dofilt base filter basefilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach myfac webapp filter extens filter extensionsfilt do filter dofilt extens filter extensionsfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java foo client web filter login filter loginfilt do filter dofilt login filter loginfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java foo client web filter cach filter cachefilt do filter dofilt cach filter cachefilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java foo client web filter encod filter encodingfilt do filter dofilt encod filter encodingfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java foo client web filter timer filter timerfilt do filter dofilt timer filter timerfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 http11 processor http11processor process http11 processor http11processor java apach coyot http11 http11 protocol http11protocol http11 connect handler http11connectionhandl process http11 protocol http11protocol java apach tomcat util net io endpoint jioendpoint worker run io endpoint jioendpoint java java lang thread run thread java","""java/org/apache/el/lang/ExpressionBuilder.java""","3","3","4","1","16","0","14","0","2","2","3","9","9","7","3","9","0","3","0","6","240","28","182","64","102","30","83","118","57","61","10","10","11","6","6","0","33","33","38","16","normal"
"51095","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51095 Don't trigger a NullPointerException when the SSL handshake fails with the HTTP-APR connector. Patch provided by Mike Glazer.","Bug 51095  NPE in AprEndpoint.java","npe apr endpoint aprendpoint java","","","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","15","0","11","2","11","0","2","85","88","88","64","88","1","1","9","77","1796","229","1143","283","787","424","582","884","265","619","33","33","43","11","7","0","279","279","320","118","normal"
"51099","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51099 Get loginConfigName working with non-default values Patch by fhanik (plus some minor code clean-up)","Bug 51099  SPNEGO loginConfigName does not work","spnego login config name loginconfignam work","As reported by fhanik on the dev list:

2. com.sun.security.jgss.krb5.accept is not configurable
While the authenticator has the attribute loginConfigName, there seems to be a place in the code where it omits this entry.
renaming this entry in jaas.conf and setting the loginConfigName will fail to validate a ticket

The problem code is here:

            gssContext = manager.createContext(manager.createCredential(null,
                    GSSCredential.DEFAULT_LIFETIME,
                    new Oid(""1.3.6.1.5.5.2""),
                    GSSCredential.ACCEPT_ONLY));

should look like
            final GSSManager manager = GSSManager.getInstance();
            final PrivilegedExceptionAction<GSSCredential> action =
                new PrivilegedExceptionAction<GSSCredential>() {
                    public GSSCredential run() throws GSSException {
                        return manager.createCredential(null,
                                GSSCredential.DEFAULT_LIFETIME,
                                new Oid(""1.3.6.1.5.5.2""),
                                GSSCredential.ACCEPT_ONLY);
                    }
                };
            gssContext = manager.createContext(Subject.doAs(lc.getSubject(), action));||


best
Filip","report fhanik dev list sun secur jgss krb5 accept configur authent attribut login config name loginconfignam seem place code omit entri renam entri jaa conf set login config name loginconfignam fail valid ticket problem code context gsscontext manag creat context createcontext manag creat credenti createcredenti null credenti gsscredenti default lifetim new oid credenti gsscredenti accept look like final manag gssmanag manag manag gssmanag get instanc getinst final privileg except action privilegedexceptionact credenti gsscredenti action new privileg except action privilegedexceptionact credenti gsscredenti public credenti gsscredenti run throw except gssexcept return manag creat credenti createcredenti null credenti gsscredenti default lifetim new oid credenti gsscredenti accept context gsscontext manag creat context createcontext subject do doa lc get subject getsubject action best filip","""java/org/apache/catalina/authenticator/SpnegoAuthenticator.java""","4","4","4","2","24","2","19","2","1","0","1","8","8","8","2","8","0","0","2","6","263","35","183","55","117","45","90","123","46","77","23","23","23","11","3","0","32","32","32","18","normal"
"51119","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51119 Add JAAS authentication support to the JmxRemoteLifecycleListener Patch provided by Neil Laurance","Bug 51119  extras - JmxRemoteLifecycleListener does not support JAAS based authentication and authorisation","extra jmx remot lifecycl listen jmxremotelifecyclelisten support jaa base authent authoris","(Also true in Tomcat 7)

The JmxRemoteLifecycleListener does not support JAAS based authentication.

That is, when authentication is required, it only supports file based authentication.","true tomcat jmx remot lifecycl listen jmxremotelifecyclelisten support jaa base authent authent requir support file base authent","""java/org/apache/catalina/mbeans/JmxRemoteLifecycleListener.java""","2","2","2","1","17","1","11","4","2","0","4","12","12","12","12","12","0","3","0","9","309","46","191","78","116","74","96","125","65","60","8","8","8","3","2","0","27","27","27","14","enhancement"
"51124","7","Mark Emlyn David Thomas","Re-factor to try and determine if the root cause of https://issues.apache.org/bugzilla/show_bug.cgi?id=51124 is an OOME or something else.","Bug 51124  ArrayIndexOutOfBoundsException after setting org.apache.jasper.runtime.BodyContentImpl.LIMIT_BUFFER=true","array index out of bound except arrayindexoutofboundsexcept set apach jasper runtim bodi content impl bodycontentimpl limit buffer true","First of all, I know that there has been a bug regarding a similar problem before and that it was fixed. But currently this bugs occurs even with tomcat version 6.0.32.

We have a problem with the tomcat runnign with the parameter org.apache.jasper.runtime.BodyContentImpl.LIMIT_BUFFER=true.

After the tomcat has just started, everything is fine but after one or two days a lot of ArrayIndexOutOfBoundsException occur on random pages of the application.

Tomcats started without this parameter don't seem to have that problem.

Unfortunately we weren't able reproduce the bug locally, It appears only on our production system.

Could there be a concurrency problem, that only shows if a lot it going on on the platform?

I can provide two small stackstraces that can show the classes where the problem occurs:

1.

Caused by: java.lang.ArrayIndexOutOfBoundsException
        at org.apache.jasper.runtime.BodyContentImpl.write(Unknown Source)
        at java.io.PrintWriter.write(PrintWriter.java:382)
        at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(Unknown Source)
        at org.apache.jasper.runtime.PageContextImpl.release(Unknown Source)
        at org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(Unknown Source)
        at org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(Unknown Source)
        at org.apache.jsp.members.lists.short_.incomingShortList_jsp._jspService(incomingShortList_jsp.java:796)
        at org.apache.jasper.runtime.HttpJspBase.service(Unknown Source)
        at javax.servlet.http.HttpServlet.service(Unknown Source)

2.

Caused by: java.lang.ArrayIndexOutOfBoundsException
        at java.lang.String.getChars(String.java:854)
        at org.apache.jasper.runtime.BodyContentImpl.write(Unknown Source)
        at org.apache.jasper.runtime.BodyContentImpl.write(Unknown Source)
        at org.apache.jasper.runtime.BodyContentImpl.print(Unknown Source)
        at org.apache.taglibs.standard.tag.common.fmt.MessageSupport.doEndTag(MessageSupport.java:203)
        at org.apache.jsp.members.profiles.profile_jsp._jspx_meth_fmt_005fmessage_005f2(profile_jsp.java:4897)
        at org.apache.jsp.members.profiles.profile_jsp._jspService(profile_jsp.java:481)
        at org.apache.jasper.runtime.HttpJspBase.service(Unknown Source)
        at javax.servlet.http.HttpServlet.service(Unknown Source)","first know regard similar problem fix current bug occur even tomcat version problem tomcat runnign paramet apach jasper runtim bodi content impl bodycontentimpl limit buffer true tomcat start everyth fine one two day lot array index out of bound except arrayindexoutofboundsexcept occur random page applic tomcat start without paramet seem problem unfortun weren abl reproduc local appear product system could concurr problem show lot go platform provid two small stackstrac show class problem occur caus java lang array index out of bound except arrayindexoutofboundsexcept apach jasper runtim bodi content impl bodycontentimpl write unknown sourc java print writer printwrit write print writer printwrit java apach jasper runtim jsp writer impl jspwriterimpl flush buffer flushbuff unknown sourc apach jasper runtim page context impl pagecontextimpl releas unknown sourc apach jasper runtim jsp factori impl jspfactoryimpl intern releas page context internalreleasepagecontext unknown sourc apach jasper runtim jsp factori impl jspfactoryimpl releas page context releasepagecontext unknown sourc apach jsp member list short incom short list incomingshortlist jsp jsp servic jspservic incom short list incomingshortlist jsp java apach jasper runtim http jsp base httpjspbase servic unknown sourc javax servlet http http servlet httpservlet servic unknown sourc caus java lang array index out of bound except arrayindexoutofboundsexcept java lang string get char getchar string java apach jasper runtim bodi content impl bodycontentimpl write unknown sourc apach jasper runtim bodi content impl bodycontentimpl write unknown sourc apach jasper runtim bodi content impl bodycontentimpl print unknown sourc apach taglib standard tag common fmt messag support messagesupport do end tag doendtag messag support messagesupport java apach jsp member profil profil jsp jspx meth fmt 005fmessag 005f2 profil jsp java apach jsp member profil profil jsp jsp servic jspservic profil jsp java apach jasper runtim http jsp base httpjspbase servic unknown sourc javax servlet http http servlet httpservlet servic unknown sourc","""java/org/apache/jasper/runtime/BodyContentImpl.java""","1","1","2","1","13","0","6","7","1","0","2","38","38","38","4","38","1","2","1","34","657","57","292","89","141","308","105","175","54","121","5","5","9","4","2","1","75","75","80","41","normal"
"51136","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51136 Provide methods that enable the name of a Context on Context creation when using Tomcat in an embedded scenario. Based on a patch provided by David Calavera.","Bug 51136  Allow to set the context name through Tomcat's embeded class before adding it to the host","allow set context name tomcat embed class ad host","org.apache.catalina.startup.Tomcat creates contexts and add them to the host directly. It would be nice if we could set the name of the context before adding it to the host.

I'm including a patch that overloads the methods ""addWebapp"" and ""addContext"" to take that name as a parameter.","apach catalina startup tomcat creat context add host directli would nice could set name context ad host includ patch overload method add webapp addwebapp add context addcontext take name paramet","""java/org/apache/catalina/startup/Tomcat.java""","1","1","1","1","13","0","7","4","5","3","2","44","44","41","14","44","0","1","5","38","953","92","569","310","382","293","205","279","121","158","6","6","6","1","3","1","70","70","70","44","enhancement"
"51154","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51154 Remove duplicate @deprecated tags Patch provided by sebb","Bug 51154  Spurious @deprecated tags in ServletContext","spuriou deprec tag servlet context servletcontext","","","""java/javax/servlet/ServletContext.java""","0","0","0","0","0","0","0","0","1","0","2","0","51","51","0","51","0","0","0","51","718","57","78","77","2","583","62","63","63","0","0","0","0","0","0","7","0","0","0","0","normal"
"51155","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51155 Add missing comments to @deprecated code Patch provided by sebb","Bug 51155  Missing @deprecated comments","miss deprec comment","","","""java/javax/servlet/jsp/el/ELException.java""","1","1","1","1","8","0","3","5","1","0","1","5","5","5","0","5","0","0","0","5","81","8","20","9","6","54","7","13","8","5","1","1","1","1","0","3","5","5","5","5","normal"
"51155","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51155 Add missing comments to @deprecated code Patch provided by sebb","Bug 51155  Missing @deprecated comments","miss deprec comment","","","""java/javax/servlet/jsp/el/ELParseException.java""","1","1","1","1","8","0","4","4","1","0","1","2","2","2","0","2","0","0","0","2","53","7","13","6","3","34","4","7","5","2","1","1","1","1","0","3","2","2","2","2","normal"
"51155","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51155 Add missing comments to @deprecated code Patch provided by sebb","Bug 51155  Missing @deprecated comments","miss deprec comment","","","""java/javax/servlet/jsp/el/Expression.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","0","0","0","1","54","6","6","5","0","43","2","3","3","0","0","0","0","0","0","7","0","0","0","0","normal"
"51155","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51155 Add missing comments to @deprecated code Patch provided by sebb","Bug 51155  Missing @deprecated comments","miss deprec comment","","","""java/javax/servlet/jsp/el/ExpressionEvaluator.java""","0","0","0","0","0","0","0","0","1","0","0","0","2","2","0","2","0","0","0","2","115","4","12","11","0","101","3","4","4","0","0","0","0","0","0","8","0","0","0","0","normal"
"51155","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51155 Add missing comments to @deprecated code Patch provided by sebb","Bug 51155  Missing @deprecated comments","miss deprec comment","","","""java/javax/servlet/jsp/el/FunctionMapper.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","0","0","0","1","41","2","6","5","0","34","2","3","3","0","0","0","0","0","0","6","0","0","0","0","normal"
"51155","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51155 Add missing comments to @deprecated code Patch provided by sebb","Bug 51155  Missing @deprecated comments","miss deprec comment","","","""java/javax/servlet/jsp/el/VariableResolver.java""","0","0","0","0","0","0","0","0","1","0","0","0","1","1","0","1","0","0","0","1","51","2","5","4","0","44","2","3","3","0","0","0","0","0","0","9","0","0","0","0","normal"
"51156","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51156 Expose session expiration option for apps defined in server.xml","Bug 51156  ""Expire sessions"" button not visible for context configured in server.xml","expir session button visibl context configur server xml","If app is configured in server.xml like this:

{code}
  <Host name=""www.myapp.pl"" appBase=""/usr/lib/tomcat/webapps""
                unpackWARs=""false"" autoDeploy=""false""
              xmlValidation=""false"" xmlNamespaceAware=""false""  >
     <Context docBase=""/var/www/myapp"" path="""" cacheMaxSize=""5120""
cacheTTL=""60000"" cachingAllowed=""true"" >
     </Context>
     <Context path=""/manager""  privileged=""true""
docBase=""/usr/lib/tomcat/webapps/manager"">
     </Context>
</Host>
{code}

In Tomcat Manager, on the application list, there is a button ""Expire
sessions""  available only for ""/manager"" application.
There is no button ""Expire sessions"" for ""/"" path.

I think bug is in HTMLManagerServlet.java in this part:

{code}

                if (context.getPath().equals(this.context.getPath())) {
                    writer.print(MessageFormat.format(
                        MANAGER_APP_ROW_BUTTON_SECTION, args));
                } else if (context.getAvailable() && isDeployed) {
                    writer.print(MessageFormat.format(
                        STARTED_DEPLOYED_APPS_ROW_BUTTON_SECTION, args));
                } else if (context.getAvailable() && !isDeployed) {
                    writer.print(MessageFormat.format(
                        STARTED_NONDEPLOYED_APPS_ROW_BUTTON_SECTION, args));
                } else if (!context.getAvailable() && isDeployed) {
                    writer.print(MessageFormat.format(
                        STOPPED_DEPLOYED_APPS_ROW_BUTTON_SECTION, args));
                } else {
                    writer.print(MessageFormat.format(
                        STOPPED_NONDEPLOYED_APPS_ROW_BUTTON_SECTION, args));
                }
{code}","app configur server xml like code host name www myapp pl app base appbas usr lib tomcat webapp unpack unpackwar fals auto deploy autodeploy fals xml valid xmlvalid fals xml namespac awar xmlnamespaceawar fals context doc base docbas www myapp path cach max size cachemaxs cach cachettl cach allow cachingallow true context context path manag privileg true doc base docbas usr lib tomcat webapp manag context host code tomcat manag applic list button expir session avail manag applic button expir session path think manag servlet htmlmanagerservlet java part code context get path getpath equal context get path getpath writer print messag format messageformat format manag app row button section arg els context get avail getavail is deploy isdeploy writer print messag format messageformat format start deploy app row button section arg els context get avail getavail is deploy isdeploy writer print messag format messageformat format start nondeploy app row button section arg els context get avail getavail is deploy isdeploy writer print messag format messageformat format stop deploy app row button section arg els writer print messag format messageformat format stop nondeploy app row button section arg code","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","30","2","22","6","11","0","16","34","34","34","2","34","0","1","19","14","1369","131","982","218","775","263","431","565","191","374","19","19","24","10","4","0","130","130","152","59","normal"
"51185","9","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=51185","Bug 51185  Performance : DataSourceProxy#createPool should use more fine grained synchronisation","perform data sourc proxi datasourceproxi creat pool createpool use fine grain synchronis","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/DataSourceProxy.java""","1","1","1","1","6","0","3","2","1","0","1","123","123","123","2","123","0","0","0","123","1092","231","475","148","197","386","171","320","146","174","4","4","4","3","3","1","148","148","148","125","major"
"51208","0","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=51208","Bug 51208  SVN TRUNK : JDBC interceptor options are not taken into account","svn trunk jdbc interceptor option taken account","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PoolProperties.java""","1","1","1","1","6","0","4","2","3","2","3","114","114","112","49","114","0","0","0","114","1073","215","562","202","280","296","263","420","204","216","6","6","10","5","5","1","157","157","168","137","major"
"51212","0","Filip Hanik","make fields volatile https://issues.apache.org/bugzilla/show_bug.cgi?id=51212","Bug 51212  QueryStats has synchornisation issues","queri stat querystat synchornis issu","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/interceptor/SlowQueryReport.java""","1","1","1","1","7","0","6","0","3","4","5","33","33","29","13","33","0","0","4","29","405","51","289","103","167","66","129","180","86","94","5","5","5","1","3","0","49","49","50","33","major"
"51220","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51220 Add a system property to enable tag pooling with JSPs that use a custom base class. Based on a patch by Dan Mikusa.","Bug 51220  Add system property that makes it possible for jsp pages with the extends page directive to take advantage of tag pooling","add system properti make possibl jsp page extend page direct take advantag tag pool","","","""java/org/apache/jasper/compiler/Generator.java""","4","4","5","1","36","3","27","5","12","6","5","111","111","105","47","111","11","50","0","50","4241","509","3021","531","2334","738","1846","2345","491","1854","22","22","30","20","5","0","501","495","556","209","enhancement"
"51226","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51226 Add a findleaks Ant task for the Manager app. Based on a patch by Eiji Takahashi","Bug 51226  [Patch] to add FindLeaks ant task","patch add find leak findleak ant task","There is no ant task for FindLeaks.","ant task find leak findleak","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","30","2","22","6","11","0","16","34","34","34","2","34","0","1","19","14","1377","131","990","218","783","263","431","565","191","374","19","19","24","10","4","0","130","130","152","59","enhancement"
"51226","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51226 Add a findleaks Ant task for the Manager app. Based on a patch by Eiji Takahashi","Bug 51226  [Patch] to add FindLeaks ant task","patch add find leak findleak ant task","There is no ant task for FindLeaks.","ant task find leak findleak","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","30","2","22","6","11","0","16","34","34","34","2","34","0","1","19","14","1377","131","990","218","783","263","431","565","191","374","19","19","24","10","4","0","130","130","152","59","enhancement"
"51226","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51226 Add a findleaks Ant task for the Manager app. Based on a patch by Eiji Takahashi","Bug 51226  [Patch] to add FindLeaks ant task","patch add find leak findleak ant task","There is no ant task for FindLeaks.","ant task find leak findleak","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","6","6","7","2","39","3","29","6","1","3","2","34","34","31","12","34","0","0","26","8","1673","219","1069","239","781","386","499","718","204","514","21","21","30","9","5","0","213","213","242","95","enhancement"
"51229","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51229 Fix bugs in the Servlet 3.0 asynchronous examples. Patch provided by Eiji Takahashi.","Bug 51229  Some async examples are not work correctly","async exampl work correctli","","","""webapps/examples/WEB-INF/classes/async/Async0.java""","2","2","2","1","22","0","22","0","2","0","2","2","2","2","0","2","0","0","1","1","68","7","45","18","27","16","29","34","17","17","3","3","3","1","1","0","5","5","5","2","minor"
"51237","304","Filip Hanik","fix bug https://issues.apache.org/bugzilla/show_bug.cgi?id=51237 align implementation with the documentation","Bug 51237  SlowQueryReport interceptor does not log anything","slow queri report slowqueryreport interceptor log anyth","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/interceptor/SlowQueryReport.java""","1","1","1","1","7","0","6","0","2","4","5","33","33","29","13","33","0","0","4","29","406","50","290","103","168","67","130","182","86","96","6","6","6","1","3","0","50","50","51","33","normal"
"51240","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51240 Replace the more generic CounterLatch (that has concurrency issues) with a more specific LimitLatch that (mostly) only provides the functionality required by the connectors to implement maxConnections. It also adds support for dynamically modifying maxConnections.","Bug 51240  maxConnections not honors config when acceptorThreadCount > 1","max connect maxconnect honor config acceptor thread count acceptorthreadcount","","","""java/org/apache/tomcat/util/net/AbstractEndpoint.java""","1","1","1","1","4","0","3","0","4","0","3","108","113","117","51","117","0","0","9","108","773","106","494","214","311","174","269","434","208","226","11","11","11","4","3","0","165","165","170","121","normal"
"51240","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51240 Replace the more generic CounterLatch (that has concurrency issues) with a more specific LimitLatch that (mostly) only provides the functionality required by the connectors to implement maxConnections. It also adds support for dynamically modifying maxConnections.","Bug 51240  maxConnections not honors config when acceptorThreadCount > 1","max connect maxconnect honor config acceptor thread count acceptorthreadcount","","","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","15","0","12","2","11","0","2","84","87","87","63","87","1","1","9","76","1798","229","1145","281","787","424","581","882","263","619","33","33","43","11","7","0","278","278","319","119","normal"
"51240","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51240 Replace the more generic CounterLatch (that has concurrency issues) with a more specific LimitLatch that (mostly) only provides the functionality required by the connectors to implement maxConnections. It also adds support for dynamically modifying maxConnections.","Bug 51240  maxConnections not honors config when acceptorThreadCount > 1","max connect maxconnect honor config acceptor thread count acceptorthreadcount","","","""java/org/apache/tomcat/util/threads/CounterLatch.java""","1","1","1","1","8","0","4","4","2","0","1","14","14","14","4","14","0","0","2","12","179","18","73","31","28","88","33","52","29","23","2","2","4","1","1","1","18","18","21","14","normal"
"51240","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51240 Replace the more generic CounterLatch (that has concurrency issues) with a more specific LimitLatch that (mostly) only provides the functionality required by the connectors to implement maxConnections. It also adds support for dynamically modifying maxConnections.","Bug 51240  maxConnections not honors config when acceptorThreadCount > 1","max connect maxconnect honor config acceptor thread count acceptorthreadcount","","","""java/org/apache/tomcat/util/net/JIoEndpoint.java""","3","3","3","1","17","0","13","3","6","0","1","24","27","27","8","27","1","0","3","23","604","80","364","92","227","160","152","241","75","166","15","15","16","4","5","0","85","85","89","32","normal"
"51240","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51240 Replace the more generic CounterLatch (that has concurrency issues) with a more specific LimitLatch that (mostly) only provides the functionality required by the connectors to implement maxConnections. It also adds support for dynamically modifying maxConnections.","Bug 51240  maxConnections not honors config when acceptorThreadCount > 1","max connect maxconnect honor config acceptor thread count acceptorthreadcount","","","""java/org/apache/tomcat/util/net/NioEndpoint.java""","2","2","3","1","10","0","8","1","13","0","8","116","121","121","52","121","0","0","15","106","1623","180","1192","309","837","280","646","967","313","654","26","26","28","8","7","0","335","335","381","139","normal"
"51240","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51240 Replace the more generic CounterLatch (that has concurrency issues) with a more specific LimitLatch that (mostly) only provides the functionality required by the connectors to implement maxConnections. It also adds support for dynamically modifying maxConnections.","Bug 51240  maxConnections not honors config when acceptorThreadCount > 1","max connect maxconnect honor config acceptor thread count acceptorthreadcount","","","""test/org/apache/tomcat/util/threads/TestCounterLatch.java""","1","1","1","1","12","0","12","0","5","0","0","10","10","10","1","10","0","0","0","10","125","9","98","20","69","18","55","71","19","52","2","2","2","1","1","0","15","15","15","10","normal"
"51240","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51240 Replace the more generic CounterLatch (that has concurrency issues) with a more specific LimitLatch that (mostly) only provides the functionality required by the connectors to implement maxConnections. It also adds support for dynamically modifying maxConnections.","Bug 51240  maxConnections not honors config when acceptorThreadCount > 1","max connect maxconnect honor config acceptor thread count acceptorthreadcount","","","""test/org/apache/tomcat/util/threads/TestCounterLatch.java""","1","1","1","1","12","0","12","0","5","0","0","10","10","10","1","10","0","0","0","10","125","9","98","20","69","18","55","71","19","52","2","2","2","1","1","0","15","15","15","10","normal"
"51251","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51251 Add web application version support to the Ant tasks. Based on a patch provided by Eiji Takahashi.","Bug 51251  Patch to add version parameter to ant task","patch add version paramet ant task","","","""java/org/apache/catalina/ant/ReloadTask.java""","1","1","1","1","9","1","6","1","1","0","0","3","3","3","1","3","0","0","0","3","83","22","27","10","12","34","11","17","9","8","3","3","3","1","1","1","5","5","5","3","enhancement"
"51251","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51251 Add web application version support to the Ant tasks. Based on a patch provided by Eiji Takahashi.","Bug 51251  Patch to add version parameter to ant task","patch add version paramet ant task","","","""java/org/apache/catalina/ant/SessionsTask.java""","1","1","1","1","9","1","6","1","1","0","0","3","3","3","1","3","0","0","0","3","77","17","27","10","12","33","11","17","9","8","3","3","3","1","1","1","5","5","5","3","enhancement"
"51251","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51251 Add web application version support to the Ant tasks. Based on a patch provided by Eiji Takahashi.","Bug 51251  Patch to add version parameter to ant task","patch add version paramet ant task","","","""java/org/apache/catalina/ant/StartTask.java""","1","1","1","1","8","0","6","1","1","0","0","3","3","3","1","3","0","0","0","3","82","21","27","10","12","34","11","17","9","8","3","3","3","1","1","1","5","5","5","3","enhancement"
"51251","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51251 Add web application version support to the Ant tasks. Based on a patch provided by Eiji Takahashi.","Bug 51251  Patch to add version parameter to ant task","patch add version paramet ant task","","","""java/org/apache/catalina/ant/StopTask.java""","1","1","1","1","8","0","6","1","1","0","0","3","3","3","1","3","0","0","0","3","82","21","27","10","12","34","11","17","9","8","3","3","3","1","1","1","5","5","5","3","enhancement"
"51251","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51251 Add web application version support to the Ant tasks. Based on a patch provided by Eiji Takahashi.","Bug 51251  Patch to add version parameter to ant task","patch add version paramet ant task","","","""java/org/apache/catalina/ant/UndeployTask.java""","1","1","1","1","9","0","6","1","1","0","0","3","3","3","1","3","0","0","0","3","82","20","28","10","13","34","11","17","9","8","3","3","3","1","1","1","5","5","5","3","enhancement"
"51276","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51276 Provide an abstraction for accessing content in JARs so the most efficient method can be selected depending on the type of URL used to identify the JAR. This improves startup time when JARs are located in $CATALINA_BASE/lib.","Bug 51276  Startup time is too high if there are few JARs in ""lib/"" and a few webapps.","startup time high jar lib webapp","Startup time in tomcat 7.0.14 is 10x higher than 7.0.12, if there are a few shared JARs in tomcat/lib and a few webapps.
The issue is very simple to reproduce, simply add 10 empty directories in tomcat/webapps and (for example) the Metro webservices jars in tomcat/lib. On my machine the startup time increase from 0.5 secs (default installation) to 35.2 secs.
When using tomcat 7.0.12 the startup time is about 3 secs on my machine in this test case.","startup time tomcat 10x higher share jar tomcat lib webapp issu simpl reproduc simpli add empti directori tomcat webapp exampl metro webservic jar tomcat lib machin startup time increas sec default instal sec use tomcat startup time sec machin case","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","8","1","40","3","30","6","2","1","12","51","51","50","11","51","0","3","38","10","2402","319","1682","398","1189","403","788","1199","392","807","37","37","43","10","5","0","380","380","416","100","regression"
"51276","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51276 Provide an abstraction for accessing content in JARs so the most efficient method can be selected depending on the type of URL used to identify the JAR. This improves startup time when JARs are located in $CATALINA_BASE/lib.","Bug 51276  Startup time is too high if there are few JARs in ""lib/"" and a few webapps.","startup time high jar lib webapp","Startup time in tomcat 7.0.14 is 10x higher than 7.0.12, if there are a few shared JARs in tomcat/lib and a few webapps.
The issue is very simple to reproduce, simply add 10 empty directories in tomcat/webapps and (for example) the Metro webservices jars in tomcat/lib. On my machine the startup time increase from 0.5 secs (default installation) to 35.2 secs.
When using tomcat 7.0.12 the startup time is about 3 secs on my machine in this test case.","startup time tomcat 10x higher share jar tomcat lib webapp issu simpl reproduc simpli add empti directori tomcat webapp exampl metro webservic jar tomcat lib machin startup time increas sec default instal sec use tomcat startup time sec machin case","""java/org/apache/catalina/startup/TldConfig.java""","3","3","3","1","16","1","12","3","2","2","7","25","25","23","8","25","0","7","0","18","615","82","364","109","226","169","166","247","104","143","10","10","13","6","5","0","77","77","85","30","regression"
"51276","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51276 Provide an abstraction for accessing content in JARs so the most efficient method can be selected depending on the type of URL used to identify the JAR. This improves startup time when JARs are located in $CATALINA_BASE/lib.","Bug 51276  Startup time is too high if there are few JARs in ""lib/"" and a few webapps.","startup time high jar lib webapp","Startup time in tomcat 7.0.14 is 10x higher than 7.0.12, if there are a few shared JARs in tomcat/lib and a few webapps.
The issue is very simple to reproduce, simply add 10 empty directories in tomcat/webapps and (for example) the Metro webservices jars in tomcat/lib. On my machine the startup time increase from 0.5 secs (default installation) to 35.2 secs.
When using tomcat 7.0.12 the startup time is about 3 secs on my machine in this test case.","startup time tomcat 10x higher share jar tomcat lib webapp issu simpl reproduc simpli add empti directori tomcat webapp exampl metro webservic jar tomcat lib machin startup time increas sec default instal sec use tomcat startup time sec machin case","""java/org/apache/jasper/compiler/TldLocationsCache.java""","4","4","4","1","22","1","18","3","2","3","10","13","13","10","3","13","0","6","0","7","482","43","277","89","172","162","131","194","84","110","10","10","11","6","5","1","57","57","62","23","regression"
"51277","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51277 Improve error message if an application is deployed with an incomplete FORM authentication configuration.","Bug 51277  NPE during the form authentication when form-login-config is missed","npe form authent form login config formloginconfig miss","","","""java/org/apache/catalina/authenticator/FormAuthenticator.java""","5","5","6","2","39","3","26","9","1","0","2","13","13","13","2","13","0","0","7","6","629","94","372","114","265","163","195","269","92","177","34","34","36","14","4","0","73","73","78","30","normal"
"51306","11","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51306. Avoid NPE when handleSESSION_EXPIRED is processed while handleSESSION_CREATED is being processed.","Bug 51306  NPE in DeltaRequest.writeExternal(DeltaRequest.java:267) when handling remote session expiration","npe delta request deltarequest write extern writeextern delta request deltarequest java handl remot session expir","Occasionally we got errors like following:
======
2011-05-30 03:40:17,697 ERROR [pool-1-thread-2] (org.apache.catalina.ha.session.DeltaManager) Manager [localhost#]: Unable to receive message through TCP channel
java.lang.NullPointerException
at java.io.ObjectOutputStream$BlockDataOutputStream.getUTFLength(ObjectOutputStream.java:2106)
at java.io.ObjectOutputStream$BlockDataOutputStream.writeUTF(ObjectOutputStream.java:1977)
at java.io.ObjectOutputStream.writeUTF(ObjectOutputStream.java:849)
at org.apache.catalina.ha.session.DeltaRequest.writeExternal(DeltaRequest.java:267)
at org.apache.catalina.ha.session.DeltaRequest.serialize(DeltaRequest.java:287)
at org.apache.catalina.ha.session.DeltaManager.serializeDeltaRequest(DeltaManager.java:716)
at org.apache.catalina.ha.session.DeltaManager.requestCompleted(DeltaManager.java:1224)
at org.apache.catalina.ha.session.DeltaSession.expire(DeltaSession.java:403)
at org.apache.catalina.ha.session.DeltaManager.handleSESSION_EXPIRED(DeltaManager.java:1546)
at org.apache.catalina.ha.session.DeltaManager.messageReceived(DeltaManager.java:1452)
at org.apache.catalina.ha.session.DeltaManager.messageDataReceived(DeltaManager.java:1173)
at org.apache.catalina.ha.session.ClusterSessionListener.messageReceived(ClusterSessionListener.java:92)
at org.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:901)
at org.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:882)
at org.apache.catalina.tribes.group.GroupChannel.messageReceived(GroupChannel.java:269)
at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)
at org.apache.catalina.tribes.group.interceptors.TcpFailureDetector.messageReceived(TcpFailureDetector.java:110)
at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)
at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)
at org.apache.catalina.tribes.group.ChannelCoordinator.messageReceived(ChannelCoordinator.java:241)
at org.apache.catalina.tribes.transport.ReceiverBase.messageDataReceived(ReceiverBase.java:225)
at org.apache.catalina.tribes.transport.nio.NioReplicationTask.drainChannel(NioReplicationTask.java:188)
at org.apache.catalina.tribes.transport.nio.NioReplicationTask.run(NioReplicationTask.java:91)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 

It looks like the functionality of Tomcat is not affected by this.

The NPE comes from trying to write null sessionId, but why does Tomcat try to send something from handling received authoritative SESSION_EXPIRED message?","occasion got error like follow error pool thread 1thread apach catalina session delta manag deltamanag manag localhost unabl receiv messag tcp channel java lang null pointer except nullpointerexcept java object output stream objectoutputstream block data output stream blockdataoutputstream get length getutflength object output stream objectoutputstream java java object output stream objectoutputstream block data output stream blockdataoutputstream write writeutf object output stream objectoutputstream java java object output stream objectoutputstream write writeutf object output stream objectoutputstream java apach catalina session delta request deltarequest write extern writeextern delta request deltarequest java apach catalina session delta request deltarequest serial delta request deltarequest java apach catalina session delta manag deltamanag serial delta request serializedeltarequest delta manag deltamanag java apach catalina session delta manag deltamanag request complet requestcomplet delta manag deltamanag java apach catalina session delta session deltasess expir delta session deltasess java apach catalina session delta manag deltamanag handl handlesess expir delta manag deltamanag java apach catalina session delta manag deltamanag messag receiv messagereceiv delta manag deltamanag java apach catalina session delta manag deltamanag messag data receiv messagedatareceiv delta manag deltamanag java apach catalina session cluster session listen clustersessionlisten messag receiv messagereceiv cluster session listen clustersessionlisten java apach catalina tcp simpl tcp cluster simpletcpclust messag receiv messagereceiv simpl tcp cluster simpletcpclust java apach catalina tcp simpl tcp cluster simpletcpclust messag receiv messagereceiv simpl tcp cluster simpletcpclust java apach catalina tribe group group channel groupchannel messag receiv messagereceiv group channel groupchannel java apach catalina tribe group channel interceptor base channelinterceptorbas messag receiv messagereceiv channel interceptor base channelinterceptorbas java apach catalina tribe group interceptor tcp failur detector tcpfailuredetector messag receiv messagereceiv tcp failur detector tcpfailuredetector java apach catalina tribe group channel interceptor base channelinterceptorbas messag receiv messagereceiv channel interceptor base channelinterceptorbas java apach catalina tribe group channel interceptor base channelinterceptorbas messag receiv messagereceiv channel interceptor base channelinterceptorbas java apach catalina tribe group channel coordin channelcoordin messag receiv messagereceiv channel coordin channelcoordin java apach catalina tribe transport receiv base receiverbas messag data receiv messagedatareceiv receiv base receiverbas java apach catalina tribe transport nio nio replic task nioreplicationtask drain channel drainchannel nio replic task nioreplicationtask java apach catalina tribe transport nio nio replic task nioreplicationtask run nio replic task nioreplicationtask java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java look like function tomcat affect npe come tri write null session id sessionid tomcat tri send someth handl receiv authorit session expir messag","""java/org/apache/catalina/ha/session/DeltaManager.java""","2","2","2","1","15","0","9","5","1","0","4","83","83","83","33","83","0","0","26","57","1506","132","908","238","595","483","465","669","226","443","14","14","18","4","7","1","213","201","234","94","normal"
"51306","11","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51306. Avoid NPE when handleSESSION_EXPIRED is processed while handleSESSION_CREATED is being processed.","Bug 51306  NPE in DeltaRequest.writeExternal(DeltaRequest.java:267) when handling remote session expiration","npe delta request deltarequest write extern writeextern delta request deltarequest java handl remot session expir","Occasionally we got errors like following:
======
2011-05-30 03:40:17,697 ERROR [pool-1-thread-2] (org.apache.catalina.ha.session.DeltaManager) Manager [localhost#]: Unable to receive message through TCP channel
java.lang.NullPointerException
at java.io.ObjectOutputStream$BlockDataOutputStream.getUTFLength(ObjectOutputStream.java:2106)
at java.io.ObjectOutputStream$BlockDataOutputStream.writeUTF(ObjectOutputStream.java:1977)
at java.io.ObjectOutputStream.writeUTF(ObjectOutputStream.java:849)
at org.apache.catalina.ha.session.DeltaRequest.writeExternal(DeltaRequest.java:267)
at org.apache.catalina.ha.session.DeltaRequest.serialize(DeltaRequest.java:287)
at org.apache.catalina.ha.session.DeltaManager.serializeDeltaRequest(DeltaManager.java:716)
at org.apache.catalina.ha.session.DeltaManager.requestCompleted(DeltaManager.java:1224)
at org.apache.catalina.ha.session.DeltaSession.expire(DeltaSession.java:403)
at org.apache.catalina.ha.session.DeltaManager.handleSESSION_EXPIRED(DeltaManager.java:1546)
at org.apache.catalina.ha.session.DeltaManager.messageReceived(DeltaManager.java:1452)
at org.apache.catalina.ha.session.DeltaManager.messageDataReceived(DeltaManager.java:1173)
at org.apache.catalina.ha.session.ClusterSessionListener.messageReceived(ClusterSessionListener.java:92)
at org.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:901)
at org.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:882)
at org.apache.catalina.tribes.group.GroupChannel.messageReceived(GroupChannel.java:269)
at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)
at org.apache.catalina.tribes.group.interceptors.TcpFailureDetector.messageReceived(TcpFailureDetector.java:110)
at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)
at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)
at org.apache.catalina.tribes.group.ChannelCoordinator.messageReceived(ChannelCoordinator.java:241)
at org.apache.catalina.tribes.transport.ReceiverBase.messageDataReceived(ReceiverBase.java:225)
at org.apache.catalina.tribes.transport.nio.NioReplicationTask.drainChannel(NioReplicationTask.java:188)
at org.apache.catalina.tribes.transport.nio.NioReplicationTask.run(NioReplicationTask.java:91)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 

It looks like the functionality of Tomcat is not affected by this.

The NPE comes from trying to write null sessionId, but why does Tomcat try to send something from handling received authoritative SESSION_EXPIRED message?","occasion got error like follow error pool thread 1thread apach catalina session delta manag deltamanag manag localhost unabl receiv messag tcp channel java lang null pointer except nullpointerexcept java object output stream objectoutputstream block data output stream blockdataoutputstream get length getutflength object output stream objectoutputstream java java object output stream objectoutputstream block data output stream blockdataoutputstream write writeutf object output stream objectoutputstream java java object output stream objectoutputstream write writeutf object output stream objectoutputstream java apach catalina session delta request deltarequest write extern writeextern delta request deltarequest java apach catalina session delta request deltarequest serial delta request deltarequest java apach catalina session delta manag deltamanag serial delta request serializedeltarequest delta manag deltamanag java apach catalina session delta manag deltamanag request complet requestcomplet delta manag deltamanag java apach catalina session delta session deltasess expir delta session deltasess java apach catalina session delta manag deltamanag handl handlesess expir delta manag deltamanag java apach catalina session delta manag deltamanag messag receiv messagereceiv delta manag deltamanag java apach catalina session delta manag deltamanag messag data receiv messagedatareceiv delta manag deltamanag java apach catalina session cluster session listen clustersessionlisten messag receiv messagereceiv cluster session listen clustersessionlisten java apach catalina tcp simpl tcp cluster simpletcpclust messag receiv messagereceiv simpl tcp cluster simpletcpclust java apach catalina tcp simpl tcp cluster simpletcpclust messag receiv messagereceiv simpl tcp cluster simpletcpclust java apach catalina tribe group group channel groupchannel messag receiv messagereceiv group channel groupchannel java apach catalina tribe group channel interceptor base channelinterceptorbas messag receiv messagereceiv channel interceptor base channelinterceptorbas java apach catalina tribe group interceptor tcp failur detector tcpfailuredetector messag receiv messagereceiv tcp failur detector tcpfailuredetector java apach catalina tribe group channel interceptor base channelinterceptorbas messag receiv messagereceiv channel interceptor base channelinterceptorbas java apach catalina tribe group channel interceptor base channelinterceptorbas messag receiv messagereceiv channel interceptor base channelinterceptorbas java apach catalina tribe group channel coordin channelcoordin messag receiv messagereceiv channel coordin channelcoordin java apach catalina tribe transport receiv base receiverbas messag data receiv messagedatareceiv receiv base receiverbas java apach catalina tribe transport nio nio replic task nioreplicationtask drain channel drainchannel nio replic task nioreplicationtask java apach catalina tribe transport nio nio replic task nioreplicationtask run nio replic task nioreplicationtask java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java look like function tomcat affect npe come tri write null session id sessionid tomcat tri send someth handl receiv authorit session expir messag","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","7","4","1","0","2","52","52","52","5","52","0","2","7","43","840","98","480","147","266","264","229","345","117","228","9","9","10","5","3","1","102","102","119","63","normal"
"51324","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51324 Improve handling of exceptions when flushing the response buffer to ensure that the doFlush flag does not get stuck in the enabled state. Patch provided by Jeremy Norris.","Bug 51324  When OutputBuffer.doFlush gets Exception, doFlush gets stuck to true","output buffer outputbuff do flush doflush get except do flush doflush get stuck true","","","""java/org/apache/catalina/connector/OutputBuffer.java""","2","2","2","1","12","1","7","2","2","0","2","30","30","30","13","30","0","1","2","27","586","167","262","84","146","158","118","182","60","122","7","7","7","3","2","1","63","63","65","34","normal"
"51340","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51340 Fix thread-safety issue when parsing multiple web.xml files in parallel. Apache Tomcat does not do this but products that embed it may.","Bug 51340  Intermittent java.lang.IllegalArgumentException: <session-config> element is limited to 1 occurrence","intermitt java lang illeg argument except illegalargumentexcept session config sessionconfig element limit occurr","","","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","7","1","40","3","30","6","2","1","12","51","51","50","11","51","0","3","38","10","2372","317","1644","385","1162","413","774","1176","381","795","37","37","43","10","5","0","371","371","407","88","normal"
"51344","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51344 Fix problem with Lifecycle re-factoring for deprecated embedded class that prevented events being triggered.","Bug 51344  org.apache.catalina.startup.Embedded overrides Lifecycle incorrectly?","apach catalina startup embed overrid lifecycl incorrectli","Not sure if this is a bug or just my mis-coding...

I've been using the Embedded component in Tomcat 6.0.29 for integration testing. Something like this:

    server = new EmbeddedTomcat(""/test"", 7890, ""JVM-1"");
    PeerToPeerCacheLifecycleListener p2pListener = new PeerToPeerCacheLifecycleListener();
    p2pListener.setProperty(""mcast-port"", ""19991"");
    server.getEmbedded().addLifecycleListener(p2pListener);
    sessionManager = new DeltaSessionManager();
    server.getRootContext().setManager(sessionManager);

Here the EmbeddedTomcat class is simply a wrapper for Embedded - I'm passing in the context, port and 'JVM route' - nothing special. Then I add a listener which should be the programmatic equivalent of having the following server.xml snippet:

<Server>
    <Listener className=""PeerToPeerCacheLifecycleListener""/>
</Server>

DeltaSessionManager performs custom session management and thus extends ManagerBase and implements Lifecycle and SessionManager.

During the start of DeltaSessionManager I initialize the listener by doing

    this.lifecycle.fireLifecycleEvent(START_EVENT, null);

The listener picks up this event and starts.

All works nicely under Tomcat 6, but breaks under Tomcat 7.0.12. My initial investigation shows that the LifecycleEvent, being fired, is not reaching the Embedded component which is where the listener is registered.

Removing the overridden Lifecycle methods from Embedded (so that the Lifecyle processing happens in LifecycleBase) seems to work as the triggered event then reaches my listener.","sure mi code miscod use embed compon tomcat integr test someth like server new embed tomcat embeddedtomcat jvm peer to peer cach lifecycl listen peertopeercachelifecyclelisten p2p listen p2plisten new peer to peer cach lifecycl listen peertopeercachelifecyclelisten p2p listen p2plisten set properti setproperti mcast port mcastport server get embed getembed add lifecycl listen addlifecyclelisten p2p listen p2plisten session manag sessionmanag new delta session manag deltasessionmanag server get root context getrootcontext set manag setmanag session manag sessionmanag embed tomcat embeddedtomcat class simpli wrapper embed pass context port jvm rout noth special add listen programmat equival follow server xml snippet server listen class name classnam peer to peer cach lifecycl listen peertopeercachelifecyclelisten server delta session manag deltasessionmanag perform custom session manag thu extend manag base managerbas implement lifecycl session manag sessionmanag start delta session manag deltasessionmanag initi listen lifecycl fire lifecycl event firelifecycleev start event null listen pick event start work nice tomcat break tomcat initi investig show lifecycl event lifecycleev fire reach embed compon listen regist remov overridden lifecycl method embed lifecyl process happen lifecycl base lifecyclebas seem work trigger event reach listen","""java/org/apache/catalina/startup/Embedded.java""","3","3","3","1","18","2","10","5","1","0","3","38","38","38","7","38","0","0","6","32","986","196","454","126","281","337","232","348","123","225","15","15","15","8","4","1","117","117","119","55","regression"
"51348","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51348 Prevent possible NPE when processing WebDAV locks.","Bug 51348  Potential NullPointerException in org.apache.catalina.servlets.WebdavServlet at line 1336","potenti null pointer except nullpointerexcept apach catalina servlet webdav servlet webdavservlet line","A WebDAV LOCK_REFRESH request may cause a NullPointerException because of an (IMHO) wrong check at line 1332 in  WebdavServlet.java 1056763 2011-01-08 18:56:57Z markt.

I suggest line 1332 should be:
...
  if (toRenew != null) {
...","web webdav lock refresh request may caus null pointer except nullpointerexcept imho wrong check line webdav servlet webdavservlet java 57 57z markt suggest line to renew torenew null","""java/org/apache/catalina/servlets/WebdavServlet.java""","8","8","8","2","62","10","43","8","4","2","46","39","39","37","15","39","0","15","15","9","3142","633","1868","434","1446","642","962","1282","348","934","67","63","74","16","6","0","328","318","348","114","normal"
"51386","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51386 Correct code for processing @HandlesTypes annotations so only types of interest are reported to a ServletContainerInitializer.","Bug 51386  @HandlingType not correctly handled at server startup leads to incorrect classes set passed to initializers","handl type handlingtyp correctli handl server startup lead incorrect class set pass initi","","","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","7","1","40","3","30","6","2","1","12","51","51","50","11","51","0","3","38","10","2373","317","1643","386","1161","415","776","1177","382","795","37","37","43","10","5","0","370","370","406","88","critical"
"51386","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51386 Correct code for processing @HandlesTypes annotations so only types of interest are reported to a ServletContainerInitializer.","Bug 51386  @HandlingType not correctly handled at server startup leads to incorrect classes set passed to initializers","handl type handlingtyp correctli handl server startup lead incorrect class set pass initi","","","""test/org/apache/catalina/startup/TestContextConfigAnnotation.java""","1","1","1","1","23","1","19","1","1","0","0","9","9","9","0","9","0","1","0","8","257","30","190","72","158","37","152","164","62","102","2","2","2","1","1","0","11","11","11","9","critical"
"51396","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51396 Correctly handle jsp-file entries in web.xml when the JSP servlet has been configured via code when embedding Tomcat.","Bug 51396  Embedding class cannot launch a webapp with a jsp servlet","embed class cannot launch webapp jsp servlet","","","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","7","1","39","3","29","6","2","1","12","52","52","51","11","52","0","4","39","9","2403","327","1662","393","1174","416","795","1197","388","809","37","37","43","10","5","0","371","371","409","91","major"
"51396","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51396 Correctly handle jsp-file entries in web.xml when the JSP servlet has been configured via code when embedding Tomcat.","Bug 51396  Embedding class cannot launch a webapp with a jsp servlet","embed class cannot launch webapp jsp servlet","","","""test/org/apache/catalina/startup/TestContextConfig.java""","1","1","1","1","7","1","6","0","3","0","1","6","6","6","1","6","0","1","1","4","102","23","61","39","22","19","35","44","32","12","1","1","1","1","0","0","6","6","6","6","major"
"51396","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51396 Correctly handle jsp-file entries in web.xml when the JSP servlet has been configured via code when embedding Tomcat.","Bug 51396  Embedding class cannot launch a webapp with a jsp servlet","embed class cannot launch webapp jsp servlet","","","""test/org/apache/catalina/startup/TestContextConfig.java""","1","1","1","1","7","1","6","0","3","0","1","6","6","6","1","6","0","1","1","4","102","23","61","39","22","19","35","44","32","12","1","1","1","1","0","0","6","6","6","6","major"
"51401","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51401 Correctly initialise shared WebRuleSet instance used by the digesters that parse web.xml and prevent incorrect warnings about multiple occurrences of elements that are only allowed to appear once in web.xml and web-fragment.xml. Patch by kfujino","Bug 51401  java.lang.IllegalArgumentException: <session-config> element is limited to 1 occurrence","java lang illeg argument except illegalargumentexcept session config sessionconfig element limit occurr","","","""java/org/apache/catalina/startup/WebRuleSet.java""","1","1","1","1","21","1","17","2","17","0","1","40","40","40","12","40","0","0","2","38","1173","195","776","153","580","202","354","440","120","320","10","10","14","1","3","0","69","69","74","40","major"
"51403","0","Konstantin Kolinko","Avoid NullPointerException in JULI FileHandler if formatter is misconfigured Fixes https://issues.apache.org/bugzilla/show_bug.cgi?id=51403","Bug 51403  Avoid NullPointerException in JULI FileHandler if formatter is misconfigured","avoid null pointer except nullpointerexcept juli file handler filehandl formatt misconfigur","If formatter assigned to org.apache.juli.FileHandler in logging.properties is misconfigured and fails to load,
the FileHandler starts without formatter and fails with an NPE later.

To reproduce: assign some bogus value to
1catalina.org.apache.juli.FileHandler.formatter

When Tomcat starts, the following will be printed at the console:

java.util.logging.ErrorManager: 4
java.lang.NullPointerException
        at org.apache.juli.FileHandler.openWriter(FileHandler.java:377)
        at org.apache.juli.FileHandler.<init>(FileHandler.java:99)
        at org.apache.juli.FileHandler.<init>(FileHandler.java:90)


I think we can be more tolerant to this configuration error and fall back to the default formatter. I will commit a fix shortly.","formatt assign apach juli file handler filehandl log properti misconfigur fail load file handler filehandl start without formatt fail npe later reproduc assign bogu valu 1catalina apach juli file handler filehandl formatt tomcat start follow print consol java util log error manag errormanag java lang null pointer except nullpointerexcept apach juli file handler filehandl open writer openwrit file handler filehandl java apach juli file handler filehandl init file handler filehandl java apach juli file handler filehandl init file handler filehandl java think toler configur error fall back default formatt commit fix shortli","""java/org/apache/juli/FileHandler.java""","3","3","3","1","22","2","16","3","1","0","0","10","10","10","8","10","0","2","3","5","388","69","198","61","133","122","107","143","56","87","11","11","12","4","4","1","36","36","38","17","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/catalina/ant/AbstractCatalinaTask.java""","2","2","3","1","17","1","12","3","1","0","1","11","11","11","4","11","0","0","0","11","292","52","157","48","96","84","76","109","43","66","21","21","23","7","6","1","32","32","36","17","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/catalina/valves/AccessLogValve.java""","2","2","2","1","12","0","9","2","31","4","19","96","95","93","56","97","0","11","11","75","2033","253","1154","346","665","627","510","765","291","474","21","13","21","4","4","1","249","221","271","107","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/coyote/http11/filters/BufferedInputFilter.java""","1","1","1","1","7","0","6","1","1","0","2","8","8","8","4","8","0","0","0","8","141","28","76","30","35","37","32","47","22","25","3","3","3","1","2","0","14","14","15","8","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/coyote/http11/filters/ChunkedInputFilter.java""","5","5","5","2","28","5","17","6","1","0","2","13","13","13","10","13","0","1","4","8","536","131","264","69","175","142","127","193","55","138","25","25","29","11","4","1","65","65","69","29","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/jasper/Constants.java""","0","0","0","0","0","0","0","0","1","0","2","0","0","0","0","0","0","0","0","0","32","7","6","5","2","19","3","4","4","0","0","0","0","0","0","3","0","0","0","0","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/jasper/Constants.java""","0","0","0","0","0","0","0","0","1","0","2","0","0","0","0","0","0","0","0","0","32","7","6","5","2","19","3","4","4","0","0","0","0","0","0","3","0","0","0","0","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/jasper/Constants.java""","0","0","0","0","0","0","0","0","1","0","35","0","0","0","0","0","0","0","0","0","222","30","83","78","46","115","39","40","40","0","0","0","0","0","0","1","0","0","0","0","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/jasper/Constants.java""","0","0","0","0","0","0","0","0","1","0","35","0","0","0","0","0","0","0","0","0","222","30","83","78","46","115","39","40","40","0","0","0","0","0","0","1","0","0","0","0","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/catalina/authenticator/DigestAuthenticator.java""","2","2","3","2","19","1","13","4","4","2","6","28","28","26","24","28","0","0","8","20","714","129","413","134","240","172","190","280","118","162","34","34","42","23","3","0","82","82","93","60","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/coyote/http11/filters/IdentityInputFilter.java""","1","1","1","1","11","0","6","4","1","0","2","9","9","9","4","9","0","0","0","9","218","55","83","36","39","81","37","52","26","26","4","4","4","1","3","1","14","14","14","9","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/catalina/realm/JNDIRealm.java""","2","2","3","1","20","3","10","6","2","0","2","87","87","87","38","87","0","4","24","59","2392","497","1036","308","677","862","499","748","267","481","32","32","37","14","7","1","248","244","273","134","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/tomcat/util/buf/MessageBytes.java""","2","2","2","1","13","0","10","2","2","1","6","30","30","29","9","30","0","2","1","27","530","56","334","70","223","140","171","239","69","170","8","7","12","8","3","0","77","66","84","58","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/naming/resources/ProxyDirContext.java""","1","1","2","1","20","0","8","11","1","0","4","68","68","68","9","68","0","0","7","61","1682","195","654","268","316","835","245","375","145","230","16","16","23","7","4","1","127","127","139","90","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/catalina/realm/RealmBase.java""","4","4","4","2","23","2","15","5","2","3","7","47","50","47","11","50","1","2","14","33","1397","242","827","224","511","331","385","591","199","392","53","53","63","21","6","0","201","201","226","98","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/catalina/util/RequestUtil.java""","4","4","5","2","29","2","15","11","1","13","2","13","13","0","0","13","0","2","0","11","450","59","220","49","156","174","105","158","46","112","12","12","13","10","4","1","58","52","65","28","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/catalina/valves/SSLValve.java""","4","4","4","1","21","0","20","1","1","0","1","3","3","3","0","3","0","0","0","3","137","11","77","34","45","49","44","56","30","26","8","8","9","3","3","1","12","12","13","5","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/jasper/compiler/SmapUtil.java""","2","2","2","1","11","0","9","1","4","6","2","49","49","43","11","49","21","4","0","24","702","93","528","182","325","101","280","384","153","231","18","9","18","1","5","0","111","101","114","49","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/coyote/http11/filters/VoidInputFilter.java""","1","1","1","1","7","0","2","4","1","0","2","7","7","7","0","7","0","0","0","7","137","35","42","27","8","60","14","22","17","5","1","1","1","1","0","1","7","7","7","7","enhancement"
"51408","211","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51408 Don't use Charset.defaultCharset(). Use ISO-8859-1 charset explicitly.","Bug 51408  String.getBytes() and new String(byte[]) use default charset - may cause problems in some Locales","string get byte getbyt new string byte use default charset may caus problem local","There seem to be rather a lot of instances where Strings and bytes are cconverted using the default charset.

Since the default charset is unknown, its behaviour cannot be relied on.","seem rather lot instanc string byte cconvert use default charset sinc default charset unknown behaviour cannot reli","""java/org/apache/catalina/servlets/WebdavServlet.java""","8","8","8","2","62","10","43","8","4","2","46","39","39","37","15","39","0","15","15","9","3145","633","1871","435","1448","642","963","1284","349","935","68","64","75","16","6","0","329","319","349","114","enhancement"
"51418","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51418 Provide more control over Context creation when embedding Tomcat. Based on a patch by Benson Margulies.","Bug 51418  Allow more flexibility in adding webapps to org.apache.catalina.startup.Tomcat","allow flexibl ad webapp apach catalina startup tomcat","","","""java/org/apache/catalina/startup/Tomcat.java""","1","1","1","1","12","0","7","4","5","3","2","46","46","43","14","46","0","1","5","40","964","94","578","313","386","293","209","285","123","162","6","6","6","1","3","1","72","72","72","46","enhancement"
"51436","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51436 Send 100 (Continue) response earlier to enable ServletRequestListener implementations to read the request body. Based on a patch by Simon Olofsson.","Bug 51436  ServletRequestListener fails to access request parameters when an Expect-Header is sent","servlet request listen servletrequestlisten fail access request paramet expect header sent","","","""java/org/apache/catalina/core/StandardContextValve.java""","3","3","4","1","24","2","11","10","1","0","1","6","6","6","1","6","0","1","0","5","232","45","91","34","47","96","38","56","26","30","11","11","19","5","2","1","18","18","26","10","normal"
"51436","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51436 Send 100 (Continue) response earlier to enable ServletRequestListener implementations to read the request body. Based on a patch by Simon Olofsson.","Bug 51436  ServletRequestListener fails to access request parameters when an Expect-Header is sent","servlet request listen servletrequestlisten fail access request paramet expect header sent","","","""java/org/apache/catalina/core/StandardWrapperValve.java""","5","5","5","1","31","1","24","5","1","0","1","15","15","15","5","15","0","1","1","13","574","63","403","83","296","108","189","255","72","183","40","40","48","1","5","0","76","76","88","15","normal"
"51447","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51447 Viewing a back up session in the HTML Manager web application no longer changes the session to a primary session. Based on a patch provided by Eiji Takahashi.","Bug 51447  Session type changes from Backup to Primary","session type chang backup primari","","","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","31","2","22","6","11","0","16","34","34","34","2","34","0","1","19","14","1394","132","1006","222","795","263","441","577","195","382","20","20","25","10","4","0","132","132","154","59","normal"
"51453","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51453 Fix a regression in the preemptive authentication support (enhancement <bug>12428</bug>) that could trigger authentication even if preemptive authentication was disabled.","Bug 51453  Requests to open URL that include an Authorization header do not reach servlet","request open url includ author header reach servlet","In Tomcat 7, I've noticed that a request to a URL that does not require authentication will get forwarded to the login page if the request contains an ""Authorization"" header.

Our application expects these requests to be processed by the servlet.  The servlet parses the Authorization header and takes appropriate action (possibly redirecting to the login page or allowing the request if the headers contain an acceptible token).  This has worked in older versions of Tomcat.

The relevant part of our web.xml looks like:

<security-constraint>

  <web-resource-collection>
    <web-resource-name>open</web-resource-name>
    <url-pattern>/*</url-pattern>
    <!-- several other url patterns -->
  </web-resource-collection>

  <user-data-constraint>
    <transport-guarantee>CONFIDENTIAL</transport-guarantee>
  </user-data-constraint>

  <!-- Notice no auth-constraint element -->

</security-constraint>

I observed the behavior of org.apache.catalina.authenticator.AuthenticatorBase.invoke(), here's what I saw:

The constraints variable contains a single constraint that matches the security constraint from our web.xml above.

On line 520, authRequired is set to true because of the presence of the Authorization header.

The authenticate() call on line 535 fails and redirects to the login page.","tomcat notic request url requir authent get forward login page request contain author header applic expect request process servlet servlet par author header take appropri action possibl redirect login page allow request header contain accept token work older version tomcat relev part web xml look like secur constraint securityconstraint web resourc collect webresourcecollect web resourc name webresourcenam open web resourc name webresourcenam url pattern urlpattern url pattern urlpattern sever url pattern web resourc collect webresourcecollect user data constraint userdataconstraint transport guarante transportguarante confidenti transport guarante transportguarante user data constraint userdataconstraint notic auth constraint authconstraint element secur constraint securityconstraint observ behavior apach catalina authent authent base authenticatorbas invok saw constraint variabl contain singl constraint match secur constraint web xml line auth requir authrequir set true presenc author header authent call line fail redirect login page","""java/org/apache/catalina/authenticator/AuthenticatorBase.java""","3","3","3","1","21","2","12","7","1","0","6","27","29","29","11","29","0","0","6","23","856","146","392","126","232","318","180","270","103","167","35","35","43","10","5","1","90","90","102","42","regression"
"51466","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51466 Fix typos Patch by Felix Schumacher","Bug 51466  typos in comments of HostManagerServlet","typo comment host manag servlet hostmanagerservlet","","","""java/org/apache/catalina/manager/host/HostManagerServlet.java""","5","5","6","3","38","3","26","7","1","0","2","14","14","14","6","14","0","0","9","5","729","114","423","111","288","192","199","282","90","192","22","22","25","11","4","0","82","82","89","43","trivial"
"51467","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51467 start() not run() Patch provided by Felix Schumacher","Bug 51467  usage of method run instead of start to start a thread","usag method run instead start start thread","In StandardContext method Thread#run is used. This is most probably a mistake, since a few lines below Thread#join is called to wait for the completion of the thread.

So we could either remove the join and get rid of the thread by using just a runnable, or start the thread.","standard context standardcontext method thread run use probabl mistak sinc line thread join call wait complet thread could either remov join get rid thread use runnabl start thread","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","7","0","3","309","309","309","126","309","0","11","11","287","6549","1302","3382","1036","2041","1870","1502","2307","859","1448","54","54","69","9","5","1","708","708","768","403","minor"
"51473","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51473 Fix concatenation of values in SecurityConfig.setSecurityProperty() when the value provided by JRE is null.","Bug 51473  SecurityConfig,set ""package.definition"" security property to ""nullsun.,java.,...""","secur config securityconfig set packag definit secur properti nullsun java","","","""java/org/apache/catalina/security/SecurityConfig.java""","2","2","2","1","12","0","8","4","1","1","4","5","5","4","2","5","0","2","0","3","133","24","60","19","35","49","21","34","16","18","3","3","4","1","2","1","12","12","13","5","null"
"51475","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51475 Handle messages larger than the buffer size. Expand test cases to cover this. Based on a patch by Christian Stber.","Bug 51475  GzipInterceptor#decompress is not completly implemented","gzip interceptor gzipinterceptor decompress completli implement","","","""java/org/apache/catalina/tribes/group/interceptors/GzipInterceptor.java""","1","1","1","1","11","0","9","1","1","2","2","4","4","2","0","4","0","0","0","4","94","11","57","31","30","26","39","46","29","17","2","2","2","1","1","0","6","6","6","4","normal"
"51475","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51475 Handle messages larger than the buffer size. Expand test cases to cover this. Based on a patch by Christian Stber.","Bug 51475  GzipInterceptor#decompress is not completly implemented","gzip interceptor gzipinterceptor decompress completli implement","","","""test/org/apache/catalina/tribes/group/interceptors/TestGzipInterceptor.java""","1","1","1","1","7","0","7","0","1","0","0","1","1","1","0","1","0","0","0","1","32","4","12","8","5","16","8","10","8","2","1","1","1","1","0","1","1","1","1","1","normal"
"51475","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51475 Handle messages larger than the buffer size. Expand test cases to cover this. Based on a patch by Christian Stber.","Bug 51475  GzipInterceptor#decompress is not completly implemented","gzip interceptor gzipinterceptor decompress completli implement","","","""test/org/apache/catalina/tribes/group/interceptors/TestGzipInterceptor.java""","1","1","1","1","7","0","7","0","1","0","0","1","1","1","0","1","0","0","0","1","32","4","12","8","5","16","8","10","8","2","1","1","1","1","0","1","1","1","1","1","normal"
"51477","5","Rainer Jung","BZ 51477: Support all SSL protocol combinations in the APR/native connector.","Bug 51477  Support all protocol combinations in SSLProtocol of APR Connector","support protocol combin protocol sslprotocol apr connector","","","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","15","0","11","2","11","0","1","85","86","86","63","86","1","1","9","75","1800","228","1147","279","789","426","579","882","261","621","33","33","43","11","7","0","279","279","320","124","enhancement"
"51477","5","Rainer Jung","BZ 51477: Support all SSL protocol combinations in the APR/native connector.","Bug 51477  Support all protocol combinations in SSLProtocol of APR Connector","support protocol combin protocol sslprotocol apr connector","","","""java/org/apache/tomcat/jni/Library.java""","5","5","5","1","35","0","33","1","1","9","38","3","11","2","0","11","0","6","0","5","225","16","148","60","108","61","112","129","60","69","10","10","10","3","4","0","16","16","16","5","enhancement"
"51494","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51494 Prevent an NPE when a long running request completes if the associated web application was destroyed while the request was processing","Bug 51494  NPE in StandardContextValve.invoke() when a webapp is redeployed while a request is still being processed","npe standard context valv standardcontextvalv invok webapp redeploy request still process","","","""java/org/apache/catalina/core/StandardContextValve.java""","3","3","4","1","25","2","13","10","1","0","1","6","6","6","1","6","0","1","0","5","243","46","100","34","55","97","43","62","26","36","12","12","20","6","2","1","19","19","27","11","minor"
"51503","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51503 Add additional validation to Windows installer and Tomcat start for connector port numbers","Bug 51503  Additional error checking required for connector port attribute (e.g. for port="""")","addit error check requir connector port attribut port","With 7.0.18 packaged as a candidate for release and finally unreleased, when I stop the Tomcat service (only 1 war deployed), the service takes a lot of time to stop and finally was killed by system.

Having a look into the stderr log, I see it paused right after the folowing line :

INFO: Stopping ProtocolHandler [http-apr-0]

Then went into a slow loop and fill the log with these lines :

13 juil. 2011 14:30:30 org.apache.tomcat.util.net.AprEndpoint stopInternal
ATTENTION: Acceptor thread [http-apr-0-Acceptor-0] failed to unlock. Forcing hard socket shutdown.
13 juil. 2011 14:30:31 org.apache.tomcat.util.net.AprEndpoint stopInternal
ATTENTION: Acceptor thread [http-apr-0-Acceptor-0] failed to unlock. Forcing hard socket shutdown.
13 juil. 2011 14:30:32 org.apache.tomcat.util.net.AprEndpoint stopInternal
ATTENTION: Acceptor thread [http-apr-0-Acceptor-0] failed to unlock. Forcing hard socket shutdown.
etc. (about 30 times before it was killed)

I think there was no such issue with 7.0.16.","packag candid releas final unreleas stop tomcat servic deploy servic take lot time stop final kill system look stderr log see paus right folow line info stop protocol handler protocolhandl http apr httpapr went slow loop fill log line juil apach tomcat util net apr endpoint aprendpoint stop intern stopintern attent acceptor thread http apr httpapr acceptor fail unlock forc hard socket shutdown juil apach tomcat util net apr endpoint aprendpoint stop intern stopintern attent acceptor thread http apr httpapr acceptor fail unlock forc hard socket shutdown juil apach tomcat util net apr endpoint aprendpoint stop intern stopintern attent acceptor thread http apr httpapr acceptor fail unlock forc hard socket shutdown etc time kill think issu","""java/org/apache/catalina/connector/Connector.java""","1","1","1","1","12","1","5","4","1","0","5","61","61","61","23","61","0","0","8","53","1018","279","402","133","226","337","184","273","120","153","8","8","8","3","2","1","88","88","91","63","normal"
"51509","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51509 Fix potential concurrency issue in CSRF prevention filter that may lead to some requests failing that should not.","Bug 51509  Csrf Prevention Filter's LruCache is not thread save","csrf prevent filter lru cach lrucach thread save","The LruCache (org.apache.catalina.filters.CsrfPreventionFilter$LruCache) use by Csrf Prevention Filter is base on LinkedHashMap.

From the LinkedHashMap Java Doc:
Note that this implementation is not synchronized.
If multiple threads access a linked hash map concurrently, and at least one of the threads modifies the map structurally, it must be synchronized externally. ...

But the LruCache implementation does not synchronize the access to the map.","lru cach lrucach apach catalina filter csrf prevent filter csrfpreventionfilt lru cach lrucach use csrf prevent filter base link hash map linkedhashmap link hash map linkedhashmap java doc note implement synchron multipl thread access link hash map concurr least one thread modifi map structur must synchron extern lru cach lrucach implement synchron access map","""java/org/apache/catalina/filters/CsrfPreventionFilter.java""","2","2","2","1","13","1","9","2","4","0","3","17","17","17","6","17","0","1","3","13","320","52","201","87","111","67","102","140","73","67","8","8","10","4","3","0","36","36","39","20","minor"
"51518","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51518 Correct error in web.xml parsing rules for the <others/> tag when using absolute ordering.","Bug 51518  ""/absolute-ordering/name/others"" should not include ""name"" element","absolut order absoluteord name other includ name element","method:
org.apache.catalina.startup.WebRuleSet.addRuleInstances(Digester digester)


code:
====================================================
digester.addCallMethod(fullPrefix + ""/absolute-ordering/name/others"",
                                   ""addAbsoluteOrderingOthers"");
====================================================


web-common_3_0.xsd
====================================================
 <xsd:complexType name=""absoluteOrderingType"">
    <xsd:annotation>
      <xsd:documentation>

        Please see section 8.2.2 of the specification for details.
        
      </xsd:documentation>
    </xsd:annotation>
    <xsd:choice minOccurs=""0""
                maxOccurs=""unbounded"">
      <xsd:element name=""name""
                   type=""javaee:java-identifierType""
                   minOccurs=""0""
                   maxOccurs=""unbounded""/>
      <xsd:element name=""others""
                   type=""javaee:ordering-othersType""
                   minOccurs=""0""
                   maxOccurs=""1""/>
    </xsd:choice>
  </xsd:complexType>
====================================================","method apach catalina startup web rule set webruleset add rule instanc addruleinst digest digest code digest add call method addcallmethod full prefix fullprefix absolut order absoluteord name other add absolut order other addabsoluteorderingoth web common webcommon xsd xsd complex type complextyp name absolut order type absoluteorderingtyp xsd annot xsd document pleas see section specif detail xsd document xsd annot xsd choic min occur minoccur max occur maxoccur unbound xsd element name name type javae java identifi type javaidentifiertyp min occur minoccur max occur maxoccur unbound xsd element name other type javae order other type orderingotherstyp min occur minoccur max occur maxoccur xsd choic xsd complex type complextyp","""java/org/apache/catalina/startup/WebRuleSet.java""","1","1","1","1","21","1","17","2","17","0","1","40","40","40","12","40","0","0","2","38","1170","194","774","154","580","202","351","437","120","317","10","10","14","1","3","0","69","69","74","40","normal"
"51526","770","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51526 o.a.catalina.startup.Tomcat.addWebapp(...) will process web application's context.xml when it is presented in the provided baseDir.","Bug 51526  Process web application context config with embedded Tomcat.addWebApp(...)","process web applic context config embed tomcat add web app addwebapp","It would be nice if org.apache.catalina.startup.Tomcat.addWebApp(...) would process the web application's META-INF/context.xml if found.  The current implementation skips META-INF/context.xml loading, and does not appear to offer any hook to enable it--the StandardContext is instantiated and initialized with a null configFile in the single call to addWebApp(...).","would nice apach catalina startup tomcat add web app addwebapp would process web applic meta inf context xml found current implement skip meta inf context xml load appear offer hook enabl standard context standardcontext instanti initi null config file configfil singl call add web app addwebapp","""test/org/apache/catalina/startup/TestTomcat.java""","1","1","1","1","16","3","11","2","6","0","6","17","17","17","1","17","0","0","1","16","412","89","258","138","152","75","158","190","106","84","7","7","7","1","3","0","25","25","25","17","enhancement"
"51526","770","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51526 o.a.catalina.startup.Tomcat.addWebapp(...) will process web application's context.xml when it is presented in the provided baseDir.","Bug 51526  Process web application context config with embedded Tomcat.addWebApp(...)","process web applic context config embed tomcat add web app addwebapp","It would be nice if org.apache.catalina.startup.Tomcat.addWebApp(...) would process the web application's META-INF/context.xml if found.  The current implementation skips META-INF/context.xml loading, and does not appear to offer any hook to enable it--the StandardContext is instantiated and initialized with a null configFile in the single call to addWebApp(...).","would nice apach catalina startup tomcat add web app addwebapp would process web applic meta inf context xml found current implement skip meta inf context xml load appear offer hook enabl standard context standardcontext instanti initi null config file configfil singl call add web app addwebapp","""test/org/apache/catalina/startup/TestTomcat.java""","1","1","1","1","16","3","11","2","6","0","6","17","17","17","1","17","0","0","1","16","412","89","258","138","152","75","158","190","106","84","7","7","7","1","3","0","25","25","25","17","enhancement"
"51526","770","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51526 o.a.catalina.startup.Tomcat.addWebapp(...) will process web application's context.xml when it is presented in the provided baseDir.","Bug 51526  Process web application context config with embedded Tomcat.addWebApp(...)","process web applic context config embed tomcat add web app addwebapp","It would be nice if org.apache.catalina.startup.Tomcat.addWebApp(...) would process the web application's META-INF/context.xml if found.  The current implementation skips META-INF/context.xml loading, and does not appear to offer any hook to enable it--the StandardContext is instantiated and initialized with a null configFile in the single call to addWebApp(...).","would nice apach catalina startup tomcat add web app addwebapp would process web applic meta inf context xml found current implement skip meta inf context xml load appear offer hook enabl standard context standardcontext instanti initi null config file configfil singl call add web app addwebapp","""java/org/apache/catalina/startup/Tomcat.java""","1","1","1","1","13","0","8","4","5","3","2","48","48","45","12","48","0","1","5","42","1062","96","621","317","419","346","234","318","130","188","7","7","7","1","2","1","81","81","81","48","enhancement"
"51532","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51532 JSP files with dependencies in JARs were recompiled on every access leading to poor performance.","Bug 51532  Performance Issue when retriving JAR files during TLD file parsing.","perform issu retriv jar file tld file pars","","","""java/org/apache/jasper/compiler/Compiler.java""","5","5","5","1","35","3","23","8","1","0","0","14","15","15","8","15","0","1","2","12","593","79","361","83","236","154","162","239","75","164","27","27","28","12","5","0","75","75","79","27","normal"
"51545","2","Tim Whittington","https://issues.apache.org/bugzilla/show_bug.cgi?id=51545","Bug 51545  make threadname available in ExtendedAccessLogValve","make threadnam avail extend access log valv extendedaccesslogvalv","","","""java/org/apache/catalina/valves/ExtendedAccessLogValve.java""","2","2","2","2","12","0","12","0","29","0","6","54","54","54","16","54","1","2","10","41","883","81","663","161","423","139","281","441","149","292","17","17","18","17","4","0","150","147","156","124","enhancement"
"51555","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51555 Permit an additional lifecycle transition. Allow destroy() to be called on components that are initialized. This can occur in some start failure scenarios.","Bug 51555  An invalid Lifecycle transition ([before_stop]) for component in state [INITIALIZED]: MapperListener","invalid lifecycl transit stop compon state initi mapper listen mapperlisten","","","""java/org/apache/catalina/Lifecycle.java""","0","0","0","0","0","0","0","0","1","0","13","0","9","9","0","9","0","0","0","9","320","50","25","24","13","245","23","24","24","0","0","0","0","0","0","10","0","0","0","0","minor"
"51555","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51555 Permit an additional lifecycle transition. Allow destroy() to be called on components that are initialized. This can occur in some start failure scenarios.","Bug 51555  An invalid Lifecycle transition ([before_stop]) for component in state [INITIALIZED]: MapperListener","invalid lifecycl transit stop compon state initi mapper listen mapperlisten","","","""java/org/apache/catalina/util/LifecycleBase.java""","3","3","4","1","19","2","12","4","1","0","2","14","18","18","2","18","0","2","7","9","388","72","206","50","126","110","78","122","36","86","10","10","14","3","2","1","43","43","60","18","minor"
"51557","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51557 Ignore HTTP headers that do not comply with RFC 2616 and use header names that are not tokens.","Bug 51557  Newline during a http header field name obscures next value","newlin http header field name obscur next valu","","","""java/org/apache/coyote/http11/AbstractInputBuffer.java""","1","1","2","1","14","2","7","4","1","0","1","10","13","13","13","13","0","0","1","12","313","95","108","45","50","110","69","89","43","46","4","4","4","4","3","1","19","19","20","13","normal"
"51557","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51557 Ignore HTTP headers that do not comply with RFC 2616 and use header names that are not tokens.","Bug 51557  Newline during a http header field name obscures next value","newlin http header field name obscur next valu","","","""java/org/apache/coyote/http11/InternalAprInputBuffer.java""","7","7","8","2","43","8","26","8","2","0","0","12","12","12","2","12","0","0","2","10","639","154","339","59","233","147","156","242","46","196","35","35","43","6","4","0","85","85","100","25","normal"
"51557","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51557 Ignore HTTP headers that do not comply with RFC 2616 and use header names that are not tokens.","Bug 51557  Newline during a http header field name obscures next value","newlin http header field name obscur next valu","","","""java/org/apache/coyote/http11/InternalInputBuffer.java""","9","9","11","1","62","13","36","12","2","0","0","7","7","7","0","7","0","0","2","5","508","123","270","43","192","116","123","193","33","160","31","31","39","4","4","0","69","69","81","12","normal"
"51557","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51557 Ignore HTTP headers that do not comply with RFC 2616 and use header names that are not tokens.","Bug 51557  Newline during a http header field name obscures next value","newlin http header field name obscur next valu","","","""java/org/apache/coyote/http11/InternalNioInputBuffer.java""","4","4","5","3","26","2","18","6","5","0","3","23","19","23","23","23","0","2","2","19","780","112","471","87","324","208","235","345","75","270","41","41","49","27","5","0","111","111","128","71","normal"
"51557","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51557 Ignore HTTP headers that do not comply with RFC 2616 and use header names that are not tokens.","Bug 51557  Newline during a http header field name obscures next value","newlin http header field name obscur next valu","","","""test/org/apache/coyote/http11/TestInternalInputBuffer.java""","2","2","2","1","17","2","12","2","3","0","1","4","4","4","0","4","0","1","1","2","127","27","72","32","36","30","40","51","28","23","3","3","3","3","1","0","8","8","8","6","normal"
"51557","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51557 Ignore HTTP headers that do not comply with RFC 2616 and use header names that are not tokens.","Bug 51557  Newline during a http header field name obscures next value","newlin http header field name obscur next valu","","","""test/org/apache/coyote/http11/TestInternalInputBuffer.java""","2","2","2","1","17","2","12","2","3","0","1","4","4","4","0","4","0","1","1","2","127","27","72","32","36","30","40","51","28","23","3","3","3","3","1","0","8","8","8","6","normal"
"51558","31","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51558 No need to force the use of the StandardManager with addWebapp() since StandardContext will add it if it is not set.","Bug 51558  Tomcat Embedded: using tomcat.addWebapp always overrides programmatic context-settings with default values for the context at start of tomcat server","tomcat embed use tomcat add webapp addwebapp alway overrid programmat context set contextset default valu context start tomcat server","when i deploy an webapp with a tomcat server, i use the Function ""tomcat.addWebapp"". I looked into the code of this function and it makes the following call:

     ctx.addLifecycleListener(new DefaultWebXmlListener());

When i start tomcat, this DefaultWebXmlListener is activated automatically, and always does the following code, so the manager i set for my context gets overriden with this code:

     public static void initWebappDefaults(Context ctx) {
        ...
        // Sessions
        ctx.setManager( new StandardManager());
        ctx.setSessionTimeout(30);
        ...
     }

so when i set a StandardManager programatically, it gets overriden by this code. The workaround i used, is to unregister the DefaultWebXmlListener, and than add my own context.xml specific settings, like a custom manager for deactivating session persistance:

     Context warContext = tomcat.addWebapp(warContextPath, warLocation);
    
     LifecycleListener[] lclisteners = warContext.findLifecycleListeners();
     LifecycleListener defaultWebXMLListener = null;
     for (int i=0; i < lclisteners.length; i++){
       if (lclisteners[i] instanceof DefaultWebXmlListener){
         defaultWebXMLListener = lclisteners[i];
       }
     }
     warContext.removeLifecycleListener(defaultWebXMLListener);
     ...
     StandardManager manager = new StandardManager();
     manager.setPathname(null); // disable session persistance:
     //manager.setPathname(""SESSIONS.ser"");     
     warContext.setCookies(true);
     warContext.setCrossContext(true);
     warContext.setManager(manager);

i think its a bug that using the ""tomcat.addWebapp"" method makes it impossible to set context.xml specific settings programmatically, because they always get overriden by default values at the tomcat start.","deploy webapp tomcat server use function tomcat add webapp addwebapp look code function make follow call ctx add lifecycl listen addlifecyclelisten new default web xml listen defaultwebxmllisten start tomcat default web xml listen defaultwebxmllisten activ automat alway follow code manag set context get overriden code public static void init webapp default initwebappdefault context ctx session ctx set manag setmanag new standard manag standardmanag ctx set session timeout setsessiontimeout set standard manag standardmanag programat get overriden code workaround use unregist default web xml listen defaultwebxmllisten add context xml specif set like custom manag deactiv session persist context war context warcontext tomcat add webapp addwebapp war context path warcontextpath war locat warloc lifecycl listen lifecyclelisten lclisten war context warcontext find lifecycl listen findlifecyclelisten lifecycl listen lifecyclelisten default web listen defaultwebxmllisten null int lclisten length lclisten instanceof default web xml listen defaultwebxmllisten default web listen defaultwebxmllisten lclisten war context warcontext remov lifecycl listen removelifecyclelisten default web listen defaultwebxmllisten standard manag standardmanag manag new standard manag standardmanag manag set pathnam setpathnam null disabl session persist manag set pathnam setpathnam session ser war context warcontext set cooki setcooki true war context warcontext set cross context setcrosscontext true war context warcontext set manag setmanag manag think use tomcat add webapp addwebapp method make imposs set context xml specif set programmat alway get overriden default valu tomcat start","""test/org/apache/catalina/startup/TestTomcat.java""","1","1","1","1","15","2","10","2","5","0","4","16","16","16","2","16","0","0","3","13","364","76","229","121","129","67","140","171","96","75","7","7","7","1","3","0","25","25","25","16","normal"
"51558","31","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51558 No need to force the use of the StandardManager with addWebapp() since StandardContext will add it if it is not set.","Bug 51558  Tomcat Embedded: using tomcat.addWebapp always overrides programmatic context-settings with default values for the context at start of tomcat server","tomcat embed use tomcat add webapp addwebapp alway overrid programmat context set contextset default valu context start tomcat server","when i deploy an webapp with a tomcat server, i use the Function ""tomcat.addWebapp"". I looked into the code of this function and it makes the following call:

     ctx.addLifecycleListener(new DefaultWebXmlListener());

When i start tomcat, this DefaultWebXmlListener is activated automatically, and always does the following code, so the manager i set for my context gets overriden with this code:

     public static void initWebappDefaults(Context ctx) {
        ...
        // Sessions
        ctx.setManager( new StandardManager());
        ctx.setSessionTimeout(30);
        ...
     }

so when i set a StandardManager programatically, it gets overriden by this code. The workaround i used, is to unregister the DefaultWebXmlListener, and than add my own context.xml specific settings, like a custom manager for deactivating session persistance:

     Context warContext = tomcat.addWebapp(warContextPath, warLocation);
    
     LifecycleListener[] lclisteners = warContext.findLifecycleListeners();
     LifecycleListener defaultWebXMLListener = null;
     for (int i=0; i < lclisteners.length; i++){
       if (lclisteners[i] instanceof DefaultWebXmlListener){
         defaultWebXMLListener = lclisteners[i];
       }
     }
     warContext.removeLifecycleListener(defaultWebXMLListener);
     ...
     StandardManager manager = new StandardManager();
     manager.setPathname(null); // disable session persistance:
     //manager.setPathname(""SESSIONS.ser"");     
     warContext.setCookies(true);
     warContext.setCrossContext(true);
     warContext.setManager(manager);

i think its a bug that using the ""tomcat.addWebapp"" method makes it impossible to set context.xml specific settings programmatically, because they always get overriden by default values at the tomcat start.","deploy webapp tomcat server use function tomcat add webapp addwebapp look code function make follow call ctx add lifecycl listen addlifecyclelisten new default web xml listen defaultwebxmllisten start tomcat default web xml listen defaultwebxmllisten activ automat alway follow code manag set context get overriden code public static void init webapp default initwebappdefault context ctx session ctx set manag setmanag new standard manag standardmanag ctx set session timeout setsessiontimeout set standard manag standardmanag programat get overriden code workaround use unregist default web xml listen defaultwebxmllisten add context xml specif set like custom manag deactiv session persist context war context warcontext tomcat add webapp addwebapp war context path warcontextpath war locat warloc lifecycl listen lifecyclelisten lclisten war context warcontext find lifecycl listen findlifecyclelisten lifecycl listen lifecyclelisten default web listen defaultwebxmllisten null int lclisten length lclisten instanceof default web xml listen defaultwebxmllisten default web listen defaultwebxmllisten lclisten war context warcontext remov lifecycl listen removelifecyclelisten default web listen defaultwebxmllisten standard manag standardmanag manag new standard manag standardmanag manag set pathnam setpathnam null disabl session persist manag set pathnam setpathnam session ser war context warcontext set cooki setcooki true war context warcontext set cross context setcrosscontext true war context warcontext set manag setmanag manag think use tomcat add webapp addwebapp method make imposs set context xml specif set programmat alway get overriden default valu tomcat start","""test/org/apache/catalina/startup/TestTomcat.java""","1","1","1","1","15","2","10","2","5","0","4","16","16","16","2","16","0","0","3","13","364","76","229","121","129","67","140","171","96","75","7","7","7","1","3","0","25","25","25","16","normal"
"51558","31","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51558 No need to force the use of the StandardManager with addWebapp() since StandardContext will add it if it is not set.","Bug 51558  Tomcat Embedded: using tomcat.addWebapp always overrides programmatic context-settings with default values for the context at start of tomcat server","tomcat embed use tomcat add webapp addwebapp alway overrid programmat context set contextset default valu context start tomcat server","when i deploy an webapp with a tomcat server, i use the Function ""tomcat.addWebapp"". I looked into the code of this function and it makes the following call:

     ctx.addLifecycleListener(new DefaultWebXmlListener());

When i start tomcat, this DefaultWebXmlListener is activated automatically, and always does the following code, so the manager i set for my context gets overriden with this code:

     public static void initWebappDefaults(Context ctx) {
        ...
        // Sessions
        ctx.setManager( new StandardManager());
        ctx.setSessionTimeout(30);
        ...
     }

so when i set a StandardManager programatically, it gets overriden by this code. The workaround i used, is to unregister the DefaultWebXmlListener, and than add my own context.xml specific settings, like a custom manager for deactivating session persistance:

     Context warContext = tomcat.addWebapp(warContextPath, warLocation);
    
     LifecycleListener[] lclisteners = warContext.findLifecycleListeners();
     LifecycleListener defaultWebXMLListener = null;
     for (int i=0; i < lclisteners.length; i++){
       if (lclisteners[i] instanceof DefaultWebXmlListener){
         defaultWebXMLListener = lclisteners[i];
       }
     }
     warContext.removeLifecycleListener(defaultWebXMLListener);
     ...
     StandardManager manager = new StandardManager();
     manager.setPathname(null); // disable session persistance:
     //manager.setPathname(""SESSIONS.ser"");     
     warContext.setCookies(true);
     warContext.setCrossContext(true);
     warContext.setManager(manager);

i think its a bug that using the ""tomcat.addWebapp"" method makes it impossible to set context.xml specific settings programmatically, because they always get overriden by default values at the tomcat start.","deploy webapp tomcat server use function tomcat add webapp addwebapp look code function make follow call ctx add lifecycl listen addlifecyclelisten new default web xml listen defaultwebxmllisten start tomcat default web xml listen defaultwebxmllisten activ automat alway follow code manag set context get overriden code public static void init webapp default initwebappdefault context ctx session ctx set manag setmanag new standard manag standardmanag ctx set session timeout setsessiontimeout set standard manag standardmanag programat get overriden code workaround use unregist default web xml listen defaultwebxmllisten add context xml specif set like custom manag deactiv session persist context war context warcontext tomcat add webapp addwebapp war context path warcontextpath war locat warloc lifecycl listen lifecyclelisten lclisten war context warcontext find lifecycl listen findlifecyclelisten lifecycl listen lifecyclelisten default web listen defaultwebxmllisten null int lclisten length lclisten instanceof default web xml listen defaultwebxmllisten default web listen defaultwebxmllisten lclisten war context warcontext remov lifecycl listen removelifecyclelisten default web listen defaultwebxmllisten standard manag standardmanag manag new standard manag standardmanag manag set pathnam setpathnam null disabl session persist manag set pathnam setpathnam session ser war context warcontext set cooki setcooki true war context warcontext set cross context setcrosscontext true war context warcontext set manag setmanag manag think use tomcat add webapp addwebapp method make imposs set context xml specif set programmat alway get overriden default valu tomcat start","""java/org/apache/catalina/startup/Tomcat.java""","1","1","1","1","12","0","7","4","5","3","2","49","49","46","14","49","0","1","5","43","1048","96","613","321","406","340","223","307","129","178","7","7","7","1","3","1","81","81","81","49","normal"
"51580","53","Christopher Schultz","Fixed bug #51580: Severe error deploying WAR application (ExpandWar error) - Added error mesage when JarEntry InputStream cannot be found due to a broken WAR file","Bug 51580  Severe error deploying WAR application (ExpandWar error)","sever error deploy applic expand war expandwar error","","","""java/org/apache/catalina/startup/ExpandWar.java""","6","6","6","1","41","2","29","10","1","8","2","8","8","0","0","8","0","1","0","7","408","41","255","68","172","112","121","172","65","107","15","15","17","5","4","0","49","49","54","14","enhancement"
"51586","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51586 Expand error handling to cover anything that is recoverable (or might be recoverable) when loading classes during HandlesTypes processing.","Bug 51586  ContextConfig.checkHandlesTypes() doesn't check for VerifyError when loading class","context config contextconfig check handl type checkhandlestyp doesn check verifi error verifyerror load class","I've recently upgraded to Tomcat 7 and used to run with metadata-complete=""true"" in my web.xml.  With Servlet 3 I decided I'd try some of the annotation features.  When I turned off metadata-complete I got a VerifyError trying to load one of my classes.  This class is meant to only work on Tomcat 6 so the fact Tomcat 7 cannot load this class is expected.  What is not expected is that Tomcat 7 doesn't just ignore the error and continue scanning for annotations.  Looking in ContextConfig.checkHandlesTypes() I checks for virtually every type of loading failure except VerifyError.  Perhaps VerifyError should be added to this list?

java.lang.VerifyError: class org.lds.stack.tomcat.decrypt.DecryptingStandardContext overrides final method start.()V
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
	at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
	at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
	at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Class.java:247)
	at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1665)
	at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
	at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2006)
	at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1969)
	at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1858)
	at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1826)
	at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1812)
	at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1306)
	at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:896)
	at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:322)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
	at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5103)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)
	at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:633)
	at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:558)
	at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:468)
	at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1322)
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
	at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
	at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:379)
	at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:324)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1041)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
	at org.apache.catalina.startup.Catalina.start(Catalina.java:621)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)","recent upgrad tomcat use run metadata complet metadatacomplet true web xml servlet decid tri annot featur turn metadata complet metadatacomplet got verifi error verifyerror tri load one class class meant work tomcat fact tomcat cannot load class expect expect tomcat doesn ignor error continu scan annot look context config contextconfig check handl type checkhandlestyp check virtual everi type load failur except verifi error verifyerror perhap verifi error verifyerror ad list java lang verifi error verifyerror class ld stack tomcat decrypt decrypt standard context decryptingstandardcontext overrid final method start java lang class loader classload defin class1 defineclass1 nativ method java lang class loader classload defin class cond defineclasscond class loader classload java java lang class loader classload defin class defineclass class loader classload java java secur secur class loader secureclassload defin class defineclass secur class loader secureclassload java java net class loader urlclassload defin class defineclass class loader urlclassload java java net class loader urlclassload access class loader urlclassload java java net class loader urlclassload run class loader urlclassload java java secur access control accesscontrol do privileg doprivileg nativ method java net class loader urlclassload find class findclass class loader urlclassload java java lang class loader classload load class loadclass class loader classload java java lang class loader classload load class loadclass class loader classload java java lang class for name0 forname0 nativ method java lang class for name fornam class java apach catalina loader webapp class loader webappclassload load class loadclass webapp class loader webappclassload java apach catalina loader webapp class loader webappclassload load class loadclass webapp class loader webappclassload java apach catalina startup context config contextconfig check handl type checkhandlestyp context config contextconfig java apach catalina startup context config contextconfig process annot stream processannotationsstream context config contextconfig java apach catalina startup context config contextconfig process annot jar processannotationsjar context config contextconfig java apach catalina startup context config contextconfig process annot url processannotationsurl context config contextconfig java apach catalina startup context config contextconfig process annot processannot context config contextconfig java apach catalina startup context config contextconfig web config webconfig context config contextconfig java apach catalina startup context config contextconfig configur start configurestart context config contextconfig java apach catalina startup context config contextconfig lifecycl event lifecycleev context config contextconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina util lifecycl base lifecyclebas fire lifecycl event firelifecycleev lifecycl base lifecyclebas java apach catalina core standard context standardcontext start intern startintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig java apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig java apach catalina startup host config hostconfig deploy app deployapp host config hostconfig java apach catalina startup host config hostconfig start host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina util lifecycl base lifecyclebas fire lifecycl event firelifecycleev lifecycl base lifecyclebas java apach catalina util lifecycl base lifecyclebas set state intern setstateintern lifecycl base lifecyclebas java apach catalina util lifecycl base lifecyclebas set state setstat lifecycl base lifecyclebas java apach catalina core contain base containerbas start intern startintern contain base containerbas java apach catalina core standard host standardhost start intern startintern standard host standardhost java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core contain base containerbas start intern startintern contain base containerbas java apach catalina core standard engin standardengin start intern startintern standard engin standardengin java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core standard servic standardservic start intern startintern standard servic standardservic java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core standard server standardserv start intern startintern standard server standardserv java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina startup catalina start catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap start bootstrap java apach catalina startup bootstrap main bootstrap java","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","8","1","40","3","30","6","2","1","12","52","52","51","11","52","0","4","38","10","2432","323","1690","396","1194","421","802","1213","392","821","37","37","43","10","5","0","379","379","417","91","normal"
"51588","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51588 Make it easier to extend the AccessLogValve to add support for custom elements.","Bug 51588  Change access modifiers in AccessLogValve to make it easier to extend","chang access modifi access log valv accesslogvalv make easier extend","I'm adding some fields to a subclass of org.apache.catalina.valves.AccessLogValve but createLogElements() is the closest extension point available. Rather than reimplement the functionality there it would be preferable if both of the createAccessLogElement() methods were protected rather than private then it's a simple method of matching the char you want to use and falling back to super.createAccessLogElement().","ad field subclass apach catalina valv access log valv accesslogvalv creat log element createlogel closest extens point avail rather reimplement function would prefer creat access log element createaccesslogel method protect rather privat simpl method match char use fall back super creat access log element createaccesslogel","""java/org/apache/catalina/valves/AccessLogValve.java""","2","2","2","1","12","0","9","2","31","4","20","93","92","90","55","94","0","13","9","72","1983","253","1131","341","653","600","504","755","286","469","21","13","21","4","4","1","245","217","263","104","minor"
"51610","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51610 Make lifecycle transitions more robust at handling unchecked exceptions","Bug 51610  Context fails to reload after an error in web.xml was corrected","context fail reload error web xml correct","With current trunk. Steps to reproduce:

1. Start Tomcat 7

2. Go to webapps/examples/WEB-INF/web.xml and uncomment <filter-mapping> for ""Timing Filter"" (line 75).

3. Wait several seconds. The examples webapp is reloaded, but fails to start. 

This happens because there is a typo. The <filter-name> value should be
s/Timing Filter/Timing filter/.

There is stack trace in the logs:

[[[
04.08.2011 8:09:39 org.apache.catalina.startup.HostConfig checkResources
WARNING: Error during context [/examples] restart
java.lang.IllegalArgumentException: Filter mapping specifies an unknown filter name Timing Filter
	at org.apache.catalina.core.StandardContext.validateFilterMap(StandardContext.java:2950)
	at org.apache.catalina.core.StandardContext.addFilterMap(StandardContext.java:2915)
	at org.apache.catalina.deploy.WebXml.configureContext(WebXml.java:1206)
	at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1343)
	at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:896)
	at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:322)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
	at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5103)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
	at org.apache.catalina.startup.HostConfig.checkResources(HostConfig.java:1279)
	at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1360)
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:294)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
	at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
	at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1240)
	at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1398)
	at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1408)
	at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1387)
	at java.lang.Thread.run(Thread.java:662)
]]]

4. Go to web.xml and edit it once again. E.g. re-comment the mapping, or correct the typo.

5. Wait several seconds. Here is an issue:

EXPECTED: The examples webapp should reload successfully.
ACTUAL: Reload fails. The following is printed in the logs:

04.08.2011 8:09:59 org.apache.catalina.startup.HostConfig checkResources
INFO: Reloading context [/examples]
04.08.2011 8:09:59 org.apache.catalina.util.LifecycleBase start
INFO: The start() method was called on component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/examples]] after start() had already been called. The second call will be ignored.


6. Stop Tomcat. Here is the second issue:

EXPECTED: Successful shutdown
ACTUAL: 
[[[
04.08.2011 8:14:10 org.apache.catalina.startup.Catalina stop
SEVERE: Catalina.stop
org.apache.catalina.LifecycleException: An invalid Lifecycle transition was attempted ([before_stop]) for component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/examples]] in state [STARTING_PREP]
	at org.apache.catalina.util.LifecycleBase.invalidTransition(LifecycleBase.java:387)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:212)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:1072)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:225)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:1072)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:225)
	at org.apache.catalina.core.StandardService.stopInternal(StandardService.java:502)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:225)
	at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:748)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:225)
	at org.apache.catalina.startup.Catalina.stop(Catalina.java:694)
	at org.apache.catalina.startup.Catalina$CatalinaShutdownHook.run(Catalina.java:847)
]]]

This exception at shutdown happens only if examples webapp was correct when Tomcat started, but was broken afterwards. If it was already broken at startup time, nothing happens.

7. Here is the third issue: when the above happens the shutdown sequence is apparently aborted abnormally.

EXPECTED: ""INFO: Stopping ProtocolHandler [""http-bio-8080""]"" etc. messages
ACTUAL: There are no messages after the ""SEVERE: Catalina.stop"" one that I cited above.","current trunk step reproduc start tomcat go webapp exampl web inf web xml uncom filter map filtermap time filter line wait sever second exampl webapp reload fail start happen typo filter name filternam valu time filter time filter stack trace log apach catalina startup host config hostconfig check resourc checkresourc warn error context exampl restart java lang illeg argument except illegalargumentexcept filter map specifi unknown filter name time filter apach catalina core standard context standardcontext valid filter map validatefiltermap standard context standardcontext java apach catalina core standard context standardcontext add filter map addfiltermap standard context standardcontext java apach catalina deploy web xml webxml configur context configurecontext web xml webxml java apach catalina startup context config contextconfig web config webconfig context config contextconfig java apach catalina startup context config contextconfig configur start configurestart context config contextconfig java apach catalina startup context config contextconfig lifecycl event lifecycleev context config contextconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina util lifecycl base lifecyclebas fire lifecycl event firelifecycleev lifecycl base lifecyclebas java apach catalina core standard context standardcontext start intern startintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina startup host config hostconfig check resourc checkresourc host config hostconfig java apach catalina startup host config hostconfig check host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina util lifecycl base lifecyclebas fire lifecycl event firelifecycleev lifecycl base lifecyclebas java apach catalina core contain base containerbas background process backgroundprocess contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor process child processchildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor run contain base containerbas java java lang thread run thread java go web xml edit re comment recom map correct typo wait sever second issu expect exampl webapp reload success actual reload fail follow print log apach catalina startup host config hostconfig check resourc checkresourc info reload context exampl apach catalina util lifecycl base lifecyclebas start info start method call compon standard engin standardengin catalina standard host standardhost localhost standard context standardcontext exampl start alreadi call second call ignor stop tomcat second issu expect success shutdown actual apach catalina startup catalina stop sever catalina stop apach catalina lifecycl except lifecycleexcept invalid lifecycl transit attempt stop compon standard engin standardengin catalina standard host standardhost localhost standard context standardcontext exampl state start prep apach catalina util lifecycl base lifecyclebas invalid transit invalidtransit lifecycl base lifecyclebas java apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java apach catalina core contain base containerbas stop intern stopintern contain base containerbas java apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java apach catalina core contain base containerbas stop intern stopintern contain base containerbas java apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java apach catalina core standard servic standardservic stop intern stopintern standard servic standardservic java apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java apach catalina core standard server standardserv stop intern stopintern standard server standardserv java apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java apach catalina startup catalina stop catalina java apach catalina startup catalina catalina shutdown hook catalinashutdownhook run catalina java except shutdown happen exampl webapp correct tomcat start broken afterward alreadi broken startup time noth happen third issu happen shutdown sequenc appar abort abnorm expect info stop protocol handler protocolhandl http bio httpbio etc messag actual messag sever catalina stop one cite","""java/org/apache/catalina/util/LifecycleBase.java""","3","3","4","1","19","2","12","4","1","0","2","14","18","18","2","18","0","2","7","9","389","72","207","50","127","110","78","122","36","86","10","10","14","3","2","1","43","43","61","18","normal"
"51614","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51614 Avoid two times calls of store.load() and session.expire() in PersistentManager.","Bug 51614  PersistentManager loads session from Store and calls session.expire() twice.","persist manag persistentmanag load session store call session expir twice","To check whether session is loaded into  memory, StoreBase#processExpires calls findSession(id). 

=====
...
if (manager.findSession(keys[i]) != null) {
    isLoaded = true;
}
...
=====

However, PersistentManager#findSession(id) loads session from Store when there is no session in memory. 
Because session loaded from Store is an invalid session
PersistentManager logs errorlog, calls session.expire(), and deletes session from Store. 

As a result, findSession(id) returns null, and isLoaded becomes false. 
And, session.expire() is called again, and the session is deleted from Store.

If manager is PersistentManager, it is necessary to call PersistentManagerBase#isLoaded(id). 
However, to avoid regression of r1033024, other managers call findSession(id).

Best regards.","check whether session load memori store base storebas process expir processexpir call find session findsess id manag find session findsess key null is load isload true howev persist manag persistentmanag find session findsess id load session store session memori session load store invalid session persist manag persistentmanag log errorlog call session expir delet session store result find session findsess id return null is load isload becom fals session expir call session delet store manag persist manag persistentmanag necessari call persist manag base persistentmanagerbas is load isload id howev avoid regress r1033024 manag call find session findsess id best regard","""java/org/apache/catalina/session/StoreBase.java""","2","2","2","1","12","0","7","4","1","0","3","12","12","12","2","12","0","0","4","8","253","40","119","45","59","94","53","79","36","43","13","13","13","7","4","1","25","25","25","18","normal"
"51615","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51615 Code clean-up.","Bug 51615  Line 267 of ""org.apache.tomcat.jdbc.pool.PooledConnection"": double assignment typo","line apach tomcat jdbc pool pool connect pooledconnect doubl assign typo","Nothing bad here, but my compiler lights up:

connection = connection = driver.connect(driverURL, properties);

Clearly, to be fixed.","noth bad compil light connect connect driver connect driver driverurl properti clearli fix","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PooledConnection.java""","2","2","3","1","14","0","9","4","1","0","7","36","36","36","15","36","0","2","2","32","670","73","369","88","239","236","175","277","87","190","13","13","15","7","3","1","103","103","127","47","normal"
"51630","57","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51630 Correct bug in async examples. Remove unnecessary call to AsyncContext.complete() that triggered an ISE.","Bug 51630  java.lang.IllegalStateException: Calling [asyncComplete()]","java lang illeg state except illegalstateexcept call async complet asynccomplet","example:

webapps\examples\WEB-INF\classes\async\Async0.java


log file: logs\localhost.2011-08-07.log
=============================================
java.lang.IllegalStateException: Calling [asyncComplete()] is not valid for a request with Async state [DISPATCHED]
	at org.apache.coyote.AsyncStateMachine.asyncComplete(AsyncStateMachine.java:221)
	at org.apache.coyote.http11.Http11Processor.actionInternal(Http11Processor.java:525)
	at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:773)
	at org.apache.coyote.Request.action(Request.java:344)
	at org.apache.catalina.core.AsyncContextImpl.complete(AsyncContextImpl.java:89)
	at async.Async0.service(Async0.java:42)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)
	at org.apache.catalina.core.AsyncContextImpl$1.run(AsyncContextImpl.java:173)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:314)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:851)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:296)
	at org.apache.coyote.http11.AbstractHttp11Processor.asyncDispatch(AbstractHttp11Processor.java:1220)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:511)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:619)","exampl webapp exampl web inf class async async0 java log file log localhost log java lang illeg state except illegalstateexcept call async complet asynccomplet valid request async state dispatch apach coyot async state machin asyncstatemachin async complet asynccomplet async state machin asyncstatemachin java apach coyot http11 http11 processor http11processor action intern actionintern http11 processor http11processor java apach coyot http11 abstract http11 processor abstracthttp11processor action abstract http11 processor abstracthttp11processor java apach coyot request action request java apach catalina core async context impl asynccontextimpl complet async context impl asynccontextimpl java async async0 servic async0 java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core applic dispatch applicationdispatch invok applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch do includ doinclud applic dispatch applicationdispatch java apach catalina core applic dispatch applicationdispatch includ applic dispatch applicationdispatch java apach catalina core async context impl asynccontextimpl run async context impl asynccontextimpl java apach catalina core async context impl asynccontextimpl do intern dispatch dointernaldispatch async context impl asynccontextimpl java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina valv access log valv accesslogvalv invok access log valv accesslogvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt async dispatch asyncdispatch coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor async dispatch asyncdispatch abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""webapps/examples/WEB-INF/classes/async/Async0.java""","2","2","2","1","22","0","22","0","2","0","2","2","2","2","0","2","0","0","1","1","68","7","45","18","27","16","29","34","17","17","3","3","3","1","1","0","5","5","5","2","normal"
"51640","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51640 Improve memory leak protection for DriverManager","Bug 51640  clearReferencesJdbc seems to be causing leaks with com.oracle.ojdbc5 driver","clear refer jdbc clearreferencesjdbc seem caus leak oracl ojdbc5 driver","","","""java/org/apache/catalina/core/JreMemoryLeakPreventionListener.java""","2","2","2","1","13","0","9","3","1","0","2","17","17","17","8","17","0","0","0","17","362","29","184","59","120","150","76","112","52","60","29","29","29","1","5","1","45","45","45","17","normal"
"51641","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51641 Connections map uses NioChannel, not <SocketWrapper<NioChannel>","Bug 51641  Http11NioProcessor not correct release","http11 nio processor http11nioprocessor correct releas","org.apache.coyote.http11.Http11NioProtocol.Http11ConnectionHandler

code segment:
==================================
        @Override
        public void release(SocketWrapper<NioChannel> socket) {
            Http11NioProcessor processor = connections.remove(socket);
            if (processor != null) {
                processor.recycle();
                recycledProcessors.offer(processor);
            }
        }
==================================

should be:
==================================
        @Override
        public void release(SocketWrapper<NioChannel> socket) {
            Http11NioProcessor processor = connections.remove(socket.getSocket());
            if (processor != null) {
                processor.recycle();
                recycledProcessors.offer(processor);
            }
        }
==================================

type of connections is ConcurrentHashMap<NioChannel, Http11NioProcessor> ,
not ConcurrentHashMap<SocketWrapper<NioChannel>, Http11NioProcessor>.","apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl code segment overrid public void releas socket wrapper socketwrapp nio channel niochannel socket http11 nio processor http11nioprocessor processor connect remov socket processor null processor recycl recycl processor recycledprocessor offer processor overrid public void releas socket wrapper socketwrapp nio channel niochannel socket http11 nio processor http11nioprocessor processor connect remov socket get socket getsocket processor null processor recycl recycl processor recycledprocessor offer processor type connect concurr hash map concurrenthashmap nio channel niochannel http11 nio processor http11nioprocessor concurr hash map concurrenthashmap socket wrapper socketwrapp nio channel niochannel http11 nio processor http11nioprocessor","""java/org/apache/coyote/http11/Http11NioProtocol.java""","1","1","1","1","6","0","5","0","2","0","1","28","28","28","3","28","1","0","7","20","294","55","187","77","88","52","86","124","57","67","5","5","5","3","2","0","36","36","38","30","normal"
"51644","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51644 Annotation scanning was broken for contexts with a multi-level context path such as /a/b","Bug 51644  Unable to deploy applications with the name a#b.xml","unabl deploy applic name xml","When I try to deploy a context with the name ""a#b.xml"" I get the following exception.


SEVERE: Unable to process JNDI URL [jndi:/localhost/sample/one/WEB-INF/classes]
for annotations
java.io.FileNotFoundException: jndi:/localhost/sample/one/WEB-INF/classes
        at org.apache.naming.resources.DirContextURLConnection.list(DirContextUR
LConnection.java:452)
        at org.apache.catalina.startup.ContextConfig.processAnnotationsJndi(Cont
extConfig.java:1901)
        at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(Conte
xtConfig.java:1828)
        at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.jav
a:1295)
        at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfi
g.java:896)
        at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfi
g.java:322)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(Lifecycl
eSupport.java:119)
        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBa
se.java:89)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContex
t.java:5103)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase
.java:812)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:78
7)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)

        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.ja
va:633)
        at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.j
ava:558)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:468
)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1363)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java
:294)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(Lifecycl
eSupport.java:119)
        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBa
se.java:89)
        at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBas
e.java:1233)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.p
rocessChildren(ContainerBase.java:1391)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.p
rocessChildren(ContainerBase.java:1401)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.r
un(ContainerBase.java:1380)
        at java.lang.Thread.run(Thread.java:619)


I would have expected the application to be available in the URI a/b. The bug seems to be in the ""list()"" method ""of DirContextURLConnection.java. The method assumes that context name does not have any ""/"" characters in it. See the developer note just before the ""if"" block. I have added the ""else if"" condition that seems to have solved the problem for me.

            try {
                String file = getURL().getFile();
                // This will be of the form /<hostname>/<contextpath>/file name
                // if <contextpath> is not empty otherwise this will be of the
                // form /<hostname>/file name
                // Strip off the hostname and the contextpath
                int start;
                if(context instanceof ProxyDirContext &&
                        """".equals(((ProxyDirContext)context).getContextPath())){
                    start = file.indexOf('/',1);
                }
                else if(context instanceof ProxyDirContext){
                	start=""/"".length()
                			+((ProxyDirContext)context).getHostName().length()
                			+((ProxyDirContext)context).getContextPath().length();
                	/*
                	 * Seems like a bug in Tomcat. below was the code in Tomcat.
                	 * How can it handle contextpath like ""/sample/one"". It cannot
                	 */
                    //start = file.indexOf('/', file.indexOf('/', 1) + 1);
                } else
                	start = file.indexOf('/', file.indexOf('/', 1) + 1);
                
                NamingEnumeration<NameClassPair> enumeration =
                    context.list(file.substring(start));
                while (enumeration.hasMoreElements()) {
                    NameClassPair ncp = enumeration.nextElement();
                    result.addElement(ncp.getName());
                }
            } catch (NamingException e) {","tri deploy context name xml get follow except sever unabl process jndi url jndi localhost sampl one web inf class annot java file not found except filenotfoundexcept jndi localhost sampl one web inf class apach name resourc dir context connect dircontexturlconnect list dir context dircontextur connect lconnect java apach catalina startup context config contextconfig process annot jndi processannotationsjndi cont ext config extconfig java apach catalina startup context config contextconfig process annot url processannotationsurl cont xt config xtconfig java apach catalina startup context config contextconfig web config webconfig context config contextconfig jav apach catalina startup context config contextconfig configur start configurestart context confi contextconfi java apach catalina startup context config contextconfig lifecycl event lifecycleev context confi contextconfi java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support esupport java apach catalina util lifecycl base lifecyclebas fire lifecycl event firelifecycleev lifecycl ba lifecycleba java apach catalina core standard context standardcontext start intern startintern standard contex standardcontex java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig va apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig ava apach catalina startup host config hostconfig deploy app deployapp host config hostconfig java apach catalina startup host config hostconfig check host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support esupport java apach catalina util lifecycl base lifecyclebas fire lifecycl event firelifecycleev lifecycl ba lifecycleba java apach catalina core contain base containerbas background process backgroundprocess contain ba containerba java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor rocess child rocesschildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor rocess child rocesschildren contain base containerbas java apach catalina core contain base containerbas contain background processor containerbackgroundprocessor contain base containerbas java java lang thread run thread java would expect applic avail uri seem list method dir context connect dircontexturlconnect java method assum context name charact see develop note block ad els condit seem solv problem tri string file get geturl get file getfil form hostnam contextpath file name contextpath empti otherwis form hostnam file name strip hostnam contextpath int start context instanceof proxi dir context proxydircontext equal proxi dir context proxydircontext context get context path getcontextpath start file index of indexof els context instanceof proxi dir context proxydircontext start length proxi dir context proxydircontext context get host name gethostnam length proxi dir context proxydircontext context get context path getcontextpath length seem like tomcat code tomcat handl contextpath like sampl one cannot start file index of indexof file index of indexof els start file index of indexof file index of indexof name enumer namingenumer name class pair nameclasspair enumer context list file substr start enumer ha more element hasmoreel name class pair nameclasspair ncp enumer next element nextel result add element addel ncp get name getnam catch name except namingexcept","""java/org/apache/naming/resources/DirContextURLConnection.java""","4","4","4","2","22","2","15","4","1","0","0","14","14","14","7","14","0","0","1","13","467","97","258","93","141","114","113","175","71","104","10","10","11","8","5","0","65","65","67","40","regression"
"51650","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51650 Code clean-up","Bug 51650  possible nullpointer exception in RequestUtil.parseParameters","possibl nullpoint except request util requestutil pars paramet parseparamet","","","""java/org/apache/catalina/util/RequestUtil.java""","4","4","5","2","29","2","16","11","1","13","2","13","13","0","0","13","0","2","0","11","455","59","224","49","159","175","106","160","46","114","12","12","13","10","4","1","59","53","66","28","trivial"
"51654","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51654 Log an error message if an appBase is specified that is not a directory and disable automatic deployment to prevent subsequent errors.","Bug 51654  NullPointerException in startup (org.apache.catalina.startup.HostConfig.filterAppPaths) due to missing app base","null pointer except nullpointerexcept startup apach catalina startup host config hostconfig filter app path filterapppath due miss app base","A hard-to-diagnose NullPointerException at startup which can be bettered with an appropriate error message:

INFO: Starting Servlet Engine: Apache Tomcat/7.0.19
java.lang.NullPointerException
at org.apache.catalina.startup.HostConfig.filterAppPaths(HostConfig.java:493)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:466)
at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1322)
at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)

Ok, what's this about?

In ""protected String[] filterAppPaths(String[] unfilteredAppPaths)""
the exception is raised at

  for (String appPath : unfilteredAppPaths)

Which means the ""unfilteredAppPaths"" passed in is null. filterAppPaths does not check for that (shouldn't there be an assertion at least)

The problems comes from ""deployApps()"":

    protected void deployApps() {

        File appBase = appBase();
        File configBase = configBase();
        String[] filteredAppPaths = filterAppPaths(appBase.list()); <----
        // Deploy XML descriptors from configBase
        deployDescriptors(configBase, configBase.list());
        // Deploy WARs, and loop if additional descriptors are found
        deployWARs(appBase, filteredAppPaths);
        // Deploy expanded folders
        deployDirectories(appBase, filteredAppPaths);
        
    }

Where ""appBase.list()"" returns null. This must be because ""appBase"" does not actually denote a directory (A-HA!)

Indeed, the server.xml points to a nonexisting appBase.

Suggesting to add a check to ""deployApps"":

    protected void deployApps() {

        File appBase = appBase();
        File configBase = configBase();

        if (!appBase.exists() || appBase.list()==null) {
            throw new IllegalArgumentException(""The appBase "" + appBase + "" does not exist or cannot be listed"");
        }

        String[] filteredAppPaths = filterAppPaths(appBase.list()); <----
        // Deploy XML descriptors from configBase
        deployDescriptors(configBase, configBase.list());
        // Deploy WARs, and loop if additional descriptors are found
        deployWARs(appBase, filteredAppPaths);
        // Deploy expanded folders
        deployDirectories(appBase, filteredAppPaths);
        
    }

This probably violates some I18N requirement though.","hard to diagnos hardtodiagnos null pointer except nullpointerexcept startup better appropri error messag info start servlet engin apach tomcat java lang null pointer except nullpointerexcept apach catalina startup host config hostconfig filter app path filterapppath host config hostconfig java apach catalina startup host config hostconfig deploy app deployapp host config hostconfig java apach catalina startup host config hostconfig start host config hostconfig java apach catalina startup host config hostconfig lifecycl event lifecycleev host config hostconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina util lifecycl base lifecyclebas fire lifecycl event firelifecycleev lifecycl base lifecyclebas java ok protect string filter app path filterapppath string unfilt app path unfilteredapppath except rais string app path apppath unfilt app path unfilteredapppath mean unfilt app path unfilteredapppath pass null filter app path filterapppath check shouldn assert least problem come deploy app deployapp protect void deploy app deployapp file app base appbas app base appbas file config base configbas config base configbas string filter app path filteredapppath filter app path filterapppath app base appbas list deploy xml descriptor config base configbas deploy descriptor deploydescriptor config base configbas config base configbas list deploy war loop addit descriptor found deploy deploywar app base appbas filter app path filteredapppath deploy expand folder deploy directori deploydirectori app base appbas filter app path filteredapppath app base appbas list return null must app base appbas actual denot directori inde server xml point nonexist app base appbas suggest add check deploy app deployapp protect void deploy app deployapp file app base appbas app base appbas file config base configbas config base configbas app base appbas exist app base appbas list null throw new illeg argument except illegalargumentexcept app base appbas app base appbas exist cannot list string filter app path filteredapppath filter app path filterapppath app base appbas list deploy xml descriptor config base configbas deploy descriptor deploydescriptor config base configbas config base configbas list deploy war loop addit descriptor found deploy deploywar app base appbas filter app path filteredapppath deploy expand folder deploy directori deploydirectori app base appbas filter app path filteredapppath probabl violat i18 i18n requir though","""java/org/apache/catalina/startup/HostConfig.java""","4","4","5","2","28","2","20","5","2","1","3","41","41","40","16","41","0","1","17","23","1476","227","925","206","657","324","441","646","200","446","31","31","39","12","7","0","193","193","220","86","normal"
"51658","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51658 Fix copy/paste error that could trigger an NPE. Based on a suggestion by Felix Schumacher","Bug 51658  Potential NPE in CoyoteAdapter.log","potenti npe coyot adapt coyoteadapt log","","","""java/org/apache/catalina/connector/CoyoteAdapter.java""","10","10","12","4","70","6","49","13","1","3","7","15","15","12","1","15","0","0","7","8","1212","165","808","161","596","239","420","579","144","435","34","34","35","17","6","0","159","159","191","60","trivial"
"51687","32","Christopher Schultz","Fixed bug #51687: Improve JreMemoryLeakPreventionListener against leak caused by sun.java2d.Disposer - Added (optional) protection against sun.java2d.Disposer thread pinning a WebappClassLoader into memory in the JreMemoryLeakPreventionListener.","Bug 51687  Improve JreMemoryLeakPreventionListener against leak caused by sun.java2d.Disposer","improv jre memori leak prevent listen jrememoryleakpreventionlisten leak caus sun java2d dispos","The sun.java2d.Disposer class, when loaded, starts an endless daemon thread that can inherit the WebappClassLoader as its context loader. This will cause a leak when the webapp is unloaded.

It would be useful if JreMemoryLeakPreventionListener could load this class to prevent the leak.","sun java2d dispos class load start endless daemon thread inherit webapp class loader webappclassload context loader caus leak webapp unload would use jre memori leak prevent listen jrememoryleakpreventionlisten could load class prevent leak","""java/org/apache/catalina/core/JreMemoryLeakPreventionListener.java""","2","2","2","1","12","0","8","3","1","0","2","21","21","21","10","21","0","0","0","21","403","33","203","66","130","168","85","127","59","68","31","31","31","1","5","1","51","51","51","21","null"
"51688","5","Konstantin Kolinko","Forward-port r1159673 and r1159680 from tc7.0.x Fixes http://issues.apache.org/bugzilla/show_bug.cgi?id=51688 JreMemoryLeakPreventionListener now protects against AWT thread creation. (schultz)","Bug 51688  JreMemoryLeakPreventionListener should protect against AWT thread creation","jre memori leak prevent listen jrememoryleakpreventionlisten protect awt thread creation","Any webapp that calls java.awt.Toolkit.getDefaultToolkit will launch a new thread (AWT-Windows, AWT-XAWT, etc.) which will capture the ContextClassLoader, pinning the webapp in memory after an undeploy/redeploy.

A simple addition to JreMemoryLeakPreventionListener can alleviate this condition.","webapp call java awt toolkit get default toolkit getdefaulttoolkit launch new thread awt window awt xawt etc captur context class loader contextclassload pin webapp memori undeploy redeploy simpl addit jre memori leak prevent listen jrememoryleakpreventionlisten allevi condit","""java/org/apache/catalina/core/JreMemoryLeakPreventionListener.java""","2","2","2","1","12","0","8","3","1","0","2","19","19","19","9","19","0","0","0","19","385","31","195","63","125","160","81","120","56","64","30","30","30","1","5","1","48","48","48","19","enhancement"
"51698","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51698 Fix CVE-2011-3190 Prevent AJP request forgery via unread request body packet","Bug 51698  ajp CPing/Forward-Request packet forgery, is a design decision? or a security vulnerability?","ajp ping cping forward request packet forgeri design decis secur vulner","","","""java/org/apache/coyote/ajp/AbstractAjpProcessor.java""","5","5","6","2","34","3","25","5","3","0","5","22","26","26","24","26","0","0","11","15","1091","188","659","161","494","247","381","497","151","346","33","33","37","12","5","0","127","115","137","49","normal"
"51698","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51698 Fix CVE-2011-3190 Prevent AJP request forgery via unread request body packet","Bug 51698  ajp CPing/Forward-Request packet forgery, is a design decision? or a security vulnerability?","ajp ping cping forward request packet forgeri design decis secur vulner","","","""java/org/apache/coyote/ajp/AbstractAjpProcessor.java""","5","5","6","2","34","3","25","5","3","0","5","22","26","26","24","26","0","0","11","15","1091","188","659","161","494","247","381","497","151","346","33","33","37","12","5","0","127","115","137","49","normal"
"51698","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51698 Fix CVE-2011-3190 Prevent AJP request forgery via unread request body packet","Bug 51698  ajp CPing/Forward-Request packet forgery, is a design decision? or a security vulnerability?","ajp ping cping forward request packet forgeri design decis secur vulner","","","""java/org/apache/coyote/ajp/AjpAprProcessor.java""","5","5","5","3","33","3","23","6","1","0","1","10","10","10","3","10","0","0","6","4","443","74","261","53","172","108","126","178","41","137","20","20","23","10","4","0","53","53","59","33","normal"
"51698","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51698 Fix CVE-2011-3190 Prevent AJP request forgery via unread request body packet","Bug 51698  ajp CPing/Forward-Request packet forgery, is a design decision? or a security vulnerability?","ajp ping cping forward request packet forgeri design decis secur vulner","","","""java/org/apache/coyote/ajp/AjpNioProcessor.java""","6","6","6","3","37","3","27","5","1","0","1","9","9","9","2","9","0","1","5","3","430","67","277","62","189","86","142","199","52","147","23","23","26","10","4","0","57","57","61","31","normal"
"51698","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51698 Fix CVE-2011-3190 Prevent AJP request forgery via unread request body packet","Bug 51698  ajp CPing/Forward-Request packet forgery, is a design decision? or a security vulnerability?","ajp ping cping forward request packet forgeri design decis secur vulner","","","""java/org/apache/coyote/ajp/AbstractAjpProcessor.java""","5","5","5","2","30","2","21","6","1","0","1","9","9","9","3","9","0","0","5","4","381","59","222","49","142","100","111","156","39","117","23","23","27","8","4","0","46","46","50","24","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""java/org/apache/catalina/valves/AccessLogValve.java""","2","2","2","1","12","0","9","2","31","4","20","97","96","94","56","98","0","11","11","76","2036","259","1146","346","660","632","509","764","291","473","21","13","21","4","4","1","249","221","269","108","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""java/org/apache/catalina/servlets/CGIServlet.java""","4","4","5","1","45","4","27","14","5","0","8","32","32","32","26","32","1","3","24","4","1915","242","940","220","699","744","513","661","196","465","28","28","31","7","5","1","152","147","177","45","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""java/org/apache/catalina/startup/ExpandWar.java""","6","6","6","1","41","2","28","10","1","8","2","8","8","0","0","8","0","1","0","7","405","41","252","68","170","112","121","171","65","106","14","14","15","5","4","0","48","48","52","14","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""java/org/apache/juli/FileHandler.java""","3","3","4","2","23","2","18","3","1","0","0","10","10","10","8","10","0","2","3","5","404","70","213","62","145","122","114","153","57","96","11","11","12","5","4","1","39","39","42","21","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""java/org/apache/catalina/session/FileStore.java""","3","3","3","1","24","2","15","6","1","0","4","13","13","13","2","13","0","2","0","11","450","84","229","77","140","137","110","160","67","93","15","15","15","5","3","1","48","48","50","21","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""java/org/apache/catalina/startup/HostConfig.java""","4","4","5","2","29","2","21","5","2","1","3","40","40","39","15","40","0","1","16","23","1460","221","922","204","656","317","439","643","198","445","31","31","39","12","7","0","192","192","219","85","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""java/org/apache/catalina/manager/host/HostManagerServlet.java""","5","5","6","3","38","3","26","7","1","0","2","14","14","14","6","14","0","0","9","5","729","114","423","111","288","192","199","282","90","192","22","22","25","11","4","0","82","82","89","43","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""java/org/apache/catalina/manager/host/HostManagerServlet.java""","5","5","6","3","38","3","26","7","1","0","2","14","14","14","6","14","0","0","9","5","729","114","423","111","288","192","199","282","90","192","22","22","25","11","4","0","82","82","89","43","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""java/org/apache/jasper/JspCompilationContext.java""","2","2","2","1","12","0","9","2","1","2","1","52","52","50","27","52","0","0","6","46","803","94","542","149","309","168","244","368","136","232","13","11","17","9","6","0","130","128","139","66","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""java/org/apache/catalina/manager/ManagerServlet.java""","6","6","7","2","40","3","30","6","1","3","2","33","33","30","12","33","0","0","25","8","1658","215","1062","238","775","382","495","713","202","511","21","21","30","9","5","0","212","212","241","94","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","7","0","3","308","308","308","126","308","0","11","10","287","6530","1300","3368","1032","2031","1867","1494","2294","855","1439","54","54","69","9","5","1","703","703","765","400","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""test/org/apache/catalina/core/TestAsyncContextImpl.java""","1","1","1","1","14","1","11","1","24","0","25","73","73","73","14","73","0","4","13","56","1259","258","899","384","561","116","501","625","293","332","9","9","11","1","2","0","110","110","115","73","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""test/org/apache/catalina/connector/TestCoyoteAdapter.java""","1","1","1","1","6","0","5","0","2","0","1","16","16","16","0","16","0","3","1","12","180","37","120","64","50","26","63","83","47","36","2","2","3","1","1","0","18","18","19","16","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""test/org/apache/catalina/servlets/TestDefaultServlet.java""","1","1","1","1","39","6","29","8","2","1","0","6","6","5","0","6","0","0","0","6","300","49","208","71","157","66","128","141","58","83","2","2","2","1","1","0","8","8","8","6","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""test/org/apache/catalina/core/TestStandardContext.java""","1","1","1","1","12","1","9","2","15","0","9","31","31","31","6","31","0","4","8","19","600","127","402","179","214","89","207","262","134","128","3","3","7","3","2","0","41","41","48","33","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""test/org/apache/catalina/core/TestStandardContext.java""","1","1","1","1","12","1","9","2","15","0","9","31","31","31","6","31","0","4","8","19","600","127","402","179","214","89","207","262","134","128","3","3","7","3","2","0","41","41","48","33","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""test/org/apache/catalina/startup/TomcatBaseTest.java""","2","2","2","1","15","0","12","2","2","7","4","17","17","10","3","17","0","0","2","15","361","43","255","95","144","63","126","180","83","97","13","13","13","1","4","0","45","45","48","17","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","5","2","31","3","21","6","4","1","8","88","88","87","36","88","3","13","19","53","3384","535","2024","467","1401","832","925","1401","410","991","43","43","49","28","10","0","485","485","524","212","normal"
"51704","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51704 Make calls to File.mkdirs() more robust and handle errors in a few places where they were ignored and should not have been.","Bug 51704  Dubious use of mkdirs() return code in juli FileHandler","dubiou use mkdir return code juli file handler filehandl","","","""java/org/apache/catalina/loader/WebappLoader.java""","3","3","4","1","23","3","15","4","1","0","4","39","39","39","11","39","0","7","4","28","1210","254","681","218","457","276","340","490","184","306","28","28","29","12","5","0","151","151","157","76","normal"
"51712","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51712 Ensure cache control headers are sent even if request is secure. Patch provided by Michael Zampani","Bug 51712  Regression in cache-control headers for requests with security-constraints","regress cach control cachecontrol header request secur constraint securityconstraint","","","""java/org/apache/catalina/authenticator/AuthenticatorBase.java""","3","3","3","1","20","2","11","6","1","0","6","29","31","31","11","31","0","0","6","25","866","150","398","128","234","318","182","274","105","169","35","35","45","10","5","1","92","92","106","44","regression"
"51713","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51713 Improve message that is logged if there is a typo in the value of protocol in a <Connector> element.","Bug 51713  Bad Connector protocol causes NullPointerException when using Executor","bad connector protocol caus null pointer except nullpointerexcept use executor","Under the following configuration, an NPE is thrown because _setExecutor() calls con.getProtocolHandler().getClass() when the protocol handler is null.

It would be nice to report a bad configuration instead of suffering an NPE.

server.xml:

    <Executor name=""tomcatThreadPool"" namePrefix=""catalina-exec-""
        maxThreads=""150"" minSpareThreads=""4""/>

    <Connector port=""12345""
               redirectPort=""443"" protocol=""HTTP""
               secure=""true"" scheme=""https"" proxyPort=""80""
               URIEncoding=""UTF-8"" executor=""tomcatThreadPool"" />

catalina.out:

Aug 23, 2011 5:18:30 PM org.apache.catalina.connector.Connector <init>
SEVERE: Protocol handler instantiation failed
Aug 23, 2011 5:18:30 PM org.apache.tomcat.util.digester.Digester startElement
SEVERE: Begin event threw exception
java.lang.NullPointerException
        at org.apache.catalina.startup.ConnectorCreateRule._setExecutor(ConnectorCreateRule.java:69)
        at org.apache.catalina.startup.ConnectorCreateRule.begin(ConnectorCreateRule.java:63)
        at org.apache.tomcat.util.digester.Digester.startElement(Digester.java:1276)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:501)
        at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:179)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1343)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2755)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
        at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:555)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:596)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:449)


Aug 23, 2011 5:18:30 PM org.apache.catalina.startup.Catalina load
WARNING: Catalina.start using conf/server.xml: Error at (104, 66) : null
Aug 23, 2011 5:18:30 PM org.apache.catalina.connector.Connector <init>
SEVERE: Protocol handler instantiation failed
Aug 23, 2011 5:18:30 PM org.apache.tomcat.util.digester.Digester startElement
SEVERE: Begin event threw exception
java.lang.NullPointerException
        at org.apache.catalina.startup.ConnectorCreateRule._setExecutor(ConnectorCreateRule.java:69)
        at org.apache.catalina.startup.ConnectorCreateRule.begin(ConnectorCreateRule.java:63)
        at org.apache.tomcat.util.digester.Digester.startElement(Digester.java:1276)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:501)
        at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:179)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1343)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2755)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
        at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:555)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:609)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Aug 23, 2011 5:18:31 PM org.apache.catalina.startup.Catalina load
WARNING: Catalina.start using conf/server.xml: Error at (104, 66) : null
Aug 23, 2011 5:18:31 PM org.apache.catalina.startup.Catalina start
SEVERE: Cannot start server. Server instance is not configured.","follow configur npe thrown set executor setexecutor call get protocol handler getprotocolhandl get class getclass protocol handler null would nice report bad configur instead suffer npe server xml executor name tomcat thread pool tomcatthreadpool name prefix nameprefix catalina exec catalinaexec max thread maxthread min spare thread minsparethread connector port redirect port redirectport protocol http secur true scheme http proxi port proxyport encod uriencod utf executor tomcat thread pool tomcatthreadpool catalina aug pm apach catalina connector connector init sever protocol handler instanti fail aug pm apach tomcat util digest digest start element startel sever begin event threw except java lang null pointer except nullpointerexcept apach catalina startup connector creat rule connectorcreaterul set executor setexecutor connector creat rule connectorcreaterul java apach catalina startup connector creat rule connectorcreaterul begin connector creat rule connectorcreaterul java apach tomcat util digest digest start element startel digest java sun apach xerc intern parser abstract parser abstractsaxpars start element startel abstract parser abstractsaxpars java sun apach xerc intern parser abstract document parser abstractxmldocumentpars empti element emptyel abstract document parser abstractxmldocumentpars java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl scan start element scanstartel document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl fragment content driver fragmentcontentdriv next document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern impl document scanner impl xmldocumentscannerimpl next document scanner impl xmldocumentscannerimpl java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl scan document scandocu document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern parser l11 configur xml11configur pars l11 configur xml11configur java sun apach xerc intern parser l11 configur xml11configur pars l11 configur xml11configur java sun apach xerc intern parser parser xmlparser pars parser xmlparser java sun apach xerc intern parser abstract parser abstractsaxpars pars abstract parser abstractsaxpars java sun apach xerc intern jaxp parser impl saxparserimpl parser jaxpsaxpars pars parser impl saxparserimpl java apach tomcat util digest digest pars digest java apach catalina startup catalina load catalina java apach catalina startup catalina load catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap load bootstrap java apach catalina startup bootstrap main bootstrap java aug pm apach catalina startup catalina load warn catalina start use conf server xml error null aug pm apach catalina connector connector init sever protocol handler instanti fail aug pm apach tomcat util digest digest start element startel sever begin event threw except java lang null pointer except nullpointerexcept apach catalina startup connector creat rule connectorcreaterul set executor setexecutor connector creat rule connectorcreaterul java apach catalina startup connector creat rule connectorcreaterul begin connector creat rule connectorcreaterul java apach tomcat util digest digest start element startel digest java sun apach xerc intern parser abstract parser abstractsaxpars start element startel abstract parser abstractsaxpars java sun apach xerc intern parser abstract document parser abstractxmldocumentpars empti element emptyel abstract document parser abstractxmldocumentpars java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl scan start element scanstartel document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl fragment content driver fragmentcontentdriv next document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern impl document scanner impl xmldocumentscannerimpl next document scanner impl xmldocumentscannerimpl java sun apach xerc intern impl document fragment scanner impl xmldocumentfragmentscannerimpl scan document scandocu document fragment scanner impl xmldocumentfragmentscannerimpl java sun apach xerc intern parser l11 configur xml11configur pars l11 configur xml11configur java sun apach xerc intern parser l11 configur xml11configur pars l11 configur xml11configur java sun apach xerc intern parser parser xmlparser pars parser xmlparser java sun apach xerc intern parser abstract parser abstractsaxpars pars abstract parser abstractsaxpars java sun apach xerc intern jaxp parser impl saxparserimpl parser jaxpsaxpars pars parser impl saxparserimpl java apach tomcat util digest digest pars digest java apach catalina startup catalina load catalina java apach catalina startup catalina start catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap start bootstrap java apach catalina startup bootstrap main bootstrap java aug pm apach catalina startup catalina load warn catalina start use conf server xml error null aug pm apach catalina startup catalina start sever cannot start server server instanc configur","""java/org/apache/catalina/connector/Connector.java""","1","1","1","1","12","1","5","4","1","0","5","61","61","61","23","61","0","0","8","53","1024","280","406","133","229","338","185","275","120","155","8","8","8","3","2","1","89","89","92","63","minor"
"51736","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51736. Make rpcTimeout configurable in BackupManager.","Bug 51736  Make rpcTimeout configurable in BackupManager.","make rpc timeout rpctimeout configur backup manag backupmanag","Default rpcTimeout that BackupManager sets to AbstractReplicatedMap is 15000 msec.
This is not configurable.

When receiving MapMessage.MSG_START (and after a new member is added), 
publishEntryInfo is called for all sessions where primary and backup node are not included. 
And, the backup node is set to the session.

When only one Tomcat starts in cluster, publishEntryInfo will be called for all sessions. 
As a result, the RPC message has the possibility of the timeout. 

When acquiring session from restarting Tomcat, 
warning of ""Unable to retrieve remote object for key:XXX"" is logged.
And the session cannot be continued. 

I make rpcTimeout configurable in BackupManager.
Additionally, if RPC message timeouted in AbstractReplicatedMap#broadcast, add warning message.

Best Regards.","default rpc timeout rpctimeout backup manag backupmanag set abstract replic map abstractreplicatedmap msec configur receiv map messag mapmessag msg start new member ad publish entri info publishentryinfo call session primari backup node includ backup node set session one tomcat start cluster publish entri info publishentryinfo call session result rpc messag possibl timeout acquir session restart tomcat warn unabl retriev remot object key xxx log session cannot continu make rpc timeout rpctimeout configur backup manag backupmanag addit rpc messag timeout abstract replic map abstractreplicatedmap broadcast add warn messag best regard","""java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java""","2","2","3","1","10","0","9","1","4","0","16","109","112","112","29","112","0","1","10","101","1517","175","1108","346","683","257","572","852","310","542","20","20","25","7","5","0","283","274","329","143","enhancement"
"51736","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51736. Make rpcTimeout configurable in BackupManager.","Bug 51736  Make rpcTimeout configurable in BackupManager.","make rpc timeout rpctimeout configur backup manag backupmanag","Default rpcTimeout that BackupManager sets to AbstractReplicatedMap is 15000 msec.
This is not configurable.

When receiving MapMessage.MSG_START (and after a new member is added), 
publishEntryInfo is called for all sessions where primary and backup node are not included. 
And, the backup node is set to the session.

When only one Tomcat starts in cluster, publishEntryInfo will be called for all sessions. 
As a result, the RPC message has the possibility of the timeout. 

When acquiring session from restarting Tomcat, 
warning of ""Unable to retrieve remote object for key:XXX"" is logged.
And the session cannot be continued. 

I make rpcTimeout configurable in BackupManager.
Additionally, if RPC message timeouted in AbstractReplicatedMap#broadcast, add warning message.

Best Regards.","default rpc timeout rpctimeout backup manag backupmanag set abstract replic map abstractreplicatedmap msec configur receiv map messag mapmessag msg start new member ad publish entri info publishentryinfo call session primari backup node includ backup node set session one tomcat start cluster publish entri info publishentryinfo call session result rpc messag possibl timeout acquir session restart tomcat warn unabl retriev remot object key xxx log session cannot continu make rpc timeout rpctimeout configur backup manag backupmanag addit rpc messag timeout abstract replic map abstractreplicatedmap broadcast add warn messag best regard","""java/org/apache/catalina/ha/session/BackupManager.java""","1","1","1","1","6","0","5","1","1","0","2","23","23","23","5","23","0","0","2","21","276","44","165","78","73","69","80","113","59","54","3","3","3","1","1","0","31","31","32","23","enhancement"
"51739","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51739 Set the method when using a landing page","Bug 51739  If landingpage is a XHTML (JSF/CDI), nullpointer exception.","landingpag xhtml jsf cdi nullpoint except","","","""java/org/apache/catalina/authenticator/FormAuthenticator.java""","5","5","6","2","40","3","27","9","1","0","2","13","13","13","2","13","0","0","7","6","650","98","389","120","280","163","205","281","96","185","34","34","36","14","4","0","75","75","82","30","minor"
"51794","4","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=51794 Fix race condition in selector potentially causing a delay in select operations","Bug 51794  Race condition in NioEndpoint$Poller causes socket to not be read until selectorTimeout","race condit nio endpoint nioendpoint poller caus socket read selector timeout selectortimeout","I'm seeing an occasional race condition that happens between NioEndpoint$Poller#run and Http11NioProtocol finishing an event.

What happens is that there is a race condition upon waking up the Selector that can cause a SelectionKey to not be marked with InterestOps.READ as soon as it could.  The race is on Poller.wakeupCounter.  These steps can occur which causes my SelectionKey to not have its interest ops reset soon and the Selector to not have wakeup() called on it.

1. Poller0 - Starts processing its run loop and calls events().
2. Poller0 - Checks the wakeupCounter.get() > 0 which evaluates to false (wakeupCounter is 0).
3. Worker1 - Finishes an event and calls in to Poller#addEvent
4. Worker1 - Enqueues the PollerEvent that will reset the interest ops.
5. Worker1 - Calls wakeupCounter.incrementAndGet to increment and get wakeupCounter to 1.  This fails the check to call selector.wakeup();
6. Poller0 - Calls wakeupCounter.set(-1)
7. Poller0 - Calls selector.select(selectorTimeout) and blocks for either the full time out or until another unrelated SelectionKey is polled.
8. Poller0 - Ultimately gets around to calling events() again which now resets the interest ops for the SelectionKey that was processed by Worker1.

The simple fix for this is to change this code:
                            if (wakeupCounter.get() > 0) {
                                //if we are here, means we have other stuff to do
                                //do a non blocking select
                                keyCount = selector.selectNow();
                            } else {
                                wakeupCounter.set(-1);
                                keyCount = selector.select(selectorTimeout);
                            }

to this 
                            if (wakeupCounter.getAndSet(-1) > 0) {
                                //if we are here, means we have other stuff to do
                                //do a non blocking select
                                keyCount = selector.selectNow();
                            } else {
                                keyCount = selector.select(selectorTimeout);
                            }","see occasion race condit happen nio endpoint nioendpoint poller run http11 nio protocol http11nioprotocol finish event happen race condit upon wake selector caus select key selectionkey mark interest op interestop read soon could race poller wakeup counter wakeupcount step occur caus select key selectionkey interest op reset soon selector wakeup call poller0 start process run loop call event poller0 check wakeup counter wakeupcount get evalu fals wakeup counter wakeupcount worker1 finish event call poller add event addev worker1 enqueu poller event pollerev reset interest op worker1 call wakeup counter wakeupcount increment and get incrementandget increment get wakeup counter wakeupcount fail check call selector wakeup poller0 call wakeup counter wakeupcount set poller0 call selector select selector timeout selectortimeout block either full time anoth unrel select key selectionkey poll poller0 ultim get around call event reset interest op select key selectionkey process worker1 simpl fix chang code wakeup counter wakeupcount get mean stuff block select key count keycount selector select now selectnow els wakeup counter wakeupcount set key count keycount selector select selector timeout selectortimeout wakeup counter wakeupcount get and set getandset mean stuff block select key count keycount selector select now selectnow els key count keycount selector select selector timeout selectortimeout","""java/org/apache/tomcat/util/net/NioEndpoint.java""","2","2","3","1","10","0","8","1","13","0","8","118","122","122","52","122","0","0","15","107","1640","180","1207","314","847","283","648","973","314","659","25","25","29","8","7","0","337","337","384","143","normal"
"51811","3","Rainer Jung","BZ 51811: Fix typo in attribute name (sslImplementationName instead of  sslImplemenationName).","Bug 51811  SSL configuration property name illegal","ssl configur properti name illeg","","","""java/org/apache/coyote/http11/AbstractHttp11JsseProtocol.java""","1","1","1","1","1","0","1","0","1","0","0","43","43","43","2","43","0","0","0","43","121","26","76","50","46","19","48","92","48","44","1","1","1","1","0","0","43","43","43","43","normal"
"51811","3","Rainer Jung","BZ 51811: Fix typo in attribute name (sslImplementationName instead of  sslImplemenationName).","Bug 51811  SSL configuration property name illegal","ssl configur properti name illeg","","","""test/org/apache/tomcat/util/net/TestCustomSsl.java""","3","3","3","1","26","4","20","2","1","0","0","4","4","4","0","4","0","1","0","3","156","27","101","36","61","31","56","70","29","41","10","10","10","1","2","0","14","14","14","4","normal"
"51852","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51852 Correct 2 issues in varargs handling  - Incorrectly constructed varargs arguments (resulting in ArrayIndexOutOfBoundsExceptions)  - Incorrectly detected matching varargs methods Patch (with a test case!) provided by Matt Benson","Bug 51852  BeanELResolver varargs handling is broken in multiple ways","bean resolv beanelresolv vararg handl broken multipl way","","","""java/javax/el/BeanELResolver.java""","3","3","3","1","13","0","12","0","5","1","2","26","26","25","12","26","0","6","0","20","481","62","392","110","228","28","170","254","96","158","18","18","20","8","3","0","82","82","92","43","normal"
"51860","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51860 Fix issues when using NIO, SSL and a custom SSLImplementation. Based on a suggestion by Roman Tsirulnikov.","Bug 51860  HTTP/SSL with NIO won't work","http ssl nio won work","","","""java/org/apache/tomcat/util/net/jsse/JSSEKeyManager.java""","1","1","1","1","14","0","3","10","1","0","0","7","7","7","2","7","0","0","0","7","151","12","40","24","8","99","16","24","16","8","1","1","1","1","0","2","7","7","7","7","normal"
"51872","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51872 Ensure access log always logs the correct remote IP. Ensure requests with multiple errors do not result in multiple access log entries.","Bug 51872  request.getRemoteAddr() sometimes returning IP address from the previous request","request get remot addr getremoteaddr sometim return ip address previou request","request.getRemoteAddr() sometimes returning IP address from the previous request.  We have compared the IP address returned from the getRemoteHost() and from the headers with getRemoteAddr() and getRemoteAddr is returning wrong IP address.  We believe that this may come from the ""pooled"" request objects where it is sometimes sees the previous value of the remote IP.  The problem doesn't occur all the time. 

We are heavily relying on the getRemoteAddr to verify the remote client for some of our authentication.  Can this be fixed?

2011-09-22 16:49:55,713 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve invoked
2011-09-22 16:49:55,826 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getInfo(): org.apache.coyote.catalina.CoyoteRequest/1.0
2011-09-22 16:49:56,013 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRemoteAddr(): 98.138.85.230
2011-09-22 16:49:56,014 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRemoteHost(): web120016.mail.ne1.yahoo.com

   [][~]$ nslookup web120016.mail.ne1.yahoo.com
   Server:              10.72.226.8
   Address:     10.72.226.8#53

   Name:        web120016.mail.ne1.yahoo.com
   Address: 98.138.85.143

2011-09-22 16:49:56,014 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRequestedSessionId(): null
2011-09-22 16:49:56,015 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getHeader(): accept:*/* host:ls100.mail.vip.ne1.yahoo.com:4080 content-type:application/x-ypy
yahoo-app-auth:v=1;a=yahoo.mail.acl.yca.lsg-prod;h=98.138.85.143;t=1319282225;
content-length:574
2011-09-22 16:49:56,015 DEBUG [yjava.filter.address.RemoteIPTranslator] THREADID:1262 Got remote address
'98.138.85.230' and port '46663'","request get remot addr getremoteaddr sometim return ip address previou request compar ip address return get remot host getremotehost header get remot addr getremoteaddr get remot addr getremoteaddr return wrong ip address believ may pool request object sometim see previou valu remot ip problem doesn occur time heavili reli get remot addr getremoteaddr verifi remot client authent fix debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv invok debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get info getinfo apach coyot catalina coyot request coyoterequest debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get remot addr getremoteaddr debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get remot host getremotehost web120016 mail ne1 yahoo nslookup web120016 mail ne1 yahoo server address name web120016 mail ne1 yahoo address debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get request session id getrequestedsessionid null debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get header gethead accept host ls100 mail vip ne1 yahoo content type contenttyp applic ypi xypi yahoo app auth yahooappauth yahoo mail acl yca lsg prod lsgprod content length contentlength debug yjava filter address remot translat remoteiptransl threadid got remot address port","""java/org/apache/coyote/ajp/AbstractAjpProcessor.java""","5","5","6","2","34","3","25","5","3","0","5","22","26","26","24","26","0","0","11","15","1096","189","662","161","496","248","382","499","151","348","33","33","37","12","5","0","128","116","139","49","blocker"
"51872","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51872 Ensure access log always logs the correct remote IP. Ensure requests with multiple errors do not result in multiple access log entries.","Bug 51872  request.getRemoteAddr() sometimes returning IP address from the previous request","request get remot addr getremoteaddr sometim return ip address previou request","request.getRemoteAddr() sometimes returning IP address from the previous request.  We have compared the IP address returned from the getRemoteHost() and from the headers with getRemoteAddr() and getRemoteAddr is returning wrong IP address.  We believe that this may come from the ""pooled"" request objects where it is sometimes sees the previous value of the remote IP.  The problem doesn't occur all the time. 

We are heavily relying on the getRemoteAddr to verify the remote client for some of our authentication.  Can this be fixed?

2011-09-22 16:49:55,713 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve invoked
2011-09-22 16:49:55,826 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getInfo(): org.apache.coyote.catalina.CoyoteRequest/1.0
2011-09-22 16:49:56,013 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRemoteAddr(): 98.138.85.230
2011-09-22 16:49:56,014 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRemoteHost(): web120016.mail.ne1.yahoo.com

   [][~]$ nslookup web120016.mail.ne1.yahoo.com
   Server:              10.72.226.8
   Address:     10.72.226.8#53

   Name:        web120016.mail.ne1.yahoo.com
   Address: 98.138.85.143

2011-09-22 16:49:56,014 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRequestedSessionId(): null
2011-09-22 16:49:56,015 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getHeader(): accept:*/* host:ls100.mail.vip.ne1.yahoo.com:4080 content-type:application/x-ypy
yahoo-app-auth:v=1;a=yahoo.mail.acl.yca.lsg-prod;h=98.138.85.143;t=1319282225;
content-length:574
2011-09-22 16:49:56,015 DEBUG [yjava.filter.address.RemoteIPTranslator] THREADID:1262 Got remote address
'98.138.85.230' and port '46663'","request get remot addr getremoteaddr sometim return ip address previou request compar ip address return get remot host getremotehost header get remot addr getremoteaddr get remot addr getremoteaddr return wrong ip address believ may pool request object sometim see previou valu remot ip problem doesn occur time heavili reli get remot addr getremoteaddr verifi remot client authent fix debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv invok debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get info getinfo apach coyot catalina coyot request coyoterequest debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get remot addr getremoteaddr debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get remot host getremotehost web120016 mail ne1 yahoo nslookup web120016 mail ne1 yahoo server address name web120016 mail ne1 yahoo address debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get request session id getrequestedsessionid null debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get header gethead accept host ls100 mail vip ne1 yahoo content type contenttyp applic ypi xypi yahoo app auth yahooappauth yahoo mail acl yca lsg prod lsgprod content length contentlength debug yjava filter address remot translat remoteiptransl threadid got remot address port","""java/org/apache/coyote/ajp/AbstractAjpProcessor.java""","5","5","6","2","34","3","25","5","3","0","5","22","26","26","24","26","0","0","11","15","1096","189","662","161","496","248","382","499","151","348","33","33","37","12","5","0","128","116","139","49","blocker"
"51872","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51872 Ensure access log always logs the correct remote IP. Ensure requests with multiple errors do not result in multiple access log entries.","Bug 51872  request.getRemoteAddr() sometimes returning IP address from the previous request","request get remot addr getremoteaddr sometim return ip address previou request","request.getRemoteAddr() sometimes returning IP address from the previous request.  We have compared the IP address returned from the getRemoteHost() and from the headers with getRemoteAddr() and getRemoteAddr is returning wrong IP address.  We believe that this may come from the ""pooled"" request objects where it is sometimes sees the previous value of the remote IP.  The problem doesn't occur all the time. 

We are heavily relying on the getRemoteAddr to verify the remote client for some of our authentication.  Can this be fixed?

2011-09-22 16:49:55,713 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve invoked
2011-09-22 16:49:55,826 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getInfo(): org.apache.coyote.catalina.CoyoteRequest/1.0
2011-09-22 16:49:56,013 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRemoteAddr(): 98.138.85.230
2011-09-22 16:49:56,014 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRemoteHost(): web120016.mail.ne1.yahoo.com

   [][~]$ nslookup web120016.mail.ne1.yahoo.com
   Server:              10.72.226.8
   Address:     10.72.226.8#53

   Name:        web120016.mail.ne1.yahoo.com
   Address: 98.138.85.143

2011-09-22 16:49:56,014 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRequestedSessionId(): null
2011-09-22 16:49:56,015 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getHeader(): accept:*/* host:ls100.mail.vip.ne1.yahoo.com:4080 content-type:application/x-ypy
yahoo-app-auth:v=1;a=yahoo.mail.acl.yca.lsg-prod;h=98.138.85.143;t=1319282225;
content-length:574
2011-09-22 16:49:56,015 DEBUG [yjava.filter.address.RemoteIPTranslator] THREADID:1262 Got remote address
'98.138.85.230' and port '46663'","request get remot addr getremoteaddr sometim return ip address previou request compar ip address return get remot host getremotehost header get remot addr getremoteaddr get remot addr getremoteaddr return wrong ip address believ may pool request object sometim see previou valu remot ip problem doesn occur time heavili reli get remot addr getremoteaddr verifi remot client authent fix debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv invok debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get info getinfo apach coyot catalina coyot request coyoterequest debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get remot addr getremoteaddr debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get remot host getremotehost web120016 mail ne1 yahoo nslookup web120016 mail ne1 yahoo server address name web120016 mail ne1 yahoo address debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get request session id getrequestedsessionid null debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get header gethead accept host ls100 mail vip ne1 yahoo content type contenttyp applic ypi xypi yahoo app auth yahooappauth yahoo mail acl yca lsg prod lsgprod content length contentlength debug yjava filter address remot translat remoteiptransl threadid got remot address port","""java/org/apache/coyote/http11/AbstractHttp11Processor.java""","5","4","6","2","29","2","20","6","1","0","1","40","55","55","31","55","2","5","19","29","1592","256","913","200","656","434","476","669","194","475","33","33","46","14","4","0","200","198","245","89","blocker"
"51872","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51872 Ensure access log always logs the correct remote IP. Ensure requests with multiple errors do not result in multiple access log entries.","Bug 51872  request.getRemoteAddr() sometimes returning IP address from the previous request","request get remot addr getremoteaddr sometim return ip address previou request","request.getRemoteAddr() sometimes returning IP address from the previous request.  We have compared the IP address returned from the getRemoteHost() and from the headers with getRemoteAddr() and getRemoteAddr is returning wrong IP address.  We believe that this may come from the ""pooled"" request objects where it is sometimes sees the previous value of the remote IP.  The problem doesn't occur all the time. 

We are heavily relying on the getRemoteAddr to verify the remote client for some of our authentication.  Can this be fixed?

2011-09-22 16:49:55,713 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve invoked
2011-09-22 16:49:55,826 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getInfo(): org.apache.coyote.catalina.CoyoteRequest/1.0
2011-09-22 16:49:56,013 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRemoteAddr(): 98.138.85.230
2011-09-22 16:49:56,014 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRemoteHost(): web120016.mail.ne1.yahoo.com

   [][~]$ nslookup web120016.mail.ne1.yahoo.com
   Server:              10.72.226.8
   Address:     10.72.226.8#53

   Name:        web120016.mail.ne1.yahoo.com
   Address: 98.138.85.143

2011-09-22 16:49:56,014 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRequestedSessionId(): null
2011-09-22 16:49:56,015 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getHeader(): accept:*/* host:ls100.mail.vip.ne1.yahoo.com:4080 content-type:application/x-ypy
yahoo-app-auth:v=1;a=yahoo.mail.acl.yca.lsg-prod;h=98.138.85.143;t=1319282225;
content-length:574
2011-09-22 16:49:56,015 DEBUG [yjava.filter.address.RemoteIPTranslator] THREADID:1262 Got remote address
'98.138.85.230' and port '46663'","request get remot addr getremoteaddr sometim return ip address previou request compar ip address return get remot host getremotehost header get remot addr getremoteaddr get remot addr getremoteaddr return wrong ip address believ may pool request object sometim see previou valu remot ip problem doesn occur time heavili reli get remot addr getremoteaddr verifi remot client authent fix debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv invok debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get info getinfo apach coyot catalina coyot request coyoterequest debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get remot addr getremoteaddr debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get remot host getremotehost web120016 mail ne1 yahoo nslookup web120016 mail ne1 yahoo server address name web120016 mail ne1 yahoo address debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get request session id getrequestedsessionid null debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get header gethead accept host ls100 mail vip ne1 yahoo content type contenttyp applic ypi xypi yahoo app auth yahooappauth yahoo mail acl yca lsg prod lsgprod content length contentlength debug yjava filter address remot translat remoteiptransl threadid got remot address port","""java/org/apache/coyote/ajp/AjpAprProcessor.java""","5","5","6","3","34","3","24","6","1","0","1","10","10","10","3","10","0","0","6","4","457","71","276","54","184","110","135","189","42","147","22","22","26","11","4","0","55","55","62","34","blocker"
"51872","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51872 Ensure access log always logs the correct remote IP. Ensure requests with multiple errors do not result in multiple access log entries.","Bug 51872  request.getRemoteAddr() sometimes returning IP address from the previous request","request get remot addr getremoteaddr sometim return ip address previou request","request.getRemoteAddr() sometimes returning IP address from the previous request.  We have compared the IP address returned from the getRemoteHost() and from the headers with getRemoteAddr() and getRemoteAddr is returning wrong IP address.  We believe that this may come from the ""pooled"" request objects where it is sometimes sees the previous value of the remote IP.  The problem doesn't occur all the time. 

We are heavily relying on the getRemoteAddr to verify the remote client for some of our authentication.  Can this be fixed?

2011-09-22 16:49:55,713 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve invoked
2011-09-22 16:49:55,826 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getInfo(): org.apache.coyote.catalina.CoyoteRequest/1.0
2011-09-22 16:49:56,013 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRemoteAddr(): 98.138.85.230
2011-09-22 16:49:56,014 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRemoteHost(): web120016.mail.ne1.yahoo.com

   [][~]$ nslookup web120016.mail.ne1.yahoo.com
   Server:              10.72.226.8
   Address:     10.72.226.8#53

   Name:        web120016.mail.ne1.yahoo.com
   Address: 98.138.85.143

2011-09-22 16:49:56,014 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRequestedSessionId(): null
2011-09-22 16:49:56,015 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getHeader(): accept:*/* host:ls100.mail.vip.ne1.yahoo.com:4080 content-type:application/x-ypy
yahoo-app-auth:v=1;a=yahoo.mail.acl.yca.lsg-prod;h=98.138.85.143;t=1319282225;
content-length:574
2011-09-22 16:49:56,015 DEBUG [yjava.filter.address.RemoteIPTranslator] THREADID:1262 Got remote address
'98.138.85.230' and port '46663'","request get remot addr getremoteaddr sometim return ip address previou request compar ip address return get remot host getremotehost header get remot addr getremoteaddr get remot addr getremoteaddr return wrong ip address believ may pool request object sometim see previou valu remot ip problem doesn occur time heavili reli get remot addr getremoteaddr verifi remot client authent fix debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv invok debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get info getinfo apach coyot catalina coyot request coyoterequest debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get remot addr getremoteaddr debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get remot host getremotehost web120016 mail ne1 yahoo nslookup web120016 mail ne1 yahoo server address name web120016 mail ne1 yahoo address debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get request session id getrequestedsessionid null debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get header gethead accept host ls100 mail vip ne1 yahoo content type contenttyp applic ypi xypi yahoo app auth yahooappauth yahoo mail acl yca lsg prod lsgprod content length contentlength debug yjava filter address remot translat remoteiptransl threadid got remot address port","""java/org/apache/coyote/ajp/AjpNioProcessor.java""","6","6","7","3","38","3","28","6","1","0","1","9","9","9","2","9","0","1","5","3","438","66","285","63","196","87","148","206","53","153","24","24","28","11","4","0","58","58","63","32","blocker"
"51872","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51872 Ensure access log always logs the correct remote IP. Ensure requests with multiple errors do not result in multiple access log entries.","Bug 51872  request.getRemoteAddr() sometimes returning IP address from the previous request","request get remot addr getremoteaddr sometim return ip address previou request","request.getRemoteAddr() sometimes returning IP address from the previous request.  We have compared the IP address returned from the getRemoteHost() and from the headers with getRemoteAddr() and getRemoteAddr is returning wrong IP address.  We believe that this may come from the ""pooled"" request objects where it is sometimes sees the previous value of the remote IP.  The problem doesn't occur all the time. 

We are heavily relying on the getRemoteAddr to verify the remote client for some of our authentication.  Can this be fixed?

2011-09-22 16:49:55,713 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve invoked
2011-09-22 16:49:55,826 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getInfo(): org.apache.coyote.catalina.CoyoteRequest/1.0
2011-09-22 16:49:56,013 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRemoteAddr(): 98.138.85.230
2011-09-22 16:49:56,014 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRemoteHost(): web120016.mail.ne1.yahoo.com

   [][~]$ nslookup web120016.mail.ne1.yahoo.com
   Server:              10.72.226.8
   Address:     10.72.226.8#53

   Name:        web120016.mail.ne1.yahoo.com
   Address: 98.138.85.143

2011-09-22 16:49:56,014 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRequestedSessionId(): null
2011-09-22 16:49:56,015 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getHeader(): accept:*/* host:ls100.mail.vip.ne1.yahoo.com:4080 content-type:application/x-ypy
yahoo-app-auth:v=1;a=yahoo.mail.acl.yca.lsg-prod;h=98.138.85.143;t=1319282225;
content-length:574
2011-09-22 16:49:56,015 DEBUG [yjava.filter.address.RemoteIPTranslator] THREADID:1262 Got remote address
'98.138.85.230' and port '46663'","request get remot addr getremoteaddr sometim return ip address previou request compar ip address return get remot host getremotehost header get remot addr getremoteaddr get remot addr getremoteaddr return wrong ip address believ may pool request object sometim see previou valu remot ip problem doesn occur time heavili reli get remot addr getremoteaddr verifi remot client authent fix debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv invok debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get info getinfo apach coyot catalina coyot request coyoterequest debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get remot addr getremoteaddr debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get remot host getremotehost web120016 mail ne1 yahoo nslookup web120016 mail ne1 yahoo server address name web120016 mail ne1 yahoo address debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get request session id getrequestedsessionid null debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get header gethead accept host ls100 mail vip ne1 yahoo content type contenttyp applic ypi xypi yahoo app auth yahooappauth yahoo mail acl yca lsg prod lsgprod content length contentlength debug yjava filter address remot translat remoteiptransl threadid got remot address port","""java/org/apache/coyote/ajp/AbstractAjpProcessor.java""","5","5","5","2","31","2","22","6","1","0","1","9","9","9","3","9","0","0","5","4","389","58","230","50","149","101","117","163","40","123","24","24","29","9","4","0","47","47","52","25","blocker"
"51872","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51872 Ensure access log always logs the correct remote IP. Ensure requests with multiple errors do not result in multiple access log entries.","Bug 51872  request.getRemoteAddr() sometimes returning IP address from the previous request","request get remot addr getremoteaddr sometim return ip address previou request","request.getRemoteAddr() sometimes returning IP address from the previous request.  We have compared the IP address returned from the getRemoteHost() and from the headers with getRemoteAddr() and getRemoteAddr is returning wrong IP address.  We believe that this may come from the ""pooled"" request objects where it is sometimes sees the previous value of the remote IP.  The problem doesn't occur all the time. 

We are heavily relying on the getRemoteAddr to verify the remote client for some of our authentication.  Can this be fixed?

2011-09-22 16:49:55,713 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve invoked
2011-09-22 16:49:55,826 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getInfo(): org.apache.coyote.catalina.CoyoteRequest/1.0
2011-09-22 16:49:56,013 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRemoteAddr(): 98.138.85.230
2011-09-22 16:49:56,014 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRemoteHost(): web120016.mail.ne1.yahoo.com

   [][~]$ nslookup web120016.mail.ne1.yahoo.com
   Server:              10.72.226.8
   Address:     10.72.226.8#53

   Name:        web120016.mail.ne1.yahoo.com
   Address: 98.138.85.143

2011-09-22 16:49:56,014 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getRequestedSessionId(): null
2011-09-22 16:49:56,015 DEBUG [yjava.tomcat.valves.YahooConnectionValve] THREADID:1262 YahooConnectionValve
request.getHeader(): accept:*/* host:ls100.mail.vip.ne1.yahoo.com:4080 content-type:application/x-ypy
yahoo-app-auth:v=1;a=yahoo.mail.acl.yca.lsg-prod;h=98.138.85.143;t=1319282225;
content-length:574
2011-09-22 16:49:56,015 DEBUG [yjava.filter.address.RemoteIPTranslator] THREADID:1262 Got remote address
'98.138.85.230' and port '46663'","request get remot addr getremoteaddr sometim return ip address previou request compar ip address return get remot host getremotehost header get remot addr getremoteaddr get remot addr getremoteaddr return wrong ip address believ may pool request object sometim see previou valu remot ip problem doesn occur time heavili reli get remot addr getremoteaddr verifi remot client authent fix debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv invok debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get info getinfo apach coyot catalina coyot request coyoterequest debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get remot addr getremoteaddr debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get remot host getremotehost web120016 mail ne1 yahoo nslookup web120016 mail ne1 yahoo server address name web120016 mail ne1 yahoo address debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get request session id getrequestedsessionid null debug yjava tomcat valv yahoo connect valv yahooconnectionvalv threadid yahoo connect valv yahooconnectionvalv request get header gethead accept host ls100 mail vip ne1 yahoo content type contenttyp applic ypi xypi yahoo app auth yahooappauth yahoo mail acl yca lsg prod lsgprod content length contentlength debug yjava filter address remot translat remoteiptransl threadid got remot address port","""java/org/apache/catalina/connector/CoyoteAdapter.java""","10","10","12","4","70","6","49","13","1","3","7","15","15","12","1","15","0","0","7","8","1212","165","808","161","596","239","420","579","144","435","34","34","35","17","6","0","159","159","191","60","blocker"
"51887","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51887 Use an insecure random source for session ID generation during tests for speed. Based on kkolinko's suggestion.","Bug 51887  Speedup sessionid generation when running testsuite","speedup sessionid gener run testsuit","","","""test/org/apache/catalina/startup/TomcatBaseTest.java""","2","2","2","1","16","0","12","2","2","7","4","17","17","10","3","17","0","0","2","15","365","43","256","95","145","66","127","181","83","98","13","13","13","1","4","0","45","45","48","17","enhancement"
"51893","175","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=51893 add notification that the pool has been exhausted","Bug 51893  JMX notification/Exception for empty/exhausted connection pool","jmx notif except empti exhaust connect pool","Currently, if there is an error getting a connection from the pool, a generic SQLException is thrown.  The only way to determine if the problem is a result of the connection pool being exhausted is to catch the SQLException and parse the message (i.e. look for ""Pool empty"" in ex.getMessage()).  Would like to see the following:

1) A subclass of SQLException thrown in the case of an empty pool
2) A JMX notification sent in the case of an empty pool (e.g. [POOL EXHAUSTED])","current error get connect pool gener except sqlexcept thrown way determin problem result connect pool exhaust catch except sqlexcept pars messag look pool empti ex get messag getmessag would like see follow subclass except sqlexcept thrown case empti pool jmx notif sent case empti pool pool exhaust","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","1","1","1","1","4","0","2","0","1","1","7","114","114","113","3","114","0","0","0","114","798","188","473","255","119","137","124","245","148","97","4","4","4","1","2","0","119","119","119","114","normal"
"51893","175","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=51893 add notification that the pool has been exhausted","Bug 51893  JMX notification/Exception for empty/exhausted connection pool","jmx notif except empti exhaust connect pool","Currently, if there is an error getting a connection from the pool, a generic SQLException is thrown.  The only way to determine if the problem is a result of the connection pool being exhausted is to catch the SQLException and parse the message (i.e. look for ""Pool empty"" in ex.getMessage()).  Would like to see the following:

1) A subclass of SQLException thrown in the case of an empty pool
2) A JMX notification sent in the case of an empty pool (e.g. [POOL EXHAUSTED])","current error get connect pool gener except sqlexcept thrown way determin problem result connect pool exhaust catch except sqlexcept pars messag look pool empti ex get messag getmessag would like see follow subclass except sqlexcept thrown case empti pool jmx notif sent case empti pool pool exhaust","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","1","1","1","1","4","0","2","0","1","1","7","114","114","113","3","114","0","0","0","114","798","188","473","255","119","137","124","245","148","97","4","4","4","1","2","0","119","119","119","114","normal"
"51893","175","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=51893 add notification that the pool has been exhausted","Bug 51893  JMX notification/Exception for empty/exhausted connection pool","jmx notif except empti exhaust connect pool","Currently, if there is an error getting a connection from the pool, a generic SQLException is thrown.  The only way to determine if the problem is a result of the connection pool being exhausted is to catch the SQLException and parse the message (i.e. look for ""Pool empty"" in ex.getMessage()).  Would like to see the following:

1) A subclass of SQLException thrown in the case of an empty pool
2) A JMX notification sent in the case of an empty pool (e.g. [POOL EXHAUSTED])","current error get connect pool gener except sqlexcept thrown way determin problem result connect pool exhaust catch except sqlexcept pars messag look pool empti ex get messag getmessag would like see follow subclass except sqlexcept thrown case empti pool jmx notif sent case empti pool pool exhaust","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","4","4","4","1","20","0","14","6","3","6","4","51","51","45","21","51","1","3","17","30","1284","105","800","175","539","411","384","594","172","422","19","19","19","8","6","1","209","209","226","98","normal"
"51893","175","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=51893 add notification that the pool has been exhausted","Bug 51893  JMX notification/Exception for empty/exhausted connection pool","jmx notif except empti exhaust connect pool","Currently, if there is an error getting a connection from the pool, a generic SQLException is thrown.  The only way to determine if the problem is a result of the connection pool being exhausted is to catch the SQLException and parse the message (i.e. look for ""Pool empty"" in ex.getMessage()).  Would like to see the following:

1) A subclass of SQLException thrown in the case of an empty pool
2) A JMX notification sent in the case of an empty pool (e.g. [POOL EXHAUSTED])","current error get connect pool gener except sqlexcept thrown way determin problem result connect pool exhaust catch except sqlexcept pars messag look pool empti ex get messag getmessag would like see follow subclass except sqlexcept thrown case empti pool jmx notif sent case empti pool pool exhaust","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","4","4","4","1","20","0","14","6","3","6","4","51","51","45","21","51","1","3","17","30","1284","105","800","175","539","411","384","594","172","422","19","19","19","8","6","1","209","209","226","98","normal"
"51905","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51905 Skip attempt to shutdown AprEndpoint acceptor threads if the server socket has been already forcefully closed. Reduce waiting timeout from 30s to 10s. I think if things go wrong 10s is enough to wait.","Bug 51905  Infinite loop when shutting down AprEndpoint","infinit loop shut apr endpoint aprendpoint","","","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","15","0","12","2","11","0","1","89","90","90","66","90","1","4","9","76","1893","230","1229","290","847","436","613","937","272","665","40","40","51","11","7","0","299","299","343","131","normal"
"51910","2","Mark Emlyn David Thomas","Merge branch 'bug51910' into trunk","Bug 51910  NPE in comet processing when shutting down Tomcat","npe comet process shut tomcat","","","""java/org/apache/catalina/core/StandardWrapperValve.java""","4","4","5","1","30","1","23","4","1","0","1","15","15","15","5","15","0","1","1","13","558","63","388","83","282","107","180","245","72","173","38","38","46","1","5","0","74","74","86","15","normal"
"51952","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51952 Make inclusion of a response body for redirects optional as it may cause issues and is only SHOULD in RFC2616. See also https://issues.apache.org/bugzilla/show_bug.cgi?id=41718","Bug 51952  IllegalStateException using CompressionFilter with Tomcat 7.0.21/22","illeg state except illegalstateexcept use compress filter compressionfilt tomcat","","","""java/org/apache/catalina/Context.java""","0","0","0","0","0","0","0","0","1","0","5","0","161","161","0","161","2","0","0","159","1395","320","191","190","5","884","185","186","186","0","0","0","0","0","0","5","0","0","0","0","normal"
"51952","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51952 Make inclusion of a response body for redirects optional as it may cause issues and is only SHOULD in RFC2616. See also https://issues.apache.org/bugzilla/show_bug.cgi?id=41718","Bug 51952  IllegalStateException using CompressionFilter with Tomcat 7.0.21/22","illeg state except illegalstateexcept use compress filter compressionfilt tomcat","","","""java/org/apache/catalina/connector/Response.java""","2","2","2","1","16","1","9","5","4","0","3","80","80","80","16","80","0","4","2","74","1729","338","826","244","498","570","365","565","192","373","12","12","19","8","3","1","199","199","231","136","normal"
"51952","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51952 Make inclusion of a response body for redirects optional as it may cause issues and is only SHOULD in RFC2616. See also https://issues.apache.org/bugzilla/show_bug.cgi?id=41718","Bug 51952  IllegalStateException using CompressionFilter with Tomcat 7.0.21/22","illeg state except illegalstateexcept use compress filter compressionfilt tomcat","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","7","0","3","308","308","308","126","308","0","11","10","287","6530","1300","3368","1032","2031","1867","1494","2294","855","1439","54","54","69","9","5","1","703","703","765","400","normal"
"51952","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51952 Make inclusion of a response body for redirects optional as it may cause issues and is only SHOULD in RFC2616. See also https://issues.apache.org/bugzilla/show_bug.cgi?id=41718","Bug 51952  IllegalStateException using CompressionFilter with Tomcat 7.0.21/22","illeg state except illegalstateexcept use compress filter compressionfilt tomcat","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","7","0","3","308","308","308","126","308","0","11","10","287","6530","1300","3368","1032","2031","1867","1494","2294","855","1439","54","54","69","9","5","1","703","703","765","400","normal"
"51956","0","Christopher Schultz","Fixed bug #51956: RemoteAddrFilter uses remote host (not address) in doFilterEvent","Bug 51956  RemoteAddrFilter uses remote host (not address) in doFilterEvent","remot addr filter remoteaddrfilt us remot host address do filter event dofilterev","public void doFilterEvent(CometEvent event, CometFilterChain chain)
            throws IOException, ServletException {
        processCometEvent(event.getHttpServletRequest().getRemoteHost(),
                event, chain);        
    }

Use of getRemoteHost should be getRemoteAddr.","public void do filter event dofilterev comet event cometev event comet filter chain cometfilterchain chain throw except ioexcept servlet except servletexcept process comet event processcometev event get http servlet request gethttpservletrequest get remot host getremotehost event chain use get remot host getremotehost get remot addr getremoteaddr","""java/org/apache/catalina/filters/RemoteAddrFilter.java""","1","1","1","1","12","0","4","8","1","0","1","3","3","3","0","3","0","0","1","2","101","22","29","21","5","50","14","18","15","3","1","1","1","1","0","2","3","3","3","3","normal"
"51972","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=51972 Add support for handling scheme/protocol relative URLs for redirects","Bug 51972  sendRedirect does not support protocol relative URLs","send redirect sendredirect support protocol rel url","","","""java/org/apache/catalina/connector/Response.java""","2","2","2","1","16","1","9","5","4","0","3","80","80","80","16","80","0","3","3","74","1731","338","828","244","499","570","365","566","192","374","12","12","19","8","3","1","200","200","232","136","normal"
"52009","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52009 Fix the NPE if an error occurs during comet processing Add test cases for errors during comet processing Ensure access log entries are made if an error occurs","Bug 52009  NPE exception in org.apache.catalina.connector.CoyoteAdapter.service","npe except apach catalina connector coyot adapt coyoteadapt servic","","","""java/org/apache/catalina/connector/CoyoteAdapter.java""","10","10","12","4","70","6","50","13","1","3","7","15","15","12","1","15","0","0","7","8","1217","164","814","160","594","239","418","576","143","433","34","34","35","17","6","0","158","158","190","60","major"
"52009","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52009 Fix the NPE if an error occurs during comet processing Add test cases for errors during comet processing Ensure access log entries are made if an error occurs","Bug 52009  NPE exception in org.apache.catalina.connector.CoyoteAdapter.service","npe except apach catalina connector coyot adapt coyoteadapt servic","","","""test/org/apache/catalina/comet/TestCometProcessor.java""","2","2","2","1","21","2","17","2","6","0","1","14","14","14","6","14","0","1","0","13","399","65","293","106","192","45","190","230","89","141","6","6","8","1","2","0","34","34","39","14","major"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""java/org/apache/tomcat/util/net/AbstractEndpoint.java""","1","1","1","1","4","0","3","0","6","0","3","117","124","130","61","130","0","0","12","118","858","120","548","237","335","191","297","475","232","243","13","13","14","4","3","0","177","177","183","130","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""java/org/apache/coyote/AbstractProtocol.java""","1","1","1","1","7","0","6","0","3","0","2","57","67","67","15","67","0","1","12","54","668","119","424","152","243","125","191","295","122","173","13","13","15","4","3","0","103","103","105","60","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","15","0","12","2","11","0","1","88","89","89","64","89","1","4","10","74","1884","225","1229","289","844","432","606","929","269","660","40","40","51","11","7","0","297","297","343","130","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""java/org/apache/catalina/connector/Connector.java""","1","1","1","1","12","1","5","5","1","0","4","62","62","62","24","62","0","0","8","54","1034","275","410","133","229","349","186","277","121","156","8","8","8","3","2","1","90","90","93","64","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""java/org/apache/tomcat/util/net/JIoEndpoint.java""","3","3","3","1","16","0","12","3","6","0","1","26","28","28","7","28","1","0","4","23","594","77","366","94","227","156","150","242","73","169","15","15","16","4","5","0","86","86","89","34","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""java/org/apache/tomcat/util/net/NioEndpoint.java""","2","2","3","1","10","0","9","1","13","0","8","115","119","119","50","119","0","0","16","103","1665","180","1230","309","857","285","639","959","307","652","23","23","29","8","7","0","331","331","378","140","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/catalina/startup/SimpleHttpClient.java""","1","1","1","1","6","0","5","0","1","0","12","29","30","30","11","30","0","0","0","30","277","47","201","81","105","29","114","157","81","76","8","8","11","3","3","0","40","40","43","31","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/coyote/http11/TestAbstractHttp11Processor.java""","1","1","1","1","26","4","20","1","3","0","0","8","8","8","0","8","0","0","0","8","254","50","176","64","129","28","98","109","49","60","3","3","3","1","1","0","10","10","10","8","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/coyote/http11/filters/TestChunkedInputFilter.java""","1","1","1","1","28","4","22","2","3","0","1","5","5","5","0","5","0","0","1","4","201","35","138","52","94","28","66","77","40","37","4","4","4","1","1","0","8","8","8","5","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/catalina/connector/TestConnector.java""","2","2","2","1","34","8","24","4","1","0","0","1","1","1","0","1","0","0","0","1","72","14","37","20","20","23","27","30","18","12","2","2","2","1","1","1","2","2","2","1","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/catalina/connector/TestConnector.java""","2","2","2","1","34","8","24","4","1","0","0","1","1","1","0","1","0","0","0","1","72","14","37","20","20","23","27","30","18","12","2","2","2","1","1","1","2","2","2","1","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/tomcat/util/http/TestCookiesAllowEquals.java""","1","1","1","1","12","1","10","0","3","0","4","4","4","4","0","4","0","1","1","2","109","23","68","34","36","19","40","49","31","18","2","2","2","1","1","0","5","5","5","4","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/tomcat/util/http/TestCookiesAllowHttpSeps.java""","1","1","1","1","11","1","9","0","3","0","2","4","4","4","0","4","0","1","1","2","104","23","63","32","31","19","38","47","29","18","2","2","2","1","1","0","5","5","5","4","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/tomcat/util/http/TestCookiesAllowNameOnly.java""","1","1","1","1","12","1","10","1","3","0","3","4","4","4","0","4","0","1","1","2","108","23","66","33","34","20","39","48","30","18","2","2","2","1","1","0","5","5","5","4","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/tomcat/util/http/TestCookiesDisallowEquals.java""","1","1","1","1","10","0","9","0","3","0","3","4","4","4","0","4","0","1","1","2","101","22","61","33","29","19","38","47","30","17","2","2","2","1","1","0","5","5","5","4","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/catalina/servlets/TestDefaultServlet.java""","1","1","1","1","40","6","29","8","2","1","0","6","6","5","0","6","0","0","0","6","302","49","210","71","159","66","130","143","58","85","2","2","3","1","1","0","8","8","10","6","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/catalina/filters/TestExpiresFilter.java""","1","1","1","1","18","2","15","0","11","0","11","26","26","26","0","26","0","0","12","14","507","90","388","133","269","30","193","231","113","118","9","9","10","1","5","0","34","34","35","26","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/catalina/authenticator/TestFormAuthenticator.java""","2","2","2","1","13","0","12","0","2","0","1","12","12","12","4","12","0","6","0","6","226","30","170","49","113","26","98","124","42","82","5","5","5","3","1","0","24","24","24","14","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/coyote/http11/TestInternalInputBuffer.java""","1","1","1","1","12","1","9","1","5","0","2","18","18","18","3","18","0","4","2","12","323","73","209","79","120","45","112","146","62","84","3","3","3","3","1","0","28","28","28","22","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/catalina/mbeans/TestRegistration.java""","2","2","2","1","22","2","18","2","1","4","1","6","6","2","0","6","0","5","0","1","192","26","132","37","95","35","69","83","36","47","6","6","8","1","1","0","12","12","14","6","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/catalina/filters/TestRemoteIpFilter.java""","1","1","1","1","16","3","12","1","4","0","2","26","26","26","2","26","0","1","0","25","562","125","376","179","258","62","295","327","161","166","2","2","2","1","1","0","29","29","29","26","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/catalina/connector/TestRequest.java""","2","2","2","1","24","3","16","4","7","0","7","19","19","19","3","19","0","5","4","10","592","109","384","129","265","121","229","275","105","170","8","8","8","4","3","0","42","42","42","22","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/catalina/core/TestStandardContext.java""","1","1","1","1","12","1","9","2","15","0","9","31","31","31","6","31","0","4","8","19","600","127","402","179","214","89","207","262","134","128","3","3","7","3","2","0","41","41","48","33","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/catalina/core/TestSwallowAbortedUploads.java""","1","1","1","1","15","1","13","1","5","0","10","19","19","19","5","19","0","4","2","13","412","64","310","115","204","44","184","221","96","125","5","5","5","1","3","0","32","32","34","19","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/tomcat/util/net/TestXxxEndpoint.java""","4","4","5","1","29","2","25","2","1","0","1","5","5","5","0","5","0","3","0","2","202","24","148","50","101","32","87","112","47","65","7","7","8","1","2","0","24","24","26","5","enhancement"
"52028","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028 Add support for automatic selection of a free port for a connector when the special value of zero is used","Bug 52028  Embeded Tomcat using a Connector with a random port (port 0)","embed tomcat use connector random port port","","","""test/org/apache/catalina/startup/TomcatBaseTest.java""","2","2","3","1","16","0","14","2","3","7","4","16","16","9","2","16","0","0","2","14","370","42","273","106","151","55","134","195","94","101","13","13","13","1","4","0","47","47","49","16","enhancement"
"52051","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52051 Return a 404 if an attempt is made to process a resource that does not exist","Bug 52051  NullPointerException when Jasper tries to compile a directory","null pointer except nullpointerexcept jasper tri compil directori","","","""java/org/apache/jasper/JspCompilationContext.java""","2","2","2","1","11","0","8","2","1","2","1","51","51","49","27","51","0","0","6","45","767","92","512","144","284","164","230","346","132","214","13","11","17","9","6","0","122","120","131","63","normal"
"52051","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52051 Return a 404 if an attempt is made to process a resource that does not exist","Bug 52051  NullPointerException when Jasper tries to compile a directory","null pointer except nullpointerexcept jasper tri compil directori","","","""java/org/apache/jasper/compiler/JspUtil.java""","4","4","4","2","21","1","16","4","2","39","6","41","41","2","2","41","2","3","0","36","1007","93","689","149","465","226","314","478","133","345","17","17","18","11","4","0","172","164","199","97","normal"
"52066","158","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=52066 Add in a configuration attribute to allow a thread interrupt state to be retained for the calling library to see","Bug 52066  ConnectionPool.borrowConnection swallows interrupt state.","connect pool connectionpool borrow connect borrowconnect swallow interrupt state","In this code snippet starting on line 6.15 of ConnectionPool.java version 7.0.22

    try {
        //retrieve an existing connection
        con = idle.poll(timetowait, TimeUnit.MILLISECONDS);
    } catch (InterruptedException ex) {
        Thread.interrupted();//clear the flag, and bail out
        SQLException sx = new SQLException(""Pool wait interrupted."");
        sx.initCause(ex);
        throw sx;
    } finally {
        waitcount.decrementAndGet();
    }

The line marked '//clear the flag, and bail out' is wrong, because after that there is no way for calling code to find out that the thread has been interrupted.

The correct behavior should be

    Thread.currentThread( ).interrupt( );

Here is the excerpt from the Biran Goetz's ""Java Concurrency in Practice"" chapter 5.4.

<!START QUOTATION>
For library code there are basically two choices:

-- Propagate the InterruptedException. This is often the most sensible policy if you can get away with it -- just propagate the InterruptedException to your caller.  This could involve not catching InterruptedException, or catching it and throwing it again after performing some brief activity-specific cleanup. 

-- Restore the interrupt. Sometimes you cannot throw InterruptedException, for instance when your code is part of a Runnable. In these situations, you must catch InterruptedException and restore the interrupted status by calling interrupt on the current thread, so that code higher up the call stack can see that an interrupt was issued.
<!END QUOTATION>

In the case of borrowConnection, #1 is not really a choice, as it is running in the confines of JDBC interface.  But it can definitely restore the interrupt status of the thread.","code snippet start line connect pool connectionpool java version tri retriev exist connect idl poll timetowait time unit timeunit millisecond catch interrupt except interruptedexcept ex thread interrupt clear flag bail except sqlexcept sx new except sqlexcept pool wait interrupt sx init caus initcaus ex throw sx final waitcount decrement and get decrementandget line mark clear flag bail wrong way call code find thread interrupt correct behavior thread current thread currentthread interrupt excerpt biran goetz java concurr practic chapter start quotat librari code basic two choic propag interrupt except interruptedexcept often sensibl polici get away propag interrupt except interruptedexcept caller could involv catch interrupt except interruptedexcept catch throw perform brief activ specif activityspecif cleanup restor interrupt sometim cannot throw interrupt except interruptedexcept instanc code part runnabl situat must catch interrupt except interruptedexcept restor interrupt statu call interrupt current thread code higher call stack see interrupt issu quotat case borrow connect borrowconnect realli choic run confin jdbc interfac definit restor interrupt statu thread","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","1","1","1","1","4","0","2","0","1","1","8","116","116","115","3","116","0","0","0","116","817","192","482","260","122","143","127","250","151","99","4","4","4","1","2","0","121","121","121","116","normal"
"52066","158","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=52066 Add in a configuration attribute to allow a thread interrupt state to be retained for the calling library to see","Bug 52066  ConnectionPool.borrowConnection swallows interrupt state.","connect pool connectionpool borrow connect borrowconnect swallow interrupt state","In this code snippet starting on line 6.15 of ConnectionPool.java version 7.0.22

    try {
        //retrieve an existing connection
        con = idle.poll(timetowait, TimeUnit.MILLISECONDS);
    } catch (InterruptedException ex) {
        Thread.interrupted();//clear the flag, and bail out
        SQLException sx = new SQLException(""Pool wait interrupted."");
        sx.initCause(ex);
        throw sx;
    } finally {
        waitcount.decrementAndGet();
    }

The line marked '//clear the flag, and bail out' is wrong, because after that there is no way for calling code to find out that the thread has been interrupted.

The correct behavior should be

    Thread.currentThread( ).interrupt( );

Here is the excerpt from the Biran Goetz's ""Java Concurrency in Practice"" chapter 5.4.

<!START QUOTATION>
For library code there are basically two choices:

-- Propagate the InterruptedException. This is often the most sensible policy if you can get away with it -- just propagate the InterruptedException to your caller.  This could involve not catching InterruptedException, or catching it and throwing it again after performing some brief activity-specific cleanup. 

-- Restore the interrupt. Sometimes you cannot throw InterruptedException, for instance when your code is part of a Runnable. In these situations, you must catch InterruptedException and restore the interrupted status by calling interrupt on the current thread, so that code higher up the call stack can see that an interrupt was issued.
<!END QUOTATION>

In the case of borrowConnection, #1 is not really a choice, as it is running in the confines of JDBC interface.  But it can definitely restore the interrupt status of the thread.","code snippet start line connect pool connectionpool java version tri retriev exist connect idl poll timetowait time unit timeunit millisecond catch interrupt except interruptedexcept ex thread interrupt clear flag bail except sqlexcept sx new except sqlexcept pool wait interrupt sx init caus initcaus ex throw sx final waitcount decrement and get decrementandget line mark clear flag bail wrong way call code find thread interrupt correct behavior thread current thread currentthread interrupt excerpt biran goetz java concurr practic chapter start quotat librari code basic two choic propag interrupt except interruptedexcept often sensibl polici get away propag interrupt except interruptedexcept caller could involv catch interrupt except interruptedexcept catch throw perform brief activ specif activityspecif cleanup restor interrupt sometim cannot throw interrupt except interruptedexcept instanc code part runnabl situat must catch interrupt except interruptedexcept restor interrupt statu call interrupt current thread code higher call stack see interrupt issu quotat case borrow connect borrowconnect realli choic run confin jdbc interfac definit restor interrupt statu thread","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","1","1","1","1","4","0","2","0","1","1","8","116","116","115","3","116","0","0","0","116","817","192","482","260","122","143","127","250","151","99","4","4","4","1","2","0","121","121","121","116","normal"
"52066","158","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=52066 Add in a configuration attribute to allow a thread interrupt state to be retained for the calling library to see","Bug 52066  ConnectionPool.borrowConnection swallows interrupt state.","connect pool connectionpool borrow connect borrowconnect swallow interrupt state","In this code snippet starting on line 6.15 of ConnectionPool.java version 7.0.22

    try {
        //retrieve an existing connection
        con = idle.poll(timetowait, TimeUnit.MILLISECONDS);
    } catch (InterruptedException ex) {
        Thread.interrupted();//clear the flag, and bail out
        SQLException sx = new SQLException(""Pool wait interrupted."");
        sx.initCause(ex);
        throw sx;
    } finally {
        waitcount.decrementAndGet();
    }

The line marked '//clear the flag, and bail out' is wrong, because after that there is no way for calling code to find out that the thread has been interrupted.

The correct behavior should be

    Thread.currentThread( ).interrupt( );

Here is the excerpt from the Biran Goetz's ""Java Concurrency in Practice"" chapter 5.4.

<!START QUOTATION>
For library code there are basically two choices:

-- Propagate the InterruptedException. This is often the most sensible policy if you can get away with it -- just propagate the InterruptedException to your caller.  This could involve not catching InterruptedException, or catching it and throwing it again after performing some brief activity-specific cleanup. 

-- Restore the interrupt. Sometimes you cannot throw InterruptedException, for instance when your code is part of a Runnable. In these situations, you must catch InterruptedException and restore the interrupted status by calling interrupt on the current thread, so that code higher up the call stack can see that an interrupt was issued.
<!END QUOTATION>

In the case of borrowConnection, #1 is not really a choice, as it is running in the confines of JDBC interface.  But it can definitely restore the interrupt status of the thread.","code snippet start line connect pool connectionpool java version tri retriev exist connect idl poll timetowait time unit timeunit millisecond catch interrupt except interruptedexcept ex thread interrupt clear flag bail except sqlexcept sx new except sqlexcept pool wait interrupt sx init caus initcaus ex throw sx final waitcount decrement and get decrementandget line mark clear flag bail wrong way call code find thread interrupt correct behavior thread current thread currentthread interrupt excerpt biran goetz java concurr practic chapter start quotat librari code basic two choic propag interrupt except interruptedexcept often sensibl polici get away propag interrupt except interruptedexcept caller could involv catch interrupt except interruptedexcept catch throw perform brief activ specif activityspecif cleanup restor interrupt sometim cannot throw interrupt except interruptedexcept instanc code part runnabl situat must catch interrupt except interruptedexcept restor interrupt statu call interrupt current thread code higher call stack see interrupt issu quotat case borrow connect borrowconnect realli choic run confin jdbc interfac definit restor interrupt statu thread","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","4","4","4","1","20","0","14","6","3","6","4","51","51","45","21","51","1","3","17","30","1290","105","806","175","543","411","386","598","172","426","19","19","19","8","6","1","211","211","228","98","normal"
"52066","158","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=52066 Add in a configuration attribute to allow a thread interrupt state to be retained for the calling library to see","Bug 52066  ConnectionPool.borrowConnection swallows interrupt state.","connect pool connectionpool borrow connect borrowconnect swallow interrupt state","In this code snippet starting on line 6.15 of ConnectionPool.java version 7.0.22

    try {
        //retrieve an existing connection
        con = idle.poll(timetowait, TimeUnit.MILLISECONDS);
    } catch (InterruptedException ex) {
        Thread.interrupted();//clear the flag, and bail out
        SQLException sx = new SQLException(""Pool wait interrupted."");
        sx.initCause(ex);
        throw sx;
    } finally {
        waitcount.decrementAndGet();
    }

The line marked '//clear the flag, and bail out' is wrong, because after that there is no way for calling code to find out that the thread has been interrupted.

The correct behavior should be

    Thread.currentThread( ).interrupt( );

Here is the excerpt from the Biran Goetz's ""Java Concurrency in Practice"" chapter 5.4.

<!START QUOTATION>
For library code there are basically two choices:

-- Propagate the InterruptedException. This is often the most sensible policy if you can get away with it -- just propagate the InterruptedException to your caller.  This could involve not catching InterruptedException, or catching it and throwing it again after performing some brief activity-specific cleanup. 

-- Restore the interrupt. Sometimes you cannot throw InterruptedException, for instance when your code is part of a Runnable. In these situations, you must catch InterruptedException and restore the interrupted status by calling interrupt on the current thread, so that code higher up the call stack can see that an interrupt was issued.
<!END QUOTATION>

In the case of borrowConnection, #1 is not really a choice, as it is running in the confines of JDBC interface.  But it can definitely restore the interrupt status of the thread.","code snippet start line connect pool connectionpool java version tri retriev exist connect idl poll timetowait time unit timeunit millisecond catch interrupt except interruptedexcept ex thread interrupt clear flag bail except sqlexcept sx new except sqlexcept pool wait interrupt sx init caus initcaus ex throw sx final waitcount decrement and get decrementandget line mark clear flag bail wrong way call code find thread interrupt correct behavior thread current thread currentthread interrupt excerpt biran goetz java concurr practic chapter start quotat librari code basic two choic propag interrupt except interruptedexcept often sensibl polici get away propag interrupt except interruptedexcept caller could involv catch interrupt except interruptedexcept catch throw perform brief activ specif activityspecif cleanup restor interrupt sometim cannot throw interrupt except interruptedexcept instanc code part runnabl situat must catch interrupt except interruptedexcept restor interrupt statu call interrupt current thread code higher call stack see interrupt issu quotat case borrow connect borrowconnect realli choic run confin jdbc interfac definit restor interrupt statu thread","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","4","4","4","1","20","0","14","6","3","6","4","51","51","45","21","51","1","3","17","30","1290","105","806","175","543","411","386","598","172","426","19","19","19","8","6","1","211","211","228","98","normal"
"52066","158","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=52066 Add in a configuration attribute to allow a thread interrupt state to be retained for the calling library to see","Bug 52066  ConnectionPool.borrowConnection swallows interrupt state.","connect pool connectionpool borrow connect borrowconnect swallow interrupt state","In this code snippet starting on line 6.15 of ConnectionPool.java version 7.0.22

    try {
        //retrieve an existing connection
        con = idle.poll(timetowait, TimeUnit.MILLISECONDS);
    } catch (InterruptedException ex) {
        Thread.interrupted();//clear the flag, and bail out
        SQLException sx = new SQLException(""Pool wait interrupted."");
        sx.initCause(ex);
        throw sx;
    } finally {
        waitcount.decrementAndGet();
    }

The line marked '//clear the flag, and bail out' is wrong, because after that there is no way for calling code to find out that the thread has been interrupted.

The correct behavior should be

    Thread.currentThread( ).interrupt( );

Here is the excerpt from the Biran Goetz's ""Java Concurrency in Practice"" chapter 5.4.

<!START QUOTATION>
For library code there are basically two choices:

-- Propagate the InterruptedException. This is often the most sensible policy if you can get away with it -- just propagate the InterruptedException to your caller.  This could involve not catching InterruptedException, or catching it and throwing it again after performing some brief activity-specific cleanup. 

-- Restore the interrupt. Sometimes you cannot throw InterruptedException, for instance when your code is part of a Runnable. In these situations, you must catch InterruptedException and restore the interrupted status by calling interrupt on the current thread, so that code higher up the call stack can see that an interrupt was issued.
<!END QUOTATION>

In the case of borrowConnection, #1 is not really a choice, as it is running in the confines of JDBC interface.  But it can definitely restore the interrupt status of the thread.","code snippet start line connect pool connectionpool java version tri retriev exist connect idl poll timetowait time unit timeunit millisecond catch interrupt except interruptedexcept ex thread interrupt clear flag bail except sqlexcept sx new except sqlexcept pool wait interrupt sx init caus initcaus ex throw sx final waitcount decrement and get decrementandget line mark clear flag bail wrong way call code find thread interrupt correct behavior thread current thread currentthread interrupt excerpt biran goetz java concurr practic chapter start quotat librari code basic two choic propag interrupt except interruptedexcept often sensibl polici get away propag interrupt except interruptedexcept caller could involv catch interrupt except interruptedexcept catch throw perform brief activ specif activityspecif cleanup restor interrupt sometim cannot throw interrupt except interruptedexcept instanc code part runnabl situat must catch interrupt except interruptedexcept restor interrupt statu call interrupt current thread code higher call stack see interrupt issu quotat case borrow connect borrowconnect realli choic run confin jdbc interfac definit restor interrupt statu thread","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/DataSourceProxy.java""","1","1","1","1","6","0","3","2","1","0","1","133","133","133","2","133","0","1","0","132","1271","241","611","260","210","419","184","344","158","186","4","4","4","3","3","1","159","159","159","135","normal"
"52066","158","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=52066 Add in a configuration attribute to allow a thread interrupt state to be retained for the calling library to see","Bug 52066  ConnectionPool.borrowConnection swallows interrupt state.","connect pool connectionpool borrow connect borrowconnect swallow interrupt state","In this code snippet starting on line 6.15 of ConnectionPool.java version 7.0.22

    try {
        //retrieve an existing connection
        con = idle.poll(timetowait, TimeUnit.MILLISECONDS);
    } catch (InterruptedException ex) {
        Thread.interrupted();//clear the flag, and bail out
        SQLException sx = new SQLException(""Pool wait interrupted."");
        sx.initCause(ex);
        throw sx;
    } finally {
        waitcount.decrementAndGet();
    }

The line marked '//clear the flag, and bail out' is wrong, because after that there is no way for calling code to find out that the thread has been interrupted.

The correct behavior should be

    Thread.currentThread( ).interrupt( );

Here is the excerpt from the Biran Goetz's ""Java Concurrency in Practice"" chapter 5.4.

<!START QUOTATION>
For library code there are basically two choices:

-- Propagate the InterruptedException. This is often the most sensible policy if you can get away with it -- just propagate the InterruptedException to your caller.  This could involve not catching InterruptedException, or catching it and throwing it again after performing some brief activity-specific cleanup. 

-- Restore the interrupt. Sometimes you cannot throw InterruptedException, for instance when your code is part of a Runnable. In these situations, you must catch InterruptedException and restore the interrupted status by calling interrupt on the current thread, so that code higher up the call stack can see that an interrupt was issued.
<!END QUOTATION>

In the case of borrowConnection, #1 is not really a choice, as it is running in the confines of JDBC interface.  But it can definitely restore the interrupt status of the thread.","code snippet start line connect pool connectionpool java version tri retriev exist connect idl poll timetowait time unit timeunit millisecond catch interrupt except interruptedexcept ex thread interrupt clear flag bail except sqlexcept sx new except sqlexcept pool wait interrupt sx init caus initcaus ex throw sx final waitcount decrement and get decrementandget line mark clear flag bail wrong way call code find thread interrupt correct behavior thread current thread currentthread interrupt excerpt biran goetz java concurr practic chapter start quotat librari code basic two choic propag interrupt except interruptedexcept often sensibl polici get away propag interrupt except interruptedexcept caller could involv catch interrupt except interruptedexcept catch throw perform brief activ specif activityspecif cleanup restor interrupt sometim cannot throw interrupt except interruptedexcept instanc code part runnabl situat must catch interrupt except interruptedexcept restor interrupt statu call interrupt current thread code higher call stack see interrupt issu quotat case borrow connect borrowconnect realli choic run confin jdbc interfac definit restor interrupt statu thread","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PoolConfiguration.java""","0","0","0","0","0","0","0","0","1","0","1","0","99","99","0","99","0","0","0","99","850","108","105","104","1","637","103","104","104","0","0","0","0","0","0","6","0","0","0","0","normal"
"52066","158","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=52066 Add in a configuration attribute to allow a thread interrupt state to be retained for the calling library to see","Bug 52066  ConnectionPool.borrowConnection swallows interrupt state.","connect pool connectionpool borrow connect borrowconnect swallow interrupt state","In this code snippet starting on line 6.15 of ConnectionPool.java version 7.0.22

    try {
        //retrieve an existing connection
        con = idle.poll(timetowait, TimeUnit.MILLISECONDS);
    } catch (InterruptedException ex) {
        Thread.interrupted();//clear the flag, and bail out
        SQLException sx = new SQLException(""Pool wait interrupted."");
        sx.initCause(ex);
        throw sx;
    } finally {
        waitcount.decrementAndGet();
    }

The line marked '//clear the flag, and bail out' is wrong, because after that there is no way for calling code to find out that the thread has been interrupted.

The correct behavior should be

    Thread.currentThread( ).interrupt( );

Here is the excerpt from the Biran Goetz's ""Java Concurrency in Practice"" chapter 5.4.

<!START QUOTATION>
For library code there are basically two choices:

-- Propagate the InterruptedException. This is often the most sensible policy if you can get away with it -- just propagate the InterruptedException to your caller.  This could involve not catching InterruptedException, or catching it and throwing it again after performing some brief activity-specific cleanup. 

-- Restore the interrupt. Sometimes you cannot throw InterruptedException, for instance when your code is part of a Runnable. In these situations, you must catch InterruptedException and restore the interrupted status by calling interrupt on the current thread, so that code higher up the call stack can see that an interrupt was issued.
<!END QUOTATION>

In the case of borrowConnection, #1 is not really a choice, as it is running in the confines of JDBC interface.  But it can definitely restore the interrupt status of the thread.","code snippet start line connect pool connectionpool java version tri retriev exist connect idl poll timetowait time unit timeunit millisecond catch interrupt except interruptedexcept ex thread interrupt clear flag bail except sqlexcept sx new except sqlexcept pool wait interrupt sx init caus initcaus ex throw sx final waitcount decrement and get decrementandget line mark clear flag bail wrong way call code find thread interrupt correct behavior thread current thread currentthread interrupt excerpt biran goetz java concurr practic chapter start quotat librari code basic two choic propag interrupt except interruptedexcept often sensibl polici get away propag interrupt except interruptedexcept caller could involv catch interrupt except interruptedexcept catch throw perform brief activ specif activityspecif cleanup restor interrupt sometim cannot throw interrupt except interruptedexcept instanc code part runnabl situat must catch interrupt except interruptedexcept restor interrupt statu call interrupt current thread code higher call stack see interrupt issu quotat case borrow connect borrowconnect realli choic run confin jdbc interfac definit restor interrupt statu thread","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PoolProperties.java""","1","1","1","1","6","0","4","2","3","2","3","123","123","121","53","123","0","0","1","122","1240","222","697","319","293","321","277","443","218","225","6","6","10","5","5","0","166","166","177","146","normal"
"52092","651","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52092 Switch to the AsyncLogWriter and OneLineFormatter by default","Bug 52092  Please make AsyncFileHandler and OneLineFormatter the default for logging.properties","pleas make async file handler asyncfilehandl one line formatt onelineformatt default log properti","Apache Tomcat 7 has created some very important enhancements to logging, and we should exploit them. Please make the org.apache.juli.AsyncFileHandler and org.apache.juli.OneLineFormatter the defaults for shipped conf/logging.properties.

These enhancements have been vetted with over 20 releases of Apache Tomcat, let's give them some first class status.","apach tomcat creat import enhanc log exploit pleas make apach juli async file handler asyncfilehandl apach juli one line formatt onelineformatt default ship conf log properti enhanc vet releas apach tomcat let give first class statu","""java/org/apache/juli/FileHandler.java""","4","4","4","2","25","2","19","3","1","0","0","10","10","10","8","10","0","2","3","5","419","70","226","63","154","124","119","161","58","103","11","11","13","4","4","1","42","42","46","20","enhancement"
"52113","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52113 Don't assume presence of context.xml file with JMX deployment","Bug 52113  Tomcat reports missing context xml at wrong location on JMX deployment","tomcat report miss context xml wrong locat jmx deploy","Hello, 

I'm using Tomcat JMX interface to deploy apps as follows:
1) call MBeanFactory#createStandardContext, where MBeanFactory is ""Catalina:type=MBeanFactory"", with parameters: parent = ""Catalina:type=Host,host=localhost"", path = ""/w1"", docBase = <my path to the app>
2) call <my app>#start, where <my app> is ""Catalina:j2eeType=WebModule,name=//localhost/w1,J2EEApplication=none,J2EEServer=none""

As result, my app _is succesfully deployed (its context is available)_, but nevertheless I see the following exceptions in the server console (full stacktraces are skipped, to be attached next comment):

31 ???? 2011 14:05:53 org.apache.catalina.startup.ContextConfig
processContextConfig
SEVERE: Missing context.xml: file:/C:/<my Tomcat base
folder>/conf/Catalina/localhost/w1.xml
java.io.FileNotFoundException: C:\<my Tomcat base
folder>\conf\Catalina\localhost\w1.xml

31 ???? 2011 14:05:53 org.apache.catalina.startup.ContextConfig
processContextConfig
SEVERE: Parse error in context.xml for /w1
java.io.FileNotFoundException: C:\<my Tomcat base
folder>\conf\Catalina\localhost\w1.xml

31 ???? 2011 14:05:53 org.apache.catalina.startup.ContextConfig configureStart
SEVERE: Marking this application unavailable due to previous error(s)

31 ???? 2011 14:05:53 org.apache.catalina.core.StandardContext startInternal
SEVERE: Error getConfigured

31 ???? 2011 14:05:53 org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/w1] startup failed due to previous errors

The exceptions looks strange to me, since I don't understand why Tomcat searches for a context xml file during the jmx deploy.

Do I do something wrong in the deployment workflow?

Regards, 
Michael","hello use tomcat jmx interfac deploy app follow call bean factori mbeanfactori creat standard context createstandardcontext bean factori mbeanfactori catalina type bean factori mbeanfactori paramet parent catalina type host host localhost path w1 doc base docbas path app call app start app catalina j2ee type j2eetyp web modul webmodul name localhost w1 j2 applic j2eeapplic none j2 server j2eeserv none result app succes deploy context avail nevertheless see follow except server consol full stacktrac skip attach next comment apach catalina startup context config contextconfig process context config processcontextconfig sever miss context xml file tomcat base folder conf catalina localhost w1 xml java file not found except filenotfoundexcept tomcat base folder conf catalina localhost w1 xml apach catalina startup context config contextconfig process context config processcontextconfig sever pars error context xml w1 java file not found except filenotfoundexcept tomcat base folder conf catalina localhost w1 xml apach catalina startup context config contextconfig configur start configurestart sever mark applic unavail due previou error apach catalina core standard context standardcontext start intern startintern sever error get configur getconfigur apach catalina core standard context standardcontext start intern startintern sever context w1 startup fail due previou error except look strang sinc understand tomcat search context xml file jmx deploy someth wrong deploy workflow regard michael","""java/org/apache/catalina/mbeans/MBeanFactory.java""","2","2","2","1","24","2","13","9","1","0","2","34","34","34","1","34","0","5","0","29","993","162","486","233","317","345","289","360","195","165","6","6","7","5","3","1","72","72","77","50","normal"
"52135","238","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52135 Implement support for a default error page. It appears that this was meant to be in the 3.0 spec but got left out in error.","Bug 52135  Global error page is not handled","global error page handl","The new Servlet 3.0 global error page

    <error-page>
        <location>/error.jsp</location>
    </error-page>

is not handled in Tomcat 7.

On Glassfish 3 for example, it works fine.","new servlet global error page error page errorpag locat error jsp locat error page errorpag handl tomcat glassfish exampl work fine","""java/org/apache/catalina/deploy/ErrorPage.java""","1","1","1","1","10","1","5","3","1","0","1","9","9","9","3","9","0","0","0","9","181","54","56","19","29","71","26","39","18","21","2","2","2","1","1","1","12","12","12","9","enhancement"
"52135","238","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52135 Implement support for a default error page. It appears that this was meant to be in the 3.0 spec but got left out in error.","Bug 52135  Global error page is not handled","global error page handl","The new Servlet 3.0 global error page

    <error-page>
        <location>/error.jsp</location>
    </error-page>

is not handled in Tomcat 7.

On Glassfish 3 for example, it works fine.","new servlet global error page error page errorpag locat error jsp locat error page errorpag handl tomcat glassfish exampl work fine","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","2","0","2","296","296","296","123","296","0","12","9","275","6338","1262","3264","1006","1966","1817","1454","2228","830","1398","53","53","67","9","5","1","680","680","737","385","enhancement"
"52135","238","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52135 Implement support for a default error page. It appears that this was meant to be in the 3.0 spec but got left out in error.","Bug 52135  Global error page is not handled","global error page handl","The new Servlet 3.0 global error page

    <error-page>
        <location>/error.jsp</location>
    </error-page>

is not handled in Tomcat 7.

On Glassfish 3 for example, it works fine.","new servlet global error page error page errorpag locat error jsp locat error page errorpag handl tomcat glassfish exampl work fine","""java/org/apache/catalina/core/StandardHostValve.java""","5","5","5","1","43","4","26","12","2","1","4","9","9","8","2","9","1","4","0","4","504","80","281","77","182","143","126","176","60","116","12","12","15","5","4","1","48","48","52","17","enhancement"
"52156","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52156 Need to use normalised path to look up resource in DirContext","Bug 52156  ServletContext.getResource(path) doesn't accept "".."" anymore","servlet context servletcontext get resourc getresourc path doesn accept anymor","","","""java/org/apache/catalina/core/ApplicationContext.java""","2","2","3","2","18","1","11","5","2","2","5","64","64","62","14","64","1","6","4","53","1594","287","898","301","543","409","381","557","219","338","12","12","13","9","3","0","187","187","208","131","normal"
"52173","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52173 Improve Javadoc for delgate attribute of WebappClassLoader Based on a patch by bmargulies","Bug 52173  Add a drop of additional clarification to doc on the delegate setting of the WebappClassLoader","add drop addit clarif doc deleg set webapp class loader webappclassload","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","5","2","31","3","21","6","4","1","8","88","88","87","36","88","3","13","19","53","3390","535","2022","470","1398","840","927","1405","413","992","45","45","52","28","10","0","484","484","524","212","normal"
"52208","20","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52208 Avoid possible NPEs if stopListening is called in a different thread","Bug 52208  NullPointerException in tribes.transport.nio.NioReceiver.listen() in test run","null pointer except nullpointerexcept tribe transport nio nio receiv nioreceiv listen run","","","""java/org/apache/catalina/tribes/transport/nio/NioReceiver.java""","4","4","5","1","22","0","16","5","1","1","2","15","15","14","5","15","0","1","6","8","428","40","281","74","187","113","158","229","68","161","18","18","21","7","6","0","73","73","80","23","minor"
"52213","34","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52213 enabled should be volatile","Bug 52213  Field ""org.apache.catalina.tribes.transport.bio.util.FastQueue.enabled"" should be volatile.","field apach catalina tribe transport bio util fast queue fastqueu enabl volatil","","","""java/org/apache/catalina/tribes/transport/bio/util/FastQueue.java""","2","2","2","1","11","0","8","2","1","0","1","21","21","21","13","21","0","0","0","21","367","59","196","44","126","112","96","151","44","107","17","17","18","3","4","1","53","53","54","23","normal"
"52225","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52225 Fix ClassCastException in Alias added for existing host via JMX","Bug 52225  Adding Alias for existing host on running Tomcat causes ClassCastException","ad alia exist host run tomcat caus class cast except classcastexcept","","","""java/org/apache/tomcat/util/http/mapper/Mapper.java""","6","6","6","3","36","1","27","6","7","12","2","36","36","24","19","36","0","17","2","17","1505","184","1048","297","735","275","515","749","267","482","25","25","36","11","6","0","223","223","249","122","normal"
"52225","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52225 Fix ClassCastException in Alias added for existing host via JMX","Bug 52225  Adding Alias for existing host on running Tomcat causes ClassCastException","ad alia exist host run tomcat caus class cast except classcastexcept","","","""test/org/apache/tomcat/util/http/mapper/TestMapper.java""","1","1","1","1","30","2","26","2","1","0","0","4","4","4","1","4","0","0","0","4","159","20","117","27","93","26","91","98","25","73","2","2","2","1","1","0","6","6","6","4","normal"
"52225","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52225 Fix ClassCastException in Alias added for existing host via JMX","Bug 52225  Adding Alias for existing host on running Tomcat causes ClassCastException","ad alia exist host run tomcat caus class cast except classcastexcept","","","""test/org/apache/tomcat/util/http/mapper/TestMapper.java""","1","1","1","1","30","2","26","2","1","0","0","4","4","4","1","4","0","0","0","4","159","20","117","27","93","26","91","98","25","73","2","2","2","1","1","0","6","6","6","4","normal"
"52245","47","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52245 Don't allow webapps to package javax.el classes","Bug 52245  Add detection of EL Jar to WebappClassLoader","add detect jar webapp class loader webappclassload","The EL API is not currently detected by the code in WebappClassLoader.
Applications containing el-api.jar will not start.

(patch to follow).","api current detect code webapp class loader webappclassload applic contain el api elapi jar start patch follow","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","5","2","30","3","20","6","5","1","8","90","90","89","36","90","3","13","19","55","3414","537","2032","471","1406","852","930","1410","416","994","45","45","52","28","10","0","486","486","526","214","enhancement"
"52293","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52293 Correctly handle Context.antiResourceLocking when HOst.unpackWARs=false","Bug 52293  antiResourceLocking and unpackWARs","anti resourc lock antiresourcelock unpack unpackwar","","","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","7","1","37","3","28","5","3","1","8","57","57","56","16","57","0","5","38","14","2478","331","1742","419","1199","406","812","1229","411","818","37","37","43","11","6","0","387","387","428","99","normal"
"52303","19","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52303 Allow web applications that do not have a login configuration to participate in a SSO session. Patch provided by Brian Burch.","Bug 52303  NonLoginAuthenticator does not honour session timeout with SingleSignOn Valve","non login authent nonloginauthent honour session timeout singl sign on singlesignon valv","","","""java/org/apache/catalina/authenticator/NonLoginAuthenticator.java""","1","1","1","1","18","2","6","10","1","0","0","2","2","2","0","2","0","0","1","1","83","17","21","13","4","45","8","12","8","4","2","2","2","1","1","2","3","3","3","2","minor"
"52316","18","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52316 Improve response length logging when sendfile is being used","Bug 52316  AccessLog does not log size for files sent with sendfile","access log accesslog log size file sent sendfil","","","""java/org/apache/catalina/valves/AccessLogValve.java""","2","2","2","1","12","0","9","2","31","4","19","96","95","93","56","97","0","11","11","75","2019","253","1142","342","656","625","507","759","289","470","21","13","21","4","4","1","246","218","268","107","normal"
"52321","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52321 Used LinkedHashSet rather than HashSet to preserve order","Bug 52321  coda/prelude order not respected","coda prelud order respect","","","""java/org/apache/catalina/core/ApplicationJspConfigDescriptor.java""","1","1","1","1","3","0","3","0","1","0","0","2","2","2","2","2","0","0","0","2","45","9","20","15","4","16","10","13","11","2","1","1","1","1","0","1","2","2","2","2","critical"
"52321","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52321 Used LinkedHashSet rather than HashSet to preserve order","Bug 52321  coda/prelude order not respected","coda prelud order respect","","","""java/org/apache/catalina/deploy/WebXml.java""","4","4","5","2","21","1","19","1","1","9","6","90","90","81","40","90","0","8","0","82","2223","168","1812","250","1331","246","746","1292","343","949","116","116","119","89","6","0","418","418","457","226","critical"
"52326","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52326 Log all classloading errors during HandlesTypes processing at debug","Bug 52326  Lower log level for failed class loading","lower log level fail class load","","","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","7","1","37","3","28","5","3","1","8","57","57","56","16","57","0","5","38","14","2477","331","1742","419","1199","405","812","1229","411","818","37","37","43","11","6","0","387","387","428","99","minor"
"52328","27","Mark Emlyn David Thomas","First pass at a fix for BZ 52328","Bug 52328  Massive garbage production observed when using the response writer","massiv garbag product observ use respons writer","In our application we used to use Tomcat 5, by writing our content directly to the response writer in our servlet:

Writer w = response.getWriter();
w.append(...)


We have regularly measured performance of our application under stress with multiple simultaneous requests per second.

We recently upgraded to Tomcat 7, and immediately observed a performance degradation of 10% on the request roundtrip on the same machine and the same tests, compared to our application deployed on Tomcat 5.

Profiling with JProfiler showed that we got massive amount of transient objects {{java.nio.HeapCharBuffer}} produced - 400Mb+ within a few minutes.

The way we are writing the response is by multiple statements of {{append}} of small strings or single chars, which used to work properly. For experiment, we wrapped the response writer with a {{BufferedWriter}} with a buffer of 64k. This brought our application's performance back to normal.

We see this as either a:
- anti-pattern usage since Tomcat 6/7, in which case please provide some documentation about that.
- bug in the C2BConverter that is applied per every call to the CoyoteWriter write methods, which generates the garbage buffers per every call.

We know that the response stream has a 8k buffer by default. Nevertheless, this buffer comes after the encoding step and as such it is too late to help with the garbage. Perhaps Tomcat can buffer before it encodes?

Still, so much transient objects for just a pattern of eligible use of the servlet API seems a bug to me.","applic use use tomcat write content directli respons writer servlet writer respons get writer getwrit append regularli measur perform applic stress multipl simultan request second recent upgrad tomcat immedi observ perform degrad request roundtrip machin test compar applic deploy tomcat profil profil jprofil show got massiv amount transient object java nio heap char buffer heapcharbuff produc 400 mb 400mb within minut way write respons multipl statement append small string singl char use work properli experi wrap respons writer buffer writer bufferedwrit buffer 64k brought applic perform back normal see either anti pattern antipattern usag sinc tomcat case pleas provid document c2 convert c2bconvert appli everi call coyot writer coyotewrit write method gener garbag buffer everi call know respons stream 8k buffer default nevertheless buffer come encod step late help garbag perhap tomcat buffer encod still much transient object pattern elig use servlet api seem","""java/org/apache/catalina/connector/OutputBuffer.java""","2","2","2","1","13","2","8","2","2","0","2","29","29","29","13","29","0","1","2","26","598","164","282","83","148","153","118","182","59","123","7","7","7","3","2","1","62","62","64","33","regression"
"52354","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52354 Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52355 Make debug flags volatile as they are accessed by multiple threads","Bug 52354  Protect concurrent accesses to field ""org.apache.catalina.tribes.transport.bio.util.FastQueue.inRemove""","protect concurr access field apach catalina tribe transport bio util fast queue fastqueu in remov inremov","","","""java/org/apache/catalina/tribes/transport/bio/util/FastQueue.java""","2","2","2","1","11","0","8","2","1","0","1","21","21","21","13","21","0","0","0","21","367","59","196","44","126","112","96","151","44","107","17","17","18","3","4","1","53","53","54","23","normal"
"52356","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52356 size needs to be volatile","Bug 52356  Prevent potential data races on ""org.apache.catalina.tribes.transport.bio.util.FastQueue.size"".","prevent potenti data race apach catalina tribe transport bio util fast queue fastqueu size","","","""java/org/apache/catalina/tribes/transport/bio/util/FastQueue.java""","2","2","2","1","11","0","8","2","1","0","1","21","21","21","13","21","0","0","0","21","365","56","196","44","126","113","96","151","44","107","17","17","18","3","4","1","53","53","54","23","normal"
"52384","1","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52384 Do not fail in Parameter parsing when debug logging is enabled. Also do no flag extra '&' as errors.","Bug 52384  URL parameter without value should be parsed successfully when logging level = DEBUG","url paramet without valu pars success log level debug","","","""java/org/apache/tomcat/util/http/Parameters.java""","3","3","3","1","15","1","13","1","1","0","4","21","21","21","15","21","0","3","0","18","437","60","323","84","212","54","155","222","78","144","29","26","35","5","4","0","68","65","78","31","normal"
"52387","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52387 Silence logging for correct host Patch provided by David Calavera","Bug 52387  org.catalina.tomcat.startup.Tomcat#silence method doesn't use the host where we add the applications","catalina tomcat startup tomcat silenc method doesn use host add applic","","","""java/org/apache/catalina/startup/Tomcat.java""","1","1","1","1","12","0","7","4","5","3","2","49","49","46","14","49","0","1","5","43","1046","96","611","320","405","340","221","305","128","177","7","7","7","1","3","1","81","81","81","49","normal"
"52440","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52440 Need to resolve EL variables when returning ValueReferences Includes a new test case.","Bug 52440  Wrong getValueReference behaviour with Facelets parameter expressions","wrong get valu refer getvaluerefer behaviour facelet paramet express","ValueExpression method getValueReference should return base object and property. But it returns null if ValueExpression is Facelets parameter.
Example:

someVar = #{concreteObject.property}

ValueExpression for #{someVar} return null from method getValueReference (guess because it is simple expression #{someVar}), but logicaly it should return parent expressions ValueReference (need hierachical ValueReference lookup).

I made workaround with Java Reflect API in my code and it illustrates problem:

ELContext elContext = FacesContext.getCurrentInstance().getELContext();
ValueReference reference = exp.getValueReference(elContext);
        
if (reference == null && exp instanceof TagValueExpressionUEL) {
	ValueExpressionImpl origExp = (ValueExpressionImpl) ((TagValueExpressionUEL) exp).getWrapped();
            
	// TODO: JR: find better way to get base and property. ! Code is not portable because uses Tomcat EL implementation details. ! 
	Field field = ReflectionUtils.findField(origExp.getClass(), EL_IMPL_VAR_PROPERTY);
	field.setAccessible(true);
	VariableMapper varMapper = (VariableMapper) ReflectionUtils.getField(field, origExp);
    field = ReflectionUtils.findField(origExp.getClass(), EL_IMPL_NODE_PROPERTY);
    field.setAccessible(true);
    SimpleNode node = (SimpleNode) ReflectionUtils.getField(field, origExp);

    if (varMapper != null && node != null) {
		ValueExpression parentExp = varMapper.resolveVariable(node.getImage());
        if (parentExp != null) {
			try {
				reference = parentExp.getValueReference(elContext);

                if (reference == null) {
					reference = getValueReference(parentExp);
                }
            } catch (PropertyNotFoundException e) {
				LOG.warn(""Property not found: "" + e.getMessage());
            }
        }
    }
}","valu express valueexpress method get valu refer getvaluerefer return base object properti return null valu express valueexpress facelet paramet exampl some var somevar concret object concreteobject properti valu express valueexpress some var somevar return null method get valu refer getvaluerefer guess simpl express some var somevar logicali return parent express valu refer valuerefer need hierach valu refer valuerefer lookup made workaround java reflect api code illustr problem context elcontext el context elcontext face context facescontext get current instanc getcurrentinst get context getelcontext valu refer valuerefer refer exp get valu refer getvaluerefer el context elcontext refer null exp instanceof tag valu express tagvalueexpressionuel valu express impl valueexpressionimpl orig exp origexp valu express impl valueexpressionimpl tag valu express tagvalueexpressionuel exp get wrap getwrap jr find better way get base properti code portabl us tomcat implement detail field field reflect util reflectionutil find field findfield orig exp origexp get class getclass impl properti field set access setaccess true variabl mapper variablemapp var mapper varmapp variabl mapper variablemapp reflect util reflectionutil get field getfield field orig exp origexp field reflect util reflectionutil find field findfield orig exp origexp get class getclass impl node properti field set access setaccess true simpl node simplenod node simpl node simplenod reflect util reflectionutil get field getfield field orig exp origexp var mapper varmapp null node null valu express valueexpress parent exp parentexp var mapper varmapp resolv variabl resolvevari node get imag getimag parent exp parentexp null tri refer parent exp parentexp get valu refer getvaluerefer el context elcontext refer null refer get valu refer getvaluerefer parent exp parentexp catch properti not found except propertynotfoundexcept log warn properti found get messag getmessag","""java/org/apache/el/parser/AstIdentifier.java""","3","3","3","1","13","0","12","0","1","0","0","9","9","9","0","9","0","1","0","8","174","17","131","46","72","26","54","82","35","47","6","6","6","3","2","0","27","27","27","17","normal"
"52440","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52440 Need to resolve EL variables when returning ValueReferences Includes a new test case.","Bug 52440  Wrong getValueReference behaviour with Facelets parameter expressions","wrong get valu refer getvaluerefer behaviour facelet paramet express","ValueExpression method getValueReference should return base object and property. But it returns null if ValueExpression is Facelets parameter.
Example:

someVar = #{concreteObject.property}

ValueExpression for #{someVar} return null from method getValueReference (guess because it is simple expression #{someVar}), but logicaly it should return parent expressions ValueReference (need hierachical ValueReference lookup).

I made workaround with Java Reflect API in my code and it illustrates problem:

ELContext elContext = FacesContext.getCurrentInstance().getELContext();
ValueReference reference = exp.getValueReference(elContext);
        
if (reference == null && exp instanceof TagValueExpressionUEL) {
	ValueExpressionImpl origExp = (ValueExpressionImpl) ((TagValueExpressionUEL) exp).getWrapped();
            
	// TODO: JR: find better way to get base and property. ! Code is not portable because uses Tomcat EL implementation details. ! 
	Field field = ReflectionUtils.findField(origExp.getClass(), EL_IMPL_VAR_PROPERTY);
	field.setAccessible(true);
	VariableMapper varMapper = (VariableMapper) ReflectionUtils.getField(field, origExp);
    field = ReflectionUtils.findField(origExp.getClass(), EL_IMPL_NODE_PROPERTY);
    field.setAccessible(true);
    SimpleNode node = (SimpleNode) ReflectionUtils.getField(field, origExp);

    if (varMapper != null && node != null) {
		ValueExpression parentExp = varMapper.resolveVariable(node.getImage());
        if (parentExp != null) {
			try {
				reference = parentExp.getValueReference(elContext);

                if (reference == null) {
					reference = getValueReference(parentExp);
                }
            } catch (PropertyNotFoundException e) {
				LOG.warn(""Property not found: "" + e.getMessage());
            }
        }
    }
}","valu express valueexpress method get valu refer getvaluerefer return base object properti return null valu express valueexpress facelet paramet exampl some var somevar concret object concreteobject properti valu express valueexpress some var somevar return null method get valu refer getvaluerefer guess simpl express some var somevar logicali return parent express valu refer valuerefer need hierach valu refer valuerefer lookup made workaround java reflect api code illustr problem context elcontext el context elcontext face context facescontext get current instanc getcurrentinst get context getelcontext valu refer valuerefer refer exp get valu refer getvaluerefer el context elcontext refer null exp instanceof tag valu express tagvalueexpressionuel valu express impl valueexpressionimpl orig exp origexp valu express impl valueexpressionimpl tag valu express tagvalueexpressionuel exp get wrap getwrap jr find better way get base properti code portabl us tomcat implement detail field field reflect util reflectionutil find field findfield orig exp origexp get class getclass impl properti field set access setaccess true variabl mapper variablemapp var mapper varmapp variabl mapper variablemapp reflect util reflectionutil get field getfield field orig exp origexp field reflect util reflectionutil find field findfield orig exp origexp get class getclass impl node properti field set access setaccess true simpl node simplenod node simpl node simplenod reflect util reflectionutil get field getfield field orig exp origexp var mapper varmapp null node null valu express valueexpress parent exp parentexp var mapper varmapp resolv variabl resolvevari node get imag getimag parent exp parentexp null tri refer parent exp parentexp get valu refer getvaluerefer el context elcontext refer null refer get valu refer getvaluerefer parent exp parentexp catch properti not found except propertynotfoundexcept log warn properti found get messag getmessag","""test/org/apache/el/TestValueExpressionImpl.java""","1","1","1","1","23","4","16","1","1","0","0","7","7","7","0","7","0","0","0","7","216","49","140","97","96","27","100","108","73","35","1","1","1","1","0","0","7","7","7","7","normal"
"52443","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52443 Move the default Realm for the embedded case to the Engine","Bug 52443  Tomcat#defaultRealm shares Realm instance between web applications, resulting in INFO log message from lifecycle","tomcat default realm defaultrealm share realm instanc web applic result info log messag lifecycl","","","""test/org/apache/catalina/mbeans/TestRegistration.java""","2","2","2","1","25","2","20","2","1","4","2","6","6","2","1","6","0","5","0","1","220","29","156","42","112","36","83","98","40","58","6","6","8","1","1","0","12","12","14","6","minor"
"52443","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52443 Move the default Realm for the embedded case to the Engine","Bug 52443  Tomcat#defaultRealm shares Realm instance between web applications, resulting in INFO log message from lifecycle","tomcat default realm defaultrealm share realm instanc web applic result info log messag lifecycl","","","""java/org/apache/catalina/startup/Tomcat.java""","1","1","1","1","12","0","7","4","5","3","2","49","49","46","14","49","0","1","5","43","1050","96","615","320","408","340","222","307","128","179","7","7","7","1","3","1","82","82","82","49","minor"
"52444","20","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52444 Remove need to load classes unless they actually match an HandlesTypes entry","Bug 52444  Classloading-based ServletContainerInitializer @HandlesTypes processing can result in long startup times","classload base classloadingbas servlet contain initi servletcontaineriniti handl type handlestyp process result long startup time","See 52326 for background, noting particularly the following:

""As long as SCI processing involves expensive classloading, larger applications will suffer from long startup times and thus be encouraged to ""shut off"" this functionality via metadata-complete='true'.""

This issue, then, is intended to address classloading-based approach to @HandlesTypes processing by replacing it with something faster and generally less problematic.  ASM would be one way to get it done.","see background note particularli follow long sci process involv expens classload larger applic suffer long startup time thu encourag shut function via metadata complet metadatacomplet true issu intend address classload base classloadingbas approach handl type handlestyp process replac someth faster gener le problemat asm would one way get done","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","7","1","38","3","29","5","3","1","8","55","55","54","15","55","0","5","38","12","2458","319","1744","415","1207","396","813","1229","409","820","37","37","43","12","6","0","388","388","429","98","enhancement"
"52444","20","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52444 Remove need to load classes unless they actually match an HandlesTypes entry","Bug 52444  Classloading-based ServletContainerInitializer @HandlesTypes processing can result in long startup times","classload base classloadingbas servlet contain initi servletcontaineriniti handl type handlestyp process result long startup time","See 52326 for background, noting particularly the following:

""As long as SCI processing involves expensive classloading, larger applications will suffer from long startup times and thus be encouraged to ""shut off"" this functionality via metadata-complete='true'.""

This issue, then, is intended to address classloading-based approach to @HandlesTypes processing by replacing it with something faster and generally less problematic.  ASM would be one way to get it done.","see background note particularli follow long sci process involv expens classload larger applic suffer long startup time thu encourag shut function via metadata complet metadatacomplet true issu intend address classload base classloadingbas approach handl type handlestyp process replac someth faster gener le problemat asm would one way get done","""java/org/apache/tomcat/util/bcel/classfile/JavaClass.java""","3","3","3","1","16","0","12","4","2","1","2","12","12","11","14","12","0","1","0","11","285","28","179","54","108","85","111","148","57","91","13","13","14","3","4","0","37","37","38","14","enhancement"
"52444","20","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52444 Remove need to load classes unless they actually match an HandlesTypes entry","Bug 52444  Classloading-based ServletContainerInitializer @HandlesTypes processing can result in long startup times","classload base classloadingbas servlet contain initi servletcontaineriniti handl type handlestyp process result long startup time","See 52326 for background, noting particularly the following:

""As long as SCI processing involves expensive classloading, larger applications will suffer from long startup times and thus be encouraged to ""shut off"" this functionality via metadata-complete='true'.""

This issue, then, is intended to address classloading-based approach to @HandlesTypes processing by replacing it with something faster and generally less problematic.  ASM would be one way to get it done.","see background note particularli follow long sci process involv expens classload larger applic suffer long startup time thu encourag shut function via metadata complet metadatacomplet true issu intend address classload base classloadingbas approach handl type handlestyp process replac someth faster gener le problemat asm would one way get done","""test/org/apache/catalina/startup/TestContextConfigAnnotation.java""","1","1","1","1","11","0","9","0","3","0","0","24","24","24","0","24","0","1","0","23","366","41","281","135","193","44","198","227","100","127","2","2","2","1","1","0","26","26","26","24","enhancement"
"52445","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52445 Do not assume method expressions have exactly three elements Includes a test case","Bug 52445  Methodexpression with arguments fails on nested properties","methodexpress argument fail nest properti","","","""java/org/apache/el/parser/AstValue.java""","3","3","3","1","17","0","15","1","3","0","2","14","14","14","2","14","0","4","0","10","338","40","256","84","162","42","118","162","68","94","8","8","10","4","3","0","43","43","53","20","normal"
"52445","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52445 Do not assume method expressions have exactly three elements Includes a test case","Bug 52445  Methodexpression with arguments fails on nested properties","methodexpress argument fail nest properti","","","""test/org/apache/el/TestMethodExpressionImpl.java""","1","1","1","1","9","0","8","0","1","0","0","31","31","31","2","31","0","0","0","31","402","50","319","186","204","33","154","191","118","73","2","2","2","1","1","0","36","36","36","31","normal"
"52461","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52461 Don't assume file based URLs when checking last modified times for global and host level web.xml files Patch provided by violetagg","Bug 52461  java.lang.IllegalArgumentException: URI scheme is not ""file"" is thrown in ContextConfig.getDefaultWebXmlFragment","java lang illeg argument except illegalargumentexcept uri scheme file thrown context config contextconfig get default web xml fragment getdefaultwebxmlfrag","","","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","7","1","37","3","28","5","3","1","8","57","57","56","16","57","0","5","38","14","2477","331","1742","419","1199","405","812","1229","411","818","37","37","43","11","6","0","387","387","428","99","normal"
"52474","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52474 Ensure leading and trailing white space is removed from lister class names extracted from TLD files.","Bug 52474  Do not load listeners declared with blank spaces on tld file.","load listen declar blank space tld file","","","""java/org/apache/catalina/startup/TldRuleSet.java""","1","1","1","1","8","0","5","2","4","0","0","11","11","11","4","11","0","0","0","11","188","49","80","35","30","59","28","47","26","21","4","4","4","1","3","1","15","15","15","11","normal"
"52480","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52480 When converting class path entries from URLs to files/directories, ensure that any URL encoded characters are converted. Fixes JSP compilation with javac when Tomcat is installed at a path that includes spaces.","Bug 52480  TC7 + AntCompiler problems with whitespace in pathname","c7 tc7 ant compil antcompil problem whitespac pathnam","","","""java/org/apache/catalina/loader/WebappLoader.java""","3","3","4","1","23","3","15","4","1","0","3","38","38","38","11","38","0","7","4","27","1180","247","666","212","449","268","336","481","181","300","26","26","29","11","5","0","146","146","154","73","major"
"52500","44","Christopher Schultz","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52500 Added configurable mechanism to retrieve user names from X509 client certificates. Based on a patch provided by Michael Furman.","Bug 52500  Improve client certificate authentication","improv client certif authent","","","""java/org/apache/catalina/realm/RealmBase.java""","4","4","4","2","23","2","15","5","2","3","7","47","50","47","11","50","1","2","14","33","1394","240","826","223","511","331","384","590","198","392","53","53","63","21","6","0","201","201","226","98","enhancement"
"52511","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52511 Don't log an exception just because WEB-INF/classes does not exist","Bug 52511  Exception logged in annotation scanning for web apps without /WEB-INF/classes","except log annot scan web app without web inf class","","","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","7","1","37","3","28","5","3","1","8","57","57","56","16","57","0","5","38","14","2475","327","1744","417","1203","405","813","1230","410","820","37","37","43","11","6","0","389","389","430","99","regression"
"52543","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52543 Provide a meaningful error message when writing more response headers than permitted","Bug 52543  Exception","except","SEVERE: Error finishing response
java.lang.ArrayIndexOutOfBoundsException
	at java.lang.System.arraycopy(Native Method)
	at org.apache.coyote.http11.AbstractOutputBuffer.write(AbstractOutputBuffer.java:495)
	at org.apache.coyote.http11.AbstractOutputBuffer.sendStatus(AbstractOutputBuffer.java:337)
	at org.apache.coyote.http11.AbstractHttp11Processor.prepareResponse(AbstractHttp11Processor.java:1418)
	at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:756)
	at org.apache.coyote.Response.action(Response.java:168)
	at org.apache.coyote.http11.AbstractOutputBuffer.endRequest(AbstractOutputBuffer.java:310)
	at org.apache.coyote.http11.InternalOutputBuffer.endRequest(InternalOutputBuffer.java:158)
	at org.apache.coyote.http11.AbstractHttp11Processor.endRequest(AbstractHttp11Processor.java:1586)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1022)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.Thread.run(Thread.java:722)

big application i dont know why its happens
may be due to the fact that twice as add some cookie","sever error finish respons java lang array index out of bound except arrayindexoutofboundsexcept java lang system arraycopi nativ method apach coyot http11 abstract output buffer abstractoutputbuff write abstract output buffer abstractoutputbuff java apach coyot http11 abstract output buffer abstractoutputbuff send statu sendstatu abstract output buffer abstractoutputbuff java apach coyot http11 abstract http11 processor abstracthttp11processor prepar respons preparerespons abstract http11 processor abstracthttp11processor java apach coyot http11 abstract http11 processor abstracthttp11processor action abstract http11 processor abstracthttp11processor java apach coyot respons action respons java apach coyot http11 abstract output buffer abstractoutputbuff end request endrequest abstract output buffer abstractoutputbuff java apach coyot http11 intern output buffer internaloutputbuff end request endrequest intern output buffer internaloutputbuff java apach coyot http11 abstract http11 processor abstracthttp11processor end request endrequest abstract http11 processor abstracthttp11processor java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java big applic dont know happen may due fact twice add cooki","""java/org/apache/coyote/http11/AbstractOutputBuffer.java""","2","2","2","1","19","2","10","6","2","0","2","20","23","23","10","23","0","0","6","17","544","123","236","71","137","186","134","183","70","113","7","5","8","4","3","1","50","48","57","25","normal"
"52547","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52547 Ensure byteCount is reset at the end of a HTTP 1.0 request","Bug 52547  incorrect byeswritten log after completed async request under http1.0","incorrect byeswritten log complet async request http1","","","""java/org/apache/coyote/http11/AbstractOutputBuffer.java""","2","2","2","1","18","2","10","6","2","0","2","21","24","24","10","24","0","1","6","17","560","124","247","73","144","190","139","190","71","119","7","5","8","4","3","1","52","50","59","26","normal"
"52558","590","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52558 Refactor CometConnectionManagerValve so that it does not prevent the session from being serialized in when running in a cluster.","Bug 52558  CometConnectionManagerValve is adding non-serializable Request[] to Session","comet connect manag valv cometconnectionmanagervalv ad non serializ nonserializ request session","CometConnectionManagerValve is adding HttpServletRequest[] to HttpSession which is preventing the Session being serialized in a Clustered setup.

We're resolving this locally using a serializable ConnectionList class with a transient Request[]

i.e.

public class ConnectionList implements Serializable {
	
	transient Request[] connectionList = null;
	
	ConnectionList(Request[] connectionList){
		this.connectionList = connectionList;
	}
	
	public Request[] get(){
		return connectionList;
	}
}","comet connect manag valv cometconnectionmanagervalv ad http servlet request httpservletrequest http session httpsession prevent session serial cluster setup re resolv local use serializ connect list connectionlist class transient request public class connect list connectionlist implement serializ transient request connect list connectionlist null connect list connectionlist request connect list connectionlist connect list connectionlist connect list connectionlist public request get return connect list connectionlist","""java/org/apache/catalina/valves/CometConnectionManagerValve.java""","4","4","4","1","27","1","18","6","1","0","0","8","8","8","2","8","0","0","2","6","315","41","186","64","106","88","81","117","52","65","12","12","17","1","7","0","32","32","38","8","enhancement"
"52577","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52577 Only reset the encoder information when the 'has getWriter()' been called flag is reset. Includes a simple test case","Bug 52577  Response output written in filter can be truncated","respons output written filter truncat","Due to changes 1229726, 1229727 and 1229728 output written to response in the filter can be truncated up to 8192 bytes. Consider the following scenario:

- you have a filter that invoke getWriter() before chain.doFilter(request, responseWrapper)


- responseWrapper overrides getWriter() method and returns some
  buffered writer, not the real one


- during execution of chain.doFilter there is a forward


Before the forward ApplicationDispather calls resetBuffer on response, which in turn calls reset() on OutputBuffer, which sets gotEnc field to false. This field is initialized in the setConverter() method which is called from response.getWriter(), but since our wrapperResponse overrides getWriter(), OutputBuffer.setConverter() never called and OutputBuffer still has gotEnc = false.


Response's close() and flushBuffer() methods call OutputBuffer's flush(), but since gotEnc == false, conv.flushBuffer() is not called:


if (gotEnc && conv != null) {
    conv.flushBuffer();
}


A workaround for us is to implement getWriter() method in responseWrapper like this:


public Writer getWriter() {
  Writer originalWriter = originalResponse.getWriter();//save for future processing
  return ourWriter;
}


Maybe you should change flushing to something like that:


if (conv != null) {
    conv.flushBuffer();
}


because you invoke conv.convert() without any checks in the write*() methods and it seems like conv is never null.","due chang output written respons filter truncat byte consid follow scenario filter invok get writer getwrit chain do filter dofilt request respons wrapper responsewrapp respons wrapper responsewrapp overrid get writer getwrit method return buffer writer real one execut chain do filter dofilt forward forward applic dispath applicationdispath call reset buffer resetbuff respons turn call reset output buffer outputbuff set got enc gotenc field fals field initi set convert setconvert method call respons get writer getwrit sinc wrapper respons wrapperrespons overrid get writer getwrit output buffer outputbuff set convert setconvert never call output buffer outputbuff still got enc gotenc fals respons close flush buffer flushbuff method call output buffer outputbuff flush sinc got enc gotenc fals conv flush buffer flushbuff call got enc gotenc conv null conv flush buffer flushbuff workaround u implement get writer getwrit method respons wrapper responsewrapp like public writer get writer getwrit writer origin writer originalwrit origin respons originalrespons get writer getwrit save futur process return our writer ourwrit mayb chang flush someth like conv null conv flush buffer flushbuff invok conv convert without check write method seem like conv never null","""java/org/apache/catalina/connector/OutputBuffer.java""","2","2","2","1","13","1","8","2","2","0","2","29","29","29","13","29","0","1","2","26","604","162","287","83","150","156","117","184","59","125","7","7","8","3","2","1","65","65","70","33","normal"
"52577","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52577 Only reset the encoder information when the 'has getWriter()' been called flag is reset. Includes a simple test case","Bug 52577  Response output written in filter can be truncated","respons output written filter truncat","Due to changes 1229726, 1229727 and 1229728 output written to response in the filter can be truncated up to 8192 bytes. Consider the following scenario:

- you have a filter that invoke getWriter() before chain.doFilter(request, responseWrapper)


- responseWrapper overrides getWriter() method and returns some
  buffered writer, not the real one


- during execution of chain.doFilter there is a forward


Before the forward ApplicationDispather calls resetBuffer on response, which in turn calls reset() on OutputBuffer, which sets gotEnc field to false. This field is initialized in the setConverter() method which is called from response.getWriter(), but since our wrapperResponse overrides getWriter(), OutputBuffer.setConverter() never called and OutputBuffer still has gotEnc = false.


Response's close() and flushBuffer() methods call OutputBuffer's flush(), but since gotEnc == false, conv.flushBuffer() is not called:


if (gotEnc && conv != null) {
    conv.flushBuffer();
}


A workaround for us is to implement getWriter() method in responseWrapper like this:


public Writer getWriter() {
  Writer originalWriter = originalResponse.getWriter();//save for future processing
  return ourWriter;
}


Maybe you should change flushing to something like that:


if (conv != null) {
    conv.flushBuffer();
}


because you invoke conv.convert() without any checks in the write*() methods and it seems like conv is never null.","due chang output written respons filter truncat byte consid follow scenario filter invok get writer getwrit chain do filter dofilt request respons wrapper responsewrapp respons wrapper responsewrapp overrid get writer getwrit method return buffer writer real one execut chain do filter dofilt forward forward applic dispath applicationdispath call reset buffer resetbuff respons turn call reset output buffer outputbuff set got enc gotenc field fals field initi set convert setconvert method call respons get writer getwrit sinc wrapper respons wrapperrespons overrid get writer getwrit output buffer outputbuff set convert setconvert never call output buffer outputbuff still got enc gotenc fals respons close flush buffer flushbuff method call output buffer outputbuff flush sinc got enc gotenc fals conv flush buffer flushbuff call got enc gotenc conv null conv flush buffer flushbuff workaround u implement get writer getwrit method respons wrapper responsewrapp like public writer get writer getwrit writer origin writer originalwrit origin respons originalrespons get writer getwrit save futur process return our writer ourwrit mayb chang flush someth like conv null conv flush buffer flushbuff invok conv convert without check write method seem like conv never null","""java/org/apache/catalina/connector/Response.java""","2","2","3","1","18","1","10","6","4","0","2","71","71","71","16","71","0","3","3","65","1692","319","854","234","496","525","360","552","183","369","12","12","19","8","3","1","191","191","223","129","normal"
"52577","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52577 Only reset the encoder information when the 'has getWriter()' been called flag is reset. Includes a simple test case","Bug 52577  Response output written in filter can be truncated","respons output written filter truncat","Due to changes 1229726, 1229727 and 1229728 output written to response in the filter can be truncated up to 8192 bytes. Consider the following scenario:

- you have a filter that invoke getWriter() before chain.doFilter(request, responseWrapper)


- responseWrapper overrides getWriter() method and returns some
  buffered writer, not the real one


- during execution of chain.doFilter there is a forward


Before the forward ApplicationDispather calls resetBuffer on response, which in turn calls reset() on OutputBuffer, which sets gotEnc field to false. This field is initialized in the setConverter() method which is called from response.getWriter(), but since our wrapperResponse overrides getWriter(), OutputBuffer.setConverter() never called and OutputBuffer still has gotEnc = false.


Response's close() and flushBuffer() methods call OutputBuffer's flush(), but since gotEnc == false, conv.flushBuffer() is not called:


if (gotEnc && conv != null) {
    conv.flushBuffer();
}


A workaround for us is to implement getWriter() method in responseWrapper like this:


public Writer getWriter() {
  Writer originalWriter = originalResponse.getWriter();//save for future processing
  return ourWriter;
}


Maybe you should change flushing to something like that:


if (conv != null) {
    conv.flushBuffer();
}


because you invoke conv.convert() without any checks in the write*() methods and it seems like conv is never null.","due chang output written respons filter truncat byte consid follow scenario filter invok get writer getwrit chain do filter dofilt request respons wrapper responsewrapp respons wrapper responsewrapp overrid get writer getwrit method return buffer writer real one execut chain do filter dofilt forward forward applic dispath applicationdispath call reset buffer resetbuff respons turn call reset output buffer outputbuff set got enc gotenc field fals field initi set convert setconvert method call respons get writer getwrit sinc wrapper respons wrapperrespons overrid get writer getwrit output buffer outputbuff set convert setconvert never call output buffer outputbuff still got enc gotenc fals respons close flush buffer flushbuff method call output buffer outputbuff flush sinc got enc gotenc fals conv flush buffer flushbuff call got enc gotenc conv null conv flush buffer flushbuff workaround u implement get writer getwrit method respons wrapper responsewrapp like public writer get writer getwrit writer origin writer originalwrit origin respons originalrespons get writer getwrit save futur process return our writer ourwrit mayb chang flush someth like conv null conv flush buffer flushbuff invok conv convert without check write method seem like conv never null","""test/org/apache/catalina/connector/TestOutputBuffer.java""","3","3","3","1","22","4","18","1","2","0","2","3","3","3","2","3","0","0","1","2","120","25","78","37","43","19","55","66","37","29","5","5","5","1","1","0","10","10","10","3","normal"
"52577","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52577 Only reset the encoder information when the 'has getWriter()' been called flag is reset. Includes a simple test case","Bug 52577  Response output written in filter can be truncated","respons output written filter truncat","Due to changes 1229726, 1229727 and 1229728 output written to response in the filter can be truncated up to 8192 bytes. Consider the following scenario:

- you have a filter that invoke getWriter() before chain.doFilter(request, responseWrapper)


- responseWrapper overrides getWriter() method and returns some
  buffered writer, not the real one


- during execution of chain.doFilter there is a forward


Before the forward ApplicationDispather calls resetBuffer on response, which in turn calls reset() on OutputBuffer, which sets gotEnc field to false. This field is initialized in the setConverter() method which is called from response.getWriter(), but since our wrapperResponse overrides getWriter(), OutputBuffer.setConverter() never called and OutputBuffer still has gotEnc = false.


Response's close() and flushBuffer() methods call OutputBuffer's flush(), but since gotEnc == false, conv.flushBuffer() is not called:


if (gotEnc && conv != null) {
    conv.flushBuffer();
}


A workaround for us is to implement getWriter() method in responseWrapper like this:


public Writer getWriter() {
  Writer originalWriter = originalResponse.getWriter();//save for future processing
  return ourWriter;
}


Maybe you should change flushing to something like that:


if (conv != null) {
    conv.flushBuffer();
}


because you invoke conv.convert() without any checks in the write*() methods and it seems like conv is never null.","due chang output written respons filter truncat byte consid follow scenario filter invok get writer getwrit chain do filter dofilt request respons wrapper responsewrapp respons wrapper responsewrapp overrid get writer getwrit method return buffer writer real one execut chain do filter dofilt forward forward applic dispath applicationdispath call reset buffer resetbuff respons turn call reset output buffer outputbuff set got enc gotenc field fals field initi set convert setconvert method call respons get writer getwrit sinc wrapper respons wrapperrespons overrid get writer getwrit output buffer outputbuff set convert setconvert never call output buffer outputbuff still got enc gotenc fals respons close flush buffer flushbuff method call output buffer outputbuff flush sinc got enc gotenc fals conv flush buffer flushbuff call got enc gotenc conv null conv flush buffer flushbuff workaround u implement get writer getwrit method respons wrapper responsewrapp like public writer get writer getwrit writer origin writer originalwrit origin respons originalrespons get writer getwrit save futur process return our writer ourwrit mayb chang flush someth like conv null conv flush buffer flushbuff invok conv convert without check write method seem like conv never null","""test/org/apache/catalina/connector/TestOutputBuffer.java""","3","3","3","1","22","4","18","1","2","0","2","3","3","3","2","3","0","0","1","2","120","25","78","37","43","19","55","66","37","29","5","5","5","1","1","0","10","10","10","3","normal"
"52586","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52586 Remove hack that changes path info when forwarding to an error page","Bug 52586  When requests are forwarded, the request attribute javax.servlet.forward.path_info is assigned an incorrect value.","request forward request attribut javax servlet forward path info assign incorrect valu","As per the servlet spec, the values for:

javax.servlet.forward.request_uri
javax.servlet.forward.context
javax.servlet.forward.servlet_path
javax.servlet.forward.path_info
javax.servlet.forward.query_string

MUST be set to the values from the very first servlet that serviced the current request.  However, it seems that Tomcat is populating path_info with the value of the LAST path_info serviced in the request (i.e. the final servlet that serviced the request).  It's possible the other value assignments are afflicted by similar defects, I've not explicitly tested for this.

Because of this issue, it's impossible to correctly reconstruct the original request's URI piecemeal by concatenating context+servlet_path+path_info+?+query_string, since path_info will contain the path to another servlet and thus this concatenation will produce a probably invalid URI target.

Therefore, creating ""click here to retry"" links is impossible without workaround code.

The critical issue here is the deviation from the servlet spec, which spells out the behavior of those attributes.","servlet spec valu javax servlet forward request uri javax servlet forward context javax servlet forward servlet path javax servlet forward path info javax servlet forward queri string must set valu first servlet servic current request howev seem tomcat popul path info valu last path info servic request final servlet servic request possibl valu assign afflict similar defect explicitli test issu imposs correctli reconstruct origin request uri piecem concaten context servlet path path info queri string sinc path info contain path anoth servlet thu concaten produc probabl invalid uri target therefor creat click retri link imposs without workaround code critic issu deviat servlet spec spell behavior attribut","""java/org/apache/catalina/core/StandardHostValve.java""","5","5","5","1","43","4","26","12","2","1","4","9","9","8","2","9","1","4","0","4","506","81","282","77","183","143","127","177","60","117","12","12","15","5","4","1","48","48","52","17","major"
"52587","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52587 Ensure that if it is necessary to fall back to the default NullRealm, the NullRealm instance is created early enough for it to be correctly initialised.","Bug 52587  NPE in authenticator when no realm/resource is defined","npe authent realm resourc defin","When no Realm is available to authenticate against, an NPE is thrown.

STR:

1. Start with a stock 7.0.25 and modify server.xml:
2. Comment-out <Resource> in <GlobalNamingResources>
3. Comment-out <Realm> in <Engine>
4. Deploy manager app and try to log in

java.lang.NullPointerException
	org.apache.catalina.realm.RealmBase.authenticate(RealmBase.java:340)
	org.apache.catalina.authenticator.BasicAuthenticator.authenticate(BasicAuthenticator.java:158)
	org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:544)
	org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
	org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
	org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
	org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
	org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1600)
	java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	java.lang.Thread.run(Thread.java:680)


Clearly, this is a pathological setup, but it might be nice to get a decent error message instead of an NPE.","realm avail authent npe thrown str start stock modifi server xml comment out commentout resourc global name resourc globalnamingresourc comment out commentout realm engin deploy manag app tri log java lang null pointer except nullpointerexcept apach catalina realm realm base realmbas authent realm base realmbas java apach catalina authent basic authent basicauthent authent basic authent basicauthent java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java clearli patholog setup might nice get decent error messag instead npe","""java/org/apache/catalina/core/StandardEngine.java""","2","2","2","1","12","0","7","3","3","0","1","26","26","26","8","26","0","1","3","22","487","86","268","109","126","133","112","173","78","95","12","12","15","4","7","1","58","58","63","31","minor"
"52591","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52591 Skip attributes where getters throw UnsupportedOperationException","Bug 52591  UnsupportedOperationException logged when fetching BasicDataSource 'loginTimeout'","unsupport oper except unsupportedoperationexcept log fetch basic data sourc basicdatasourc login timeout logintimeout","With a BasicDataSource configured (using a <Resource>), simply list the available MBeans and this exception will be emitted to stdout:

SEVERE: Error getting attribute Catalina:type=DataSource,context=/context,host=localhost,class=javax.sql.DataSource,name=""jdbc/myDataSource"" loginTimeout
javax.management.RuntimeOperationsException: Exception invoking method loginTimeout
        at org.apache.tomcat.util.modeler.BaseModelMBean.getAttribute(BaseModelMBean.java:197)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:666)
        at com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:638)
        at org.apache.catalina.mbeans.MBeanDumper.dumpBeans(MBeanDumper.java:81)
        at org.apache.catalina.manager.JMXProxyServlet.listBeans(JMXProxyServlet.java:166)
        at org.apache.catalina.manager.JMXProxyServlet.doGet(JMXProxyServlet.java:121)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
[...]
Caused by: java.lang.UnsupportedOperationException: Not supported by BasicDataSource
        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getLoginTimeout(BasicDataSource.java:1083)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)


This exception does not cause the request to fail, but definitely puts an ugly stack trace in catalina.out. It might be better to catch UnsupportedOperationException and emit a one-line error message -- one that isn't SEVERE.","basic data sourc basicdatasourc configur use resourc simpli list avail bean mbean except emit stdout sever error get attribut catalina type data sourc datasourc context context host localhost class javax sql data sourc datasourc name jdbc my data sourc mydatasourc login timeout logintimeout javax manag runtim oper except runtimeoperationsexcept except invok method login timeout logintimeout apach tomcat util model base model bean basemodelmbean get attribut getattribut base model bean basemodelmbean java sun jmx interceptor default bean server interceptor defaultmbeanserverinterceptor get attribut getattribut default bean server interceptor defaultmbeanserverinterceptor java sun jmx mbeanserv jmx bean server jmxmbeanserv get attribut getattribut jmx bean server jmxmbeanserv java apach catalina mbean bean dumper mbeandump dump bean dumpbean bean dumper mbeandump java apach catalina manag proxi servlet jmxproxyservlet list bean listbean proxi servlet jmxproxyservlet java apach catalina manag proxi servlet jmxproxyservlet do get doget proxi servlet jmxproxyservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java caus java lang unsupport oper except unsupportedoperationexcept support basic data sourc basicdatasourc apach tomcat dbcp dbcp basic data sourc basicdatasourc get login timeout getlogintimeout basic data sourc basicdatasourc java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method except caus request fail definit put ugli stack trace catalina might better catch unsupport oper except unsupportedoperationexcept emit one line onelin error messag one isn sever","""java/org/apache/catalina/mbeans/MBeanDumper.java""","8","8","9","4","43","2","37","2","1","3","2","3","3","0","0","3","0","1","0","2","174","18","128","35","89","28","79","105","36","69","17","17","19","9","8","0","25","25","27","14","minor"
"52606","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52606 Ensure replayed POST bodies are available when using AJP","Bug 52606  FORM authentication POST replay broken for AJP","form authent post replay broken ajp","","","""java/org/apache/coyote/ajp/AbstractAjpProcessor.java""","5","4","5","2","30","3","21","4","3","0","5","26","30","30","24","30","0","0","10","20","1132","198","683","171","502","254","384","507","156","351","34","34","38","12","5","0","134","122","145","53","regression"
"52607","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52607 The ExtensionValidator needs to be aware of the classes in the shared and common loaders.","Bug 52607  It is not well defined how ""Dependencies on extensions"" mechanism can be used in Tomcat","well defin depend extens mechan use tomcat","","","""java/org/apache/catalina/util/ExtensionValidator.java""","7","7","8","3","49","2","35","11","1","6","4","6","6","0","4","6","0","4","0","2","446","51","264","98","170","131","119","169","77","92","14","14","15","10","5","1","45","45","48","23","normal"
"52607","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52607 The ExtensionValidator needs to be aware of the classes in the shared and common loaders.","Bug 52607  It is not well defined how ""Dependencies on extensions"" mechanism can be used in Tomcat","well defin depend extens mechan use tomcat","","","""java/org/apache/catalina/core/StandardServer.java""","2","2","2","1","15","1","9","4","1","0","2","39","39","39","18","39","0","1","6","32","873","181","443","146","251","252","213","309","121","188","21","21","21","12","5","1","89","89","90","57","normal"
"52666","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52666 Correct coercion order in EL for A {==,!=,eq,ne} B","Bug 52666  EL should coerce String to Integer in equals operation","coerc string integ equal oper","","","""java/org/apache/el/lang/ELSupport.java""","6","6","8","5","26","0","22","3","1","15","1","16","16","1","0","16","0","0","2","14","482","33","365","62","240","86","128","223","49","174","17","17","23","17","3","0","99","97","139","94","normal"
"52666","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52666 Correct coercion order in EL for A {==,!=,eq,ne} B","Bug 52666  EL should coerce String to Integer in equals operation","coerc string integ equal oper","","","""test/org/apache/el/lang/TestELSupport.java""","1","1","1","1","3","0","3","0","4","1","0","20","14","19","8","20","0","1","0","19","135","19","98","52","31","18","30","51","31","20","2","2","2","1","1","0","22","22","22","20","normal"
"52666","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52666 Correct coercion order in EL for A {==,!=,eq,ne} B","Bug 52666  EL should coerce String to Integer in equals operation","coerc string integ equal oper","","","""test/org/apache/el/lang/TestELSupport.java""","1","1","1","1","3","0","3","0","4","1","0","20","14","19","8","20","0","1","0","19","135","19","98","52","31","18","30","51","31","20","2","2","2","1","1","0","22","22","22","20","normal"
"52669","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52669 Correct regression introduced by the invalid assumptions made in the hack for Eclipse to address https://issues.apache.org/bugzilla/show_bug.cgi?id=51741","Bug 52669  Annotation processing, in WEB-INF/classes, for Servlets/Listeners/Filters is skipped when the web app is not extracted, classes do not have packages and for some embedded scenarios","annot process web inf class servlet listen filter skip web app extract class packag embed scenario","","","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","7","1","36","3","27","6","4","1","8","63","63","62","22","63","0","10","37","16","2624","340","1864","448","1279","420","859","1308","439","869","37","37","43","13","7","0","415","415","454","111","normal"
"52671","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52671 Log NPEs for attributes that are not set at debug.","Bug 52671  NIO Connector: Exception invoking method readBufSize / writeBufSize in the JMX Proxy Servlet","nio connector except invok method read buf size readbufs write buf size writebufs jmx proxi servlet","","","""java/org/apache/catalina/mbeans/MBeanDumper.java""","9","9","9","5","46","2","41","2","1","3","2","3","3","0","0","3","0","1","0","2","185","18","139","37","98","28","84","111","38","73","19","19","21","10","8","0","27","27","29","15","normal"
"52719","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52719 Correct theoretical resource leak during Jar validation","Bug 52719  An incomplete fix for the resource leak bug in WebappClassLoader.java","incomplet fix resourc leak webapp class loader webappclassload java","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","5","2","30","3","21","6","5","1","8","90","90","89","36","90","3","13","19","55","3418","537","2035","472","1408","853","931","1412","416","996","45","45","52","28","10","0","487","487","527","215","trivial"
"52723","17","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52723 Clean-up","Bug 52723  An incomplete fix for the resource leak bugs in StandardManager.java","incomplet fix resourc leak bug standard manag standardmanag java","","","""java/org/apache/catalina/session/StandardManager.java""","5","5","5","1","28","2","19","6","3","0","1","14","14","14","2","14","2","0","5","7","531","72","322","83","213","139","152","230","73","157","26","26","26","4","3","0","74","74","75","19","trivial"
"52724","13","Mark Emlyn David Thomas","Code clean-up. Add some finally blocks to close resources. Not really necessary since JVM is shutting down. BZ 52724.","Bug 52724  An incomplete fix for the resource leak bugs in Catalina.java","incomplet fix resourc leak bug catalina java","","","""java/org/apache/catalina/startup/Catalina.java""","2","2","2","1","18","2","14","2","3","0","2","34","34","34","10","34","0","1","9","24","868","168","534","123","370","171","258","355","116","239","17","17","19","10","3","0","95","95","100","46","enhancement"
"52725","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52725 Use constant rather than hard-coded package name since package name is meant to be configurable.","Bug 52725  org.apache.jasper.compiler.JspUtil#getTagHandlerClassName() does not use org.apache.jasper.Constants.TAG_FILE_PACKAGE_NAME","apach jasper compil jsp util jsputil get tag handler class name gettaghandlerclassnam use apach jasper constant tag file packag name","In the class org.apache.jasper.compiler.JspUtil, its method 

    public static String getTagHandlerClassName(String path, String urn,
            ErrorDispatcher err) throws JasperException {
        ...
    }

uses the string constants directly like ""org.apache.jsp.tag.web."", ""org.apache.jsp.tag.meta."".

But you know there is TAG_FILE_PACKAGE_NAME field in the class org.apache.jasper.Constants.


The code should be adjusted like below :

Constants.TAG_FILE_PACKAGE_NAME + "".web""
Constants.TAG_FILE_PACKAGE_NAME + "".meta""","class apach jasper compil jsp util jsputil method public static string get tag handler class name gettaghandlerclassnam string path string urn error dispatch errordispatch err throw jasper except jasperexcept us string constant directli like apach jsp tag web apach jsp tag meta know tag file packag name field class apach jasper constant code adjust like constant tag file packag name web constant tag file packag name meta","""java/org/apache/jasper/compiler/JspUtil.java""","4","4","4","2","21","1","16","4","2","39","6","41","41","2","2","41","2","3","0","36","1009","93","691","149","467","226","315","479","134","345","17","17","18","11","4","0","172","164","199","97","normal"
"52726","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52726 Clean-up. Avoid unlikely fd leak.","Bug 52726  An incomplete fix for the resource leak bug in MemoryUserDatabase.java","incomplet fix resourc leak memori user databas memoryuserdatabas java","","","""java/org/apache/catalina/users/MemoryUserDatabase.java""","2","2","2","1","18","1","12","4","4","0","2","31","31","31","11","31","1","0","0","30","813","166","450","138","273","198","207","304","116","188","16","16","16","3","4","0","77","77","82","33","critical"
"52727","14","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=52727 Code clean-up","Bug 52727  An incomplete fix for the resource leak bug in HostConfig.java","incomplet fix resourc leak host config hostconfig java","","","""java/org/apache/catalina/startup/HostConfig.java""","4","4","5","1","27","2","20","4","5","1","3","47","47","46","24","47","0","1","17","29","1594","236","1027","233","716","331","481","704","226","478","34","34","41","17","7","0","209","209","241","91","enhancement"
"52729","14","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=52729 Even if the end event fails, try and perform the close.","Bug 52729  An incomplete fix for the resource leak bug in CometConnectionManagerValve.java","incomplet fix resourc leak comet connect manag valv cometconnectionmanagervalv java","","","""java/org/apache/catalina/valves/CometConnectionManagerValve.java""","3","3","4","1","26","1","18","6","1","0","0","8","8","8","2","8","0","0","2","6","309","41","180","64","101","88","80","115","52","63","12","12","17","1","7","0","31","31","37","8","enhancement"
"52731","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52731 Clean-up code. Fixes potential resource leak although the problems that would trigger the leak are far more serious than the leak.","Bug 52731  An incomplete fix for the resource leak bug in JDTCompiler.java","incomplet fix resourc leak compil jdtcompil java","","","""java/org/apache/jasper/compiler/JDTCompiler.java""","5","5","5","1","44","2","41","1","4","0","0","14","14","14","3","14","1","2","1","10","484","41","409","137","280","38","209","279","125","154","27","27","27","5","5","0","70","70","70","20","enhancement"
"52732","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52732 Clean-up code. Fixes potential resource leak although the problems that would trigger the leak are far more serious than the leak.","Bug 52732  An incomplete fix for the resource leak bug in ExpressionFactory.java","incomplet fix resourc leak express factori expressionfactori java","","","""java/javax/el/ExpressionFactory.java""","4","4","4","1","23","0","18","3","5","5","5","9","13","8","0","13","0","3","0","10","294","28","216","53","141","52","83","119","47","72","18","18","18","5","3","0","41","41","44","17","enhancement"
"52758","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52758 Implement additional method added to JDT interface but not yet released","Bug 52758  Jasper illegally implements org.eclipse.jdt.internal.compiler.env.ICompilationUnit from Eclipse","jasper illeg implement jdt intern compil env compil unit icompilationunit","","","""java/org/apache/jasper/compiler/JDTCompiler.java""","5","5","5","1","47","2","44","1","4","0","0","13","13","13","3","13","1","2","1","9","478","40","405","135","279","36","208","277","124","153","27","27","27","5","5","0","69","69","69","19","normal"
"52760","1","Rainer Jung","BZ 52760: Fix expires filter mime type in javascript examples.","Bug 52760  Mime type for javascript incorrect  in documentation","mime type javascript incorrect document","","","""java/org/apache/catalina/filters/ExpiresFilter.java""","1","1","1","1","8","0","6","1","8","8","8","106","102","98","30","106","0","3","13","90","1600","176","866","286","457","558","350","531","205","326","20","20","29","7","3","1","180","179","199","120","normal"
"52767","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52767 Remoev reference to MySQL specific autoReconnect property","Bug 52767  Potential Bug or Inconsistency in JDBCRealm.java and JDBCAccessLogValve.java","potenti inconsist realm jdbcrealm java access log valv jdbcaccesslogvalv java","This is Ken Cheung, a Computer Science M.Phil. student. I observed some
code clones in Tomcat and found inconsistent code:

/tomcat/trunk/java/org/apache/catalina/realm/JDBCRealm.java

676	        if (driver == null) {
677	            try {
678	                Class<?> clazz = Class.forName(driverName);
679	                driver = (Driver) clazz.newInstance();
680	            } catch (Throwable e) {
681	                ExceptionUtils.handleThrowable(e);
682	                throw new SQLException(e.getMessage(), e);
683	            }
684	        }
685	
686	        // Open a new connection
687	        Properties props = new Properties();
688	        if (connectionName != null)
689	            props.put(""user"", connectionName);
690	        if (connectionPassword != null)
691	            props.put(""password"", connectionPassword);
692	        dbConnection = driver.connect(connectionURL, props);

/tomcat/trunk/java/org/apache/catalina/valves/JDBCAccessLogValve.java

566	        if (driver == null) {
567	            try {
568	                Class<?> clazz = Class.forName(driverName);
569	                driver = (Driver) clazz.newInstance();
570	            } catch (Throwable e) {
571	                ExceptionUtils.handleThrowable(e);
572	                throw new SQLException(e.getMessage(), e);
573	            }
574	        }
575	
576	        // Open a new connection
577	        Properties props = new Properties();
578	        props.put(""autoReconnect"", ""true"");
579	        if (connectionName != null) {
580	            props.put(""user"", connectionName);
581	        }
582	        if (connectionPassword != null) {
583	            props.put(""password"", connectionPassword);
584	        }
585	        conn = driver.connect(connectionURL, props);

Quick description of the inconsistency
Two code snippets are very similar code, but as you see, in JDBCRealm.java does not use ""props.put(""autoReconnect"", ""true"")"" while JDBCAccessLogValve.java has.

We thought it could be a potential bug or inconsistency. Hope this helps.","ken cheung comput scienc phil student observ code clone tomcat found inconsist code tomcat trunk java apach catalina realm realm jdbcrealm java driver null tri class clazz class for name fornam driver name drivernam driver driver clazz new instanc newinst catch throwabl except util exceptionutil handl throwabl handlethrow throw new except sqlexcept get messag getmessag open new connect properti prop new properti connect name connectionnam null prop put user connect name connectionnam connect password connectionpassword null prop put password connect password connectionpassword db connect dbconnect driver connect connect connectionurl prop tomcat trunk java apach catalina valv access log valv jdbcaccesslogvalv java driver null tri class clazz class for name fornam driver name drivernam driver driver clazz new instanc newinst catch throwabl except util exceptionutil handl throwabl handlethrow throw new except sqlexcept get messag getmessag open new connect properti prop new properti prop put auto reconnect autoreconnect true connect name connectionnam null prop put user connect name connectionnam connect password connectionpassword null prop put password connect password connectionpassword conn driver connect connect connectionurl prop quick descript inconsist two code snippet similar code see realm jdbcrealm java use prop put auto reconnect autoreconnect true access log valv jdbcaccesslogvalv java thought could potenti inconsist hope help","""java/org/apache/catalina/valves/JDBCAccessLogValve.java""","1","1","1","1","14","0","8","5","1","0","0","31","31","31","23","31","0","0","4","27","683","96","302","95","171","286","154","213","88","125","15","15","15","4","4","1","57","57","57","34","normal"
"52770","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52770 Fixes very rarely (if ever) used infinite timeouts on write","Bug 52770  Potential Bug or Inconsistency in NioBlockingSelector.java","potenti inconsist nio block selector nioblockingselector java","This is Ken Cheung, a Computer Science M.Phil. student. I observed some
code clones in Tomcat and found inconsistent code:

/tomcat/trunk/java/org/apache/tomcat/util/net/NioBlockingSelector.java

103	                try {
104	                    if ( att.getWriteLatch()==null || att.getWriteLatch().getCount()==0) att.startWriteLatch(1);
105	                    poller.add(att,SelectionKey.OP_WRITE,reference);
106	                    att.awaitWriteLatch(writeTimeout,TimeUnit.MILLISECONDS);
107	                }catch (InterruptedException ignore) {
108	                    Thread.interrupted();
109	                }
110	                if ( att.getWriteLatch()!=null && att.getWriteLatch().getCount()> 0) {
111	                    //we got interrupted, but we haven't received notification from the poller.
112	                    keycount = 0;
113	                }else {
114	                    //latch countdown has happened
115	                    keycount = 1;
116	                    att.resetWriteLatch();
117	                }
118	
119	                if (writeTimeout > 0 && (keycount == 0))
120	                    timedout = (System.currentTimeMillis() - time) >= writeTimeout;

/tomcat/trunk/java/org/apache/tomcat/util/net/NioBlockingSelector.java

164	                try {
165	                    if ( att.getReadLatch()==null || att.getReadLatch().getCount()==0) att.startReadLatch(1);
166	                    poller.add(att,SelectionKey.OP_READ, reference);
167	                    if (readTimeout < 0) {
168	                        att.awaitReadLatch(Long.MAX_VALUE, TimeUnit.MILLISECONDS);
169	                    } else {
170	                        att.awaitReadLatch(readTimeout, TimeUnit.MILLISECONDS);
171	                    }
172	                }catch (InterruptedException ignore) {
173	                    Thread.interrupted();
174	                }
175	                if ( att.getReadLatch()!=null && att.getReadLatch().getCount()> 0) {
176	                    //we got interrupted, but we haven't received notification from the poller.
177	                    keycount = 0;
178	                }else {
179	                    //latch countdown has happened
180	                    keycount = 1;
181	                    att.resetReadLatch();
182	                }
183	                if (readTimeout >= 0 && (keycount == 0))
184	                    timedout = (System.currentTimeMillis() - time) >= readTimeout;

Quick description of the inconsistency
Two code snippets are very similar code, but as you see, the first code does not check ""if (readTimeout < 0)"" while the second code has the checker.

We thought it could be a potential bug or inconsistency. Hope this helps.","ken cheung comput scienc phil student observ code clone tomcat found inconsist code tomcat trunk java apach tomcat util net nio block selector nioblockingselector java tri get write latch getwritelatch null get write latch getwritelatch get count getcount start write latch startwritelatch poller add select key selectionkey write refer await write latch awaitwritelatch write timeout writetimeout time unit timeunit millisecond catch interrupt except interruptedexcept ignor thread interrupt get write latch getwritelatch null get write latch getwritelatch get count getcount got interrupt haven receiv notif poller keycount els latch countdown happen keycount reset write latch resetwritelatch write timeout writetimeout keycount timedout system current time milli currenttimemilli time write timeout writetimeout tomcat trunk java apach tomcat util net nio block selector nioblockingselector java tri get read latch getreadlatch null get read latch getreadlatch get count getcount start read latch startreadlatch poller add select key selectionkey read refer read timeout readtimeout await read latch awaitreadlatch long max valu time unit timeunit millisecond els await read latch awaitreadlatch read timeout readtimeout time unit timeunit millisecond catch interrupt except interruptedexcept ignor thread interrupt get read latch getreadlatch null get read latch getreadlatch get count getcount got interrupt haven receiv notif poller keycount els latch countdown happen keycount reset read latch resetreadlatch read timeout readtimeout keycount timedout system current time milli currenttimemilli time read timeout readtimeout quick descript inconsist two code snippet similar code see first code check read timeout readtimeout second code checker thought could potenti inconsist hope help","""java/org/apache/tomcat/util/net/NioBlockingSelector.java""","4","4","5","2","21","0","19","2","6","0","2","18","18","18","7","18","0","0","0","18","401","28","325","83","226","62","178","267","80","187","20","20","22","7","5","0","88","88","100","36","minor"
"52772","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52772 Re-order checks for uriRoot validity and ensure that all the checks are completed before it is used.","Bug 52772  JspC : checking uriRoot option validness","jsp jspc check uri root uriroot option valid","In org.apache.jasper.JspC#execute() method,
if uriRoot is not null,
it scans all jsp files under uriRoot,
and then checks if uriRoot is a directory.

It should be more desirable to check if uriRoot is a directory or not first and then scanning it.


Here are my suggestion.

            if (uriRoot == null) {
                throw new JasperException(
                    Localizer.getMessage(""jsp.error.jspc.no_uriroot""));
            }

            File uriRootF = new File(uriRoot);
            if (!uriRootF.exists() || !uriRootF.isDirectory()) {
                throw new JasperException(
                    Localizer.getMessage(""jsp.error.jspc.uriroot_not_dir""));
            }

            if( context==null ) {
                initServletContext();
            }

            // No explicit pages, we'll process all .jsp in the webapp
            if (pages.size() == 0) {
                scanFiles(uriRootF);
            }","apach jasper jsp jspc execut method uri root uriroot null scan jsp file uri root uriroot check uri root uriroot directori desir check uri root uriroot directori first scan suggest uri root uriroot null throw new jasper except jasperexcept local get messag getmessag jsp error jspc uriroot file uri root urirootf new file uri root uriroot uri root urirootf exist uri root urirootf is directori isdirectori throw new jasper except jasperexcept local get messag getmessag jsp error jspc uriroot context null init servlet context initservletcontext explicit page ll process jsp webapp page size scan file scanfil uri root urirootf","""java/org/apache/jasper/JspC.java""","2","2","3","1","15","0","10","4","1","1","35","83","83","82","48","83","0","3","11","69","1629","172","1033","316","645","424","496","730","276","454","38","38","38","31","6","0","237","237","258","138","trivial"
"52776","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52776 Refactor the code so JspFragment.invoke cleans up after itself. Patch provided by Karl von Randow.","Bug 52776  Generator's JspFragment.invoke implementation does not reset ELContext[JspContext.class]","gener jsp fragment jspfragment invok implement reset context elcontext jsp context jspcontext class","If a developer captures a JspFragment themselves and calls invoke on it, the JspContext.class attribute in the enclosing pageContext's ELContext is set by the generated JspFragment subclass, but not reset to its original value afterwards. Therefore after invoking a JspContext any EL expressions will be searching the wrong jspContext for attribute values.

org.apache.jasper.compiler.Generator is responsible for creating the JspFragment subclass to represent the compiled fragment. The generatePostamble() method emits generated code to set the JspContext attribute in the ELContext:

out.printil(""this.jspContext.getELContext().putContext(javax.servlet.jsp.JspContext.class,this.jspContext);"");

However it doesn't later put back the original value.

If you are using the <jsp:invoke> tag to invoke the fragment (which is undoubtedly what most people are doing) then the code generated by visit(Node.InvokeAction n) in Generator explicitly restores the EL context:

out.printil(""jspContext.getELContext().putContext(javax.servlet.jsp.JspContext.class,getJspContext());"");

However if you call invoke(Writer) on the JspFragment yourself you don't get that tidy up code.

I suggest the resolution is to have the JspFragment.invoke method tidy up after itself. It ""puts"" the change to the JspContext.class attribute so it should also re""put"" it. Then there shouldn't be any need to restore the EL context in the generated <jsp:invoke> code.

I have tested this solution successfully.","develop captur jsp fragment jspfragment call invok jsp context jspcontext class attribut enclos page context pagecontext context elcontext set gener jsp fragment jspfragment subclass reset origin valu afterward therefor invok jsp context jspcontext express search wrong jsp context jspcontext attribut valu apach jasper compil gener respons creat jsp fragment jspfragment subclass repres compil fragment gener postambl generatepostambl method emit gener code set jsp context jspcontext attribut context elcontext printil jsp context jspcontext get context getelcontext put context putcontext javax servlet jsp jsp context jspcontext class jsp context jspcontext howev doesn later put back origin valu use jsp invok tag invok fragment undoubtedli peopl code gener visit node invok action invokeact gener explicitli restor context printil jsp context jspcontext get context getelcontext put context putcontext javax servlet jsp jsp context jspcontext class get jsp context getjspcontext howev call invok writer jsp fragment jspfragment get tidi code suggest resolut jsp fragment jspfragment invok method tidi put chang jsp context jspcontext class attribut re put shouldn need restor context gener jsp invok code test solut success","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","36","3","27","5","12","6","6","112","112","106","48","112","11","51","0","50","4275","512","3052","544","2354","739","1870","2370","502","1868","22","22","30","20","5","0","502","496","558","210","normal"
"52777","194","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52777 Implement optional automatic removal of old applications where parallel deployment has been used.","Bug 52777  Automatically shut down old versions in parallel deployment","automat shut old version parallel deploy","Under parallel deployment, when an older version in an application has zero sessions, shut it down automatically to release tomcat and JVM resources.

Christopher Schultz suggested these approaches might be possible (on the Tomcat user list):

1. Modify the parallel deployment code to register an MBean
NotificationListener that filters for useful events (such as expiring
session notifications on the outgoing webapp).

2. When the listener receives a notification, check the current state
(e.g. session count=0; or, I suppose you could make this a part of
your filter in step #1). If session count = 0, start a new thread that
stops the outgoing webapp and de-registers the listener.

Or.

1. Install a SessionEventListener that counts-down the sessions
(you'll have to get the count from JMX, I suppose) until they equal 0,
then starts a new thread that ... etc.

Or.

1. Install a Timer thread that polls at intervals (1 minute?) to see
if all the sessions are dead and then starts a thread ... etc.

The first idea seems the cleanest, though Tomcat might not actually
fire MBean events for things like session count changing.","parallel deploy older version applic zero session shut automat releas tomcat jvm resourc christoph schultz suggest approach might possibl tomcat user list modifi parallel deploy code regist bean mbean notif listen notificationlisten filter use event expir session notif outgo webapp listen receiv notif check current state session count suppos could make part filter step session count start new thread stop outgo webapp de regist deregist listen instal session event listen sessioneventlisten count down countsdown session ll get count jmx suppos equal start new thread etc instal timer thread poll interv minut see session dead start thread etc first idea seem cleanest though tomcat might actual fire bean mbean event thing like session count chang","""java/org/apache/catalina/Host.java""","0","0","0","0","0","0","0","0","1","0","2","0","21","21","0","21","0","0","0","21","236","52","29","28","2","155","27","28","28","0","0","0","0","0","0","5","0","0","0","0","enhancement"
"52777","194","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52777 Implement optional automatic removal of old applications where parallel deployment has been used.","Bug 52777  Automatically shut down old versions in parallel deployment","automat shut old version parallel deploy","Under parallel deployment, when an older version in an application has zero sessions, shut it down automatically to release tomcat and JVM resources.

Christopher Schultz suggested these approaches might be possible (on the Tomcat user list):

1. Modify the parallel deployment code to register an MBean
NotificationListener that filters for useful events (such as expiring
session notifications on the outgoing webapp).

2. When the listener receives a notification, check the current state
(e.g. session count=0; or, I suppose you could make this a part of
your filter in step #1). If session count = 0, start a new thread that
stops the outgoing webapp and de-registers the listener.

Or.

1. Install a SessionEventListener that counts-down the sessions
(you'll have to get the count from JMX, I suppose) until they equal 0,
then starts a new thread that ... etc.

Or.

1. Install a Timer thread that polls at intervals (1 minute?) to see
if all the sessions are dead and then starts a thread ... etc.

The first idea seems the cleanest, though Tomcat might not actually
fire MBean events for things like session count changing.","parallel deploy older version applic zero session shut automat releas tomcat jvm resourc christoph schultz suggest approach might possibl tomcat user list modifi parallel deploy code regist bean mbean notif listen notificationlisten filter use event expir session notif outgo webapp listen receiv notif check current state session count suppos could make part filter step session count start new thread stop outgo webapp de regist deregist listen instal session event listen sessioneventlisten count down countsdown session ll get count jmx suppos equal start new thread etc instal timer thread poll interv minut see session dead start thread etc first idea seem cleanest though tomcat might actual fire bean mbean event thing like session count chang","""java/org/apache/catalina/startup/HostConfig.java""","4","4","5","1","27","2","20","5","5","1","3","46","46","45","23","46","0","1","16","29","1567","229","1007","229","698","332","464","687","222","465","33","33","43","17","7","0","209","209","239","90","enhancement"
"52777","194","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52777 Implement optional automatic removal of old applications where parallel deployment has been used.","Bug 52777  Automatically shut down old versions in parallel deployment","automat shut old version parallel deploy","Under parallel deployment, when an older version in an application has zero sessions, shut it down automatically to release tomcat and JVM resources.

Christopher Schultz suggested these approaches might be possible (on the Tomcat user list):

1. Modify the parallel deployment code to register an MBean
NotificationListener that filters for useful events (such as expiring
session notifications on the outgoing webapp).

2. When the listener receives a notification, check the current state
(e.g. session count=0; or, I suppose you could make this a part of
your filter in step #1). If session count = 0, start a new thread that
stops the outgoing webapp and de-registers the listener.

Or.

1. Install a SessionEventListener that counts-down the sessions
(you'll have to get the count from JMX, I suppose) until they equal 0,
then starts a new thread that ... etc.

Or.

1. Install a Timer thread that polls at intervals (1 minute?) to see
if all the sessions are dead and then starts a thread ... etc.

The first idea seems the cleanest, though Tomcat might not actually
fire MBean events for things like session count changing.","parallel deploy older version applic zero session shut automat releas tomcat jvm resourc christoph schultz suggest approach might possibl tomcat user list modifi parallel deploy code regist bean mbean notif listen notificationlisten filter use event expir session notif outgo webapp listen receiv notif check current state session count suppos could make part filter step session count start new thread stop outgo webapp de regist deregist listen instal session event listen sessioneventlisten count down countsdown session ll get count jmx suppos equal start new thread etc instal timer thread poll interv minut see session dead start thread etc first idea seem cleanest though tomcat might actual fire bean mbean event thing like session count chang","""java/org/apache/catalina/core/StandardHost.java""","1","1","1","1","13","1","7","4","2","0","1","44","44","44","18","44","0","0","2","42","878","203","391","152","209","286","184","271","125","146","6","6","7","5","4","1","79","79","80","52","enhancement"
"52777","194","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52777 Implement optional automatic removal of old applications where parallel deployment has been used.","Bug 52777  Automatically shut down old versions in parallel deployment","automat shut old version parallel deploy","Under parallel deployment, when an older version in an application has zero sessions, shut it down automatically to release tomcat and JVM resources.

Christopher Schultz suggested these approaches might be possible (on the Tomcat user list):

1. Modify the parallel deployment code to register an MBean
NotificationListener that filters for useful events (such as expiring
session notifications on the outgoing webapp).

2. When the listener receives a notification, check the current state
(e.g. session count=0; or, I suppose you could make this a part of
your filter in step #1). If session count = 0, start a new thread that
stops the outgoing webapp and de-registers the listener.

Or.

1. Install a SessionEventListener that counts-down the sessions
(you'll have to get the count from JMX, I suppose) until they equal 0,
then starts a new thread that ... etc.

Or.

1. Install a Timer thread that polls at intervals (1 minute?) to see
if all the sessions are dead and then starts a thread ... etc.

The first idea seems the cleanest, though Tomcat might not actually
fire MBean events for things like session count changing.","parallel deploy older version applic zero session shut automat releas tomcat jvm resourc christoph schultz suggest approach might possibl tomcat user list modifi parallel deploy code regist bean mbean notif listen notificationlisten filter use event expir session notif outgo webapp listen receiv notif check current state session count suppos could make part filter step session count start new thread stop outgo webapp de regist deregist listen instal session event listen sessioneventlisten count down countsdown session ll get count jmx suppos equal start new thread etc instal timer thread poll interv minut see session dead start thread etc first idea seem cleanest though tomcat might actual fire bean mbean event thing like session count chang","""java/org/apache/catalina/core/StandardHost.java""","1","1","1","1","13","1","7","4","2","0","1","44","44","44","18","44","0","0","2","42","878","203","391","152","209","286","184","271","125","146","6","6","7","5","4","1","79","79","80","52","enhancement"
"52792","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52792 More informative error message when something in JNDI can't be found.","Bug 52792  Incomplete error message when lookup a resource that is not bound in the naming","incomplet error messag lookup resourc bound name","","","""java/org/apache/naming/NamingContext.java""","2","2","2","1","20","0","9","9","1","0","3","37","37","37","4","37","0","0","4","33","969","134","421","144","221","414","145","237","81","156","13","13","15","8","5","1","92","92","101","47","trivial"
"52804","0","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=52804 Implement useful interfaces for storing and copying the properties","Bug 52804  Make PoolProperties implement Cloneable.","make pool properti poolproperti implement cloneabl","It would be very useful to have the PoolProperties class implement the java.lang.Cloneable interface. 

We have many databases that share the same schema, username, password, configuration etc but differ only in their URL. Implementing a routing datasource based on something like org.springframework.jdbc.datasource.AbstractDataSource can then just clone a PoolProperties object and set the one or two properties that differ in the clone. In a spring project the properties that are common across all the datasources are only supplied once.","would use pool properti poolproperti class implement java lang cloneabl interfac mani databas share schema usernam password configur etc differ url implement rout datasourc base someth like springframework jdbc datasourc abstract data sourc abstractdatasourc clone pool properti poolproperti object set one two properti differ clone spring project properti common across datasourc suppli","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PoolProperties.java""","1","1","1","1","6","0","4","2","3","2","3","118","118","116","51","118","0","0","0","118","1196","214","674","306","286","308","269","430","210","220","6","6","10","5","5","0","161","161","172","141","enhancement"
"52833","21","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52833 Fix NPE in some embedded / osgi scenarios where the class loader my not have the system class loader as a parent.","Bug 52833  NPE with 7.0.26","npe","Upgrading the maven plugin 7.0.26, the goal which runs tomcat with a conf dir (not the embed version) generate the following NPE 
Log:
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:236)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:141)
	at org.apache.catalina.startup.Catalina.start(Catalina.java:645)
	at org.apache.tomcat.maven.plugin.tomcat7.run.AbstractRunMojo.startContainer(AbstractRunMojo.java:679)
	at org.apache.tomcat.maven.plugin.tomcat7.run.AbstractRunMojo.execute(AbstractRunMojo.java:365)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:544)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:197)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)","upgrad maven plugin goal run tomcat conf emb version gener follow npe log apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina startup catalina start catalina java apach tomcat maven plugin tomcat7 run abstract run mojo abstractrunmojo start contain startcontain abstract run mojo abstractrunmojo java apach tomcat maven plugin tomcat7 run abstract run mojo abstractrunmojo execut abstract run mojo abstractrunmojo java apach maven plugin default build plugin manag defaultbuildpluginmanag execut mojo executemojo default build plugin manag defaultbuildpluginmanag java apach maven lifecycl intern mojo executor mojoexecutor execut mojo executor mojoexecutor java apach maven lifecycl intern mojo executor mojoexecutor execut mojo executor mojoexecutor java apach maven lifecycl intern mojo executor mojoexecutor execut mojo executor mojoexecutor java apach maven lifecycl intern lifecycl modul builder lifecyclemodulebuild build project buildproject lifecycl modul builder lifecyclemodulebuild java apach maven lifecycl intern lifecycl modul builder lifecyclemodulebuild build project buildproject lifecycl modul builder lifecyclemodulebuild java apach maven lifecycl intern lifecycl starter lifecyclestart singl thread build singlethreadedbuild lifecycl starter lifecyclestart java apach maven lifecycl intern lifecycl starter lifecyclestart execut lifecycl starter lifecyclestart java apach maven default maven defaultmaven do execut doexecut default maven defaultmaven java apach maven default maven defaultmaven execut default maven defaultmaven java apach maven cli maven cli mavencli execut maven cli mavencli java apach maven cli maven cli mavencli do main domain maven cli mavencli java apach maven cli maven cli mavencli main maven cli mavencli java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java codehau plexu classworld launcher launcher launch enhanc launchenhanc launcher java codehau plexu classworld launcher launcher launch launcher java codehau plexu classworld launcher launcher main with exit code mainwithexitcod launcher java codehau plexu classworld launcher launcher main launcher java","""java/org/apache/catalina/core/StandardServer.java""","2","2","2","1","16","1","9","4","1","0","2","39","39","39","18","39","0","1","6","32","906","181","470","154","266","258","222","326","129","197","21","21","21","12","7","1","97","97","99","57","regression"
"52846","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52846.","Bug 52846  Programmatic login using UserDatabaseRealm returns 403 error.","programmat login use user databas realm userdatabaserealm return error","IMHO,HttpServletRequest#login does not need to define a <login-config>.
NonLoginAuthenticator is used when <login-config> is not specified in HttpServletRequest#login. 

When UserDatabaseRealm is used, not GenericPrincipal but Memory User is set to a session.
In AuthenticatorBase#invoke, principal registered into a session is set to a request. 
Because MemoryUser is set to a request as principal, RealmBase#hasRole always returns false. 
As a result, 403 error is returned.","imho http servlet request httpservletrequest login need defin login config loginconfig non login authent nonloginauthent use login config loginconfig specifi http servlet request httpservletrequest login user databas realm userdatabaserealm use gener princip genericprincip memori user set session authent base authenticatorbas invok princip regist session set request memori user memoryus set request princip realm base realmbas ha role hasrol alway return fals result error return","""java/org/apache/catalina/authenticator/NonLoginAuthenticator.java""","4","4","4","1","45","3","13","28","1","0","0","2","2","2","0","2","0","0","1","1","134","17","37","16","18","80","17","26","12","14","7","7","7","1","4","2","8","8","8","2","minor"
"52850","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52850 Enable the memoey leak protection code to play nicely with IBM JVMs as well as Oracle JVMs. Extend test case coverage of memory leak protection. Patch provided by Rohit Kelapure.","Bug 52850  Various miscellaneous fixes to Tomcat Memory Leak Detection code","variou miscellan fix tomcat memori leak detect code","Problem Description - 
----------------------
Tomcat memory leak detection has the following issues
- Most of the detection and fixing code has been tested ONLY on Sun JVMs. A lot of  the reflection based code does not work with the IBM JDK. 
- Tests in tomcat7.source\test\org\apache\catalina\loader do not seem to run successfully and are incomplete for all the protection that Tomcat provides for classloader memory leaks.
- For some categories of threadlocal memory leaks the key and value are not displayed correctly in the warning messages; particularly ones dealing with indirect references to threadlocals
-  org.apache.catalina.loader.WebappClassLoader.loadedByThisOrChild(Object) incorrectly traverses the object classloader hierarchy instead of the current (this) classloader hierarchy

Problem Conclusion - 
--------------------
- After extensive testing with the IBM JDKs, I have cleaned up and sanitized some of the reflection code to stop executors, timers, threads etc on the IBM JDK
- Added new tests for detecting threadlocal leaks and thread leaks
- Better ThreadLocal leak reporting with corrected loadedByThisOrChild method and addition of expungeStaleEntries method
- Make code more resilient in certain leak detection scenarios.","problem descript tomcat memori leak detect follow issu detect fix code test sun jvm lot reflect base code work ibm jdk test tomcat7 sourc apach catalina loader seem run success incomplet protect tomcat provid classload memori leak categori threadloc memori leak key valu display correctli warn messag particularli one deal indirect refer threadloc apach catalina loader webapp class loader webappclassload load by thi or child loadedbythisorchild object incorrectli travers object classload hierarchi instead current classload hierarchi problem conclus extens test ibm jdk clean sanit reflect code stop executor timer thread etc ibm jdk ad new test detect threadloc leak thread leak better thread local threadloc leak report correct load by thi or child loadedbythisorchild method addit expung stale entri expungestaleentri method make code resili certain leak detect scenario","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","5","2","31","3","21","6","5","1","8","90","90","89","36","90","3","13","19","55","3427","537","2043","472","1413","854","931","1415","416","999","45","45","52","28","10","0","489","489","529","215","normal"
"52926","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52926 Protect against a NPE if the socket has been closed on another thread","Bug 52926  NPE in processSocket","npe process socket processsocket","We have sporadic issues triggering 502 proxy errors using the NIO connector behind Nginx, caused by dropped connections/end of streams in Tomcat. The Tomcat log shows:

SEVERE: Error allocating socket processor
java.lang.NullPointerException 
at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:721)
at org.apache.tomcat.util.net.NioEndpoint$Poller.cancelledKey(NioEndpoint.java:1048)
at org.apache.tomcat.util.net.NioEndpoint$Poller.timeout(NioEndpoint.java:1392)
at org.apache.tomcat.util.net.NioEndpoint$Poller.run(NioEndpoint.java:1174)
at java.lang.Thread.run(Thread.java:662)

Looking at the code in processSocket I see the line in NioEndpoint(721): 
attachment.setCometNotify(false); //will get reset upon next reg

Attachment is fetched in line 720:
KeyAttachment attachment = (KeyAttachment)socket.getAttachment(false);

Looking at socket.getAttachement() method I see that this method is indeed capable of returning null, but no null-check for this is done (although it is in multiple other locations, so it seems inconsistent).","sporad issu trigger proxi error use nio connector behind nginx caus drop connect stream tomcat tomcat log show sever error alloc socket processor java lang null pointer except nullpointerexcept apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller cancel key cancelledkey nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller timeout nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller run nio endpoint nioendpoint java java lang thread run thread java look code process socket processsocket see line nio endpoint nioendpoint attach set comet notifi setcometnotifi fals get reset upon next reg attach fetch line key attach keyattach attach key attach keyattach socket get attach getattach fals look socket get attach getattach method see method inde capabl return null null check nullcheck done although multipl locat seem inconsist","""java/org/apache/tomcat/util/net/NioEndpoint.java""","2","2","3","1","10","0","9","1","13","0","8","117","121","121","50","121","0","1","16","104","1693","185","1256","316","872","280","648","973","312","661","23","23","29","8","7","0","336","336","382","144","critical"
"52954","83","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52954 Be tolerant of slightly broken Android implementation of DIGEST auth. Security is not impacted.","Bug 52954  Allowing for broken android HTTP DIGEST support","allow broken android http digest support","","","""java/org/apache/catalina/authenticator/DigestAuthenticator.java""","2","2","3","2","19","1","13","4","4","2","6","28","28","26","24","28","0","0","8","20","698","129","402","129","236","167","187","275","117","158","33","33","41","23","3","0","80","80","91","60","enhancement"
"52955","80","Konstantin Kolinko","Review of r1345026, comparing it with proposed patch for BZ 52955: Add final modifiers to improve thread safety","Bug 52955  Add a ThreadFactory implementation to the ExecutorService used to deploy applications","add thread factori threadfactori implement executor servic executorservic use deploy applic","","","""java/org/apache/catalina/core/ContainerBase.java""","3","3","3","1","18","1","11","4","6","0","2","62","62","62","29","62","1","2","10","49","1621","296","859","261","512","467","385","596","212","384","12","12","18","6","3","1","192","192","228","83","enhancement"
"52957","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52957 Ensure Valve implements Lifecycle before calling Lifecycle methods","Bug 52957  ClassCastException while removing Valve","class cast except classcastexcept remov valv","","","""java/org/apache/catalina/core/StandardPipeline.java""","3","3","3","1","19","2","11","5","1","0","1","17","17","17","3","17","0","0","4","13","463","92","236","66","134","135","101","162","52","110","13","13","15","7","3","1","60","60","63","28","normal"
"52974","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52974 Fix NameNotFoundException when field/method is annotated with @Resource annotation Patch provided by Violet Agg.","Bug 52974  NameNotFoundException is thrown when field/method is annotated with @Resource annotation","name not found except namenotfoundexcept thrown field method annot resourc annot","","","""java/org/apache/catalina/startup/WebAnnotationSet.java""","5","5","8","1","50","11","24","14","1","6","0","6","6","0","0","6","0","0","5","1","367","95","160","39","113","112","85","114","43","71","9","9","28","5","3","1","31","31","52","10","normal"
"52998","1","Mark Emlyn David Thomas","Remainder of fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=52998 Cache ExpressionFactory class per class loader (kkolinko)","Bug 52998  Performance issue with ExpressionFactory.newInstance()","perform issu express factori expressionfactori new instanc newinst","","","""java/javax/el/ExpressionFactory.java""","4","4","4","1","22","0","18","4","5","6","5","10","14","8","0","14","0","4","0","10","313","29","227","56","149","60","88","127","50","77","13","13","13","5","3","0","44","44","47","18","normal"
"53008","65","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53008 Extend test cases for BASIC auth and RFC2617 compliance","Bug 53008  New test case for Basic Authenticator","new case basic authent","","","""test/org/apache/catalina/authenticator/TestNonLoginAndBasicAuthenticator.java""","1","1","1","1","16","2","13","1","1","0","12","11","11","11","0","11","0","4","0","7","308","50","182","89","119","77","119","134","69","65","3","3","3","1","1","0","14","14","14","11","enhancement"
"53032","62","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53032 Modify JspC to extend o.a.tools.ant.Task so it works with name spaces The main change is that execute() no longer throws JasperException so it matches the signature for Task.execute(). This required a small change to main()","Bug 53032  Ant Jasper task fails to run when using XML namespaces; no output; no errors","ant jasper task fail run use xml namespac output error","","","""java/org/apache/jasper/JspC.java""","2","2","3","1","15","0","10","4","1","1","35","83","83","82","48","83","0","3","11","69","1629","172","1033","316","645","424","496","730","276","454","38","38","38","31","6","0","237","237","257","138","normal"
"53056","0","Christopher Schultz","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53056 Add APR version number to tcnative version INFO log message","Bug 53056  Add APR version number to tcnative version INFO log message","add apr version number tcnativ version info log messag","When tcnative starts, it emits information like this to catalina.out:

pr 10, 2012 4:54:55 PM org.apache.catalina.core.AprLifecycleListener init
INFO: Loaded APR based Apache Tomcat Native library 1.1.23.
Apr 10, 2012 4:54:55 PM org.apache.catalina.core.AprLifecycleListener init
INFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].

It would be nice if the APR version in use could also be displayed as well as the tcnative version. Maybe the OpenSSL version, too.","tcnativ start emit inform like catalina pr pm apach catalina core apr lifecycl listen aprlifecyclelisten init info load apr base apach tomcat nativ librari apr pm apach catalina core apr lifecycl listen aprlifecyclelisten init info apr capabl pv6 ipv6 true sendfil true accept filter fals random true would nice apr version use could display well tcnativ version mayb open openssl version","""java/org/apache/catalina/core/AprLifecycleListener.java""","2","2","2","1","18","1","15","1","1","4","17","13","13","9","0","13","0","3","0","10","330","49","232","73","157","53","119","159","64","95","8","8","9","4","3","0","37","37","38","21","enhancement"
"53063","29","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53063 When using an Executor with BIO, use the executor's maxThreads as the default for maxConnections","Bug 53063  Inconsistency in documentation regarding Connector's maxConnections property","inconsist document regard connector max connect maxconnect properti","","","""java/org/apache/tomcat/util/net/AbstractEndpoint.java""","1","1","1","1","4","0","3","0","6","0","3","118","126","132","63","132","0","0","12","120","887","123","573","240","353","192","309","498","236","262","16","16","17","4","3","0","187","187","193","135","minor"
"53063","29","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53063 When using an Executor with BIO, use the executor's maxThreads as the default for maxConnections","Bug 53063  Inconsistency in documentation regarding Connector's maxConnections property","inconsist document regard connector max connect maxconnect properti","","","""java/org/apache/tomcat/util/net/JIoEndpoint.java""","3","3","3","1","15","0","11","3","6","0","1","28","31","31","7","31","1","1","4","25","620","80","389","99","243","156","162","257","77","180","14","14","16","4","4","0","89","89","96","36","minor"
"53067","29","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53067 Make sure request is unwrapped before we cast it to the internal Tomcat implementation","Bug 53067  WebSocket implementation issue with wrapped requests","web socket websocket implement issu wrap request","","","""java/org/apache/catalina/websocket/WebSocketServlet.java""","3","3","3","2","23","2","15","5","1","0","2","6","7","7","1","7","0","3","4","0","223","37","119","50","65","67","66","90","45","45","9","9","9","6","3","1","21","21","21","14","normal"
"53074","41","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53074 Make WebSocket connections use infinite read timeouts by default.","Bug 53074  [websocket] java.net.SocketTimeoutException: Read timed caused by server.xml' connectTimeout","websocket java net socket timeout except sockettimeoutexcept read time caus server xml connect timeout connecttimeout","The default connectTimeout value is set to 20000 and cause issue with WebSocket connection

java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at org.apache.coyote.http11.upgrade.UpgradeBioProcessor.read(UpgradeBioProcessor.java:75)
    at org.apache.catalina.websocket.WsFrame.nextFrame(WsFrame.java:213)
    at org.apache.catalina.websocket.WsInputStream.nextFrame(WsInputStream.java:68)
    at org.apache.catalina.websocket.StreamInbound.onData(StreamInbound.java:143)
    at org.apache.coyote.http11.upgrade.UpgradeProcessor.upgradeDispatch(UpgradeProcessor.java:83)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:563)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)

Increasing the value delay the issue (but the timeout should not occurs)","default connect timeout connecttimeout valu set caus issu web socket websocket connect java net socket timeout except sockettimeoutexcept read time java net socket input stream socketinputstream socket read0 socketread0 nativ method java net socket input stream socketinputstream read socket input stream socketinputstream java apach coyot http11 upgrad upgrad bio processor upgradebioprocessor read upgrad bio processor upgradebioprocessor java apach catalina websocket frame wsframe next frame nextfram frame wsframe java apach catalina websocket input stream wsinputstream next frame nextfram input stream wsinputstream java apach catalina websocket stream inbound streaminbound on data ondata stream inbound streaminbound java apach coyot http11 upgrad upgrad processor upgradeprocessor upgrad dispatch upgradedispatch upgrad processor upgradeprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java increas valu delay issu timeout occur","""java/org/apache/coyote/ajp/AjpAprProtocol.java""","1","1","1","1","4","0","3","0","2","0","1","13","13","13","2","13","0","0","6","7","146","35","73","39","30","38","39","55","28","27","2","2","2","1","1","1","14","14","14","13","normal"
"53074","41","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53074 Make WebSocket connections use infinite read timeouts by default.","Bug 53074  [websocket] java.net.SocketTimeoutException: Read timed caused by server.xml' connectTimeout","websocket java net socket timeout except sockettimeoutexcept read time caus server xml connect timeout connecttimeout","The default connectTimeout value is set to 20000 and cause issue with WebSocket connection

java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at org.apache.coyote.http11.upgrade.UpgradeBioProcessor.read(UpgradeBioProcessor.java:75)
    at org.apache.catalina.websocket.WsFrame.nextFrame(WsFrame.java:213)
    at org.apache.catalina.websocket.WsInputStream.nextFrame(WsInputStream.java:68)
    at org.apache.catalina.websocket.StreamInbound.onData(StreamInbound.java:143)
    at org.apache.coyote.http11.upgrade.UpgradeProcessor.upgradeDispatch(UpgradeProcessor.java:83)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:563)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)

Increasing the value delay the issue (but the timeout should not occurs)","default connect timeout connecttimeout valu set caus issu web socket websocket connect java net socket timeout except sockettimeoutexcept read time java net socket input stream socketinputstream socket read0 socketread0 nativ method java net socket input stream socketinputstream read socket input stream socketinputstream java apach coyot http11 upgrad upgrad bio processor upgradebioprocessor read upgrad bio processor upgradebioprocessor java apach catalina websocket frame wsframe next frame nextfram frame wsframe java apach catalina websocket input stream wsinputstream next frame nextfram input stream wsinputstream java apach catalina websocket stream inbound streaminbound on data ondata stream inbound streaminbound java apach coyot http11 upgrad upgrad processor upgradeprocessor upgrad dispatch upgradedispatch upgrad processor upgradeprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java increas valu delay issu timeout occur","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","15","0","11","2","11","0","1","91","92","92","62","92","1","5","10","76","1866","225","1205","289","822","438","598","915","269","646","40","40","51","11","7","0","292","292","332","130","normal"
"53074","41","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53074 Make WebSocket connections use infinite read timeouts by default.","Bug 53074  [websocket] java.net.SocketTimeoutException: Read timed caused by server.xml' connectTimeout","websocket java net socket timeout except sockettimeoutexcept read time caus server xml connect timeout connecttimeout","The default connectTimeout value is set to 20000 and cause issue with WebSocket connection

java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at org.apache.coyote.http11.upgrade.UpgradeBioProcessor.read(UpgradeBioProcessor.java:75)
    at org.apache.catalina.websocket.WsFrame.nextFrame(WsFrame.java:213)
    at org.apache.catalina.websocket.WsInputStream.nextFrame(WsInputStream.java:68)
    at org.apache.catalina.websocket.StreamInbound.onData(StreamInbound.java:143)
    at org.apache.coyote.http11.upgrade.UpgradeProcessor.upgradeDispatch(UpgradeProcessor.java:83)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:563)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)

Increasing the value delay the issue (but the timeout should not occurs)","default connect timeout connecttimeout valu set caus issu web socket websocket connect java net socket timeout except sockettimeoutexcept read time java net socket input stream socketinputstream socket read0 socketread0 nativ method java net socket input stream socketinputstream read socket input stream socketinputstream java apach coyot http11 upgrad upgrad bio processor upgradebioprocessor read upgrad bio processor upgradebioprocessor java apach catalina websocket frame wsframe next frame nextfram frame wsframe java apach catalina websocket input stream wsinputstream next frame nextfram input stream wsinputstream java apach catalina websocket stream inbound streaminbound on data ondata stream inbound streaminbound java apach coyot http11 upgrad upgrad processor upgradeprocessor upgrad dispatch upgradedispatch upgrad processor upgradeprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java increas valu delay issu timeout occur","""java/org/apache/coyote/http11/Http11AprProtocol.java""","1","1","1","1","3","0","2","0","2","0","1","53","53","53","2","53","1","0","9","43","315","61","176","97","101","78","100","163","75","88","5","5","6","4","3","0","61","61","64","56","normal"
"53074","41","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53074 Make WebSocket connections use infinite read timeouts by default.","Bug 53074  [websocket] java.net.SocketTimeoutException: Read timed caused by server.xml' connectTimeout","websocket java net socket timeout except sockettimeoutexcept read time caus server xml connect timeout connecttimeout","The default connectTimeout value is set to 20000 and cause issue with WebSocket connection

java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at org.apache.coyote.http11.upgrade.UpgradeBioProcessor.read(UpgradeBioProcessor.java:75)
    at org.apache.catalina.websocket.WsFrame.nextFrame(WsFrame.java:213)
    at org.apache.catalina.websocket.WsInputStream.nextFrame(WsInputStream.java:68)
    at org.apache.catalina.websocket.StreamInbound.onData(StreamInbound.java:143)
    at org.apache.coyote.http11.upgrade.UpgradeProcessor.upgradeDispatch(UpgradeProcessor.java:83)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:563)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)

Increasing the value delay the issue (but the timeout should not occurs)","default connect timeout connecttimeout valu set caus issu web socket websocket connect java net socket timeout except sockettimeoutexcept read time java net socket input stream socketinputstream socket read0 socketread0 nativ method java net socket input stream socketinputstream read socket input stream socketinputstream java apach coyot http11 upgrad upgrad bio processor upgradebioprocessor read upgrad bio processor upgradebioprocessor java apach catalina websocket frame wsframe next frame nextfram frame wsframe java apach catalina websocket input stream wsinputstream next frame nextfram input stream wsinputstream java apach catalina websocket stream inbound streaminbound on data ondata stream inbound streaminbound java apach coyot http11 upgrad upgrad processor upgradeprocessor upgrad dispatch upgradedispatch upgrad processor upgradeprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java increas valu delay issu timeout occur","""java/org/apache/catalina/websocket/StreamInbound.java""","1","1","1","1","10","0","6","3","1","0","0","13","15","15","4","15","0","2","4","9","234","34","109","41","55","91","51","75","36","39","11","11","11","11","3","1","23","23","23","23","normal"
"53074","41","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53074 Make WebSocket connections use infinite read timeouts by default.","Bug 53074  [websocket] java.net.SocketTimeoutException: Read timed caused by server.xml' connectTimeout","websocket java net socket timeout except sockettimeoutexcept read time caus server xml connect timeout connecttimeout","The default connectTimeout value is set to 20000 and cause issue with WebSocket connection

java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at org.apache.coyote.http11.upgrade.UpgradeBioProcessor.read(UpgradeBioProcessor.java:75)
    at org.apache.catalina.websocket.WsFrame.nextFrame(WsFrame.java:213)
    at org.apache.catalina.websocket.WsInputStream.nextFrame(WsInputStream.java:68)
    at org.apache.catalina.websocket.StreamInbound.onData(StreamInbound.java:143)
    at org.apache.coyote.http11.upgrade.UpgradeProcessor.upgradeDispatch(UpgradeProcessor.java:83)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:563)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)

Increasing the value delay the issue (but the timeout should not occurs)","default connect timeout connecttimeout valu set caus issu web socket websocket connect java net socket timeout except sockettimeoutexcept read time java net socket input stream socketinputstream socket read0 socketread0 nativ method java net socket input stream socketinputstream read socket input stream socketinputstream java apach coyot http11 upgrad upgrad bio processor upgradebioprocessor read upgrad bio processor upgradebioprocessor java apach catalina websocket frame wsframe next frame nextfram frame wsframe java apach catalina websocket input stream wsinputstream next frame nextfram input stream wsinputstream java apach catalina websocket stream inbound streaminbound on data ondata stream inbound streaminbound java apach coyot http11 upgrad upgrad processor upgradeprocessor upgrad dispatch upgradedispatch upgrad processor upgradeprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java increas valu delay issu timeout occur","""java/org/apache/coyote/http11/upgrade/UpgradeAprProcessor.java""","1","1","1","1","7","0","7","0","1","0","0","6","6","6","1","6","0","0","0","6","96","17","56","23","24","23","20","33","16","17","5","5","5","3","2","0","11","11","11","8","normal"
"53074","41","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53074 Make WebSocket connections use infinite read timeouts by default.","Bug 53074  [websocket] java.net.SocketTimeoutException: Read timed caused by server.xml' connectTimeout","websocket java net socket timeout except sockettimeoutexcept read time caus server xml connect timeout connecttimeout","The default connectTimeout value is set to 20000 and cause issue with WebSocket connection

java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at org.apache.coyote.http11.upgrade.UpgradeBioProcessor.read(UpgradeBioProcessor.java:75)
    at org.apache.catalina.websocket.WsFrame.nextFrame(WsFrame.java:213)
    at org.apache.catalina.websocket.WsInputStream.nextFrame(WsInputStream.java:68)
    at org.apache.catalina.websocket.StreamInbound.onData(StreamInbound.java:143)
    at org.apache.coyote.http11.upgrade.UpgradeProcessor.upgradeDispatch(UpgradeProcessor.java:83)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:563)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)

Increasing the value delay the issue (but the timeout should not occurs)","default connect timeout connecttimeout valu set caus issu web socket websocket connect java net socket timeout except sockettimeoutexcept read time java net socket input stream socketinputstream socket read0 socketread0 nativ method java net socket input stream socketinputstream read socket input stream socketinputstream java apach coyot http11 upgrad upgrad bio processor upgradebioprocessor read upgrad bio processor upgradebioprocessor java apach catalina websocket frame wsframe next frame nextfram frame wsframe java apach catalina websocket input stream wsinputstream next frame nextfram input stream wsinputstream java apach catalina websocket stream inbound streaminbound on data ondata stream inbound streaminbound java apach coyot http11 upgrad upgrad processor upgradeprocessor upgrad dispatch upgradedispatch upgrad processor upgradeprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java increas valu delay issu timeout occur","""java/org/apache/coyote/http11/upgrade/UpgradeBioProcessor.java""","1","1","1","1","4","0","3","0","1","0","0","6","6","6","2","6","0","0","0","6","77","16","37","22","8","24","16","23","15","8","1","1","1","1","0","1","6","6","6","6","normal"
"53074","41","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53074 Make WebSocket connections use infinite read timeouts by default.","Bug 53074  [websocket] java.net.SocketTimeoutException: Read timed caused by server.xml' connectTimeout","websocket java net socket timeout except sockettimeoutexcept read time caus server xml connect timeout connecttimeout","The default connectTimeout value is set to 20000 and cause issue with WebSocket connection

java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at org.apache.coyote.http11.upgrade.UpgradeBioProcessor.read(UpgradeBioProcessor.java:75)
    at org.apache.catalina.websocket.WsFrame.nextFrame(WsFrame.java:213)
    at org.apache.catalina.websocket.WsInputStream.nextFrame(WsInputStream.java:68)
    at org.apache.catalina.websocket.StreamInbound.onData(StreamInbound.java:143)
    at org.apache.coyote.http11.upgrade.UpgradeProcessor.upgradeDispatch(UpgradeProcessor.java:83)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:563)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)

Increasing the value delay the issue (but the timeout should not occurs)","default connect timeout connecttimeout valu set caus issu web socket websocket connect java net socket timeout except sockettimeoutexcept read time java net socket input stream socketinputstream socket read0 socketread0 nativ method java net socket input stream socketinputstream read socket input stream socketinputstream java apach coyot http11 upgrad upgrad bio processor upgradebioprocessor read upgrad bio processor upgradebioprocessor java apach catalina websocket frame wsframe next frame nextfram frame wsframe java apach catalina websocket input stream wsinputstream next frame nextfram input stream wsinputstream java apach catalina websocket stream inbound streaminbound on data ondata stream inbound streaminbound java apach coyot http11 upgrad upgrad processor upgradeprocessor upgrad dispatch upgradedispatch upgrad processor upgradeprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java increas valu delay issu timeout occur","""java/org/apache/coyote/http11/upgrade/UpgradeInbound.java""","0","0","0","0","0","0","0","0","1","0","0","0","4","4","0","4","4","0","0","0","36","7","9","8","0","20","7","8","8","0","0","0","0","0","0","2","0","0","0","0","normal"
"53074","41","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53074 Make WebSocket connections use infinite read timeouts by default.","Bug 53074  [websocket] java.net.SocketTimeoutException: Read timed caused by server.xml' connectTimeout","websocket java net socket timeout except sockettimeoutexcept read time caus server xml connect timeout connecttimeout","The default connectTimeout value is set to 20000 and cause issue with WebSocket connection

java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at org.apache.coyote.http11.upgrade.UpgradeBioProcessor.read(UpgradeBioProcessor.java:75)
    at org.apache.catalina.websocket.WsFrame.nextFrame(WsFrame.java:213)
    at org.apache.catalina.websocket.WsInputStream.nextFrame(WsInputStream.java:68)
    at org.apache.catalina.websocket.StreamInbound.onData(StreamInbound.java:143)
    at org.apache.coyote.http11.upgrade.UpgradeProcessor.upgradeDispatch(UpgradeProcessor.java:83)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:563)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)

Increasing the value delay the issue (but the timeout should not occurs)","default connect timeout connecttimeout valu set caus issu web socket websocket connect java net socket timeout except sockettimeoutexcept read time java net socket input stream socketinputstream socket read0 socketread0 nativ method java net socket input stream socketinputstream read socket input stream socketinputstream java apach coyot http11 upgrad upgrad bio processor upgradebioprocessor read upgrad bio processor upgradebioprocessor java apach catalina websocket frame wsframe next frame nextfram frame wsframe java apach catalina websocket input stream wsinputstream next frame nextfram input stream wsinputstream java apach catalina websocket stream inbound streaminbound on data ondata stream inbound streaminbound java apach coyot http11 upgrad upgrad processor upgradeprocessor upgrad dispatch upgradedispatch upgrad processor upgradeprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java increas valu delay issu timeout occur","""java/org/apache/coyote/http11/upgrade/UpgradeNioProcessor.java""","3","3","3","1","16","0","15","0","1","0","0","8","8","8","4","8","0","2","0","6","196","19","145","46","85","32","64","92","34","58","8","8","8","3","3","0","26","26","26","12","normal"
"53081","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53081 Do not always cache resources loaded by the web application class loader","Bug 53081  WebappClassLoader causes java.lang.OutOfMemoryError in findResourceInternal()","webapp class loader webappclassload caus java lang out of memori error outofmemoryerror find resourc intern findresourceintern","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","5","2","31","3","21","6","5","1","8","91","91","90","36","91","3","13","20","55","3480","544","2086","478","1443","857","948","1443","423","1020","45","45","52","28","10","0","501","501","542","219","normal"
"53087","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53087. In order to avoid that a backup node expire a session, replicate session access time in BackupManager.","Bug 53087  BackupManager does not replicate session access time.","backup manag backupmanag replic session access time","","","""java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java""","2","2","3","1","10","0","9","1","4","0","16","109","112","112","30","112","0","1","10","101","1535","177","1123","356","689","258","576","858","312","546","20","20","25","7","5","0","285","276","331","143","normal"
"53087","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53087. In order to avoid that a backup node expire a session, replicate session access time in BackupManager.","Bug 53087  BackupManager does not replicate session access time.","backup manag backupmanag replic session access time","","","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","7","4","1","0","2","54","54","54","5","54","0","2","9","43","868","102","491","151","272","277","233","353","119","234","9","9","10","5","3","1","106","106","124","67","normal"
"53087","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53087. In order to avoid that a backup node expire a session, replicate session access time in BackupManager.","Bug 53087  BackupManager does not replicate session access time.","backup manag backupmanag replic session access time","","","""java/org/apache/catalina/tribes/tipis/ReplicatedMapEntry.java""","0","0","0","0","0","0","0","0","1","0","0","0","10","10","0","10","0","0","0","10","122","15","15","14","0","92","13","14","14","0","0","0","0","0","0","6","0","0","0","0","normal"
"53090","41","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53090 Include superclasses when considering injection targets Patch provided by Borislav Kapukaranov","Bug 53090  Servlet superclass injection targets are ignored","servlet superclass inject target ignor","","","""java/org/apache/catalina/core/DefaultInstanceManager.java""","3","3","3","1","20","0","16","2","8","6","1","33","31","27","18","33","0","6","9","18","760","68","585","158","371","107","226","347","138","209","30","30","41","7","4","0","105","105","122","42","normal"
"53169","29","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53169 Allow servlets to opt to avoid chunked encoding with a response of unknown length by setting the Connection: close header. Based on a patch suggested by Philippe Marschall.","Bug 53169  [patch] don't do chunking with Connection: close","patch chunk connect close","","","""java/org/apache/coyote/http11/AbstractHttp11Processor.java""","4","4","5","2","28","2","20","6","1","0","1","43","58","58","32","58","2","5","19","32","1666","269","963","209","677","445","483","687","199","488","34","34","48","15","4","0","211","209","257","94","minor"
"53169","29","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53169 Allow servlets to opt to avoid chunked encoding with a response of unknown length by setting the Connection: close header. Based on a patch suggested by Philippe Marschall.","Bug 53169  [patch] don't do chunking with Connection: close","patch chunk connect close","","","""test/org/apache/coyote/http11/TestAbstractHttp11Processor.java""","1","1","1","1","22","3","17","1","3","0","0","9","9","9","0","9","0","0","0","9","253","52","173","65","124","28","93","105","50","55","3","3","3","1","1","0","11","11","11","9","minor"
"53169","29","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53169 Allow servlets to opt to avoid chunked encoding with a response of unknown length by setting the Connection: close header. Based on a patch suggested by Philippe Marschall.","Bug 53169  [patch] don't do chunking with Connection: close","patch chunk connect close","","","""test/org/apache/coyote/http11/TestAbstractHttp11Processor.java""","1","1","1","1","22","3","17","1","3","0","0","9","9","9","0","9","0","0","0","9","253","52","173","65","124","28","93","105","50","55","3","3","3","1","1","0","11","11","11","9","minor"
"53180","26","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53180 Add additional checks when looking for a setter method. Patch provided by Violeta Georgieva.","Bug 53180  DefaultInstanceManager#populateAnnotationsCache - incomplete check is used when validating for a setter method","default instanc manag defaultinstancemanag popul annot cach populateannotationscach incomplet check use valid setter method","","","""java/org/apache/catalina/core/DefaultInstanceManager.java""","3","3","3","1","20","0","16","2","8","6","1","34","32","28","18","34","0","7","9","18","774","69","598","162","379","107","233","357","142","215","30","30","41","7","4","0","108","108","125","43","normal"
"53225","18","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53225 Fix ISE ""zip file closed"" when urlCacheProtection=""false"" in the JreMemoryLeakPreventionListener","Bug 53225  IllegalStateException ""zip file closed"" with resource from webfragment jar if JreMemoryLeakPreventionListener is removed","illeg state except illegalstateexcept zip file close resourc webfrag jar jre memori leak prevent listen jrememoryleakpreventionlisten remov","","","""java/org/apache/tomcat/util/scan/FileUrlJar.java""","1","1","1","1","6","0","6","0","1","0","0","8","8","8","3","8","0","0","0","8","105","11","73","31","30","21","29","45","24","21","3","3","3","1","2","0","15","15","15","8","normal"
"53230","22","Christopher Schultz","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53230 Changed exception type thrown when session manager exceeds active session limit.","Bug 53230  Allow custom error mapping when Manager's maxActiveSessions is exceeded","allow custom error map manag max activ session maxactivesess exceed","","","""java/org/apache/catalina/session/ManagerBase.java""","1","1","1","1","12","1","7","4","2","0","3","74","74","74","27","74","0","0","5","69","1316","254","630","240","348","433","291","437","197","240","6","6","6","3","3","1","137","137","143","78","enhancement"
"53254","0","Filip Hanik","Add in ability to purge the pool https://issues.apache.org/bugzilla/show_bug.cgi?id=53254","Bug 53254  Support for purging connection pool","support purg connect pool","It is a common function of a connection pool to support ""purging"" the pool of all current connections and getting all fresh connections.  Oracle UCP and Websphere pools are two such examples.  It would be great if this pool supported such an operation as well.

It would be useful if the operation were exposed through JMX too.","common function connect pool support purg pool current connect get fresh connect oracl ucp webspher pool two exampl would great pool support oper well would use oper expos jmx","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","4","4","4","1","20","0","14","6","3","6","4","52","52","46","21","52","1","3","17","31","1306","107","820","177","552","410","392","608","174","434","18","18","18","8","6","1","214","214","231","99","normal"
"53254","0","Filip Hanik","Add in ability to purge the pool https://issues.apache.org/bugzilla/show_bug.cgi?id=53254","Bug 53254  Support for purging connection pool","support purg connect pool","It is a common function of a connection pool to support ""purging"" the pool of all current connections and getting all fresh connections.  Oracle UCP and Websphere pools are two such examples.  It would be great if this pool supported such an operation as well.

It would be useful if the operation were exposed through JMX too.","common function connect pool support purg pool current connect get fresh connect oracl ucp webspher pool two exampl would great pool support oper well would use oper expos jmx","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","4","4","4","1","20","0","14","6","3","6","4","52","52","46","21","52","1","3","17","31","1306","107","820","177","552","410","392","608","174","434","18","18","18","8","6","1","214","214","231","99","normal"
"53254","0","Filip Hanik","Add in ability to purge the pool https://issues.apache.org/bugzilla/show_bug.cgi?id=53254","Bug 53254  Support for purging connection pool","support purg connect pool","It is a common function of a connection pool to support ""purging"" the pool of all current connections and getting all fresh connections.  Oracle UCP and Websphere pools are two such examples.  It would be great if this pool supported such an operation as well.

It would be useful if the operation were exposed through JMX too.","common function connect pool support purg pool current connect get fresh connect oracl ucp webspher pool two exampl would great pool support oper well would use oper expos jmx","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","1","1","1","1","4","0","3","0","1","1","8","118","118","117","3","118","0","0","0","118","833","171","534","274","168","128","173","303","163","140","4","4","4","1","2","0","128","128","133","118","normal"
"53254","0","Filip Hanik","Add in ability to purge the pool https://issues.apache.org/bugzilla/show_bug.cgi?id=53254","Bug 53254  Support for purging connection pool","support purg connect pool","It is a common function of a connection pool to support ""purging"" the pool of all current connections and getting all fresh connections.  Oracle UCP and Websphere pools are two such examples.  It would be great if this pool supported such an operation as well.

It would be useful if the operation were exposed through JMX too.","common function connect pool support purg pool current connect get fresh connect oracl ucp webspher pool two exampl would great pool support oper well would use oper expos jmx","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","1","1","1","1","4","0","3","0","1","1","8","118","118","117","3","118","0","0","0","118","833","171","534","274","168","128","173","303","163","140","4","4","4","1","2","0","128","128","133","118","normal"
"53254","0","Filip Hanik","Add in ability to purge the pool https://issues.apache.org/bugzilla/show_bug.cgi?id=53254","Bug 53254  Support for purging connection pool","support purg connect pool","It is a common function of a connection pool to support ""purging"" the pool of all current connections and getting all fresh connections.  Oracle UCP and Websphere pools are two such examples.  It would be great if this pool supported such an operation as well.

It would be useful if the operation were exposed through JMX too.","common function connect pool support purg pool current connect get fresh connect oracl ucp webspher pool two exampl would great pool support oper well would use oper expos jmx","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/jmx/ConnectionPoolMBean.java""","0","0","0","0","0","0","0","0","1","0","0","0","9","9","0","9","0","0","0","9","52","15","13","12","0","24","11","12","12","0","0","0","0","0","0","2","0","0","0","0","normal"
"53254","0","Filip Hanik","Add in ability to purge the pool https://issues.apache.org/bugzilla/show_bug.cgi?id=53254","Bug 53254  Support for purging connection pool","support purg connect pool","It is a common function of a connection pool to support ""purging"" the pool of all current connections and getting all fresh connections.  Oracle UCP and Websphere pools are two such examples.  It would be great if this pool supported such an operation as well.

It would be useful if the operation were exposed through JMX too.","common function connect pool support purg pool current connect get fresh connect oracl ucp webspher pool two exampl would great pool support oper well would use oper expos jmx","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/DataSourceProxy.java""","1","1","1","1","6","0","3","2","1","0","1","135","135","135","2","135","0","1","0","134","1291","243","623","268","212","429","186","348","160","188","4","4","4","3","3","1","161","161","161","137","normal"
"53254","0","Filip Hanik","Add in ability to purge the pool https://issues.apache.org/bugzilla/show_bug.cgi?id=53254","Bug 53254  Support for purging connection pool","support purg connect pool","It is a common function of a connection pool to support ""purging"" the pool of all current connections and getting all fresh connections.  Oracle UCP and Websphere pools are two such examples.  It would be great if this pool supported such an operation as well.

It would be useful if the operation were exposed through JMX too.","common function connect pool support purg pool current connect get fresh connect oracl ucp webspher pool two exampl would great pool support oper well would use oper expos jmx","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PooledConnection.java""","2","2","3","1","14","0","9","4","1","0","7","36","36","36","15","36","0","2","2","32","675","72","375","88","243","236","177","281","87","194","14","14","17","7","3","1","105","105","130","47","normal"
"53266","22","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53266 Handle missing classes defined in @HandlesTypes more gracefully - the specification requires it should not stop the web application from loading","Bug 53266  ServletContainerInitializer will crash catalina if dependcy is not present.","servlet contain initi servletcontaineriniti crash catalina dependci present","When using a ServletContainerInitializer with a HandlesTypes annotation if any of the classes specified in the HandlesTypes annotation are not available due to a missing jar file catalina will crash with a ""java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy"".

Caused by: java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy
	at sun.reflect.annotation.AnnotationParser.parseClassArray(AnnotationParser.java:653)
	at sun.reflect.annotation.AnnotationParser.parseArray(AnnotationParser.java:460)
	at sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:286)
	at sun.reflect.annotation.AnnotationParser.parseAnnotation(AnnotationParser.java:222)
	at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:69)
	at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:52)
	at java.lang.Class.initAnnotationsIfNecessary(Class.java:3070)
	at java.lang.Class.getAnnotation(Class.java:3029)
	at org.apache.catalina.startup.ContextConfig.processServletContainerInitializers(ContextConfig.java:1546)
	at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1222)
	at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:855)
	at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
	at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
	... 7 more

Line where exception is thrown: ""HandlesTypes ht = sci.getClass().getAnnotation(HandlesTypes.class);""","use servlet contain initi servletcontaineriniti handl type handlestyp annot class specifi handl type handlestyp annot avail due miss jar file catalina crash java lang array store except arraystoreexcept sun reflect annot type not present except proxi typenotpresentexceptionproxi caus java lang array store except arraystoreexcept sun reflect annot type not present except proxi typenotpresentexceptionproxi sun reflect annot annot parser annotationpars pars class array parseclassarray annot parser annotationpars java sun reflect annot annot parser annotationpars pars array parsearray annot parser annotationpars java sun reflect annot annot parser annotationpars pars member valu parsemembervalu annot parser annotationpars java sun reflect annot annot parser annotationpars pars annot parseannot annot parser annotationpars java sun reflect annot annot parser annotationpars pars annotations2 parseannotations2 annot parser annotationpars java sun reflect annot annot parser annotationpars pars annot parseannot annot parser annotationpars java java lang class init annot if necessari initannotationsifnecessari class java java lang class get annot getannot class java apach catalina startup context config contextconfig process servlet contain initi processservletcontaineriniti context config contextconfig java apach catalina startup context config contextconfig web config webconfig context config contextconfig java apach catalina startup context config contextconfig configur start configurestart context config contextconfig java apach catalina startup context config contextconfig lifecycl event lifecycleev context config contextconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina util lifecycl base lifecyclebas fire lifecycl event firelifecycleev lifecycl base lifecyclebas java apach catalina core standard context standardcontext start intern startintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java line except thrown handl type handlestyp ht sci get class getclass get annot getannot handl type handlestyp class","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","7","1","36","3","27","6","4","1","8","62","62","61","22","62","0","9","37","16","2600","336","1842","446","1262","422","845","1289","437","852","38","38","45","13","7","0","410","410","450","108","enhancement"
"53285","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53285 Modify how the digester processes security-role-ref since link is optional and null parameters are not handled by IntrospectionUtils","Bug 53285  Web app configuration fails when security-role-ref does not contain role-link","web app configur fail secur role ref securityroleref contain role link rolelink","","","""java/org/apache/catalina/deploy/ServletDef.java""","1","1","1","1","3","0","3","0","1","0","1","31","31","31","15","31","0","0","0","31","282","73","124","56","52","85","57","90","55","35","2","2","2","1","1","1","32","32","32","31","normal"
"53285","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53285 Modify how the digester processes security-role-ref since link is optional and null parameters are not handled by IntrospectionUtils","Bug 53285  Web app configuration fails when security-role-ref does not contain role-link","web app configur fail secur role ref securityroleref contain role link rolelink","","","""java/org/apache/catalina/startup/WebRuleSet.java""","1","1","1","1","20","1","16","2","18","0","1","43","43","43","20","43","0","0","2","41","1246","210","821","170","606","215","374","469","132","337","10","10","14","1","3","0","77","77","82","43","normal"
"53301","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53301 Prevent double initialisation of servlets when using existing servlet instances with embedded Tomcat","Bug 53301  Servlet init method called twice with embedded Tomcat","servlet init method call twice embed tomcat","When using embedded Tomcat, the servlet init method is called twice by the container. This has been seen with an Apache DirectMemory unit test. I have checked with a normal Tomcat launched by the Tomcat Maven plugin (mvn tomcat7:run) and in this case, the init method is correctly called once.","use embed tomcat servlet init method call twice contain seen apach direct memori directmemori unit check normal tomcat launch tomcat maven plugin mvn tomcat7 run case init method correctli call","""test/org/apache/catalina/startup/TestTomcat.java""","1","1","1","1","14","2","10","2","6","0","5","18","18","18","2","18","0","0","3","15","400","84","251","134","140","74","152","186","105","81","7","7","7","1","3","0","27","27","27","18","normal"
"53301","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53301 Prevent double initialisation of servlets when using existing servlet instances with embedded Tomcat","Bug 53301  Servlet init method called twice with embedded Tomcat","servlet init method call twice embed tomcat","When using embedded Tomcat, the servlet init method is called twice by the container. This has been seen with an Apache DirectMemory unit test. I have checked with a normal Tomcat launched by the Tomcat Maven plugin (mvn tomcat7:run) and in this case, the init method is correctly called once.","use embed tomcat servlet init method call twice contain seen apach direct memori directmemori unit check normal tomcat launch tomcat maven plugin mvn tomcat7 run case init method correctli call","""test/org/apache/catalina/startup/TestTomcat.java""","1","1","1","1","14","2","10","2","6","0","5","18","18","18","2","18","0","0","3","15","400","84","251","134","140","74","152","186","105","81","7","7","7","1","3","0","27","27","27","18","normal"
"53301","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53301 Prevent double initialisation of servlets when using existing servlet instances with embedded Tomcat","Bug 53301  Servlet init method called twice with embedded Tomcat","servlet init method call twice embed tomcat","When using embedded Tomcat, the servlet init method is called twice by the container. This has been seen with an Apache DirectMemory unit test. I have checked with a normal Tomcat launched by the Tomcat Maven plugin (mvn tomcat7:run) and in this case, the init method is correctly called once.","use embed tomcat servlet init method call twice contain seen apach direct memori directmemori unit check normal tomcat launch tomcat maven plugin mvn tomcat7 run case init method correctli call","""java/org/apache/catalina/startup/Tomcat.java""","1","1","1","1","13","0","8","4","5","3","2","47","47","44","13","47","0","1","5","41","1027","94","610","315","410","324","225","306","126","180","7","7","7","1","2","1","78","78","78","47","normal"
"53322","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53322 Follow JavaBeans specification when converting setter method name into property name for resource injection.","Bug 53322  Odd decapitalization when inferring JavaBean property from setter name for an injection target","odd decapit infer java bean javabean properti setter name inject target","","","""java/org/apache/catalina/core/DefaultInstanceManager.java""","3","3","3","1","20","0","16","2","8","6","1","34","32","28","18","34","0","7","9","18","777","69","601","162","382","107","233","357","142","215","30","30","43","7","4","0","108","108","127","43","normal"
"53337","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53337 Fix RequestDispatcher.forward() to an async servlet","Bug 53337  IllegalStateException when trying to render a JSP after startAsync","illeg state except illegalstateexcept tri render jsp start async startasync","","","""java/org/apache/catalina/core/ApplicationDispatcher.java""","6","6","7","2","39","3","29","7","4","0","3","19","19","19","20","19","3","11","0","5","1001","147","630","162","453","225","294","408","129","279","23","23","25","7","3","0","117","117","136","44","normal"
"53337","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53337 Fix RequestDispatcher.forward() to an async servlet","Bug 53337  IllegalStateException when trying to render a JSP after startAsync","illeg state except illegalstateexcept tri render jsp start async startasync","","","""test/org/apache/catalina/core/TestAsyncContextImpl.java""","1","1","1","1","14","1","11","1","24","0","25","74","74","74","15","74","0","4","13","57","1278","257","914","387","571","121","506","631","293","338","8","8","10","1","2","0","111","111","115","74","normal"
"53339","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53339 Ensure WebSocket event calls are made using the web application's class loader. Includes a test case.","Bug 53339  ClassNotFoundException when using WebSocketServlet","class not found except classnotfoundexcept use web socket servlet websocketservlet","I'm trying to do a JNDI lookup inside the ""onOpen"" method of my StreamInbound class, but it gives me the exception below.  The code works if I move my JNP JARs to the server lib instead of the webapp lib.  The code also works fine from anywhere else, like in the ""doGet"" method.


ERROR http-bio-8080-exec-3 Test 
javax.naming.NoInitialContextException: Cannot instantiate class: org.jnp.interfaces.NamingContextFactory [Root exception is java.lang.ClassNotFoundException: org.jnp.interfaces.NamingContextFactory]
	at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:657)
	at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)
	at javax.naming.InitialContext.init(InitialContext.java:223)
	at javax.naming.InitialContext.<init>(InitialContext.java:197)
	at Test$TestStreamInbound.onOpen(Test.java:103)
	at org.apache.catalina.websocket.StreamInbound.onUpgradeComplete(StreamInbound.java:180)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:662)","tri jndi lookup insid on open onopen method stream inbound streaminbound class give except code work move jnp jar server lib instead webapp lib code work fine anywher els like do get doget method error http bio httpbio 8080 exec 8080exec javax name no initi context except noinitialcontextexcept cannot instanti class jnp interfac name context factori namingcontextfactori root except java lang class not found except classnotfoundexcept jnp interfac name context factori namingcontextfactori javax name spi name manag namingmanag get initi context getinitialcontext name manag namingmanag java javax name initi context initialcontext get default init ctx getdefaultinitctx initi context initialcontext java javax name initi context initialcontext init initi context initialcontext java javax name initi context initialcontext init initi context initialcontext java test stream inbound teststreaminbound on open onopen java apach catalina websocket stream inbound streaminbound on upgrad complet onupgradecomplet stream inbound streaminbound java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""java/org/apache/catalina/websocket/StreamInbound.java""","1","1","1","1","10","0","6","3","1","0","0","14","16","16","4","16","0","2","4","10","246","34","113","43","56","99","52","77","37","40","11","11","11","11","3","1","24","24","24","24","normal"
"53339","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53339 Ensure WebSocket event calls are made using the web application's class loader. Includes a test case.","Bug 53339  ClassNotFoundException when using WebSocketServlet","class not found except classnotfoundexcept use web socket servlet websocketservlet","I'm trying to do a JNDI lookup inside the ""onOpen"" method of my StreamInbound class, but it gives me the exception below.  The code works if I move my JNP JARs to the server lib instead of the webapp lib.  The code also works fine from anywhere else, like in the ""doGet"" method.


ERROR http-bio-8080-exec-3 Test 
javax.naming.NoInitialContextException: Cannot instantiate class: org.jnp.interfaces.NamingContextFactory [Root exception is java.lang.ClassNotFoundException: org.jnp.interfaces.NamingContextFactory]
	at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:657)
	at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)
	at javax.naming.InitialContext.init(InitialContext.java:223)
	at javax.naming.InitialContext.<init>(InitialContext.java:197)
	at Test$TestStreamInbound.onOpen(Test.java:103)
	at org.apache.catalina.websocket.StreamInbound.onUpgradeComplete(StreamInbound.java:180)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:662)","tri jndi lookup insid on open onopen method stream inbound streaminbound class give except code work move jnp jar server lib instead webapp lib code work fine anywher els like do get doget method error http bio httpbio 8080 exec 8080exec javax name no initi context except noinitialcontextexcept cannot instanti class jnp interfac name context factori namingcontextfactori root except java lang class not found except classnotfoundexcept jnp interfac name context factori namingcontextfactori javax name spi name manag namingmanag get initi context getinitialcontext name manag namingmanag java javax name initi context initialcontext get default init ctx getdefaultinitctx initi context initialcontext java javax name initi context initialcontext init initi context initialcontext java javax name initi context initialcontext init initi context initialcontext java test stream inbound teststreaminbound on open onopen java apach catalina websocket stream inbound streaminbound on upgrad complet onupgradecomplet stream inbound streaminbound java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""test/org/apache/catalina/websocket/TestWebSocket.java""","1","1","1","1","27","4","20","2","2","0","2","9","9","9","7","9","1","2","0","6","330","61","228","92","158","41","180","199","85","114","3","3","3","3","2","0","17","17","17","11","normal"
"53342","0","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53342 To avoid BindException, make startStopThreads into a demon thread.","Bug 53342  If starting immediately after Tomcat stop fail, BindException will throw.","start immedi tomcat stop fail bind except bindexcept throw","e.g.
When Context#stop throw LifecycleException, the main thread stops, 
but startStopThreads of Host/Engine will remain for a while. 
Because, startStopThreads is not a demon thread. 

As a result, 
even if a main thread stops, Acceptor Threads of 8080/8009 is not stopped. 

keepAliveTime for 10 seconds is set up now. 
===
startStopExecutor = new ThreadPoolExecutor(
            getStartStopThreadsInternal(),
            getStartStopThreadsInternal(), 10, TimeUnit.SECONDS,
            startStopQueue);
===

Therefore, in order to avoid BindException, the waiting for 10 seconds is required. 

I think that I need to make startStopThreads into a demon thread. 

Best Regards.","context stop throw lifecycl except lifecycleexcept main thread stop start stop thread startstopthread host engin remain start stop thread startstopthread demon thread result even main thread stop acceptor thread stop keep aliv time keepalivetim second set start stop executor startstopexecutor new thread pool executor threadpoolexecutor get start stop thread intern getstartstopthreadsintern get start stop thread intern getstartstopthreadsintern time unit timeunit second start stop queue startstopqueu therefor order avoid bind except bindexcept wait second requir think need make start stop thread startstopthread demon thread best regard","""java/org/apache/catalina/core/ContainerBase.java""","3","3","3","1","18","1","11","5","5","0","2","60","60","60","26","60","1","2","10","47","1599","293","840","250","504","467","374","582","202","380","12","12","18","6","3","1","189","189","225","81","normal"
"53354","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53354 Don't add empty filter mappings to the set of mappings - they'll fail validation","Bug 53354  <filter-mapping> doesn't find the @WebFilter(filterName)","filter map filtermap doesn find web filter webfilt filter name filternam","As it's not possible to specify the invocation order in a @WebFilter, users are forced to explicitly specify <filter-mapping> in web.xml. This works in combination with a @WebFilter(filterName) in Glassfish and JBoss AS as follows:

@WebFilter(filterName=""filter1"")
public class Filter1 implements Filter {}

@WebFilter(filterName=""filter2"")
public class Filter2 implements Filter {}

with

<filter-mapping>
    <filter-name>filter1</filter-name>
    <url-pattern>/url1/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>filter2</filter-name>
    <url-pattern>/url2/*</url-pattern>
</filter-mapping>

However it fails in Tomcat 7.0.27 with the following confusing exception (the <url-pattern> *is* been set)

Caused by: java.lang.IllegalArgumentException: Filter mapping must specify either a <url-pattern> or a <servlet-name>
	at org.apache.catalina.core.StandardContext.validateFilterMap(StandardContext.java:3009)
	at org.apache.catalina.core.StandardContext.addFilterMap(StandardContext.java:2968)
	at org.apache.catalina.deploy.WebXml.configureContext(WebXml.java:1207)
	at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1294)
	at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:855)
	at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
	at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
	... 7 more","possibl specifi invoc order web filter webfilt user forc explicitli specifi filter map filtermap web xml work combin web filter webfilt filter name filternam glassfish bo jboss follow web filter webfilt filter name filternam filter1 public class filter1 implement filter web filter webfilt filter name filternam filter2 public class filter2 implement filter filter map filtermap filter name filternam filter1 filter name filternam url pattern urlpattern url1 url pattern urlpattern filter map filtermap filter map filtermap filter name filternam filter2 filter name filternam url pattern urlpattern url2 url pattern urlpattern filter map filtermap howev fail tomcat follow confus except url pattern urlpattern set caus java lang illeg argument except illegalargumentexcept filter map must specifi either url pattern urlpattern servlet name servletnam apach catalina core standard context standardcontext valid filter map validatefiltermap standard context standardcontext java apach catalina core standard context standardcontext add filter map addfiltermap standard context standardcontext java apach catalina deploy web xml webxml configur context configurecontext web xml webxml java apach catalina startup context config contextconfig web config webconfig context config contextconfig java apach catalina startup context config contextconfig configur start configurestart context config contextconfig java apach catalina startup context config contextconfig lifecycl event lifecycleev context config contextconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina util lifecycl base lifecyclebas fire lifecycl event firelifecycleev lifecycl base lifecyclebas java apach catalina core standard context standardcontext start intern startintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","7","1","36","3","27","6","4","1","8","62","62","61","22","62","0","9","37","16","2596","336","1838","445","1259","422","843","1286","436","850","37","37","43","13","7","0","409","409","448","108","normal"
"53367","0","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=53367 Avoid pool hanging when database fails","Bug 53367  Database failure may cause pool to hang","databas failur may caus pool hang","during the 
 con.connect(); 
call in the method 

protected PooledConnection borrowConnection(long now, PooledConnection con, String username, String password) in ConnectionPool.java

There is no counting down the size of the pool. This means, if a connection failure happens here, the pool size remains the same. This means that 'size' will show the pool as full, but in reality the pool is empty","connect call method protect pool connect pooledconnect borrow connect borrowconnect long pool connect pooledconnect string usernam string password connect pool connectionpool java count size pool mean connect failur happen pool size remain mean size show pool full realiti pool empti","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","3","3","4","1","19","0","13","5","3","6","4","57","57","51","22","57","1","3","18","35","1348","115","840","184","561","424","402","625","181","444","18","18","18","8","6","1","221","221","239","105","critical"
"53367","0","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=53367 Avoid pool hanging when database fails","Bug 53367  Database failure may cause pool to hang","databas failur may caus pool hang","during the 
 con.connect(); 
call in the method 

protected PooledConnection borrowConnection(long now, PooledConnection con, String username, String password) in ConnectionPool.java

There is no counting down the size of the pool. This means, if a connection failure happens here, the pool size remains the same. This means that 'size' will show the pool as full, but in reality the pool is empty","connect call method protect pool connect pooledconnect borrow connect borrowconnect long pool connect pooledconnect string usernam string password connect pool connectionpool java count size pool mean connect failur happen pool size remain mean size show pool full realiti pool empti","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PooledConnection.java""","2","2","3","1","13","0","9","4","1","0","7","37","37","37","16","37","0","2","2","33","682","74","380","90","246","236","180","285","89","196","14","14","17","7","3","1","106","106","131","48","critical"
"53373","0","Christopher Schultz","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53373 Trim whitespace from around <Context> aliases delimiters (,=) to improve readability of many aliases.","Bug 53373  Allow whitespace around delimiters in <Context> aliases for readability","allow whitespac around delimit context alia readabl","","","""java/org/apache/naming/resources/BaseDirContext.java""","1","1","1","1","16","0","6","9","2","0","2","60","81","81","10","81","0","1","4","76","1622","222","542","276","205","861","193","307","158","149","8","8","12","7","3","2","105","105","109","82","enhancement"
"53373","0","Christopher Schultz","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53373 Trim whitespace from around <Context> aliases delimiters (,=) to improve readability of many aliases.","Bug 53373  Allow whitespace around delimiters in <Context> aliases for readability","allow whitespac around delimit context alia readabl","","","""test/org/apache/naming/resources/TestNamingContext.java""","1","1","1","1","17","3","13","1","6","0","8","14","14","14","0","14","0","1","5","8","346","74","242","121","150","35","149","179","96","83","3","3","3","1","2","0","24","24","24","14","enhancement"
"53374","1","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53374 Fix support for the following properties in DataSourceFactory: commitOnReturn rollbackOnReturn useDisposableConnectionFacade logValidationErrors propagateInterruptState","Bug 53374  DataSourceFactory does not support commitOnReturn property","data sourc factori datasourcefactori support commit on return commitonreturn properti","DataSourceFactory does not support commitOnReturn property.
DataSourceFactory.ALL_PROPERTIES and DataSourceFactory.parsePoolProperties() omit commitOnReturn property.","data sourc factori datasourcefactori support commit on return commitonreturn properti data sourc factori datasourcefactori properti data sourc factori datasourcefactori pars pool properti parsepoolproperti omit commit on return commitonreturn properti","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/DataSourceFactory.java""","11","11","12","1","60","8","46","5","1","2","46","6","6","4","0","6","0","0","1","5","540","81","388","128","295","71","198","269","83","186","52","52","52","3","3","0","71","71","73","8","normal"
"53398","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53398 recieved->received","Bug 53398  Incorrect tag on XML response when calling 'manager/status?XML=true'","incorrect tag xml respons call manag statu xml true","","","""java/org/apache/catalina/manager/StatusTransformer.java""","5","5","5","1","42","3","33","5","1","20","0","20","20","0","0","20","0","0","2","18","940","128","695","139","540","127","388","491","101","390","21","14","23","4","4","0","112","102","115","28","normal"
"53406","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53406 Fix possible stack overflow on connection close when using Comet (fhanik)","Bug 53406  Stack overflow in connector","stack overflow connector","found against trunk on Jun 18, 2012

SEVERE:
java.lang.StackOverflowError
        at org.apache.catalina.core.StandardContextValve.event(StandardContextValve.java:128)
        at org.apache.catalina.valves.ValveBase.event(ValveBase.java:204)
        at org.apache.catalina.core.StandardHostValve.event(StandardHostValve.java:223)
        at org.apache.catalina.valves.ValveBase.event(ValveBase.java:204)
        at org.apache.catalina.valves.ValveBase.event(ValveBase.java:204)
        at org.apache.catalina.core.StandardEngineValve.event(StandardEngineValve.java:110)
        at org.apache.catalina.connector.CoyoteAdapter.event(CoyoteAdapter.java:209)
        at org.apache.coyote.http11.Http11NioProcessor.event(Http11NioProcessor.java:124)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:569)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)","found trunk jun sever java lang stack overflow error stackoverflowerror apach catalina core standard context valv standardcontextvalv event standard context valv standardcontextvalv java apach catalina valv valv base valvebas event valv base valvebas java apach catalina core standard host valv standardhostvalv event standard host valv standardhostvalv java apach catalina valv valv base valvebas event valv base valvebas java apach catalina valv valv base valvebas event valv base valvebas java apach catalina core standard engin valv standardenginevalv event standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt event coyot adapt coyoteadapt java apach coyot http11 http11 nio processor http11nioprocessor event http11 nio processor http11nioprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java","""java/org/apache/coyote/http11/Http11AprProcessor.java""","3","3","4","2","18","1","14","3","1","0","1","20","20","20","5","20","0","0","13","7","524","88","327","93","208","109","156","232","75","157","47","47","57","17","6","0","76","76","87","40","normal"
"53406","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53406 Fix possible stack overflow on connection close when using Comet (fhanik)","Bug 53406  Stack overflow in connector","stack overflow connector","found against trunk on Jun 18, 2012

SEVERE:
java.lang.StackOverflowError
        at org.apache.catalina.core.StandardContextValve.event(StandardContextValve.java:128)
        at org.apache.catalina.valves.ValveBase.event(ValveBase.java:204)
        at org.apache.catalina.core.StandardHostValve.event(StandardHostValve.java:223)
        at org.apache.catalina.valves.ValveBase.event(ValveBase.java:204)
        at org.apache.catalina.valves.ValveBase.event(ValveBase.java:204)
        at org.apache.catalina.core.StandardEngineValve.event(StandardEngineValve.java:110)
        at org.apache.catalina.connector.CoyoteAdapter.event(CoyoteAdapter.java:209)
        at org.apache.coyote.http11.Http11NioProcessor.event(Http11NioProcessor.java:124)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:569)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at org.apache.tomcat.util.net.NioEndpoint.processSocket(NioEndpoint.java:730)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:1008)
        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:999)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.longPoll(Http11NioProtocol.java:277)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:596)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)","found trunk jun sever java lang stack overflow error stackoverflowerror apach catalina core standard context valv standardcontextvalv event standard context valv standardcontextvalv java apach catalina valv valv base valvebas event valv base valvebas java apach catalina core standard host valv standardhostvalv event standard host valv standardhostvalv java apach catalina valv valv base valvebas event valv base valvebas java apach catalina valv valv base valvebas event valv base valvebas java apach catalina core standard engin valv standardenginevalv event standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt event coyot adapt coyoteadapt java apach coyot http11 http11 nio processor http11nioprocessor event http11 nio processor http11nioprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint process socket processsocket nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint poller add nio endpoint nioendpoint java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl long poll longpol http11 nio protocol http11nioprotocol java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java","""java/org/apache/coyote/http11/Http11NioProcessor.java""","4","4","5","2","23","1","17","3","1","0","1","18","18","18","5","18","0","0","13","5","553","85","368","96","238","101","159","245","71","174","48","48","56","21","5","0","86","86","98","41","normal"
"53416","12","Filip Hanik","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53416 Make sure we retain the domain if the registration comes from Tomcat","Bug 53416  Two datasources with the same name in different web applications results in javax.management.InstanceAlreadyExistsException","two datasourc name differ web applic result javax manag instanc alreadi exist except instancealreadyexistsexcept","Deploy two different web applications onto Tomcat.

Each web application has a resource that:

* uses the Use Tomcat JDBC Connection Pool
* has an identical name to the other one

<Resource name=""jdbc/collision"" factory=""org.apache.tomcat.jdbc.pool.DataSourceFactory"" ... />

When starting the server you get a non fatal error in the logs InstanceAlreadyExistsException.  Both applications appear to still work OK

ERROR org.apache.tomcat.jdbc.pool.DataSource - Unable to register JDBC pool with JMX
javax.management.InstanceAlreadyExistsException: tomcat.jdbc:name=""jdbc/soscvuk"",context=/,type=ConnectionPool,host=localhost,class=org.apache.tomcat.jdbc.pool.
DataSource
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:453) ~[na:1.6.0_32]
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.internal_addObject(DefaultMBeanServerInterceptor.java:1484) [na:1.6.0_32]
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:963) [na:1.6.0_32]
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:917) [na:1.6.0_32]
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:312) [na:1.6.0_32]
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:482) [na:1.6.0_32]
	at org.apache.tomcat.jdbc.pool.DataSource.registerJmx(DataSource.java:135) [tomcat-jdbc.jar:na]
	at org.apache.tomcat.jdbc.pool.DataSource.preRegister(DataSource.java:102) [tomcat-jdbc.jar:na]
	at org.apache.tomcat.util.modeler.BaseModelMBean.preRegister(BaseModelMBean.java:1132) [tomcat-coyote.jar:7.0.27]
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.preRegisterInvoke(DefaultMBeanServerInterceptor.java:1010) [na:1.6.0_32]
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:938) [na:1.6.0_32]
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:917) [na:1.6.0_32]
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:312) [na:1.6.0_32]
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:482) [na:1.6.0_32]
	at org.apache.tomcat.util.modeler.Registry.registerComponent(Registry.java:742) [tomcat-coyote.jar:7.0.27]
	at org.apache.catalina.core.NamingContextListener.addResource(NamingContextListener.java:1062) [catalina.jar:7.0.27]
	at org.apache.catalina.core.NamingContextListener.createNamingContext(NamingContextListener.java:671) [catalina.jar:7.0.27]
	at org.apache.catalina.core.NamingContextListener.lifecycleEvent(NamingContextListener.java:270) [catalina.jar:7.0.27]
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119) [catalina.jar:7.0.27]
	at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90) [catalina.jar:7.0.27]
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161) [catalina.jar:7.0.27]
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.27]
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895) [catalina.jar:7.0.27]
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871) [catalina.jar:7.0.27]
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615) [catalina.jar:7.0.27]
	at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649) [catalina.jar:7.0.27]
	at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585) [catalina.jar:7.0.27]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) [na:1.6.0_32]
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [na:1.6.0_32]
	at java.util.concurrent.FutureTask.run(FutureTask.java:138) [na:1.6.0_32]
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [na:1.6.0_32]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [na:1.6.0_32]
	at java.lang.Thread.run(Thread.java:662) [na:1.6.0_32]","deploy two differ web applic onto tomcat web applic resourc us use tomcat jdbc connect pool ident name one resourc name jdbc collis factori apach tomcat jdbc pool data sourc factori datasourcefactori start server get fatal error log instanc alreadi exist except instancealreadyexistsexcept applic appear still work ok error apach tomcat jdbc pool data sourc datasourc unabl regist jdbc pool jmx javax manag instanc alreadi exist except instancealreadyexistsexcept tomcat jdbc name jdbc soscvuk context type connect pool connectionpool host localhost class apach tomcat jdbc pool data sourc datasourc sun jmx mbeanserv repositori add bean addmbean repositori java sun jmx interceptor default bean server interceptor defaultmbeanserverinterceptor intern add object addobject default bean server interceptor defaultmbeanserverinterceptor java sun jmx interceptor default bean server interceptor defaultmbeanserverinterceptor regist dynam bean registerdynamicmbean default bean server interceptor defaultmbeanserverinterceptor java sun jmx interceptor default bean server interceptor defaultmbeanserverinterceptor regist object registerobject default bean server interceptor defaultmbeanserverinterceptor java sun jmx interceptor default bean server interceptor defaultmbeanserverinterceptor regist bean registermbean default bean server interceptor defaultmbeanserverinterceptor java sun jmx mbeanserv jmx bean server jmxmbeanserv regist bean registermbean jmx bean server jmxmbeanserv java apach tomcat jdbc pool data sourc datasourc regist jmx registerjmx data sourc datasourc java tomcat jdbc tomcatjdbc jar apach tomcat jdbc pool data sourc datasourc pre regist preregist data sourc datasourc java tomcat jdbc tomcatjdbc jar apach tomcat util model base model bean basemodelmbean pre regist preregist base model bean basemodelmbean java tomcat coyot tomcatcoyot jar sun jmx interceptor default bean server interceptor defaultmbeanserverinterceptor pre regist invok preregisterinvok default bean server interceptor defaultmbeanserverinterceptor java sun jmx interceptor default bean server interceptor defaultmbeanserverinterceptor regist dynam bean registerdynamicmbean default bean server interceptor defaultmbeanserverinterceptor java sun jmx interceptor default bean server interceptor defaultmbeanserverinterceptor regist object registerobject default bean server interceptor defaultmbeanserverinterceptor java sun jmx interceptor default bean server interceptor defaultmbeanserverinterceptor regist bean registermbean default bean server interceptor defaultmbeanserverinterceptor java sun jmx mbeanserv jmx bean server jmxmbeanserv regist bean registermbean jmx bean server jmxmbeanserv java apach tomcat util model registri regist compon registercompon registri java tomcat coyot tomcatcoyot jar apach catalina core name context listen namingcontextlisten add resourc addresourc name context listen namingcontextlisten java catalina jar apach catalina core name context listen namingcontextlisten creat name context createnamingcontext name context listen namingcontextlisten java catalina jar apach catalina core name context listen namingcontextlisten lifecycl event lifecycleev name context listen namingcontextlisten java catalina jar apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java catalina jar apach catalina util lifecycl base lifecyclebas fire lifecycl event firelifecycleev lifecycl base lifecyclebas java catalina jar apach catalina core standard context standardcontext start intern startintern standard context standardcontext java catalina jar apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java catalina jar apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java catalina jar apach catalina core contain base containerbas add child addchild contain base containerbas java catalina jar apach catalina core standard host standardhost add child addchild standard host standardhost java catalina jar apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig java catalina jar apach catalina startup host config hostconfig deploy descriptor deploydescriptor run host config hostconfig java catalina jar java util concurr executor runnabl adapt runnableadapt call executor java java util concurr futur task futuretask sync inner run innerrun futur task futuretask java java util concurr futur task futuretask run futur task futuretask java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/DataSource.java""","1","1","1","1","10","0","5","4","1","0","1","9","9","9","1","9","0","0","2","7","157","22","71","32","32","64","33","50","28","22","3","3","3","1","2","1","17","17","17","9","normal"
"53421","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53421 Provide more useful error message when bean property getter/setter cannot be found.","Bug 53421  BeanELResolver's inner class BeanProperty throws incorrect message while PropertyNotFound","bean resolv beanelresolv inner class bean properti beanproperti throw incorrect messag properti not found propertynotfound","BeanELResolver's inner class BeanProperty(line: 264) has two methods (write, read) that will throw PropertyNotFoundException. And there current implementation are wrong:

  throw new PropertyNotFoundException(message(ctx,
                            ""propertyNotWritable"", new Object[] {
                                    type.getName(), descriptor.getName() }));

it should use owner.getName() instead of type.getName() because the assembled message will be:

Property '[descriptor.getName()]' not readable on type [type.getName()]

Here the descriptor.getName() means the property name, type.getName() means the property type's name and the owner.getName() means the property owner - bean's type name.

Of course we developer would prefer to receive a message that tells us which bean type doesn't contain such property because this is a PropertyNotFoundException.","bean resolv beanelresolv inner class bean properti beanproperti line two method write read throw properti not found except propertynotfoundexcept current implement wrong throw new properti not found except propertynotfoundexcept messag ctx properti not writabl propertynotwrit new object type get name getnam descriptor get name getnam use owner get name getnam instead type get name getnam assembl messag properti descriptor get name getnam readabl type type get name getnam descriptor get name getnam mean properti name type get name getnam mean properti type name owner get name getnam mean properti owner bean type name cours develop would prefer receiv messag tell u bean type doesn contain properti properti not found except propertynotfoundexcept","""java/javax/el/BeanELResolver.java""","3","3","3","1","14","0","13","0","5","1","2","26","26","25","12","26","0","6","0","20","504","62","415","113","244","28","179","270","99","171","21","21","23","8","4","0","89","89","99","44","normal"
"53430","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53430 Fix problems with missing / wrong version of APR/native library when APR connector is explicitly configured. Protocol now declares if it needs the library and the connector ensures it is available if required.","Bug 53430  JVM crash at startup if TC-Native version is too old","jvm crash startup tc nativ version old","","","""java/org/apache/coyote/AbstractProtocol.java""","1","1","2","1","7","0","6","0","3","0","3","61","72","72","16","72","0","1","13","58","760","129","487","170","283","144","220","340","136","204","20","20","24","5","3","0","119","119","123","68","normal"
"53430","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53430 Fix problems with missing / wrong version of APR/native library when APR connector is explicitly configured. Protocol now declares if it needs the library and the connector ensures it is available if required.","Bug 53430  JVM crash at startup if TC-Native version is too old","jvm crash startup tc nativ version old","","","""java/org/apache/coyote/ajp/AjpAprProtocol.java""","1","1","1","1","4","0","3","0","2","0","1","13","13","13","2","13","0","0","6","7","147","35","74","39","31","38","39","55","28","27","2","2","2","1","1","1","14","14","14","13","normal"
"53430","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53430 Fix problems with missing / wrong version of APR/native library when APR connector is explicitly configured. Protocol now declares if it needs the library and the connector ensures it is available if required.","Bug 53430  JVM crash at startup if TC-Native version is too old","jvm crash startup tc nativ version old","","","""java/org/apache/catalina/connector/Connector.java""","1","1","1","1","12","1","5","5","1","0","4","65","65","65","24","65","0","0","8","57","1082","278","438","139","248","366","198","296","127","169","8","8","8","3","2","1","97","97","100","67","normal"
"53430","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53430 Fix problems with missing / wrong version of APR/native library when APR connector is explicitly configured. Protocol now declares if it needs the library and the connector ensures it is available if required.","Bug 53430  JVM crash at startup if TC-Native version is too old","jvm crash startup tc nativ version old","","","""java/org/apache/coyote/http11/Http11AprProtocol.java""","1","1","1","1","3","0","2","0","2","0","1","53","53","53","2","53","1","0","9","43","318","61","179","97","104","78","100","163","75","88","5","5","6","4","3","0","61","61","64","56","normal"
"53430","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53430 Fix problems with missing / wrong version of APR/native library when APR connector is explicitly configured. Protocol now declares if it needs the library and the connector ensures it is available if required.","Bug 53430  JVM crash at startup if TC-Native version is too old","jvm crash startup tc nativ version old","","","""java/org/apache/coyote/ProtocolHandler.java""","0","0","0","0","0","0","0","0","1","0","0","0","9","9","0","9","0","0","0","9","85","19","13","12","0","53","11","12","12","0","0","0","0","0","0","4","0","0","0","0","normal"
"53445","5","Filip Hanik","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53445 by allowing  a) override the getObjectName method of the SlowQueryReportJmx class  b) specify the objectName=xxx attribute in the configuration","Bug 53445  Support consistent Jmx object naming strategy across managed resources","support consist jmx object name strategi across manag resourc","Tomcat JDBC Pool Versions tested: 7.0.27 & 7.0.28
More of an inquiry.  Let me preface by saying we have recently adopted this pool and are very pleased so far.

Currently, Jmx managed resources like ConnectionPool and SlowQueryReportJmx are registered under the same domain (i.e. tomcat.jdbc).  Some users may want to employ an alternate object naming strategy.  With DataSource#createObjectName it is relatively easy to change the ConnectionPool ObjectName (i.e. subclass).  However, with SlowQueryReportJmx, due to a static getObjectName method, it requires overriding additional methods which is less desirable.
It appears that ConnectionPool has a constant POOL_JMX_TYPE_PREFIX.  SlowQueryReportJmx appears to use this but DataSource does not? 

Is there any reason that the SlowQueryReportJmx#getObjectName method is static?
What about registering an object naming strategy with the pool that the various components would use, facilitating consistency?  This would mitigate the need to override just to alter the ObjectName.

Reference: Spring MBean exporters and their ObjectNamingStrategy interface.

Thanks.","tomcat jdbc pool version test inquiri let prefac say recent adopt pool pleas far current jmx manag resourc like connect pool connectionpool slow queri report jmx slowqueryreportjmx regist domain tomcat jdbc user may employ altern object name strategi data sourc datasourc creat object name createobjectnam rel easi chang connect pool connectionpool object name objectnam subclass howev slow queri report jmx slowqueryreportjmx due static get object name getobjectnam method requir overrid addit method le desir appear connect pool connectionpool constant pool jmx type prefix slow queri report jmx slowqueryreportjmx appear use data sourc datasourc reason slow queri report jmx slowqueryreportjmx get object name getobjectnam method static regist object name strategi pool variou compon would use facilit consist would mitig need overrid alter object name objectnam refer spring bean mbean export object name strategi objectnamingstrategi interfac thank","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","3","3","4","1","19","0","13","5","3","6","4","57","57","51","22","57","1","3","18","35","1360","115","852","185","571","424","408","633","182","451","18","18","18","8","6","1","223","223","241","105","enhancement"
"53445","5","Filip Hanik","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53445 by allowing  a) override the getObjectName method of the SlowQueryReportJmx class  b) specify the objectName=xxx attribute in the configuration","Bug 53445  Support consistent Jmx object naming strategy across managed resources","support consist jmx object name strategi across manag resourc","Tomcat JDBC Pool Versions tested: 7.0.27 & 7.0.28
More of an inquiry.  Let me preface by saying we have recently adopted this pool and are very pleased so far.

Currently, Jmx managed resources like ConnectionPool and SlowQueryReportJmx are registered under the same domain (i.e. tomcat.jdbc).  Some users may want to employ an alternate object naming strategy.  With DataSource#createObjectName it is relatively easy to change the ConnectionPool ObjectName (i.e. subclass).  However, with SlowQueryReportJmx, due to a static getObjectName method, it requires overriding additional methods which is less desirable.
It appears that ConnectionPool has a constant POOL_JMX_TYPE_PREFIX.  SlowQueryReportJmx appears to use this but DataSource does not? 

Is there any reason that the SlowQueryReportJmx#getObjectName method is static?
What about registering an object naming strategy with the pool that the various components would use, facilitating consistency?  This would mitigate the need to override just to alter the ObjectName.

Reference: Spring MBean exporters and their ObjectNamingStrategy interface.

Thanks.","tomcat jdbc pool version test inquiri let prefac say recent adopt pool pleas far current jmx manag resourc like connect pool connectionpool slow queri report jmx slowqueryreportjmx regist domain tomcat jdbc user may employ altern object name strategi data sourc datasourc creat object name createobjectnam rel easi chang connect pool connectionpool object name objectnam subclass howev slow queri report jmx slowqueryreportjmx due static get object name getobjectnam method requir overrid addit method le desir appear connect pool connectionpool constant pool jmx type prefix slow queri report jmx slowqueryreportjmx appear use data sourc datasourc reason slow queri report jmx slowqueryreportjmx get object name getobjectnam method static regist object name strategi pool variou compon would use facilit consist would mitig need overrid alter object name objectnam refer spring bean mbean export object name strategi objectnamingstrategi interfac thank","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/DataSource.java""","1","1","1","1","10","0","5","4","1","0","1","9","9","9","1","9","0","0","2","7","157","22","71","32","32","64","33","50","28","22","3","3","3","1","2","1","17","17","17","9","enhancement"
"53445","5","Filip Hanik","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53445 by allowing  a) override the getObjectName method of the SlowQueryReportJmx class  b) specify the objectName=xxx attribute in the configuration","Bug 53445  Support consistent Jmx object naming strategy across managed resources","support consist jmx object name strategi across manag resourc","Tomcat JDBC Pool Versions tested: 7.0.27 & 7.0.28
More of an inquiry.  Let me preface by saying we have recently adopted this pool and are very pleased so far.

Currently, Jmx managed resources like ConnectionPool and SlowQueryReportJmx are registered under the same domain (i.e. tomcat.jdbc).  Some users may want to employ an alternate object naming strategy.  With DataSource#createObjectName it is relatively easy to change the ConnectionPool ObjectName (i.e. subclass).  However, with SlowQueryReportJmx, due to a static getObjectName method, it requires overriding additional methods which is less desirable.
It appears that ConnectionPool has a constant POOL_JMX_TYPE_PREFIX.  SlowQueryReportJmx appears to use this but DataSource does not? 

Is there any reason that the SlowQueryReportJmx#getObjectName method is static?
What about registering an object naming strategy with the pool that the various components would use, facilitating consistency?  This would mitigate the need to override just to alter the ObjectName.

Reference: Spring MBean exporters and their ObjectNamingStrategy interface.

Thanks.","tomcat jdbc pool version test inquiri let prefac say recent adopt pool pleas far current jmx manag resourc like connect pool connectionpool slow queri report jmx slowqueryreportjmx regist domain tomcat jdbc user may employ altern object name strategi data sourc datasourc creat object name createobjectnam rel easi chang connect pool connectionpool object name objectnam subclass howev slow queri report jmx slowqueryreportjmx due static get object name getobjectnam method requir overrid addit method le desir appear connect pool connectionpool constant pool jmx type prefix slow queri report jmx slowqueryreportjmx appear use data sourc datasourc reason slow queri report jmx slowqueryreportjmx get object name getobjectnam method static regist object name strategi pool variou compon would use facilit consist would mitig need overrid alter object name objectnam refer spring bean mbean export object name strategi objectnamingstrategi interfac thank","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/interceptor/SlowQueryReportJmx.java""","2","2","2","1","9","0","8","0","1","2","6","21","21","19","4","21","0","0","6","15","312","48","223","93","116","41","107","149","80","69","9","9","9","1","3","0","48","48","49","21","enhancement"
"53445","5","Filip Hanik","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53445 by allowing  a) override the getObjectName method of the SlowQueryReportJmx class  b) specify the objectName=xxx attribute in the configuration","Bug 53445  Support consistent Jmx object naming strategy across managed resources","support consist jmx object name strategi across manag resourc","Tomcat JDBC Pool Versions tested: 7.0.27 & 7.0.28
More of an inquiry.  Let me preface by saying we have recently adopted this pool and are very pleased so far.

Currently, Jmx managed resources like ConnectionPool and SlowQueryReportJmx are registered under the same domain (i.e. tomcat.jdbc).  Some users may want to employ an alternate object naming strategy.  With DataSource#createObjectName it is relatively easy to change the ConnectionPool ObjectName (i.e. subclass).  However, with SlowQueryReportJmx, due to a static getObjectName method, it requires overriding additional methods which is less desirable.
It appears that ConnectionPool has a constant POOL_JMX_TYPE_PREFIX.  SlowQueryReportJmx appears to use this but DataSource does not? 

Is there any reason that the SlowQueryReportJmx#getObjectName method is static?
What about registering an object naming strategy with the pool that the various components would use, facilitating consistency?  This would mitigate the need to override just to alter the ObjectName.

Reference: Spring MBean exporters and their ObjectNamingStrategy interface.

Thanks.","tomcat jdbc pool version test inquiri let prefac say recent adopt pool pleas far current jmx manag resourc like connect pool connectionpool slow queri report jmx slowqueryreportjmx regist domain tomcat jdbc user may employ altern object name strategi data sourc datasourc creat object name createobjectnam rel easi chang connect pool connectionpool object name objectnam subclass howev slow queri report jmx slowqueryreportjmx due static get object name getobjectnam method requir overrid addit method le desir appear connect pool connectionpool constant pool jmx type prefix slow queri report jmx slowqueryreportjmx appear use data sourc datasourc reason slow queri report jmx slowqueryreportjmx get object name getobjectnam method static regist object name strategi pool variou compon would use facilit consist would mitig need overrid alter object name objectnam refer spring bean mbean export object name strategi objectnamingstrategi interfac thank","""modules/jdbc-pool/src/test/java/org/apache/tomcat/jdbc/test/TestSlowQueryReport.java""","2","2","2","1","26","0","25","0","2","0","0","6","6","6","1","6","0","0","0","6","209","19","171","70","128","19","143","161","75","86","4","4","4","1","2","0","16","16","16","6","enhancement"
"53450","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53450 Correct regression in fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=52999 that was likely to cause a deadlock when deploying a ROOT web application.","Bug 53450  Deployment of an application with 'ROOT' context hangs forever","deploy applic root context hang forev","Hi,

The scenario is the following:
- I have running Tomcat 7.0.28
- I deploy an application with 'ROOT' context
- The deployment hangs forever. When taking a tread dump, the following is suspicious:

""localhost-startStop-2"" daemon prio=6 tid=0x0000000006607800 nid=0x2560 waiting on condition [0x0000000009ebf000]
   java.lang.Thread.State: WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  <0x00000007d80f0108> (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync)
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:842)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1178)
        at java.util.concurrent.locks.ReentrantReadWriteLock$WriteLock.lock(ReentrantReadWriteLock.java:807)
        at org.apache.catalina.core.ContainerBase.removeContainerListener(ContainerBase.java:1071)
        at org.apache.catalina.core.StandardEngine$AccessLogListener.uninstall(StandardEngine.java:463)
        at org.apache.catalina.core.StandardEngine$AccessLogListener.containerEvent(StandardEngine.java:505)
        at org.apache.catalina.core.ContainerBase.fireContainerEvent(ContainerBase.java:1431)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:907)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:875)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
        at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1100)
        at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1618)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)



As you can see
- A read lock is acquired at org.apache.catalina.core.ContainerBase.fireContainerEvent(ContainerBase.java:1425)
- Then every listener is invoked to process the container event
- Then AccessLogListener is invoked org.apache.catalina.core.StandardEngine$AccessLogListener.uninstall(StandardEngine.java:463)
- The latter causes a call for a write lock org.apache.catalina.core.ContainerBase.removeContainerListener(ContainerBase.java:1071)
- Unfortunately in the ReentrantReadWriteLock it is stated that upgrade from read to write lock is not possible
""Reentrancy also allows downgrading from the write lock to a read lock, by acquiring the write lock, then the read lock and then releasing the write lock. However, upgrading from a read lock to the write lock is not possible.""

Regards
Violeta Georgieva","hi scenario follow run tomcat deploy applic root context deploy hang forev take tread dump follow suspici localhost start stop localhoststartstop daemon prio tid 0x0000000006607800 nid 0x2560 wait condit 0x0000000009ebf000 java lang thread state wait park sun misc unsaf park nativ method park wait 0x00000007d80f0108 java util concurr lock reentrant read write lock reentrantreadwritelock nonfair sync nonfairsync java util concurr lock lock support locksupport park lock support locksupport java java util concurr lock abstract queu synchron abstractqueuedsynchron park and check interrupt parkandcheckinterrupt abstract queu synchron abstractqueuedsynchron java java util concurr lock abstract queu synchron abstractqueuedsynchron acquir queu acquirequeu abstract queu synchron abstractqueuedsynchron java java util concurr lock abstract queu synchron abstractqueuedsynchron acquir abstract queu synchron abstractqueuedsynchron java java util concurr lock reentrant read write lock reentrantreadwritelock write lock writelock lock reentrant read write lock reentrantreadwritelock java apach catalina core contain base containerbas remov contain listen removecontainerlisten contain base containerbas java apach catalina core standard engin standardengin access log listen accessloglisten uninstal standard engin standardengin java apach catalina core standard engin standardengin access log listen accessloglisten contain event containerev standard engin standardengin java apach catalina core contain base containerbas fire contain event firecontainerev contain base containerbas java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy directori deploydirectori host config hostconfig java apach catalina startup host config hostconfig deploy directori deploydirectori run host config hostconfig java java util concurr executor runnabl adapt runnableadapt call executor java java util concurr futur task futuretask sync inner run innerrun futur task futuretask java java util concurr futur task futuretask run futur task futuretask java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java see read lock acquir apach catalina core contain base containerbas fire contain event firecontainerev contain base containerbas java everi listen invok process contain event access log listen accessloglisten invok apach catalina core standard engin standardengin access log listen accessloglisten uninstal standard engin standardengin java latter caus call write lock apach catalina core contain base containerbas remov contain listen removecontainerlisten contain base containerbas java unfortun reentrant read write lock reentrantreadwritelock state upgrad read write lock possibl reentranc allow downgrad write lock read lock acquir write lock read lock releas write lock howev upgrad read lock write lock possibl regard violeta georgieva","""java/org/apache/catalina/core/ContainerBase.java""","3","3","3","1","18","1","11","5","6","0","2","62","62","62","30","62","1","2","10","49","1647","292","876","266","527","480","394","606","216","390","12","12","18","6","3","1","192","192","228","83","normal"
"53460","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53460 There are two parts to this fix: - don't swallow exceptions when the PageContext can't be created - if the PageContext is null when an error occurs (and therefore can't be used to handle the error) propagate the exception wrapped in a ServletException and let the container handle it. Note: This is the version of the fix for back-porting to 7.0.x. There is some obvious but API changing clean-up that can simplify this in trunk.","Bug 53460  Use error handling when TooManyActiveSessionsException happens in JSP","use error handl too mani activ session except toomanyactivesessionsexcept happen jsp","","","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","36","3","27","5","12","6","6","112","112","106","48","112","11","51","0","50","4278","513","3054","544","2356","739","1872","2372","502","1870","22","22","30","20","5","0","502","496","558","210","normal"
"53460","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53460 There are two parts to this fix: - don't swallow exceptions when the PageContext can't be created - if the PageContext is null when an error occurs (and therefore can't be used to handle the error) propagate the exception wrapped in a ServletException and let the container handle it. Note: This is the version of the fix for back-porting to 7.0.x. There is some obvious but API changing clean-up that can simplify this in trunk.","Bug 53460  Use error handling when TooManyActiveSessionsException happens in JSP","use error handl too mani activ session except toomanyactivesessionsexcept happen jsp","","","""java/org/apache/jasper/runtime/JspFactoryImpl.java""","1","1","1","1","8","0","8","0","6","0","3","15","15","15","14","15","2","2","0","11","223","29","172","74","81","22","78","108","56","52","5","5","5","1","3","0","26","26","27","15","normal"
"53465","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53465 Populate mapped-name property for resources defined in web.xml Based on a patch by Violeta Georgieva","Bug 53465  mapped-name is read when in @Resource, but not when in web.xml","map name mappednam read resourc web xml","","","""test/org/apache/naming/resources/TestNamingContext.java""","1","1","1","1","24","4","18","2","6","0","8","15","15","15","0","15","0","1","5","9","483","102","339","143","232","47","216","257","116","141","5","5","5","1","2","0","29","29","29","15","normal"
"53465","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53465 Populate mapped-name property for resources defined in web.xml Based on a patch by Violeta Georgieva","Bug 53465  mapped-name is read when in @Resource, but not when in web.xml","map name mappednam read resourc web xml","","","""java/org/apache/catalina/startup/WebRuleSet.java""","1","1","1","1","20","1","17","2","18","0","1","43","43","43","20","43","0","0","2","41","1251","210","826","170","611","215","375","470","132","338","10","10","14","1","3","0","77","77","82","43","normal"
"53467","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53467 Use more explicit URI constructor to ensure components are correctly encoded.","Bug 53467  7.0.28 will no longer accept our jsp filenames","longer accept jsp filenam","","","""java/org/apache/catalina/core/ApplicationContext.java""","2","2","3","2","18","1","11","5","2","2","5","64","64","62","14","64","1","6","4","53","1596","284","903","303","547","409","387","563","221","342","12","12","13","9","3","0","187","187","208","131","normal"
"53467","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53467 Use more explicit URI constructor to ensure components are correctly encoded.","Bug 53467  7.0.28 will no longer accept our jsp filenames","longer accept jsp filenam","","","""test/org/apache/catalina/core/TestApplicationContext.java""","3","3","3","1","20","4","15","2","1","0","0","1","1","1","0","1","0","0","0","1","51","9","25","16","11","18","15","20","15","5","3","3","3","1","2","1","3","3","3","1","normal"
"53467","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53467 Use more explicit URI constructor to ensure components are correctly encoded.","Bug 53467  7.0.28 will no longer accept our jsp filenames","longer accept jsp filenam","","","""test/org/apache/catalina/core/TestApplicationContext.java""","3","3","3","1","20","4","15","2","1","0","0","1","1","1","0","1","0","0","0","1","51","9","25","16","11","18","15","20","15","5","3","3","3","1","2","1","3","3","3","1","normal"
"53469","33","Mark Emlyn David Thomas","Partial fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=53469 If the relative URL can't be made absolute, do not encode it and return it as is","Bug 53469  possible bug in Response.normalize(CharChunk cc)","possibl respons normal char chunk charchunk cc","The Response.normalize(CharChunk cc) introduced in 7.0.28 introduced a bug.
See Bug ID 53062

The URL that is being encoded is:
../../resources/org.apache.wicket.markup.html.WicketEventReference/wicket-event.js?w:lm=1340711670
which causes a IllegalArgumentException in this method

java.lang.IllegalArgumentException
	at org.apache.catalina.connector.Response.normalize(Response.java:1799)
	at org.apache.catalina.connector.Response.toAbsolute(Response.java:1732)
	at org.apache.catalina.connector.Response.encodeURL(Response.java:1242)
	at org.apache.catalina.connector.ResponseFacade.encodeURL(ResponseFacade.java:406)
	at org.apache.wicket.protocol.http.WebResponse.encodeURL(WebResponse.java:149)
	at org.apache.wicket.protocol.http.request.WebRequestCodingStrategy.encode(WebRequestCodingStrategy.java:387)

Running the same application in tomcat 7.0.27 and 6.0.18 works without issue","respons normal char chunk charchunk cc introduc introduc see id url encod resourc apach wicket markup html wicket event refer wicketeventrefer wicket event wicketev j lm caus illeg argument except illegalargumentexcept method java lang illeg argument except illegalargumentexcept apach catalina connector respons normal respons java apach catalina connector respons to absolut toabsolut respons java apach catalina connector respons encod encodeurl respons java apach catalina connector respons facad responsefacad encod encodeurl respons facad responsefacad java apach wicket protocol http web respons webrespons encod encodeurl web respons webrespons java apach wicket protocol http request web request code strategi webrequestcodingstrategi encod web request code strategi webrequestcodingstrategi java run applic tomcat work without issu","""java/org/apache/catalina/connector/Response.java""","2","2","3","1","18","1","11","5","4","0","2","76","76","76","15","76","0","6","3","67","1812","332","940","252","553","545","413","627","203","424","15","15","17","8","3","1","213","213","240","144","normal"
"53469","33","Mark Emlyn David Thomas","Partial fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=53469 If the relative URL can't be made absolute, do not encode it and return it as is","Bug 53469  possible bug in Response.normalize(CharChunk cc)","possibl respons normal char chunk charchunk cc","The Response.normalize(CharChunk cc) introduced in 7.0.28 introduced a bug.
See Bug ID 53062

The URL that is being encoded is:
../../resources/org.apache.wicket.markup.html.WicketEventReference/wicket-event.js?w:lm=1340711670
which causes a IllegalArgumentException in this method

java.lang.IllegalArgumentException
	at org.apache.catalina.connector.Response.normalize(Response.java:1799)
	at org.apache.catalina.connector.Response.toAbsolute(Response.java:1732)
	at org.apache.catalina.connector.Response.encodeURL(Response.java:1242)
	at org.apache.catalina.connector.ResponseFacade.encodeURL(ResponseFacade.java:406)
	at org.apache.wicket.protocol.http.WebResponse.encodeURL(WebResponse.java:149)
	at org.apache.wicket.protocol.http.request.WebRequestCodingStrategy.encode(WebRequestCodingStrategy.java:387)

Running the same application in tomcat 7.0.27 and 6.0.18 works without issue","respons normal char chunk charchunk cc introduc introduc see id url encod resourc apach wicket markup html wicket event refer wicketeventrefer wicket event wicketev j lm caus illeg argument except illegalargumentexcept method java lang illeg argument except illegalargumentexcept apach catalina connector respons normal respons java apach catalina connector respons to absolut toabsolut respons java apach catalina connector respons encod encodeurl respons java apach catalina connector respons facad responsefacad encod encodeurl respons facad responsefacad java apach wicket protocol http web respons webrespons encod encodeurl web respons webrespons java apach wicket protocol http request web request code strategi webrequestcodingstrategi encod web request code strategi webrequestcodingstrategi java run applic tomcat work without issu","""test/org/apache/catalina/connector/TestResponse.java""","1","1","1","1","12","2","9","1","4","0","3","22","22","22","0","22","0","0","3","19","390","104","251","138","147","53","143","178","115","63","6","6","7","4","3","0","29","29","30","25","normal"
"53469","33","Mark Emlyn David Thomas","Partial fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=53469 If the relative URL can't be made absolute, do not encode it and return it as is","Bug 53469  possible bug in Response.normalize(CharChunk cc)","possibl respons normal char chunk charchunk cc","The Response.normalize(CharChunk cc) introduced in 7.0.28 introduced a bug.
See Bug ID 53062

The URL that is being encoded is:
../../resources/org.apache.wicket.markup.html.WicketEventReference/wicket-event.js?w:lm=1340711670
which causes a IllegalArgumentException in this method

java.lang.IllegalArgumentException
	at org.apache.catalina.connector.Response.normalize(Response.java:1799)
	at org.apache.catalina.connector.Response.toAbsolute(Response.java:1732)
	at org.apache.catalina.connector.Response.encodeURL(Response.java:1242)
	at org.apache.catalina.connector.ResponseFacade.encodeURL(ResponseFacade.java:406)
	at org.apache.wicket.protocol.http.WebResponse.encodeURL(WebResponse.java:149)
	at org.apache.wicket.protocol.http.request.WebRequestCodingStrategy.encode(WebRequestCodingStrategy.java:387)

Running the same application in tomcat 7.0.27 and 6.0.18 works without issue","respons normal char chunk charchunk cc introduc introduc see id url encod resourc apach wicket markup html wicket event refer wicketeventrefer wicket event wicketev j lm caus illeg argument except illegalargumentexcept method java lang illeg argument except illegalargumentexcept apach catalina connector respons normal respons java apach catalina connector respons to absolut toabsolut respons java apach catalina connector respons encod encodeurl respons java apach catalina connector respons facad responsefacad encod encodeurl respons facad responsefacad java apach wicket protocol http web respons webrespons encod encodeurl web respons webrespons java apach wicket protocol http request web request code strategi webrequestcodingstrategi encod web request code strategi webrequestcodingstrategi java run applic tomcat work without issu","""test/org/apache/catalina/connector/TestResponse.java""","1","1","1","1","12","2","9","1","4","0","3","22","22","22","0","22","0","0","3","19","390","104","251","138","147","53","143","178","115","63","6","6","7","4","3","0","29","29","30","25","normal"
"53481","41","Christopher Schultz","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53481 Added support for SSL_OP_CIPHER_SERVER_PREFERENCE / SSLHonorCipherOrder.","Bug 53481  Support SSL_OP_CIPHER_SERVER_PREFERENCE / SSLHonorCipherOrder","support ssl cipher server prefer honor cipher order sslhonorcipherord","","","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","15","0","11","2","11","0","1","91","92","92","62","92","1","5","10","76","1849","226","1185","288","804","440","590","902","269","633","34","34","43","11","7","0","287","287","325","132","normal"
"53481","41","Christopher Schultz","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53481 Added support for SSL_OP_CIPHER_SERVER_PREFERENCE / SSLHonorCipherOrder.","Bug 53481  Support SSL_OP_CIPHER_SERVER_PREFERENCE / SSLHonorCipherOrder","support ssl cipher server prefer honor cipher order sslhonorcipherord","","","""java/org/apache/coyote/http11/Http11AprProtocol.java""","1","1","1","1","3","0","2","1","2","0","1","54","54","54","2","54","1","0","9","44","327","63","183","99","105","81","101","165","76","89","5","5","6","4","3","0","62","62","64","57","normal"
"53498","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53498 Fix atomicity bugs in use of concurrent collections. Based on a patch by Yu Lin.","Bug 53498  Atomicity violation bugs because of misusing concurrent collections","atom violat bug misus concurr collect","","","""java/org/apache/catalina/core/ApplicationContext.java""","2","2","3","2","18","1","11","5","2","2","5","64","64","62","14","64","1","6","4","53","1597","284","904","304","548","409","387","563","221","342","12","12","13","9","3","0","187","187","208","131","normal"
"53498","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53498 Fix atomicity bugs in use of concurrent collections. Based on a patch by Yu Lin.","Bug 53498  Atomicity violation bugs because of misusing concurrent collections","atom violat bug misus concurr collect","","","""java/org/apache/catalina/ha/context/ReplicatedContext.java""","1","1","1","1","6","0","5","0","3","0","2","19","19","19","3","19","0","0","4","15","219","32","151","67","66","37","71","109","54","55","5","5","5","3","3","0","35","35","37","23","normal"
"53513","3","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53513. Fix race condition between the processing of session sync message and transfer complete message.","Bug 53513  Race condition / out of order operation in session replication at node startup","race condit order oper session replic node startup","My configuration:

2 nodes running Tomcat 7.0.26
Using a custom session manager, which extends the DeltaManager

My startInternal() method first calls super.startInternal(), then performs a few additional initializations.

I reviewed the code of DeltaManager.startInternal(), and it calls getAllClusterSessions() which in turn calls waitForSendAllSessions(), which requires either getStateTransfered() to return true, or a timeout.

So by this, I should be able to trust that as the second node starts, the initial sync up of all session data from the first node has completed prior to the startInternal() method exiting (and thus prior to my initializations).

This is, however, not the case!  I can confirm this by repeatedly logging the value of findSessions().length during my inializations, and see that number going up!

There appears to be a race condition between the processing of the message containing the actual session data & the ""transfer complete"" message.  After tracing this through a little further, I see the stateTransfered is set to true in the handleALL_SESSION_TRANSFERCOMPLETE() callback method.  And that callback is being called PRIOR to the session data itself even being received!

Here is the debug logging output (slightly scrubbed) which shows this out of order messaging:

Jul 5, 2012 4:20:41 PM org.apache.catalina.ha.session.DeltaManager getAllClusterSessions
INFO: Manager [wwwtest#], requesting session state from org.apache.catalina.tribes.membership.MemberImpl[...].
This operation will timeout if no session state has been received within 60 seconds.

Jul 5, 2012 4:20:41 PM org.apache.catalina.ha.session.DeltaManager messageReceived
FINE: Manager [wwwtest#]: Received SessionMessage of type=(SESSION-STATE-TRANSFERED) from [org.apache.catalina.tribes.membership.MemberImpl[...]

Jul 5, 2012 4:20:41 PM org.apache.catalina.ha.session.DeltaManager handleALL_SESSION_TRANSFERCOMPLETE
FINE: Manager [wwwtest#] received from node [[B@6789b939:4,000] session state transfered.

Jul 5, 2012 4:20:41 PM org.apache.catalina.ha.session.DeltaManager messageReceived
FINE: Manager [wwwtest#]: Received SessionMessage of type=(ALL-SESSION-DATA) from [org.apache.catalina.tribes.membership.MemberImpl[...]

Jul 5, 2012 4:20:41 PM org.apache.catalina.ha.session.DeltaManager handleALL_SESSION_DATA
FINE: Manager [wwwtest#]: received session state data","configur node run tomcat use custom session manag extend delta manag deltamanag start intern startintern method first call super start intern startintern perform addit initi review code delta manag deltamanag start intern startintern call get all cluster session getallclustersess turn call wait for send all session waitforsendallsess requir either get state transfer getstatetransf return true timeout abl trust second node start initi sync session data first node complet prior start intern startintern method exit thu prior initi howev case confirm repeatedli log valu find session findsess length inial see number go appear race condit process messag contain actual session data transfer complet messag trace littl see state transfer statetransf set true handl handleal session transfercomplet callback method callback call prior session data even receiv debug log output slightli scrub show order messag jul pm apach catalina session delta manag deltamanag get all cluster session getallclustersess info manag wwwtest request session state apach catalina tribe membership member impl memberimpl oper timeout session state receiv within second jul pm apach catalina session delta manag deltamanag messag receiv messagereceiv fine manag wwwtest receiv session messag sessionmessag type session state transfer apach catalina tribe membership member impl memberimpl jul pm apach catalina session delta manag deltamanag handl handleal session transfercomplet fine manag wwwtest receiv node 6789b939 session state transfer jul pm apach catalina session delta manag deltamanag messag receiv messagereceiv fine manag wwwtest receiv session messag sessionmessag type session data apach catalina tribe membership member impl memberimpl jul pm apach catalina session delta manag deltamanag handl handleal session data fine manag wwwtest receiv session state data","""java/org/apache/catalina/ha/tcp/SimpleTcpCluster.java""","1","1","2","1","10","0","6","3","1","0","12","57","57","57","16","57","0","0","8","49","914","118","491","192","256","305","235","345","152","193","7","7","9","1","3","1","113","113","125","57","major"
"53523","0","Filip Hanik","fix doc according to https://issues.apache.org/bugzilla/show_bug.cgi?id=53523","Bug 53523  rollbackOnReturn/commitOnReturn does not work without defaultAutoCommit=false","rollback on return rollbackonreturn commit on return commitonreturn work without default auto commit defaultautocommit fals","Hi,

The properties rollbackOnReturn and commitOnReturn, which are critical for cleaning up connections after they are used and returned to the pool, does not work when the defaultAutoCommit property is not set or when it is set to true. The code segment at ConnectionPool class has this,

   protected boolean terminateTransaction(PooledConnection con) {
        try {
            if (con.getPoolProperties().getDefaultAutoCommit()==Boolean.FALSE) {
            ....

The full logic is wrapped in that first if statement, and as I see, that is not correct. Because, the actual default auto commit value when we don't set this property can either be autoCommit true or false, which depends on the database driver. And also, even when we have a default setting provided, the user has the freedom to change the autoCommit flag to either true or false at the beginning when they get the connection from the pool. So we should not be reading the pool properties in this place, but just check the current live connection's autoCommit value and act accordingly. So I suppose the fix should be to simply remove the outer if statement. 

Cheers,
Anjana.","hi properti rollback on return rollbackonreturn commit on return commitonreturn critic clean connect use return pool work default auto commit defaultautocommit properti set set true code segment connect pool connectionpool class protect boolean termin transact terminatetransact pool connect pooledconnect tri get pool properti getpoolproperti get default auto commit getdefaultautocommit boolean fals full logic wrap first statement see correct actual default auto commit valu set properti either auto commit autocommit true fals depend databas driver even default set provid user freedom chang auto commit autocommit flag either true fals begin get connect pool read pool properti place check current live connect auto commit autocommit valu act accordingli suppos fix simpli remov outer statement cheer anjana","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PoolConfiguration.java""","0","0","0","0","0","0","0","0","1","0","1","0","101","101","0","101","0","0","0","101","867","110","107","106","1","650","105","106","106","0","0","0","0","0","0","6","0","0","0","0","critical"
"53526","0","Filip Hanik","https://issues.apache.org/bugzilla/show_bug.cgi?id=53526 Use proper comparison of objects","Bug 53526  .ConnectionPool.terminateTransaction unsafe == check of Boolean","connect pool connectionpool termin transact terminatetransact unsaf check boolean","The method ConnectionPool.terminateTransaction(PooledConnection con) uses == to check the value of a Boolean, viz:

if (con.getPoolProperties().getDefaultAutoCommit()==Boolean.FALSE) {

This is not 100% safe - if the user sets the property as follows:

String value; // e.g. derived from property file
...
setDefaultAutoCommit(new Boolean(value));

then the condition will never be true, even if value=""false"".

Although it is better to use Boolean.valueOf(value), which would not have the same problem, the code ought to work regardless.","method connect pool connectionpool termin transact terminatetransact pool connect pooledconnect us check valu boolean viz get pool properti getpoolproperti get default auto commit getdefaultautocommit boolean fals safe user set properti follow string valu deriv properti file set default auto commit setdefaultautocommit new boolean valu condit never true even valu fals although better use boolean valu of valueof valu would problem code ought work regardless","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","3","3","4","1","19","0","13","5","3","6","5","57","57","51","22","57","1","3","18","35","1365","116","853","186","572","427","409","634","183","451","18","18","18","8","6","1","223","223","241","105","normal"
"53529","17","Mark Emlyn David Thomas","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=53529 Improve the handling of InterruptedException - Provide a specific message if thread was interrupted rather than the wait timing out - Remove unnecessary code - Remove unnecessary attemps to clear the interrupt flag","Bug 53529  Call interrupt() after InterruptedException instead interrupted()","call interrupt interrupt except interruptedexcept instead interrupt","In class:

org\apache\catalina\tribes\group\GroupChannel.java
    line 692
org\apache\catalina\tribes\group\interceptors\NonBlockingCoordinator.java
    line 228
org\apache\catalina\tribes\group\interceptors\TcpPingInterceptor.java
    line 173
org\apache\catalina\tribes\membership\McastServiceImpl.java
    line 542
org\apache\juli\AsyncFileHandler.java
    line 124
    line 146
org\apache\tomcat\util\net\AprEndpoint.java
    line 640
org\apache\tomcat\util\net\NioBlockingSelector.java
    line 112
    line 177
org\apache\tomcat\util\threads\ThreadPoolExecutor.java
    line 187


Affect 7.0.29 (and previous release) but affect also Tomcat 6.","class apach catalina tribe group group channel groupchannel java line apach catalina tribe group interceptor non block coordin nonblockingcoordin java line apach catalina tribe group interceptor tcp ping interceptor tcppinginterceptor java line apach catalina tribe membership mcast servic impl mcastserviceimpl java line apach juli async file handler asyncfilehandl java line line apach tomcat util net apr endpoint aprendpoint java line apach tomcat util net nio block selector nioblockingselector java line line apach tomcat util thread thread pool executor threadpoolexecutor java line affect previou releas affect tomcat","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","15","0","11","2","11","0","1","91","92","92","62","92","1","5","10","76","1850","226","1186","288","805","440","591","903","269","634","34","34","43","11","7","0","287","287","325","132","normal"
"53529","17","Mark Emlyn David Thomas","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=53529 Improve the handling of InterruptedException - Provide a specific message if thread was interrupted rather than the wait timing out - Remove unnecessary code - Remove unnecessary attemps to clear the interrupt flag","Bug 53529  Call interrupt() after InterruptedException instead interrupted()","call interrupt interrupt except interruptedexcept instead interrupt","In class:

org\apache\catalina\tribes\group\GroupChannel.java
    line 692
org\apache\catalina\tribes\group\interceptors\NonBlockingCoordinator.java
    line 228
org\apache\catalina\tribes\group\interceptors\TcpPingInterceptor.java
    line 173
org\apache\catalina\tribes\membership\McastServiceImpl.java
    line 542
org\apache\juli\AsyncFileHandler.java
    line 124
    line 146
org\apache\tomcat\util\net\AprEndpoint.java
    line 640
org\apache\tomcat\util\net\NioBlockingSelector.java
    line 112
    line 177
org\apache\tomcat\util\threads\ThreadPoolExecutor.java
    line 187


Affect 7.0.29 (and previous release) but affect also Tomcat 6.","class apach catalina tribe group group channel groupchannel java line apach catalina tribe group interceptor non block coordin nonblockingcoordin java line apach catalina tribe group interceptor tcp ping interceptor tcppinginterceptor java line apach catalina tribe membership mcast servic impl mcastserviceimpl java line apach juli async file handler asyncfilehandl java line line apach tomcat util net apr endpoint aprendpoint java line apach tomcat util net nio block selector nioblockingselector java line line apach tomcat util thread thread pool executor threadpoolexecutor java line affect previou releas affect tomcat","""java/org/apache/juli/AsyncFileHandler.java""","2","2","2","1","8","0","8","0","3","0","9","10","10","10","4","10","0","0","2","8","180","22","114","42","64","47","52","75","33","42","8","5","9","1","3","0","24","21","25","10","normal"
"53529","17","Mark Emlyn David Thomas","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=53529 Improve the handling of InterruptedException - Provide a specific message if thread was interrupted rather than the wait timing out - Remove unnecessary code - Remove unnecessary attemps to clear the interrupt flag","Bug 53529  Call interrupt() after InterruptedException instead interrupted()","call interrupt interrupt except interruptedexcept instead interrupt","In class:

org\apache\catalina\tribes\group\GroupChannel.java
    line 692
org\apache\catalina\tribes\group\interceptors\NonBlockingCoordinator.java
    line 228
org\apache\catalina\tribes\group\interceptors\TcpPingInterceptor.java
    line 173
org\apache\catalina\tribes\membership\McastServiceImpl.java
    line 542
org\apache\juli\AsyncFileHandler.java
    line 124
    line 146
org\apache\tomcat\util\net\AprEndpoint.java
    line 640
org\apache\tomcat\util\net\NioBlockingSelector.java
    line 112
    line 177
org\apache\tomcat\util\threads\ThreadPoolExecutor.java
    line 187


Affect 7.0.29 (and previous release) but affect also Tomcat 6.","class apach catalina tribe group group channel groupchannel java line apach catalina tribe group interceptor non block coordin nonblockingcoordin java line apach catalina tribe group interceptor tcp ping interceptor tcppinginterceptor java line apach catalina tribe membership mcast servic impl mcastserviceimpl java line apach juli async file handler asyncfilehandl java line line apach tomcat util net apr endpoint aprendpoint java line apach tomcat util net nio block selector nioblockingselector java line line apach tomcat util thread thread pool executor threadpoolexecutor java line affect previou releas affect tomcat","""java/org/apache/catalina/tribes/group/GroupChannel.java""","2","2","2","1","12","0","7","5","3","1","3","39","39","38","13","39","0","0","4","35","702","63","379","135","205","272","194","285","113","172","13","13","15","5","4","1","89","89","97","45","normal"
"53529","17","Mark Emlyn David Thomas","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=53529 Improve the handling of InterruptedException - Provide a specific message if thread was interrupted rather than the wait timing out - Remove unnecessary code - Remove unnecessary attemps to clear the interrupt flag","Bug 53529  Call interrupt() after InterruptedException instead interrupted()","call interrupt interrupt except interruptedexcept instead interrupt","In class:

org\apache\catalina\tribes\group\GroupChannel.java
    line 692
org\apache\catalina\tribes\group\interceptors\NonBlockingCoordinator.java
    line 228
org\apache\catalina\tribes\group\interceptors\TcpPingInterceptor.java
    line 173
org\apache\catalina\tribes\membership\McastServiceImpl.java
    line 542
org\apache\juli\AsyncFileHandler.java
    line 124
    line 146
org\apache\tomcat\util\net\AprEndpoint.java
    line 640
org\apache\tomcat\util\net\NioBlockingSelector.java
    line 112
    line 177
org\apache\tomcat\util\threads\ThreadPoolExecutor.java
    line 187


Affect 7.0.29 (and previous release) but affect also Tomcat 6.","class apach catalina tribe group group channel groupchannel java line apach catalina tribe group interceptor non block coordin nonblockingcoordin java line apach catalina tribe group interceptor tcp ping interceptor tcppinginterceptor java line apach catalina tribe membership mcast servic impl mcastserviceimpl java line apach juli async file handler asyncfilehandl java line line apach tomcat util net apr endpoint aprendpoint java line apach tomcat util net nio block selector nioblockingselector java line line apach tomcat util thread thread pool executor threadpoolexecutor java line affect previou releas affect tomcat","""java/org/apache/catalina/tribes/membership/McastServiceImpl.java""","3","3","3","1","16","0","14","1","8","1","3","32","32","31","30","32","0","3","2","27","665","50","472","123","303","148","248","370","112","258","12","12","13","3","5","0","114","114","117","34","normal"
"53529","17","Mark Emlyn David Thomas","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=53529 Improve the handling of InterruptedException - Provide a specific message if thread was interrupted rather than the wait timing out - Remove unnecessary code - Remove unnecessary attemps to clear the interrupt flag","Bug 53529  Call interrupt() after InterruptedException instead interrupted()","call interrupt interrupt except interruptedexcept instead interrupt","In class:

org\apache\catalina\tribes\group\GroupChannel.java
    line 692
org\apache\catalina\tribes\group\interceptors\NonBlockingCoordinator.java
    line 228
org\apache\catalina\tribes\group\interceptors\TcpPingInterceptor.java
    line 173
org\apache\catalina\tribes\membership\McastServiceImpl.java
    line 542
org\apache\juli\AsyncFileHandler.java
    line 124
    line 146
org\apache\tomcat\util\net\AprEndpoint.java
    line 640
org\apache\tomcat\util\net\NioBlockingSelector.java
    line 112
    line 177
org\apache\tomcat\util\threads\ThreadPoolExecutor.java
    line 187


Affect 7.0.29 (and previous release) but affect also Tomcat 6.","class apach catalina tribe group group channel groupchannel java line apach catalina tribe group interceptor non block coordin nonblockingcoordin java line apach catalina tribe group interceptor tcp ping interceptor tcppinginterceptor java line apach catalina tribe membership mcast servic impl mcastserviceimpl java line apach juli async file handler asyncfilehandl java line line apach tomcat util net apr endpoint aprendpoint java line apach tomcat util net nio block selector nioblockingselector java line line apach tomcat util thread thread pool executor threadpoolexecutor java line affect previou releas affect tomcat","""java/org/apache/tomcat/util/net/NioBlockingSelector.java""","4","4","5","2","21","0","19","2","6","0","2","18","18","18","7","18","0","0","0","18","405","28","329","83","229","62","179","269","80","189","20","20","22","7","5","0","89","89","101","36","normal"
"53529","17","Mark Emlyn David Thomas","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=53529 Improve the handling of InterruptedException - Provide a specific message if thread was interrupted rather than the wait timing out - Remove unnecessary code - Remove unnecessary attemps to clear the interrupt flag","Bug 53529  Call interrupt() after InterruptedException instead interrupted()","call interrupt interrupt except interruptedexcept instead interrupt","In class:

org\apache\catalina\tribes\group\GroupChannel.java
    line 692
org\apache\catalina\tribes\group\interceptors\NonBlockingCoordinator.java
    line 228
org\apache\catalina\tribes\group\interceptors\TcpPingInterceptor.java
    line 173
org\apache\catalina\tribes\membership\McastServiceImpl.java
    line 542
org\apache\juli\AsyncFileHandler.java
    line 124
    line 146
org\apache\tomcat\util\net\AprEndpoint.java
    line 640
org\apache\tomcat\util\net\NioBlockingSelector.java
    line 112
    line 177
org\apache\tomcat\util\threads\ThreadPoolExecutor.java
    line 187


Affect 7.0.29 (and previous release) but affect also Tomcat 6.","class apach catalina tribe group group channel groupchannel java line apach catalina tribe group interceptor non block coordin nonblockingcoordin java line apach catalina tribe group interceptor tcp ping interceptor tcppinginterceptor java line apach catalina tribe membership mcast servic impl mcastserviceimpl java line apach juli async file handler asyncfilehandl java line line apach tomcat util net apr endpoint aprendpoint java line apach tomcat util net nio block selector nioblockingselector java line line apach tomcat util thread thread pool executor threadpoolexecutor java line affect previou releas affect tomcat","""java/org/apache/catalina/tribes/group/interceptors/NonBlockingCoordinator.java""","2","2","2","1","10","0","8","1","3","0","18","53","53","53","23","53","0","1","15","37","834","93","552","173","351","196","326","440","155","285","14","9","15","4","3","0","124","112","146","58","normal"
"53529","17","Mark Emlyn David Thomas","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=53529 Improve the handling of InterruptedException - Provide a specific message if thread was interrupted rather than the wait timing out - Remove unnecessary code - Remove unnecessary attemps to clear the interrupt flag","Bug 53529  Call interrupt() after InterruptedException instead interrupted()","call interrupt interrupt except interruptedexcept instead interrupt","In class:

org\apache\catalina\tribes\group\GroupChannel.java
    line 692
org\apache\catalina\tribes\group\interceptors\NonBlockingCoordinator.java
    line 228
org\apache\catalina\tribes\group\interceptors\TcpPingInterceptor.java
    line 173
org\apache\catalina\tribes\membership\McastServiceImpl.java
    line 542
org\apache\juli\AsyncFileHandler.java
    line 124
    line 146
org\apache\tomcat\util\net\AprEndpoint.java
    line 640
org\apache\tomcat\util\net\NioBlockingSelector.java
    line 112
    line 177
org\apache\tomcat\util\threads\ThreadPoolExecutor.java
    line 187


Affect 7.0.29 (and previous release) but affect also Tomcat 6.","class apach catalina tribe group group channel groupchannel java line apach catalina tribe group interceptor non block coordin nonblockingcoordin java line apach catalina tribe group interceptor tcp ping interceptor tcppinginterceptor java line apach catalina tribe membership mcast servic impl mcastserviceimpl java line apach juli async file handler asyncfilehandl java line line apach tomcat util net apr endpoint aprendpoint java line apach tomcat util net nio block selector nioblockingselector java line line apach tomcat util thread thread pool executor threadpoolexecutor java line affect previou releas affect tomcat","""java/org/apache/catalina/tribes/group/interceptors/TcpPingInterceptor.java""","2","2","2","1","7","0","7","0","2","0","3","13","13","13","7","13","0","0","2","11","184","28","126","47","71","34","63","93","41","52","5","5","5","1","2","0","29","29","32","13","normal"
"53529","17","Mark Emlyn David Thomas","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=53529 Improve the handling of InterruptedException - Provide a specific message if thread was interrupted rather than the wait timing out - Remove unnecessary code - Remove unnecessary attemps to clear the interrupt flag","Bug 53529  Call interrupt() after InterruptedException instead interrupted()","call interrupt interrupt except interruptedexcept instead interrupt","In class:

org\apache\catalina\tribes\group\GroupChannel.java
    line 692
org\apache\catalina\tribes\group\interceptors\NonBlockingCoordinator.java
    line 228
org\apache\catalina\tribes\group\interceptors\TcpPingInterceptor.java
    line 173
org\apache\catalina\tribes\membership\McastServiceImpl.java
    line 542
org\apache\juli\AsyncFileHandler.java
    line 124
    line 146
org\apache\tomcat\util\net\AprEndpoint.java
    line 640
org\apache\tomcat\util\net\NioBlockingSelector.java
    line 112
    line 177
org\apache\tomcat\util\threads\ThreadPoolExecutor.java
    line 187


Affect 7.0.29 (and previous release) but affect also Tomcat 6.","class apach catalina tribe group group channel groupchannel java line apach catalina tribe group interceptor non block coordin nonblockingcoordin java line apach catalina tribe group interceptor tcp ping interceptor tcppinginterceptor java line apach catalina tribe membership mcast servic impl mcastserviceimpl java line apach juli async file handler asyncfilehandl java line line apach tomcat util net apr endpoint aprendpoint java line apach tomcat util net nio block selector nioblockingselector java line line apach tomcat util thread thread pool executor threadpoolexecutor java line affect previou releas affect tomcat","""java/org/apache/tomcat/util/threads/ThreadPoolExecutor.java""","1","1","2","1","10","0","7","2","3","0","2","15","15","15","4","15","0","0","3","12","246","32","135","48","71","79","55","85","41","44","5","5","5","3","4","1","29","29","30","17","normal"
"53535","18","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53535 Reduce memory footprint when performing class scanning on Context start. Patch provided by Cedomir Igaly","Bug 53535  Out of memory while performing ContextConfig.webConfig","memori perform context config contextconfig web config webconfig","","","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","7","1","37","3","27","6","4","1","8","61","61","60","22","61","0","9","36","16","2611","336","1846","446","1266","429","841","1283","434","849","38","38","45","13","7","0","408","408","450","105","normal"
"53541","28","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53541 Fix JAR scanning when WEB-INF/lib is provided via VirtualDirContext Patch provided by Philip Zuev","Bug 53541  Bug in virtual webapp feature. Custom tags badly supported. Error is ""org.apache.jasper.JasperException: The absolute uri: http://java.sun.com/jsp/jstl/core cannot be resolved in either web.xml or the jar files deployed with this application","virtual webapp featur custom tag badli support error apach jasper jasper except jasperexcept absolut uri http java sun jsp jstl core cannot resolv either web xml jar file deploy applic","","","""java/org/apache/naming/resources/VirtualDirContext.java""","7","7","8","4","31","1","25","4","1","0","0","7","7","7","2","7","0","0","3","4","299","22","199","62","117","78","85","147","67","80","12","12","15","11","8","0","50","50","62","32","major"
"53545","28","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53545 Ensure buffered data is cleared when using a jsp:forward action to a static resource inside classic a custom tag","Bug 53545  jsp:forward action to static resources causes IllegalStateException when inside classic custom tag","jsp forward action static resourc caus illeg state except illegalstateexcept insid classic custom tag","","","""java/org/apache/jasper/runtime/PageContextImpl.java""","2","2","2","1","14","1","11","1","14","2","1","59","59","57","15","59","1","14","0","44","994","146","744","174","470","106","308","459","140","319","10","10","12","7","3","0","160","148","166","69","major"
"53574","22","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53574 Ensure Servlets defined using jsp-file are available when metadata-complete is true.","Bug 53574  metadata-complete=""true"" and servlet defined as jsp not working","metadata complet metadatacomplet true servlet defin jsp work","We have a servlet defined as 

<servlet>
        <servlet-name>VersionInfoServlet</servlet-name>
        <jsp-file>/WEB-INF/svnrevision.jsp</jsp-file>
</servlet>

and mapped as 

<servlet-mapping>
        <servlet-name>VersionInfoServlet</servlet-name>
        <url-pattern>/svnrevision</url-pattern>
</servlet-mapping>



It worked fine. Then we changed metadata-complete to ""true"", and from now on we receive 

INFO: Marking servlet VersionInfoServlet as unavailable
lip 20, 2012 11:05:36 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet VersionInfoServlet
javax.servlet.ServletException: No servlet class has been specified for servlet VersionInfoServlet
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1130)
        at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.ajp.AjpNioProcessor.process(AjpNioProcessor.java:184)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)","servlet defin servlet servlet name servletnam version info servlet versioninfoservlet servlet name servletnam jsp file jspfile web inf svnrevis jsp jsp file jspfile servlet map servlet map servletmap servlet name servletnam version info servlet versioninfoservlet servlet name servletnam url pattern urlpattern svnrevis url pattern urlpattern servlet map servletmap work fine chang metadata complet metadatacomplet true receiv info mark servlet version info servlet versioninfoservlet unavail lip apach catalina core standard wrapper valv standardwrappervalv invok sever alloc except servlet version info servlet versioninfoservlet javax servlet servlet except servletexcept servlet class specifi servlet version info servlet versioninfoservlet apach catalina core standard wrapper standardwrapp load servlet loadservlet standard wrapper standardwrapp java apach catalina core standard wrapper standardwrapp alloc standard wrapper standardwrapp java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot ajp ajp nio processor ajpnioprocessor process ajp nio processor ajpnioprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","7","1","37","3","27","6","4","1","8","62","62","61","23","62","0","9","36","17","2617","338","1850","447","1267","429","843","1286","435","851","38","38","45","13","7","0","409","409","451","106","normal"
"53574","22","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53574 Ensure Servlets defined using jsp-file are available when metadata-complete is true.","Bug 53574  metadata-complete=""true"" and servlet defined as jsp not working","metadata complet metadatacomplet true servlet defin jsp work","We have a servlet defined as 

<servlet>
        <servlet-name>VersionInfoServlet</servlet-name>
        <jsp-file>/WEB-INF/svnrevision.jsp</jsp-file>
</servlet>

and mapped as 

<servlet-mapping>
        <servlet-name>VersionInfoServlet</servlet-name>
        <url-pattern>/svnrevision</url-pattern>
</servlet-mapping>



It worked fine. Then we changed metadata-complete to ""true"", and from now on we receive 

INFO: Marking servlet VersionInfoServlet as unavailable
lip 20, 2012 11:05:36 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet VersionInfoServlet
javax.servlet.ServletException: No servlet class has been specified for servlet VersionInfoServlet
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1130)
        at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.ajp.AjpNioProcessor.process(AjpNioProcessor.java:184)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)","servlet defin servlet servlet name servletnam version info servlet versioninfoservlet servlet name servletnam jsp file jspfile web inf svnrevis jsp jsp file jspfile servlet map servlet map servletmap servlet name servletnam version info servlet versioninfoservlet servlet name servletnam url pattern urlpattern svnrevis url pattern urlpattern servlet map servletmap work fine chang metadata complet metadatacomplet true receiv info mark servlet version info servlet versioninfoservlet unavail lip apach catalina core standard wrapper valv standardwrappervalv invok sever alloc except servlet version info servlet versioninfoservlet javax servlet servlet except servletexcept servlet class specifi servlet version info servlet versioninfoservlet apach catalina core standard wrapper standardwrapp load servlet loadservlet standard wrapper standardwrapp java apach catalina core standard wrapper standardwrapp alloc standard wrapper standardwrapp java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot ajp ajp nio processor ajpnioprocessor process ajp nio processor ajpnioprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""test/org/apache/catalina/startup/TestContextConfig.java""","1","1","1","1","8","1","6","0","3","0","1","7","7","7","1","7","0","1","1","5","127","30","78","51","31","21","46","56","40","16","1","1","1","1","0","0","7","7","7","7","normal"
"53574","22","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53574 Ensure Servlets defined using jsp-file are available when metadata-complete is true.","Bug 53574  metadata-complete=""true"" and servlet defined as jsp not working","metadata complet metadatacomplet true servlet defin jsp work","We have a servlet defined as 

<servlet>
        <servlet-name>VersionInfoServlet</servlet-name>
        <jsp-file>/WEB-INF/svnrevision.jsp</jsp-file>
</servlet>

and mapped as 

<servlet-mapping>
        <servlet-name>VersionInfoServlet</servlet-name>
        <url-pattern>/svnrevision</url-pattern>
</servlet-mapping>



It worked fine. Then we changed metadata-complete to ""true"", and from now on we receive 

INFO: Marking servlet VersionInfoServlet as unavailable
lip 20, 2012 11:05:36 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet VersionInfoServlet
javax.servlet.ServletException: No servlet class has been specified for servlet VersionInfoServlet
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1130)
        at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.ajp.AjpNioProcessor.process(AjpNioProcessor.java:184)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)","servlet defin servlet servlet name servletnam version info servlet versioninfoservlet servlet name servletnam jsp file jspfile web inf svnrevis jsp jsp file jspfile servlet map servlet map servletmap servlet name servletnam version info servlet versioninfoservlet servlet name servletnam url pattern urlpattern svnrevis url pattern urlpattern servlet map servletmap work fine chang metadata complet metadatacomplet true receiv info mark servlet version info servlet versioninfoservlet unavail lip apach catalina core standard wrapper valv standardwrappervalv invok sever alloc except servlet version info servlet versioninfoservlet javax servlet servlet except servletexcept servlet class specifi servlet version info servlet versioninfoservlet apach catalina core standard wrapper standardwrapp load servlet loadservlet standard wrapper standardwrapp java apach catalina core standard wrapper standardwrapp alloc standard wrapper standardwrapp java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot ajp ajp nio processor ajpnioprocessor process ajp nio processor ajpnioprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""test/org/apache/catalina/startup/TestContextConfig.java""","1","1","1","1","8","1","6","0","3","0","1","7","7","7","1","7","0","1","1","5","127","30","78","51","31","21","46","56","40","16","1","1","1","1","0","0","7","7","7","7","normal"
"53606","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53606 Fix possible NPE when sending pings between cluster nodes Based on a patch by F.Arnoud","Bug 53606  NullPointerException in TcpPingInterceptor","null pointer except nullpointerexcept tcp ping interceptor tcppinginterceptor","start(int) method initializes failureDetector (resp. staticMembers) only if TcpFailureDetector (resp. StaticMembershipInterceptor) was found in channel interceptors stack.

Without TcpFailureDetector (resp. StaticMembershipInterceptor), futur calls to sendPing() will fail because failureDetector (resp. staticMembers) wasn't initialized at least to new WeakReference<StaticMembershipInterceptor>(null).

Fix:
v1) initializes weak references containers:
Replace:
    WeakReference<TcpFailureDetector> failureDetector = null;
    WeakReference<StaticMembershipInterceptor> staticMembers = null;
for:
    WeakReference<TcpFailureDetector> failureDetector = new WeakReference<TcpFailureDetector>();
    WeakReference<StaticMembershipInterceptor> staticMembers = new WeakReference<StaticMembershipInterceptor>();

v2) checks field before dereferencing it:
sendPing becomes:
    protected void sendPing() {
        if (failureDetector!=null && failureDetector.get()!=null) {
            //we have a reference to the failure detector
            //piggy back on that dude
            failureDetector.get().checkMembers(true);
        }else {
            if (staticOnly && staticMembers!=null && staticMembers.get()!=null) {
                sendPingMessage(staticMembers.get().getMembers());
            } else {
                sendPingMessage(getMembers());
            }
        }
    }



affect also tomcat 6
regards
fred arnoud","start int method initi failur detector failuredetector resp static member staticmemb tcp failur detector tcpfailuredetector resp static membership interceptor staticmembershipinterceptor found channel interceptor stack without tcp failur detector tcpfailuredetector resp static membership interceptor staticmembershipinterceptor futur call send ping sendp fail failur detector failuredetector resp static member staticmemb wasn initi least new weak refer weakrefer static membership interceptor staticmembershipinterceptor null fix v1 initi weak refer contain replac weak refer weakrefer tcp failur detector tcpfailuredetector failur detector failuredetector null weak refer weakrefer static membership interceptor staticmembershipinterceptor static member staticmemb null weak refer weakrefer tcp failur detector tcpfailuredetector failur detector failuredetector new weak refer weakrefer tcp failur detector tcpfailuredetector weak refer weakrefer static membership interceptor staticmembershipinterceptor static member staticmemb new weak refer weakrefer static membership interceptor staticmembershipinterceptor v2 check field dereferenc send ping sendp becom protect void send ping sendp failur detector failuredetector null failur detector failuredetector get null refer failur detector piggi back dude failur detector failuredetector get check member checkmemb true els static onli staticonli static member staticmemb null static member staticmemb get null send ping messag sendpingmessag static member staticmemb get get member getmemb els send ping messag sendpingmessag get member getmemb affect tomcat regard fred arnoud","""java/org/apache/catalina/tribes/group/interceptors/TcpPingInterceptor.java""","2","2","2","1","7","0","6","0","2","0","3","13","13","13","7","13","0","0","2","11","186","28","125","47","70","37","62","92","41","51","5","5","5","1","2","0","29","29","32","13","normal"
"53607","4","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53607. To avoid NPE, set TCP PING data to ChannelMessage.","Bug 53607  No message set for PING: TcpPingInterceptor fail with NullPointerException in ChannelData.getDataPackageLength()","messag set ping tcp ping interceptor tcppinginterceptor fail null pointer except nullpointerexcept channel data channeldata get data packag length getdatapackagelength","I added 
        data.setMessage(new XByteBuffer(TCP_PING_DATA, false));

to TcpPingInterceptor send ping message function by:

    protected void sendPingMessage(Member[] members) {
        if ( members == null || members.length == 0 ) return;
        ChannelData data = new ChannelData(true);//generates a unique Id
        data.setAddress(getLocalMember(false));
        data.setTimestamp(System.currentTimeMillis());
        data.setOptions(getOptionFlag());
        data.setMessage(new XByteBuffer(TCP_PING_DATA, false));
        try {
            super.sendMessage(members, data, null);
        }catch (ChannelException x) {
            log.warn(""Unable to send TCP ping."",x);
        }
    }


error also for Tomcat 6
regards
fred","ad data set messag setmessag new byte buffer xbytebuff tcp ping data fals tcp ping interceptor tcppinginterceptor send ping messag function protect void send ping messag sendpingmessag member member member null member length return channel data channeldata data new channel data channeldata true gener uniqu id data set address setaddress get local member getlocalmemb fals data set timestamp settimestamp system current time milli currenttimemilli data set option setopt get option flag getoptionflag data set messag setmessag new byte buffer xbytebuff tcp ping data fals tri super send messag sendmessag member data null catch channel except channelexcept log warn unabl send tcp ping error tomcat regard fred","""java/org/apache/catalina/tribes/group/interceptors/TcpPingInterceptor.java""","2","2","2","1","8","0","7","0","2","0","3","13","13","13","7","13","0","0","2","11","189","28","128","50","71","37","63","93","42","51","5","5","6","1","2","0","31","31","34","13","normal"
"53624","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53624 Remove some include specific code from dispatch, copied when the doDispatch() method was created. Note that this bug report pre-dates that copy. At the time of the bug report dispatch was implemented by calling include()","Bug 53624  sendRedirect doesn't work after a dispatch through the AsyncContext","send redirect sendredirect doesn work dispatch async context asynccontext","","","""java/org/apache/catalina/core/ApplicationDispatcher.java""","5","5","6","2","36","3","26","6","5","0","3","23","23","23","22","23","4","12","0","7","1092","161","703","178","494","229","325","456","140","316","23","23","25","7","3","0","133","133","152","52","normal"
"53641","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53641 Correct name of HTTP header used in WebSocket handshake for listing the preferred protocols","Bug 53641  Wrong websocket's subprotocol implementation","wrong websocket subprotocol implement","According to RFC6455 Section 4.3. the handling of subprotocol requests is not correct.
It must be checked for ""Sec-WebSocket-Protocol"" instead of ""Sec-WebSocket-Protocol-Client"" in WebSocketServlet class.","accord c6455 rfc6455 section handl subprotocol request correct must check sec web socket websocket protocol instead sec web socket websocket protocol client web socket servlet websocketservlet class","""java/org/apache/catalina/websocket/WebSocketServlet.java""","3","3","3","2","25","3","17","5","1","0","3","6","7","7","1","7","0","3","4","0","248","38","136","58","75","74","75","101","51","50","11","11","11","6","3","1","23","23","23","14","normal"
"53654","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53654 Support file:// URLs for JSP dependencies","Bug 53654  JSP file is always recompiled for using file based TLD URL","jsp file alway recompil use file base tld url","Now, in Jasper codes, it only supports jar URL and relative URL, that may be enough for common web applications. While, it is possible that the third-party uses other protocol URL, like file: protocol based URL. So, the JSP files will be always recompiled for each access for the target page.
The codes are located in Compiler.isOutDated() method.
Is it possible to provide more generic handlering for the URL ?","jasper code support jar url rel url may enough common web applic possibl third parti thirdparti us protocol url like file protocol base url jsp file alway recompil access target page code locat compil is out date isoutd method possibl provid gener handler url","""java/org/apache/jasper/compiler/Compiler.java""","5","5","5","1","36","3","24","8","1","0","0","14","15","15","8","15","0","1","2","12","599","79","367","84","240","154","165","243","76","167","27","27","28","12","5","0","76","76","80","27","normal"
"53697","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53697 Fix a regression in the fix for BZ 51881 that mean that in some circumstances the isComet flag was not reset on the HttpAprProcessor. This caused problems when the Processor was re-used for a new connection.","Bug 53697  java.lang.NullPointerException at org.apache.coyote.http11.Http11AprProcessor.actionInternal(Http11AprProcessor.java:277)","java lang null pointer except nullpointerexcept apach coyot http11 http11 apr processor http11aprprocessor action intern actionintern http11 apr processor http11aprprocessor java","I hit tomcat with ~20 different urls in ~2 seconds, test some functionality, wait ~3 minutes, then do it again and I always get this exception and then I get (intermitent) connection interrupted messages in the browser.  Here's the full trace:

Aug 10, 2012 6:33:14 PM org.apache.catalina.connector.CoyoteAdapter event
SEVERE: null
Aug 10, 2012 6:33:14 PM org.apache.catalina.connector.CoyoteAdapter event
java.lang.NullPointerException
	at org.apache.coyote.http11.Http11AprProcessor.actionInternal(Http11AprProcessor.java:277)
	at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:846)
	at org.apache.coyote.Response.action(Response.java:172)
	at org.apache.catalina.connector.CoyoteAdapter.event(CoyoteAdapter.java:229)
	at org.apache.coyote.http11.Http11AprProcessor.event(Http11AprProcessor.java:133)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:581)
	at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.Thread.run(Thread.java:722)

Aug 10, 2012 6:33:14 PM org.apache.coyote.http11.Http11AprProcessor event
SEVERE: Error processing request
java.lang.NullPointerException
	at org.apache.coyote.http11.Http11AprProcessor.actionInternal(Http11AprProcessor.java:277)
	at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:846)
	at org.apache.coyote.Request.action(Request.java:346)
	at org.apache.catalina.connector.Request.getRemoteAddr(Request.java:1281)
	at org.apache.catalina.connector.Request.getRemoteHost(Request.java:1296)
	at org.apache.catalina.valves.AccessLogValve$HostElement.addElement(AccessLogValve.java:1327)
	at org.apache.catalina.valves.AccessLogValve.log(AccessLogValve.java:953)
	at org.apache.catalina.core.AccessLogAdapter.log(AccessLogAdapter.java:51)
	at org.apache.catalina.core.ContainerBase.logAccess(ContainerBase.java:1263)
	at org.apache.catalina.core.ContainerBase.logAccess(ContainerBase.java:1270)
	at org.apache.catalina.connector.CoyoteAdapter.event(CoyoteAdapter.java:250)
	at org.apache.coyote.http11.Http11AprProcessor.event(Http11AprProcessor.java:133)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:581)
	at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.Thread.run(Thread.java:722)

Additional information:
 - hp Proliant DL360 with two 3ghz processors
 - CentOS 6.3
 - One app runs websockets under bleading edge Atmosphere and Grails
 - the 20 urls come from chrome and firefox, simulatneously","hit tomcat differ url second function wait minut alway get except get intermit connect interrupt messag browser full trace aug pm apach catalina connector coyot adapt coyoteadapt event sever null aug pm apach catalina connector coyot adapt coyoteadapt event java lang null pointer except nullpointerexcept apach coyot http11 http11 apr processor http11aprprocessor action intern actionintern http11 apr processor http11aprprocessor java apach coyot http11 abstract http11 processor abstracthttp11processor action abstract http11 processor abstracthttp11processor java apach coyot respons action respons java apach catalina connector coyot adapt coyoteadapt event coyot adapt coyoteadapt java apach coyot http11 http11 apr processor http11aprprocessor event http11 apr processor http11aprprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net apr endpoint aprendpoint socket processor socketprocessor run apr endpoint aprendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java aug pm apach coyot http11 http11 apr processor http11aprprocessor event sever error process request java lang null pointer except nullpointerexcept apach coyot http11 http11 apr processor http11aprprocessor action intern actionintern http11 apr processor http11aprprocessor java apach coyot http11 abstract http11 processor abstracthttp11processor action abstract http11 processor abstracthttp11processor java apach coyot request action request java apach catalina connector request get remot addr getremoteaddr request java apach catalina connector request get remot host getremotehost request java apach catalina valv access log valv accesslogvalv host element hostel add element addel access log valv accesslogvalv java apach catalina valv access log valv accesslogvalv log access log valv accesslogvalv java apach catalina core access log adapt accesslogadapt log access log adapt accesslogadapt java apach catalina core contain base containerbas log access logaccess contain base containerbas java apach catalina core contain base containerbas log access logaccess contain base containerbas java apach catalina connector coyot adapt coyoteadapt event coyot adapt coyoteadapt java apach coyot http11 http11 apr processor http11aprprocessor event http11 apr processor http11aprprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net apr endpoint aprendpoint socket processor socketprocessor run apr endpoint aprendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java addit inform hp proliant l360 dl360 two 3ghz processor cent cento one app run websocket blead edg atmospher grail url chrome firefox simulatn","""java/org/apache/coyote/http11/AbstractHttp11Processor.java""","4","4","5","2","28","2","20","6","1","0","1","44","59","59","32","59","2","6","19","32","1686","270","978","212","688","449","490","698","202","496","34","34","48","15","4","0","215","213","262","95","normal"
"53697","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53697 Fix a regression in the fix for BZ 51881 that mean that in some circumstances the isComet flag was not reset on the HttpAprProcessor. This caused problems when the Processor was re-used for a new connection.","Bug 53697  java.lang.NullPointerException at org.apache.coyote.http11.Http11AprProcessor.actionInternal(Http11AprProcessor.java:277)","java lang null pointer except nullpointerexcept apach coyot http11 http11 apr processor http11aprprocessor action intern actionintern http11 apr processor http11aprprocessor java","I hit tomcat with ~20 different urls in ~2 seconds, test some functionality, wait ~3 minutes, then do it again and I always get this exception and then I get (intermitent) connection interrupted messages in the browser.  Here's the full trace:

Aug 10, 2012 6:33:14 PM org.apache.catalina.connector.CoyoteAdapter event
SEVERE: null
Aug 10, 2012 6:33:14 PM org.apache.catalina.connector.CoyoteAdapter event
java.lang.NullPointerException
	at org.apache.coyote.http11.Http11AprProcessor.actionInternal(Http11AprProcessor.java:277)
	at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:846)
	at org.apache.coyote.Response.action(Response.java:172)
	at org.apache.catalina.connector.CoyoteAdapter.event(CoyoteAdapter.java:229)
	at org.apache.coyote.http11.Http11AprProcessor.event(Http11AprProcessor.java:133)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:581)
	at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.Thread.run(Thread.java:722)

Aug 10, 2012 6:33:14 PM org.apache.coyote.http11.Http11AprProcessor event
SEVERE: Error processing request
java.lang.NullPointerException
	at org.apache.coyote.http11.Http11AprProcessor.actionInternal(Http11AprProcessor.java:277)
	at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:846)
	at org.apache.coyote.Request.action(Request.java:346)
	at org.apache.catalina.connector.Request.getRemoteAddr(Request.java:1281)
	at org.apache.catalina.connector.Request.getRemoteHost(Request.java:1296)
	at org.apache.catalina.valves.AccessLogValve$HostElement.addElement(AccessLogValve.java:1327)
	at org.apache.catalina.valves.AccessLogValve.log(AccessLogValve.java:953)
	at org.apache.catalina.core.AccessLogAdapter.log(AccessLogAdapter.java:51)
	at org.apache.catalina.core.ContainerBase.logAccess(ContainerBase.java:1263)
	at org.apache.catalina.core.ContainerBase.logAccess(ContainerBase.java:1270)
	at org.apache.catalina.connector.CoyoteAdapter.event(CoyoteAdapter.java:250)
	at org.apache.coyote.http11.Http11AprProcessor.event(Http11AprProcessor.java:133)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:581)
	at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.Thread.run(Thread.java:722)

Additional information:
 - hp Proliant DL360 with two 3ghz processors
 - CentOS 6.3
 - One app runs websockets under bleading edge Atmosphere and Grails
 - the 20 urls come from chrome and firefox, simulatneously","hit tomcat differ url second function wait minut alway get except get intermit connect interrupt messag browser full trace aug pm apach catalina connector coyot adapt coyoteadapt event sever null aug pm apach catalina connector coyot adapt coyoteadapt event java lang null pointer except nullpointerexcept apach coyot http11 http11 apr processor http11aprprocessor action intern actionintern http11 apr processor http11aprprocessor java apach coyot http11 abstract http11 processor abstracthttp11processor action abstract http11 processor abstracthttp11processor java apach coyot respons action respons java apach catalina connector coyot adapt coyoteadapt event coyot adapt coyoteadapt java apach coyot http11 http11 apr processor http11aprprocessor event http11 apr processor http11aprprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net apr endpoint aprendpoint socket processor socketprocessor run apr endpoint aprendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java aug pm apach coyot http11 http11 apr processor http11aprprocessor event sever error process request java lang null pointer except nullpointerexcept apach coyot http11 http11 apr processor http11aprprocessor action intern actionintern http11 apr processor http11aprprocessor java apach coyot http11 abstract http11 processor abstracthttp11processor action abstract http11 processor abstracthttp11processor java apach coyot request action request java apach catalina connector request get remot addr getremoteaddr request java apach catalina connector request get remot host getremotehost request java apach catalina valv access log valv accesslogvalv host element hostel add element addel access log valv accesslogvalv java apach catalina valv access log valv accesslogvalv log access log valv accesslogvalv java apach catalina core access log adapt accesslogadapt log access log adapt accesslogadapt java apach catalina core contain base containerbas log access logaccess contain base containerbas java apach catalina core contain base containerbas log access logaccess contain base containerbas java apach catalina connector coyot adapt coyoteadapt event coyot adapt coyoteadapt java apach coyot http11 http11 apr processor http11aprprocessor event http11 apr processor http11aprprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net apr endpoint aprendpoint socket processor socketprocessor run apr endpoint aprendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java addit inform hp proliant l360 dl360 two 3ghz processor cent cento one app run websocket blead edg atmospher grail url chrome firefox simulatn","""java/org/apache/coyote/http11/Http11NioProcessor.java""","5","5","6","2","24","1","19","3","1","0","1","21","21","21","6","21","0","0","14","7","675","100","469","116","311","107","206","319","89","230","58","58","68","28","5","0","113","113","130","55","normal"
"53700","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53700 Remove unused code that also broke some Javadoc","Bug 53700  InternalNioOutputBuffer unused (debug?) code","intern nio output buffer internalniooutputbuff unus debug code","The class InternalNioOutputBuffer includes the field:

int total = 0;

This is currently defined at line 227, which is between the Javadoc and method body to which the Javadoc applies, i.e. private synchronized int writeToSocket.

This invalidates the method Javadoc.

The field is used to keep a running total of bytes written by the method; however the field is not actually referenced - the System.out.println statement is commented out.

The field and associated code shcould probably be deleted.

If the field is to be kept, it should be private, and it should probably be changed to long, and of course should be moved so it does not invalidate the method Javadoc.","class intern nio output buffer internalniooutputbuff includ field int total current defin line javadoc method bodi javadoc appli privat synchron int write to socket writetosocket invalid method javadoc field use keep run total byte written method howev field actual referenc system println statement comment field associ code shcould probabl delet field kept privat probabl chang long cours move invalid method javadoc","""java/org/apache/coyote/http11/InternalNioOutputBuffer.java""","1","1","2","1","10","0","7","1","3","0","0","30","30","30","10","30","0","7","2","21","467","84","274","99","152","111","146","205","85","120","8","8","10","3","4","0","58","58","71","32","minor"
"53701","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53701 Javadoc fixes provided by Sebb.","Bug 53701  Javadoc fixes","javadoc fix","","","""webapps/examples/WEB-INF/classes/compressionFilters/CompressionResponseStream.java""","3","3","3","1","18","1","12","4","1","0","0","16","16","16","11","16","0","1","2","13","435","77","222","46","139","137","99","160","38","122","19","19","19","4","4","1","60","60","60","22","minor"
"53701","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53701 Javadoc fixes provided by Sebb.","Bug 53701  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/tribes/ErrorHandler.java""","0","0","0","0","0","0","0","0","1","0","0","0","2","2","0","2","0","0","0","2","46","7","5","4","0","34","3","4","4","0","0","0","0","0","0","7","0","0","0","0","minor"
"53701","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53701 Javadoc fixes provided by Sebb.","Bug 53701  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/Executor.java""","0","0","0","0","0","0","0","0","1","0","0","0","2","2","0","2","1","0","0","1","39","4","6","5","0","29","4","5","5","0","0","0","0","0","0","5","0","0","0","0","minor"
"53701","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53701 Javadoc fixes provided by Sebb.","Bug 53701  Javadoc fixes","javadoc fix","","","""java/org/apache/tomcat/util/http/fileupload/FileItem.java""","0","0","0","0","0","0","0","0","1","0","0","0","15","15","0","15","15","0","0","0","227","37","24","23","0","166","22","23","23","0","0","0","0","0","0","7","0","0","0","0","minor"
"53701","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53701 Javadoc fixes provided by Sebb.","Bug 53701  Javadoc fixes","javadoc fix","","","""java/javax/servlet/jsp/JspException.java""","1","1","1","1","12","0","2","9","1","0","1","5","5","5","0","5","0","0","0","5","101","14","19","9","5","69","6","12","8","4","1","1","1","1","0","4","5","5","5","5","minor"
"53701","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53701 Javadoc fixes provided by Sebb.","Bug 53701  Javadoc fixes","javadoc fix","","","""java/org/apache/catalina/Manager.java""","0","0","0","0","0","0","0","0","1","0","0","0","36","36","0","36","0","0","0","36","381","81","43","42","0","257","39","40","40","0","0","0","0","0","0","6","0","0","0","0","minor"
"53701","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53701 Javadoc fixes provided by Sebb.","Bug 53701  Javadoc fixes","javadoc fix","","","""java/org/apache/naming/SelectorContext.java""","1","1","1","1","17","0","6","10","1","0","5","34","34","34","2","34","0","0","3","31","792","124","262","118","101","406","76","129","55","74","6","6","6","4","2","2","52","52","55","41","minor"
"53701","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53701 Javadoc fixes provided by Sebb.","Bug 53701  Javadoc fixes","javadoc fix","","","""java/javax/servlet/ServletInputStream.java""","3","3","3","2","21","1","8","12","1","0","0","2","6","6","0","6","0","0","1","5","111","11","25","11","9","75","13","19","11","8","5","5","6","4","2","3","6","6","7","5","minor"
"53701","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53701 Javadoc fixes provided by Sebb.","Bug 53701  Javadoc fixes","javadoc fix","","","""java/javax/servlet/ServletOutputStream.java""","1","1","1","1","13","0","4","8","1","0","2","16","18","18","0","18","0","0","1","17","287","22","84","32","39","182","45","66","33","33","4","4","4","1","2","2","20","20","20","16","minor"
"53702","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53702 <jsp-property-group> may contain multiple <url-pattern>","Bug 53702  Only the last url-pattern from jsp-property-group is processed","last url pattern urlpattern jsp properti group jsppropertygroup process","","","""java/org/apache/catalina/core/ApplicationJspPropertyGroupDescriptor.java""","1","1","1","1","7","1","6","0","1","0","0","13","13","13","1","13","0","0","0","13","172","54","102","44","44","16","39","63","30","33","2","2","2","1","1","0","23","23","23","13","normal"
"53702","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53702 <jsp-property-group> may contain multiple <url-pattern>","Bug 53702  Only the last url-pattern from jsp-property-group is processed","last url pattern urlpattern jsp properti group jsppropertygroup process","","","""java/org/apache/catalina/deploy/JspPropertyGroup.java""","1","1","1","1","2","0","2","0","1","0","0","24","24","24","12","24","0","0","0","24","102","14","69","41","37","19","39","64","40","24","1","1","1","1","0","0","24","24","24","24","normal"
"53702","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53702 <jsp-property-group> may contain multiple <url-pattern>","Bug 53702  Only the last url-pattern from jsp-property-group is processed","last url pattern urlpattern jsp properti group jsppropertygroup process","","","""java/org/apache/catalina/startup/WebRuleSet.java""","1","1","1","1","20","1","16","2","19","0","1","45","45","45","20","45","0","0","2","43","1290","208","853","177","625","229","386","484","137","347","10","10","14","1","3","0","79","79","84","45","normal"
"53702","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53702 <jsp-property-group> may contain multiple <url-pattern>","Bug 53702  Only the last url-pattern from jsp-property-group is processed","last url pattern urlpattern jsp properti group jsppropertygroup process","","","""java/org/apache/catalina/deploy/WebXml.java""","4","4","5","2","21","1","18","1","1","9","6","90","90","81","40","90","0","8","0","82","2192","168","1781","237","1314","246","734","1278","342","936","116","116","119","89","6","0","416","416","455","227","normal"
"53713","22","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53713 Performance improvement (up to four times faster parsing) for JSP processing. Patch provided by Sheldon Shao.","Bug 53713  Performance tuning solution for JspReader","perform tune solut jsp reader jspreader","","","""java/org/apache/jasper/compiler/JspReader.java""","3","3","3","1","18","1","12","5","1","0","0","27","27","27","8","27","20","5","0","2","615","73","352","93","220","192","177","257","83","174","12","12","17","6","5","1","83","83","98","52","enhancement"
"53713","22","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53713 Performance improvement (up to four times faster parsing) for JSP processing. Patch provided by Sheldon Shao.","Bug 53713  Performance tuning solution for JspReader","perform tune solut jsp reader jspreader","","","""java/org/apache/jasper/compiler/Mark.java""","1","1","1","1","11","0","8","3","2","0","0","14","14","14","18","14","4","0","0","10","263","42","139","43","82","82","92","111","38","73","2","2","6","1","1","1","17","17","21","14","enhancement"
"53714","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53714 Provide a means of excluding JARs from pluggability scans, TLD scans or all scans.","Bug 53714  misleading log output when jarsToSkip cointains web-fragments","mislead log output jar to skip jarstoskip cointain web fragment webfrag","I have a jar which contains a web-fragment and no TLDs. When starting the server I get the Message:

org.apache.jasper.compiler.TldLocationsCache tldScanJar
INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.

so far so good.

When adding it to the tomcat.util.scan.DefaultJarScanner.jarsToSkip property the web-fragment won't be scanned either.

The log message should only be printed when no TLDs and web-fragments could be found in the jar.","jar contain web fragment webfrag tld start server get messag apach jasper compil tld locat cach tldlocationscach tld scan jar tldscanjar info least one jar scan tld yet contain tld enabl debug log logger complet list jar scan tld found skip unneed jar scan improv startup time jsp compil time far good ad tomcat util scan default jar scanner defaultjarscann jar to skip jarstoskip properti web fragment webfrag won scan either log messag print tld web fragment webfrag could found jar","""java/org/apache/catalina/startup/Constants.java""","0","0","0","0","0","0","0","0","1","0","36","0","0","0","0","0","0","0","0","0","228","31","85","80","47","118","41","42","42","0","0","0","0","0","0","1","0","0","0","0","minor"
"53714","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53714 Provide a means of excluding JARs from pluggability scans, TLD scans or all scans.","Bug 53714  misleading log output when jarsToSkip cointains web-fragments","mislead log output jar to skip jarstoskip cointain web fragment webfrag","I have a jar which contains a web-fragment and no TLDs. When starting the server I get the Message:

org.apache.jasper.compiler.TldLocationsCache tldScanJar
INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.

so far so good.

When adding it to the tomcat.util.scan.DefaultJarScanner.jarsToSkip property the web-fragment won't be scanned either.

The log message should only be printed when no TLDs and web-fragments could be found in the jar.","jar contain web fragment webfrag tld start server get messag apach jasper compil tld locat cach tldlocationscach tld scan jar tldscanjar info least one jar scan tld yet contain tld enabl debug log logger complet list jar scan tld found skip unneed jar scan improv startup time jsp compil time far good ad tomcat util scan default jar scanner defaultjarscann jar to skip jarstoskip properti web fragment webfrag won scan either log messag print tld web fragment webfrag could found jar","""java/org/apache/catalina/startup/Constants.java""","0","0","0","0","0","0","0","0","1","0","36","0","0","0","0","0","0","0","0","0","228","31","85","80","47","118","41","42","42","0","0","0","0","0","0","1","0","0","0","0","minor"
"53714","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53714 Provide a means of excluding JARs from pluggability scans, TLD scans or all scans.","Bug 53714  misleading log output when jarsToSkip cointains web-fragments","mislead log output jar to skip jarstoskip cointain web fragment webfrag","I have a jar which contains a web-fragment and no TLDs. When starting the server I get the Message:

org.apache.jasper.compiler.TldLocationsCache tldScanJar
INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.

so far so good.

When adding it to the tomcat.util.scan.DefaultJarScanner.jarsToSkip property the web-fragment won't be scanned either.

The log message should only be printed when no TLDs and web-fragments could be found in the jar.","jar contain web fragment webfrag tld start server get messag apach jasper compil tld locat cach tldlocationscach tld scan jar tldscanjar info least one jar scan tld yet contain tld enabl debug log logger complet list jar scan tld found skip unneed jar scan improv startup time jsp compil time far good ad tomcat util scan default jar scanner defaultjarscann jar to skip jarstoskip properti web fragment webfrag won scan either log messag print tld web fragment webfrag could found jar","""java/org/apache/catalina/startup/Constants.java""","0","0","0","0","0","0","0","0","1","0","60","0","0","0","0","0","0","0","0","0","193","39","115","114","60","43","61","62","62","0","0","0","0","0","0","0","0","0","0","0","minor"
"53714","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53714 Provide a means of excluding JARs from pluggability scans, TLD scans or all scans.","Bug 53714  misleading log output when jarsToSkip cointains web-fragments","mislead log output jar to skip jarstoskip cointain web fragment webfrag","I have a jar which contains a web-fragment and no TLDs. When starting the server I get the Message:

org.apache.jasper.compiler.TldLocationsCache tldScanJar
INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.

so far so good.

When adding it to the tomcat.util.scan.DefaultJarScanner.jarsToSkip property the web-fragment won't be scanned either.

The log message should only be printed when no TLDs and web-fragments could be found in the jar.","jar contain web fragment webfrag tld start server get messag apach jasper compil tld locat cach tldlocationscach tld scan jar tldscanjar info least one jar scan tld yet contain tld enabl debug log logger complet list jar scan tld found skip unneed jar scan improv startup time jsp compil time far good ad tomcat util scan default jar scanner defaultjarscann jar to skip jarstoskip properti web fragment webfrag won scan either log messag print tld web fragment webfrag could found jar","""java/org/apache/catalina/startup/Constants.java""","0","0","0","0","0","0","0","0","1","0","60","0","0","0","0","0","0","0","0","0","193","39","115","114","60","43","61","62","62","0","0","0","0","0","0","0","0","0","0","0","minor"
"53714","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53714 Provide a means of excluding JARs from pluggability scans, TLD scans or all scans.","Bug 53714  misleading log output when jarsToSkip cointains web-fragments","mislead log output jar to skip jarstoskip cointain web fragment webfrag","I have a jar which contains a web-fragment and no TLDs. When starting the server I get the Message:

org.apache.jasper.compiler.TldLocationsCache tldScanJar
INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.

so far so good.

When adding it to the tomcat.util.scan.DefaultJarScanner.jarsToSkip property the web-fragment won't be scanned either.

The log message should only be printed when no TLDs and web-fragments could be found in the jar.","jar contain web fragment webfrag tld start server get messag apach jasper compil tld locat cach tldlocationscach tld scan jar tldscanjar info least one jar scan tld yet contain tld enabl debug log logger complet list jar scan tld found skip unneed jar scan improv startup time jsp compil time far good ad tomcat util scan default jar scanner defaultjarscann jar to skip jarstoskip properti web fragment webfrag won scan either log messag print tld web fragment webfrag could found jar","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","7","1","37","3","27","6","4","1","8","62","62","61","23","62","0","9","36","17","2618","338","1851","447","1268","429","844","1287","435","852","38","38","45","13","7","0","409","409","451","106","minor"
"53714","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53714 Provide a means of excluding JARs from pluggability scans, TLD scans or all scans.","Bug 53714  misleading log output when jarsToSkip cointains web-fragments","mislead log output jar to skip jarstoskip cointain web fragment webfrag","I have a jar which contains a web-fragment and no TLDs. When starting the server I get the Message:

org.apache.jasper.compiler.TldLocationsCache tldScanJar
INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.

so far so good.

When adding it to the tomcat.util.scan.DefaultJarScanner.jarsToSkip property the web-fragment won't be scanned either.

The log message should only be printed when no TLDs and web-fragments could be found in the jar.","jar contain web fragment webfrag tld start server get messag apach jasper compil tld locat cach tldlocationscach tld scan jar tldscanjar info least one jar scan tld yet contain tld enabl debug log logger complet list jar scan tld found skip unneed jar scan improv startup time jsp compil time far good ad tomcat util scan default jar scanner defaultjarscann jar to skip jarstoskip properti web fragment webfrag won scan either log messag print tld web fragment webfrag could found jar","""java/org/apache/catalina/startup/TldConfig.java""","4","4","4","1","22","1","17","3","2","2","7","17","17","15","5","17","0","7","0","10","553","70","342","94","219","141","155","230","89","141","10","10","13","6","5","0","70","70","78","22","minor"
"53714","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53714 Provide a means of excluding JARs from pluggability scans, TLD scans or all scans.","Bug 53714  misleading log output when jarsToSkip cointains web-fragments","mislead log output jar to skip jarstoskip cointain web fragment webfrag","I have a jar which contains a web-fragment and no TLDs. When starting the server I get the Message:

org.apache.jasper.compiler.TldLocationsCache tldScanJar
INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.

so far so good.

When adding it to the tomcat.util.scan.DefaultJarScanner.jarsToSkip property the web-fragment won't be scanned either.

The log message should only be printed when no TLDs and web-fragments could be found in the jar.","jar contain web fragment webfrag tld start server get messag apach jasper compil tld locat cach tldlocationscach tld scan jar tldscanjar info least one jar scan tld yet contain tld enabl debug log logger complet list jar scan tld found skip unneed jar scan improv startup time jsp compil time far good ad tomcat util scan default jar scanner defaultjarscann jar to skip jarstoskip properti web fragment webfrag won scan either log messag print tld web fragment webfrag could found jar","""java/org/apache/jasper/compiler/TldLocationsCache.java""","4","4","5","1","23","1","18","3","2","3","11","13","13","10","3","13","0","6","0","7","499","46","289","88","181","164","135","202","83","119","10","10","11","6","5","1","60","60","65","23","minor"
"53725","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53725 Fix corruption in some GZIP'd content","Bug 53725  Some GZipped responses result in java.io.IOException: Corrupt GZIP trailer during gunzip.","zip gzip respons result java except ioexcept corrupt gzip trailer gunzip","","","""java/org/apache/coyote/http11/filters/FlushableGZIPOutputStream.java""","1","1","1","1","8","0","6","1","1","0","0","10","10","10","2","10","0","2","1","7","143","15","79","27","35","49","30","49","19","30","3","3","3","1","2","1","19","19","19","10","critical"
"53758","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53758 Fix Dynamic Filter Registration mapping logic inverted","Bug 53758  Dynamic Filter Registration mapping logic inverted","dynam filter registr map logic invert","In the class org.apache.catalina.core.ApplicationFilterRegistration, the methods addMappingForServletNames and addMappingForUrlPatterns have inverted logic on how to register the filter to the context.

If the parameter isMatchAfter is passed as true, the filter is placed in the context using the addFilterMapBefore method.

if (isMatchAfter) {
    context.addFilterMapBefore(filterMap);
} else {
    context.addFilterMap(filterMap);
}

The logic should ultimate be (in both methods):

if (!isMatchAfter) {
    context.addFilterMapBefore(filterMap);
} else {
    context.addFilterMap(filterMap);
}

or

if (isMatchAfter) {
    context.addFilterMap(filterMap);
} else {
    context.addFilterMapBefore(filterMap);
}



svn rev on trunk is 1375614","class apach catalina core applic filter registr applicationfilterregistr method add map for servlet name addmappingforservletnam add map for url pattern addmappingforurlpattern invert logic regist filter context paramet is match after ismatchaft pass true filter place context use add filter map befor addfiltermapbefor method is match after ismatchaft context add filter map befor addfiltermapbefor filter map filtermap els context add filter map addfiltermap filter map filtermap logic ultim method is match after ismatchaft context add filter map befor addfiltermapbefor filter map filtermap els context add filter map addfiltermap filter map filtermap is match after ismatchaft context add filter map addfiltermap filter map filtermap els context add filter map befor addfiltermapbefor filter map filtermap svn rev trunk","""java/org/apache/catalina/core/ApplicationFilterRegistration.java""","2","2","3","1","12","1","9","0","1","0","1","12","12","12","2","12","0","0","0","12","214","42","149","55","68","23","55","100","47","53","6","6","6","1","3","0","34","34","36","12","major"
"53777","310","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53777 Enable instances of the JAAS Realm to specify a dedicated configuration file. This is likely to be of particular use when the realm is specified at the Context level.","Bug 53777  Ability to bundle JAAS Configuration in Webappp","abil bundl jaa configur webappp","","","""java/org/apache/catalina/realm/JAASRealm.java""","3","3","3","1","19","1","10","6","1","0","2","19","19","19","6","19","0","0","8","11","588","92","245","73","149","251","115","171","61","110","21","21","21","10","4","1","59","59","60","31","enhancement"
"53783","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53783 Handle case where tool generating JARs does not generate entries for directories.","Bug 53783  Static resources and jsp files under WEB-INF/lib/*.jar!/META-INF/resources are not found","static resourc jsp file web inf lib jar meta inf resourc found","","","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","7","1","35","3","27","5","4","2","9","63","63","61","23","63","0","10","36","17","2641","341","1865","452","1277","435","851","1297","440","857","38","38","45","13","7","0","412","412","454","107","enhancement"
"53793","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53793 Change webapp links in Manager to point to /appname/ instead of /appname","Bug 53793  Change webapp links in Manager to point to /appname/ instead of /appname","chang webapp link manag point appnam instead appnam","The first column of the table that lists Web Applications in Tomcat Manager webapp contains links to those applications, e.g.

  <a href=""/examples"">/examples</a>

When the link is clicked and browser navigates to ""/examples"", it results in 302 redirect to ""/examples/"".

It would be better to change that link to point directly to ""/examples/"".

  <a href=""/examples/"">/examples</a>

I am changing the link address only, but not the text on it. That is because the ""Path"" of the web application displayed in that column (and used in Manager commands elsewhere) does not have the additional '/'.","first column tabl list web applic tomcat manag webapp contain link applic href exampl exampl link click browser navig exampl result redirect exampl would better chang link point directli exampl href exampl exampl chang link address text path web applic display column use manag command elsewher addit","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","30","2","22","6","11","0","16","33","33","33","1","33","0","1","18","14","1352","127","976","213","770","256","424","557","186","371","20","20","25","10","4","0","128","128","149","61","enhancement"
"53800","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53800 FileDirContext.list() did not provide correct paths for subdirectories. Patch provided by Kevin Wooten.","Bug 53800  Infinte loop cause by FileDirContext in a CDI/Weld project when using Eclipse's ""Server modules without publishing""","infint loop caus file dir context filedircontext cdi weld project use server modul without publish","","","""java/org/apache/naming/resources/FileDirContext.java""","2","2","2","1","19","1","8","9","3","0","3","42","42","42","7","42","0","0","7","35","1109","203","426","167","229","481","179","278","110","168","13","13","14","8","4","1","95","95","99","54","normal"
"53801","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53801 Overlapping URL patterns were sometimes merged incorrectly in security constraints leading to incorrect 401 responses. Note: it was possible for access to be denied when it should have been granted but it was not possible for access to be granted when it should have been denied.","Bug 53801  Nondeterministic behaviour of security constraints","nondeterminist behaviour secur constraint","","","""java/org/apache/catalina/realm/RealmBase.java""","4","4","4","2","22","2","14","5","2","4","6","50","53","49","13","53","1","3","14","35","1421","243","832","226","510","349","387","592","200","392","53","53","63","21","6","0","203","203","228","102","normal"
"53828","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53828 Use the correct status code","Bug 53828  StreamInbound.closeOutboundConnection(WsFrame) closes with an opcode instead of status","stream inbound streaminbound close outbound connect closeoutboundconnect frame wsframe close opcod instead statu","201	private void closeOutboundConnection(WsFrame frame) throws IOException {
202	  try {
203	    getWsOutbound().close(frame);
204	  } finally {
205	    doOnClose(Constants.OPCODE_CLOSE);
206	  }
207	}

Line 205 uses the close opcode instead of a valid status (Constants.STATUS_*).

Not sure of the exact context of this called but it seems to only be called when the last frame from the client was a close frame, thus a Constants.STATUS_NORMAL may be in order.

If not, the frame's opcode could be inspected and mapped to an appropriate status (normal, shutdown, etc...).

Thanks,
Michael","privat void close outbound connect closeoutboundconnect frame wsframe frame throw except ioexcept tri get outbound getwsoutbound close frame final do on close doonclos constant opcod close line us close opcod instead valid statu constant statu sure exact context call seem call last frame client close frame thu constant statu normal may order frame opcod could inspect map appropri statu normal shutdown etc thank michael","""java/org/apache/catalina/websocket/StreamInbound.java""","1","1","1","1","10","0","7","3","1","0","0","18","20","20","5","20","0","5","4","11","298","41","154","56","84","103","73","106","50","56","11","11","11","11","3","1","28","28","28","28","minor"
"53854","18","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53854 Get directory listings working with aliases","Bug 53854  DefaultServlet directory listings for aliased directories do not seem to work","default servlet defaultservlet directori list alias directori seem work","","","""java/org/apache/naming/resources/BaseDirContext.java""","1","1","1","1","16","0","6","9","2","0","2","60","81","81","10","81","0","1","4","76","1634","225","549","275","213","863","198","314","158","156","10","10","13","7","3","2","107","107","110","85","minor"
"53854","18","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53854 Get directory listings working with aliases","Bug 53854  DefaultServlet directory listings for aliased directories do not seem to work","default servlet defaultservlet directori list alias directori seem work","","","""java/org/apache/naming/resources/FileDirContext.java""","2","2","2","1","19","1","8","9","3","0","3","42","42","42","7","42","0","0","7","35","1109","203","426","167","229","481","179","278","110","168","13","13","14","8","4","1","95","95","99","54","minor"
"53854","18","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53854 Get directory listings working with aliases","Bug 53854  DefaultServlet directory listings for aliased directories do not seem to work","default servlet defaultservlet directori list alias directori seem work","","","""java/org/apache/naming/resources/WARDirContext.java""","1","1","1","1","16","0","7","8","3","0","1","44","44","44","6","44","0","1","9","34","1005","175","385","172","188","445","175","259","121","138","7","7","7","5","5","1","81","81","84","58","minor"
"53863","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53863 Ensure implicit Servlets (JSP, default) are marked as override-able when using embedded mode.","Bug 53863  Unable to override default servlet when using Tomcat in embedded mode","unabl overrid default servlet use tomcat embed mode","An implementation of ServletContainerInitializer can't add a mapping to ""/"" because the default servlet is loaded first, as first reported in 51278:

public final class SampleServletContainerInitializer implements ServletContainerInitializer {

  public void onStartup(final Set<Class<?>> c, final ServletContext ctx) throws ServletException {
    final XmlWebApplicationContext appCtx = new XmlWebApplicationContext();

    appCtx.setConfigLocation(""/WEB-INF/DispatcherServlet-servlet.xml"");

    final ServletRegistration.Dynamic dispatcher = ctx.addServlet(""DispatcherServlet"", new DispatcherServlet(appCtx));

    dispatcher.setLoadOnStartup(1);

    final Set<String> conflictSet = dispatcher.addMapping(""/"");

    for (final String conflict : conflictSet)
      out.println(conflict); // prints ""/""

  }

}

A test case follows attached.","implement servlet contain initi servletcontaineriniti add map default servlet load first first report public final class sampl servlet contain initi sampleservletcontaineriniti implement servlet contain initi servletcontaineriniti public void on startup onstartup final set class final servlet context servletcontext ctx throw servlet except servletexcept final xml web applic context xmlwebapplicationcontext app ctx appctx new xml web applic context xmlwebapplicationcontext app ctx appctx set config locat setconfigloc web inf dispatch servlet servlet dispatcherservletservlet xml final servlet registr servletregistr dynam dispatch ctx add servlet addservlet dispatch servlet dispatcherservlet new dispatch servlet dispatcherservlet app ctx appctx dispatch set load on startup setloadonstartup final set string conflict set conflictset dispatch add map addmap final string conflict conflict set conflictset println conflict print case follow attach","""java/org/apache/catalina/startup/Tomcat.java""","1","1","1","1","13","0","8","4","5","3","2","48","48","45","12","48","0","1","5","42","1038","96","619","317","417","324","232","316","130","186","7","7","7","1","2","1","81","81","81","48","critical"
"53867","45","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53867 Improve performance of XML escaping Based on a patch by Sheldon Shao","Bug 53867  Performance tuning solution for PageContextImpl.XmlEscape","perform tune solut page context impl pagecontextimpl xml escap xmlescap","","","""java/org/apache/jasper/runtime/PageContextImpl.java""","2","2","2","1","14","1","12","1","14","2","1","59","59","57","15","59","1","14","0","44","992","146","742","169","473","106","304","455","135","320","10","10","12","7","3","0","160","148","166","69","enhancement"
"53869","133","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53869 Performance improvement for pages with lots of heavily nested tags. Retain a reference to the root JSP context rather than traversing the hierarchy on every call. Based on a patch suggested by Sheldon Shao.","Bug 53869  Performance tuning solution to resolve too many cascaded JspContextWrapper issue","perform tune solut resolv mani cascad jsp context wrapper jspcontextwrapp issu","","","""java/org/apache/jasper/runtime/JspContextWrapper.java""","1","1","1","1","8","0","6","1","1","0","0","39","39","39","7","39","0","4","0","35","500","78","341","130","149","82","128","203","85","118","9","7","10","3","3","0","76","74","77","41","enhancement"
"53986","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53986 Ensure current and reset Mark are always separate objects. Corrects issue with parsing JSP comments that end with ""---%>"".","Bug 53986  Comment end tag preceded directly by a dash causes JSP fail compilation","comment tag preced directli dash caus jsp fail compil","","","""java/org/apache/jasper/compiler/JspReader.java""","3","3","3","2","18","1","13","4","1","0","0","31","31","31","8","31","20","9","0","2","717","83","428","112","276","209","221","315","102","213","12","12","17","6","5","0","99","99","114","62","normal"
"53987","252","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53987 Servlet 3.1. Log uncovered HTTP methods.","Bug 53987  Log uncovered HTTP methods in combined security constraints","log uncov http method combin secur constraint","It is usually an error (and a security hole) if security constraints are defined for some but not all HTTP methods for a given URL. If such a situation is detected on web application start, log it.","usual error secur hole secur constraint defin http method given url situat detect web applic start log","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","14","1","8","3","3","0","2","361","361","361","129","361","0","12","9","340","6860","1354","3697","1182","2162","1814","1599","2470","941","1529","51","51","62","9","5","0","770","770","838","450","enhancement"
"53993","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53993 Avoid NPE when the session is invalidated","Bug 53993  NPE in AccessLogValve","npe access log valv accesslogvalv","During a load test of tomcat 7.0.30, we occasionally see NPEs from the AccessLogValve.  Some of the requests that are being executed as part of the load test call HttpSession.invalidate.  I mention this because the code in question appears to be susceptible to multithreaded manipulation of the session.  I think the fix should be as simple as a check for null on the return value of request.getSessionInternal.

Of course, our access log pattern includes logging the session id.

java.lang.NullPointerException 
    org.apache.catalina.valves.AccessLogValve$SessionIdElement.addElement(AccessLogValve.java:1733) 
    org.apache.catalina.valves.AccessLogValve.log(AccessLogValve.java:955) 
    org.apache.catalina.core.AccessLogAdapter.log(AccessLogAdapter.java:51) 
    org.apache.catalina.core.StandardEngine.logAccess(StandardEngine.java:332) 
    org.apache.catalina.core.ContainerBase.logAccess(ContainerBase.java:1270) 
    org.apache.catalina.core.ContainerBase.logAccess(ContainerBase.java:1270) 
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:441) 
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002) 
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585) 
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312) 
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 
    java.lang.Thread.run(Thread.java:722)

existing code for convenience:

    protected static class SessionIdElement implements AccessLogElement {
        @Override
        public void addElement(StringBuilder buf, Date date, Request request,
                Response response, long time) {
            if (request != null) {
                if (request.getSession(false) != null) {
                    buf.append(request.getSessionInternal(false) // LINE 1733
                            .getIdInternal());
                } else {
                    buf.append('-');
                }
            } else {
                buf.append('-');
            }
        }
    }


possible fix:

...
                if (request.getSession(false) != null) {
                    Session internalSession = request.getSessionInternal(false);
                    if (internalSession != null) {
                        buf.append(internalSession.getIdInternal());
                    } else {
                        buf.append('-');
                    }
                } else {
                    buf.append('-');
                }","load tomcat occasion see npe access log valv accesslogvalv request execut part load call http session httpsession invalid mention code question appear suscept multithread manipul session think fix simpl check null return valu request get session intern getsessionintern cours access log pattern includ log session id java lang null pointer except nullpointerexcept apach catalina valv access log valv accesslogvalv session id element sessionidel add element addel access log valv accesslogvalv java apach catalina valv access log valv accesslogvalv log access log valv accesslogvalv java apach catalina core access log adapt accesslogadapt log access log adapt accesslogadapt java apach catalina core standard engin standardengin log access logaccess standard engin standardengin java apach catalina core contain base containerbas log access logaccess contain base containerbas java apach catalina core contain base containerbas log access logaccess contain base containerbas java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java exist code conveni protect static class session id element sessionidel implement access log element accesslogel overrid public void add element addel string builder stringbuild buf date date request request respons respons long time request null request get session getsess fals null buf append request get session intern getsessionintern fals line get id intern getidintern els buf append els buf append possibl fix request get session getsess fals null session intern session internalsess request get session intern getsessionintern fals intern session internalsess null buf append intern session internalsess get id intern getidintern els buf append els buf append","""java/org/apache/catalina/valves/AccessLogValve.java""","3","2","3","1","14","0","11","2","31","4","19","96","95","93","57","97","0","11","11","75","2184","252","1302","354","802","631","606","865","298","567","42","13","42","4","4","0","292","225","314","107","normal"
"54010","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54010 Remove some unnecessary code (duplicate calls to configure the scheme as https for AJP requests originally received over HTTPS).","Bug 54010  Suggestion for code improvement (avoiding potential bug)","suggest code improv avoid potenti","In connectors/jk/java/org/apache/jk/common/HandlerRequest.java

coyote.Request's schemeMB is assigned in 2 places.

1st place: 
400         boolean isSSL = msg.getByte() != 0;
401         if( isSSL ) {
402             // XXX req.setSecure( true );
403             req.scheme().setString(""https"");
404         }

2nd place:
518             case AjpConstants.SC_A_SSL_CERT     :
519                 req.scheme().setString( ""https"" );
and similar assignments for SC_A_SSL_CIPHER and SC_A_SSL_SESSION cases below.

It seems they do not make sense because the packet's 8-bit field is designated for telling whether it's SSL or not. So the 1st place is enough. Adding the 2nd place may pose potential bug in that a packet with the 8-bit SSL field being 0 and suffixes of SC_A_SSL_* key-value pairs can later incorrect trigger a wrong redirection message pointing to a https location.

A simple correction is to honor the 8-bit SSL-field in packet and delete the 3 lines of 2nd place assigning ""https"". 

Even though the chances of such spurious packet is low, but it's best we can have threat-free, semantic-correct tomcat code.

The same lines of code remain in 6.0 and 7.0.

But maybe I misunderstand the code, in which case please kindly point out. Thanks.","connector jk java apach jk common handler request handlerrequest java coyot request scheme schememb assign place 1st place boolean is isssl msg get byte getbyt is isssl xxx req set secur setsecur true req scheme set string setstr http 2nd place case ajp constant ajpconst sc ssl cert req scheme set string setstr http similar assign sc ssl cipher sc ssl session case seem make sens packet bit 8bit field design tell whether ssl 1st place enough ad 2nd place may pose potenti packet bit 8bit ssl field suffix sc ssl key valu keyvalu pair later incorrect trigger wrong redirect messag point http locat simpl correct honor bit 8bit field sslfield packet delet line 2nd place assign http even though chanc spuriou packet low best threat free threatfre semant correct semanticcorrect tomcat code line code remain mayb misunderstand code case pleas kindli point thank","""java/org/apache/coyote/ajp/AbstractAjpProcessor.java""","5","4","5","2","30","3","22","5","3","0","5","26","30","30","24","30","0","0","10","20","1138","199","687","171","503","255","387","511","156","355","35","35","38","12","5","0","135","123","146","53","enhancement"
"54012","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54012 Enable the tag plug-in for c:set to work in tag files. Based on a patch by Sheldon Shao.","Bug 54012  No ""pageContext"" in tag files' generated java code when using code generation by JSTL tagplugin ""Set""","page context pagecontext tag file gener java code use code gener jstl tagplugin set","","","""java/org/apache/jasper/compiler/Compiler.java""","5","5","5","1","36","3","24","8","1","0","0","14","15","15","8","15","0","1","2","12","599","79","367","84","240","154","165","243","76","167","27","27","28","12","5","0","76","76","81","27","normal"
"54012","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54012 Enable the tag plug-in for c:set to work in tag files. Based on a patch by Sheldon Shao.","Bug 54012  No ""pageContext"" in tag files' generated java code when using code generation by JSTL tagplugin ""Set""","page context pagecontext tag file gener java code use code gener jstl tagplugin set","","","""java/org/apache/jasper/compiler/PageInfo.java""","1","1","1","1","5","0","4","0","1","0","0","84","84","84","46","84","1","0","0","83","736","137","442","165","207","160","200","314","149","165","6","6","7","1","3","0","115","115","120","84","normal"
"54012","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54012 Enable the tag plug-in for c:set to work in tag files. Based on a patch by Sheldon Shao.","Bug 54012  No ""pageContext"" in tag files' generated java code when using code generation by JSTL tagplugin ""Set""","page context pagecontext tag file gener java code use code gener jstl tagplugin set","","","""java/org/apache/jasper/tagplugins/jstl/core/Set.java""","6","6","6","1","145","21","102","22","1","0","0","1","1","1","0","1","0","0","0","1","174","27","109","19","94","38","91","98","17","81","6","6","6","1","2","0","6","6","6","1","normal"
"54012","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54012 Enable the tag plug-in for c:set to work in tag files. Based on a patch by Sheldon Shao.","Bug 54012  No ""pageContext"" in tag files' generated java code when using code generation by JSTL tagplugin ""Set""","page context pagecontext tag file gener java code use code gener jstl tagplugin set","","","""java/org/apache/jasper/compiler/tagplugin/TagPluginContext.java""","0","0","0","0","0","0","0","0","1","0","0","0","14","14","0","14","14","0","0","0","124","18","17","16","0","89","15","16","16","0","0","0","0","0","0","5","0","0","0","0","normal"
"54012","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54012 Enable the tag plug-in for c:set to work in tag files. Based on a patch by Sheldon Shao.","Bug 54012  No ""pageContext"" in tag files' generated java code when using code generation by JSTL tagplugin ""Set""","page context pagecontext tag file gener java code use code gener jstl tagplugin set","","","""java/org/apache/jasper/compiler/TagPluginManager.java""","1","1","1","1","8","0","7","0","3","0","2","21","21","21","8","21","1","3","0","17","256","39","186","74","97","31","88","128","60","68","10","10","10","8","2","0","38","38","40","30","normal"
"54017","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54017 Simplify and reduce GC.","Bug 54017  new String instance is generated for constant string in Generator.convertString","new string instanc gener constant string gener convert string convertstr","If the target class is ""Object.class"", the generator generates
        ""new String("" + quoted + "")"";
as attribute value for Tag Handler.

How about using quoted directly same as when the target class is ""Object.class""?

Creating a String instance will cause some overhead from memory allocation and hash code recaluation when it is used as a key on HashMap.


Here is the detail code,

        /*
         * @param c The target class to which to coerce the given string @param
         * s The string value @param attrName The name of the attribute whose
         * value is being supplied @param propEditorClass The property editor
         * for the given attribute @param isNamedAttribute true if the given
         * attribute is a named attribute (that is, specified using the
         * jsp:attribute standard action), and false otherwise
         */
        private String convertString(Class<?> c, String s, String attrName,
                Class<?> propEditorClass, boolean isNamedAttribute) {

            String quoted = s;
            if (!isNamedAttribute) {
                quoted = quote(s);
            }

            if (propEditorClass != null) {
                String className = c.getCanonicalName();
                return ""(""
                        + className
                        + "")org.apache.jasper.runtime.JspRuntimeLibrary.getValueFromBeanInfoPropertyEditor(""
                        + className + "".class, \"""" + attrName + ""\"", "" + quoted
                        + "", "" + propEditorClass.getCanonicalName() + "".class)"";
            } else if (c == String.class) {
                return quoted;
            } else if (c == boolean.class) {
                return JspUtil.coerceToPrimitiveBoolean(s, isNamedAttribute);
            } else if (c == Boolean.class) {
                return JspUtil.coerceToBoolean(s, isNamedAttribute);
            } else if (c == byte.class) {
                return JspUtil.coerceToPrimitiveByte(s, isNamedAttribute);
            } else if (c == Byte.class) {
                return JspUtil.coerceToByte(s, isNamedAttribute);
            } else if (c == char.class) {
                return JspUtil.coerceToChar(s, isNamedAttribute);
            } else if (c == Character.class) {
                return JspUtil.coerceToCharacter(s, isNamedAttribute);
            } else if (c == double.class) {
                return JspUtil.coerceToPrimitiveDouble(s, isNamedAttribute);
            } else if (c == Double.class) {
                return JspUtil.coerceToDouble(s, isNamedAttribute);
            } else if (c == float.class) {
                return JspUtil.coerceToPrimitiveFloat(s, isNamedAttribute);
            } else if (c == Float.class) {
                return JspUtil.coerceToFloat(s, isNamedAttribute);
            } else if (c == int.class) {
                return JspUtil.coerceToInt(s, isNamedAttribute);
            } else if (c == Integer.class) {
                return JspUtil.coerceToInteger(s, isNamedAttribute);
            } else if (c == short.class) {
                return JspUtil.coerceToPrimitiveShort(s, isNamedAttribute);
            } else if (c == Short.class) {
                return JspUtil.coerceToShort(s, isNamedAttribute);
            } else if (c == long.class) {
                return JspUtil.coerceToPrimitiveLong(s, isNamedAttribute);
            } else if (c == Long.class) {
                return JspUtil.coerceToLong(s, isNamedAttribute);
            } else if (c == Object.class) {
                return ""new String("" + quoted + "")"";
            } else {
                String className = c.getCanonicalName();
                return ""(""
                        + className
                        + "")org.apache.jasper.runtime.JspRuntimeLibrary.getValueFromPropertyEditorManager(""
                        + className + "".class, \"""" + attrName + ""\"", "" + quoted
                        + "")"";
            }
        }","target class object class gener gener new string quot attribut valu tag handler use quot directli target class object class creat string instanc caus overhead memori alloc hash code recalu use key hash map hashmap detail code param target class coerc given string param string valu param attr name attrnam name attribut whose valu suppli param prop editor class propeditorclass properti editor given attribut param is name attribut isnamedattribut true given attribut name attribut specifi use jsp attribut standard action fals otherwis privat string convert string convertstr class string string attr name attrnam class prop editor class propeditorclass boolean is name attribut isnamedattribut string quot is name attribut isnamedattribut quot quot prop editor class propeditorclass null string class name classnam get canon name getcanonicalnam return class name classnam apach jasper runtim jsp runtim librari jspruntimelibrari get valu from bean info properti editor getvaluefrombeaninfopropertyeditor class name classnam class attr name attrnam quot prop editor class propeditorclass get canon name getcanonicalnam class els string class return quot els boolean class return jsp util jsputil coerc to primit boolean coercetoprimitiveboolean is name attribut isnamedattribut els boolean class return jsp util jsputil coerc to boolean coercetoboolean is name attribut isnamedattribut els byte class return jsp util jsputil coerc to primit byte coercetoprimitivebyt is name attribut isnamedattribut els byte class return jsp util jsputil coerc to byte coercetobyt is name attribut isnamedattribut els char class return jsp util jsputil coerc to char coercetochar is name attribut isnamedattribut els charact class return jsp util jsputil coerc to charact coercetocharact is name attribut isnamedattribut els doubl class return jsp util jsputil coerc to primit doubl coercetoprimitivedoubl is name attribut isnamedattribut els doubl class return jsp util jsputil coerc to doubl coercetodoubl is name attribut isnamedattribut els float class return jsp util jsputil coerc to primit float coercetoprimitivefloat is name attribut isnamedattribut els float class return jsp util jsputil coerc to float coercetofloat is name attribut isnamedattribut els int class return jsp util jsputil coerc to int coercetoint is name attribut isnamedattribut els integ class return jsp util jsputil coerc to integ coercetointeg is name attribut isnamedattribut els short class return jsp util jsputil coerc to primit short coercetoprimitiveshort is name attribut isnamedattribut els short class return jsp util jsputil coerc to short coercetoshort is name attribut isnamedattribut els long class return jsp util jsputil coerc to primit long coercetoprimitivelong is name attribut isnamedattribut els long class return jsp util jsputil coerc to long coercetolong is name attribut isnamedattribut els object class return new string quot els string class name classnam get canon name getcanonicalnam return class name classnam apach jasper runtim jsp runtim librari jspruntimelibrari get valu from properti editor manag getvaluefrompropertyeditormanag class name classnam class attr name attrnam quot","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","36","3","27","5","12","6","6","112","112","106","48","112","11","51","0","50","4276","513","3052","544","2354","739","1872","2372","502","1870","22","22","30","20","5","0","502","496","558","210","normal"
"54022","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54022 Ensure Comet END event is triggered on client disconnect with APR/native on Windows Vista/2k8 or later. Patch provided by Douglas Beachy.","Bug 54022  CometEvent.END event is not sent on a suspended socket disconnect when running with Tomcat Native (tcnative-1.dll) on Windows Vista / Windows Server 2008 or newer.","comet event cometev event sent suspend socket disconnect run tomcat nativ tcnativ dll window vista window server newer","","","""java/org/apache/coyote/AbstractProtocol.java""","1","1","2","1","7","0","6","0","3","0","2","65","76","76","16","76","0","1","13","62","800","137","517","180","296","148","226","352","140","212","20","20","25","5","3","0","125","125","130","72","blocker"
"54045","1","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54045. Make sure getMembers() returns available member when TcpFailureDetector works in static cluster.","Bug 54045  ReplicatedMap don't like TcpFailureDetector in static configuration","replic map replicatedmap like tcp failur detector tcpfailuredetector static configur","Tribes stack using:
* TcpPingInterceptor
* TcpFailureDetector
* MessageDispatchInterceptor
* StaticMembershipInterceptor
Do not work well in static cluster.

First side (ie one thread):
* call to TcpFailureDetector.heartbeat()
* call to checkMembers(false)
* call to performBasicCheck() in synchronized(membership)
* in performBasicCheck, for a missing static node:
*   add ""missing"" member to membership with membership.memberAlive(m)
*       HERE THE SECOND THREAD HAVE SOME TIME TO WORK
*   check it with memberAlive(m)
*   remove it since if it doesn't exist

Second side (ie another thread):
* some call to channel.getMembers() like what the done by AbstractReplicatedMap
* this call will call the TcpFailureDetector.getMembers()
* this one could return a wrong value since it can contains unavailable nodes

Note:
* synchronize on membership isn't use by TcpFailureDetector in getMember(), getMembers(), hasMembers(), neither in Membership equivalent method (maybe because it's too heavy to lock every thread while the TcpFailureDetector check if node are alive).

It must not be an issue for AbstractReplicatedMap since with or without TcpFailureDetector a node could disapear while replicated map try to use it.
But ReplicatedMap use always Channel.SEND_OPTIONS_DEFAULT where the value is Channel.SEND_OPTIONS_USE_ACK. So a message sent to a missing node will fail with an exception.

Personnaly I override TcpFailureDetector.heartbeat() to avoid performBasicCheck() if I use a static configuration (TcpPingInterceptor call performForcedCheck()).
But this doesn't fix ReplicatedMap issue.

Better fix could avoid adding missing member to membership list:
* Add a method like memberAlive(MemberImpl) to Membership without side effect (add the member)
* in TcpFailureDetector.performBasicCheck(): check this new method before adding the node


This doesn't fix the AbstractReplicatedMap issue which work always with acknoledge from other nodes.


Same code for Tomcat 6.


best regards
F.Arnoud","tribe stack use tcp ping interceptor tcppinginterceptor tcp failur detector tcpfailuredetector messag dispatch interceptor messagedispatchinterceptor static membership interceptor staticmembershipinterceptor work well static cluster first side ie one thread call tcp failur detector tcpfailuredetector heartbeat call check member checkmemb fals call perform basic check performbasiccheck synchron membership perform basic check performbasiccheck miss static node add miss member membership membership member aliv memberal second thread time work check member aliv memberal remov sinc doesn exist second side ie anoth thread call channel get member getmemb like done abstract replic map abstractreplicatedmap call call tcp failur detector tcpfailuredetector get member getmemb one could return wrong valu sinc contain unavail node note synchron membership isn use tcp failur detector tcpfailuredetector get member getmemb get member getmemb ha member hasmemb neither membership equival method mayb heavi lock everi thread tcp failur detector tcpfailuredetector check node aliv must issu abstract replic map abstractreplicatedmap sinc without tcp failur detector tcpfailuredetector node could disapear replic map tri use replic map replicatedmap use alway channel send option default valu channel send option use ack messag sent miss node fail except personnali overrid tcp failur detector tcpfailuredetector heartbeat avoid perform basic check performbasiccheck use static configur tcp ping interceptor tcppinginterceptor call perform forc check performforcedcheck doesn fix replic map replicatedmap issu better fix could avoid ad miss member membership list add method like member aliv memberal member impl memberimpl membership without side effect add member tcp failur detector tcpfailuredetector perform basic check performbasiccheck check new method ad node doesn fix abstract replic map abstractreplicatedmap issu work alway acknoledg node code tomcat best regard arnoud","""java/org/apache/catalina/tribes/group/interceptors/TcpFailureDetector.java""","2","2","3","1","10","0","9","1","1","1","2","25","25","24","8","25","0","0","5","20","375","48","271","86","160","71","137","212","78","134","10","10","13","7","3","0","73","73","80","31","major"
"54054","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54054 Shell environment should not be static","Bug 54054  2 CGIServlet's with different Parameter passShellEnvironment","servlet cgiservlet differ paramet pa shell environ passshellenviron","","","""java/org/apache/catalina/servlets/CGIServlet.java""","4","4","5","1","45","4","27","14","5","0","8","32","32","32","26","32","1","3","24","4","1918","241","944","220","696","744","514","663","196","467","28","28","31","7","5","1","153","148","178","45","normal"
"54067","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54067 1xx response codes do not have an entity body. Prior to this fix 101 responses (HTTP upgrade) included ""Transfer-encoding: chunked"" which does not make much sense.","Bug 54067  Upgrade Response with Transfer-Encoding: chunked invalid","upgrad respons transfer encod chunk invalid","","","""java/org/apache/coyote/http11/AbstractHttp11Processor.java""","4","4","5","2","28","2","19","6","1","0","1","44","59","59","26","59","2","6","19","32","1634","257","958","205","671","430","480","686","196","490","36","36","50","15","4","0","214","212","261","95","normal"
"54068","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54068 Re-write the fragment ordering algorithm to over come multiple problems. Expand the unit tests to cover the identified issues.","Bug 54068  Web fragment sorting incorrectly detects circular reference","web fragment sort incorrectli detect circular refer","","","""test/org/apache/catalina/deploy/TestWebXmlOrdering.java""","1","1","1","1","18","2","15","0","1","0","0","11","11","11","8","11","0","0","0","11","267","40","199","66","141","28","155","171","55","116","2","2","2","1","1","0","15","15","15","11","normal"
"54068","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54068 Re-write the fragment ordering algorithm to over come multiple problems. Expand the unit tests to cover the identified issues.","Bug 54068  Web fragment sorting incorrectly detects circular reference","web fragment sort incorrectli detect circular refer","","","""java/org/apache/catalina/deploy/WebXml.java""","4","4","5","2","21","1","18","1","1","9","6","90","90","81","40","90","0","8","0","82","2199","168","1788","237","1317","247","734","1284","345","939","116","116","119","89","6","0","419","419","458","227","normal"
"54076","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54076 Work-around that enables HTTP keep-alive to be deisabled for specified user agents using SPNEGO.","Bug 54076  SPNEGO authenticator's stateless-ness incompatible with stateful clients","spnego authent stateless ness stateless incompat state client","","","""java/org/apache/catalina/authenticator/SpnegoAuthenticator.java""","4","4","4","2","26","2","21","2","2","0","1","8","8","8","2","8","0","0","2","6","274","33","196","56","125","45","96","129","48","81","24","24","24","12","2","0","33","33","33","19","major"
"54087","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54087 Ignore invalid If-Modified-Since header as per RFC2616-14.25.a","Bug 54087  HTTP Connector incorrectly throws Exception on Invalid If-Modified-Since Header","http connector incorrectli throw except invalid modifi sinc header","","","""java/javax/servlet/http/HttpServlet.java""","2","2","2","1","22","1","9","12","3","1","14","30","30","29","4","30","4","3","9","14","874","100","328","135","192","446","166","241","105","136","19","19","19","1","3","1","72","72","75","30","normal"
"54095","340","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54095 Add support to the Default Servlet for serving gzipped versions of static resources directly from disk as an alternative to Tomcat compressing them on each request. Patch by Philippe Marschall.","Bug 54095  [patch] support gzipped versions of static resources by DefaultServlet","patch support gzip version static resourc default servlet defaultservlet","","","""java/org/apache/catalina/servlets/DefaultServlet.java""","5","5","7","2","48","6","30","11","2","0","7","35","35","35","16","35","0","0","32","3","2030","360","1143","315","821","529","563","776","238","538","45","45","60","14","5","0","209","209","250","103","enhancement"
"54095","340","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54095 Add support to the Default Servlet for serving gzipped versions of static resources directly from disk as an alternative to Tomcat compressing them on each request. Patch by Philippe Marschall.","Bug 54095  [patch] support gzipped versions of static resources by DefaultServlet","patch support gzip version static resourc default servlet defaultservlet","","","""test/org/apache/catalina/servlets/TestDefaultServlet.java""","1","1","1","1","35","5","26","7","2","1","0","7","7","6","0","7","0","0","0","7","311","51","217","76","160","66","132","146","61","85","2","2","3","1","1","0","9","9","11","7","enhancement"
"54095","340","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54095 Add support to the Default Servlet for serving gzipped versions of static resources directly from disk as an alternative to Tomcat compressing them on each request. Patch by Philippe Marschall.","Bug 54095  [patch] support gzipped versions of static resources by DefaultServlet","patch support gzip version static resourc default servlet defaultservlet","","","""test/org/apache/catalina/servlets/TestDefaultServlet.java""","1","1","1","1","35","5","26","7","2","1","0","7","7","6","0","7","0","0","0","7","311","51","217","76","160","66","132","146","61","85","2","2","3","1","1","0","9","9","11","7","enhancement"
"54096","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54096 env-entry can use any type that has a String or char constructor","Bug 54096  env-entry rejects legal types","env entri enventri reject legal type","In servlet 3.0 the type in an env-entry can be any type which has a public constructor taking a single String (or character) as an argument. Tomcat only accepts a fixed list of types (see NamingContextListener from line 813).

This is legal in web.xml but not accepted by tomcat:

<env-entry>
  <env-entry-name>location</env-entry-name>
  <env-entry-type>java.io.File</env-entry-type>
  <env-entry-value>/var/lib/tomcat</env-entry-value>
</env-entry>","servlet type env entri enventri type public constructor take singl string charact argument tomcat accept fix list type see name context listen namingcontextlisten line legal web xml accept tomcat env entri enventri env entri name enventrynam locat env entri name enventrynam env entri type enventrytyp java file env entri type enventrytyp env entri valu enventryvalu lib tomcat env entri valu enventryvalu env entri enventri","""java/org/apache/catalina/core/NamingContextListener.java""","7","7","7","1","38","4","28","5","1","0","2","26","26","26","10","26","0","3","1","22","1236","213","819","216","564","204","371","571","193","378","36","36","36","7","4","0","201","201","203","32","normal"
"54096","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54096 env-entry can use any type that has a String or char constructor","Bug 54096  env-entry rejects legal types","env entri enventri reject legal type","In servlet 3.0 the type in an env-entry can be any type which has a public constructor taking a single String (or character) as an argument. Tomcat only accepts a fixed list of types (see NamingContextListener from line 813).

This is legal in web.xml but not accepted by tomcat:

<env-entry>
  <env-entry-name>location</env-entry-name>
  <env-entry-type>java.io.File</env-entry-type>
  <env-entry-value>/var/lib/tomcat</env-entry-value>
</env-entry>","servlet type env entri enventri type public constructor take singl string charact argument tomcat accept fix list type see name context listen namingcontextlisten line legal web xml accept tomcat env entri enventri env entri name enventrynam locat env entri name enventrynam env entri type enventrytyp java file env entri type enventrytyp env entri valu enventryvalu lib tomcat env entri valu enventryvalu env entri enventri","""test/org/apache/catalina/core/TestNamingContextListener.java""","1","1","1","1","14","2","10","2","2","0","2","3","3","3","0","3","0","0","0","3","90","18","50","29","21","22","30","37","24","13","3","3","3","1","2","0","5","5","5","3","normal"
"54096","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54096 env-entry can use any type that has a String or char constructor","Bug 54096  env-entry rejects legal types","env entri enventri reject legal type","In servlet 3.0 the type in an env-entry can be any type which has a public constructor taking a single String (or character) as an argument. Tomcat only accepts a fixed list of types (see NamingContextListener from line 813).

This is legal in web.xml but not accepted by tomcat:

<env-entry>
  <env-entry-name>location</env-entry-name>
  <env-entry-type>java.io.File</env-entry-type>
  <env-entry-value>/var/lib/tomcat</env-entry-value>
</env-entry>","servlet type env entri enventri type public constructor take singl string charact argument tomcat accept fix list type see name context listen namingcontextlisten line legal web xml accept tomcat env entri enventri env entri name enventrynam locat env entri name enventrynam env entri type enventrytyp java file env entri type enventrytyp env entri valu enventryvalu lib tomcat env entri valu enventryvalu env entri enventri","""test/org/apache/catalina/core/TestNamingContextListener.java""","1","1","1","1","14","2","10","2","2","0","2","3","3","3","0","3","0","0","0","3","90","18","50","29","21","22","30","37","24","13","3","3","3","1","2","0","5","5","5","3","normal"
"54115","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54115 Minor enhancements to HttpClient test helper class Patch by Brian Burch","Bug 54115  Minor enhancements to HttpClient test helper class","minor enhanc http client httpclient helper class","","","""test/org/apache/catalina/startup/SimpleHttpClient.java""","1","1","1","1","6","0","5","0","1","0","24","38","39","39","16","39","0","4","1","34","398","63","278","119","150","57","151","209","112","97","6","6","7","1","3","0","56","56","58","38","enhancement"
"54123","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54123 There are two things going on here: 1. The reported bug. If there is a async timeout and no async listeners, trigger a 500 response. 2. Implement ""error dispatch"". This is used a couple of times in the spec without any definition. The implication from the part of the spec quoted in the bug report is:    - The standard error page mechanism should be used to identify the page    - An async request that has been started should be left in async mode when forwarding to the error page    - The error page may call complete() or dispatch() This commit hooks into the StandardHostValve to access the error page mechanism. I could have copied and pasted but I preferred the dependency on StandardHostValve Because the error page may do a dispatch(), need to ensure that when running the dispatch(), the error page mechanism is not triggered a second time. Depending on what emerges running the full unit tests and the TCK, I mat still decide to copy the error page code to AsyncContextImpl","Bug 54123  servlet 3.0 spec violation in async timeout processing","servlet spec violat async timeout process","","","""java/org/apache/catalina/core/AsyncContextImpl.java""","2","2","2","1","12","0","12","0","6","0","3","34","34","34","13","34","1","3","1","29","574","60","489","166","304","25","255","346","141","205","7","7","7","3","3","0","80","80","80","36","major"
"54123","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54123 There are two things going on here: 1. The reported bug. If there is a async timeout and no async listeners, trigger a 500 response. 2. Implement ""error dispatch"". This is used a couple of times in the spec without any definition. The implication from the part of the spec quoted in the bug report is:    - The standard error page mechanism should be used to identify the page    - An async request that has been started should be left in async mode when forwarding to the error page    - The error page may call complete() or dispatch() This commit hooks into the StandardHostValve to access the error page mechanism. I could have copied and pasted but I preferred the dependency on StandardHostValve Because the error page may do a dispatch(), need to ensure that when running the dispatch(), the error page mechanism is not triggered a second time. Depending on what emerges running the full unit tests and the TCK, I mat still decide to copy the error page code to AsyncContextImpl","Bug 54123  servlet 3.0 spec violation in async timeout processing","servlet spec violat async timeout process","","","""java/org/apache/coyote/AsyncStateMachine.java""","1","1","2","1","8","0","7","0","4","0","1","25","23","25","17","25","1","1","0","23","378","49","230","63","137","99","87","136","46","90","7","7","8","7","3","0","47","47","54","33","major"
"54123","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54123 There are two things going on here: 1. The reported bug. If there is a async timeout and no async listeners, trigger a 500 response. 2. Implement ""error dispatch"". This is used a couple of times in the spec without any definition. The implication from the part of the spec quoted in the bug report is:    - The standard error page mechanism should be used to identify the page    - An async request that has been started should be left in async mode when forwarding to the error page    - The error page may call complete() or dispatch() This commit hooks into the StandardHostValve to access the error page mechanism. I could have copied and pasted but I preferred the dependency on StandardHostValve Because the error page may do a dispatch(), need to ensure that when running the dispatch(), the error page mechanism is not triggered a second time. Depending on what emerges running the full unit tests and the TCK, I mat still decide to copy the error page code to AsyncContextImpl","Bug 54123  servlet 3.0 spec violation in async timeout processing","servlet spec violat async timeout process","","","""java/org/apache/catalina/core/StandardHostValve.java""","5","5","5","1","43","4","26","12","2","1","5","9","9","8","2","9","1","4","0","4","511","81","283","78","182","147","129","180","61","119","12","12","15","5","4","1","49","49","53","17","major"
"54123","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54123 There are two things going on here: 1. The reported bug. If there is a async timeout and no async listeners, trigger a 500 response. 2. Implement ""error dispatch"". This is used a couple of times in the spec without any definition. The implication from the part of the spec quoted in the bug report is:    - The standard error page mechanism should be used to identify the page    - An async request that has been started should be left in async mode when forwarding to the error page    - The error page may call complete() or dispatch() This commit hooks into the StandardHostValve to access the error page mechanism. I could have copied and pasted but I preferred the dependency on StandardHostValve Because the error page may do a dispatch(), need to ensure that when running the dispatch(), the error page mechanism is not triggered a second time. Depending on what emerges running the full unit tests and the TCK, I mat still decide to copy the error page code to AsyncContextImpl","Bug 54123  servlet 3.0 spec violation in async timeout processing","servlet spec violat async timeout process","","","""test/org/apache/catalina/core/TestAsyncContextImpl.java""","1","1","1","1","14","1","11","1","31","0","31","84","84","84","16","84","0","4","18","62","1456","299","1040","443","650","133","578","721","339","382","8","8","10","1","2","0","124","124","131","84","major"
"54123","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54123 There are two things going on here: 1. The reported bug. If there is a async timeout and no async listeners, trigger a 500 response. 2. Implement ""error dispatch"". This is used a couple of times in the spec without any definition. The implication from the part of the spec quoted in the bug report is:    - The standard error page mechanism should be used to identify the page    - An async request that has been started should be left in async mode when forwarding to the error page    - The error page may call complete() or dispatch() This commit hooks into the StandardHostValve to access the error page mechanism. I could have copied and pasted but I preferred the dependency on StandardHostValve Because the error page may do a dispatch(), need to ensure that when running the dispatch(), the error page mechanism is not triggered a second time. Depending on what emerges running the full unit tests and the TCK, I mat still decide to copy the error page code to AsyncContextImpl","Bug 54123  servlet 3.0 spec violation in async timeout processing","servlet spec violat async timeout process","","","""test/org/apache/catalina/core/TestAsyncContextImpl.java""","1","1","1","1","14","1","11","1","31","0","31","84","84","84","16","84","0","4","18","62","1456","299","1040","443","650","133","578","721","339","382","8","8","10","1","2","0","124","124","131","84","major"
"54124","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54124 Correct ASYNC_REQUEST_URI. Addition of query string appears to be left over debug code Add missing ASYNC_PATH_INFO which appears to be an oversight.","Bug 54124  wrong javax.servlet.async.request_uri information and javax.servlet.async.path_info is missing","wrong javax servlet async request uri inform javax servlet async path info miss","As it is clearly shown that

org.apache.catalina.core.AsyncContextImpl.dispatch(ServletContext, String)

    @Override
    public void dispatch(ServletContext context, String path) {
        if (log.isDebugEnabled()) {
            logDebug(""dispatch   "");
        }
        check();
        if (request.getAttribute(ASYNC_REQUEST_URI)==null) {
            request.setAttribute(ASYNC_REQUEST_URI, request.getRequestURI()+""?""+request.getQueryString());
            request.setAttribute(ASYNC_CONTEXT_PATH, request.getContextPath());
            request.setAttribute(ASYNC_SERVLET_PATH, request.getServletPath());
            request.setAttribute(ASYNC_QUERY_STRING, request.getQueryString());
        }
        ....
    }

the value of ASYNC_REQUEST_URI is not the same as request.getRequestURI().
They must be equal to each other as defined by Servlet 3.0, 9.7.2
Dispatched Request Parameters.

And ASYNC_PATH_INFO is missing.","clearli shown apach catalina core async context impl asynccontextimpl dispatch servlet context servletcontext string overrid public void dispatch servlet context servletcontext context string path log is debug enabl isdebugen log debug logdebug dispatch check request get attribut getattribut async request uri null request set attribut setattribut async request uri request get request getrequesturi request get queri string getquerystr request set attribut setattribut async context path request get context path getcontextpath request set attribut setattribut async servlet path request get servlet path getservletpath request set attribut setattribut async queri string request get queri string getquerystr valu async request uri request get request getrequesturi must equal defin servlet dispatch request paramet async path info miss","""java/org/apache/catalina/core/AsyncContextImpl.java""","2","2","2","1","13","0","12","0","6","0","3","34","34","34","13","34","1","3","1","29","593","63","504","170","314","26","262","356","145","211","7","7","8","3","3","0","83","83","84","36","normal"
"54127","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54127 Add support for sending a WebSocket ping Patch provided by Sean Winterberger","Bug 54127  WsOutbound is missing a ping method","outbound wsoutbound miss ping method","","","""java/org/apache/catalina/websocket/WsOutbound.java""","3","3","4","1","23","1","14","7","1","0","2","14","14","14","6","14","0","4","1","9","407","55","228","43","151","124","110","157","36","121","7","7","12","1","2","1","47","47","58","14","enhancement"
"54141","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54141 Increase the maximum number of supported nested realm levels from 2 to 3 and make the maximum configurable via a system property.","Bug 54141  Configuration does not allow Realms to be nested more than 2 levels deep","configur allow realm nest level deep","","","""java/org/apache/catalina/startup/RealmRuleSet.java""","1","1","1","1","15","1","7","7","1","0","0","3","3","3","1","3","0","0","0","3","105","26","30","9","17","51","13","17","8","9","1","1","1","1","0","2","3","3","3","3","normal"
"54143","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54143 Add display of memory pools usage (including PermGen) to the Status page of the Manager web application.","Bug 54143  Add display of PermGen memory pool usage to the Status page of the Manager webapp","add display perm gen permgen memori pool usag statu page manag webapp","","","""java/org/apache/catalina/manager/StatusTransformer.java""","5","5","5","1","42","3","33","5","1","20","0","20","20","0","0","20","0","0","2","18","940","128","695","139","540","127","388","491","101","390","21","14","23","4","4","0","112","102","115","28","enhancement"
"54144","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54144 Add required behaviour for Reader objects when used with c:out","Bug 54144  Processing of java.io.Reader in ""Out"" tagplugin","process java reader tagplugin","","","""java/org/apache/jasper/tagplugins/jstl/core/Out.java""","3","3","3","1","35","3","27","5","1","1","0","2","2","1","0","2","0","0","0","2","103","15","62","16","45","26","41","48","14","34","4","4","4","1","2","0","7","7","7","2","minor"
"54144","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54144 Add required behaviour for Reader objects when used with c:out","Bug 54144  Processing of java.io.Reader in ""Out"" tagplugin","process java reader tagplugin","","","""test/org/apache/jasper/tagplugins/jstl/core/TestOut.java""","1","1","1","1","13","3","10","1","1","0","0","2","2","2","0","2","0","0","0","2","57","12","29","18","16","18","19","22","14","8","1","1","1","1","0","1","2","2","2","2","minor"
"54144","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54144 Add required behaviour for Reader objects when used with c:out","Bug 54144  Processing of java.io.Reader in ""Out"" tagplugin","process java reader tagplugin","","","""test/org/apache/jasper/tagplugins/jstl/core/TestOut.java""","1","1","1","1","13","3","10","1","1","0","0","2","2","2","0","2","0","0","0","2","57","12","29","18","16","18","19","22","14","8","1","1","1","1","0","1","2","2","2","2","minor"
"54144","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54144 Add required behaviour for Reader objects when used with c:out","Bug 54144  Processing of java.io.Reader in ""Out"" tagplugin","process java reader tagplugin","","","""java/org/apache/jasper/tagplugins/jstl/Util.java""","2","2","2","1","13","0","8","4","3","6","4","19","19","13","7","19","0","0","0","19","358","46","217","74","124","101","107","161","65","96","8","8","8","5","4","0","52","52","54","34","minor"
"54150","18","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54150 Make sure that SlowQueryReportJmx mbean deregistered during webapp shutdown.","Bug 54150  SlowQueryReportJmx mbean deregistration failure due to NPE - properties not set during pool close callback","slow queri report jmx slowqueryreportjmx mbean deregistr failur due npe properti set pool close callback","Found while debugging version 7.0.29

I found that our SlowQueryReportJmx mbean was not being deregistered during webapp shutdown.  I tracked this down to a NPE.  The interceptor properties are not being set (as is done in setupConnection) prior to the pool close callback.

ConnectionPool.close(boolean) poolClosed callback produces NPE in SlowQueryReportJmx.
{code}
        PoolProperties.InterceptorDefinition[] proxies = getPoolProperties().getJdbcInterceptorsAsArray();
        for (int i=0; i<proxies.length; i++) {
            try {
                proxies[i].getInterceptorClass().newInstance().poolClosed(this);
            }catch (Exception x) {
                log.debug(""Unable to inform interceptor of pool closure."",x);
            }
        }
...
{code}

NPE in SlowQueryReportJmx - null.containsKey

{code}
    public ObjectName getObjectName(Class<?> clazz, String poolName) throws MalformedObjectNameException {
... NPE
        if (getProperties().containsKey(objectNameAttribute)) {
...
{code}

Sounds reasonable to set properties any time you need to instantiate interceptors.
As is done in ConnectionPool.init(PoolConfiguration)

{code}
                JdbcInterceptor interceptor = proxies[i].getInterceptorClass().newInstance();
                interceptor.setProperties(proxies[i].getProperties());
                interceptor.poolStarted(this);
{code}","found debug version found slow queri report jmx slowqueryreportjmx mbean deregist webapp shutdown track npe interceptor properti set done setup connect setupconnect prior pool close callback connect pool connectionpool close boolean pool close poolclos callback produc npe slow queri report jmx slowqueryreportjmx code pool properti poolproperti interceptor definit interceptordefinit proxi get pool properti getpoolproperti get jdbc interceptor array getjdbcinterceptorsasarray int proxi length tri proxi get interceptor class getinterceptorclass new instanc newinst pool close poolclos catch except log debug unabl inform interceptor pool closur code npe slow queri report jmx slowqueryreportjmx null contain key containskey code public object name objectnam get object name getobjectnam class clazz string pool name poolnam throw malform object name except malformedobjectnameexcept npe get properti getproperti contain key containskey object name attribut objectnameattribut code sound reason set properti time need instanti interceptor done connect pool connectionpool init pool configur poolconfigur code jdbc interceptor jdbcinterceptor interceptor proxi get interceptor class getinterceptorclass new instanc newinst interceptor set properti setproperti proxi get properti getproperti interceptor pool start poolstart code","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","3","3","4","1","19","0","13","5","3","6","5","57","57","51","21","57","1","3","18","35","1365","116","853","187","572","424","410","634","184","450","18","18","18","8","6","1","222","222","241","105","normal"
"54178","153","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54178 Protect against AsyncListeners that throw RuntimeExceptions (they should normally only throw IOExceptions). Includes a test case.","Bug 54178  [CVE-2013-2071] runtime exception in onComplete of AsyncListener, will make org.apache.catalina.connector.Request not recycled (orginally reported MESSAGE POST to tomcat, but it called doGet)","cve runtim except on complet oncomplet async listen asynclisten make apach catalina connector request recycl orgin report messag post tomcat call do get doget","one HTTP request use POST method, but in tomcat it calls doGet() what is really strage.

as I only tested in 7.0.23, and 7.0.32. in 7.0.32, 7.0.32 is more reproduceable than 7.0.23.

I know it must be a very strange issue, as tomcat has so many release. I can't believe it if I didn't see it with my own eyes.

so I attache the image.","one http request use post method tomcat call do get doget realli strage test reproduc know must strang issu tomcat mani releas believ didn see eye attach imag","""java/org/apache/catalina/core/AsyncContextImpl.java""","2","2","2","1","14","0","13","0","6","0","3","34","34","34","13","34","1","3","1","29","629","66","535","175","338","28","275","375","150","225","9","9","9","1","4","0","88","88","88","34","normal"
"54178","153","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54178 Protect against AsyncListeners that throw RuntimeExceptions (they should normally only throw IOExceptions). Includes a test case.","Bug 54178  [CVE-2013-2071] runtime exception in onComplete of AsyncListener, will make org.apache.catalina.connector.Request not recycled (orginally reported MESSAGE POST to tomcat, but it called doGet)","cve runtim except on complet oncomplet async listen asynclisten make apach catalina connector request recycl orgin report messag post tomcat call do get doget","one HTTP request use POST method, but in tomcat it calls doGet() what is really strage.

as I only tested in 7.0.23, and 7.0.32. in 7.0.32, 7.0.32 is more reproduceable than 7.0.23.

I know it must be a very strange issue, as tomcat has so many release. I can't believe it if I didn't see it with my own eyes.

so I attache the image.","one http request use post method tomcat call do get doget realli strage test reproduc know must strang issu tomcat mani releas believ didn see eye attach imag","""test/org/apache/catalina/core/TestAsyncContextImpl.java""","1","1","1","1","14","1","11","1","33","0","32","95","93","95","20","95","0","5","19","71","1631","326","1179","487","742","143","646","813","371","442","10","10","12","1","3","0","150","148","157","95","normal"
"54178","153","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54178 Protect against AsyncListeners that throw RuntimeExceptions (they should normally only throw IOExceptions). Includes a test case.","Bug 54178  [CVE-2013-2071] runtime exception in onComplete of AsyncListener, will make org.apache.catalina.connector.Request not recycled (orginally reported MESSAGE POST to tomcat, but it called doGet)","cve runtim except on complet oncomplet async listen asynclisten make apach catalina connector request recycl orgin report messag post tomcat call do get doget","one HTTP request use POST method, but in tomcat it calls doGet() what is really strage.

as I only tested in 7.0.23, and 7.0.32. in 7.0.32, 7.0.32 is more reproduceable than 7.0.23.

I know it must be a very strange issue, as tomcat has so many release. I can't believe it if I didn't see it with my own eyes.

so I attache the image.","one http request use post method tomcat call do get doget realli strage test reproduc know must strang issu tomcat mani releas believ didn see eye attach imag","""test/org/apache/catalina/core/TestAsyncContextImpl.java""","1","1","1","1","14","1","11","1","33","0","32","95","93","95","20","95","0","5","19","71","1631","326","1179","487","742","143","646","813","371","442","10","10","12","1","3","0","150","148","157","95","normal"
"54194","10","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54194 Make sure that connection pool mbean is not registered when jmxEnabled is false.","Bug 54194  NPE in DataSource.registerJmx() although DataSource is created with setJmxEnabled(false)","npe data sourc datasourc regist jmx registerjmx although data sourc datasourc creat set jmx enabl setjmxen fals","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/DataSource.java""","1","1","2","1","10","0","5","4","1","0","1","9","9","9","1","9","0","0","2","7","159","22","71","32","32","66","33","50","28","22","3","3","3","1","2","1","17","17","18","9","minor"
"54198","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54198 Clarify that sendError(int) results in an HTML response.","Bug 54198  Improve HttpServletResponse#sendError(int) JavaDoc description","improv http servlet respons httpservletrespons send error senderror int java doc javadoc descript","This methods calls sendError(int, null) internally. Thus generating a HTML page without a message. This is not mentioned in the docs. One could assume that the response will be empty.

One could duplicate the first paragraph of the sendError(int,String) method and alter it to ""The server defaults to creating the response to look like an HTML-formatted server error page with any specific message, setting the content type to ""text/html"",..."" further ""If an error-page declaration has been made for the web application corresponding to the status code passed in, it will be served back."" (Might need improvement in this case, I am not a native speaker).

Moreover, I would add ""This method is effectively the same as calling sendError(int, null)"". Plus add @see #sendError(int,String).

Though the JavaDocs seems to be a verbatim copy of Oracle's Servlet API, it does not reveal this information explicitly.

Should I provide a patch if that doc is available in svn.apache.org?","method call send error senderror int null intern thu gener html page without messag mention doc one could assum respons empti one could duplic first paragraph send error senderror int string method alter server default creat respons look like format htmlformat server error page specif messag set content type text html error page errorpag declar made web applic correspond statu code pass serv back might need improv case nativ speaker moreov would add method effect call send error senderror int null plu add see send error senderror int string though java doc javadoc seem verbatim copi oracl servlet api reveal inform explicitli provid patch doc avail svn apach","""java/javax/servlet/http/HttpServletResponse.java""","0","0","0","0","0","0","0","0","1","0","41","0","21","21","0","21","0","0","0","21","600","66","71","70","41","463","66","67","67","0","0","0","0","0","0","7","0","0","0","0","enhancement"
"54203","79","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54203 Complete Part javadoc. Content copied from Commons FileUpload with minor changes as necessary.","Bug 54203  Part class missing documentation","part class miss document","","","""java/javax/servlet/http/Part.java""","0","0","0","0","0","0","0","0","1","0","0","0","9","9","0","9","0","0","0","9","44","3","15","14","0","26","13","14","14","0","0","0","0","0","0","2","0","0","0","0","enhancement"
"54207","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54207 Correct package name in Javadoc","Bug 54207  javaURLContextFactory javadoc refers to defunct package names in initial context properties","java context factori javaurlcontextfactori javadoc refer defunct packag name initi context properti","Javadoc for org.apache.naming.java.javaURLContextFactory:

/**
 * Context factory for the ""java:"" namespace.
 * <p>
 * <b>Important note</b> : This factory MUST be associated with the ""java"" URL
 * prefix, which can be done by either :
 * <ul>
 * <li>Adding a 
 * java.naming.factory.url.pkgs=org.apache.catalina.util.naming property
 * to the JNDI properties file</li>
 * <li>Setting an environment variable named Context.URL_PKG_PREFIXES with 
 * its value including the org.apache.catalina.util.naming package name. 
 * More detail about this can be found in the JNDI documentation : 
 * {@link javax.naming.spi.NamingManager#getURLContext(java.lang.String, java.util.Hashtable)}.</li>
 * </ul>
 * 
 * @author Remy Maucherat
 * @version $Id$
 */

org.apache.catalina.util.naming is a very old package name.  The correct name for both TC6 and TC7 is org.apache.naming .","javadoc apach name java java context factori javaurlcontextfactori context factori java namespac import note factori must associ java url prefix done either ul ad java name factori url pkg apach catalina util name properti jndi properti file set environ variabl name context url pkg prefix valu includ apach catalina util name packag name detail found jndi document link javax name spi name manag namingmanag get context geturlcontext java lang string java util hashtabl ul author remi maucherat version id apach catalina util name old packag name correct name c6 tc6 c7 tc7 apach name","""java/org/apache/naming/java/javaURLContextFactory.java""","3","3","4","1","17","0","13","4","1","0","2","2","2","2","0","2","0","0","0","2","124","29","45","23","16","50","17","25","15","10","4","4","5","1","2","1","6","6","8","2","trivial"
"54217","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54217 Prevent PoolCleaner instances retaining references to the ConnectionPool which  may result in a memory leak.","Bug 54217  JDBC connection pool runs out of connections when Context reload=true is enabled in Tomcat","jdbc connect pool run connect context reload true enabl tomcat","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","3","3","4","1","19","0","13","5","3","6","5","57","57","51","22","57","1","3","18","35","1365","116","853","186","572","427","409","634","183","451","18","18","18","8","6","1","223","223","241","105","normal"
"54220","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54220 The ErrorReportValve should only generate an error response if the error flag on the response is true.","Bug 54220  ErrorReportValve invoked on non-error responses too","error report valv errorreportvalv invok non error nonerror respons","","","""java/org/apache/catalina/valves/ErrorReportValve.java""","7","7","8","2","54","6","39","8","1","0","0","4","4","4","0","4","0","0","2","2","285","42","174","34","123","69","100","129","32","97","16","16","19","3","3","0","29","29","35","8","normal"
"54220","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54220 The ErrorReportValve should only generate an error response if the error flag on the response is true.","Bug 54220  ErrorReportValve invoked on non-error responses too","error report valv errorreportvalv invok non error nonerror respons","","","""test/org/apache/catalina/valves/TestErrorReportValve.java""","1","1","1","1","11","2","8","1","2","0","2","2","2","2","0","2","0","0","1","1","69","14","38","26","13","18","24","28","22","6","1","1","1","1","0","0","2","2","2","2","normal"
"54220","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54220 The ErrorReportValve should only generate an error response if the error flag on the response is true.","Bug 54220  ErrorReportValve invoked on non-error responses too","error report valv errorreportvalv invok non error nonerror respons","","","""test/org/apache/catalina/valves/TestErrorReportValve.java""","1","1","1","1","11","2","8","1","2","0","2","2","2","2","0","2","0","0","1","1","69","14","38","26","13","18","24","28","22","6","1","1","1","1","0","0","2","2","2","2","normal"
"54239","70","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54239 Enable applications to use a custom EL interpreter. Based on a patch by Sheldon Shao.","Bug 54239  Extensible EL Interpreter","extens interpret","","","""java/org/apache/jasper/compiler/Generator.java""","4","4","4","1","36","3","27","5","12","6","6","112","112","106","48","112","11","51","0","50","4276","513","3052","544","2354","739","1872","2372","502","1870","22","22","30","20","5","0","502","496","558","210","enhancement"
"54241","29","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54241 Revert the fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=35410 as it is not specification compliant Remove the remainder of the write(String) method as well as it serves no purpose since it is identical to the method it overrides. Add some test cases to confirm the expected/correct behaviour Note: BZ 35410 claims there is no requirement for Object.toString() to be non-null. Many have argued (and I agree) that null is not a String representation and therefore not a valid return value for Object.toString().","Bug 54241  NPE in BodyContentImpl","npe bodi content impl bodycontentimpl","","","""java/org/apache/jasper/runtime/JspWriterImpl.java""","1","1","2","1","11","0","6","5","2","1","1","42","42","41","6","42","2","5","1","34","621","60","307","95","162","254","132","206","64","142","9","9","13","5","3","1","75","75","84","48","major"
"54247","28","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54247 Prevent ClassNotFoundExceptions on stop when running as a service","Bug 54247  Exception in JmxRemoteLifecycleListener.destroyServer","except jmx remot lifecycl listen jmxremotelifecyclelisten destroy server destroyserv","","","""java/org/apache/catalina/startup/Bootstrap.java""","2","2","2","1","18","1","13","3","1","6","4","20","20","14","11","20","0","5","1","14","560","102","339","111","222","119","179","243","92","151","12","12","13","5","3","0","54","54","58","29","normal"
"54248","33","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54248 Need to reset the decoder when the N2C converter is recycled to ensure BOMs are correctly handled for those encodings that require them.","Bug 54248  Retrieving content that contains a BOM via request.getReader() issue","retriev content contain bom via request get reader getread issu","If a request contains Content that includes the BOM - in my case Content-Type: application/xml; charset-utf-16 - and the content has a BOM (FF FE), when fetched utilizing the BufferedReader from getReader() - the first request serviced on the AJP thread works correctly (encoded correctly, only characters fetched), however, any subsequent request on the thread which includes the BOM has the BOM being delivered to the application. It appears via review of the Tomcat code, that the recycle() method in B2CConverter simply ensures the socket's data has been completely flushed and the underlying InputStream doesn't get reset (don't really know if there is a way to do this without re-instantiating it) to ensure subsequent requests BOM is consumed. I proved this as a test by adding a call to reset() within the recycle() method which re-instantiates the underlying InputStreams and the problem resolved itself. 

I've temporarily resolved the issue in my application code by using request.getInputStream() and using request.getCharacterEncoding() and encoding the content inside my application.","request contain content includ bom case content type applic xml charset utf charsetutf content bom ff fe fetch util buffer reader bufferedread get reader getread first request servic ajp thread work correctli encod correctli charact fetch howev subsequ request thread includ bom bom deliv applic appear via review tomcat code recycl method b2 convert b2cconvert simpli ensur socket data complet flush underli input stream inputstream doesn get reset realli know way without re instanti reinstanti ensur subsequ request bom consum prove ad call reset within recycl method re instanti reinstanti underli input stream inputstream problem resolv temporarili resolv issu applic code use request get input stream getinputstream use request get charact encod getcharacterencod encod content insid applic","""java/org/apache/tomcat/util/buf/B2CConverter.java""","1","1","1","1","8","0","6","2","3","2","6","15","15","13","7","15","1","0","0","14","261","43","147","61","64","71","60","92","48","44","8","8","8","4","4","0","25","25","25","18","normal"
"54256","26","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54256 Give the developer a hint as to which JAR file has the broken manifest","Bug 54256  Enhance Exception reporting on JAR file error","enhanc except report jar file error","(I posted this to the mailing list on Oct 28, 2011, but didn't end up creating a report on it until now.  I have the same error with Tomcat 7.)

PROBLEM DESCRIPTION:

I have an exception (appended below), and I think it would be nice to have more information about what is going on.

If I had more context, it would help me find the cause of my problem much more quickly.  For example, if the exception indicated what the file/resource that was having the problem was, it would speed up troubleshooting immensely.

HOW TO REPRODUCE:

In a JAR file contained in WAR file's WEB-INF/lib folder:  Change the MANIFEST.MF file in the JAR file.  Put in a line with ONLY ""Class-Path:"".  Note there is no space after the period, which is what causes the error.  During load of the application, the exception which I have appended at the end of this message will show up.

SUGGESTED IMPROVEMENT:

My suggestion would be to modify ExtensionValidator.validateApplication(...), around line 195.  This is the location that actually knows about what the resource is.  It would be nice if the IOException was caught, and information about the Resource was added to the exception, probably by wrapping the exception.

Because I have not gone through the overhead of getting a version of Tomcat running from source, these changes have not been compiled and tested, but I think the suggestion is relatively straight-forward.

Here are the suggested code changes:

First code change - move the definition of ""resource"" outside of the try/catch:

         // Locate the Manifests for all bundled JARs
         Resource resource = null; // ADDED
         NamingEnumeration<Binding> ne = null;

Second code change - make the existing declaration of ""resource"" just an assignment:

                 resource = (Resource) obj; // MODIFIED
                 inputStream = resource.streamContent();
                 Manifest jmanifest = getManifest(inputStream);

Third code change: add a catch clause and re-throw:

         } catch (NamingException nex) {
             // Jump out of the check for this application because it
             // has no resources
         } catch (IOException ioex) { // ADDED
             throw new IOException(""validation problem in "" + resource.toString(), ioex); // ADDED
         } finally {

The problem is that the resource may not have a proper toString().  I would suggest changing FileDirContext:898 (inner class=FileResource) to have a toString method, something along the lines of:

         public String toString() { // ADDED
             return file == null ? ""null"" : file.toString(); // ADDED
         } // ADDED

Note: about this, in the original email thread, Konstantin Kolinko said:
""Not sure about FileResource.toString(), but adding a catch for IOException looks like doable.""


Finally, here's the exception:

28-Oct-2011 11:03:03 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error in dependencyCheck
java.io.IOException: invalid header field
     at java.util.jar.Attributes.read(Attributes.java:410)
     at java.util.jar.Manifest.read(Manifest.java:199)
     at java.util.jar.JarInputStream.<init>(JarInputStream.java:83)
     at java.util.jar.JarInputStream.<init>(JarInputStream.java:60)
     at org.apache.catalina.util.ExtensionValidator.getManifest(ExtensionValidator.java:394)
     at org.apache.catalina.util.ExtensionValidator.validateApplication(ExtensionValidator.java:195)
     at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5037)
     at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
     at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
     at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
     at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
     at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
     at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
     at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
     at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
     at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
     at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
     at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
     at org.apache.catalina.startup.Catalina.start(Catalina.java:621)
     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
     at java.lang.reflect.Method.invoke(Method.java:616)
     at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
     at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)

(And if only java.util.jar.Attributes.read reported WHICH attribute had the problem, we'd really be in business.)","post mail list oct didn creat report error tomcat problem descript except append think would nice inform go context would help find caus problem much quickli exampl except indic file resourc problem would speed troubleshoot immens reproduc jar file contain file web inf lib folder chang manifest mf file jar file put line class path note space period caus error load applic except append messag show suggest improv suggest would modifi extens valid extensionvalid valid applic validateappl around line locat actual know resourc would nice except ioexcept caught inform resourc ad except probabl wrap except gone overhead get version tomcat run sourc chang compil test think suggest rel straight forward straightforward suggest code chang first code chang move definit resourc outsid tri catch locat manifest bundl jar resourc resourc null ad name enumer namingenumer bind null second code chang make exist declar resourc assign resourc resourc obj modifi input stream inputstream resourc stream content streamcont manifest jmanifest get manifest getmanifest input stream inputstream third code chang add catch claus re throw rethrow catch name except namingexcept nex jump check applic resourc catch except ioexcept ioex ad throw new except ioexcept valid problem resourc to string tostr ioex ad final problem resourc may proper to string tostr would suggest chang file dir context filedircontext inner class file resourc fileresourc to string tostr method someth along line public string to string tostr ad return file null null file to string tostr ad ad note origin email thread konstantin kolinko said sure file resourc fileresourc to string tostr ad catch except ioexcept look like doabl final except oct apach catalina core standard context standardcontext start intern startintern sever error depend check dependencycheck java except ioexcept invalid header field java util jar attribut read attribut java java util jar manifest read manifest java java util jar jar input stream jarinputstream init jar input stream jarinputstream java java util jar jar input stream jarinputstream init jar input stream jarinputstream java apach catalina util extens valid extensionvalid get manifest getmanifest extens valid extensionvalid java apach catalina util extens valid extensionvalid valid applic validateappl extens valid extensionvalid java apach catalina core standard context standardcontext start intern startintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core contain base containerbas start intern startintern contain base containerbas java apach catalina core standard host standardhost start intern startintern standard host standardhost java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core contain base containerbas start intern startintern contain base containerbas java apach catalina core standard engin standardengin start intern startintern standard engin standardengin java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core standard servic standardservic start intern startintern standard servic standardservic java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core standard server standardserv start intern startintern standard server standardserv java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina startup catalina start catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap start bootstrap java apach catalina startup bootstrap main bootstrap java java util jar attribut read report attribut problem realli busi","""java/org/apache/catalina/util/ExtensionValidator.java""","6","6","7","3","46","3","33","10","1","6","4","6","6","0","4","6","0","4","0","2","418","49","244","86","157","125","106","156","69","87","14","14","15","10","5","1","41","41","44","18","normal"
"54260","26","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54260 Avoid NPE when using JSP unloading and tag files.","Bug 54260  JSP unloading - NullPointerException when using "".tag"" files","jsp unload null pointer except nullpointerexcept use tag file","","","""java/org/apache/jasper/util/FastRemovalDequeue.java""","1","1","1","1","10","0","7","2","2","0","0","21","21","21","9","21","0","8","0","13","317","28","178","46","109","111","89","128","45","83","4","4","4","1","2","1","37","37","39","21","normal"
"54262","30","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54262 An empty <absolute-ordering /> should turn off all web-fragments. Based on a patch by  Violeta Georgieva.","Bug 54262  An empty <absolute-ordering /> should turn off all web-fragments","empti absolut order absoluteord turn web fragment webfrag","The use of an <absolute-ordering> element does disable ServletContainerInitializer classpath scanning as discussed also in issue 53619. However, it does seem to require having at least one web-fragment name to be listed. In other words I would this:

<absolute-ordering />

To turn off all web-fragments since none are named. A workaround is to list a web-fragment even if it doesn't exist but that shouldn't be necessary.","use absolut order absoluteord element disabl servlet contain initi servletcontaineriniti classpath scan discuss issu howev seem requir least one web fragment webfrag name list word would absolut order absoluteord turn web fragment webfrag sinc none name workaround list web fragment webfrag even doesn exist shouldn necessari","""test/org/apache/catalina/startup/TestContextConfig.java""","1","1","1","1","10","2","7","0","3","0","1","8","8","8","1","8","0","1","1","6","148","37","92","60","41","22","56","67","47","20","1","1","1","1","0","0","8","8","8","8","normal"
"54262","30","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54262 An empty <absolute-ordering /> should turn off all web-fragments. Based on a patch by  Violeta Georgieva.","Bug 54262  An empty <absolute-ordering /> should turn off all web-fragments","empti absolut order absoluteord turn web fragment webfrag","The use of an <absolute-ordering> element does disable ServletContainerInitializer classpath scanning as discussed also in issue 53619. However, it does seem to require having at least one web-fragment name to be listed. In other words I would this:

<absolute-ordering />

To turn off all web-fragments since none are named. A workaround is to list a web-fragment even if it doesn't exist but that shouldn't be necessary.","use absolut order absoluteord element disabl servlet contain initi servletcontaineriniti classpath scan discuss issu howev seem requir least one web fragment webfrag name list word would absolut order absoluteord turn web fragment webfrag sinc none name workaround list web fragment webfrag even doesn exist shouldn necessari","""java/org/apache/catalina/startup/WebRuleSet.java""","1","1","1","1","20","1","16","2","19","0","1","45","45","45","20","45","0","0","2","43","1290","208","853","177","625","229","386","484","137","347","10","10","14","1","3","0","79","79","84","45","normal"
"54262","30","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54262 An empty <absolute-ordering /> should turn off all web-fragments. Based on a patch by  Violeta Georgieva.","Bug 54262  An empty <absolute-ordering /> should turn off all web-fragments","empti absolut order absoluteord turn web fragment webfrag","The use of an <absolute-ordering> element does disable ServletContainerInitializer classpath scanning as discussed also in issue 53619. However, it does seem to require having at least one web-fragment name to be listed. In other words I would this:

<absolute-ordering />

To turn off all web-fragments since none are named. A workaround is to list a web-fragment even if it doesn't exist but that shouldn't be necessary.","use absolut order absoluteord element disabl servlet contain initi servletcontaineriniti classpath scan discuss issu howev seem requir least one web fragment webfrag name list word would absolut order absoluteord turn web fragment webfrag sinc none name workaround list web fragment webfrag even doesn exist shouldn necessari","""java/org/apache/catalina/deploy/WebXml.java""","4","4","4","2","21","1","18","1","1","13","6","94","94","81","40","94","0","12","0","82","2275","171","1854","258","1358","254","766","1334","362","972","116","116","119","89","6","0","437","437","468","231","normal"
"54284","25","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54284 As per clarification from the Servlet EG, anonymous Filters and Servlets are not permitted. Patch by Violeta Georgieva.","Bug 54284  Util.objectNameValueNeedsQuote throws NPE for anonymous Filters","util object name valu need quot objectnamevalueneedsquot throw npe anonym filter","How to reproduce?

From inside the contextInitialized-Method of an ServletContextListener instance, call

context.addFilter(null,
      new ArbitraryFilter(pathPrefix)).addMappingForUrlPatterns(null, false, pathPrefix);

What happens?

Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter null
java.lang.NullPointerException
        at org.apache.tomcat.util.modeler.Util.objectNameValueNeedsQuote(Util.java:26)
        at org.apache.catalina.core.ApplicationFilterConfig.registerJMX(ApplicationFilterConfig.java:421)
        at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:282)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:108)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5306)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:657)
        at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1637)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error filterStart
Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [] startup failed due to previous errors


What should happen?
Either - if null is not an allowed filter name, throw a IllegalArgumentException on context.addFilter(...)
Or, if it is an allowed filter name, handle null-values gracefully","reproduc insid context initi contextiniti method servlet context listen servletcontextlisten instanc call context add filter addfilt null new arbitrari filter arbitraryfilt path prefix pathprefix add map for url pattern addmappingforurlpattern null fals path prefix pathprefix happen dec pm apach catalina core standard context standardcontext filter start filterstart sever except start filter null java lang null pointer except nullpointerexcept apach tomcat util model util object name valu need quot objectnamevalueneedsquot util java apach catalina core applic filter config applicationfilterconfig regist registerjmx applic filter config applicationfilterconfig java apach catalina core applic filter config applicationfilterconfig init filter initfilt applic filter config applicationfilterconfig java apach catalina core applic filter config applicationfilterconfig init applic filter config applicationfilterconfig java apach catalina core standard context standardcontext filter start filterstart standard context standardcontext java apach catalina core standard context standardcontext start intern startintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig java apach catalina startup host config hostconfig deploy descriptor deploydescriptor run host config hostconfig java java util concurr executor runnabl adapt runnableadapt call executor java java util concurr futur task futuretask sync inner run innerrun futur task futuretask java java util concurr futur task futuretask run futur task futuretask java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java dec pm apach catalina core standard context standardcontext start intern startintern sever error filter start filterstart dec pm apach catalina core standard context standardcontext start intern startintern sever context startup fail due previou error happen either null allow filter name throw illeg argument except illegalargumentexcept context add filter addfilt allow filter name handl null valu nullvalu grace","""java/org/apache/catalina/core/ApplicationContext.java""","2","2","3","2","18","1","11","5","2","0","5","61","61","61","15","61","1","3","4","53","1499","273","830","275","499","396","354","518","202","316","12","12","13","9","3","0","173","173","193","123","normal"
"54284","25","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54284 As per clarification from the Servlet EG, anonymous Filters and Servlets are not permitted. Patch by Violeta Georgieva.","Bug 54284  Util.objectNameValueNeedsQuote throws NPE for anonymous Filters","util object name valu need quot objectnamevalueneedsquot throw npe anonym filter","How to reproduce?

From inside the contextInitialized-Method of an ServletContextListener instance, call

context.addFilter(null,
      new ArbitraryFilter(pathPrefix)).addMappingForUrlPatterns(null, false, pathPrefix);

What happens?

Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter null
java.lang.NullPointerException
        at org.apache.tomcat.util.modeler.Util.objectNameValueNeedsQuote(Util.java:26)
        at org.apache.catalina.core.ApplicationFilterConfig.registerJMX(ApplicationFilterConfig.java:421)
        at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:282)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:108)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5306)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:657)
        at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1637)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error filterStart
Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [] startup failed due to previous errors


What should happen?
Either - if null is not an allowed filter name, throw a IllegalArgumentException on context.addFilter(...)
Or, if it is an allowed filter name, handle null-values gracefully","reproduc insid context initi contextiniti method servlet context listen servletcontextlisten instanc call context add filter addfilt null new arbitrari filter arbitraryfilt path prefix pathprefix add map for url pattern addmappingforurlpattern null fals path prefix pathprefix happen dec pm apach catalina core standard context standardcontext filter start filterstart sever except start filter null java lang null pointer except nullpointerexcept apach tomcat util model util object name valu need quot objectnamevalueneedsquot util java apach catalina core applic filter config applicationfilterconfig regist registerjmx applic filter config applicationfilterconfig java apach catalina core applic filter config applicationfilterconfig init filter initfilt applic filter config applicationfilterconfig java apach catalina core applic filter config applicationfilterconfig init applic filter config applicationfilterconfig java apach catalina core standard context standardcontext filter start filterstart standard context standardcontext java apach catalina core standard context standardcontext start intern startintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig java apach catalina startup host config hostconfig deploy descriptor deploydescriptor run host config hostconfig java java util concurr executor runnabl adapt runnableadapt call executor java java util concurr futur task futuretask sync inner run innerrun futur task futuretask java java util concurr futur task futuretask run futur task futuretask java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java dec pm apach catalina core standard context standardcontext start intern startintern sever error filter start filterstart dec pm apach catalina core standard context standardcontext start intern startintern sever context startup fail due previou error happen either null allow filter name throw illeg argument except illegalargumentexcept context add filter addfilt allow filter name handl null valu nullvalu grace","""java/org/apache/catalina/deploy/FilterDef.java""","1","1","1","1","4","0","3","0","1","0","1","19","19","19","9","19","0","0","0","19","205","58","84","37","37","63","41","62","36","26","2","2","2","1","1","1","20","20","20","19","normal"
"54284","25","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54284 As per clarification from the Servlet EG, anonymous Filters and Servlets are not permitted. Patch by Violeta Georgieva.","Bug 54284  Util.objectNameValueNeedsQuote throws NPE for anonymous Filters","util object name valu need quot objectnamevalueneedsquot throw npe anonym filter","How to reproduce?

From inside the contextInitialized-Method of an ServletContextListener instance, call

context.addFilter(null,
      new ArbitraryFilter(pathPrefix)).addMappingForUrlPatterns(null, false, pathPrefix);

What happens?

Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter null
java.lang.NullPointerException
        at org.apache.tomcat.util.modeler.Util.objectNameValueNeedsQuote(Util.java:26)
        at org.apache.catalina.core.ApplicationFilterConfig.registerJMX(ApplicationFilterConfig.java:421)
        at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:282)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:108)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5306)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:657)
        at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1637)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error filterStart
Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [] startup failed due to previous errors


What should happen?
Either - if null is not an allowed filter name, throw a IllegalArgumentException on context.addFilter(...)
Or, if it is an allowed filter name, handle null-values gracefully","reproduc insid context initi contextiniti method servlet context listen servletcontextlisten instanc call context add filter addfilt null new arbitrari filter arbitraryfilt path prefix pathprefix add map for url pattern addmappingforurlpattern null fals path prefix pathprefix happen dec pm apach catalina core standard context standardcontext filter start filterstart sever except start filter null java lang null pointer except nullpointerexcept apach tomcat util model util object name valu need quot objectnamevalueneedsquot util java apach catalina core applic filter config applicationfilterconfig regist registerjmx applic filter config applicationfilterconfig java apach catalina core applic filter config applicationfilterconfig init filter initfilt applic filter config applicationfilterconfig java apach catalina core applic filter config applicationfilterconfig init applic filter config applicationfilterconfig java apach catalina core standard context standardcontext filter start filterstart standard context standardcontext java apach catalina core standard context standardcontext start intern startintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig java apach catalina startup host config hostconfig deploy descriptor deploydescriptor run host config hostconfig java java util concurr executor runnabl adapt runnableadapt call executor java java util concurr futur task futuretask sync inner run innerrun futur task futuretask java java util concurr futur task futuretask run futur task futuretask java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java dec pm apach catalina core standard context standardcontext start intern startintern sever error filter start filterstart dec pm apach catalina core standard context standardcontext start intern startintern sever context startup fail due previou error happen either null allow filter name throw illeg argument except illegalargumentexcept context add filter addfilt allow filter name handl null valu nullvalu grace","""java/org/apache/catalina/deploy/ServletDef.java""","1","1","1","1","3","0","3","0","1","0","1","30","30","30","15","30","0","0","0","30","269","71","117","53","48","81","53","85","53","32","2","2","2","1","1","1","31","31","31","30","normal"
"54284","25","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54284 As per clarification from the Servlet EG, anonymous Filters and Servlets are not permitted. Patch by Violeta Georgieva.","Bug 54284  Util.objectNameValueNeedsQuote throws NPE for anonymous Filters","util object name valu need quot objectnamevalueneedsquot throw npe anonym filter","How to reproduce?

From inside the contextInitialized-Method of an ServletContextListener instance, call

context.addFilter(null,
      new ArbitraryFilter(pathPrefix)).addMappingForUrlPatterns(null, false, pathPrefix);

What happens?

Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter null
java.lang.NullPointerException
        at org.apache.tomcat.util.modeler.Util.objectNameValueNeedsQuote(Util.java:26)
        at org.apache.catalina.core.ApplicationFilterConfig.registerJMX(ApplicationFilterConfig.java:421)
        at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:282)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:108)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5306)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:657)
        at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1637)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error filterStart
Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [] startup failed due to previous errors


What should happen?
Either - if null is not an allowed filter name, throw a IllegalArgumentException on context.addFilter(...)
Or, if it is an allowed filter name, handle null-values gracefully","reproduc insid context initi contextiniti method servlet context listen servletcontextlisten instanc call context add filter addfilt null new arbitrari filter arbitraryfilt path prefix pathprefix add map for url pattern addmappingforurlpattern null fals path prefix pathprefix happen dec pm apach catalina core standard context standardcontext filter start filterstart sever except start filter null java lang null pointer except nullpointerexcept apach tomcat util model util object name valu need quot objectnamevalueneedsquot util java apach catalina core applic filter config applicationfilterconfig regist registerjmx applic filter config applicationfilterconfig java apach catalina core applic filter config applicationfilterconfig init filter initfilt applic filter config applicationfilterconfig java apach catalina core applic filter config applicationfilterconfig init applic filter config applicationfilterconfig java apach catalina core standard context standardcontext filter start filterstart standard context standardcontext java apach catalina core standard context standardcontext start intern startintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig java apach catalina startup host config hostconfig deploy descriptor deploydescriptor run host config hostconfig java java util concurr executor runnabl adapt runnableadapt call executor java java util concurr futur task futuretask sync inner run innerrun futur task futuretask java java util concurr futur task futuretask run futur task futuretask java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java dec pm apach catalina core standard context standardcontext start intern startintern sever error filter start filterstart dec pm apach catalina core standard context standardcontext start intern startintern sever context startup fail due previou error happen either null allow filter name throw illeg argument except illegalargumentexcept context add filter addfilt allow filter name handl null valu nullvalu grace","""test/org/apache/catalina/core/TestApplicationContext.java""","2","2","2","1","18","4","13","2","1","0","0","2","2","2","0","2","0","0","0","2","72","16","38","24","20","20","24","30","21","9","3","3","3","1","2","1","4","4","4","2","normal"
"54284","25","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54284 As per clarification from the Servlet EG, anonymous Filters and Servlets are not permitted. Patch by Violeta Georgieva.","Bug 54284  Util.objectNameValueNeedsQuote throws NPE for anonymous Filters","util object name valu need quot objectnamevalueneedsquot throw npe anonym filter","How to reproduce?

From inside the contextInitialized-Method of an ServletContextListener instance, call

context.addFilter(null,
      new ArbitraryFilter(pathPrefix)).addMappingForUrlPatterns(null, false, pathPrefix);

What happens?

Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter null
java.lang.NullPointerException
        at org.apache.tomcat.util.modeler.Util.objectNameValueNeedsQuote(Util.java:26)
        at org.apache.catalina.core.ApplicationFilterConfig.registerJMX(ApplicationFilterConfig.java:421)
        at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:282)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:108)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5306)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:657)
        at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1637)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error filterStart
Dec 12, 2012 3:59:03 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [] startup failed due to previous errors


What should happen?
Either - if null is not an allowed filter name, throw a IllegalArgumentException on context.addFilter(...)
Or, if it is an allowed filter name, handle null-values gracefully","reproduc insid context initi contextiniti method servlet context listen servletcontextlisten instanc call context add filter addfilt null new arbitrari filter arbitraryfilt path prefix pathprefix add map for url pattern addmappingforurlpattern null fals path prefix pathprefix happen dec pm apach catalina core standard context standardcontext filter start filterstart sever except start filter null java lang null pointer except nullpointerexcept apach tomcat util model util object name valu need quot objectnamevalueneedsquot util java apach catalina core applic filter config applicationfilterconfig regist registerjmx applic filter config applicationfilterconfig java apach catalina core applic filter config applicationfilterconfig init filter initfilt applic filter config applicationfilterconfig java apach catalina core applic filter config applicationfilterconfig init applic filter config applicationfilterconfig java apach catalina core standard context standardcontext filter start filterstart standard context standardcontext java apach catalina core standard context standardcontext start intern startintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy descriptor deploydescriptor host config hostconfig java apach catalina startup host config hostconfig deploy descriptor deploydescriptor run host config hostconfig java java util concurr executor runnabl adapt runnableadapt call executor java java util concurr futur task futuretask sync inner run innerrun futur task futuretask java java util concurr futur task futuretask run futur task futuretask java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java dec pm apach catalina core standard context standardcontext start intern startintern sever error filter start filterstart dec pm apach catalina core standard context standardcontext start intern startintern sever context startup fail due previou error happen either null allow filter name throw illeg argument except illegalargumentexcept context add filter addfilt allow filter name handl null valu nullvalu grace","""test/org/apache/catalina/core/TestApplicationContext.java""","2","2","2","1","18","4","13","2","1","0","0","2","2","2","0","2","0","0","0","2","72","16","38","24","20","20","24","30","21","9","3","3","3","1","2","1","4","4","4","2","normal"
"54324","29","Christopher Schultz","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54324","Bug 54324  Support is required to disable TLS compression to prevent against CRIME attacks","support requir disabl tl compress prevent crime attack","","","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","15","0","11","3","14","1","1","106","107","106","74","107","1","4","13","89","2193","275","1398","349","947","522","683","1037","323","714","40","40","56","9","8","0","332","332","381","147","major"
"54324","29","Christopher Schultz","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54324","Bug 54324  Support is required to disable TLS compression to prevent against CRIME attacks","support requir disabl tl compress prevent crime attack","","","""java/org/apache/coyote/http11/Http11AprProtocol.java""","1","1","1","1","4","0","2","1","2","0","1","55","55","55","2","55","1","0","9","45","344","64","191","101","111","89","103","169","77","92","5","5","6","4","3","0","64","64","66","58","major"
"54324","29","Christopher Schultz","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54324","Bug 54324  Support is required to disable TLS compression to prevent against CRIME attacks","support requir disabl tl compress prevent crime attack","","","""java/org/apache/tomcat/jni/SSL.java""","0","0","0","0","0","0","0","0","1","16","121","0","16","0","0","16","0","0","0","16","352","38","142","141","121","172","138","139","139","0","0","0","0","0","0","1","0","0","0","0","major"
"54370","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54370 Improve handling of nulls when trying to match sets of parameters to a method in EL.","Bug 54370  NPE mapping method in EL","npe map method","","","""java/org/apache/el/util/ReflectionUtil.java""","6","6","7","3","28","1","22","4","1","9","2","10","10","1","0","10","0","4","2","4","346","35","246","53","164","65","113","181","55","126","27","27","32","16","7","0","64","64","70","34","normal"
"54377","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54377 Correctly set request attributes for AccessLog in RemoteIpFilter Patch by Violeta Georgieva","Bug 54377  RemoteIpFilter does not correctly set request attributes for AccessLog","remot ip filter remoteipfilt correctli set request attribut access log accesslog","In RemoteIpFilter class, there is code that publishes the new request attributes to AccessLog (see below).

821             if (requestAttributesEnabled) {
822                 request.setAttribute(AccessLog.REMOTE_ADDR_ATTRIBUTE,
823                         request.getRemoteAddr());
824                 request.setAttribute(AccessLog.REMOTE_HOST_ATTRIBUTE,
825                         request.getRemoteHost());
826                 request.setAttribute(AccessLog.PROTOCOL_ATTRIBUTE,
827                         request.getProtocol());
828                 request.setAttribute(AccessLog.SERVER_PORT_ATTRIBUTE,
829                         Integer.valueOf(request.getServerPort()));
830             }

The problem is that the source values should come from xRequest, e.g. xRequest.getRemoteAddr() and xRequest.getRemoteHost(), etc.

As it is written above, RemoteIpFilter simply republishes the current values, and AccessLog therefore does not display the correct values.","remot ip filter remoteipfilt class code publish new request attribut access log accesslog see request attribut enabl requestattributesen request set attribut setattribut access log accesslog remot addr attribut request get remot addr getremoteaddr request set attribut setattribut access log accesslog remot host attribut request get remot host getremotehost request set attribut setattribut access log accesslog protocol attribut request get protocol getprotocol request set attribut setattribut access log accesslog server port attribut integ valu of valueof request get server port getserverport problem sourc valu request xrequest request xrequest get remot addr getremoteaddr request xrequest get remot host getremotehost etc written remot ip filter remoteipfilt simpli republish current valu access log accesslog therefor display correct valu","""java/org/apache/catalina/filters/RemoteIpFilter.java""","2","2","2","1","10","0","7","2","3","2","13","50","50","48","18","50","0","1","4","45","1137","106","453","152","251","579","208","308","142","166","18","18","20","5","3","1","103","103","113","56","minor"
"54377","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54377 Correctly set request attributes for AccessLog in RemoteIpFilter Patch by Violeta Georgieva","Bug 54377  RemoteIpFilter does not correctly set request attributes for AccessLog","remot ip filter remoteipfilt correctli set request attribut access log accesslog","In RemoteIpFilter class, there is code that publishes the new request attributes to AccessLog (see below).

821             if (requestAttributesEnabled) {
822                 request.setAttribute(AccessLog.REMOTE_ADDR_ATTRIBUTE,
823                         request.getRemoteAddr());
824                 request.setAttribute(AccessLog.REMOTE_HOST_ATTRIBUTE,
825                         request.getRemoteHost());
826                 request.setAttribute(AccessLog.PROTOCOL_ATTRIBUTE,
827                         request.getProtocol());
828                 request.setAttribute(AccessLog.SERVER_PORT_ATTRIBUTE,
829                         Integer.valueOf(request.getServerPort()));
830             }

The problem is that the source values should come from xRequest, e.g. xRequest.getRemoteAddr() and xRequest.getRemoteHost(), etc.

As it is written above, RemoteIpFilter simply republishes the current values, and AccessLog therefore does not display the correct values.","remot ip filter remoteipfilt class code publish new request attribut access log accesslog see request attribut enabl requestattributesen request set attribut setattribut access log accesslog remot addr attribut request get remot addr getremoteaddr request set attribut setattribut access log accesslog remot host attribut request get remot host getremotehost request set attribut setattribut access log accesslog protocol attribut request get protocol getprotocol request set attribut setattribut access log accesslog server port attribut integ valu of valueof request get server port getserverport problem sourc valu request xrequest request xrequest get remot addr getremoteaddr request xrequest get remot host getremotehost etc written remot ip filter remoteipfilt simpli republish current valu access log accesslog therefor display correct valu","""test/org/apache/catalina/filters/TestRemoteIpFilter.java""","1","1","1","1","16","3","12","1","4","0","2","26","26","26","2","26","0","1","0","25","562","124","377","179","259","62","295","327","161","166","2","2","2","1","1","0","29","29","29","26","minor"
"54377","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54377 Correctly set request attributes for AccessLog in RemoteIpFilter Patch by Violeta Georgieva","Bug 54377  RemoteIpFilter does not correctly set request attributes for AccessLog","remot ip filter remoteipfilt correctli set request attribut access log accesslog","In RemoteIpFilter class, there is code that publishes the new request attributes to AccessLog (see below).

821             if (requestAttributesEnabled) {
822                 request.setAttribute(AccessLog.REMOTE_ADDR_ATTRIBUTE,
823                         request.getRemoteAddr());
824                 request.setAttribute(AccessLog.REMOTE_HOST_ATTRIBUTE,
825                         request.getRemoteHost());
826                 request.setAttribute(AccessLog.PROTOCOL_ATTRIBUTE,
827                         request.getProtocol());
828                 request.setAttribute(AccessLog.SERVER_PORT_ATTRIBUTE,
829                         Integer.valueOf(request.getServerPort()));
830             }

The problem is that the source values should come from xRequest, e.g. xRequest.getRemoteAddr() and xRequest.getRemoteHost(), etc.

As it is written above, RemoteIpFilter simply republishes the current values, and AccessLog therefore does not display the correct values.","remot ip filter remoteipfilt class code publish new request attribut access log accesslog see request attribut enabl requestattributesen request set attribut setattribut access log accesslog remot addr attribut request get remot addr getremoteaddr request set attribut setattribut access log accesslog remot host attribut request get remot host getremotehost request set attribut setattribut access log accesslog protocol attribut request get protocol getprotocol request set attribut setattribut access log accesslog server port attribut integ valu of valueof request get server port getserverport problem sourc valu request xrequest request xrequest get remot addr getremoteaddr request xrequest get remot host getremotehost etc written remot ip filter remoteipfilt simpli republish current valu access log accesslog therefor display correct valu","""test/org/apache/catalina/filters/TestRemoteIpFilter.java""","1","1","1","1","16","3","12","1","4","0","2","26","26","26","2","26","0","1","0","25","562","124","377","179","259","62","295","327","161","166","2","2","2","1","1","0","29","29","29","26","minor"
"54377","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54377 Correctly set request attributes for AccessLog in RemoteIpFilter Patch by Violeta Georgieva","Bug 54377  RemoteIpFilter does not correctly set request attributes for AccessLog","remot ip filter remoteipfilt correctli set request attribut access log accesslog","In RemoteIpFilter class, there is code that publishes the new request attributes to AccessLog (see below).

821             if (requestAttributesEnabled) {
822                 request.setAttribute(AccessLog.REMOTE_ADDR_ATTRIBUTE,
823                         request.getRemoteAddr());
824                 request.setAttribute(AccessLog.REMOTE_HOST_ATTRIBUTE,
825                         request.getRemoteHost());
826                 request.setAttribute(AccessLog.PROTOCOL_ATTRIBUTE,
827                         request.getProtocol());
828                 request.setAttribute(AccessLog.SERVER_PORT_ATTRIBUTE,
829                         Integer.valueOf(request.getServerPort()));
830             }

The problem is that the source values should come from xRequest, e.g. xRequest.getRemoteAddr() and xRequest.getRemoteHost(), etc.

As it is written above, RemoteIpFilter simply republishes the current values, and AccessLog therefore does not display the correct values.","remot ip filter remoteipfilt class code publish new request attribut access log accesslog see request attribut enabl requestattributesen request set attribut setattribut access log accesslog remot addr attribut request get remot addr getremoteaddr request set attribut setattribut access log accesslog remot host attribut request get remot host getremotehost request set attribut setattribut access log accesslog protocol attribut request get protocol getprotocol request set attribut setattribut access log accesslog server port attribut integ valu of valueof request get server port getserverport problem sourc valu request xrequest request xrequest get remot addr getremoteaddr request xrequest get remot host getremotehost etc written remot ip filter remoteipfilt simpli republish current valu access log accesslog therefor display correct valu","""test/org/apache/catalina/valves/TestRemoteIpValve.java""","1","1","1","1","24","5","17","2","3","0","0","24","24","24","5","24","0","1","0","23","690","154","465","200","370","71","383","413","181","232","3","3","3","1","1","0","26","26","26","24","minor"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""java/org/apache/catalina/Context.java""","0","0","0","0","0","0","0","0","1","0","4","0","167","167","0","167","2","0","0","165","1424","317","195","194","4","912","189","190","190","0","0","0","0","0","0","5","0","0","0","0","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""java/org/apache/catalina/core/DefaultInstanceManager.java""","3","3","3","1","20","0","16","2","6","5","2","31","29","26","18","31","0","7","9","15","740","63","569","160","354","108","222","341","137","204","28","28","38","7","6","0","103","103","116","40","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""java/org/apache/catalina/startup/FailedContext.java""","1","1","1","1","1","0","1","0","1","0","1","204","204","204","6","204","0","0","4","200","684","127","525","475","152","125","186","398","262","136","5","5","5","5","2","0","211","211","211","208","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""java/org/apache/catalina/startup/FailedContext.java""","1","1","1","1","1","0","1","0","1","0","1","204","204","204","6","204","0","0","4","200","684","127","525","475","152","125","186","398","262","136","5","5","5","5","2","0","211","211","211","208","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""java/org/apache/catalina/util/Introspection.java""","2","2","2","1","13","0","9","4","3","5","1","7","7","2","0","7","0","0","0","7","137","14","75","24","45","48","35","47","25","22","5","5","5","1","1","1","14","14","17","7","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","2","0","2","295","295","295","126","295","0","12","9","274","6336","1256","3309","1012","2011","1776","1480","2266","845","1421","51","51","62","9","5","1","686","686","750","384","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","16","1","9","4","2","0","2","295","295","295","126","295","0","12","9","274","6336","1256","3309","1012","2011","1776","1480","2266","845","1421","51","51","62","9","5","1","686","686","750","384","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""test/org/apache/catalina/startup/TestContextConfig.java""","1","1","1","1","8","1","6","0","3","0","1","11","11","11","1","11","0","3","1","7","157","37","103","60","44","18","56","71","46","25","2","2","2","1","1","0","12","12","12","11","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""test/org/apache/catalina/core/TestStandardContext.java""","1","1","1","1","13","1","9","2","17","1","9","40","40","39","9","40","0","5","12","23","757","147","505","221","279","127","265","336","166","170","3","3","7","3","2","0","55","55","64","42","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""test/org/apache/catalina/core/TestStandardContext.java""","1","1","1","1","13","1","9","2","17","1","9","40","40","39","9","40","0","5","12","23","757","147","505","221","279","127","265","336","166","170","3","3","7","3","2","0","55","55","64","42","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""test/org/apache/catalina/core/TestStandardContext.java""","1","1","1","1","13","1","9","2","17","1","9","40","40","39","9","40","0","5","12","23","757","147","505","221","279","127","265","336","166","170","3","3","7","3","2","0","55","55","64","42","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""test/org/apache/catalina/startup/TestWebRuleSet.java""","1","1","1","1","10","1","8","0","1","0","0","9","9","9","4","9","0","1","0","8","154","38","96","40","52","20","57","71","32","39","5","5","5","1","2","0","13","13","13","9","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""test/org/apache/catalina/startup/TestWebRuleSet.java""","1","1","1","1","10","1","8","0","1","0","0","9","9","9","4","9","0","1","0","8","154","38","96","40","52","20","57","71","32","39","5","5","5","1","2","0","13","13","13","9","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""test/org/apache/catalina/deploy/TestWebXml.java""","1","1","1","1","16","3","11","1","1","0","0","6","6","6","0","6","0","0","0","6","136","29","80","22","57","30","55","62","16","46","1","1","1","1","0","0","6","6","6","6","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""test/org/apache/catalina/deploy/TestWebXml.java""","1","1","1","1","16","3","11","1","1","0","0","6","6","6","0","6","0","0","0","6","136","29","80","22","57","30","55","62","16","46","1","1","1","1","0","0","6","6","6","6","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""test/org/apache/catalina/core/TesterContext.java""","1","1","1","1","3","0","2","0","1","0","0","209","209","209","0","209","0","0","0","209","1115","213","779","464","105","123","144","354","249","105","1","1","1","1","0","0","209","209","209","209","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""test/org/apache/catalina/core/TesterContext.java""","1","1","1","1","3","0","2","0","1","0","0","209","209","209","0","209","0","0","0","209","1115","213","779","464","105","123","144","354","249","105","1","1","1","1","0","0","209","209","209","209","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""java/org/apache/catalina/startup/WebRuleSet.java""","1","1","1","1","20","1","16","2","19","0","1","45","45","45","20","45","0","0","2","43","1296","208","859","178","630","229","389","488","138","350","10","10","14","1","3","0","80","80","85","45","normal"
"54379","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54379 Implement support for post-construct and pre-destroy elements in web.xml Patch by  Violeta Georgieva.","Bug 54379  Implement support for post-construct and pre-destroy elements in web.xml","implement support post construct postconstruct pre destroy predestroy element web xml","","","""java/org/apache/catalina/deploy/WebXml.java""","4","4","4","2","21","1","18","1","1","13","6","97","97","84","41","97","0","12","0","85","2301","172","1874","265","1373","259","779","1353","370","983","116","116","119","89","6","0","442","442","473","234","normal"
"54380","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54380 - In MapperListener.lifecycleEvent(): call registerWrapper(), registerContext() only if the parent component has already been started.","Bug 54380  In MapperListener.lifecycleEvent(..): check state of parent before calling registerWrapper()","mapper listen mapperlisten lifecycl event lifecycleev check state parent call regist wrapper registerwrapp","","","""java/org/apache/catalina/mapper/MapperListener.java""","4","4","4","1","22","3","16","3","1","0","2","16","16","16","3","16","0","9","2","5","483","93","301","109","199","91","146","226","108","118","19","19","20","6","4","0","70","70","73","21","minor"
"54381","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54381 Add support for receiving pong messages.","Bug 54381  Websocket StreamInbound never reports receipt of a Pong","websocket stream inbound streaminbound never report receipt pong","The tomcat websocket api now allows the send of a Ping frame by the server (as of 7.0.33), via WsOutbound, but never reports the receipt of a Pong. See StreamInbound in the onData() method...

                } else if (opCode == Constants.OPCODE_PONG) {
                    // NO-OP
                }

As the intended use of Pings is for heartbeat messages, allowing a Ping without informing the server extension of the returned Pong leaves out half the utility.

I would suggest these changes to StreamInbound as a fix...

1) In the onData() method...

                } else if (opCode == Constants.OPCODE_PONG) {
                    onPong(frame.getPayLoad());
                }

2) Add a method onPong (ByteBuffer buffer)...

    protected void onPong(ByteBuffer buffer) {
        // NO-OP
    }

...which implementations may now override to handle Pong receipt and heartbeat logic. This is necessary as onData() is marked final, so there's no alternate workaround.","tomcat websocket api allow send ping frame server via outbound wsoutbound never report receipt pong see stream inbound streaminbound on data ondata method els op code opcod constant opcod pong intend use ping heartbeat messag allow ping without inform server extens return pong leaf half util would suggest chang stream inbound streaminbound fix on data ondata method els op code opcod constant opcod pong on pong onpong frame get pay load getpayload add method on pong onpong byte buffer bytebuff buffer protect void on pong onpong byte buffer bytebuff buffer implement may overrid handl pong receipt heartbeat logic necessari on data ondata mark final altern workaround","""java/org/apache/catalina/websocket/StreamHandler.java""","2","2","2","1","13","0","9","2","1","0","0","13","15","15","5","15","0","5","4","6","270","36","150","46","90","84","71","103","44","59","14","14","14","11","3","1","27","27","27","23","normal"
"54382","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54382 Avoid NPE with an empty SSI directive","Bug 54382  Nullpointer Exception after activating SSI and loading of any html-file with a specific comment","nullpoint except activ ssi load html file htmlfile specif comment","1. Activate SSI on Tomcat and restart Tomcat
2. create an any html-file with a comment like this ""<!--#-->"" 
3. put this html-file to the webapp folder of tomcat
4. when you now go to the html file via tomcat, you will get an Nullpointer Exception. The SSIServlet.class and other necessary SSI-classes cannot be found","activ ssi tomcat restart tomcat creat html file htmlfile comment like put html file htmlfile webapp folder tomcat go html file via tomcat get nullpoint except servlet ssiservlet class necessari class ssiclass cannot found","""java/org/apache/catalina/ssi/SSIProcessor.java""","4","4","6","2","26","0","20","5","1","0","2","10","10","10","4","10","0","1","6","3","330","22","226","68","162","84","132","179","63","116","14","14","17","8","7","0","48","48","65","26","normal"
"54387","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54387 Multiple servlets may not be mapped to the same url-pattern","Bug 54387  Having servlets with same url should at least cause warning","servlet url least caus warn","I've found this interesting ""mal functioning"" in a application where I just copied the mapping portion of web.xml for a new created servlet, but forgot to change de URI.

Tomcat deployed the application without any warning, but when running the application only the last referenced servlet was working (like if the mapping of the first has been overwritten by the last in the XML file).

I made additional tests using annotations in servlets, and the behavior of having more than one servlet with same mapping causes random access to one or another (I cannot determine a predictable way).

In order to prevent breaking existing applications, I would like to have just a ""big warning"" in the log at startup and/or deployment of the application that have more than one servlet mapped to same URL.

Examples of the problem:

Example 1: Web.xml
...
  <servlet>
    <servlet-name>PrintDacteServlet</servlet-name>
    <servlet-class>br.com.simfreteV1.web.PrintDacteServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>CotacaoReportServlet</servlet-name>
    <servlet-class>br.com.simfreteV1.web.CotacaoReportServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>PrintDacteServlet</servlet-name>
    <url-pattern>/secure/relatorios/Action</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>CotacaoReportServlet</servlet-name>
    <url-pattern>/secure/relatorios/Action</url-pattern>
  </servlet-mapping>
...


Example 2: annotations in java servlet files

@WebServlet(name = ""PdfReportPrint"", urlPatterns = {""/secure/relatorios/doReport""})
public class PdfReportPrint extends AbstractBaseServlet {
...


@WebServlet(name = ""PrintBoletoServlet"", urlPatterns = {""/secure/relatorios/doReport""})
public class PrintBoletoServlet extends HttpServlet {
...","found interest mal function applic copi map portion web xml new creat servlet forgot chang uri tomcat deploy applic without warn run applic last referenc servlet work like map first overwritten last xml file made addit test use annot servlet behavior one servlet map caus random access one anoth cannot determin predict way order prevent break exist applic would like big warn log startup deploy applic one servlet map url exampl problem exampl web xml servlet servlet name servletnam print dact servlet printdacteservlet servlet name servletnam servlet class servletclass br simfret v1 simfretev1 web print dact servlet printdacteservlet servlet class servletclass servlet servlet servlet name servletnam cotacao report servlet cotacaoreportservlet servlet name servletnam servlet class servletclass br simfret v1 simfretev1 web cotacao report servlet cotacaoreportservlet servlet class servletclass servlet servlet map servletmap servlet name servletnam print dact servlet printdacteservlet servlet name servletnam url pattern urlpattern secur relatorio action url pattern urlpattern servlet map servletmap servlet map servletmap servlet name servletnam cotacao report servlet cotacaoreportservlet servlet name servletnam url pattern urlpattern secur relatorio action url pattern urlpattern servlet map servletmap exampl annot java servlet file web servlet webservlet name pdf report print pdfreportprint url pattern urlpattern secur relatorio do report doreport public class pdf report print pdfreportprint extend abstract base servlet abstractbaseservlet web servlet webservlet name print boleto servlet printboletoservlet url pattern urlpattern secur relatorio do report doreport public class print boleto servlet printboletoservlet extend http servlet httpservlet","""test/org/apache/catalina/deploy/TestWebXml.java""","1","1","1","1","19","4","14","1","1","0","0","9","9","9","0","9","0","0","0","9","222","52","143","47","108","30","109","119","38","81","1","1","1","1","0","0","9","9","9","9","normal"
"54387","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54387 Multiple servlets may not be mapped to the same url-pattern","Bug 54387  Having servlets with same url should at least cause warning","servlet url least caus warn","I've found this interesting ""mal functioning"" in a application where I just copied the mapping portion of web.xml for a new created servlet, but forgot to change de URI.

Tomcat deployed the application without any warning, but when running the application only the last referenced servlet was working (like if the mapping of the first has been overwritten by the last in the XML file).

I made additional tests using annotations in servlets, and the behavior of having more than one servlet with same mapping causes random access to one or another (I cannot determine a predictable way).

In order to prevent breaking existing applications, I would like to have just a ""big warning"" in the log at startup and/or deployment of the application that have more than one servlet mapped to same URL.

Examples of the problem:

Example 1: Web.xml
...
  <servlet>
    <servlet-name>PrintDacteServlet</servlet-name>
    <servlet-class>br.com.simfreteV1.web.PrintDacteServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>CotacaoReportServlet</servlet-name>
    <servlet-class>br.com.simfreteV1.web.CotacaoReportServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>PrintDacteServlet</servlet-name>
    <url-pattern>/secure/relatorios/Action</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>CotacaoReportServlet</servlet-name>
    <url-pattern>/secure/relatorios/Action</url-pattern>
  </servlet-mapping>
...


Example 2: annotations in java servlet files

@WebServlet(name = ""PdfReportPrint"", urlPatterns = {""/secure/relatorios/doReport""})
public class PdfReportPrint extends AbstractBaseServlet {
...


@WebServlet(name = ""PrintBoletoServlet"", urlPatterns = {""/secure/relatorios/doReport""})
public class PrintBoletoServlet extends HttpServlet {
...","found interest mal function applic copi map portion web xml new creat servlet forgot chang uri tomcat deploy applic without warn run applic last referenc servlet work like map first overwritten last xml file made addit test use annot servlet behavior one servlet map caus random access one anoth cannot determin predict way order prevent break exist applic would like big warn log startup deploy applic one servlet map url exampl problem exampl web xml servlet servlet name servletnam print dact servlet printdacteservlet servlet name servletnam servlet class servletclass br simfret v1 simfretev1 web print dact servlet printdacteservlet servlet class servletclass servlet servlet servlet name servletnam cotacao report servlet cotacaoreportservlet servlet name servletnam servlet class servletclass br simfret v1 simfretev1 web cotacao report servlet cotacaoreportservlet servlet class servletclass servlet servlet map servletmap servlet name servletnam print dact servlet printdacteservlet servlet name servletnam url pattern urlpattern secur relatorio action url pattern urlpattern servlet map servletmap servlet map servletmap servlet name servletnam cotacao report servlet cotacaoreportservlet servlet name servletnam url pattern urlpattern secur relatorio action url pattern urlpattern servlet map servletmap exampl annot java servlet file web servlet webservlet name pdf report print pdfreportprint url pattern urlpattern secur relatorio do report doreport public class pdf report print pdfreportprint extend abstract base servlet abstractbaseservlet web servlet webservlet name print boleto servlet printboletoservlet url pattern urlpattern secur relatorio do report doreport public class print boleto servlet printboletoservlet extend http servlet httpservlet","""test/org/apache/catalina/deploy/TestWebXml.java""","1","1","1","1","19","4","14","1","1","0","0","9","9","9","0","9","0","0","0","9","222","52","143","47","108","30","109","119","38","81","1","1","1","1","0","0","9","9","9","9","normal"
"54387","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54387 Multiple servlets may not be mapped to the same url-pattern","Bug 54387  Having servlets with same url should at least cause warning","servlet url least caus warn","I've found this interesting ""mal functioning"" in a application where I just copied the mapping portion of web.xml for a new created servlet, but forgot to change de URI.

Tomcat deployed the application without any warning, but when running the application only the last referenced servlet was working (like if the mapping of the first has been overwritten by the last in the XML file).

I made additional tests using annotations in servlets, and the behavior of having more than one servlet with same mapping causes random access to one or another (I cannot determine a predictable way).

In order to prevent breaking existing applications, I would like to have just a ""big warning"" in the log at startup and/or deployment of the application that have more than one servlet mapped to same URL.

Examples of the problem:

Example 1: Web.xml
...
  <servlet>
    <servlet-name>PrintDacteServlet</servlet-name>
    <servlet-class>br.com.simfreteV1.web.PrintDacteServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>CotacaoReportServlet</servlet-name>
    <servlet-class>br.com.simfreteV1.web.CotacaoReportServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>PrintDacteServlet</servlet-name>
    <url-pattern>/secure/relatorios/Action</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>CotacaoReportServlet</servlet-name>
    <url-pattern>/secure/relatorios/Action</url-pattern>
  </servlet-mapping>
...


Example 2: annotations in java servlet files

@WebServlet(name = ""PdfReportPrint"", urlPatterns = {""/secure/relatorios/doReport""})
public class PdfReportPrint extends AbstractBaseServlet {
...


@WebServlet(name = ""PrintBoletoServlet"", urlPatterns = {""/secure/relatorios/doReport""})
public class PrintBoletoServlet extends HttpServlet {
...","found interest mal function applic copi map portion web xml new creat servlet forgot chang uri tomcat deploy applic without warn run applic last referenc servlet work like map first overwritten last xml file made addit test use annot servlet behavior one servlet map caus random access one anoth cannot determin predict way order prevent break exist applic would like big warn log startup deploy applic one servlet map url exampl problem exampl web xml servlet servlet name servletnam print dact servlet printdacteservlet servlet name servletnam servlet class servletclass br simfret v1 simfretev1 web print dact servlet printdacteservlet servlet class servletclass servlet servlet servlet name servletnam cotacao report servlet cotacaoreportservlet servlet name servletnam servlet class servletclass br simfret v1 simfretev1 web cotacao report servlet cotacaoreportservlet servlet class servletclass servlet servlet map servletmap servlet name servletnam print dact servlet printdacteservlet servlet name servletnam url pattern urlpattern secur relatorio action url pattern urlpattern servlet map servletmap servlet map servletmap servlet name servletnam cotacao report servlet cotacaoreportservlet servlet name servletnam url pattern urlpattern secur relatorio action url pattern urlpattern servlet map servletmap exampl annot java servlet file web servlet webservlet name pdf report print pdfreportprint url pattern urlpattern secur relatorio do report doreport public class pdf report print pdfreportprint extend abstract base servlet abstractbaseservlet web servlet webservlet name print boleto servlet printboletoservlet url pattern urlpattern secur relatorio do report doreport public class print boleto servlet printboletoservlet extend http servlet httpservlet","""java/org/apache/catalina/deploy/WebXml.java""","4","4","4","2","20","1","18","1","1","14","6","102","102","88","43","102","0","13","0","89","2398","181","1960","276","1430","261","807","1410","386","1024","122","122","125","95","6","0","464","464","496","248","normal"
"54406","2","Tim Whittington","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=54406.","Bug 54406  NIO and BIO connectors handle unsupported SSL ciphers and sslEnabledProtocols differently","nio bio connector handl unsupport ssl cipher ssl enabl protocol sslenabledprotocol differ","The NIO and BIO connectors share (most of) a JSSE based SSLImplementation, but differ in their handling of the ciphers and sslEnabledProtocols attributes.

The NIO connector sets the configured values for both attributes directly on the SSLEngine, which will fail immediately if any of them are unsupported. This makes creating a portable/superset collection of ciphers impossible - i.e. IBM JDKs do not support many of the cipher suite names used by JSSE and vice versa (usually TLS_ vs SSL_ prefixes differ) and the supported options differ between Java 6/7 etc.

The BIO connector attempts to filter the specified values down to those supported by the SSL implementation, but has issues as well: if none of the specified ciphers/protocols are supported it will silently use the defaults of the SSL implementation, which can lead to unexpectedly (and unwittingly) insecure configurations.

I propose to:
 - modify the NIO connector to use the same logic as the BIO connector to filter requested ciphers/protocols to supported values (by placing these operations on the SSLUtil interface). 
 - modify the ciphers/protocols filtering logic to treat an explicit list of unsupported options as setting no supported ciphers/protocols and warn when this is done (it will also fail visibly with errors if SSL connections are attempted).","nio bio connector share jsse base implement sslimplement differ handl cipher ssl enabl protocol sslenabledprotocol attribut nio connector set configur valu attribut directli engin sslengin fail immedi unsupport make creat portabl superset collect cipher imposs ibm jdk support mani cipher suit name use jsse vice versa usual tl v ssl prefix differ support option differ java etc bio connector attempt filter specifi valu support ssl implement issu well none specifi cipher protocol support silent use default ssl implement lead unexpectedli unwittingli insecur configur propos modifi nio connector use logic bio connector filter request cipher protocol support valu place oper util sslutil interfac modifi cipher protocol filter logic treat explicit list unsupport option set support cipher protocol warn done fail visibl error ssl connect attempt","""java/org/apache/tomcat/util/net/jsse/JSSESocketFactory.java""","4","4","4","1","25","2","19","3","1","0","10","26","26","26","10","26","1","3","11","11","849","100","594","206","363","156","287","400","169","231","15","15","17","12","7","0","112","112","123","41","major"
"54406","2","Tim Whittington","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=54406.","Bug 54406  NIO and BIO connectors handle unsupported SSL ciphers and sslEnabledProtocols differently","nio bio connector handl unsupport ssl cipher ssl enabl protocol sslenabledprotocol differ","The NIO and BIO connectors share (most of) a JSSE based SSLImplementation, but differ in their handling of the ciphers and sslEnabledProtocols attributes.

The NIO connector sets the configured values for both attributes directly on the SSLEngine, which will fail immediately if any of them are unsupported. This makes creating a portable/superset collection of ciphers impossible - i.e. IBM JDKs do not support many of the cipher suite names used by JSSE and vice versa (usually TLS_ vs SSL_ prefixes differ) and the supported options differ between Java 6/7 etc.

The BIO connector attempts to filter the specified values down to those supported by the SSL implementation, but has issues as well: if none of the specified ciphers/protocols are supported it will silently use the defaults of the SSL implementation, which can lead to unexpectedly (and unwittingly) insecure configurations.

I propose to:
 - modify the NIO connector to use the same logic as the BIO connector to filter requested ciphers/protocols to supported values (by placing these operations on the SSLUtil interface). 
 - modify the ciphers/protocols filtering logic to treat an explicit list of unsupported options as setting no supported ciphers/protocols and warn when this is done (it will also fail visibly with errors if SSL connections are attempted).","nio bio connector share jsse base implement sslimplement differ handl cipher ssl enabl protocol sslenabledprotocol attribut nio connector set configur valu attribut directli engin sslengin fail immedi unsupport make creat portabl superset collect cipher imposs ibm jdk support mani cipher suit name use jsse vice versa usual tl v ssl prefix differ support option differ java etc bio connector attempt filter specifi valu support ssl implement issu well none specifi cipher protocol support silent use default ssl implement lead unexpectedli unwittingli insecur configur propos modifi nio connector use logic bio connector filter request cipher protocol support valu place oper util sslutil interfac modifi cipher protocol filter logic treat explicit list unsupport option set support cipher protocol warn done fail visibl error ssl connect attempt","""java/org/apache/tomcat/util/net/NioEndpoint.java""","3","3","3","1","12","0","10","1","9","0","4","103","108","108","44","108","0","3","17","88","1666","183","1213","304","828","298","608","925","276","649","28","28","38","8","7","0","323","323","372","133","major"
"54406","2","Tim Whittington","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=54406.","Bug 54406  NIO and BIO connectors handle unsupported SSL ciphers and sslEnabledProtocols differently","nio bio connector handl unsupport ssl cipher ssl enabl protocol sslenabledprotocol differ","The NIO and BIO connectors share (most of) a JSSE based SSLImplementation, but differ in their handling of the ciphers and sslEnabledProtocols attributes.

The NIO connector sets the configured values for both attributes directly on the SSLEngine, which will fail immediately if any of them are unsupported. This makes creating a portable/superset collection of ciphers impossible - i.e. IBM JDKs do not support many of the cipher suite names used by JSSE and vice versa (usually TLS_ vs SSL_ prefixes differ) and the supported options differ between Java 6/7 etc.

The BIO connector attempts to filter the specified values down to those supported by the SSL implementation, but has issues as well: if none of the specified ciphers/protocols are supported it will silently use the defaults of the SSL implementation, which can lead to unexpectedly (and unwittingly) insecure configurations.

I propose to:
 - modify the NIO connector to use the same logic as the BIO connector to filter requested ciphers/protocols to supported values (by placing these operations on the SSLUtil interface). 
 - modify the ciphers/protocols filtering logic to treat an explicit list of unsupported options as setting no supported ciphers/protocols and warn when this is done (it will also fail visibly with errors if SSL connections are attempted).","nio bio connector share jsse base implement sslimplement differ handl cipher ssl enabl protocol sslenabledprotocol attribut nio connector set configur valu attribut directli engin sslengin fail immedi unsupport make creat portabl superset collect cipher imposs ibm jdk support mani cipher suit name use jsse vice versa usual tl v ssl prefix differ support option differ java etc bio connector attempt filter specifi valu support ssl implement issu well none specifi cipher protocol support silent use default ssl implement lead unexpectedli unwittingli insecur configur propos modifi nio connector use logic bio connector filter request cipher protocol support valu place oper util sslutil interfac modifi cipher protocol filter logic treat explicit list unsupport option set support cipher protocol warn done fail visibl error ssl connect attempt","""java/org/apache/tomcat/util/net/SSLUtil.java""","0","0","0","0","0","0","0","0","1","0","0","0","4","4","0","4","0","0","0","4","33","6","11","10","0","16","9","10","10","0","0","0","0","0","0","1","0","0","0","0","major"
"54438","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54438 Fix a regression in the fix for BZ 52953 that triggered an NPE when digested passwords were used and an authentication attempt was made for a user that did not exist in the realm.","Bug 54438  Bug fix 52953 introduces NullPointerException in RealmBase.java line 409 when user not found in JDBC","fix introduc null pointer except nullpointerexcept realm base realmbas java line user found jdbc","","","""java/org/apache/catalina/realm/RealmBase.java""","4","4","4","2","22","2","14","5","2","4","6","50","53","49","13","53","1","3","14","35","1422","243","833","226","511","349","388","593","200","393","53","53","63","21","6","0","203","203","229","102","normal"
"54440","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54440 Fix a regression caused by the changes for https://issues.apache.org/bugzilla/show_bug.cgi?id=54240 that broke compilation with JspC","Bug 54440  TagPluginManager.init() throws NPE when used in Ant <jasper> task","tag plugin manag tagpluginmanag init throw npe use ant jasper task","","","""java/org/apache/jasper/JspC.java""","2","2","3","1","15","0","10","4","1","1","35","81","81","80","47","81","0","3","11","67","1613","170","1032","314","647","411","496","729","274","455","38","38","38","31","6","0","237","237","257","136","normal"
"54440","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54440 Fix a regression caused by the changes for https://issues.apache.org/bugzilla/show_bug.cgi?id=54240 that broke compilation with JspC","Bug 54440  TagPluginManager.init() throws NPE when used in Ant <jasper> task","tag plugin manag tagpluginmanag init throw npe use ant jasper task","","","""java/org/apache/jasper/servlet/JspCServletContext.java""","1","1","1","1","7","1","4","2","1","0","0","52","52","52","3","52","0","0","0","52","648","177","300","153","95","171","105","172","90","82","7","7","8","4","2","1","66","66","67","57","normal"
"54448","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54448 Correctly handle @Resource annotations on primitives. Includes test case. Patch provided by Violeta Georgieva.","Bug 54448  Field of primitive type, annotated with @Resource is not recognized as env entry","field primit type annot resourc recogn env entri","Hi,

I have a servlet with one field of primitive type.
The field is annotated with @Resource.


public class MyServlet extends HttpServlet {

    @Resource(mappedName = ""1"")
    private int envEntry;

    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        ...
    }
}


When I request this servlet I receive the following exception:


SEVERE: Allocate exception for servlet MyServlet
javax.naming.NamingException: Cannot create resource instance
	at org.apache.naming.factory.ResourceEnvFactory.getObjectInstance(ResourceEnvFactory.java:117)
	at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:304)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:843)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
	at org.apache.catalina.core.DefaultInstanceManager.lookupFieldResource(DefaultInstanceManager.java:581)
	at org.apache.catalina.core.DefaultInstanceManager.processAnnotations(DefaultInstanceManager.java:470)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:157)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:138)
	at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1137)
	at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:858)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)


That's because in the method below the primitive types are not 'converted' to their corresponding wrappers and this field is interpreted not as env entry but as resource env ref. org.apache.catalina.startup.WebAnnotationSet.addResource(Context, Resource, 
String, String)


I'm attaching a patch that solves this issue and a test case.

I'm looking forward to your comments.

Regards
Violeta","hi servlet one field primit type field annot resourc public class my servlet myservlet extend http servlet httpservlet resourc map name mappednam privat int env entri enventri protect void do get doget http servlet request httpservletrequest req http servlet respons httpservletrespons resp throw servlet except servletexcept except ioexcept request servlet receiv follow except sever alloc except servlet my servlet myservlet javax name name except namingexcept cannot creat resourc instanc apach name factori resourc env factori resourceenvfactori get object instanc getobjectinst resourc env factori resourceenvfactori java javax name spi name manag namingmanag get object instanc getobjectinst name manag namingmanag java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach catalina core default instanc manag defaultinstancemanag lookup field resourc lookupfieldresourc default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag process annot processannot default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default instanc manag defaultinstancemanag java apach catalina core standard wrapper standardwrapp load servlet loadservlet standard wrapper standardwrapp java apach catalina core standard wrapper standardwrapp alloc standard wrapper standardwrapp java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java method primit type convert correspond wrapper field interpret env entri resourc env ref apach catalina startup web annot set webannotationset add resourc addresourc context resourc string string attach patch solv issu case look forward comment regard violeta","""java/org/apache/catalina/util/Introspection.java""","2","2","2","1","14","0","9","4","3","6","1","8","8","2","0","8","0","0","0","8","156","14","85","26","51","57","38","52","27","25","5","5","5","1","1","1","16","16","22","8","normal"
"54448","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54448 Correctly handle @Resource annotations on primitives. Includes test case. Patch provided by Violeta Georgieva.","Bug 54448  Field of primitive type, annotated with @Resource is not recognized as env entry","field primit type annot resourc recogn env entri","Hi,

I have a servlet with one field of primitive type.
The field is annotated with @Resource.


public class MyServlet extends HttpServlet {

    @Resource(mappedName = ""1"")
    private int envEntry;

    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        ...
    }
}


When I request this servlet I receive the following exception:


SEVERE: Allocate exception for servlet MyServlet
javax.naming.NamingException: Cannot create resource instance
	at org.apache.naming.factory.ResourceEnvFactory.getObjectInstance(ResourceEnvFactory.java:117)
	at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:304)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:843)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
	at org.apache.catalina.core.DefaultInstanceManager.lookupFieldResource(DefaultInstanceManager.java:581)
	at org.apache.catalina.core.DefaultInstanceManager.processAnnotations(DefaultInstanceManager.java:470)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:157)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:138)
	at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1137)
	at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:858)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)


That's because in the method below the primitive types are not 'converted' to their corresponding wrappers and this field is interpreted not as env entry but as resource env ref. org.apache.catalina.startup.WebAnnotationSet.addResource(Context, Resource, 
String, String)


I'm attaching a patch that solves this issue and a test case.

I'm looking forward to your comments.

Regards
Violeta","hi servlet one field primit type field annot resourc public class my servlet myservlet extend http servlet httpservlet resourc map name mappednam privat int env entri enventri protect void do get doget http servlet request httpservletrequest req http servlet respons httpservletrespons resp throw servlet except servletexcept except ioexcept request servlet receiv follow except sever alloc except servlet my servlet myservlet javax name name except namingexcept cannot creat resourc instanc apach name factori resourc env factori resourceenvfactori get object instanc getobjectinst resourc env factori resourceenvfactori java javax name spi name manag namingmanag get object instanc getobjectinst name manag namingmanag java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach catalina core default instanc manag defaultinstancemanag lookup field resourc lookupfieldresourc default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag process annot processannot default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default instanc manag defaultinstancemanag java apach catalina core standard wrapper standardwrapp load servlet loadservlet standard wrapper standardwrapp java apach catalina core standard wrapper standardwrapp alloc standard wrapper standardwrapp java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java method primit type convert correspond wrapper field interpret env entri resourc env ref apach catalina startup web annot set webannotationset add resourc addresourc context resourc string string attach patch solv issu case look forward comment regard violeta","""java/org/apache/catalina/deploy/NamingResources.java""","2","2","2","1","18","1","12","4","1","0","3","53","53","53","13","53","0","8","6","39","1255","240","701","152","435","314","272","459","144","315","10","10","10","9","4","0","147","147","152","94","normal"
"54448","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54448 Correctly handle @Resource annotations on primitives. Includes test case. Patch provided by Violeta Georgieva.","Bug 54448  Field of primitive type, annotated with @Resource is not recognized as env entry","field primit type annot resourc recogn env entri","Hi,

I have a servlet with one field of primitive type.
The field is annotated with @Resource.


public class MyServlet extends HttpServlet {

    @Resource(mappedName = ""1"")
    private int envEntry;

    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        ...
    }
}


When I request this servlet I receive the following exception:


SEVERE: Allocate exception for servlet MyServlet
javax.naming.NamingException: Cannot create resource instance
	at org.apache.naming.factory.ResourceEnvFactory.getObjectInstance(ResourceEnvFactory.java:117)
	at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:304)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:843)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
	at org.apache.catalina.core.DefaultInstanceManager.lookupFieldResource(DefaultInstanceManager.java:581)
	at org.apache.catalina.core.DefaultInstanceManager.processAnnotations(DefaultInstanceManager.java:470)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:157)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:138)
	at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1137)
	at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:858)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)


That's because in the method below the primitive types are not 'converted' to their corresponding wrappers and this field is interpreted not as env entry but as resource env ref. org.apache.catalina.startup.WebAnnotationSet.addResource(Context, Resource, 
String, String)


I'm attaching a patch that solves this issue and a test case.

I'm looking forward to your comments.

Regards
Violeta","hi servlet one field primit type field annot resourc public class my servlet myservlet extend http servlet httpservlet resourc map name mappednam privat int env entri enventri protect void do get doget http servlet request httpservletrequest req http servlet respons httpservletrespons resp throw servlet except servletexcept except ioexcept request servlet receiv follow except sever alloc except servlet my servlet myservlet javax name name except namingexcept cannot creat resourc instanc apach name factori resourc env factori resourceenvfactori get object instanc getobjectinst resourc env factori resourceenvfactori java javax name spi name manag namingmanag get object instanc getobjectinst name manag namingmanag java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach catalina core default instanc manag defaultinstancemanag lookup field resourc lookupfieldresourc default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag process annot processannot default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default instanc manag defaultinstancemanag java apach catalina core standard wrapper standardwrapp load servlet loadservlet standard wrapper standardwrapp java apach catalina core standard wrapper standardwrapp alloc standard wrapper standardwrapp java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java method primit type convert correspond wrapper field interpret env entri resourc env ref apach catalina startup web annot set webannotationset add resourc addresourc context resourc string string attach patch solv issu case look forward comment regard violeta","""test/org/apache/catalina/startup/TestContextConfig.java""","1","1","1","1","8","1","6","0","3","0","1","12","12","12","1","12","0","3","1","8","177","43","117","67","53","18","65","81","51","30","2","2","2","1","1","0","13","13","13","12","normal"
"54448","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54448 Correctly handle @Resource annotations on primitives. Includes test case. Patch provided by Violeta Georgieva.","Bug 54448  Field of primitive type, annotated with @Resource is not recognized as env entry","field primit type annot resourc recogn env entri","Hi,

I have a servlet with one field of primitive type.
The field is annotated with @Resource.


public class MyServlet extends HttpServlet {

    @Resource(mappedName = ""1"")
    private int envEntry;

    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        ...
    }
}


When I request this servlet I receive the following exception:


SEVERE: Allocate exception for servlet MyServlet
javax.naming.NamingException: Cannot create resource instance
	at org.apache.naming.factory.ResourceEnvFactory.getObjectInstance(ResourceEnvFactory.java:117)
	at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:304)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:843)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
	at org.apache.catalina.core.DefaultInstanceManager.lookupFieldResource(DefaultInstanceManager.java:581)
	at org.apache.catalina.core.DefaultInstanceManager.processAnnotations(DefaultInstanceManager.java:470)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:157)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:138)
	at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1137)
	at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:858)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)


That's because in the method below the primitive types are not 'converted' to their corresponding wrappers and this field is interpreted not as env entry but as resource env ref. org.apache.catalina.startup.WebAnnotationSet.addResource(Context, Resource, 
String, String)


I'm attaching a patch that solves this issue and a test case.

I'm looking forward to your comments.

Regards
Violeta","hi servlet one field primit type field annot resourc public class my servlet myservlet extend http servlet httpservlet resourc map name mappednam privat int env entri enventri protect void do get doget http servlet request httpservletrequest req http servlet respons httpservletrespons resp throw servlet except servletexcept except ioexcept request servlet receiv follow except sever alloc except servlet my servlet myservlet javax name name except namingexcept cannot creat resourc instanc apach name factori resourc env factori resourceenvfactori get object instanc getobjectinst resourc env factori resourceenvfactori java javax name spi name manag namingmanag get object instanc getobjectinst name manag namingmanag java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach catalina core default instanc manag defaultinstancemanag lookup field resourc lookupfieldresourc default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag process annot processannot default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default instanc manag defaultinstancemanag java apach catalina core standard wrapper standardwrapp load servlet loadservlet standard wrapper standardwrapp java apach catalina core standard wrapper standardwrapp alloc standard wrapper standardwrapp java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java method primit type convert correspond wrapper field interpret env entri resourc env ref apach catalina startup web annot set webannotationset add resourc addresourc context resourc string string attach patch solv issu case look forward comment regard violeta","""java/org/apache/catalina/startup/WebAnnotationSet.java""","4","4","6","1","32","6","18","7","1","11","2","11","11","0","0","11","0","2","8","1","435","96","226","69","148","113","118","164","67","97","9","9","28","5","4","1","44","44","69","19","normal"
"54450","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54450 Correctly handle resource injection when part of the servlet properties uses @Resource and the other uses 'injection-target' Includes test case Patch provided by  Violeta Georgieva.","Bug 54450  Injection fails when part of the servlet properties uses @Resource and the other uses 'injection-target'","inject fail part servlet properti us resourc us inject target injectiontarget","Hi,

I have a servlet with:
- annotated properties
- and injection-target declarations in web.xml

When I try to request this servlet I receive:


javax.naming.NameNotFoundException: Name [envEntry1] is not bound in this Context. Unable to find [envEntry1].
	at org.apache.naming.NamingContext.lookup(NamingContext.java:820)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
	at org.apache.catalina.core.DefaultInstanceManager.lookupMethodResource(DefaultInstanceManager.java:622)
	at org.apache.catalina.core.DefaultInstanceManager.processAnnotations(DefaultInstanceManager.java:466)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:157)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:138)
	at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1137)
	at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:858)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)


The problem is that when the application uses 'injection-target' declarations in 

org.apache.catalina.core.DefaultInstanceManager.populateAnnotationsCache(Class<?>, Map<String, String>)

only the first setter method is evaluated and the rest are skipped.


I would like to propose a patch and test case.

I'm looking forward to your comments.

Regards
Violeta","hi servlet annot properti inject target injectiontarget declar web xml tri request servlet receiv javax name name not found except namenotfoundexcept name env entry1 enventry1 bound context unabl find env entry1 enventry1 apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach catalina core default instanc manag defaultinstancemanag lookup method resourc lookupmethodresourc default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag process annot processannot default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default instanc manag defaultinstancemanag java apach catalina core standard wrapper standardwrapp load servlet loadservlet standard wrapper standardwrapp java apach catalina core standard wrapper standardwrapp alloc standard wrapper standardwrapp java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java problem applic us inject target injectiontarget declar apach catalina core default instanc manag defaultinstancemanag popul annot cach populateannotationscach class map string string first setter method evalu rest skip would like propos patch case look forward comment regard violeta","""java/org/apache/catalina/core/DefaultInstanceManager.java""","3","3","3","1","19","0","16","2","6","8","2","34","32","26","20","34","0","10","9","15","773","68","597","172","369","108","236","361","145","216","26","26","28","7","6","0","109","109","115","43","normal"
"54450","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54450 Correctly handle resource injection when part of the servlet properties uses @Resource and the other uses 'injection-target' Includes test case Patch provided by  Violeta Georgieva.","Bug 54450  Injection fails when part of the servlet properties uses @Resource and the other uses 'injection-target'","inject fail part servlet properti us resourc us inject target injectiontarget","Hi,

I have a servlet with:
- annotated properties
- and injection-target declarations in web.xml

When I try to request this servlet I receive:


javax.naming.NameNotFoundException: Name [envEntry1] is not bound in this Context. Unable to find [envEntry1].
	at org.apache.naming.NamingContext.lookup(NamingContext.java:820)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
	at org.apache.catalina.core.DefaultInstanceManager.lookupMethodResource(DefaultInstanceManager.java:622)
	at org.apache.catalina.core.DefaultInstanceManager.processAnnotations(DefaultInstanceManager.java:466)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:157)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:138)
	at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1137)
	at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:858)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)


The problem is that when the application uses 'injection-target' declarations in 

org.apache.catalina.core.DefaultInstanceManager.populateAnnotationsCache(Class<?>, Map<String, String>)

only the first setter method is evaluated and the rest are skipped.


I would like to propose a patch and test case.

I'm looking forward to your comments.

Regards
Violeta","hi servlet annot properti inject target injectiontarget declar web xml tri request servlet receiv javax name name not found except namenotfoundexcept name env entry1 enventry1 bound context unabl find env entry1 enventry1 apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach catalina core default instanc manag defaultinstancemanag lookup method resourc lookupmethodresourc default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag process annot processannot default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default instanc manag defaultinstancemanag java apach catalina core standard wrapper standardwrapp load servlet loadservlet standard wrapper standardwrapp java apach catalina core standard wrapper standardwrapp alloc standard wrapper standardwrapp java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java problem applic us inject target injectiontarget declar apach catalina core default instanc manag defaultinstancemanag popul annot cach populateannotationscach class map string string first setter method evalu rest skip would like propos patch case look forward comment regard violeta","""test/org/apache/catalina/startup/TestContextConfig.java""","1","1","1","1","9","2","7","0","3","0","1","13","13","13","1","13","0","3","1","9","196","49","130","73","63","18","73","90","55","35","2","2","2","1","1","0","14","14","14","13","normal"
"54450","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54450 Correctly handle resource injection when part of the servlet properties uses @Resource and the other uses 'injection-target' Includes test case Patch provided by  Violeta Georgieva.","Bug 54450  Injection fails when part of the servlet properties uses @Resource and the other uses 'injection-target'","inject fail part servlet properti us resourc us inject target injectiontarget","Hi,

I have a servlet with:
- annotated properties
- and injection-target declarations in web.xml

When I try to request this servlet I receive:


javax.naming.NameNotFoundException: Name [envEntry1] is not bound in this Context. Unable to find [envEntry1].
	at org.apache.naming.NamingContext.lookup(NamingContext.java:820)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
	at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
	at org.apache.catalina.core.DefaultInstanceManager.lookupMethodResource(DefaultInstanceManager.java:622)
	at org.apache.catalina.core.DefaultInstanceManager.processAnnotations(DefaultInstanceManager.java:466)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:157)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:138)
	at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1137)
	at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:858)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)


The problem is that when the application uses 'injection-target' declarations in 

org.apache.catalina.core.DefaultInstanceManager.populateAnnotationsCache(Class<?>, Map<String, String>)

only the first setter method is evaluated and the rest are skipped.


I would like to propose a patch and test case.

I'm looking forward to your comments.

Regards
Violeta","hi servlet annot properti inject target injectiontarget declar web xml tri request servlet receiv javax name name not found except namenotfoundexcept name env entry1 enventry1 bound context unabl find env entry1 enventry1 apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach name name context namingcontext lookup name context namingcontext java apach catalina core default instanc manag defaultinstancemanag lookup method resourc lookupmethodresourc default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag process annot processannot default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default instanc manag defaultinstancemanag java apach catalina core default instanc manag defaultinstancemanag new instanc newinst default instanc manag defaultinstancemanag java apach catalina core standard wrapper standardwrapp load servlet loadservlet standard wrapper standardwrapp java apach catalina core standard wrapper standardwrapp alloc standard wrapper standardwrapp java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java problem applic us inject target injectiontarget declar apach catalina core default instanc manag defaultinstancemanag popul annot cach populateannotationscach class map string string first setter method evalu rest skip would like propos patch case look forward comment regard violeta","""test/org/apache/catalina/startup/TesterServletWithAnnotations.java""","1","1","1","1","5","0","5","0","1","0","1","1","1","1","1","1","0","0","1","0","40","6","18","14","3","16","11","13","11","2","1","1","1","1","0","1","1","1","1","1","normal"
"54456","16","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54456 If the client aborts the request, make sure this is communicated to the application reading the request body.","Bug 54456  ChunkedInputFilter returning EOF when client closes connection without sending end chunk","chunk input filter chunkedinputfilt return eof client close connect without send chunk","","","""java/org/apache/coyote/http11/filters/ChunkedInputFilter.java""","4","4","5","1","28","4","17","6","1","0","2","13","13","13","10","13","0","1","4","8","537","127","263","69","174","148","128","192","56","136","23","23","28","10","4","1","63","63","70","25","normal"
"54458","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54458 Include exception in error log message Patch provided by Violeta Georgieva","Bug 54458  DataSourceRealm should provide more info on SQLException","data sourc realm datasourcerealm provid info except sqlexcept","The getPassword() method of the DataSourceRealm does not log enough information when it encounters an SQL error.  The catch block is:

        } catch(SQLException e) {
            containerLog.error(
                    sm.getString(""dataSourceRealm.getPassword.exception"",
                                 username));
        } finally {

it would be really helpful to have some details of what the SQLException is.  I am getting this intermittently, and have resorted to subclassing getPassword() in an attempt to figure out what is going wrong.","get password getpassword method data sourc realm datasourcerealm log enough inform encount sql error catch block catch except sqlexcept contain log containerlog error sm get string getstr data sourc realm datasourcerealm get password getpassword except usernam final would realli help detail except sqlexcept get intermitt resort subclass get password getpassword attempt figur go wrong","""java/org/apache/catalina/realm/DataSourceRealm.java""","2","2","2","1","16","1","9","5","1","0","1","28","28","28","9","28","0","3","10","15","629","116","287","84","177","227","130","189","70","119","8","8","9","3","3","1","56","56","59","32","normal"
"54466","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54466 Improve error message by including the name of the file when the java file generated from a tag file cannot be compiled. Based on a patch by Sheldon Shao.","Bug 54466  No file name information in detail error when compiling the java file generated from a tag file","file name inform detail error compil java file gener tag file","","","""java/org/apache/jasper/compiler/DefaultErrorHandler.java""","1","1","1","1","15","1","12","1","1","0","0","4","4","4","0","4","0","0","0","4","120","12","60","16","38","48","29","37","11","26","4","4","4","1","2","1","7","7","7","4","normal"
"54466","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54466 Improve error message by including the name of the file when the java file generated from a tag file cannot be compiled. Based on a patch by Sheldon Shao.","Bug 54466  No file name information in detail error when compiling the java file generated from a tag file","file name inform detail error compil java file gener tag file","","","""org.apache.jasper.compiler.DefaultErrorHandler.javacError""","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","39","3","36","3","31","0","23","27","4","23","null","null","null","null","2","0","4","4","4","1","normal"
"54466","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54466 Improve error message by including the name of the file when the java file generated from a tag file cannot be compiled. Based on a patch by Sheldon Shao.","Bug 54466  No file name information in detail error when compiling the java file generated from a tag file","file name inform detail error compil java file gener tag file","","","""org.apache.jasper.compiler.DefaultErrorHandler.javacError""","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","12","1","5","2","2","6","1","2","1","1","null","null","null","null","0","1","1","1","1","1","normal"
"54476","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54476 Fix Javadoc. destination has minimum length of 1, not 2","Bug 54476  incorrect param specification in javadoc ...tribes.group.GroupChannel send methods","incorrect param specif javadoc tribe group group channel groupchannel send method","* @param destination Member[] - destination.length > 1

I believe this should be:

    * @param destination Member[] - destination.length > 0","param destin member destin length believ param destin member destin length","""java/org/apache/catalina/tribes/group/GroupChannel.java""","2","2","2","1","12","0","7","5","3","1","3","39","39","38","13","39","0","0","4","35","704","63","378","135","204","275","193","284","113","171","13","13","15","5","4","1","89","89","97","45","minor"
"54496","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54496 Don't use hard-coded class name in toString()","Bug 54496  ..tribes.membership.MemberImpl.toString() might be better using .getClass().getName()","tribe membership member impl memberimpl to string tostr might better use get class getclass get name getnam","public String toString()  {
 StringBuilder buf = new  
 StringBuilder(""org.apache.catalina.tribes.membership.MemberImpl["");

Might be better to use .getClass().getName() to cover StaticMember and any other sub-classes that might arise.","public string to string tostr string builder stringbuild buf new string builder stringbuild apach catalina tribe membership member impl memberimpl might better use get class getclass get name getnam cover static member staticmemb sub class subclass might aris","""java/org/apache/catalina/tribes/membership/MemberImpl.java""","1","1","1","1","9","0","6","2","1","6","3","47","47","41","13","47","0","0","1","46","646","97","377","130","228","189","209","271","102","169","5","5","5","3","3","1","65","65","68","51","trivial"
"54497","6","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54497 Make error handling more robust so an error in the leak detection code doesn't prevent the Context from stopping unless the error is fatal to the JVM","Bug 54497  RuntimeException in WebappClassLoader.checkThreadLocalMapForLeaks() causes LifecycleException","runtim except runtimeexcept webapp class loader webappclassload check thread local map for leak checkthreadlocalmapforleak caus lifecycl except lifecycleexcept","Observed this when testing Tomcat trunk at r1438747, at WinXP 32-bit, JDK 7u11.
(running TestWsWebSocketContainer with APR, Tomcat-Native 1.1.26 RC)

There occurred an NPE in WebappClassLoader.checkThreadLocalMapForLeaks(). It was uncaught and caused LifecycleException and ultimately a failure to stop Tomcat.

===============
In stderr:
SEVERE: A child container failed during stop
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to stop component [StandardEngine[Tomcat].StandardHost[localhost].StandardContext[]]
	at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
	at java.util.concurrent.FutureTask.get(FutureTask.java:111)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:974)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1404)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1393)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
	at java.util.concurrent.FutureTask.run(FutureTask.java:166)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: Failed to stop component [StandardEngine[Tomcat].StandardHost[localhost].StandardContext[]]
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:236)
	... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to stop component [WebappLoader[]]
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:236)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5365)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
	... 7 more
Caused by: java.lang.NullPointerException
	at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:54)
	at sun.reflect.UnsafeObjectFieldAccessorImpl.get(UnsafeObjectFieldAccessorImpl.java:36)
	at java.lang.reflect.Field.get(Field.java:372)
	at org.apache.catalina.loader.WebappClassLoader.checkThreadLocalMapForLeaks(WebappClassLoader.java:2247)
	at org.apache.catalina.loader.WebappClassLoader.checkThreadLocalsForLeaks(WebappClassLoader.java:2188)
	at org.apache.catalina.loader.WebappClassLoader.clearReferences(WebappClassLoader.java:1731)
	at org.apache.catalina.loader.WebappClassLoader.stop(WebappClassLoader.java:1641)
	at org.apache.catalina.loader.WebappLoader.stopInternal(WebappLoader.java:491)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
	... 9 more
===============
In testcase:
Testcase: testSmallTextBufferClientTextMessage took 2,328 sec
	Caused an ERROR
Failed to stop component [StandardServer[-1]]
org.apache.catalina.LifecycleException: Failed to stop component [StandardServer[-1]]
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:236)
	at org.apache.catalina.startup.Tomcat.stop(Tomcat.java:336)
	at org.apache.catalina.startup.TomcatBaseTest.tearDown(TomcatBaseTest.java:163)
Caused by: org.apache.catalina.LifecycleException: Failed to stop component [StandardService[Tomcat]]
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:236)
	at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:766)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
Caused by: org.apache.catalina.LifecycleException: Failed to stop component [StandardEngine[Tomcat]]
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:236)
	at org.apache.catalina.core.StandardService.stopInternal(StandardService.java:501)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
Caused by: org.apache.catalina.LifecycleException: A child container failed during stop
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:981)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
===============

Thoughts:
1. We should catch throwables in those checkFor**Leaks methods. It should not cause a ""failed to stop component"" failure.
2. In that method there are many calls to ""table[j]"". The array member should be evaluated only once, so that it does not become null unexpectedly.","observ test tomcat trunk r1438747 win winxp 32 bit 32bit jdk 7u11 run test web socket contain testwswebsocketcontain apr tomcat nativ rc occur npe webapp class loader webappclassload check thread local map for leak checkthreadlocalmapforleak uncaught caus lifecycl except lifecycleexcept ultim failur stop tomcat stderr sever child contain fail stop java util concurr execut except executionexcept apach catalina lifecycl except lifecycleexcept fail stop compon standard engin standardengin tomcat standard host standardhost localhost standard context standardcontext java util concurr futur task futuretask sync inner get innerget futur task futuretask java java util concurr futur task futuretask get futur task futuretask java apach catalina core contain base containerbas stop intern stopintern contain base containerbas java apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java apach catalina core contain base containerbas stop child stopchild call contain base containerbas java apach catalina core contain base containerbas stop child stopchild call contain base containerbas java java util concurr futur task futuretask sync inner run innerrun futur task futuretask java java util concurr futur task futuretask run futur task futuretask java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java caus apach catalina lifecycl except lifecycleexcept fail stop compon standard engin standardengin tomcat standard host standardhost localhost standard context standardcontext apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java caus apach catalina lifecycl except lifecycleexcept fail stop compon webapp loader webappload apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java apach catalina core standard context standardcontext stop intern stopintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java caus java lang null pointer except nullpointerexcept sun reflect unsaf field accessor impl unsafefieldaccessorimpl ensur obj ensureobj unsaf field accessor impl unsafefieldaccessorimpl java sun reflect unsaf object field accessor impl unsafeobjectfieldaccessorimpl get unsaf object field accessor impl unsafeobjectfieldaccessorimpl java java lang reflect field get field java apach catalina loader webapp class loader webappclassload check thread local map for leak checkthreadlocalmapforleak webapp class loader webappclassload java apach catalina loader webapp class loader webappclassload check thread local for leak checkthreadlocalsforleak webapp class loader webappclassload java apach catalina loader webapp class loader webappclassload clear refer clearrefer webapp class loader webappclassload java apach catalina loader webapp class loader webappclassload stop webapp class loader webappclassload java apach catalina loader webapp loader webappload stop intern stopintern webapp loader webappload java apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java testcas testcas test small text buffer client text messag testsmalltextbufferclienttextmessag took sec caus error fail stop compon standard server standardserv apach catalina lifecycl except lifecycleexcept fail stop compon standard server standardserv apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java apach catalina startup tomcat stop tomcat java apach catalina startup tomcat base test tomcatbasetest tear down teardown tomcat base test tomcatbasetest java caus apach catalina lifecycl except lifecycleexcept fail stop compon standard servic standardservic tomcat apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java apach catalina core standard server standardserv stop intern stopintern standard server standardserv java apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java caus apach catalina lifecycl except lifecycleexcept fail stop compon standard engin standardengin tomcat apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java apach catalina core standard servic standardservic stop intern stopintern standard servic standardservic java apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java caus apach catalina lifecycl except lifecycleexcept child contain fail stop apach catalina core contain base containerbas stop intern stopintern contain base containerbas java apach catalina util lifecycl base lifecyclebas stop lifecycl base lifecyclebas java thought catch throwabl check for checkfor leak method caus fail stop compon failur method mani call tabl array member evalu becom null unexpectedli","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","5","2","30","2","20","7","5","1","8","85","85","84","33","85","3","13","18","51","3205","488","1901","435","1318","821","856","1307","392","915","42","42","50","24","10","0","452","452","482","213","normal"
"54513","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54513 Multiple bugs in the new Poller implementation (r1433976) when the endpoint is stopped and then started  - Ensure old Poller thread stops  - Ensure old AsyncTimeout thread stops  - Ensure old sendfile thread stops  - Ensure sockets in keep-alive are closed","Bug 54513  NullPointerException in AprEndpoint$Poller.run","null pointer except nullpointerexcept apr endpoint aprendpoint poller run","Trunk at r1441188, running the test suite with APR connector, Native 1.1.26 Windows 32-bit with JDK 7u11.

I encountered the following when running org.apache.catalina.loader.TestVirtualContext test

On second re-run of the test the same issue happened, so it is as if there is something specific here. I have not encountered the issue with the rest of testsuite yet.

[[[
Feb 01, 2013 2:07:26 AM org.apache.tomcat.util.net.AprEndpoint$Poller run
WARNING: Unexpected poller error
java.lang.NullPointerException
	at org.apache.tomcat.util.net.AprEndpoint$AprSocketWrapper.access$200(AprEndpoint.java:2198)
	at org.apache.tomcat.util.net.AprEndpoint$Poller.run(AprEndpoint.java:1632)
	at java.lang.Thread.run(Thread.java:722)
]]]

The code at AprEndpoint$Poller.run(AprEndpoint.java:1632) is

1628 for (int n = 0; n < rv; n++) {
1629  timeouts.remove(desc[n*2+1]);
1630  AprSocketWrapper wrapper = connections.get(
1631          Long.valueOf(desc[n*2+1]));
1632  wrapper.pollerFlags = wrapper.pollerFlags & ~((int) desc[n*2]);

I suspect that ""wrapper"" is null here.

The above code is specific to Tomcat trunk and is not present in 7.0.x.


When this happened, the test hung for 15 minutes (1000 secs) waiting on a socket read. When time out passed, it continued to run all the other tests.

[[[
Testcase: testAdditionalWebInfClassesPaths took 1 006,735 sec
	Caused an ERROR
Read timed out
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:150)
	at java.net.SocketInputStream.read(SocketInputStream.java:121)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:275)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:334)
	at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:633)
	at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:579)
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1322)
	at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:468)
	at org.apache.catalina.startup.TomcatBaseTest.methodUrl(TomcatBaseTest.java:247)
	at org.apache.catalina.startup.TomcatBaseTest.getUrl(TomcatBaseTest.java:219)
	at org.apache.catalina.startup.TomcatBaseTest.getUrl(TomcatBaseTest.java:213)
	at org.apache.catalina.startup.TomcatBaseTest.getUrl(TomcatBaseTest.java:202)
	at org.apache.catalina.loader.TestVirtualContext.assertPageContains(TestVirtualContext.java:326)
	at org.apache.catalina.loader.TestVirtualContext.assertPageContains(TestVirtualContext.java:320)
	at org.apache.catalina.loader.TestVirtualContext.testAdditionalWebInfClassesPaths(TestVirtualContext.java:311)
]]]","trunk r1441188 run suit apr connector nativ window 32 bit 32bit jdk 7u11 encount follow run apach catalina loader test virtual context testvirtualcontext second re run rerun issu happen someth specif encount issu rest testsuit yet feb apach tomcat util net apr endpoint aprendpoint poller run warn unexpect poller error java lang null pointer except nullpointerexcept apach tomcat util net apr endpoint aprendpoint apr socket wrapper aprsocketwrapp access apr endpoint aprendpoint java apach tomcat util net apr endpoint aprendpoint poller run apr endpoint aprendpoint java java lang thread run thread java code apr endpoint aprendpoint poller run apr endpoint aprendpoint java int rv timeout remov desc apr socket wrapper aprsocketwrapp wrapper connect get long valu of valueof desc wrapper poller flag pollerflag wrapper poller flag pollerflag int desc suspect wrapper null code specif tomcat trunk present happen hung minut sec wait socket read time pass continu run test testcas test addit web inf class path testadditionalwebinfclassespath took sec caus error read time java net socket timeout except sockettimeoutexcept read time java net socket input stream socketinputstream socket read0 socketread0 nativ method java net socket input stream socketinputstream read socket input stream socketinputstream java java net socket input stream socketinputstream read socket input stream socketinputstream java java buffer input stream bufferedinputstream fill buffer input stream bufferedinputstream java java buffer input stream bufferedinputstream read1 buffer input stream bufferedinputstream java java buffer input stream bufferedinputstream read buffer input stream bufferedinputstream java sun net www http http client httpclient pars header parsehttphead http client httpclient java sun net www http http client httpclient pars parsehttp http client httpclient java sun net www protocol http http connect httpurlconnect get input stream getinputstream http connect httpurlconnect java java net http connect httpurlconnect get respons code getresponsecod http connect httpurlconnect java apach catalina startup tomcat base test tomcatbasetest method url methodurl tomcat base test tomcatbasetest java apach catalina startup tomcat base test tomcatbasetest get url geturl tomcat base test tomcatbasetest java apach catalina startup tomcat base test tomcatbasetest get url geturl tomcat base test tomcatbasetest java apach catalina startup tomcat base test tomcatbasetest get url geturl tomcat base test tomcatbasetest java apach catalina loader test virtual context testvirtualcontext assert page contain assertpagecontain test virtual context testvirtualcontext java apach catalina loader test virtual context testvirtualcontext assert page contain assertpagecontain test virtual context testvirtualcontext java apach catalina loader test virtual context testvirtualcontext test addit web inf class path testadditionalwebinfclassespath test virtual context testvirtualcontext java","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","15","0","11","3","14","1","1","108","109","108","75","109","1","4","13","91","2223","277","1414","353","960","534","690","1050","327","723","40","40","56","9","8","0","338","338","387","149","normal"
"54521","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54521 Ensure concurrent requests that require DIGEST auth receive unique nonces.","Bug 54521  DigestAuthenticator: nonceCountValid() fails in case of simultaneous asynchronous requests of the same client","digest authent digestauthent nonc count valid noncecountvalid fail case simultan asynchron request client","Concerned components:
org.apache.catalina.authenticator.DigestAuthenticator
org.apache.catalina.authenticator.DigestAuthenticator.NonceInfo

Scenario:
A multithreaded client sends two requests within one millisecond. The DigestAuthenticator creates for each request a nonce as well as a NonceInfo instance. The two nonces are equal, as they were created within the same millisecond. When writing data into the cache (method generateNonce()), the second NonceInfo instance overwrites the first one (same key!).

Problem:
The two client threads then send a second request with a digest authentication header. In both requests, nc (nonce count) is equal 1, as the nonce has been newly created. In the NonceInfo of the first request, array seen is set to true for index ((nonceCount + offset) % seen.length). In the second request the same NonceInfo instance is used, as the instance is retrieved from map nonces using nonce as a key, that is, in both requests the same key is used. Consequently, method nonceCountValid() returns false, as  seen[(nonceCount + offset) % seen.length)] has already been set to true.  Therefore the authentication fails, although the client has sent a valid digest authentication header.

Conclusion:
Working with multi-threaded clients with many requests, digest authentication does not function reliably.","concern compon apach catalina authent digest authent digestauthent apach catalina authent digest authent digestauthent nonc info nonceinfo scenario multithread client send two request within one millisecond digest authent digestauthent creat request nonc well nonc info nonceinfo instanc two nonc equal creat within millisecond write data cach method gener nonc generatenonc second nonc info nonceinfo instanc overwrit first one key problem two client thread send second request digest authent header request nc nonc count equal nonc newli creat nonc info nonceinfo first request array seen set true index nonc count noncecount offset seen length second request nonc info nonceinfo instanc use instanc retriev map nonc use nonc key request key use consequ method nonc count valid noncecountvalid return fals seen nonc count noncecount offset seen length alreadi set true therefor authent fail although client sent valid digest authent header conclus work multi thread multithread client mani request digest authent function reliabl","""java/org/apache/catalina/authenticator/DigestAuthenticator.java""","2","2","2","1","17","1","11","4","4","2","5","30","30","28","28","30","0","0","7","23","675","122","386","130","231","168","188","265","118","147","21","21","31","19","4","0","71","71","87","59","normal"
"54521","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54521 Ensure concurrent requests that require DIGEST auth receive unique nonces.","Bug 54521  DigestAuthenticator: nonceCountValid() fails in case of simultaneous asynchronous requests of the same client","digest authent digestauthent nonc count valid noncecountvalid fail case simultan asynchron request client","Concerned components:
org.apache.catalina.authenticator.DigestAuthenticator
org.apache.catalina.authenticator.DigestAuthenticator.NonceInfo

Scenario:
A multithreaded client sends two requests within one millisecond. The DigestAuthenticator creates for each request a nonce as well as a NonceInfo instance. The two nonces are equal, as they were created within the same millisecond. When writing data into the cache (method generateNonce()), the second NonceInfo instance overwrites the first one (same key!).

Problem:
The two client threads then send a second request with a digest authentication header. In both requests, nc (nonce count) is equal 1, as the nonce has been newly created. In the NonceInfo of the first request, array seen is set to true for index ((nonceCount + offset) % seen.length). In the second request the same NonceInfo instance is used, as the instance is retrieved from map nonces using nonce as a key, that is, in both requests the same key is used. Consequently, method nonceCountValid() returns false, as  seen[(nonceCount + offset) % seen.length)] has already been set to true.  Therefore the authentication fails, although the client has sent a valid digest authentication header.

Conclusion:
Working with multi-threaded clients with many requests, digest authentication does not function reliably.","concern compon apach catalina authent digest authent digestauthent apach catalina authent digest authent digestauthent nonc info nonceinfo scenario multithread client send two request within one millisecond digest authent digestauthent creat request nonc well nonc info nonceinfo instanc two nonc equal creat within millisecond write data cach method gener nonc generatenonc second nonc info nonceinfo instanc overwrit first one key problem two client thread send second request digest authent header request nc nonc count equal nonc newli creat nonc info nonceinfo first request array seen set true index nonc count noncecount offset seen length second request nonc info nonceinfo instanc use instanc retriev map nonc use nonc key request key use consequ method nonc count valid noncecountvalid return fals seen nonc count noncecount offset seen length alreadi set true therefor authent fail although client sent valid digest authent header conclus work multi thread multithread client mani request digest authent function reliabl","""test/org/apache/catalina/authenticator/TestDigestAuthenticator.java""","1","1","1","1","11","0","9","0","1","4","12","23","23","19","0","23","0","2","2","19","365","50","276","112","170","42","144","178","83","95","7","7","7","1","2","0","33","33","33","23","normal"
"54521","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54521 Ensure concurrent requests that require DIGEST auth receive unique nonces.","Bug 54521  DigestAuthenticator: nonceCountValid() fails in case of simultaneous asynchronous requests of the same client","digest authent digestauthent nonc count valid noncecountvalid fail case simultan asynchron request client","Concerned components:
org.apache.catalina.authenticator.DigestAuthenticator
org.apache.catalina.authenticator.DigestAuthenticator.NonceInfo

Scenario:
A multithreaded client sends two requests within one millisecond. The DigestAuthenticator creates for each request a nonce as well as a NonceInfo instance. The two nonces are equal, as they were created within the same millisecond. When writing data into the cache (method generateNonce()), the second NonceInfo instance overwrites the first one (same key!).

Problem:
The two client threads then send a second request with a digest authentication header. In both requests, nc (nonce count) is equal 1, as the nonce has been newly created. In the NonceInfo of the first request, array seen is set to true for index ((nonceCount + offset) % seen.length). In the second request the same NonceInfo instance is used, as the instance is retrieved from map nonces using nonce as a key, that is, in both requests the same key is used. Consequently, method nonceCountValid() returns false, as  seen[(nonceCount + offset) % seen.length)] has already been set to true.  Therefore the authentication fails, although the client has sent a valid digest authentication header.

Conclusion:
Working with multi-threaded clients with many requests, digest authentication does not function reliably.","concern compon apach catalina authent digest authent digestauthent apach catalina authent digest authent digestauthent nonc info nonceinfo scenario multithread client send two request within one millisecond digest authent digestauthent creat request nonc well nonc info nonceinfo instanc two nonc equal creat within millisecond write data cach method gener nonc generatenonc second nonc info nonceinfo instanc overwrit first one key problem two client thread send second request digest authent header request nc nonc count equal nonc newli creat nonc info nonceinfo first request array seen set true index nonc count noncecount offset seen length second request nonc info nonceinfo instanc use instanc retriev map nonc use nonc key request key use consequ method nonc count valid noncecountvalid return fals seen nonc count noncecount offset seen length alreadi set true therefor authent fail although client sent valid digest authent header conclus work multi thread multithread client mani request digest authent function reliabl","""test/org/apache/catalina/authenticator/TestDigestAuthenticator.java""","1","1","1","1","11","0","9","0","1","4","12","23","23","19","0","23","0","2","2","19","365","50","276","112","170","42","144","178","83","95","7","7","7","1","2","0","33","33","33","23","normal"
"54534","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54534 Ensure that when loading Servlet instances the correct class loader is used.","Bug 54534  JMX connection may load servlet with invalid ClassLoader","jmx connect may load servlet invalid class loader classload","","","""java/org/apache/catalina/core/StandardWrapper.java""","2","2","2","1","17","2","11","4","1","1","3","80","80","79","35","80","0","3","5","72","1927","381","1046","295","651","503","445","653","219","434","20","20","25","4","5","0","193","193","210","91","normal"
"54536","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54536 If a custom error status is used and a message is provided, display that message via the default error page.","Bug 54536  ErrorReportValve doesn't respect HttpServletResponse.sendError(int sc, String msg)","error report valv errorreportvalv doesn respect http servlet respons httpservletrespons send error senderror int sc string msg","","","""java/org/apache/catalina/valves/ErrorReportValve.java""","7","7","9","2","55","6","39","8","1","0","0","4","4","4","0","4","0","0","2","2","286","42","175","34","124","69","100","129","32","97","16","16","20","3","3","0","29","29","36","8","normal"
"54536","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54536 If a custom error status is used and a message is provided, display that message via the default error page.","Bug 54536  ErrorReportValve doesn't respect HttpServletResponse.sendError(int sc, String msg)","error report valv errorreportvalv doesn respect http servlet respons httpservletrespons send error senderror int sc string msg","","","""test/org/apache/catalina/valves/TestErrorReportValve.java""","1","1","1","1","11","2","8","1","3","0","3","6","6","6","1","6","0","1","2","3","132","35","78","47","35","22","46","56","37","19","2","2","2","1","1","0","7","7","7","6","normal"
"54536","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54536 If a custom error status is used and a message is provided, display that message via the default error page.","Bug 54536  ErrorReportValve doesn't respect HttpServletResponse.sendError(int sc, String msg)","error report valv errorreportvalv doesn respect http servlet respons httpservletrespons send error senderror int sc string msg","","","""test/org/apache/catalina/valves/TestErrorReportValve.java""","1","1","1","1","11","2","8","1","3","0","3","6","6","6","1","6","0","1","2","3","132","35","78","47","35","22","46","56","37","19","2","2","2","1","1","0","7","7","7","6","normal"
"54552","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54552 Servlet 3.1 Implement HttpSessionIdListener and HttpServletRequest#changeSessionId() Patch provided by Nick Williams.","Bug 54552  Completed Servlet 3.1 spec for changeSessionId, HttpSessionIdListener","complet servlet spec chang session id changesessionid http session id listen httpsessionidlisten","","","""java/org/apache/catalina/core/ApplicationContext.java""","2","2","3","2","18","1","11","5","2","0","5","61","61","61","15","61","1","3","4","53","1509","275","838","275","505","396","356","522","202","320","12","12","13","9","3","0","175","175","197","123","normal"
"54552","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54552 Servlet 3.1 Implement HttpSessionIdListener and HttpServletRequest#changeSessionId() Patch provided by Nick Williams.","Bug 54552  Completed Servlet 3.1 spec for changeSessionId, HttpSessionIdListener","complet servlet spec chang session id changesessionid http session id listen httpsessionidlisten","","","""java/org/apache/catalina/ha/session/DeltaManager.java""","2","2","2","1","15","0","10","5","1","0","3","84","84","84","34","84","0","0","27","57","1523","132","925","238","610","483","471","681","228","453","14","14","17","4","7","1","220","207","242","95","normal"
"54552","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54552 Servlet 3.1 Implement HttpSessionIdListener and HttpServletRequest#changeSessionId() Patch provided by Nick Williams.","Bug 54552  Completed Servlet 3.1 spec for changeSessionId, HttpSessionIdListener","complet servlet spec chang session id changesessionid http session id listen httpsessionidlisten","","","""java/javax/servlet/http/HttpServletRequest.java""","0","0","0","0","0","0","0","0","1","0","4","0","31","31","0","31","0","0","0","31","505","36","47","46","4","422","41","42","42","0","0","0","0","0","0","9","0","0","0","0","normal"
"54552","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54552 Servlet 3.1 Implement HttpSessionIdListener and HttpServletRequest#changeSessionId() Patch provided by Nick Williams.","Bug 54552  Completed Servlet 3.1 spec for changeSessionId, HttpSessionIdListener","complet servlet spec chang session id changesessionid http session id listen httpsessionidlisten","","","""java/javax/servlet/http/HttpServletRequest.java""","0","0","0","0","0","0","0","0","1","0","4","0","31","31","0","31","0","0","0","31","505","36","47","46","4","422","41","42","42","0","0","0","0","0","0","9","0","0","0","0","normal"
"54552","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54552 Servlet 3.1 Implement HttpSessionIdListener and HttpServletRequest#changeSessionId() Patch provided by Nick Williams.","Bug 54552  Completed Servlet 3.1 spec for changeSessionId, HttpSessionIdListener","complet servlet spec chang session id changesessionid http session id listen httpsessionidlisten","","","""java/javax/servlet/http/HttpServletRequestWrapper.java""","1","1","1","1","8","0","3","4","1","0","0","33","33","33","0","33","0","1","0","32","367","36","143","76","33","188","39","73","40","33","1","1","1","1","0","1","33","33","33","33","normal"
"54552","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54552 Servlet 3.1 Implement HttpSessionIdListener and HttpServletRequest#changeSessionId() Patch provided by Nick Williams.","Bug 54552  Completed Servlet 3.1 spec for changeSessionId, HttpSessionIdListener","complet servlet spec chang session id changesessionid http session id listen httpsessionidlisten","","","""java/org/apache/catalina/session/ManagerBase.java""","1","1","1","1","12","0","6","4","2","0","3","76","76","76","27","76","0","0","5","71","1319","255","640","245","349","425","292","440","198","242","6","6","6","3","3","1","139","139","144","80","normal"
"54552","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54552 Servlet 3.1 Implement HttpSessionIdListener and HttpServletRequest#changeSessionId() Patch provided by Nick Williams.","Bug 54552  Completed Servlet 3.1 spec for changeSessionId, HttpSessionIdListener","complet servlet spec chang session id changesessionid http session id listen httpsessionidlisten","","","""java/javax/servlet/http/HttpServletRequest.java""","2","2","2","1","15","1","9","4","10","2","6","162","164","162","51","164","3","3","14","144","3276","574","1802","497","1088","909","793","1188","431","757","24","24","27","11","6","1","394","394","439","234","normal"
"54552","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54552 Servlet 3.1 Implement HttpSessionIdListener and HttpServletRequest#changeSessionId() Patch provided by Nick Williams.","Bug 54552  Completed Servlet 3.1 spec for changeSessionId, HttpSessionIdListener","complet servlet spec chang session id changesessionid http session id listen httpsessionidlisten","","","""java/org/apache/catalina/connector/RequestFacade.java""","1","1","1","1","7","1","6","0","14","0","1","90","90","90","6","90","0","0","1","89","1108","313","730","243","317","65","197","371","139","232","4","4","4","1","2","0","160","160","160","90","normal"
"54552","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54552 Servlet 3.1 Implement HttpSessionIdListener and HttpServletRequest#changeSessionId() Patch provided by Nick Williams.","Bug 54552  Completed Servlet 3.1 spec for changeSessionId, HttpSessionIdListener","complet servlet spec chang session id changesessionid http session id listen httpsessionidlisten","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","15","1","9","4","2","0","2","303","303","303","128","303","0","12","9","282","6412","1278","3363","1030","2041","1776","1501","2300","855","1445","51","51","62","9","5","1","699","699","765","392","normal"
"54552","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54552 Servlet 3.1 Implement HttpSessionIdListener and HttpServletRequest#changeSessionId() Patch provided by Nick Williams.","Bug 54552  Completed Servlet 3.1 spec for changeSessionId, HttpSessionIdListener","complet servlet spec chang session id changesessionid http session id listen httpsessionidlisten","","","""java/org/apache/catalina/websocket/WsHttpServletRequestWrapper.java""","1","1","1","1","3","0","3","0","1","0","1","71","71","71","1","71","0","1","1","69","415","77","318","172","74","20","98","171","98","73","2","2","2","1","1","0","72","72","72","71","normal"
"54552","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54552 Servlet 3.1 Implement HttpSessionIdListener and HttpServletRequest#changeSessionId() Patch provided by Nick Williams.","Bug 54552  Completed Servlet 3.1 spec for changeSessionId, HttpSessionIdListener","complet servlet spec chang session id changesessionid http session id listen httpsessionidlisten","","","""java/org/apache/catalina/websocket/WsHttpServletRequestWrapper.java""","1","1","1","1","3","0","3","0","1","0","1","71","71","71","1","71","0","1","1","69","415","77","318","172","74","20","98","171","98","73","2","2","2","1","1","0","72","72","72","71","normal"
"54585","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54585 Take account of setting of delegate when building the class path that is passed to Jasper","Bug 54585  WebappLoader doesn't honor delegate attr while constructing jsp_classpath","webapp loader webappload doesn honor deleg attr construct jsp classpath","If custom WebappClassLoader is created with delegate=true then parent-first classloading model is used. Everything works here as expected. However jsp_classpath is always constructed in the following manner:
customWebappClassLoader.urls;parent.urls;parent...parent.urls
Whereas it is expected to me that if delegate=true then parent's urls should come first.","custom webapp class loader webappclassload creat deleg true parent first parentfirst classload model use everyth work expect howev jsp classpath alway construct follow manner custom webapp class loader customwebappclassload url parent url parent parent url wherea expect deleg true parent url first","""java/org/apache/catalina/loader/WebappLoader.java""","3","3","3","1","21","3","14","4","1","0","2","34","34","34","9","34","0","9","4","21","980","212","550","174","362","219","262","388","148","240","20","20","23","7","5","0","123","123","129","63","minor"
"54599","27","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54599 jdbc-pool: Do not expose connection password via DataSource.toString(). Based on a patch by Daniel Mikusa","Bug 54599  DataSource password is exposed to applications via toString method","data sourc datasourc password expos applic via to string tostr method","On the server side, create a DataSource using ""org.apache.tomcat.jdbc.pool.DataSourceFactory"".

Ex:

        <Resource auth=""Container""
                  description=""""
                  name=""jdbc/testTomcatJdbc""
                  factory=""org.apache.tomcat.jdbc.pool.DataSourceFactory""
                  type=""javax.sql.DataSource""
                  username=""sa""
                  password=""super-secret""
                  driverClassName=""org.h2.Driver""
                  url=""jdbc:h2:mem:test""
                  minIdle=""1""
                  initialSize=""1"" />

In a web application, create a JSP file, add the following:

<%@ page import=""javax.naming.*"" session=""false"" %>
<!DOCTYPE HTML>
<html>

<head>
    <title>Display Password!</title>
</head>
<body>
    <h1>toString for Tomcat JDBC</h1>
    <%
      dataSource = (javax.sql.DataSource) ctx.lookup(""java:/comp/env/jdbc/testTomcatJdbc"");
      out.println(""<p>"" + dataSource.toString() + ""</p>"");
    %>
</body>
</html>

Access the JSP in your browser.  The output from toString on the DataSource will display the password that was configured in the <Resource/> tag.

Example Output:

toString for Tomcat JDBC

org.apache.tomcat.jdbc.pool.DataSource@75cae120{ConnectionPool[defaultAutoCommit=null; defaultReadOnly=null; defaultTransactionIsolation=-1; defaultCatalog=null; driverClassName=org.h2.Driver; maxActive=100; maxIdle=100; minIdle=1; initialSize=1; maxWait=30000; testOnBorrow=false; testOnReturn=false; timeBetweenEvictionRunsMillis=5000; numTestsPerEvictionRun=0; minEvictableIdleTimeMillis=60000; testWhileIdle=false; testOnConnect=false; password=super-secret; url=jdbc:h2:mem:test; username=sa; validationQuery=null; validatorClassName=null; validationInterval=30000; accessToUnderlyingConnectionAllowed=true; removeAbandoned=false; removeAbandonedTimeout=60; logAbandoned=false; connectionProperties=null; initSQL=null; jdbcInterceptors=null; jmxEnabled=true; fairQueue=true; useEquals=true; abandonWhenPercentageFull=0; maxAge=0; useLock=false; dataSource=null; dataSourceJNDI=null; suspectTimeout=0; alternateUsernameAllowed=false; commitOnReturn=false; rollbackOnReturn=false; useDisposableConnectionFacade=true; logValidationErrors=false; propagateInterruptState=false; }","server side creat data sourc datasourc use apach tomcat jdbc pool data sourc factori datasourcefactori ex resourc auth contain descript name jdbc test tomcat jdbc testtomcatjdbc factori apach tomcat jdbc pool data sourc factori datasourcefactori type javax sql data sourc datasourc usernam password super secret supersecret driver class name driverclassnam h2 driver url jdbc h2 mem min idl minidl initi size initials web applic creat jsp file add follow page import javax name session fals doctyp html html head titl display password titl head bodi h1 to string tostr tomcat jdbc h1 data sourc datasourc javax sql data sourc datasourc ctx lookup java comp env jdbc test tomcat jdbc testtomcatjdbc println data sourc datasourc to string tostr bodi html access jsp browser output to string tostr data sourc datasourc display password configur resourc tag exampl output to string tostr tomcat jdbc apach tomcat jdbc pool data sourc datasourc 75cae120 connect pool connectionpool default auto commit defaultautocommit null default read onli defaultreadonli null default transact isol defaulttransactionisol default catalog defaultcatalog null driver class name driverclassnam h2 driver max activ maxact max idl maxidl min idl minidl initi size initials max wait maxwait test on borrow testonborrow fals test on return testonreturn fals time between evict run milli timebetweenevictionrunsmilli num test per evict run numtestsperevictionrun min evict idl time milli minevictableidletimemilli test while idl testwhileidl fals test on connect testonconnect fals password super secret supersecret url jdbc h2 mem usernam valid queri validationqueri null valid class name validatorclassnam null valid interv validationinterv access to underli connect allow accesstounderlyingconnectionallow true remov abandon removeabandon fals remov abandon timeout removeabandonedtimeout log abandon logabandon fals connect properti connectionproperti null init initsql null jdbc interceptor jdbcinterceptor null jmx enabl jmxenabl true fair queue fairqueu true use equal useequ true abandon when percentag full abandonwhenpercentageful max age maxag use lock uselock fals data sourc datasourc null data sourc datasourcejndi null suspect timeout suspecttimeout altern usernam allow alternateusernameallow fals commit on return commitonreturn fals rollback on return rollbackonreturn fals use dispos connect facad usedisposableconnectionfacad true log valid error logvalidationerror fals propag interrupt state propagateinterruptst fals","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PoolProperties.java""","1","1","1","1","6","0","4","2","3","2","6","125","125","123","54","125","0","0","1","124","1263","225","711","329","299","327","284","452","225","227","6","6","10","5","5","0","168","168","179","148","minor"
"54602","0","Remy Maucherat","I forgot to port a portion of my patch, that 54602 had me look at what called recycle.","Bug 54602  B2CConverter character decode underflow leaves bytes in buffer","b2 convert b2cconvert charact decod underflow leaf byte buffer","If a request contains a uri that ends in a multi byte character which is missing a byte the extra bytes are left in a buffer which is reused by a future request.

The problem comes from two different things:
1) If B2CConverter tries to convert a ByteChunk which ends in a character underflow it does not convert that last character and it is left in a buffer in B2CConver.

2) The B2CConverter in org.apache.catalina.connector.Request is not recycled with the rest of the objects. It looks like this is done intentionally based on the comment above it's declaration.

The issue with B2CConverter can be demonstrated with the code below, which is a simplification of what is done inside of CoyoteAdapter.convertURI():

<code>
B2CConverter conv = new B2CConverter(""UTF-8"");
ByteChunk bc = new ByteChunk();
CharChunk cc = new CharChunk();
byte[] bytes = { 0x61, 0x62, 0x63, 0x64, -8, -69, -73, -77 };

bc.append(bytes, 0, bytes.length);
cc.allocate(bc.getLength(), -1);
conv.convert(bc, cc, cc.getBuffer().length - cc.getEnd());
System.out.println(cc);

cc.recycle();
bc.recycle();

bc.append(bytes, 0, bytes.length);
cc.allocate(bc.getLength(), -1);
conv.convert(bc, cc, cc.getBuffer().length - cc.getEnd());
System.out.println(cc);
</code>

If the B2CConverter was recycled with everything else in Request this would prevent a previous request from corrupting the next request but it doesn't fix the issue that a character is dropped from the initial decode.

I tried playing with B2CConverter and the only way I could get the convert to get everything was by ignoring the limit argument and reading to the end of the stream. It looks like tomcat8 is moving in this direction with the move to NIO, however I tried playing with the latest B2CConverter and was still seeing issues with the given byte sequence.","request contain uri end multi byte charact miss byte extra byte left buffer reus futur request problem come two differ thing b2 convert b2cconvert tri convert byte chunk bytechunk end charact underflow convert last charact left buffer b2 conver b2cconver b2 convert b2cconvert apach catalina connector request recycl rest object look like done intent base comment declar issu b2 convert b2cconvert demonstr code simplif done insid coyot adapt coyoteadapt convert converturi code b2 convert b2cconvert conv new b2 convert b2cconvert utf byte chunk bytechunk bc new byte chunk bytechunk char chunk charchunk cc new char chunk charchunk byte byte 0x61 0x62 0x63 0x64 bc append byte byte length cc alloc bc get length getlength conv convert bc cc cc get buffer getbuff length cc get end getend system println cc cc recycl bc recycl bc append byte byte length cc alloc bc get length getlength conv convert bc cc cc get buffer getbuff length cc get end getend system println cc code b2 convert b2cconvert recycl everyth els request would prevent previou request corrupt next request doesn fix issu charact drop initi decod tri play b2 convert b2cconvert way could get convert get everyth ignor limit argument read stream look like tomcat8 move direct move nio howev tri play latest b2 convert b2cconvert still see issu given byte sequenc","""java/org/apache/catalina/connector/CoyoteAdapter.java""","10","10","12","3","70","6","50","13","2","3","8","16","16","13","1","16","0","0","8","8","1287","168","866","165","635","253","440","610","149","461","38","38","40","18","6","0","170","170","206","62","normal"
"54612","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54612 Check if socket is closed before trying to write a message to it. Also, flush any partial buffered data before closing the socket.","Bug 54612  Fatal Error when trying to send data to WebSocket with conection closed","fatal error tri send data web socket websocket conect close","","","""java/org/apache/catalina/websocket/WsOutbound.java""","3","3","3","1","21","1","13","7","1","0","2","16","16","16","6","16","0","5","1","10","429","56","234","45","153","139","112","161","38","123","7","7","12","1","2","1","49","49","60","16","major"
"54624","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54624 Read request body before content length header is restored for the old request as AJP connector uses this to determine how many bytes to read (and it will block until they are read)","Bug 54624  Form authenticator hangs on re-authentication of POST request behind mod_proxy_ajp","form authent hang re authent reauthent post request behind proxi ajp","Setup: Tomcat AJP connector behind mod_proxy_ajp, form-based authentication.

When session expires and a POST request is submitted, Tomcat shows login form, user logs in, authenticator tries to restore the original POST request. Doing that, it tries to swallow the AJP message body before replacing the body of the request with the original POST request body. It tries to read the first 4 bytes of the AJP message (the message length) and blocks forever waiting for those 4 bytes.","setup tomcat ajp connector behind proxi ajp form base formbas authent session expir post request submit tomcat show login form user log authent tri restor origin post request tri swallow ajp messag bodi replac bodi request origin post request bodi tri read first byte ajp messag messag length block forev wait byte","""java/org/apache/catalina/authenticator/FormAuthenticator.java""","6","6","7","2","46","4","32","10","1","0","1","12","12","12","2","12","0","0","7","5","673","90","425","121","293","158","218","295","101","194","34","34","36","14","4","0","76","76","84","29","normal"
"54628","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54628 Only write data from start position in array rather than start of array. Patch provide by blee.","Bug 54628  there is something wrong when send binary data by websocket.","someth wrong send binari data websocket","there is something wrong when send binary data by websocket.

see org.apache.catalina.websocket.WsOutbound.doWriteBytes(ByteBuffer, boolean)

I think 

// Write the content
        upgradeOutbound.write(buffer.array(), 0, buffer.limit());
        upgradeOutbound.flush();

should change to :

// Write the content
        upgradeOutbound.write(buffer.array(), buffer.arrayOffset(), buffer.limit());
        upgradeOutbound.flush();


For example:
byte[] bts = new byte[]{1,2,3,4,5}
ByteBuffer bf = ByteBuffer.wrap(bts, 2, 2);
out.writeBinaryMessage(bf);

I mean write [3,4] to the client, but in fact [1,2,3,4] be sent;","someth wrong send binari data websocket see apach catalina websocket outbound wsoutbound do write byte dowritebyt byte buffer bytebuff boolean think write content upgrad outbound upgradeoutbound write buffer array buffer limit upgrad outbound upgradeoutbound flush chang write content upgrad outbound upgradeoutbound write buffer array buffer array offset arrayoffset buffer limit upgrad outbound upgradeoutbound flush exampl byte bt new byte byte buffer bytebuff bf byte buffer bytebuff wrap bt write binari messag writebinarymessag bf mean write client fact sent","""java/org/apache/catalina/websocket/WsOutbound.java""","3","3","3","1","22","1","13","7","1","0","2","16","16","16","6","16","0","5","1","10","437","59","238","45","156","140","114","164","38","126","8","8","12","1","2","1","50","50","61","16","major"
"54638","0","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54638 The status page of manager webapp was reporting wrong value for ""Used"" memory in XML mode.","Bug 54638  /manager/status?XML=true","manag statu xml true","Hi all,
in /manager/status?XML=true, informations about memory pools are incorrect.
for every row all the values (initial,committed,maximum,used) are the same:

Memory Pools
Name:Eden Space	Type:Heap memory	Initial:143130624	Committed:143130624	Maximum:143130624	Used:143130624
Name:Survivor Space	Type:Heap memory	Initial:17891328	Committed:17891328	Maximum:17891328	Used:17891328
Name:Tenured Gen	Type:Heap memory	Initial:357957632	Committed:357957632	Maximum:357957632	Used:357957632
Name:Code Cache	Type:Non-heap memory	Initial:163840	Committed:8421376	Maximum:33554432	Used:163840
Name:Perm Gen	Type:Non-heap memory	Initial:12582912	Committed:23330816	Maximum:67108864	Used:12582912
Name:Perm Gen [shared-ro]	Type:Non-heap memory	Initial:10485760	Committed:10485760	Maximum:10485760	Used:10485760
Name:Perm Gen [shared-rw]	Type:Non-heap memory	Initial:12582912	Committed:12582912	Maximum:12582912	Used:12582912


Instead in the gui page values are correct.","hi manag statu xml true inform memori pool incorrect everi row valu initi commit maximum use memori pool name eden space type heap memori initi commit maximum use name survivor space type heap memori initi commit maximum use name tenur gen type heap memori initi commit maximum use name code cach type non heap nonheap memori initi commit maximum use name perm gen type non heap nonheap memori initi commit maximum use name perm gen share ro sharedro type non heap nonheap memori initi commit maximum use name perm gen share rw sharedrw type non heap nonheap memori initi commit maximum use instead gui page valu correct","""java/org/apache/catalina/manager/StatusTransformer.java""","5","5","5","1","44","4","35","5","1","20","0","20","20","0","0","20","0","0","2","18","985","131","737","148","573","127","421","531","113","418","21","14","23","4","4","0","116","106","119","28","minor"
"54658","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54658 Servlet 3.1: Implement getSubmittedFileName() Patch provided by Nick Williams","Bug 54658  Implement Part#getSubmittedFileName from SERVLET_SPEC-57","implement part get submit file name getsubmittedfilenam servlet spec","","","""java/org/apache/catalina/core/ApplicationPart.java""","1","1","2","1","7","0","7","0","1","0","0","12","12","12","2","12","0","0","0","12","160","18","114","53","47","28","52","76","41","35","5","5","6","1","4","0","23","23","24","12","normal"
"54658","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54658 Servlet 3.1: Implement getSubmittedFileName() Patch provided by Nick Williams","Bug 54658  Implement Part#getSubmittedFileName from SERVLET_SPEC-57","implement part get submit file name getsubmittedfilenam servlet spec","","","""java/org/apache/catalina/core/ApplicationPart.java""","1","1","2","1","7","0","7","0","1","0","0","12","12","12","2","12","0","0","0","12","160","18","114","53","47","28","52","76","41","35","5","5","6","1","4","0","23","23","24","12","normal"
"54658","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54658 Servlet 3.1: Implement getSubmittedFileName() Patch provided by Nick Williams","Bug 54658  Implement Part#getSubmittedFileName from SERVLET_SPEC-57","implement part get submit file name getsubmittedfilenam servlet spec","","","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","30","2","22","6","11","0","17","34","34","34","1","34","0","1","19","14","1389","128","1012","219","800","256","432","567","188","379","20","20","25","10","4","0","130","130","151","62","normal"
"54658","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54658 Servlet 3.1: Implement getSubmittedFileName() Patch provided by Nick Williams","Bug 54658  Implement Part#getSubmittedFileName from SERVLET_SPEC-57","implement part get submit file name getsubmittedfilenam servlet spec","","","""java/javax/servlet/http/Part.java""","0","0","0","0","0","0","0","0","1","0","0","0","9","9","0","9","0","0","0","9","107","11","15","14","0","81","13","14","14","0","0","0","0","0","0","5","0","0","0","0","normal"
"54658","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54658 Servlet 3.1: Implement getSubmittedFileName() Patch provided by Nick Williams","Bug 54658  Implement Part#getSubmittedFileName from SERVLET_SPEC-57","implement part get submit file name getsubmittedfilenam servlet spec","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","15","1","9","4","10","2","6","163","165","163","51","165","3","3","14","145","3300","578","1815","502","1097","916","800","1197","435","762","24","24","27","11","6","1","396","396","441","235","normal"
"54660","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54660 Allow the AccessLogValve file data format to be changed via JMX. The change takes effect as soon as the next message is logged.","Bug 54660  AccessLogValve fileDateFormat can not be changed through JMX","access log valv accesslogvalv file date format filedateformat chang jmx","When an AccessLogValve is added to a catalina host with the JMX addVale() operation on the Host object name, the valve will start with the default fileDateFormat.

Changing the attribute on the valve through it's JMX object name has no effect because the valve is already started.

Executing a rotate() operation on the valve does also have no effect.

Steps to Reproduce:
- Start tomcat server
- Add Host using JMX
- Add valve to Host using JMX
- Set valve attribute fileDateFormat to something else than yyyy-MM-dd, for example yy-MM

Actual Results:
The access log file format will include the default fileDateFormat of yyyy-MM-dd

Expected Results:
The access log file format with yy-MM, as from the example.","access log valv accesslogvalv ad catalina host jmx add vale addval oper host object name valv start default file date format filedateformat chang attribut valv jmx object name effect valv alreadi start execut rotat oper valv effect step reproduc start tomcat server add host use jmx add valv host use jmx set valv attribut file date format filedateformat someth els yyyi dd mmdd exampl yy mm actual result access log file format includ default file date format filedateformat yyyi dd mmdd expect result access log file format yy mm exampl","""java/org/apache/catalina/valves/AccessLogValve.java""","2","2","2","1","13","0","9","2","31","2","16","98","97","97","57","99","0","10","12","77","2087","248","1193","355","690","647","524","789","300","489","21","13","21","4","4","1","259","231","286","109","normal"
"54671","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54671 Align implementation with spec","Bug 54671  Spec says ServerContainerProvider#getServerContainer() should be public, but implemented package-private in Tomcat 8.0","spec say server contain provid servercontainerprovid get server contain getservercontain public implement packag privat packagepriv tomcat","","","""java/javax/websocket/server/ServerContainerProvider.java""","4","4","5","1","29","3","20","6","1","1","1","1","2","1","0","2","1","0","1","0","62","8","28","14","14","26","12","17","11","6","4","4","5","1","2","1","4","4","5","1","critical"
"54690","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54690 Use server defaults not client defaults for SSL protocols and ciphers if none are defined for the connector.","Bug 54690  HTTPS BIO/NIO connector does not enable TLS 1.1 and TLS 1.2 by default","http bio nio connector enabl tl tl default","","","""java/org/apache/tomcat/util/net/jsse/JSSESocketFactory.java""","4","4","4","1","23","2","18","3","1","0","10","25","25","25","11","25","1","3","8","13","780","94","567","207","346","119","277","379","166","213","14","14","14","4","3","0","101","101","110","28","normal"
"54693","179","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54693. - Add a validationQueryTimeout property - Avoid NPE caused by createConnection(..) returns null. (see Comment 6)","Bug 54693  Add a validationQueryTimeout property","add valid queri timeout validationquerytimeout properti","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","3","3","4","1","19","0","13","5","3","6","5","57","57","51","21","57","1","3","18","35","1366","116","854","188","572","424","411","636","185","451","19","19","19","8","6","1","223","223","242","105","enhancement"
"54693","179","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54693. - Add a validationQueryTimeout property - Avoid NPE caused by createConnection(..) returns null. (see Comment 6)","Bug 54693  Add a validationQueryTimeout property","add valid queri timeout validationquerytimeout properti","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","3","3","4","1","19","0","13","5","3","6","5","57","57","51","21","57","1","3","18","35","1366","116","854","188","572","424","411","636","185","451","19","19","19","8","6","1","223","223","242","105","enhancement"
"54693","179","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54693. - Add a validationQueryTimeout property - Avoid NPE caused by createConnection(..) returns null. (see Comment 6)","Bug 54693  Add a validationQueryTimeout property","add valid queri timeout validationquerytimeout properti","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","1","1","1","1","4","0","3","0","1","1","8","122","122","121","3","122","0","0","0","122","870","179","551","283","172","140","177","311","167","144","4","4","4","1","2","0","132","132","137","122","enhancement"
"54693","179","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54693. - Add a validationQueryTimeout property - Avoid NPE caused by createConnection(..) returns null. (see Comment 6)","Bug 54693  Add a validationQueryTimeout property","add valid queri timeout validationquerytimeout properti","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","1","1","1","1","4","0","3","0","1","1","8","122","122","121","3","122","0","0","0","122","870","179","551","283","172","140","177","311","167","144","4","4","4","1","2","0","132","132","137","122","enhancement"
"54693","179","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54693. - Add a validationQueryTimeout property - Avoid NPE caused by createConnection(..) returns null. (see Comment 6)","Bug 54693  Add a validationQueryTimeout property","add valid queri timeout validationquerytimeout properti","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/DataSourceFactory.java""","12","12","13","1","65","9","50","5","1","2","52","6","6","4","0","6","0","0","1","5","586","91","424","140","325","71","216","293","89","204","58","58","58","3","3","0","77","77","79","8","enhancement"
"54693","179","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54693. - Add a validationQueryTimeout property - Avoid NPE caused by createConnection(..) returns null. (see Comment 6)","Bug 54693  Add a validationQueryTimeout property","add valid queri timeout validationquerytimeout properti","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/DataSourceProxy.java""","1","1","1","1","6","0","3","2","1","0","1","139","139","139","2","139","0","1","0","138","1332","246","651","274","226","439","192","360","164","196","4","4","4","3","3","1","167","167","167","141","enhancement"
"54693","179","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54693. - Add a validationQueryTimeout property - Avoid NPE caused by createConnection(..) returns null. (see Comment 6)","Bug 54693  Add a validationQueryTimeout property","add valid queri timeout validationquerytimeout properti","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PoolConfiguration.java""","0","0","0","0","0","0","0","0","1","0","1","0","103","103","0","103","0","0","0","103","879","112","109","108","1","658","107","108","108","0","0","0","0","0","0","6","0","0","0","0","enhancement"
"54693","179","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54693. - Add a validationQueryTimeout property - Avoid NPE caused by createConnection(..) returns null. (see Comment 6)","Bug 54693  Add a validationQueryTimeout property","add valid queri timeout validationquerytimeout properti","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PoolProperties.java""","1","1","1","1","6","0","4","2","3","2","6","127","127","125","55","127","0","0","1","126","1285","226","726","335","306","333","286","458","228","230","6","6","10","5","5","0","171","171","182","150","enhancement"
"54693","179","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54693. - Add a validationQueryTimeout property - Avoid NPE caused by createConnection(..) returns null. (see Comment 6)","Bug 54693  Add a validationQueryTimeout property","add valid queri timeout validationquerytimeout properti","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PooledConnection.java""","2","2","3","1","14","0","9","4","1","0","7","37","37","37","16","37","0","2","2","33","686","74","385","90","249","235","181","287","89","198","14","14","17","7","3","1","107","107","133","48","enhancement"
"54702","0","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54702 Close the stream at the end of the parse operation.","Bug 54702  File descriptor leak at web.xml loading","file descriptor leak web xml load","Hello

I think I've found a file descriptor leak in file /tomcat/trunk/java/org/apache/catalina/startup/ContextConfig.java (method getGlobalWebXmlSource).

A stream is from file ""web.xml"" is not closed.

private WebXml getDefaultWebXmlFragment() {
... 

1284	        InputSource globalWebXml = getGlobalWebXmlSource();
...
1337	            // Parse global web.xml if present
1338	            if (globalWebXml == null) {
1339	                // This is unusual enough to log
1340	                log.info(sm.getString(""contextConfig.defaultMissing""));
1341	            } else {
1342	                parseWebXml(globalWebXml, webXmlDefaultFragment, false);
1343	            }

Here is the full stack trace

[java.io.FileInputStream.<init>(FileInputStream.java:109)] [org.apache.catalina.startup.ContextConfig.getWebXmlSource(ContextConfig.java:1837)] [org.apache.catalina.startup.ContextConfig.getGlobalWebXmlSource(ContextConfig.java:1744)] [org.apache.catalina.startup.ContextConfig.getDefaultWebXmlFragment(ContextConfig.java:1417)] [org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1253)] [org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)] [org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)] [org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)] [org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)] [org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)] [org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)] [org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)] [org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)] [org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)] [org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:977)] [org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:542)] [org.apache.catalina.startup.HostConfig.check(HostConfig.java:1462)] [sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)] [sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)] [sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)] [java.lang.reflect.Method.invoke(Method.java:597)] [org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)] [com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)] [com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)] [org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1445)] [org.apache.catalina.manager.HTMLManagerServlet.upload(HTMLManagerServlet.java:301)] [org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:208)] [javax.servlet.http.HttpServlet.service(HttpServlet.java:647)] [javax.servlet.http.HttpServlet.service(HttpServlet.java:728)] [org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)] [org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)] [org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:213)] [org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)] [org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)] [org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)] [org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)] [org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)] [org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)] [org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)] [org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)] [org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)] [org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)] [org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)] [org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)] [org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)] [org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)] [org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)] [org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822)] [java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)] [java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)] [java.lang.Thread.run(Thread.java:662)]","hello think found file descriptor leak file tomcat trunk java apach catalina startup context config contextconfig java method get global web xml sourc getglobalwebxmlsourc stream file web xml close privat web xml webxml get default web xml fragment getdefaultwebxmlfrag input sourc inputsourc global web xml globalwebxml get global web xml sourc getglobalwebxmlsourc pars global web xml present global web xml globalwebxml null unusu enough log log info sm get string getstr context config contextconfig default miss defaultmiss els pars web xml parsewebxml global web xml globalwebxml web xml default fragment webxmldefaultfrag fals full stack trace java file input stream fileinputstream init file input stream fileinputstream java apach catalina startup context config contextconfig get web xml sourc getwebxmlsourc context config contextconfig java apach catalina startup context config contextconfig get global web xml sourc getglobalwebxmlsourc context config contextconfig java apach catalina startup context config contextconfig get default web xml fragment getdefaultwebxmlfrag context config contextconfig java apach catalina startup context config contextconfig web config webconfig context config contextconfig java apach catalina startup context config contextconfig configur start configurestart context config contextconfig java apach catalina startup context config contextconfig lifecycl event lifecycleev context config contextconfig java apach catalina util lifecycl support lifecyclesupport fire lifecycl event firelifecycleev lifecycl support lifecyclesupport java apach catalina util lifecycl base lifecyclebas fire lifecycl event firelifecycleev lifecycl base lifecyclebas java apach catalina core standard context standardcontext start intern startintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy deploywar host config hostconfig java apach catalina startup host config hostconfig deploy app deployapp host config hostconfig java apach catalina startup host config hostconfig check host config hostconfig java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach tomcat util model base model bean basemodelmbean invok base model bean basemodelmbean java sun jmx interceptor default bean server interceptor defaultmbeanserverinterceptor invok default bean server interceptor defaultmbeanserverinterceptor java sun jmx mbeanserv jmx bean server jmxmbeanserv invok jmx bean server jmxmbeanserv java apach catalina manag manag servlet managerservlet check manag servlet managerservlet java apach catalina manag manag servlet htmlmanagerservlet upload manag servlet htmlmanagerservlet java apach catalina manag manag servlet htmlmanagerservlet do post dopost manag servlet htmlmanagerservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina filter csrf prevent filter csrfpreventionfilt do filter dofilt csrf prevent filter csrfpreventionfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina filter set charact encod filter setcharacterencodingfilt do filter dofilt set charact encod filter setcharacterencodingfilt java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina valv access log valv accesslogvalv invok access log valv accesslogvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net apr endpoint aprendpoint socket processor socketprocessor run apr endpoint aprendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","6","1","34","3","26","5","4","2","9","66","66","64","23","66","0","12","36","18","2648","349","1867","450","1278","433","849","1299","437","862","38","38","45","13","7","0","414","414","458","114","normal"
"54703","52","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54703 Be tolerant of applications that pass CR or LF in setHeader() values. Fix some whitespace parsing issues idnetifed by the extended test cases in readTokenOrQuotedString()","Bug 54703  Nullpointer exception in HttpParser.parseMediaType","nullpoint except http parser httpparser pars medium type parsemediatyp","input for parseMediaType() is

----------
multipart/signed; protocol=""application/pkcs7-signature""; micalg=sha-256; 
	boundary=""----=_Part_121_929034657.1363355797756""
----------

exception trace

java.lang.NullPointerException
        at org.apache.tomcat.util.http.parser.HttpParser.parseMediaType(HttpParser.java:215)
        at org.apache.tomcat.util.http.parser.MediaTypeCache.parse(MediaTypeCache.java:54)
        at org.apache.catalina.connector.Response.setContentType(Response.java:806)
        at org.apache.catalina.connector.Response.checkSpecialHeader(Response.java:1119)
        at org.apache.catalina.connector.Response.setHeader(Response.java:1446)
        at org.apache.catalina.connector.ResponseFacade.setHeader(ResponseFacade.java:535)","input pars medium type parsemediatyp multipart sign protocol applic pkcs7 signatur pkcs7signatur micalg sha boundari part except trace java lang null pointer except nullpointerexcept apach tomcat util http parser http parser httpparser pars medium type parsemediatyp http parser httpparser java apach tomcat util http parser medium type cach mediatypecach pars medium type cach mediatypecach java apach catalina connector respons set content type setcontenttyp respons java apach catalina connector respons check special header checkspecialhead respons java apach catalina connector respons set header sethead respons java apach catalina connector respons facad responsefacad set header sethead respons facad responsefacad java","""java/org/apache/tomcat/util/http/parser/HttpParser.java""","5","5","7","3","29","3","20","5","2","11","8","13","11","2","3","13","0","8","0","5","504","63","323","65","223","119","152","223","56","167","14","10","16","8","3","0","71","67","91","42","normal"
"54703","52","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54703 Be tolerant of applications that pass CR or LF in setHeader() values. Fix some whitespace parsing issues idnetifed by the extended test cases in readTokenOrQuotedString()","Bug 54703  Nullpointer exception in HttpParser.parseMediaType","nullpoint except http parser httpparser pars medium type parsemediatyp","input for parseMediaType() is

----------
multipart/signed; protocol=""application/pkcs7-signature""; micalg=sha-256; 
	boundary=""----=_Part_121_929034657.1363355797756""
----------

exception trace

java.lang.NullPointerException
        at org.apache.tomcat.util.http.parser.HttpParser.parseMediaType(HttpParser.java:215)
        at org.apache.tomcat.util.http.parser.MediaTypeCache.parse(MediaTypeCache.java:54)
        at org.apache.catalina.connector.Response.setContentType(Response.java:806)
        at org.apache.catalina.connector.Response.checkSpecialHeader(Response.java:1119)
        at org.apache.catalina.connector.Response.setHeader(Response.java:1446)
        at org.apache.catalina.connector.ResponseFacade.setHeader(ResponseFacade.java:535)","input pars medium type parsemediatyp multipart sign protocol applic pkcs7 signatur pkcs7signatur micalg sha boundari part except trace java lang null pointer except nullpointerexcept apach tomcat util http parser http parser httpparser pars medium type parsemediatyp http parser httpparser java apach tomcat util http parser medium type cach mediatypecach pars medium type cach mediatypecach java apach catalina connector respons set content type setcontenttyp respons java apach catalina connector respons check special header checkspecialhead respons java apach catalina connector respons set header sethead respons java apach catalina connector respons facad responsefacad set header sethead respons facad responsefacad java","""test/org/apache/tomcat/util/http/parser/TestMediaType.java""","1","1","1","1","7","0","6","0","2","0","15","20","20","20","2","20","0","1","0","19","272","62","179","92","99","31","101","126","68","58","3","3","3","1","1","0","22","22","22","20","normal"
"54708","38","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54708 Handle ROOT##version as well Suggestion by kkolinko","Bug 54708  Use base file name (""ROOT"") as the work directory for the default webapp instead of ""_""","use base file name root work directori default webapp instead","","","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","15","1","9","4","2","0","2","306","306","306","127","306","0","12","9","285","6489","1290","3404","1044","2065","1800","1526","2336","871","1465","51","51","62","9","5","1","710","710","777","395","enhancement"
"54709","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54709 http  -> ws https -> wss","Bug 54709  Official schemes for WebSocket are ""ws""/""wss""; WsWebSocketContainer only allows ""http""/""https""","offici scheme web socket websocket w w web socket contain wswebsocketcontain allow http http","","","""test/org/apache/tomcat/websocket/pojo/TestEncodingDecoding.java""","1","1","1","1","6","0","5","0","9","0","1","15","15","15","4","15","0","0","0","15","217","44","150","88","60","24","79","106","65","41","3","3","4","3","2","0","18","18","20","17","critical"
"54709","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54709 http  -> ws https -> wss","Bug 54709  Official schemes for WebSocket are ""ws""/""wss""; WsWebSocketContainer only allows ""http""/""https""","offici scheme web socket websocket w w web socket contain wswebsocketcontain allow http http","","","""test/org/apache/tomcat/websocket/pojo/TestPojoMethodMapping.java""","1","1","1","1","9","1","8","0","3","0","3","8","8","8","2","8","0","2","0","6","152","28","104","59","43","21","56","73","46","27","5","5","5","3","2","0","13","13","13","10","critical"
"54709","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54709 http  -> ws https -> wss","Bug 54709  Official schemes for WebSocket are ""ws""/""wss""; WsWebSocketContainer only allows ""http""/""https""","offici scheme web socket websocket w w web socket contain wswebsocketcontain allow http http","","","""test/org/apache/tomcat/websocket/TestWsRemoteEndpoint.java""","3","3","3","1","23","4","18","1","1","0","3","3","3","3","1","3","0","1","0","2","130","22","90","49","45","19","60","72","44","28","7","7","7","1","3","0","9","9","9","3","critical"
"54709","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54709 http  -> ws https -> wss","Bug 54709  Official schemes for WebSocket are ""ws""/""wss""; WsWebSocketContainer only allows ""http""/""https""","offici scheme web socket websocket w w web socket contain wswebsocketcontain allow http http","","","""test/org/apache/tomcat/websocket/TestWsWebSocketContainer.java""","1","1","1","1","15","2","11","1","8","3","11","33","33","30","1","33","0","4","0","29","693","156","483","212","284","61","246","315","153","162","8","8","8","4","2","0","60","60","62","36","critical"
"54709","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54709 http  -> ws https -> wss","Bug 54709  Official schemes for WebSocket are ""ws""/""wss""; WsWebSocketContainer only allows ""http""/""https""","offici scheme web socket websocket w w web socket contain wswebsocketcontain allow http http","","","""test/org/apache/tomcat/websocket/TestWsWebSocketContainer.java""","1","1","1","1","15","2","11","1","8","3","11","33","33","30","1","33","0","4","0","29","693","156","483","212","284","61","246","315","153","162","8","8","8","4","2","0","60","60","62","36","critical"
"54709","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54709 http  -> ws https -> wss","Bug 54709  Official schemes for WebSocket are ""ws""/""wss""; WsWebSocketContainer only allows ""http""/""https""","offici scheme web socket websocket w w web socket contain wswebsocketcontain allow http http","","","""java/org/apache/tomcat/websocket/WsWebSocketContainer.java""","2","2","2","1","15","1","11","1","2","0","4","29","29","29","11","29","1","8","2","18","599","115","419","173","242","65","209","280","134","146","10","10","12","1","4","0","65","65","68","29","critical"
"54710","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54710 Add support for InputStream and Reader to OnMessage Add support for CloseReason to OnClose Based on a patch by Nick Williams","Bug 54710  Java WebSocket specification says @OnMessage methods can have InputStream/Reader parameters; @OnClose can have CloseReason parameters","java web socket websocket specif say on messag onmessag method input stream inputstream reader paramet on close onclos close reason closereason paramet","","","""java/org/apache/tomcat/websocket/pojo/PojoEndpointBase.java""","2","2","2","1","7","0","6","0","1","0","2","9","9","9","3","9","0","0","7","2","126","21","83","34","44","22","35","56","33","23","5","5","5","1","2","0","18","18","18","9","critical"
"54710","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54710 Add support for InputStream and Reader to OnMessage Add support for CloseReason to OnClose Based on a patch by Nick Williams","Bug 54710  Java WebSocket specification says @OnMessage methods can have InputStream/Reader parameters; @OnClose can have CloseReason parameters","java web socket websocket specif say on messag onmessag method input stream inputstream reader paramet on close onclos close reason closereason paramet","","","""java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerBase.java""","3","3","3","1","15","0","15","0","1","0","0","2","2","2","7","2","0","0","1","1","76","9","46","20","21","21","28","36","18","18","6","6","6","1","2","0","7","7","7","2","critical"
"54710","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54710 Add support for InputStream and Reader to OnMessage Add support for CloseReason to OnClose Based on a patch by Nick Williams","Bug 54710  Java WebSocket specification says @OnMessage methods can have InputStream/Reader parameters; @OnClose can have CloseReason parameters","java web socket websocket specif say on messag onmessag method input stream inputstream reader paramet on close onclos close reason closereason paramet","","","""java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerPartialBase.java""","3","3","3","1","14","0","14","0","1","0","0","2","2","2","1","2","0","0","0","2","68","7","39","16","17","22","18","25","12","13","5","5","5","1","1","1","6","6","6","2","critical"
"54710","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54710 Add support for InputStream and Reader to OnMessage Add support for CloseReason to OnClose Based on a patch by Nick Williams","Bug 54710  Java WebSocket specification says @OnMessage methods can have InputStream/Reader parameters; @OnClose can have CloseReason parameters","java web socket websocket specif say on messag onmessag method input stream inputstream reader paramet on close onclos close reason closereason paramet","","","""java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerPartialBinary.java""","1","1","1","1","6","0","6","0","1","0","0","1","1","1","0","1","0","0","0","1","36","4","13","9","2","19","5","7","6","1","1","1","1","1","0","1","1","1","1","1","critical"
"54710","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54710 Add support for InputStream and Reader to OnMessage Add support for CloseReason to OnClose Based on a patch by Nick Williams","Bug 54710  Java WebSocket specification says @OnMessage methods can have InputStream/Reader parameters; @OnClose can have CloseReason parameters","java web socket websocket specif say on messag onmessag method input stream inputstream reader paramet on close onclos close reason closereason paramet","","","""java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerPartialText.java""","1","1","1","1","6","0","6","0","1","0","0","1","1","1","0","1","0","0","0","1","35","4","12","8","2","19","4","6","5","1","1","1","1","1","0","2","1","1","1","1","critical"
"54710","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54710 Add support for InputStream and Reader to OnMessage Add support for CloseReason to OnClose Based on a patch by Nick Williams","Bug 54710  Java WebSocket specification says @OnMessage methods can have InputStream/Reader parameters; @OnClose can have CloseReason parameters","java web socket websocket specif say on messag onmessag method input stream inputstream reader paramet on close onclos close reason closereason paramet","","","""java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerWholeBase.java""","3","3","3","1","23","2","19","1","1","0","1","2","4","4","0","4","0","0","2","2","96","14","57","28","27","25","31","39","22","17","6","6","6","1","2","0","7","7","7","2","critical"
"54710","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54710 Add support for InputStream and Reader to OnMessage Add support for CloseReason to OnClose Based on a patch by Nick Williams","Bug 54710  Java WebSocket specification says @OnMessage methods can have InputStream/Reader parameters; @OnClose can have CloseReason parameters","java web socket websocket specif say on messag onmessag method input stream inputstream reader paramet on close onclos close reason closereason paramet","","","""java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerWholeBinary.java""","4","4","4","2","16","0","16","0","1","0","1","3","3","3","1","3","0","0","2","1","101","11","70","31","33","20","32","48","27","21","5","5","5","5","3","0","12","12","12","7","critical"
"54710","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54710 Add support for InputStream and Reader to OnMessage Add support for CloseReason to OnClose Based on a patch by Nick Williams","Bug 54710  Java WebSocket specification says @OnMessage methods can have InputStream/Reader parameters; @OnClose can have CloseReason parameters","java web socket websocket specif say on messag onmessag method input stream inputstream reader paramet on close onclos close reason closereason paramet","","","""java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerWholePong.java""","1","1","1","1","4","0","3","0","1","0","0","3","3","3","0","3","0","0","2","1","47","7","19","13","2","21","6","10","8","2","1","1","1","1","0","1","3","3","3","3","critical"
"54710","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54710 Add support for InputStream and Reader to OnMessage Add support for CloseReason to OnClose Based on a patch by Nick Williams","Bug 54710  Java WebSocket specification says @OnMessage methods can have InputStream/Reader parameters; @OnClose can have CloseReason parameters","java web socket websocket specif say on messag onmessag method input stream inputstream reader paramet on close onclos close reason closereason paramet","","","""java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerWholeText.java""","4","4","4","2","16","0","15","0","1","0","1","3","3","3","1","3","0","0","2","1","99","11","68","29","32","20","29","45","25","20","5","5","5","5","3","0","12","12","12","7","critical"
"54710","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54710 Add support for InputStream and Reader to OnMessage Add support for CloseReason to OnClose Based on a patch by Nick Williams","Bug 54710  Java WebSocket specification says @OnMessage methods can have InputStream/Reader parameters; @OnClose can have CloseReason parameters","java web socket websocket specif say on messag onmessag method input stream inputstream reader paramet on close onclos close reason closereason paramet","","","""java/org/apache/tomcat/websocket/pojo/PojoMethodMapping.java""","4","4","5","2","20","0","20","0","3","4","1","18","18","14","19","18","0","4","0","14","491","52","413","108","275","26","171","266","103","163","31","31","33","14","6","0","85","85","101","46","critical"
"54712","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54712 Code clean-up. Use Locale.ENGLISH consistently for upper/lower case conversions.","Bug 54712  Prefer Locale.ENGLISH over Locale.US for case conversion","prefer local english local u case convers","","","""java/org/apache/tomcat/util/buf/B2CConverter.java""","3","3","3","1","20","0","14","5","1","2","5","6","6","4","6","6","0","0","0","6","207","20","133","45","81","54","75","98","40","58","10","10","15","1","2","0","18","18","23","6","enhancement"
"54712","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54712 Code clean-up. Use Locale.ENGLISH consistently for upper/lower case conversions.","Bug 54712  Prefer Locale.ENGLISH over Locale.US for case conversion","prefer local english local u case convers","","","""java/org/apache/catalina/connector/Connector.java""","1","1","1","1","12","1","5","5","1","0","4","65","65","65","23","65","0","0","8","57","1074","267","447","139","254","360","198","298","127","171","8","8","8","3","2","1","99","99","103","67","enhancement"
"54712","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54712 Code clean-up. Use Locale.ENGLISH consistently for upper/lower case conversions.","Bug 54712  Prefer Locale.ENGLISH over Locale.US for case conversion","prefer local english local u case convers","","","""java/org/apache/tomcat/util/http/parser/HttpParser.java""","5","5","7","3","29","3","20","5","2","11","8","13","11","2","3","13","0","8","0","5","504","63","323","65","223","119","152","223","56","167","14","10","16","8","3","0","71","67","91","42","enhancement"
"54712","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54712 Code clean-up. Use Locale.ENGLISH consistently for upper/lower case conversions.","Bug 54712  Prefer Locale.ENGLISH over Locale.US for case conversion","prefer local english local u case convers","","","""java/org/apache/tomcat/util/http/parser/MediaType.java""","2","2","2","2","10","0","9","0","1","0","0","8","8","8","6","8","0","0","1","7","125","14","89","25","48","22","46","68","25","43","5","5","6","5","4","0","17","17","20","16","enhancement"
"54712","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54712 Code clean-up. Use Locale.ENGLISH consistently for upper/lower case conversions.","Bug 54712  Prefer Locale.ENGLISH over Locale.US for case conversion","prefer local english local u case convers","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PoolProperties.java""","1","1","1","1","6","0","4","2","3","2","6","125","125","123","54","125","0","0","1","124","1263","225","711","329","299","327","284","452","225","227","6","6","10","5","5","0","168","168","179","148","enhancement"
"54712","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54712 Code clean-up. Use Locale.ENGLISH consistently for upper/lower case conversions.","Bug 54712  Prefer Locale.ENGLISH over Locale.US for case conversion","prefer local english local u case convers","","","""test/org/apache/catalina/startup/SimpleHttpClient.java""","1","1","1","1","6","0","5","0","1","0","24","39","40","40","16","40","0","3","1","36","434","64","289","121","153","81","153","214","114","100","6","6","7","1","3","0","59","59","61","39","enhancement"
"54721","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54721 RemoteEndpoint blocks indefinitely if sendObject called with BinaryStream of TextStream encoders Patch provided by Nick Williams.","Bug 54721  RemoteEndpoint blocks indefinitely if sendObject called with BinaryStream of TextStream encoders","remot endpoint remoteendpoint block indefinit send object sendobject call binari stream binarystream text stream textstream encod","","","""java/org/apache/tomcat/websocket/WsRemoteEndpointImplBase.java""","2","2","2","1","9","0","9","0","9","1","1","62","65","64","52","65","5","4","5","51","900","167","684","233","375","49","322","463","187","276","10","10","11","3","3","0","126","126","140","66","critical"
"54724","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54724 Session should throw IllegalStateException if closed when methods on it are called","Bug 54724  WsSession does not throw IllegalStateException if closed when methods on it are called","session wssession throw illeg state except illegalstateexcept close method call","Spec JavaDoc says:

""Once the session is closed, it is no longer valid for use by applications. Calling any of its methods once the session has been closed will result in an IllegalStateException being thrown. Developers should retrieve any information from the session during the Endpoint.onClose(Session, CloseReason) method.""

Of course, the rules of Closeable also apply here, and calling Session#close(...) more than once should have no effect subsequent times.

There are actually three problems here:

1) None of the methods throw IllegalStateException if the session is closed. Instead, they return things (like the basic remote, for example), and some methods in the endpoint implementation will not notice concurrent exceptions from the socket and then block forever waiting four the Countdown to clear.

2) The Session#state is never actually changed to State.CLOSED unless Session#onClose is called. However, Session#onClose is never actually called that I can find (though I will look harder before I make changes).

3) Even in Session#onClose, the state is incorrectly changed to State.CLOSED BEFORE Endpoint#onClose is called, when it should be changed AFTER.

I'm working on a patch for this.","spec java doc javadoc say session close longer valid use applic call method session close result illeg state except illegalstateexcept thrown develop retriev inform session endpoint on close onclos session close reason closereason method cours rule closeabl appli call session close effect subsequ time actual three problem none method throw illeg state except illegalstateexcept session close instead return thing like basic remot exampl method endpoint implement notic concurr except socket block forev wait four countdown clear session state never actual chang state close unless session on close onclos call howev session on close onclos never actual call find though look harder make chang even session on close onclos state incorrectli chang state close endpoint on close onclos call chang work patch","""test/org/apache/tomcat/websocket/TestWsWebSocketContainer.java""","1","1","1","1","15","2","11","1","8","3","11","33","33","30","1","33","0","4","0","29","693","156","483","212","284","61","246","315","153","162","8","8","8","4","2","0","60","60","62","36","major"
"54724","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54724 Session should throw IllegalStateException if closed when methods on it are called","Bug 54724  WsSession does not throw IllegalStateException if closed when methods on it are called","session wssession throw illeg state except illegalstateexcept close method call","Spec JavaDoc says:

""Once the session is closed, it is no longer valid for use by applications. Calling any of its methods once the session has been closed will result in an IllegalStateException being thrown. Developers should retrieve any information from the session during the Endpoint.onClose(Session, CloseReason) method.""

Of course, the rules of Closeable also apply here, and calling Session#close(...) more than once should have no effect subsequent times.

There are actually three problems here:

1) None of the methods throw IllegalStateException if the session is closed. Instead, they return things (like the basic remote, for example), and some methods in the endpoint implementation will not notice concurrent exceptions from the socket and then block forever waiting four the Countdown to clear.

2) The Session#state is never actually changed to State.CLOSED unless Session#onClose is called. However, Session#onClose is never actually called that I can find (though I will look harder before I make changes).

3) Even in Session#onClose, the state is incorrectly changed to State.CLOSED BEFORE Endpoint#onClose is called, when it should be changed AFTER.

I'm working on a patch for this.","spec java doc javadoc say session close longer valid use applic call method session close result illeg state except illegalstateexcept thrown develop retriev inform session endpoint on close onclos session close reason closereason method cours rule closeabl appli call session close effect subsequ time actual three problem none method throw illeg state except illegalstateexcept session close instead return thing like basic remot exampl method endpoint implement notic concurr except socket block forev wait four countdown clear session state never actual chang state close unless session on close onclos call howev session on close onclos never actual call find though look harder make chang even session on close onclos state incorrectli chang state close endpoint on close onclos call chang work patch","""java/org/apache/tomcat/websocket/WsSession.java""","1","1","1","1","7","0","6","0","2","0","3","38","36","38","28","38","1","1","5","31","473","94","342","144","159","37","153","218","102","116","8","8","8","3","2","0","62","62","63","40","major"
"54732","1","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54732 Fix leak of statements in StatementCache interceptor.","Bug 54732  StatementCache interceptor does not forward calls to Statement.close() which causes memory leaks","statement cach statementcach interceptor forward call statement close caus memori leak","","","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/interceptor/StatementCache.java""","2","2","2","1","9","0","8","0","2","0","6","19","19","19","7","19","0","0","1","18","262","36","200","75","114","26","101","146","60","86","7","7","8","5","3","0","42","42","45","25","major"
"54732","1","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54732 Fix leak of statements in StatementCache interceptor.","Bug 54732  StatementCache interceptor does not forward calls to Statement.close() which causes memory leaks","statement cach statementcach interceptor forward call statement close caus memori leak","","","""modules/jdbc-pool/src/test/java/org/apache/tomcat/jdbc/test/TestStatementCache.java""","1","1","1","1","8","0","8","0","2","0","1","9","9","9","0","9","0","1","0","8","133","17","100","40","61","17","68","80","32","48","3","3","3","1","1","0","11","11","11","9","major"
"54732","1","Konstantin Kolinko","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54732 Fix leak of statements in StatementCache interceptor.","Bug 54732  StatementCache interceptor does not forward calls to Statement.close() which causes memory leaks","statement cach statementcach interceptor forward call statement close caus memori leak","","","""modules/jdbc-pool/src/test/java/org/apache/tomcat/jdbc/test/TestStatementCache.java""","1","1","1","1","8","0","8","0","2","0","1","9","9","9","0","9","0","1","0","8","133","17","100","40","61","17","68","80","32","48","3","3","3","1","1","0","11","11","11","9","major"
"54745","89","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54745 Fix JarScanning when Tomcat is started via Java WebStart. Patch provided by Nick Williams.","Bug 54745  Tomcat JarScanning does not work when Tomcat started with Java Web Start","tomcat jar scan jarscan work tomcat start java web start","","","""java/org/apache/tomcat/util/scan/StandardJarScanner.java""","3","3","3","1","16","1","13","1","1","0","2","14","14","14","5","14","0","3","0","11","347","35","214","72","125","98","94","144","66","78","24","24","27","3","6","0","49","49","55","16","enhancement"
"54748","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54748 Don't generate an error during a normal close that there is more data to read when there isn't.","Bug 54748  IOException in echo WebSocket example","except ioexcept echo web socket websocket exampl","The IOException ""New frame received after a close control frame"" is raised after pressing Disconnect. The exception can be detected by adding an onError method to EchoEndpoint.","except ioexcept new frame receiv close control frame rais press disconnect except detect ad on error onerror method echo endpoint echoendpoint","""java/org/apache/tomcat/websocket/WsFrameBase.java""","4","4","5","2","24","0","21","2","2","1","1","20","19","20","24","21","0","15","3","3","619","63","469","93","336","87","208","305","79","226","15","15","16","12","4","0","97","97","103","46","normal"
"54748","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54748 Don't generate an error during a normal close that there is more data to read when there isn't.","Bug 54748  IOException in echo WebSocket example","except ioexcept echo web socket websocket exampl","The IOException ""New frame received after a close control frame"" is raised after pressing Disconnect. The exception can be detected by adding an onError method to EchoEndpoint.","except ioexcept new frame receiv close control frame rais press disconnect except detect ad on error onerror method echo endpoint echoendpoint","""java/org/apache/tomcat/websocket/WsFrameClient.java""","1","1","1","1","10","1","8","1","2","0","0","6","6","6","3","6","0","2","1","3","112","22","68","26","31","22","32","45","21","24","3","3","3","1","1","0","11","11","11","6","normal"
"54748","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54748 Don't generate an error during a normal close that there is more data to read when there isn't.","Bug 54748  IOException in echo WebSocket example","except ioexcept echo web socket websocket exampl","The IOException ""New frame received after a close control frame"" is raised after pressing Disconnect. The exception can be detected by adding an onError method to EchoEndpoint.","except ioexcept new frame receiv close control frame rais press disconnect except detect ad on error onerror method echo endpoint echoendpoint","""java/org/apache/tomcat/websocket/server/WsFrameServer.java""","2","2","2","1","9","0","7","1","1","0","0","3","3","3","2","3","0","0","1","2","66","11","34","15","14","21","16","24","13","11","4","4","4","3","2","1","6","6","6","5","normal"
"54755","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54755 Endpoint instantiation should be via Configurator Patch provided by rstoyanchev","Bug 54755  Type-based Endpoint's cannot be deployed by instance","type base typebas endpoint cannot deploy instanc","For type-based Endpoint's, WsServlet instantiates the Endpoint via reflection instead of using the Configurator as is done in PojoEndpointServer:

sec.getConfigurator().getEndpointInstance(sec.getEndpointClass())","type base typebas endpoint servlet wsservlet instanti endpoint via reflect instead use configur done pojo endpoint server pojoendpointserv sec get configur getconfigur get endpoint instanc getendpointinst sec get endpoint class getendpointclass","""java/org/apache/tomcat/websocket/server/WsServlet.java""","6","6","6","3","36","1","32","2","1","0","3","4","4","4","1","4","0","3","1","0","220","17","167","68","101","36","93","122","63","59","14","14","14","6","3","0","24","24","24","12","normal"
"54781","21","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54781 Fix NPE if no matching Endpoint is found. Handle forwarded requests as well.","Bug 54781  NPE in WsServerContainer if there is no matching path","npe server contain wsservercontain match path","","","""java/org/apache/tomcat/websocket/server/WsFilter.java""","4","4","4","2","28","1","24","2","1","0","2","6","6","6","1","6","0","3","0","3","259","28","188","78","109","43","101","133","71","62","15","15","17","6","3","0","27","27","29","14","normal"
"54781","21","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54781 Fix NPE if no matching Endpoint is found. Handle forwarded requests as well.","Bug 54781  NPE in WsServerContainer if there is no matching path","npe server contain wsservercontain match path","","","""java/org/apache/tomcat/websocket/server/WsServerContainer.java""","2","2","2","1","14","1","10","2","3","2","4","15","15","13","6","15","0","2","3","10","336","57","207","92","111","73","93","130","72","58","6","6","6","5","2","0","32","32","32","19","normal"
"54792","20","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54792 Application shouldn't be trying to close the session in an @onClose method.","Bug 54792  IllegalStateException with chat sample","illeg state except illegalstateexcept chat sampl","This looks related to 54659 and 54724 but possibly a new issue. To reproduce, open the chat sample page, send a message or two, and then close the browser tab. The following exception appears in the log and it doesn't seem to step from anything done in the application:

java.lang.IllegalStateException: The WebSocket session has been closed and no method (apart from close()) may be called on a closed session
        at org.apache.tomcat.websocket.WsSession.checkState(WsSession.java:516)
        at org.apache.tomcat.websocket.WsSession.getMessageHandlers(WsSession.java:191)
        at org.apache.tomcat.websocket.pojo.PojoEndpointBase.onClose(PojoEndpointBase.java:113)
        at org.apache.tomcat.websocket.WsSession.fireEndpointOnClose(WsSession.java:392)
        at org.apache.tomcat.websocket.WsSession.onClose(WsSession.java:370)
        at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.close(WsHttpUpgradeHandler.java:166)
        at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.access$200(WsHttpUpgradeHandler.java:44)
        at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler$WsReadListener.onDataAvailable(WsHttpUpgradeHandler.java:192)
        at org.apache.coyote.http11.upgrade.AbstractServletInputStream.onDataAvailable(AbstractServletInputStream.java:169)
        at org.apache.coyote.http11.upgrade.AbstractProcessor.upgradeDispatch(AbstractProcessor.java:94)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:618)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1581)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1537)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)","look relat possibl new issu reproduc open chat sampl page send messag two close browser tab follow except appear log doesn seem step anyth done applic java lang illeg state except illegalstateexcept web socket websocket session close method apart close may call close session apach tomcat websocket session wssession check state checkstat session wssession java apach tomcat websocket session wssession get messag handler getmessagehandl session wssession java apach tomcat websocket pojo pojo endpoint base pojoendpointbas on close onclos pojo endpoint base pojoendpointbas java apach tomcat websocket session wssession fire endpoint on close fireendpointonclos session wssession java apach tomcat websocket session wssession on close onclos session wssession java apach tomcat websocket server http upgrad handler wshttpupgradehandl close http upgrad handler wshttpupgradehandl java apach tomcat websocket server http upgrad handler wshttpupgradehandl access http upgrad handler wshttpupgradehandl java apach tomcat websocket server http upgrad handler wshttpupgradehandl read listen wsreadlisten on data avail ondataavail http upgrad handler wshttpupgradehandl java apach coyot http11 upgrad abstract servlet input stream abstractservletinputstream on data avail ondataavail abstract servlet input stream abstractservletinputstream java apach coyot http11 upgrad abstract processor abstractprocessor upgrad dispatch upgradedispatch abstract processor abstractprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor do run dorun nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""webapps/examples/WEB-INF/classes/websocket/chat/ChatAnnotation.java""","1","1","1","1","8","0","8","0","1","1","3","5","5","4","2","5","0","1","0","4","98","15","64","34","30","19","33","44","27","17","4","4","4","1","3","0","9","9","9","5","normal"
"54800","18","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54800 Fix memory leaks when using WebSocket client triggered by JVM created threads not having the correct context class loader set.","Bug 54800  Possible thread/memory leak with use of WebSocketContainer","possibl thread memori leak use web socket contain websocketcontain","Whenever WebSocketContainer is used to connect to a server endpoint, the following message appears when Tomcat shuts down:

SEVERE: The web application [/websocket-test] appears to have started a thread named [Thread-4] but has failed to stop it. This is very likely to create a memory leak.

The message is repeated for 6 different threads. I don't have proof this is caused by the use of WebSocketContainer but the messages don't appear when it isn't used.

The Endpoint used to connect is very simple. It sends a message when the session is opened to the EchoEndpoint on the server side, and prints the response and closes when the message is echoed back.","whenev web socket contain websocketcontain use connect server endpoint follow messag appear tomcat shut sever web applic websocket test websockettest appear start thread name thread fail stop like creat memori leak messag repeat differ thread proof caus use web socket contain websocketcontain messag appear isn use endpoint use connect simpl send messag session open echo endpoint echoendpoint server side print respons close messag echo back","""java/org/apache/tomcat/websocket/WsWebSocketContainer.java""","2","2","2","1","19","2","14","2","1","0","8","28","28","28","10","28","1","9","2","16","707","126","502","206","302","79","253","335","157","178","13","13","15","3","4","0","76","76","80","30","normal"
"54801","20","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54801 and https://issues.apache.org/bugzilla/show_bug.cgi?id=54821 Don'try to parse EL expressions if EL is disabled or inside scriptlets. Based on patches by kkolinko","Bug 54801  EL-like expressions in jsp:scriptlet break compilation of JSP XML documents","like ellik express jsp scriptlet break compil jsp xml document","","","""java/org/apache/jasper/compiler/JspDocumentParser.java""","5","5","6","1","36","2","32","2","2","3","3","32","32","29","17","32","1","13","0","18","1482","125","1110","222","819","255","338","513","151","362","39","39","46","12","5","0","177","177","215","52","normal"
"54801","20","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54801 and https://issues.apache.org/bugzilla/show_bug.cgi?id=54821 Don'try to parse EL expressions if EL is disabled or inside scriptlets. Based on patches by kkolinko","Bug 54801  EL-like expressions in jsp:scriptlet break compilation of JSP XML documents","like ellik express jsp scriptlet break compil jsp xml document","","","""test/org/apache/jasper/compiler/TestJspDocumentParser.java""","1","1","1","1","17","4","12","2","1","0","0","2","2","2","0","2","0","0","0","2","74","17","38","24","17","21","24","28","19","9","2","2","2","1","1","1","3","3","3","2","normal"
"54801","20","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54801 and https://issues.apache.org/bugzilla/show_bug.cgi?id=54821 Don'try to parse EL expressions if EL is disabled or inside scriptlets. Based on patches by kkolinko","Bug 54801  EL-like expressions in jsp:scriptlet break compilation of JSP XML documents","like ellik express jsp scriptlet break compil jsp xml document","","","""test/org/apache/jasper/compiler/TestJspDocumentParser.java""","1","1","1","1","17","4","12","2","1","0","0","2","2","2","0","2","0","0","0","2","74","17","38","24","17","21","24","28","19","9","2","2","2","1","1","1","3","3","3","2","normal"
"54807","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54807 Forgot to create TreeSet with correct Comparator. Add a test case that checks the context starts correctly.","Bug 54807  [jsr356] java.lang.ClassCastException: org.apache.tomcat.websocket.server.WsServerContainer$TemplatePathMatch","jsr356 java lang class cast except classcastexcept apach tomcat websocket server server contain wsservercontain templat path match templatepathmatch","Caused by: java.lang.ClassCastException: org.apache.tomcat.websocket.server.WsServerContainer$TemplatePathMatch cannot be cast to java.lang.Comparable
	at java.util.TreeMap.compare(TreeMap.java:1188)
	at java.util.TreeMap.put(TreeMap.java:531)
	at java.util.TreeSet.add(TreeSet.java:255)
	at org.apache.tomcat.websocket.server.WsServerContainer.addEndpoint(WsServerContainer.java:144)
	at org.apache.tomcat.websocket.server.WsSci.onStartup(WsSci.java:118)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5195)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
	... 11 more

Reproducible when a path is defined as {path}. For example:

    @Override
    public Set<ServerEndpointConfig> getEndpointConfigs(Set<Class<? extends Endpoint>> endpointClasses) {
        logger.debug(""{} detected"", JSR356ServerEndpointConfig.class.getName());
        return new HashSet<ServerEndpointConfig>() {{
            add(ServerEndpointConfig.Builder.create(JSR356Endpoint.class, ""/{path}"").configurator(c).build());
        }};
    }","caus java lang class cast except classcastexcept apach tomcat websocket server server contain wsservercontain templat path match templatepathmatch cannot cast java lang compar java util tree map treemap compar tree map treemap java java util tree map treemap put tree map treemap java java util tree set treeset add tree set treeset java apach tomcat websocket server server contain wsservercontain add endpoint addendpoint server contain wsservercontain java apach tomcat websocket server sci wssci on startup onstartup sci wssci java apach catalina core standard context standardcontext start intern startintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java reproduc path defin path exampl overrid public set server endpoint config serverendpointconfig get endpoint config getendpointconfig set class extend endpoint endpoint class endpointclass logger debug detect r356 server endpoint config jsr356serverendpointconfig class get name getnam return new hash set hashset server endpoint config serverendpointconfig add server endpoint config serverendpointconfig builder creat r356 endpoint jsr356endpoint class path configur build","""java/org/apache/tomcat/websocket/server/WsServerContainer.java""","2","2","2","1","16","1","11","3","3","1","3","13","13","12","6","13","0","1","3","9","320","54","199","88","108","68","91","126","69","57","6","6","6","5","2","0","30","30","30","17","normal"
"54822","9","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54822 Fix handling of query strings with SPDY. Based on a patch by Sheldon Shao.","Bug 54822  URL with Query String can't work over SPDY","url queri string work spdi","","","""java/org/apache/coyote/spdy/SpdyProcessor.java""","4","4","4","1","21","1","15","4","3","0","1","21","21","21","9","21","1","3","1","16","576","77","376","115","237","124","197","284","98","186","33","33","33","6","3","0","87","87","89","28","normal"
"54851","0","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54851 Directories without any web.xml fragments should not impact the status of distributable. Patch provided by Trask Stalnaker.","Bug 54851  Folder without web-fragment.xml should not impact the status of distributable","folder without web fragment webfrag xml impact statu distribut","","","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","6","1","34","3","26","5","4","2","9","66","66","64","23","66","0","12","36","18","2654","350","1862","451","1275","443","849","1297","438","859","38","38","45","13","7","0","412","412","456","114","normal"
"54888","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54888 Support a csv list with the ForEach tag plugin Based on a patch provided by Sheldon Shao","Bug 54888  TagPlugin ""ForEach"" doesn't support CSV items","tag plugin tagplugin for each foreach doesn support csv item","","","""java/org/apache/jasper/tagplugins/jstl/core/ForEach.java""","5","5","5","1","106","10","85","12","1","0","0","3","3","3","4","3","0","2","0","1","350","38","262","17","233","53","107","124","16","108","10","10","10","3","2","0","16","16","16","5","normal"
"54888","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54888 Support a csv list with the ForEach tag plugin Based on a patch provided by Sheldon Shao","Bug 54888  TagPlugin ""ForEach"" doesn't support CSV items","tag plugin tagplugin for each foreach doesn support csv item","","","""test/org/apache/jasper/tagplugins/jstl/core/TestForEach.java""","1","1","1","1","13","3","10","1","1","0","0","1","1","1","0","1","0","0","0","1","42","8","18","12","8","17","12","14","10","4","1","1","1","1","0","1","1","1","1","1","normal"
"54888","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54888 Support a csv list with the ForEach tag plugin Based on a patch provided by Sheldon Shao","Bug 54888  TagPlugin ""ForEach"" doesn't support CSV items","tag plugin tagplugin for each foreach doesn support csv item","","","""test/org/apache/jasper/tagplugins/jstl/core/TestForEach.java""","1","1","1","1","13","3","10","1","1","0","0","1","1","1","0","1","0","0","0","1","42","8","18","12","8","17","12","14","10","4","1","1","1","1","0","1","1","1","1","1","normal"
"54906","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54906 Better error message for ConcurrentModificationException when checking for memory leaks and continue with remaining checks. Based on a patch by NateC.","Bug 54906  WebappClassLoader.loadedByThisOrChild can throw ConcurrentModificationException","webapp class loader webappclassload load by thi or child loadedbythisorchild throw concurr modif except concurrentmodificationexcept","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","5","2","30","2","20","7","5","1","8","85","85","84","33","85","3","13","18","51","3188","488","1884","434","1302","821","850","1301","391","910","42","42","50","24","10","0","446","446","476","213","enhancement"
"54926","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54926 Re-order the validation checks. Order is now: - Is this a WebSocket upgrade? - Is there a matching endpoint? - Validate remaining headers","Bug 54926  WsFilter performs handshake validation even if it doesn't have a mapped endpoint","filter wsfilter perform handshak valid even doesn map endpoint","WsFilter performs several validations on WebSocket requests before checking if there is a registered Endpoint. I think the check for registered Endponts (and delegation to the next Filter) should take place first and the filter should do no further processing if there is mapped Endpoint for that URL.

For example a SockJS protocol test send a POST request with a connection and upgrade headers but no ws version header and expects back a 405 (invalid HTTP method) where WsFilter sends 426 even though it has no Endpoint mapped at that URL.","filter wsfilter perform sever valid web socket websocket request check regist endpoint think check regist endpont deleg next filter take place first filter process map endpoint url exampl sock sockj protocol send post request connect upgrad header w version header expect back invalid http method filter wsfilter send even though endpoint map url","""java/org/apache/tomcat/websocket/server/WsFilter.java""","4","4","5","2","30","2","25","3","1","0","2","6","6","6","1","6","0","3","0","3","266","29","192","78","112","45","103","136","71","65","16","16","18","7","3","0","28","28","30","15","normal"
"54928","19","Mark Emlyn David Thomas","Add a test case for bug 54928","Bug 54928  IllegalStateException: Calling [asyncError()] is not valid for a request with Async state [COMPLETING]","illeg state except illegalstateexcept call async error asyncerror valid request async state complet","In an async scenario (request.startAsync), when the client goes away, trying to write to the response raises an IOException. If I then call asyncContext.complete() in order to finalize and clean up the request, soon after the following exception occurs:

java.lang.IllegalStateException: Calling [asyncError()] is not valid for a request with Async state [COMPLETING]
        at org.apache.coyote.AsyncStateMachine.asyncError(AsyncStateMachine.java:304)
        at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:793)
        at org.apache.coyote.Request.action(Request.java:373)
        at org.apache.catalina.core.AsyncContextImpl.setErrorState(AsyncContextImpl.java:441)
        at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:312)
        at org.apache.coyote.http11.AbstractHttp11Processor.asyncDispatch(AbstractHttp11Processor.java:1509)
        at org.apache.coyote.http11.Http11NioProcessor.asyncDispatch(Http11NioProcessor.java:221)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:619)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1581)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1540)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

It looks like an attempt to maybe to send an error event to AsyncListener's but asyncContext.complete has already been called.

Is calling asyncContext.complete() a reasonable way to handle an IOException from the response in order to finalize the request and release any resorces associated with it?","async scenario request start async startasync client go away tri write respons rais except ioexcept call async context asynccontext complet order final clean request soon follow except occur java lang illeg state except illegalstateexcept call async error asyncerror valid request async state complet apach coyot async state machin asyncstatemachin async error asyncerror async state machin asyncstatemachin java apach coyot http11 abstract http11 processor abstracthttp11processor action abstract http11 processor abstracthttp11processor java apach coyot request action request java apach catalina core async context impl asynccontextimpl set error state seterrorst async context impl asynccontextimpl java apach catalina connector coyot adapt coyoteadapt async dispatch asyncdispatch coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor async dispatch asyncdispatch abstract http11 processor abstracthttp11processor java apach coyot http11 http11 nio processor http11nioprocessor async dispatch asyncdispatch http11 nio processor http11nioprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor do run dorun nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java look like attempt mayb send error event async listen asynclisten async context asynccontext complet alreadi call call async context asynccontext complet reason way handl except ioexcept respons order final request releas resorc associ","""test/org/apache/catalina/connector/TestCoyoteAdapter.java""","1","1","1","1","6","0","5","0","3","0","2","24","24","24","1","24","0","4","2","18","253","55","167","88","71","36","82","111","61","50","2","2","3","1","1","0","26","26","27","24","normal"
"54944","18","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54944 Enhancements to TestFormAuthenticator. Patch by Brian Burch","Bug 54944  Enhancements to TestFormAuthenticator","enhanc test form authent testformauthent","","","""test/org/apache/catalina/authenticator/TestFormAuthenticator.java""","2","2","2","1","13","0","12","0","2","0","1","12","12","12","4","12","0","6","0","6","229","30","172","50","114","27","100","126","43","83","5","5","5","3","1","0","24","24","24","14","enhancement"
"54947","18","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54947 NIO connector incorrectly rejects a request if the CRLF terminating the request line is split across multiple packets. Patch for the fix by Konstantin Preier. I added a test case.","Bug 54947  Http11NioProtocol generates HTTP 505 responses on valid requests if request is split across multiple packets","http11 nio protocol http11nioprotocol gener http respons valid request request split across multipl packet","If an HTTP request is broken up across multiple packets *and* the first packet contains a GET request up to ""\r"" AND the ""\n"" terminating the first line of the request is included in the next packet Tomcat incorrectly throws an HTTP ""505 Version Not Supported"" response.  This is with the Http11NioProtocol connector only - the default HTTP/1.1 connector does not exhibit this problem.

An example request:
Packet 1: GET / HTTP/1.1\r
Packet 2: \nHost: localhost\r\n
Packet 3: Connection: Close\r\n\r\n

Response:
HTTP/1.1 505 HTTP Version Not Supported
Server: Apache-Coyote/1.1
Date: Thu, 09 May 2013 20:23:58 GMT
Connection: close

The following Python program reproduces the problem for me in both Tomcat 6.0.37 and Tomcat 7.0.39:
""""""
#!/usr/bin/python

import socket
import time

s = socket.socket()
s.connect((""localhost"",8080))
s.sendall(""GET / HTTP/1.1\r"")
time.sleep(1.5) # make sure the above goes out in its own packet
s.sendall(""\nHost: localhost\r\n"")
s.sendall(""Connection: close\r\n\r\n"")
print s.makefile().read()
""""""

Moving the ""\n"" to from the second sendall to the end of the first sendall causes Tomcat to respond correctly.","http request broken across multipl packet first packet contain get request termin first line request includ next packet tomcat incorrectli throw http version support respons http11 nio protocol http11nioprotocol connector default http connector exhibit problem exampl request packet get http packet host nhost localhost packet connect close respons http http version support server apach coyot date thu may gmt connect close follow python program reproduc problem tomcat tomcat usr python import socket import time socket socket connect localhost sendal get http time sleep make sure go packet sendal host nhost localhost sendal connect close print makefil read move second sendal first sendal caus tomcat respond correctli","""java/org/apache/coyote/http11/InternalNioInputBuffer.java""","5","5","6","3","30","2","22","6","5","0","2","21","17","21","24","21","0","4","3","14","858","107","523","96","357","239","246","364","71","293","40","40","48","27","5","0","119","119","135","81","normal"
"54947","18","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54947 NIO connector incorrectly rejects a request if the CRLF terminating the request line is split across multiple packets. Patch for the fix by Konstantin Preier. I added a test case.","Bug 54947  Http11NioProtocol generates HTTP 505 responses on valid requests if request is split across multiple packets","http11 nio protocol http11nioprotocol gener http respons valid request request split across multipl packet","If an HTTP request is broken up across multiple packets *and* the first packet contains a GET request up to ""\r"" AND the ""\n"" terminating the first line of the request is included in the next packet Tomcat incorrectly throws an HTTP ""505 Version Not Supported"" response.  This is with the Http11NioProtocol connector only - the default HTTP/1.1 connector does not exhibit this problem.

An example request:
Packet 1: GET / HTTP/1.1\r
Packet 2: \nHost: localhost\r\n
Packet 3: Connection: Close\r\n\r\n

Response:
HTTP/1.1 505 HTTP Version Not Supported
Server: Apache-Coyote/1.1
Date: Thu, 09 May 2013 20:23:58 GMT
Connection: close

The following Python program reproduces the problem for me in both Tomcat 6.0.37 and Tomcat 7.0.39:
""""""
#!/usr/bin/python

import socket
import time

s = socket.socket()
s.connect((""localhost"",8080))
s.sendall(""GET / HTTP/1.1\r"")
time.sleep(1.5) # make sure the above goes out in its own packet
s.sendall(""\nHost: localhost\r\n"")
s.sendall(""Connection: close\r\n\r\n"")
print s.makefile().read()
""""""

Moving the ""\n"" to from the second sendall to the end of the first sendall causes Tomcat to respond correctly.","http request broken across multipl packet first packet contain get request termin first line request includ next packet tomcat incorrectli throw http version support respons http11 nio protocol http11nioprotocol connector default http connector exhibit problem exampl request packet get http packet host nhost localhost packet connect close respons http http version support server apach coyot date thu may gmt connect close follow python program reproduc problem tomcat tomcat usr python import socket import time socket socket connect localhost sendal get http time sleep make sure go packet sendal host nhost localhost sendal connect close print makefil read move second sendal first sendal caus tomcat respond correctli","""test/org/apache/catalina/startup/SimpleHttpClient.java""","1","1","1","1","6","0","5","0","1","0","24","39","40","40","16","40","0","3","0","37","434","64","289","121","153","81","153","214","114","100","6","6","7","1","3","0","59","59","61","39","normal"
"54947","18","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54947 NIO connector incorrectly rejects a request if the CRLF terminating the request line is split across multiple packets. Patch for the fix by Konstantin Preier. I added a test case.","Bug 54947  Http11NioProtocol generates HTTP 505 responses on valid requests if request is split across multiple packets","http11 nio protocol http11nioprotocol gener http respons valid request request split across multipl packet","If an HTTP request is broken up across multiple packets *and* the first packet contains a GET request up to ""\r"" AND the ""\n"" terminating the first line of the request is included in the next packet Tomcat incorrectly throws an HTTP ""505 Version Not Supported"" response.  This is with the Http11NioProtocol connector only - the default HTTP/1.1 connector does not exhibit this problem.

An example request:
Packet 1: GET / HTTP/1.1\r
Packet 2: \nHost: localhost\r\n
Packet 3: Connection: Close\r\n\r\n

Response:
HTTP/1.1 505 HTTP Version Not Supported
Server: Apache-Coyote/1.1
Date: Thu, 09 May 2013 20:23:58 GMT
Connection: close

The following Python program reproduces the problem for me in both Tomcat 6.0.37 and Tomcat 7.0.39:
""""""
#!/usr/bin/python

import socket
import time

s = socket.socket()
s.connect((""localhost"",8080))
s.sendall(""GET / HTTP/1.1\r"")
time.sleep(1.5) # make sure the above goes out in its own packet
s.sendall(""\nHost: localhost\r\n"")
s.sendall(""Connection: close\r\n\r\n"")
print s.makefile().read()
""""""

Moving the ""\n"" to from the second sendall to the end of the first sendall causes Tomcat to respond correctly.","http request broken across multipl packet first packet contain get request termin first line request includ next packet tomcat incorrectli throw http version support respons http11 nio protocol http11nioprotocol connector default http connector exhibit problem exampl request packet get http packet host nhost localhost packet connect close respons http http version support server apach coyot date thu may gmt connect close follow python program reproduc problem tomcat tomcat usr python import socket import time socket socket connect localhost sendal get http time sleep make sure go packet sendal host nhost localhost sendal connect close print makefil read move second sendal first sendal caus tomcat respond correctli","""test/org/apache/coyote/http11/TestInternalInputBuffer.java""","1","1","1","1","12","1","9","1","6","0","2","23","23","23","4","23","0","6","2","15","418","97","268","98","156","59","141","186","79","107","3","3","3","3","1","0","38","38","38","29","normal"
"54955","7","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54955 During reloading the application, the context root Wrapper is not removed correctly. This causes 404 to be returned later on when the context root is requested.","Bug 54955  Mapping to application context root returns 404 after reload","map applic context root return reload","","","""java/org/apache/catalina/mapper/Mapper.java""","6","6","7","3","39","2","30","6","7","12","2","33","33","21","19","33","0","17","2","14","1496","179","1050","302","736","269","520","751","270","481","23","23","34","11","6","0","220","220","247","119","normal"
"54961","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54961 Make ""compress"" configurable in SpdyProxyProtocol. Patch by Sheldon Shao","Bug 54961  Make ""compress"" configurable in SpdyProxyProtocol","make compress configur spdi proxi protocol spdyproxyprotocol","","","""java/org/apache/coyote/spdy/SpdyProxyProtocol.java""","1","1","1","1","4","0","4","0","3","0","1","12","12","12","2","12","0","0","4","8","132","18","83","45","27","31","42","56","35","21","1","1","1","1","0","0","12","12","12","12","enhancement"
"54963","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54963 Fix concurrent issue of Spdy/NetSupportSocket Patch provided by Sheldon Shao","Bug 54963  Concurrent issue of Spdy/NetSupportSocket","concurr issu spdi net support socket netsupportsocket","","","""java/org/apache/tomcat/spdy/NetSupportSocket.java""","1","1","1","1","7","0","7","0","5","0","0","15","15","15","4","15","0","1","1","13","172","29","126","41","67","17","53","79","35","44","4","4","4","3","2","0","24","24","24","17","normal"
"54964","14","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54964 Enable tag plug-ins to be packaged with a web application. Patch by Sheldon Shao.","Bug 54964  Class loading issue of ""TagPlugin"" in TagPluginManager","class load issu tag plugin tagplugin tag plugin manag tagpluginmanag","","","""java/org/apache/jasper/compiler/TagPluginManager.java""","1","1","2","1","9","0","7","0","3","0","3","23","23","23","8","23","1","4","0","18","296","44","221","84","115","31","101","148","67","81","8","8","8","6","3","0","45","45","47","30","normal"
"54971","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54971 Pass the calculated location to AplicationPart rather than it having to recalculate it every time. Now correctly handles relative locations.","Bug 54971  javax.servlet.http.Part.write(String fileName) is not properly implemented","javax servlet http part write string file name filenam properli implement","1. fileName parameter / relative vs absolute
filaName parameter specification in
<1><JSR-000315 Java Servlet 3.0 Final Release javadocs>
is different from the <2><javax API tomcat refers to>.

<1> <JSR-000315 Java Servlet 3.0 Final Release javadocs>

Parameters:fileName - the name of the file to which the stream will be written. The file is created relative to the location as specified in the MultipartConfig

<2> javax. API tomcat refers to

 * @param fileName  The location into which the uploaded part should be
     *                  stored. Relative locations are relative to {@link
     *                  javax.servlet.MultipartConfigElement#getLocation()}


Tomcat is implemented as specified in <2> so that it can process ""absolute path"",
but it should only accept ""relative path"" as specified in <1>
<JSR-000315 Java Servlet 3.0 Final Release javadocs>

2.
If MultiPartConfig.location is not set,
write( String relative path ) throws FileNotFound Exception.
A default location needs to be set in order to avoid such exception.

example) os: windows8

part.write(""/test"");

java.io.IOException: java.io.FileNotFoundException: \test (Access is denied)
	at org.apache.catalina.core.ApplicationPart.write(ApplicationPart.java:123)
	at servlet.multipart.MultipleUploadServlet.doPost(MultipleUploadServlet.java:76)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:947)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1009)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
	at java.lang.Thread.run(Thread.java:662)","file name filenam paramet rel v absolut filum name filanam paramet specif jsr java servlet final releas javadoc differ javax api tomcat refer jsr java servlet final releas javadoc paramet file name filenam name file stream written file creat rel locat specifi multipart config multipartconfig javax api tomcat refer param file name filenam locat upload part store rel locat rel link javax servlet multipart config element multipartconfigel get locat getloc tomcat implement specifi process absolut path accept rel path specifi jsr java servlet final releas javadoc multi part config multipartconfig locat set write string rel path throw file not found filenotfound except default locat need set order avoid except exampl windows8 part write java except ioexcept java file not found except filenotfoundexcept access deni apach catalina core applic part applicationpart write applic part applicationpart java servlet multipart multipl upload servlet multipleuploadservlet do post dopost multipl upload servlet multipleuploadservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina valv access log valv accesslogvalv invok access log valv accesslogvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""java/org/apache/catalina/core/ApplicationPart.java""","1","1","2","1","7","0","7","0","1","0","0","12","12","12","2","12","0","0","0","12","161","18","115","54","47","28","52","76","41","35","5","5","6","1","4","0","23","23","24","12","normal"
"54971","13","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54971 Pass the calculated location to AplicationPart rather than it having to recalculate it every time. Now correctly handles relative locations.","Bug 54971  javax.servlet.http.Part.write(String fileName) is not properly implemented","javax servlet http part write string file name filenam properli implement","1. fileName parameter / relative vs absolute
filaName parameter specification in
<1><JSR-000315 Java Servlet 3.0 Final Release javadocs>
is different from the <2><javax API tomcat refers to>.

<1> <JSR-000315 Java Servlet 3.0 Final Release javadocs>

Parameters:fileName - the name of the file to which the stream will be written. The file is created relative to the location as specified in the MultipartConfig

<2> javax. API tomcat refers to

 * @param fileName  The location into which the uploaded part should be
     *                  stored. Relative locations are relative to {@link
     *                  javax.servlet.MultipartConfigElement#getLocation()}


Tomcat is implemented as specified in <2> so that it can process ""absolute path"",
but it should only accept ""relative path"" as specified in <1>
<JSR-000315 Java Servlet 3.0 Final Release javadocs>

2.
If MultiPartConfig.location is not set,
write( String relative path ) throws FileNotFound Exception.
A default location needs to be set in order to avoid such exception.

example) os: windows8

part.write(""/test"");

java.io.IOException: java.io.FileNotFoundException: \test (Access is denied)
	at org.apache.catalina.core.ApplicationPart.write(ApplicationPart.java:123)
	at servlet.multipart.MultipleUploadServlet.doPost(MultipleUploadServlet.java:76)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:947)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1009)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
	at java.lang.Thread.run(Thread.java:662)","file name filenam paramet rel v absolut filum name filanam paramet specif jsr java servlet final releas javadoc differ javax api tomcat refer jsr java servlet final releas javadoc paramet file name filenam name file stream written file creat rel locat specifi multipart config multipartconfig javax api tomcat refer param file name filenam locat upload part store rel locat rel link javax servlet multipart config element multipartconfigel get locat getloc tomcat implement specifi process absolut path accept rel path specifi jsr java servlet final releas javadoc multi part config multipartconfig locat set write string rel path throw file not found filenotfound except default locat need set order avoid except exampl windows8 part write java except ioexcept java file not found except filenotfoundexcept access deni apach catalina core applic part applicationpart write applic part applicationpart java servlet multipart multipl upload servlet multipleuploadservlet do post dopost multipl upload servlet multipleuploadservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java apach catalina core standard wrapper valv standardwrappervalv invok standard wrapper valv standardwrappervalv java apach catalina core standard context valv standardcontextvalv invok standard context valv standardcontextvalv java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina valv access log valv accesslogvalv invok access log valv accesslogvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","15","1","9","4","10","2","6","163","165","163","51","165","3","3","14","145","3321","582","1828","508","1103","920","807","1205","439","766","25","25","28","11","7","1","397","397","442","235","normal"
"54974","0","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54974 SessionCookieConfig.setXXX methods will throw IllegalStateException if the ServletContext from which this SessionCookieConfig was acquired has already been initialized.","Bug 54974  SessionCookieConfig.setXXX methods must throw IllegalStateException when invoked after initialization phase","session cooki config sessioncookieconfig set setxxx method must throw illeg state except illegalstateexcept invok initi phase","According to Servlet 3.0 javadoc 
javax.servlet.SessionCookieConfig setter methods must throw IllegalStateException when invoked after initialization phase

setComment(String) 
setDomain(String)
setHttpOnly(boolean)
setMaxAge(int)
setName(String) 
setPath(String)
setSecure(boolean)

""
Throws: java.lang.IllegalStateException - if the ServletContext from which this SessionCookieConfig was acquired has already been initialized
""","accord servlet javadoc javax servlet session cooki config sessioncookieconfig setter method must throw illeg state except illegalstateexcept invok initi phase set comment setcom string set domain setdomain string set http onli sethttponli boolean set max age setmaxag int set name setnam string set path setpath string set secur setsecur boolean throw java lang illeg state except illegalstateexcept servlet context servletcontext session cooki config sessioncookieconfig acquir alreadi initi","""java/org/apache/catalina/core/ApplicationContext.java""","2","2","3","1","18","1","11","5","2","0","5","62","62","62","15","62","1","3","4","54","1516","275","844","278","506","397","357","524","204","320","12","12","13","9","3","0","175","175","199","123","normal"
"54974","0","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54974 SessionCookieConfig.setXXX methods will throw IllegalStateException if the ServletContext from which this SessionCookieConfig was acquired has already been initialized.","Bug 54974  SessionCookieConfig.setXXX methods must throw IllegalStateException when invoked after initialization phase","session cooki config sessioncookieconfig set setxxx method must throw illeg state except illegalstateexcept invok initi phase","According to Servlet 3.0 javadoc 
javax.servlet.SessionCookieConfig setter methods must throw IllegalStateException when invoked after initialization phase

setComment(String) 
setDomain(String)
setHttpOnly(boolean)
setMaxAge(int)
setName(String) 
setPath(String)
setSecure(boolean)

""
Throws: java.lang.IllegalStateException - if the ServletContext from which this SessionCookieConfig was acquired has already been initialized
""","accord servlet javadoc javax servlet session cooki config sessioncookieconfig setter method must throw illeg state except illegalstateexcept invok initi phase set comment setcom string set domain setdomain string set http onli sethttponli boolean set max age setmaxag int set name setnam string set path setpath string set secur setsecur boolean throw java lang illeg state except illegalstateexcept servlet context servletcontext session cooki config sessioncookieconfig acquir alreadi initi","""java/org/apache/catalina/core/ApplicationSessionCookieConfig.java""","1","1","1","1","7","0","5","1","1","1","0","15","15","14","7","15","0","0","0","15","177","29","110","48","42","38","41","66","31","35","10","10","14","1","2","0","24","24","28","15","normal"
"54981","0","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54981 ServletContext.getJspConfigDescriptor() must return NULL when there is no jsp configuration","Bug 54981  ServletContext.getJspConfigDescriptor() should return null when there is no jsp configuration","servlet context servletcontext get jsp config descriptor getjspconfigdescriptor return null jsp configur","According to Servlet 3.0 javadoc ServletContext.getJspConfigDescriptor() must return NULL when there is no jsp configuration:

""
Returns:
the <jsp-config> related configuration that was aggregated from the web.xml and web-fragment.xml descriptor files of the web application represented by this ServletContext, or null if no such configuration exists
""","accord servlet javadoc servlet context servletcontext get jsp config descriptor getjspconfigdescriptor must return null jsp configur return jsp config jspconfig relat configur aggreg web xml web fragment webfrag xml descriptor file web applic repres servlet context servletcontext null configur exist","""java/org/apache/catalina/core/ApplicationContext.java""","2","2","3","1","18","1","11","5","2","0","5","62","62","62","15","62","1","3","4","54","1516","275","844","277","506","397","358","525","204","321","12","12","13","9","3","0","175","175","199","123","normal"
"54981","0","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54981 ServletContext.getJspConfigDescriptor() must return NULL when there is no jsp configuration","Bug 54981  ServletContext.getJspConfigDescriptor() should return null when there is no jsp configuration","servlet context servletcontext get jsp config descriptor getjspconfigdescriptor return null jsp configur","According to Servlet 3.0 javadoc ServletContext.getJspConfigDescriptor() must return NULL when there is no jsp configuration:

""
Returns:
the <jsp-config> related configuration that was aggregated from the web.xml and web-fragment.xml descriptor files of the web application represented by this ServletContext, or null if no such configuration exists
""","accord servlet javadoc servlet context servletcontext get jsp config descriptor getjspconfigdescriptor must return null jsp configur return jsp config jspconfig relat configur aggreg web xml web fragment webfrag xml descriptor file web applic repres servlet context servletcontext null configur exist","""test/org/apache/catalina/core/TestApplicationContext.java""","1","1","1","1","8","1","6","0","1","0","0","7","7","7","0","7","0","1","0","6","111","28","64","40","29","21","35","46","32","14","3","3","3","1","2","0","9","9","9","7","normal"
"54981","0","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54981 ServletContext.getJspConfigDescriptor() must return NULL when there is no jsp configuration","Bug 54981  ServletContext.getJspConfigDescriptor() should return null when there is no jsp configuration","servlet context servletcontext get jsp config descriptor getjspconfigdescriptor return null jsp configur","According to Servlet 3.0 javadoc ServletContext.getJspConfigDescriptor() must return NULL when there is no jsp configuration:

""
Returns:
the <jsp-config> related configuration that was aggregated from the web.xml and web-fragment.xml descriptor files of the web application represented by this ServletContext, or null if no such configuration exists
""","accord servlet javadoc servlet context servletcontext get jsp config descriptor getjspconfigdescriptor must return null jsp configur return jsp config jspconfig relat configur aggreg web xml web fragment webfrag xml descriptor file web applic repres servlet context servletcontext null configur exist","""test/org/apache/catalina/core/TestApplicationContext.java""","1","1","1","1","8","1","6","0","1","0","0","7","7","7","0","7","0","1","0","6","111","28","64","40","29","21","35","46","32","14","3","3","3","1","2","0","9","9","9","7","normal"
"54984","8","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54984 Ensure that the correct encoding will be used when processing the multipart data.","Bug 54984  multipart/form-data is not always read with correct encoding","multipart form data formdata alway read correct encod","The bug occurs when form data is posted as multipart/form-data and using Servlet 3 API to get posted files.
In a servlet, if we set the encoding:

request.setCharacterEncoding(""UTF-8"");

Then invoke:

request.getParts()

And then invoke:

String text = request.getParameter(""sometextfield"");

UTF-8 characters in the text have been garbled.

Order of method calls are significant, if a getParameter is called before getParts, the correct encoding will be used.
However, the order which you invoke the methods should not matter.","occur form data post multipart form data formdata use servlet api get post file servlet set encod request set charact encod setcharacterencod utf invok request get part getpart invok string text request get paramet getparamet sometextfield utf charact text garbl order method call signific get paramet getparamet call get part getpart correct encod use howev order invok method matter","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","15","1","9","4","10","2","6","163","165","163","51","165","3","3","14","145","3317","582","1824","508","1100","920","806","1203","439","764","24","24","27","11","6","1","396","396","441","235","normal"
"54984","8","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54984 Ensure that the correct encoding will be used when processing the multipart data.","Bug 54984  multipart/form-data is not always read with correct encoding","multipart form data formdata alway read correct encod","The bug occurs when form data is posted as multipart/form-data and using Servlet 3 API to get posted files.
In a servlet, if we set the encoding:

request.setCharacterEncoding(""UTF-8"");

Then invoke:

request.getParts()

And then invoke:

String text = request.getParameter(""sometextfield"");

UTF-8 characters in the text have been garbled.

Order of method calls are significant, if a getParameter is called before getParts, the correct encoding will be used.
However, the order which you invoke the methods should not matter.","occur form data post multipart form data formdata use servlet api get post file servlet set encod request set charact encod setcharacterencod utf invok request get part getpart invok string text request get paramet getparamet sometextfield utf charact text garbl order method call signific get paramet getparamet call get part getpart correct encod use howev order invok method matter","""test/org/apache/catalina/connector/TestRequest.java""","2","2","2","1","24","3","16","4","7","0","7","19","19","19","3","19","0","5","4","10","594","111","384","130","264","121","228","274","105","169","8","8","8","4","3","0","42","42","42","22","normal"
"54984","8","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54984 Ensure that the correct encoding will be used when processing the multipart data.","Bug 54984  multipart/form-data is not always read with correct encoding","multipart form data formdata alway read correct encod","The bug occurs when form data is posted as multipart/form-data and using Servlet 3 API to get posted files.
In a servlet, if we set the encoding:

request.setCharacterEncoding(""UTF-8"");

Then invoke:

request.getParts()

And then invoke:

String text = request.getParameter(""sometextfield"");

UTF-8 characters in the text have been garbled.

Order of method calls are significant, if a getParameter is called before getParts, the correct encoding will be used.
However, the order which you invoke the methods should not matter.","occur form data post multipart form data formdata use servlet api get post file servlet set encod request set charact encod setcharacterencod utf invok request get part getpart invok string text request get paramet getparamet sometextfield utf charact text garbl order method call signific get paramet getparamet call get part getpart correct encod use howev order invok method matter","""test/org/apache/catalina/connector/TestRequest.java""","2","2","2","1","24","3","16","4","7","0","7","19","19","19","3","19","0","5","4","10","594","111","384","130","264","121","228","274","105","169","8","8","8","4","3","0","42","42","42","22","normal"
"54997","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54997 Handle BUFFER_UNDERFLOW during SSL handshake.","Bug 54997  SSL Handshake implementation in AsycnChannelWrapperSecure does not handle SSLEngineResult.Status.BUFFER_UNDERFLOW and SSLEngineResult.Status.BUFFER_OVERFLOW states","ssl handshak implement asycn channel wrapper secur asycnchannelwrappersecur handl engin result sslengineresult statu buffer underflow engin result sslengineresult statu buffer overflow state","","","""java/org/apache/tomcat/websocket/AsyncChannelWrapperSecure.java""","2","2","2","1","13","1","10","1","6","0","1","29","29","29","20","29","0","1","0","28","520","90","375","149","191","55","173","246","111","135","12","12","13","1","5","0","70","67","74","29","normal"
"54999","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54999 Fix JSESSIONIDSSO not recreated when a logout and login occur in the same request. Patch provided by Keith Mashinter","Bug 54999  JSESSIONIDSSO not re-created upon re-authentication on the same request - logout() and login(username,password)","jsessionidsso re creat recreat upon re authent reauthent request logout login usernam password","In testing I found that the JSESSIONIDSSO was not re-created upon re-authentication via logout() and login(username,password) in the same request.  The problem stemmed from the REQ_SSOID_NOTE that was was not reset upon request.logout(), whereas the documentation indicates that a logout() from any web-app should logout() from all web-apps.  When the REQ_SSOID_NOTE is not removed upon logout(), a subsequent login(username,password) on the same request will re-create a JSESSIONID for the current web-app but fails to re-create a JSESSIONIDSSO since the REQ_SSO_ID_NOTE still lingers on the request.

AuthenticatorBase.java adjustment for logout(request) that removes the REQ_SSOID_NOTE so that a subsequent login(username,password) will work on the same request:

    @Override
    public void logout(Request request) throws ServletException {
        register(request, request.getResponse(), null,
                null, null, null);
    	request.removeNote(Constants.REQ_SSOID_NOTE);
    }

I'll upload a diff-patch against the trunk and for 7.0.40.","test found jsessionidsso re creat recreat upon re authent reauthent via logout login usernam password request problem stem req ssoid note reset upon request logout wherea document indic logout web app webapp logout web app webapp req ssoid note remov upon logout subsequ login usernam password request re creat recreat jsessionid current web app webapp fail re creat recreat jsessionidsso sinc req sso id note still linger request authent base authenticatorbas java adjust logout request remov req ssoid note subsequ login usernam password work request overrid public void logout request request throw servlet except servletexcept regist request request get respons getrespons null null null null request remov note removenot constant req ssoid note ll upload diff patch diffpatch trunk","""java/org/apache/catalina/authenticator/AuthenticatorBase.java""","3","3","3","1","20","2","12","6","1","1","5","29","31","30","11","31","0","0","7","24","872","145","415","124","239","312","185","280","105","175","35","35","44","10","5","1","95","95","108","47","normal"
"55017","37","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55017 Add the ability to configure the RMO bind address when using the JXM remote listener. Patch provided by Alexey Noskov.","Bug 55017  Ability to configure RMI bind address","abil configur rmi bind address","","","""java/org/apache/catalina/mbeans/JmxRemoteLifecycleListener.java""","2","2","2","1","17","1","12","4","2","0","4","12","12","12","13","12","0","3","0","9","314","47","195","79","119","74","99","128","66","62","8","8","8","3","2","0","27","27","27","14","enhancement"
"55019","0","Remy Maucherat","https://issues.apache.org/bugzilla/show_bug.cgi?id=55019 Preload the Constants class during connector init.","Bug 55019  <jsp:include page=""blabla"" flush=""true""/> failed to compile under security manager","jsp includ page blabla flush true fail compil secur manag","","","""java/org/apache/coyote/http11/AbstractOutputBuffer.java""","2","1","2","1","13","1","7","4","3","0","2","35","40","40","15","40","0","2","10","28","695","151","323","102","178","222","174","243","99","144","7","5","8","4","3","1","71","69","80","40","normal"
"55035","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55035 Add support for the version parameter to the deploy Ant task. Patch provided by Sergey Tcherednichenko.","Bug 55035  Deploy ROOT webapp with version through text manager using Ant","deploy root webapp version text manag use ant","Currently Ant ""deploy"" task does not support separate parameter ""version"" and, thanks to URLEncoder, there is no workaround for that.

But for apps with not empty context it's possible to define version using ##, like setting path to ""/someContext#someVersion"".

For apps with empty context we receive error:

Case #1:
<deploy url=""{tomcat.manager}/text"" username=""${username}"", password=""${password}"" path=""/ROOT##12345"" war=""${pathtowar}"" />

Result:
Failed to deploy application at context path /ROOT##12345

Case #1:
<deploy url=""{tomcat.manager}/text"" username=""${username}"", password=""${password}"" path=""/##12345"" war=""${pathtowar}"" />

Result:
Failed to deploy application at context path /##12345","current ant deploy task support separ paramet version thank encod urlencod workaround app empti context possibl defin version use like set path some context somecontext some version somevers app empti context receiv error case deploy url tomcat manag text usernam usernam password password path root pathtowar result fail deploy applic context path root case deploy url tomcat manag text usernam usernam password password path pathtowar result fail deploy applic context path","""java/org/apache/catalina/ant/DeployTask.java""","1","1","2","1","8","0","7","0","1","0","0","13","13","13","6","13","0","0","0","13","216","47","117","38","68","52","56","82","37","45","13","13","18","1","4","0","25","25","30","13","major"
"55046","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55046 Add a Filter that implements CORS (http://www.w3.org/TR/cors/) Based on a patch by Mohit Soni.","Bug 55046  CORS Filter","cor filter","","","""test/org/apache/catalina/filters/TesterHttpServletResponse.java""","1","1","1","1","1","0","1","0","1","0","0","67","67","67","0","67","0","0","0","67","202","6","139","123","30","83","43","111","81","30","1","1","1","1","0","1","67","67","67","67","enhancement"
"55052","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55052 Fall back to un-prefixed property if a prefixed one is not present","Bug 55052  [JULI] Make ClassLoaderLogManager.getProperty() to try unprefixed property if prefixed one does not exist","juli make class loader log manag classloaderlogmanag get properti getproperti tri unprefix properti prefix one exist","","","""java/org/apache/juli/ClassLoaderLogManager.java""","3","3","3","1","19","0","14","4","8","1","0","28","28","27","10","28","6","1","5","16","695","100","443","145","270","152","202","303","131","172","15","15","19","7","5","0","93","93","100","44","normal"
"55073","10","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55073 Small performance improvement Patch provided by Adrian Nistor","Bug 55073  wasted work in ValidateVisitor.isExpression()","wast work valid visitor validatevisitor is express isexpress","","","""java/org/apache/jasper/compiler/Validator.java""","4","4","6","1","26","2","21","2","8","3","15","59","59","56","13","59","5","17","0","37","1857","228","1376","403","978","260","549","828","283","545","44","44","60","6","8","0","275","275","381","84","normal"
"55101","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55101 Make BASIC auth parsing more tolerant of whitespace.","Bug 55101  BasicAuthenticator parser and associated unit tests","basic authent basicauthent parser associ unit test","","","""java/org/apache/catalina/authenticator/BasicAuthenticator.java""","7","7","7","5","53","6","36","11","1","0","1","2","2","2","0","2","0","0","1","1","164","27","90","31","55","47","47","62","26","36","13","13","13","9","4","1","14","14","14","10","enhancement"
"55101","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55101 Make BASIC auth parsing more tolerant of whitespace.","Bug 55101  BasicAuthenticator parser and associated unit tests","basic authent basicauthent parser associ unit test","","","""test/org/apache/catalina/authenticator/TestNonLoginAndBasicAuthenticator.java""","1","1","1","1","13","1","10","1","2","0","29","24","24","24","8","24","0","8","0","16","624","87","342","142","222","196","191","227","113","114","8","8","9","5","4","1","33","33","35","28","enhancement"
"55101","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55101 Make BASIC auth parsing more tolerant of whitespace.","Bug 55101  BasicAuthenticator parser and associated unit tests","basic authent basicauthent parser associ unit test","","","""test/org/apache/catalina/authenticator/TestNonLoginAndBasicAuthenticator.java""","1","1","1","1","13","1","10","1","2","0","29","24","24","24","8","24","0","8","0","16","624","87","342","142","222","196","191","227","113","114","8","8","9","5","4","1","33","33","35","28","enhancement"
"55102","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55102 Add support for time to first byte to the AccessLog","Bug 55102  Add ability to report time taken to prepare response","add abil report time taken prepar respons","","","""java/org/apache/catalina/valves/AccessLogValve.java""","2","2","2","1","13","0","9","2","31","2","16","99","98","98","57","100","0","10","12","78","2102","251","1202","357","695","650","528","795","302","493","21","13","21","4","4","1","260","232","287","110","enhancement"
"55102","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55102 Add support for time to first byte to the AccessLog","Bug 55102  Add ability to report time taken to prepare response","add abil report time taken prepar respons","","","""java/org/apache/coyote/Response.java""","1","1","1","1","8","0","6","1","1","0","2","48","48","48","20","48","0","1","0","47","630","139","329","98","184","164","158","240","95","145","5","5","6","4","2","1","78","78","86","59","enhancement"
"55108","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55108 Small performance improvement Patch provided by Adrian Nistor","Bug 55108  Wasted work in ""AbstractReplicatedMap.excludeFromSet""","wast work abstract replic map abstractreplicatedmap exclud from set excludefromset","","","""java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java""","2","2","3","1","11","0","9","1","4","0","17","106","109","109","30","109","0","1","8","100","1521","174","1112","346","687","255","564","845","303","542","24","24","27","7","5","0","284","274","335","139","normal"
"55109","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55109 Small performance improvement Patch provided by Adrian Nistor","Bug 55109  Wasted work in ""WebdavServlet.isLocked""","wast work webdav servlet webdavservlet is lock islock","","","""java/org/apache/catalina/servlets/WebdavServlet.java""","8","7","8","2","58","10","40","7","4","2","45","39","39","37","15","39","0","15","15","9","2954","600","1749","405","1353","606","910","1221","334","887","66","62","72","16","6","0","316","306","335","107","normal"
"55110","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55110 Small performance improvements Patch provided by Adrian Nistor","Bug 55110  Wasted work in ""TestNonLoginAndBasicAuthenticator.doTestBasic""","wast work test non login and basic authent testnonloginandbasicauthent do test basic dotestbas","","","""test/org/apache/catalina/authenticator/TestNonLoginAndBasicAuthenticator.java""","1","1","1","1","13","1","10","1","2","0","29","24","24","24","8","24","0","8","0","16","623","87","341","142","221","196","190","226","113","113","8","8","9","1","4","1","33","33","35","24","normal"
"55110","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55110 Small performance improvements Patch provided by Adrian Nistor","Bug 55110  Wasted work in ""TestNonLoginAndBasicAuthenticator.doTestBasic""","wast work test non login and basic authent testnonloginandbasicauthent do test basic dotestbas","","","""test/org/apache/tomcat/websocket/TestWsWebSocketContainer.java""","2","2","2","1","17","2","13","1","8","3","11","35","35","32","1","35","0","5","0","30","800","165","574","239","351","69","292","374","176","198","10","10","10","4","3","0","70","70","72","41","normal"
"55125","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55125 No point starting a process if the Server container fails to start.","Bug 55125  Tomcat does not shut down if LifecycleListener throws an exception","tomcat shut lifecycl listen lifecyclelisten throw except","","","""java/org/apache/catalina/startup/Catalina.java""","3","3","3","1","20","2","15","2","3","0","2","33","33","33","8","33","0","1","9","23","882","159","556","120","386","170","257","361","114","247","18","18","20","10","3","0","103","103","108","45","normal"
"55125","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55125 No point starting a process if the Server container fails to start.","Bug 55125  Tomcat does not shut down if LifecycleListener throws an exception","tomcat shut lifecycl listen lifecyclelisten throw except","","","""java/org/apache/catalina/core/StandardService.java""","2","2","3","1","18","2","11","4","1","0","2","26","26","26","10","26","0","0","5","21","655","123","356","97","201","176","135","238","84","154","9","9","11","3","3","0","77","77","82","34","normal"
"55126","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55126 For methods annotated with @onMessage It is OK for multiple decoders to match a single message parameter It is not OK for multiple parameters within a method to be possible message parameters.","Bug 55126  IAE is thrown during deployment of ServerEndPoint having multiple text decoders","iae thrown deploy server end point serverendpoint multipl text decod","","","""java/org/apache/tomcat/websocket/pojo/PojoMethodMapping.java""","5","5","5","2","23","0","23","0","4","3","1","19","17","16","25","19","0","3","0","16","583","53","503","122","345","27","194","302","111","191","46","46","52","17","6","0","99","99","112","43","normal"
"55127","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55127 Encoders have init() and destroy() methdos that need to be called. Based on a patch provided by Niki Dokovski.","Bug 55127  Encoders init and destroy methods are never called","encod init destroy method never call","","","""test/org/apache/tomcat/websocket/pojo/TestEncodingDecoding.java""","1","1","1","1","5","0","4","0","9","0","1","23","23","23","4","23","0","0","0","23","259","52","176","103","63","32","84","119","76","43","3","3","4","3","2","0","26","26","28","25","normal"
"55127","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55127 Encoders have init() and destroy() methdos that need to be called. Based on a patch provided by Niki Dokovski.","Bug 55127  Encoders init and destroy methods are never called","encod init destroy method never call","","","""java/org/apache/tomcat/websocket/server/WsHttpUpgradeHandler.java""","1","1","1","1","9","0","8","1","3","0","2","13","13","13","14","13","0","4","0","9","236","42","162","78","73","32","84","106","61","45","4","4","4","1","1","0","20","20","20","13","normal"
"55127","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55127 Encoders have init() and destroy() methdos that need to be called. Based on a patch provided by Niki Dokovski.","Bug 55127  Encoders init and destroy methods are never called","encod init destroy method never call","","","""java/org/apache/tomcat/websocket/WsRemoteEndpointImplBase.java""","2","2","2","1","10","0","9","0","9","1","1","62","65","64","52","65","5","4","5","51","911","168","694","232","381","49","323","468","186","282","10","10","11","3","3","0","128","128","142","66","normal"
"55127","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55127 Encoders have init() and destroy() methdos that need to be called. Based on a patch provided by Niki Dokovski.","Bug 55127  Encoders init and destroy methods are never called","encod init destroy method never call","","","""java/org/apache/tomcat/websocket/WsRemoteEndpointImplClient.java""","1","1","1","1","5","0","4","0","1","0","0","4","4","4","1","4","0","0","3","1","56","11","29","16","9","16","12","18","12","6","2","2","2","1","1","1","5","5","5","4","normal"
"55127","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55127 Encoders have init() and destroy() methdos that need to be called. Based on a patch provided by Niki Dokovski.","Bug 55127  Encoders init and destroy methods are never called","encod init destroy method never call","","","""java/org/apache/tomcat/websocket/server/WsRemoteEndpointImplServer.java""","2","2","2","1","11","0","10","1","1","0","2","7","7","7","6","7","0","0","5","2","149","23","97","37","51","29","52","71","32","39","9","9","9","6","4","0","17","17","17","12","normal"
"55127","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55127 Encoders have init() and destroy() methdos that need to be called. Based on a patch provided by Niki Dokovski.","Bug 55127  Encoders init and destroy methods are never called","encod init destroy method never call","","","""java/org/apache/tomcat/websocket/WsSession.java""","1","1","1","1","7","0","6","0","2","0","3","41","39","41","28","41","0","4","5","32","523","100","379","148","189","44","183","251","105","146","8","8","8","5","2","0","65","65","66","47","normal"
"55127","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55127 Encoders have init() and destroy() methdos that need to be called. Based on a patch provided by Niki Dokovski.","Bug 55127  Encoders init and destroy methods are never called","encod init destroy method never call","","","""java/org/apache/tomcat/websocket/WsWebSocketContainer.java""","2","2","2","1","18","2","14","1","2","0","9","29","29","29","15","29","1","9","2","17","778","136","554","227","335","88","278","365","175","190","13","13","15","3","4","0","78","78","82","31","normal"
"55151","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55151 Fix bugs in test","Bug 55151  Fix in MsgByte encoder and decoder TestEncodingDecoding websocket test","fix msg byte msgbyte encod decod test encod decod testencodingdecod websocket","","","""test/org/apache/tomcat/websocket/pojo/TestEncodingDecoding.java""","1","1","1","1","7","0","7","0","15","2","6","40","40","38","6","40","0","0","0","40","466","78","361","161","183","29","180","241","132","109","3","3","4","3","2","0","49","49","52","44","minor"
"55158","1","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55158 Small performance improvement Patch provided by Adrian Nistor","Bug 55158  Wasted work in AttributeNamesEnumerator constructor","wast work attribut name enumer attributenamesenumer constructor","","","""java/org/apache/catalina/core/ApplicationHttpRequest.java""","2","2","3","2","16","1","9","4","2","0","1","40","40","40","18","40","9","1","6","24","960","216","455","145","282","291","219","332","121","211","10","10","14","6","4","1","110","110","124","80","normal"
"55159","1","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55159 Small performance improvement Patch provided by Adrian Nistor","Bug 55159  Wasted work in ErrorReportValve.getPartialServletStackTrace","wast work error report valv errorreportvalv get partial servlet stack trace getpartialservletstacktrac","","","""java/org/apache/catalina/valves/ErrorReportValve.java""","7","7","9","2","56","6","40","9","1","0","0","4","4","4","0","4","0","0","2","2","291","42","179","34","127","70","101","131","32","99","17","17","21","4","3","0","30","30","37","9","normal"
"55160","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55160 Retrieve timeout the same way it is set so that connectionUploadTimeout is applied if configured.","Bug 55160  NIO connectionUploadTimeout can't work","nio connect upload timeout connectionuploadtimeout work","when i configure disableUploadTimeout=""false"" and connectionTimeout=""20000"" ,connectionUploadTimeout=""30000"" .
I found the connectionUploadTimeout doesn't work, because the code in internalNioInputBuffer.readSocket():
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
try {
                NioEndpoint.KeyAttachment att = (NioEndpoint.KeyAttachment)socket.getAttachment(false);
                if ( att == null ) throw new IOException(""Key must be cancelled."");
                nRead = pool.read(socket.getBufHandler().getReadBuffer(),socket,selector,att.getTimeout());
            } catch ( EOFException eof ) {
                nRead = -1;
            } finally { 
                if ( selector != null ) pool.put(selector);
            }
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
att.getTimeout() is the connectionTimeout ,not the connectionUploadTimeout.
so , in NioBlockingSelector.read(), the readTimeout is connectionTimeout","configur disabl upload timeout disableuploadtimeout fals connect timeout connectiontimeout connect upload timeout connectionuploadtimeout found connect upload timeout connectionuploadtimeout doesn work code intern nio input buffer internalnioinputbuff read socket readsocket tri nio endpoint nioendpoint key attach keyattach nio endpoint nioendpoint key attach keyattach socket get attach getattach fals null throw new except ioexcept key must cancel read nread pool read socket get buf handler getbufhandl get read buffer getreadbuff socket selector get timeout gettimeout catch except eofexcept eof read nread final selector null pool put selector get timeout gettimeout connect timeout connectiontimeout connect upload timeout connectionuploadtimeout nio block selector nioblockingselector read read timeout readtimeout connect timeout connectiontimeout","""java/org/apache/coyote/http11/InternalNioInputBuffer.java""","5","5","6","3","30","2","22","6","5","0","2","21","17","21","24","21","0","4","3","14","858","107","523","96","357","239","246","364","71","293","40","40","48","27","5","0","119","119","135","81","normal"
"55165","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55165 Ensure sub-protocols are processed for annotated endpoint. Patch provided by Niki Dokovski.","Bug 55165  subprotocols not available with  annotated serverendpoint","subprotocol avail annot serverendpoint","","","""java/org/apache/tomcat/websocket/server/WsServerContainer.java""","2","2","2","1","15","1","11","2","3","4","5","20","20","16","8","20","0","5","4","11","442","69","288","117","156","86","122","178","93","85","9","9","9","7","2","0","48","48","50","26","normal"
"55166","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55166 Move the JSP descriptor and tag library descriptor schema defintion files from jsp-api.jar to servlet-api.jar so relative includes between the J2EE, Servlet and JSP schemas are correctly resolved.","Bug 55166  schemaLocation references between servlet and jsp XSDs are invalid","schema locat schemaloc refer servlet jsp xsd invalid","The javax/servlet/resources package does not contain the JSP specification XSDs. These are referenced from the web-app or web-common xsds and define elements like <jsp-config>.","javax servlet resourc packag contain jsp specif xsd referenc web app webapp web common webcommon xsd defin element like jsp config jspconfig","""java/org/apache/catalina/startup/Constants.java""","0","0","0","0","0","0","0","0","1","0","74","0","0","0","0","0","0","0","0","0","224","42","143","142","74","43","75","76","76","0","0","0","0","0","0","0","0","0","0","0","enhancement"
"55174","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55174 WebSocket 1.0 Javadoc for Endpoint.onError states that it should be called for runtime errors in message handlers.","Bug 55174  [jsr 356][websocket] MessageHandler never gets notified again after it throws exception","jsr websocket messag handler messagehandl never get notifi throw except","I have a test which adds a MessageHandler which gets notified on text messages. If its implementation method onMessage(String text) throws some exception (e.g. runtime exception), this MessageHandler will never ever be notified again for any new text messages received by the session.

I suppose this happens because the exception actually kills the underlying thread in which the notification has happened. I think the client side implementation shall be more robust and expect and be prepared for exceptions coming from calls to user code.","add messag handler messagehandl get notifi text messag implement method on messag onmessag string text throw except runtim except messag handler messagehandl never ever notifi new text messag receiv session suppos happen except actual kill underli thread notif happen think client side implement shall robust expect prepar except come call user code","""java/org/apache/tomcat/websocket/WsFrameBase.java""","4","4","5","2","25","0","21","2","2","1","1","21","20","21","24","22","0","15","4","3","656","66","500","99","357","90","214","317","82","235","15","15","17","12","5","0","103","103","111","47","major"
"55177","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55177 Correctly handle infinite soTimeout for BIO HTTP connector. Based on a patch by Nick Bunn.","Bug 55177  connectionTimeout=-1 causes high CPU","connect timeout connectiontimeout caus high cpu","","","""java/org/apache/coyote/http11/Http11Processor.java""","3","3","3","1","13","1","10","2","1","0","1","22","22","22","3","22","0","0","15","7","431","75","271","74","153","85","101","172","53","119","42","42","43","12","5","0","70","70","73","33","minor"
"55179","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55179 Correct attribute name.","Bug 55179  Incorrect Parameter Name in RemoteIpValve Examples","incorrect paramet name remot ip valv remoteipvalv exampl","","","""java/org/apache/catalina/valves/RemoteIpValve.java""","2","2","2","1","14","0","8","6","1","2","2","27","27","25","11","27","0","1","2","24","843","59","254","76","155","531","121","176","76","100","17","17","19","5","4","2","57","57","62","31","normal"
"55180","0","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55180 Correctly handle infinite soTimeout when disableUploadTimeout is set to false. Patch provided by Roger Wang.","Bug 55180  connectionTimeout=""-1"" causes timeout can't be negative","connect timeout connectiontimeout caus timeout neg","I configured server.xml like this:
connectionTimeout=""-1"" disableUploadTimeout=""false"" connectionUploadTimeout=""200""
(maybe it is stupid to configure like this,if connectionTimeout=-1,can i make disableUploadTimeout=false?).
It will cause :

java.lang.IllegalArgumentException: timeout can't be negative
	at sun.nio.ch.SocketAdaptor.setSoTimeout(SocketAdaptor.java:361)
	at org.apache.coyote.http11.Http11NioProcessor.setSocketTimeout(Http11NioProcessor.java:251)
......
because of :
      if (!disableUploadTimeout) {
//endpoint.getSoTimeout()=-1.
           setSocketTimeout(endpoint.getSoTimeout());
       }

~~~~~~~~~~~~~~~~~~~~~~~~~
another thing:
if i configure connectionTimeout=""0"". 
in NioBlockingSelector.read(ByteBuffer buf, NioChannel socket, long readTimeout),readTimeout = 0, in case socket.read(buf) == 0, it make timeout=true.
if (readTimeout >= 0 && (keycount == 0))
    timedout = (System.currentTimeMillis() - time) >= readTimeout;
then throw the SocketTimeoutException().

thank you.","configur server xml like connect timeout connectiontimeout disabl upload timeout disableuploadtimeout fals connect upload timeout connectionuploadtimeout mayb stupid configur like connect timeout connectiontimeout make disabl upload timeout disableuploadtimeout fals caus java lang illeg argument except illegalargumentexcept timeout neg sun nio ch socket adaptor socketadaptor set so timeout setsotimeout socket adaptor socketadaptor java apach coyot http11 http11 nio processor http11nioprocessor set socket timeout setsockettimeout http11 nio processor http11nioprocessor java disabl upload timeout disableuploadtimeout endpoint get so timeout getsotimeout set socket timeout setsockettimeout endpoint get so timeout getsotimeout anoth thing configur connect timeout connectiontimeout nio block selector nioblockingselector read byte buffer bytebuff buf nio channel niochannel socket long read timeout readtimeout read timeout readtimeout case socket read buf make timeout true read timeout readtimeout keycount timedout system current time milli currenttimemilli time read timeout readtimeout throw socket timeout except sockettimeoutexcept thank","""java/org/apache/coyote/http11/AbstractHttp11Processor.java""","5","5","6","2","29","2","21","6","1","0","1","44","60","60","28","60","2","6","20","32","1731","265","1032","216","724","445","512","737","206","531","40","38","54","19","5","0","235","231","285","104","normal"
"55181","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55181 Protect against clients that ignore the limit of the byte buffer","Bug 55181  Ping and Pong messages should have identical application data","ping pong messag ident applic data","","","""java/org/apache/tomcat/websocket/WsPongMessage.java""","1","1","1","1","3","0","3","0","1","0","0","2","2","2","1","2","0","0","0","2","37","8","13","8","2","16","6","9","7","2","1","1","1","1","0","1","2","2","2","2","normal"
"55183","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55183 Header names are case insensitive Based on a patch by Niki Dokovski.","Bug 55183  Missing WS Protocol Header in session negotiatedHeaders","miss w protocol header session negoti header negotiatedhead","","","""java/org/apache/tomcat/websocket/Constants.java""","1","1","1","1","3","0","2","1","1","0","19","1","1","1","0","1","0","1","0","0","60","7","27","25","19","26","20","22","22","0","1","1","1","1","0","1","1","1","1","1","normal"
"55183","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55183 Header names are case insensitive Based on a patch by Niki Dokovski.","Bug 55183  Missing WS Protocol Header in session negotiatedHeaders","miss w protocol header session negoti header negotiatedhead","","","""java/org/apache/tomcat/websocket/WsWebSocketContainer.java""","2","2","2","1","18","2","14","1","2","0","9","30","30","30","15","30","1","10","2","17","795","143","570","231","348","82","288","381","182","199","13","13","15","3","4","0","82","82","88","32","normal"
"55184","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55184 Avoid NPE. Patch provided by Niki Dokovski.","Bug 55184  NPE in PojoMethodMapping getMessageHandler","npe pojo method map pojomethodmap get messag handler getmessagehandl","","","""java/org/apache/tomcat/websocket/pojo/PojoMethodMapping.java""","6","6","7","1","30","0","29","0","3","2","1","16","14","14","25","16","0","3","0","13","606","47","526","134","377","33","206","312","113","199","45","45","53","9","5","0","100","100","113","28","normal"
"55186","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55186 Ensure local name is recycled between requests so IP virtual hosting works correctly.","Bug 55186  useIPVHosts=true , incorrect to get Request.localName","use host useipvhost true incorrect get request local name localnam","","","""java/org/apache/coyote/Request.java""","1","1","1","1","5","0","4","0","1","1","1","60","60","59","35","60","0","1","0","59","592","143","323","119","165","126","161","238","116","122","5","5","7","3","2","0","77","77","82","62","normal"
"55200","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55200 It is possible that more than one write will be required to empty the buffer.","Bug 55200  [websocket] Problem writing many subsequent binary messages","websocket problem write mani subsequ binari messag","I see sometimes failing connections due to IOException (see below).
This happens when trying to send thousands of binary messages (1024 bytes each) without any delay between the subsequent messages.

Having look at the code in AsyncChannelWrapperSecure$WriteTask.run(219), I think it is not correct to assume that if not all of the bytes in the buffer are written, this shall produce IOException. I think in this case, there shall be an attempt to write the rest of the bytes in a cycle.


Here one exception I got during the test:
Exception is :java.io.IOException: java.util.concurrent.ExecutionException: java.io.IOException: Only wrote [460] of [1,098] bytes
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.startMessageBlock(WsRemoteEndpointImplBase.java:204)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendBytes(WsRemoteEndpointImplBase.java:113)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendBinary(WsRemoteEndpointBasic.java:43)
	at WebsocketsTestManager$TestThread.run(WebsocketsTestManager.java:271)
Caused by: java.util.concurrent.ExecutionException: java.io.IOException: Only wrote [460] of [1,098] bytes
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$FutureToSendHandler.get(WsRemoteEndpointImplBase.java:729)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.startMessageBlock(WsRemoteEndpointImplBase.java:202)
	... 3 more
Caused by: java.io.IOException: Only wrote [460] of [1,098] bytes
	at org.apache.tomcat.websocket.AsyncChannelWrapperSecure$WriteTask.run(AsyncChannelWrapperSecure.java:220)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:789)","see sometim fail connect due except ioexcept see happen tri send thousand binari messag byte without delay subsequ messag look code async channel wrapper secur asyncchannelwrappersecur write task writetask run think correct assum byte buffer written shall produc except ioexcept think case shall attempt write rest byte cycl one except got except java except ioexcept java util concurr execut except executionexcept java except ioexcept wrote byte apach tomcat websocket remot endpoint impl base wsremoteendpointimplbas start messag block startmessageblock remot endpoint impl base wsremoteendpointimplbas java apach tomcat websocket remot endpoint impl base wsremoteendpointimplbas send byte sendbyt remot endpoint impl base wsremoteendpointimplbas java apach tomcat websocket remot endpoint basic wsremoteendpointbas send binari sendbinari remot endpoint basic wsremoteendpointbas java websocket test manag websocketstestmanag test thread testthread run websocket test manag websocketstestmanag java caus java util concurr execut except executionexcept java except ioexcept wrote byte apach tomcat websocket remot endpoint impl base wsremoteendpointimplbas futur to send handler futuretosendhandl get remot endpoint impl base wsremoteendpointimplbas java apach tomcat websocket remot endpoint impl base wsremoteendpointimplbas start messag block startmessageblock remot endpoint impl base wsremoteendpointimplbas java caus java except ioexcept wrote byte apach tomcat websocket async channel wrapper secur asyncchannelwrappersecur write task writetask run async channel wrapper secur asyncchannelwrappersecur java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""java/org/apache/tomcat/websocket/AsyncChannelWrapperSecure.java""","2","2","2","1","13","1","11","0","6","0","3","29","29","29","22","29","0","1","0","28","543","95","405","157","214","43","184","258","118","140","12","12","13","1","5","0","71","68","78","29","major"
"55207","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55207 Enforce requirement that <jsp:text> elements do not contain any other elements. Fix a test that this change found. Patch by Jeremy Boynes.","Bug 55207  In XML syntax, jsp:text does not error on sub-elements from other namespaces","xml syntax jsp text error sub element subel namespac","","","""java/org/apache/jasper/compiler/JspDocumentParser.java""","5","5","6","1","36","2","32","2","2","3","3","32","32","29","17","32","1","13","0","18","1483","125","1111","222","820","255","338","513","151","362","39","39","48","12","5","0","177","177","217","52","normal"
"55210","0","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55210 When searching for ServletContainerInitializer, ignore comments in the provider-configuration file. Support multiple ServletContainerInitializer in the provider-configuration file. Patch is provided by Nick Williams.","Bug 55210  SEVERE: The ServletContentInitializer [# Licensed to the Apache Software Foundation (ASF) under one or more] could not be created","sever servlet content initi servletcontentiniti licens apach softwar foundat asf one could creat","","","""java/org/apache/catalina/startup/ContextConfig.java""","6","6","7","1","38","3","28","6","4","1","8","66","66","65","24","66","0","12","36","18","2890","361","2062","479","1406","468","925","1445","489","956","47","47","50","13","7","0","456","456","501","114","critical"
"55218","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55218 and https://issues.apache.org/bugzilla/show_bug.cgi?id=55219 Upgrade digester to use DefaultHandler2 and use LexicalHandler to detect publicId. Simplify web application version detection in web.xml Extracted from a patch by Jeremy Boynes.","Bug 55218  Upgrade Digester to be based on DefaultHandler2 and use LexicalHandler to detect publicId","upgrad digest base default handler2 defaulthandler2 use lexic handler lexicalhandl detect public id publicid","Digester uses SAX2 features but is still based the SAX1 DefaultHandler. By upgrading to DefaultHandler2 it would be able to handle baseURIs when resolving entities and would have a default implementation of a LexicalHandler.

Using LexicalHandler would allow it to respond directly to the startDTD event that reports the DOCTYPE (if present) so that it would not need to infer that from the first attempt to resolve an entity.","digest us x2 sax2 featur still base x1 sax1 default handler defaulthandl upgrad default handler2 defaulthandler2 would abl handl base is baseuri resolv entiti would default implement lexic handler lexicalhandl use lexic handler lexicalhandl would allow respond directli start startdtd event report doctyp present would need infer first attempt resolv entiti","""java/org/apache/tomcat/util/digester/Digester.java""","2","2","2","1","19","2","8","8","2","0","1","86","86","86","30","86","0","2","2","82","2027","420","827","232","471","785","350","543","192","351","18","18","20","4","4","1","191","191","196","103","enhancement"
"55218","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55218 and https://issues.apache.org/bugzilla/show_bug.cgi?id=55219 Upgrade digester to use DefaultHandler2 and use LexicalHandler to detect publicId. Simplify web application version detection in web.xml Extracted from a patch by Jeremy Boynes.","Bug 55218  Upgrade Digester to be based on DefaultHandler2 and use LexicalHandler to detect publicId","upgrad digest base default handler2 defaulthandler2 use lexic handler lexicalhandl detect public id publicid","Digester uses SAX2 features but is still based the SAX1 DefaultHandler. By upgrading to DefaultHandler2 it would be able to handle baseURIs when resolving entities and would have a default implementation of a LexicalHandler.

Using LexicalHandler would allow it to respond directly to the startDTD event that reports the DOCTYPE (if present) so that it would not need to infer that from the first attempt to resolve an entity.","digest us x2 sax2 featur still base x1 sax1 default handler defaulthandl upgrad default handler2 defaulthandler2 would abl handl base is baseuri resolv entiti would default implement lexic handler lexicalhandl use lexic handler lexicalhandl would allow respond directli start startdtd event report doctyp present would need infer first attempt resolv entiti","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","14","1","8","3","3","0","2","364","364","364","130","364","0","13","9","342","6906","1368","3723","1191","2174","1820","1608","2486","947","1539","52","52","63","9","6","0","776","776","844","454","enhancement"
"55218","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55218 and https://issues.apache.org/bugzilla/show_bug.cgi?id=55219 Upgrade digester to use DefaultHandler2 and use LexicalHandler to detect publicId. Simplify web application version detection in web.xml Extracted from a patch by Jeremy Boynes.","Bug 55218  Upgrade Digester to be based on DefaultHandler2 and use LexicalHandler to detect publicId","upgrad digest base default handler2 defaulthandler2 use lexic handler lexicalhandl detect public id publicid","Digester uses SAX2 features but is still based the SAX1 DefaultHandler. By upgrading to DefaultHandler2 it would be able to handle baseURIs when resolving entities and would have a default implementation of a LexicalHandler.

Using LexicalHandler would allow it to respond directly to the startDTD event that reports the DOCTYPE (if present) so that it would not need to infer that from the first attempt to resolve an entity.","digest us x2 sax2 featur still base x1 sax1 default handler defaulthandl upgrad default handler2 defaulthandler2 would abl handl base is baseuri resolv entiti would default implement lexic handler lexicalhandl use lexic handler lexicalhandl would allow respond directli start startdtd event report doctyp present would need infer first attempt resolv entiti","""test/org/apache/tomcat/util/descriptor/web/TestWebXml.java""","1","1","1","1","17","3","12","1","1","0","0","13","13","13","0","13","0","0","0","13","277","63","183","65","136","34","136","150","52","98","1","1","1","1","0","0","13","13","13","13","enhancement"
"55218","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55218 and https://issues.apache.org/bugzilla/show_bug.cgi?id=55219 Upgrade digester to use DefaultHandler2 and use LexicalHandler to detect publicId. Simplify web application version detection in web.xml Extracted from a patch by Jeremy Boynes.","Bug 55218  Upgrade Digester to be based on DefaultHandler2 and use LexicalHandler to detect publicId","upgrad digest base default handler2 defaulthandler2 use lexic handler lexicalhandl detect public id publicid","Digester uses SAX2 features but is still based the SAX1 DefaultHandler. By upgrading to DefaultHandler2 it would be able to handle baseURIs when resolving entities and would have a default implementation of a LexicalHandler.

Using LexicalHandler would allow it to respond directly to the startDTD event that reports the DOCTYPE (if present) so that it would not need to infer that from the first attempt to resolve an entity.","digest us x2 sax2 featur still base x1 sax1 default handler defaulthandl upgrad default handler2 defaulthandler2 would abl handl base is baseuri resolv entiti would default implement lexic handler lexicalhandl use lexic handler lexicalhandl would allow respond directli start startdtd event report doctyp present would need infer first attempt resolv entiti","""test/org/apache/tomcat/util/descriptor/web/TestWebXml.java""","1","1","1","1","17","3","12","1","1","0","0","13","13","13","0","13","0","0","0","13","277","63","183","65","136","34","136","150","52","98","1","1","1","1","0","0","13","13","13","13","enhancement"
"55218","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55218 and https://issues.apache.org/bugzilla/show_bug.cgi?id=55219 Upgrade digester to use DefaultHandler2 and use LexicalHandler to detect publicId. Simplify web application version detection in web.xml Extracted from a patch by Jeremy Boynes.","Bug 55218  Upgrade Digester to be based on DefaultHandler2 and use LexicalHandler to detect publicId","upgrad digest base default handler2 defaulthandler2 use lexic handler lexicalhandl detect public id publicid","Digester uses SAX2 features but is still based the SAX1 DefaultHandler. By upgrading to DefaultHandler2 it would be able to handle baseURIs when resolving entities and would have a default implementation of a LexicalHandler.

Using LexicalHandler would allow it to respond directly to the startDTD event that reports the DOCTYPE (if present) so that it would not need to infer that from the first attempt to resolve an entity.","digest us x2 sax2 featur still base x1 sax1 default handler defaulthandl upgrad default handler2 defaulthandler2 would abl handl base is baseuri resolv entiti would default implement lexic handler lexicalhandl use lexic handler lexicalhandl would allow respond directli start startdtd event report doctyp present would need infer first attempt resolv entiti","""java/org/apache/tomcat/util/descriptor/web/WebXml.java""","4","4","4","2","18","0","16","1","1","14","6","107","107","93","46","107","0","13","0","94","2248","172","1830","268","1345","250","761","1307","355","952","125","125","128","98","6","0","433","433","463","256","enhancement"
"55228","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55228 Allow applications to set the Date header.","Bug 55228  AbstractHttp11Processor overwrites Date header, even when set by application","abstract http11 processor abstracthttp11processor overwrit date header even set applic","","","""java/org/apache/coyote/http11/AbstractHttp11Processor.java""","5","5","6","2","29","2","21","6","1","0","1","44","60","60","28","60","2","6","20","32","1735","265","1036","216","727","445","513","739","206","533","41","39","55","19","5","0","236","232","286","104","major"
"55231","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55231 JSP capability should be based on effective version of webapp.","Bug 55231  NPE and incorrect version detection in JspC","npe incorrect version detect jsp jspc","JspC's JspConfig now reads version and jsp-config information from the ServletContext. 

It uses getMajorVersion() which returns the maximum version supported by the container. It should use getEffectiveVersion() to use the version of the web application.

ServletContext.getJspConfigDescriptor() can return null if there is no <jsp-config> in the web.xml. JspConfig does not allow for this and will throw a NPE e.g. if there is no web.xml in the application.","jsp jspc jsp config jspconfig read version jsp config jspconfig inform servlet context servletcontext us get major version getmajorvers return maximum version support contain use get effect version geteffectivevers use version web applic servlet context servletcontext get jsp config descriptor getjspconfigdescriptor return null jsp config jspconfig web xml jsp config jspconfig allow throw npe web xml applic","""java/org/apache/jasper/compiler/JspConfig.java""","3","3","4","2","19","1","16","1","3","0","6","22","22","22","21","22","1","3","0","18","537","72","403","124","256","65","181","267","112","155","29","29","34","10","5","0","80","80","95","49","normal"
"55238","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55238 Avoid possible NPE. Patch by Niki Dokovski. Also added a check to onTimeout() to save creating an Exception unnecessarily","Bug 55238  [websocket] NPE in clearHandler(WsRemoteEndpointImplServer.java:156)","websocket npe clear handler clearhandl remot endpoint impl server wsremoteendpointimplserv java","","","""java/org/apache/tomcat/websocket/server/WsRemoteEndpointImplServer.java""","2","2","2","1","11","0","9","1","1","0","2","8","8","8","6","8","0","1","5","2","159","25","105","38","54","29","53","75","33","42","9","9","9","6","4","0","20","20","20","13","normal"
"55240","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55240 Prevent looping after Poller stop and ensure that streams for upgraded connections are closed if possible.","Bug 55240  [websocket] SOE in NioEndpoint","websocket soe nio endpoint nioendpoint","","","""java/org/apache/coyote/http11/upgrade/AbstractProcessor.java""","1","1","1","1","4","0","3","0","1","0","1","17","17","17","3","17","0","0","1","16","160","32","105","58","28","23","40","61","36","25","4","4","5","4","1","0","20","20","21","20","normal"
"55240","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55240 Prevent looping after Poller stop and ensure that streams for upgraded connections are closed if possible.","Bug 55240  [websocket] SOE in NioEndpoint","websocket soe nio endpoint nioendpoint","","","""java/org/apache/coyote/http11/upgrade/AprProcessor.java""","1","1","1","1","8","1","7","0","1","0","1","1","1","1","0","1","0","0","0","1","37","6","15","9","5","16","8","10","8","2","1","1","1","1","0","1","1","1","1","1","normal"
"55240","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55240 Prevent looping after Poller stop and ensure that streams for upgraded connections are closed if possible.","Bug 55240  [websocket] SOE in NioEndpoint","websocket soe nio endpoint nioendpoint","","","""java/org/apache/coyote/http11/upgrade/BioProcessor.java""","1","1","1","1","7","1","6","0","1","0","1","1","1","1","0","1","0","0","0","1","37","7","14","9","4","16","8","10","8","2","1","1","1","1","0","1","1","1","1","1","normal"
"55240","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55240 Prevent looping after Poller stop and ensure that streams for upgraded connections are closed if possible.","Bug 55240  [websocket] SOE in NioEndpoint","websocket soe nio endpoint nioendpoint","","","""java/org/apache/tomcat/util/net/NioEndpoint.java""","3","3","3","1","12","0","10","1","9","0","4","101","106","106","45","106","0","3","17","86","1678","182","1215","301","827","309","606","919","273","646","29","29","39","8","7","0","318","318","368","131","normal"
"55240","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55240 Prevent looping after Poller stop and ensure that streams for upgraded connections are closed if possible.","Bug 55240  [websocket] SOE in NioEndpoint","websocket soe nio endpoint nioendpoint","","","""java/org/apache/coyote/http11/upgrade/NioProcessor.java""","1","1","1","1","8","1","7","0","1","0","1","1","1","1","0","1","0","0","0","1","37","6","15","9","5","16","8","10","8","2","1","1","1","1","0","1","1","1","1","1","normal"
"55244","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55244 Fix ClassNotFoundException with JspC Patch provided by Jeremy Boynes","Bug 55244  JspC throws ClassNotFoundException from Digester","jsp jspc throw class not found except classnotfoundexcept digest","","","""java/org/apache/jasper/servlet/JspCServletContext.java""","1","1","1","1","7","0","4","2","1","0","0","54","54","54","6","54","0","0","0","54","692","149","360","183","126","183","139","216","117","99","7","7","8","4","2","1","74","74","76","59","normal"
"55244","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55244 Fix ClassNotFoundException with JspC Patch provided by Jeremy Boynes","Bug 55244  JspC throws ClassNotFoundException from Digester","jsp jspc throw class not found except classnotfoundexcept digest","","","""java/org/apache/tomcat/util/descriptor/web/WebXmlParser.java""","5","5","5","1","37","5","32","0","1","0","2","2","2","2","4","2","0","0","0","2","133","22","84","27","52","27","49","59","25","34","9","9","10","1","2","0","10","10","11","2","normal"
"55250","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55250 Fix JspC refactoring - tldLocationsCache not created Patch by Jeremy Boynes","Bug 55250  JspC does not initialize tldLocationsCache resulting in NPE","jsp jspc initi tld locat cach tldlocationscach result npe","Change in how ServletContext was created missed initialization of tldLocationsCache","chang servlet context servletcontext creat miss initi tld locat cach tldlocationscach","""java/org/apache/jasper/JspC.java""","2","2","3","1","15","0","10","4","1","1","35","81","81","80","47","81","0","3","11","67","1608","169","1027","315","644","412","496","728","275","453","38","38","38","31","6","0","236","236","256","136","normal"
"55251","90","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55251 Do not allow JspC task to fail silently if the web.xml or web.xml fragment can not be generated.","Bug 55251  JspC fails silently if directory for generated web.xml does not exist","jsp jspc fail silent directori gener web xml exist","If the file specified for webXml (via call to setWebXml) cannot be created (for example if the directory does not exist), then JspC fails silently.","file specifi web xml webxml via call set web xml setwebxml cannot creat exampl directori exist jsp jspc fail silent","""java/org/apache/jasper/JspC.java""","2","2","3","1","15","0","10","4","1","1","35","81","81","80","48","81","0","3","11","67","1617","169","1038","319","651","410","505","738","279","459","38","38","38","31","6","0","237","237","257","136","normal"
"55259","0","Jeremy Boynes","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55259 JspProperty is the same for all patterns so only create once.","Bug 55259  Unnecessary work in JspConfig","unnecessari work jsp config jspconfig","JspProperty is the same for all url patterns in a group; the current code creates a new one each iteration","jsp properti jspproperti url pattern group current code creat new one iter","""java/org/apache/jasper/compiler/JspConfig.java""","3","3","4","2","19","1","16","1","3","0","6","22","22","22","21","22","1","3","0","18","538","72","404","124","257","65","182","268","112","156","29","29","34","10","5","0","80","80","95","49","trivial"
"55262","6","Jeremy Boynes","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=55262 Duplicate prelude and coda entries in same <jsp-property-group> are preserved.","Bug 55262  Duplicate preludes and codas in same <jsp-property-group> are ignored","duplic prelud coda jsp properti group jsppropertygroup ignor","If a <jsp-property-group> contains multiple <include-prelude> elements that happen to refer to the same file only one include is performed. The same applies to codas.

This happens because WebXml stores these in a LinkedHashSet rather than a List.

When multiple <jsp-property-group>s are combined, JspConfig uses a Vector and so preserves duplicates as required by the JSP spec.

I have a test case demonstrating this but before committing a fix I would like confirmation that WebXml's behaviour is incorrect.","jsp properti group jsppropertygroup contain multipl includ prelud includeprelud element happen refer file one includ perform appli coda happen web xml webxml store link hash set linkedhashset rather list multipl jsp properti group jsppropertygroup combin jsp config jspconfig us vector preserv duplic requir jsp spec case demonstr commit fix would like confirm web xml webxml behaviour incorrect","""java/org/apache/tomcat/util/descriptor/web/JspPropertyGroup.java""","1","1","1","1","2","0","2","0","1","0","0","24","24","24","12","24","0","0","0","24","101","13","69","41","37","19","39","64","40","24","1","1","1","1","0","0","24","24","24","24","minor"
"55262","6","Jeremy Boynes","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=55262 Duplicate prelude and coda entries in same <jsp-property-group> are preserved.","Bug 55262  Duplicate preludes and codas in same <jsp-property-group> are ignored","duplic prelud coda jsp properti group jsppropertygroup ignor","If a <jsp-property-group> contains multiple <include-prelude> elements that happen to refer to the same file only one include is performed. The same applies to codas.

This happens because WebXml stores these in a LinkedHashSet rather than a List.

When multiple <jsp-property-group>s are combined, JspConfig uses a Vector and so preserves duplicates as required by the JSP spec.

I have a test case demonstrating this but before committing a fix I would like confirmation that WebXml's behaviour is incorrect.","jsp properti group jsppropertygroup contain multipl includ prelud includeprelud element happen refer file one includ perform appli coda happen web xml webxml store link hash set linkedhashset rather list multipl jsp properti group jsppropertygroup combin jsp config jspconfig us vector preserv duplic requir jsp spec case demonstr commit fix would like confirm web xml webxml behaviour incorrect","""test/org/apache/jasper/compiler/TestCompiler.java""","1","1","1","1","14","2","9","2","1","1","0","12","12","11","0","12","0","1","0","11","227","53","139","87","91","45","92","105","68","37","1","1","1","1","0","0","12","12","12","12","minor"
"55262","6","Jeremy Boynes","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=55262 Duplicate prelude and coda entries in same <jsp-property-group> are preserved.","Bug 55262  Duplicate preludes and codas in same <jsp-property-group> are ignored","duplic prelud coda jsp properti group jsppropertygroup ignor","If a <jsp-property-group> contains multiple <include-prelude> elements that happen to refer to the same file only one include is performed. The same applies to codas.

This happens because WebXml stores these in a LinkedHashSet rather than a List.

When multiple <jsp-property-group>s are combined, JspConfig uses a Vector and so preserves duplicates as required by the JSP spec.

I have a test case demonstrating this but before committing a fix I would like confirmation that WebXml's behaviour is incorrect.","jsp properti group jsppropertygroup contain multipl includ prelud includeprelud element happen refer file one includ perform appli coda happen web xml webxml store link hash set linkedhashset rather list multipl jsp properti group jsppropertygroup combin jsp config jspconfig us vector preserv duplic requir jsp spec case demonstr commit fix would like confirm web xml webxml behaviour incorrect","""test/org/apache/jasper/servlet/TestJspCServletContext.java""","1","1","1","1","8","0","8","0","1","0","0","8","8","8","0","8","0","0","0","8","117","12","89","57","44","16","51","60","38","22","1","1","1","1","0","0","8","8","8","8","minor"
"55267","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55267 Separate read and write timeout for NIO and ensure that the write timeout is always the connection timeout configured in the connector. This prevents long Comet timeouts (which are intended for read operations) being used for writes which - particularly in error conditions - can cause long delays. Since only NIO supports comet timeouts this change is only required in NIO.","Bug 55267  NIO thread locked","nio thread lock","Did some load test and thread got stuck, see dump.

Basically I just simulate 100 users that connect and disconnect.","load thread got stuck see dump basic simul user connect disconnect","""java/org/apache/coyote/ajp/AjpNioProcessor.java""","6","6","7","3","37","3","28","6","1","0","1","9","9","9","2","9","0","1","5","3","436","68","281","63","193","87","148","206","53","153","24","24","29","11","4","0","58","58","64","32","normal"
"55267","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55267 Separate read and write timeout for NIO and ensure that the write timeout is always the connection timeout configured in the connector. This prevents long Comet timeouts (which are intended for read operations) being used for writes which - particularly in error conditions - can cause long delays. Since only NIO supports comet timeouts this change is only required in NIO.","Bug 55267  NIO thread locked","nio thread lock","Did some load test and thread got stuck, see dump.

Basically I just simulate 100 users that connect and disconnect.","load thread got stuck see dump basic simul user connect disconnect","""java/org/apache/coyote/http11/InternalNioOutputBuffer.java""","2","2","3","1","14","1","10","3","2","0","0","15","15","15","4","15","0","5","4","6","332","61","185","71","104","87","96","136","58","78","8","8","10","3","4","0","38","38","49","17","normal"
"55267","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55267 Separate read and write timeout for NIO and ensure that the write timeout is always the connection timeout configured in the connector. This prevents long Comet timeouts (which are intended for read operations) being used for writes which - particularly in error conditions - can cause long delays. Since only NIO supports comet timeouts this change is only required in NIO.","Bug 55267  NIO thread locked","nio thread lock","Did some load test and thread got stuck, see dump.

Basically I just simulate 100 users that connect and disconnect.","load thread got stuck see dump basic simul user connect disconnect","""java/org/apache/tomcat/util/net/NioEndpoint.java""","3","3","3","1","12","0","10","1","9","0","4","101","106","106","45","106","0","3","17","86","1679","182","1216","301","828","309","606","919","273","646","29","29","40","8","7","0","318","318","369","131","normal"
"55267","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55267 Separate read and write timeout for NIO and ensure that the write timeout is always the connection timeout configured in the connector. This prevents long Comet timeouts (which are intended for read operations) being used for writes which - particularly in error conditions - can cause long delays. Since only NIO supports comet timeouts this change is only required in NIO.","Bug 55267  NIO thread locked","nio thread lock","Did some load test and thread got stuck, see dump.

Basically I just simulate 100 users that connect and disconnect.","load thread got stuck see dump basic simul user connect disconnect","""java/org/apache/coyote/http11/upgrade/NioServletOutputStream.java""","3","3","3","1","18","1","17","0","1","0","0","5","5","5","3","5","0","1","3","1","138","19","101","37","55","18","48","67","29","38","6","6","6","3","3","0","17","17","17","9","normal"
"55287","6","Jeremy Boynes","Fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=55287","Bug 55287  ServletContainerInitializer in parent classloader may not be found","servlet contain initi servletcontaineriniti parent classload may found","To include the JasperInitializer in the test environment I added an entry in testclasses/META-INF/services. This is not picked up when the parent classloader is searched because this path is a directory not a JAR file. 

It would be picked up if the ""scanAllDirectories"" extension was enabled but that should not be necessary if the search is to be semantically equivalent to j.u.ServiceLoader (which does locate it).","includ jasper initi jasperiniti environ ad entri testclass meta inf servic pick parent classload search path directori jar file would pick scan all directori scanalldirectori extens enabl necessari search semant equival servic loader serviceload locat","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","8","1","39","3","29","6","3","1","7","60","60","59","20","60","0","11","36","13","2698","330","1935","440","1316","434","857","1359","458","901","45","45","48","13","7","0","441","441","484","114","normal"
"55291","0","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55291 Avoid NPE when registering a session. Patch provided by rstoyanchev.","Bug 55291  Bug in WsServerContainer leading to NPE","server contain wsservercontain lead npe","","","""java/org/apache/tomcat/websocket/server/WsServerContainer.java""","2","2","2","1","15","1","11","2","3","4","5","20","20","16","8","20","0","5","4","11","445","69","291","117","158","86","122","179","93","86","9","9","9","7","3","0","49","49","52","26","normal"
"55309","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55309 Fix concurrency issue in TagPluginManager PageInfo should not be a field as it is per page and there will be conflicts with concurrent compilations. Patch provided by Sheldon Shao.","Bug 55309  Concurrent issue of TagPluginManager","concurr issu tag plugin manag tagpluginmanag","","","""java/org/apache/jasper/compiler/TagPluginManager.java""","1","1","2","1","9","0","7","0","3","0","3","23","23","23","8","23","1","4","0","18","297","44","222","85","115","31","101","148","67","81","8","8","8","6","3","0","45","45","47","30","regression"
"55312","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55312 Ensure that class path entries representing directories are always scanned for matches to @HandlesTypes","Bug 55312  No SCI scan in embedded Tomcat","sci scan embed tomcat","I like the fact that SCI scanning is off by default in a Tomcat embedded instance, but I'd lik eto be able to switch it on. It might even be possible already, but the API is non-obvious.  Maybe a method in Tomcat or associated friendly helper?

Would also be nice in Tomcat 7.","like fact sci scan default tomcat embed instanc lik eto abl switch might even possibl alreadi api non obviou nonobvi mayb method tomcat associ friendli helper would nice tomcat","""java/org/apache/tomcat/util/scan/StandardJarScanner.java""","3","3","4","1","16","1","13","1","1","0","2","14","14","14","5","14","0","3","0","11","348","35","215","72","126","98","94","144","66","78","24","24","27","3","6","0","49","49","57","16","normal"
"55316","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55316 Log IO errors with client at debug. Client may simply have gone away.","Bug 55316  Ugly error log when WS client disconnects unexpectedly","ugli error log w client disconnect unexpectedli","When a WS browser client disconnects unexpectedly (e.g. in the SNake sample if the user just closes the browser or loads another page) you get ugle ERROR logs in the Tomcat server.  E.g.

2013-07-27 12:04:34.424 ERROR 31847 --- [nio-8080-exec-7] org.apache.tomcat.websocket.WsSession    : Failed to send close message to remote endpoint

java.io.IOException: java.util.concurrent.ExecutionException: java.io.EOFException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.startMessageBlock(WsRemoteEndpointImplBase.java:221)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:466)
	at org.apache.tomcat.websocket.WsSession.onClose(WsSession.java:430)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.close(WsHttpUpgradeHandler.java:172)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.access$200(WsHttpUpgradeHandler.java:45)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler$WsReadListener.onDataAvailable(WsHttpUpgradeHandler.java:198)
	at org.apache.coyote.http11.upgrade.AbstractServletInputStream.onDataAvailable(AbstractServletInputStream.java:169)
	at org.apache.coyote.http11.upgrade.AbstractProcessor.upgradeDispatch(AbstractProcessor.java:95)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:630)
	at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1585)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1543)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:724)
Caused by: java.util.concurrent.ExecutionException: java.io.EOFException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$FutureToSendHandler.get(WsRemoteEndpointImplBase.java:779)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.startMessageBlock(WsRemoteEndpointImplBase.java:217)
	... 14 common frames omitted
Caused by: java.io.EOFException: null
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doClose(WsRemoteEndpointImplServer.java:126)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.close(WsRemoteEndpointImplBase.java:531)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.onWritePossible(WsRemoteEndpointImplServer.java:107)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:71)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:353)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.startMessage(WsRemoteEndpointImplBase.java:254)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.startMessageBlock(WsRemoteEndpointImplBase.java:211)
	... 14 common frames omitted


Presumably this is expected to be relatively normal, so I'd expect a lot less noise (and no ERROR) in the log?","w browser client disconnect unexpectedli nake snake sampl user close browser load anoth page get ugl error log tomcat server error nio 8080 exec 8080exec apach tomcat websocket session wssession fail send close messag remot endpoint java except ioexcept java util concurr execut except executionexcept java except eofexcept apach tomcat websocket remot endpoint impl base wsremoteendpointimplbas start messag block startmessageblock remot endpoint impl base wsremoteendpointimplbas java apach tomcat websocket session wssession send close messag sendclosemessag session wssession java apach tomcat websocket session wssession on close onclos session wssession java apach tomcat websocket server http upgrad handler wshttpupgradehandl close http upgrad handler wshttpupgradehandl java apach tomcat websocket server http upgrad handler wshttpupgradehandl access http upgrad handler wshttpupgradehandl java apach tomcat websocket server http upgrad handler wshttpupgradehandl read listen wsreadlisten on data avail ondataavail http upgrad handler wshttpupgradehandl java apach coyot http11 upgrad abstract servlet input stream abstractservletinputstream on data avail ondataavail abstract servlet input stream abstractservletinputstream java apach coyot http11 upgrad abstract processor abstractprocessor upgrad dispatch upgradedispatch abstract processor abstractprocessor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach coyot http11 http11 nio protocol http11nioprotocol http11 connect handler http11connectionhandl process http11 nio protocol http11nioprotocol java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor do run dorun nio endpoint nioendpoint java apach tomcat util net nio endpoint nioendpoint socket processor socketprocessor run nio endpoint nioendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java caus java util concurr execut except executionexcept java except eofexcept apach tomcat websocket remot endpoint impl base wsremoteendpointimplbas futur to send handler futuretosendhandl get remot endpoint impl base wsremoteendpointimplbas java apach tomcat websocket remot endpoint impl base wsremoteendpointimplbas start messag block startmessageblock remot endpoint impl base wsremoteendpointimplbas java common frame omit caus java except eofexcept null apach tomcat websocket server remot endpoint impl server wsremoteendpointimplserv do close doclos remot endpoint impl server wsremoteendpointimplserv java apach tomcat websocket remot endpoint impl base wsremoteendpointimplbas close remot endpoint impl base wsremoteendpointimplbas java apach tomcat websocket server remot endpoint impl server wsremoteendpointimplserv on write possibl onwriteposs remot endpoint impl server wsremoteendpointimplserv java apach tomcat websocket server remot endpoint impl server wsremoteendpointimplserv do write dowrit remot endpoint impl server wsremoteendpointimplserv java apach tomcat websocket remot endpoint impl base wsremoteendpointimplbas write messag part writemessagepart remot endpoint impl base wsremoteendpointimplbas java apach tomcat websocket remot endpoint impl base wsremoteendpointimplbas start messag startmessag remot endpoint impl base wsremoteendpointimplbas java apach tomcat websocket remot endpoint impl base wsremoteendpointimplbas start messag block startmessageblock remot endpoint impl base wsremoteendpointimplbas java common frame omit presum expect rel normal expect lot le nois error log","""java/org/apache/tomcat/websocket/WsSession.java""","1","1","1","1","9","0","7","1","2","1","4","43","41","42","30","43","0","4","6","33","614","116","433","162","224","65","206","281","117","164","9","8","11","3","3","0","73","71","77","45","normal"
"55317","60","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55317 Facilitate weaving by allowing ClassFileTransformer to be added to WebppClassLoader Patch be Nick Williams","Bug 55317  Facilitate weaving by allowing ClassFileTransformer to be added to WebppClassLoader","facilit weav allow class file transform classfiletransform ad webpp class loader webppclassload","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","5","2","30","2","20","7","5","1","7","84","84","83","33","84","3","13","17","51","3168","485","1880","434","1297","808","847","1296","389","907","41","41","49","24","10","0","444","444","474","213","enhancement"
"55333","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55333 Correct regression in fix for bug 55071. Don't commit the connection until after the ResultSet has been used.","Bug 55333  JDBCRealm Digest authentication Flow is not working throws Function sequence error","realm jdbcrealm digest authent flow work throw function sequenc error","Issue: Digest authentication flow is not working
Error Thrown : Function sequence error

PackageName: org.apache.catalina.realm
ClassName : JDBCRealm
MethodName: String getPassword(String username)

Snapshot from above mentioned method
===================================
 stmt = credentials(dbConnection, username);
 rs = stmt.executeQuery();
 // Due to this connection commit,  resultset is nullified 
 dbConnection.commit();
 
 // While executing this statement it throws Function sequence error
 if (rs.next()) {
    dbCredentials = rs.getString(1);
 }

===================================

Above explanation has been validate by placing 7.0.41 catalina.jar where the above changes are not there due to fix of 55071 bug
 

Below snapshot is the error observed while trying for Digest authentication
========================================================================== 

Jul 31, 2013 3:43:40 PM org.apache.catalina.realm.JDBCRealm getPassword

SEVERE: Exception performing authentication

java.sql.SQLException: [TimesTen][TimesTen 11.2.2.5.0 ODBC Driver]Function sequence error

    at com.timesten.jdbc.JdbcOdbc.createSQLException(JdbcOdbc.java:3238)

    at com.timesten.jdbc.JdbcOdbc.standardError(JdbcOdbc.java:3387)

    at com.timesten.jdbc.JdbcOdbc.SQLFetch(JdbcOdbc.java:921)

    at com.timesten.jdbc.JdbcOdbcResultSet.next(JdbcOdbcResultSet.java:409)

    at org.apache.catalina.realm.JDBCRealm.getPassword(JDBCRealm.java:558)

    at org.apache.catalina.realm.RealmBase.getDigest(RealmBase.java:1189)

    at org.apache.catalina.realm.RealmBase.authenticate(RealmBase.java:409)

    at com.kodiak.digest.authentication.KnDigestAuthenticator$KnDigestInfo.authenticate(KnDigestAuthenticator.java:733)

    at com.kodiak.digest.authentication.KnDigestAuthenticator.authenticate(KnDigestAuthenticator.java:275)

    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:574)

    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:953)

    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)

    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)

    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)

    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)

    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1023)

    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)

    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)

    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)

    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)

    at java.lang.Thread.run(Thread.java:724)

 

Jul 31, 2013 3:43:40 PM org.apache.catalina.realm.JDBCRealm getPassword

SEVERE: Exception performing authentication

java.sql.SQLException: [TimesTen][TimesTen 11.2.2.5.0 ODBC Driver]Function sequence error

    at com.timesten.jdbc.JdbcOdbc.createSQLException(JdbcOdbc.java:3238)

    at com.timesten.jdbc.JdbcOdbc.standardError(JdbcOdbc.java:3387)

    at com.timesten.jdbc.JdbcOdbc.SQLFetch(JdbcOdbc.java:921)

    at com.timesten.jdbc.JdbcOdbcResultSet.next(JdbcOdbcResultSet.java:409)

    at org.apache.catalina.realm.JDBCRealm.getPassword(JDBCRealm.java:558)

    at org.apache.catalina.realm.RealmBase.getDigest(RealmBase.java:1189)

    at org.apache.catalina.realm.RealmBase.authenticate(RealmBase.java:409)

""localhost.2013-07-31.log"" 50L, 3800C         

Cheers,
Mahaaboob","issu digest authent flow work error thrown function sequenc error packag name packagenam apach catalina realm class name classnam realm jdbcrealm method name methodnam string get password getpassword string usernam snapshot mention method stmt credenti db connect dbconnect usernam r stmt execut queri executequeri due connect commit resultset nullifi db connect dbconnect commit execut statement throw function sequenc error r next db credenti dbcredenti r get string getstr explan valid place catalina jar chang due fix snapshot error observ tri digest authent jul pm apach catalina realm realm jdbcrealm get password getpassword sever except perform authent java sql except sqlexcept time ten timesten time ten timesten odbc driver function sequenc error timesten jdbc jdbc odbc jdbcodbc creat except createsqlexcept jdbc odbc jdbcodbc java timesten jdbc jdbc odbc jdbcodbc standard error standarderror jdbc odbc jdbcodbc java timesten jdbc jdbc odbc jdbcodbc fetch sqlfetch jdbc odbc jdbcodbc java timesten jdbc jdbc odbc result set jdbcodbcresultset next jdbc odbc result set jdbcodbcresultset java apach catalina realm realm jdbcrealm get password getpassword realm jdbcrealm java apach catalina realm realm base realmbas get digest getdigest realm base realmbas java apach catalina realm realm base realmbas authent realm base realmbas java kodiak digest authent kn digest authent kndigestauthent kn digest info kndigestinfo authent kn digest authent kndigestauthent java kodiak digest authent kn digest authent kndigestauthent authent kn digest authent kndigestauthent java apach catalina authent authent base authenticatorbas invok authent base authenticatorbas java apach catalina valv access log valv accesslogvalv invok access log valv accesslogvalv java apach catalina core standard host valv standardhostvalv invok standard host valv standardhostvalv java apach catalina valv error report valv errorreportvalv invok error report valv errorreportvalv java apach catalina core standard engin valv standardenginevalv invok standard engin valv standardenginevalv java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java jul pm apach catalina realm realm jdbcrealm get password getpassword sever except perform authent java sql except sqlexcept time ten timesten time ten timesten odbc driver function sequenc error timesten jdbc jdbc odbc jdbcodbc creat except createsqlexcept jdbc odbc jdbcodbc java timesten jdbc jdbc odbc jdbcodbc standard error standarderror jdbc odbc jdbcodbc java timesten jdbc jdbc odbc jdbcodbc fetch sqlfetch jdbc odbc jdbcodbc java timesten jdbc jdbc odbc result set jdbcodbcresultset next jdbc odbc result set jdbcodbcresultset java apach catalina realm realm jdbcrealm get password getpassword realm jdbcrealm java apach catalina realm realm base realmbas get digest getdigest realm base realmbas java apach catalina realm realm base realmbas authent realm base realmbas java localhost log 50 50l 3800 3800c cheer mahaaboob","""java/org/apache/catalina/realm/JDBCRealm.java""","2","2","2","1","18","2","9","7","1","0","1","31","31","31","13","31","0","1","10","20","782","162","322","89","203","299","150","221","75","146","9","9","10","4","5","1","69","69","72","40","blocker"
"55342","32","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55342 Remove unnecessary reset of interrupted flag. If the InterruptedException is thrown, the interrupted flag has been cleared.","Bug 55342  Lost interruption","lost interrupt","org.apache.tomcat.jdbc.pool.ConnectionPool#close should not call Thread.interrupted() because interrupt was already reset by code that thrown InterruptedException.

  } catch (InterruptedException ex) {
      if (getPoolProperties().getPropagateInterruptState()) {
          Thread.currentThread().interrupt();
-     } else {
-         Thread.interrupted();
      }
  }","apach tomcat jdbc pool connect pool connectionpool close call thread interrupt interrupt alreadi reset code thrown interrupt except interruptedexcept catch interrupt except interruptedexcept ex get pool properti getpoolproperti get propag interrupt state getpropagateinterruptst thread current thread currentthread interrupt els thread interrupt","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","3","3","4","1","19","0","13","5","3","6","5","57","57","51","21","57","1","3","18","35","1367","116","855","188","574","424","412","636","185","451","18","18","18","8","6","1","222","222","241","105","normal"
"55343","32","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55343 Add flag to ignore error of connection creation while initializing the pool.","Bug 55343  Add flag to ignore exceptions while creating initial pool","add flag ignor except creat initi pool","I want my initial pool to be of some size i.e. not empty AND start even if it fails to create all or some of connections.

If pool fails to create initial connections for some reason it just throws exceptions. To workaround that I have to set initial pool size to 0.

It can be handy to add a flag to ignore (just log them) exceptions that occur while creating initial connections.","initi pool size empti start even fail creat connect pool fail creat initi connect reason throw except workaround set initi pool size handi add flag ignor log except occur creat initi connect","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","3","3","4","1","19","0","13","5","3","6","5","57","57","51","21","57","1","3","18","35","1363","116","851","188","570","424","410","634","185","449","18","18","18","8","6","1","222","222","241","105","enhancement"
"55343","32","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55343 Add flag to ignore error of connection creation while initializing the pool.","Bug 55343  Add flag to ignore exceptions while creating initial pool","add flag ignor except creat initi pool","I want my initial pool to be of some size i.e. not empty AND start even if it fails to create all or some of connections.

If pool fails to create initial connections for some reason it just throws exceptions. To workaround that I have to set initial pool size to 0.

It can be handy to add a flag to ignore (just log them) exceptions that occur while creating initial connections.","initi pool size empti start even fail creat connect pool fail creat initi connect reason throw except workaround set initi pool size handi add flag ignor log except occur creat initi connect","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","3","3","4","1","19","0","13","5","3","6","5","57","57","51","21","57","1","3","18","35","1363","116","851","188","570","424","410","634","185","449","18","18","18","8","6","1","222","222","241","105","enhancement"
"55343","32","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55343 Add flag to ignore error of connection creation while initializing the pool.","Bug 55343  Add flag to ignore exceptions while creating initial pool","add flag ignor except creat initi pool","I want my initial pool to be of some size i.e. not empty AND start even if it fails to create all or some of connections.

If pool fails to create initial connections for some reason it just throws exceptions. To workaround that I have to set initial pool size to 0.

It can be handy to add a flag to ignore (just log them) exceptions that occur while creating initial connections.","initi pool size empti start even fail creat connect pool fail creat initi connect reason throw except workaround set initi pool size handi add flag ignor log except occur creat initi connect","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","1","1","1","1","4","0","3","0","1","1","8","120","120","119","3","120","0","0","0","120","854","177","543","279","170","134","175","307","165","142","4","4","4","1","2","0","130","130","135","120","enhancement"
"55343","32","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55343 Add flag to ignore error of connection creation while initializing the pool.","Bug 55343  Add flag to ignore exceptions while creating initial pool","add flag ignor except creat initi pool","I want my initial pool to be of some size i.e. not empty AND start even if it fails to create all or some of connections.

If pool fails to create initial connections for some reason it just throws exceptions. To workaround that I have to set initial pool size to 0.

It can be handy to add a flag to ignore (just log them) exceptions that occur while creating initial connections.","initi pool size empti start even fail creat connect pool fail creat initi connect reason throw except workaround set initi pool size handi add flag ignor log except occur creat initi connect","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java""","1","1","1","1","4","0","3","0","1","1","8","120","120","119","3","120","0","0","0","120","854","177","543","279","170","134","175","307","165","142","4","4","4","1","2","0","130","130","135","120","enhancement"
"55343","32","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55343 Add flag to ignore error of connection creation while initializing the pool.","Bug 55343  Add flag to ignore exceptions while creating initial pool","add flag ignor except creat initi pool","I want my initial pool to be of some size i.e. not empty AND start even if it fails to create all or some of connections.

If pool fails to create initial connections for some reason it just throws exceptions. To workaround that I have to set initial pool size to 0.

It can be handy to add a flag to ignore (just log them) exceptions that occur while creating initial connections.","initi pool size empti start even fail creat connect pool fail creat initi connect reason throw except workaround set initi pool size handi add flag ignor log except occur creat initi connect","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/DataSourceFactory.java""","12","12","13","1","64","9","50","5","1","2","51","6","6","4","0","6","0","0","1","5","578","89","418","138","320","71","213","289","88","201","57","57","57","3","3","0","76","76","78","8","enhancement"
"55343","32","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55343 Add flag to ignore error of connection creation while initializing the pool.","Bug 55343  Add flag to ignore exceptions while creating initial pool","add flag ignor except creat initi pool","I want my initial pool to be of some size i.e. not empty AND start even if it fails to create all or some of connections.

If pool fails to create initial connections for some reason it just throws exceptions. To workaround that I have to set initial pool size to 0.

It can be handy to add a flag to ignore (just log them) exceptions that occur while creating initial connections.","initi pool size empti start even fail creat connect pool fail creat initi connect reason throw except workaround set initi pool size handi add flag ignor log except occur creat initi connect","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/DataSourceProxy.java""","1","1","1","1","6","0","3","2","1","0","1","137","137","137","2","137","0","1","0","136","1316","244","643","270","224","433","190","356","162","194","4","4","4","3","3","1","165","165","165","139","enhancement"
"55343","32","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55343 Add flag to ignore error of connection creation while initializing the pool.","Bug 55343  Add flag to ignore exceptions while creating initial pool","add flag ignor except creat initi pool","I want my initial pool to be of some size i.e. not empty AND start even if it fails to create all or some of connections.

If pool fails to create initial connections for some reason it just throws exceptions. To workaround that I have to set initial pool size to 0.

It can be handy to add a flag to ignore (just log them) exceptions that occur while creating initial connections.","initi pool size empti start even fail creat connect pool fail creat initi connect reason throw except workaround set initi pool size handi add flag ignor log except occur creat initi connect","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PoolConfiguration.java""","0","0","0","0","0","0","0","0","1","0","1","0","101","101","0","101","0","0","0","101","867","110","107","106","1","650","105","106","106","0","0","0","0","0","0","6","0","0","0","0","enhancement"
"55343","32","Keiichi Fujino","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55343 Add flag to ignore error of connection creation while initializing the pool.","Bug 55343  Add flag to ignore exceptions while creating initial pool","add flag ignor except creat initi pool","I want my initial pool to be of some size i.e. not empty AND start even if it fails to create all or some of connections.

If pool fails to create initial connections for some reason it just throws exceptions. To workaround that I have to set initial pool size to 0.

It can be handy to add a flag to ignore (just log them) exceptions that occur while creating initial connections.","initi pool size empti start even fail creat connect pool fail creat initi connect reason throw except workaround set initi pool size handi add flag ignor log except occur creat initi connect","""modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/PoolProperties.java""","1","1","1","1","6","0","4","2","3","2","6","125","125","123","54","125","0","0","1","124","1269","225","717","330","303","327","283","453","225","228","6","6","10","5","5","0","169","169","180","148","enhancement"
"55345","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55345 Handle ServletContext.getRealPath("""") in the same way for tc8 as for earlier versions.","Bug 55345  Webresources class AbstractResourceSet throws exception upon callong ServletContext.getRealPath("""")","webresourc class abstract resourc set abstractresourceset throw except upon callong servlet context servletcontext get real path getrealpath","As described on user list:

Tomcat 8, unlike Tomcat 7.0.42, throws IllegalArgumentException upon calling ServletContext.getRealPath(""""). It seems that TC8 expects that argument provided to getRealPath is non-empty string.

I believe that ServletContext.getRealPath should allow empty string as argument.

-Ognjen


Stack trace:

[ERROR] java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
        at org.apache.catalina.webresources.AbstractResourceSet.checkPath(AbstractResourceSet.java:39)
        at org.apache.catalina.webresources.DirResourceSet.getResource(DirResourceSet.java:91)
        at org.apache.catalina.webresources.StandardRoot.getResourceInternal(StandardRoot.java:176)
        at org.apache.catalina.webresources.CachedResource.validate(CachedResource.java:62)
        at org.apache.catalina.webresources.Cache.getResource(Cache.java:78)
        at org.apache.catalina.webresources.StandardRoot.getResource(StandardRoot.java:163)
        at org.apache.catalina.core.StandardContext.getRealPath(StandardContext.java:4528)
        at org.apache.catalina.core.ApplicationContext.getRealPath(ApplicationContext.java:398)
        at org.apache.catalina.core.ApplicationContextFacade.getRealPath(ApplicationContextFacade.java:335)
        at org.apache.axis2.deployment.WarBasedAxisConfigurator.<init>(WarBasedAxisConfigurator.java:103)
        at org.apache.axis2.transport.http.AxisServlet.initConfigContext(AxisServlet.java:584)
        at org.apache.axis2.transport.http.AxisServlet.init(AxisServlet.java:454)
        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1235)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1148)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1044)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5025)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5322)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:702)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:698)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:968)
        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1742)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:724)","describ user list tomcat unlik tomcat throw illeg argument except illegalargumentexcept upon call servlet context servletcontext get real path getrealpath seem c8 tc8 expect argument provid get real path getrealpath non empti nonempti string believ servlet context servletcontext get real path getrealpath allow empti string argument ognjen stack trace error java lang illeg argument except illegalargumentexcept java lang illeg argument except illegalargumentexcept apach catalina webresourc abstract resourc set abstractresourceset check path checkpath abstract resourc set abstractresourceset java apach catalina webresourc dir resourc set dirresourceset get resourc getresourc dir resourc set dirresourceset java apach catalina webresourc standard root standardroot get resourc intern getresourceintern standard root standardroot java apach catalina webresourc cach resourc cachedresourc valid cach resourc cachedresourc java apach catalina webresourc cach get resourc getresourc cach java apach catalina webresourc standard root standardroot get resourc getresourc standard root standardroot java apach catalina core standard context standardcontext get real path getrealpath standard context standardcontext java apach catalina core applic context applicationcontext get real path getrealpath applic context applicationcontext java apach catalina core applic context facad applicationcontextfacad get real path getrealpath applic context facad applicationcontextfacad java apach axis2 deploy war base axi configur warbasedaxisconfigur init war base axi configur warbasedaxisconfigur java apach axis2 transport http axi servlet axisservlet init config context initconfigcontext axi servlet axisservlet java apach axis2 transport http axi servlet axisservlet init axi servlet axisservlet java apach catalina core standard wrapper standardwrapp init servlet initservlet standard wrapper standardwrapp java apach catalina core standard wrapper standardwrapp load servlet loadservlet standard wrapper standardwrapp java apach catalina core standard wrapper standardwrapp load standard wrapper standardwrapp java apach catalina core standard context standardcontext load on startup loadonstartup standard context standardcontext java apach catalina core standard context standardcontext start intern startintern standard context standardcontext java apach catalina util lifecycl base lifecyclebas start lifecycl base lifecyclebas java apach catalina core contain base containerbas add child intern addchildintern contain base containerbas java apach catalina core contain base containerbas add child addchild contain base containerbas java apach catalina core standard host standardhost add child addchild standard host standardhost java apach catalina startup host config hostconfig deploy deploywar host config hostconfig java apach catalina startup host config hostconfig deploy war deploywar run host config hostconfig java java util concurr executor runnabl adapt runnableadapt call executor java java util concurr futur task futuretask sync inner run innerrun futur task futuretask java java util concurr futur task futuretask run futur task futuretask java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java","""java/org/apache/catalina/core/StandardContext.java""","2","2","2","1","14","1","8","3","3","0","2","365","365","365","130","365","0","13","9","343","6903","1367","3721","1193","2169","1820","1608","2485","949","1536","52","52","63","9","6","0","775","775","843","453","regression"
"55354","10","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55354 Restore the context environment parameters after associating the Principle with the given user. Based on patch provided by Richard Begg.","Bug 55354  JNDIRealm.getPrincipal(context,username,gssCredential) corrupts realm context","realm jndirealm get princip getprincip context usernam credenti gsscredenti corrupt realm context","The getPrincipal(context,username,gssCredential) method in JNDIRealm is designed to allow delegated credentials to be applied to the directory server connection as part of SPNEGO authentication.

This is done by manipulation of a number of the directory context's environment parameters.

However, as currently implemented, these environment parameters are forcibly cleared after the getUser() call regardless of whether the values were even changed (i.e. if isUseDelegatedCredential() returned false).

If the container realm is defined to use GSSAPI authentication, only the first SPNEGO authentication request will succeed.  All subsequent requests will fail with this exception:
javax.naming.NamingException: [LDAP: error code 1 - 000004DC: LdapErr: DSID-0C0906DC, comment: In order to perform this operation a successful bind must be completed on the connection., data 0, v1db0 

The exception is due to the Context.SECURITY_AUTHENTICATION being cleared by getPrincipal() - resulting in a attempted ""simple"" bind with no username/password (i.e. anonymous).

A workaround is to ensure that the connectionName and connectionPassword parameters are specified in the realm definition - however, if one is using GSSAPI - this shouldn't be necessary and certainly defeats the purpose of using GSSAPI in the first place.

The code should preserve pre-existing environment parameters in the context before changing them, then restore those values afterwards - rather than just clearing the settings completely.","get princip getprincip context usernam credenti gsscredenti method realm jndirealm design allow deleg credenti appli directori server connect part spnego authent done manipul number directori context environ paramet howev current implement environ paramet forcibl clear get user getus call regardless whether valu even chang is use deleg credenti isusedelegatedcredenti return fals contain realm defin use gssapi authent first spnego authent request succeed subsequ request fail except javax name name except namingexcept ldap error code 000004 000004dc ldap err ldaperr dsid c0906 0c0906dc comment order perform oper success bind must complet connect data v1db0 except due context secur authent clear get princip getprincip result attempt simpl bind usernam password anonym workaround ensur connect name connectionnam connect password connectionpassword paramet specifi realm definit howev one use gssapi shouldn necessari certainli defeat purpos use gssapi first place code preserv pre exist preexist environ paramet context chang restor valu afterward rather clear set complet","""java/org/apache/catalina/realm/JNDIRealm.java""","2","2","3","1","19","2","10","6","2","0","2","92","92","92","40","92","0","4","24","64","2427","509","1051","314","682","870","500","754","270","484","32","32","37","14","7","1","253","249","278","139","normal"
"55357","9","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55357 Set the web app classloader as a context classloader before reading the object data.","Bug 55357  Cannot deserialize session when it contains Externalizable objects (using PersistentManager)","cannot deseri session contain externaliz object use persist manag persistentmanag","I'm using PersistentManager with JDBCStore to store sessions in my database. But in my webapplication, there is an object in my session which is an instance of org.apache.el.MethodExpressionImpl. This class implements the Externalizable interface but in this readExternal method it uses org.apache.el.util.ReflectionUtil.forName(String) which use Thread.currentThread().getContextClassLoader() as its ClassLoader.

It seems to be incorrect because this method return a StandardClassLoader which cannot find my classes in WEB-INF/lib directory of my webapp.

Is it the problem of the MethodExpressionImpl class which use this method or the JDBCStore which does not set the thread contextClassLoader as the WebappClassLoader ?

Here is the stacktrace :

SEVERE: Error processing request
java.lang.IllegalStateException: Erreur lors de la deserialisation de la session 1634C328D27A31CB9FC4D52392FDB05F: {1}
	at org.apache.catalina.session.PersistentManagerBase.swapIn(PersistentManagerBase.java:713)
	at org.apache.catalina.session.PersistentManagerBase.findSession(PersistentManagerBase.java:503)
	at org.apache.catalina.connector.Request.isRequestedSessionIdValid(Request.java:2391)
	at org.apache.catalina.connector.CoyoteAdapter.parseSessionCookiesId(CoyoteAdapter.java:954)
	at org.apache.catalina.connector.CoyoteAdapter.postParseRequest(CoyoteAdapter.java:688)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:402)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: javax.faces.event.ActionEvent
	at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Class.java:266)
	at org.apache.el.util.ReflectionUtil.forName(ReflectionUtil.java:62)
	at org.apache.el.util.ReflectionUtil.toTypeArray(ReflectionUtil.java:88)
	at org.apache.el.MethodExpressionImpl.readExternal(MethodExpressionImpl.java:290)
	at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1835)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1794)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:370)
	at com.sun.facelets.el.TagMethodExpression.readExternal(TagMethodExpression.java:101)
	at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1835)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1794)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1989)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1913)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1796)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:370)
	at java.util.ArrayList.readObject(ArrayList.java:733)
	at sun.reflect.GeneratedMethodAccessor90.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1891)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1796)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1989)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1913)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1796)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:370)
	at java.util.HashMap.readObject(HashMap.java:1155)
	at sun.reflect.GeneratedMethodAccessor89.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1891)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1796)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:370)
	at java.util.HashMap.readObject(HashMap.java:1155)
	at sun.reflect.GeneratedMethodAccessor89.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1891)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1796)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1989)
	at java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:499)
	at org.ajax4jsf.application.AjaxStateHolder.readObject(AjaxStateHolder.java:204)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1891)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1796)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:370)
	at org.apache.catalina.session.StandardSession.readObject(StandardSession.java:1595)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:1060)
	at org.apache.catalina.session.JDBCStore.load(JDBCStore.java:657)
	at org.apache.catalina.session.PersistentManagerBase.swapIn(PersistentManagerBase.java:707)
	... 11 more","use persist manag persistentmanag store jdbcstore store session databas webappl object session instanc apach method express impl methodexpressionimpl class implement externaliz interfac read extern readextern method us apach util reflect util reflectionutil for name fornam string use thread current thread currentthread get context class loader getcontextclassload class loader classload seem incorrect method return standard class loader standardclassload cannot find class web inf lib directori webapp problem method express impl methodexpressionimpl class use method store jdbcstore set thread context class loader contextclassload webapp class loader webappclassload stacktrac sever error process request java lang illeg state except illegalstateexcept erreur lor deserialis session 1634 c328 d27 a31 b9 c4 d52392 b05 1634c328d27a31cb9fc4d52392fdb05f apach catalina session persist manag base persistentmanagerbas swap in swapin persist manag base persistentmanagerbas java apach catalina session persist manag base persistentmanagerbas find session findsess persist manag base persistentmanagerbas java apach catalina connector request is request session id valid isrequestedsessionidvalid request java apach catalina connector coyot adapt coyoteadapt pars session cooki id parsesessioncookiesid coyot adapt coyoteadapt java apach catalina connector coyot adapt coyoteadapt post pars request postparserequest coyot adapt coyoteadapt java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java caus java lang class not found except classnotfoundexcept javax face event action event actionev java net class loader urlclassload run class loader urlclassload java java net class loader urlclassload run class loader urlclassload java java secur access control accesscontrol do privileg doprivileg nativ method java net class loader urlclassload find class findclass class loader urlclassload java java lang class loader classload load class loadclass class loader classload java java lang class loader classload load class loadclass class loader classload java java lang class for name0 forname0 nativ method java lang class for name fornam class java apach util reflect util reflectionutil for name fornam reflect util reflectionutil java apach util reflect util reflectionutil to type array totypearray reflect util reflectionutil java apach method express impl methodexpressionimpl read extern readextern method express impl methodexpressionimpl java java object input stream objectinputstream read extern data readexternaldata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read object readobject object input stream objectinputstream java sun facelet tag method express tagmethodexpress read extern readextern tag method express tagmethodexpress java java object input stream objectinputstream read extern data readexternaldata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream default read field defaultreadfield object input stream objectinputstream java java object input stream objectinputstream read serial data readserialdata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read object readobject object input stream objectinputstream java java util array list arraylist read object readobject array list arraylist java sun reflect gener method accessor90 generatedmethodaccessor90 invok unknown sourc sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java java object stream class objectstreamclass invok read object invokereadobject object stream class objectstreamclass java java object input stream objectinputstream read serial data readserialdata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream default read field defaultreadfield object input stream objectinputstream java java object input stream objectinputstream read serial data readserialdata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read object readobject object input stream objectinputstream java java util hash map hashmap read object readobject hash map hashmap java sun reflect gener method accessor89 generatedmethodaccessor89 invok unknown sourc sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java java object stream class objectstreamclass invok read object invokereadobject object stream class objectstreamclass java java object input stream objectinputstream read serial data readserialdata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read object readobject object input stream objectinputstream java java util hash map hashmap read object readobject hash map hashmap java sun reflect gener method accessor89 generatedmethodaccessor89 invok unknown sourc sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java java object stream class objectstreamclass invok read object invokereadobject object stream class objectstreamclass java java object input stream objectinputstream read serial data readserialdata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream default read field defaultreadfield object input stream objectinputstream java java object input stream objectinputstream default read object defaultreadobject object input stream objectinputstream java ajax4jsf applic ajax state holder ajaxstatehold read object readobject ajax state holder ajaxstatehold java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java java object stream class objectstreamclass invok read object invokereadobject object stream class objectstreamclass java java object input stream objectinputstream read serial data readserialdata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read object readobject object input stream objectinputstream java apach catalina session standard session standardsess read object readobject standard session standardsess java apach catalina session standard session standardsess read object data readobjectdata standard session standardsess java apach catalina session store jdbcstore load store jdbcstore java apach catalina session persist manag base persistentmanagerbas swap in swapin persist manag base persistentmanagerbas java","""java/org/apache/catalina/session/FileStore.java""","4","4","4","1","25","2","16","6","1","0","3","12","12","12","2","12","0","2","0","10","439","82","228","72","142","129","107","158","64","94","15","15","15","5","3","1","49","49","53","20","major"
"55357","9","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55357 Set the web app classloader as a context classloader before reading the object data.","Bug 55357  Cannot deserialize session when it contains Externalizable objects (using PersistentManager)","cannot deseri session contain externaliz object use persist manag persistentmanag","I'm using PersistentManager with JDBCStore to store sessions in my database. But in my webapplication, there is an object in my session which is an instance of org.apache.el.MethodExpressionImpl. This class implements the Externalizable interface but in this readExternal method it uses org.apache.el.util.ReflectionUtil.forName(String) which use Thread.currentThread().getContextClassLoader() as its ClassLoader.

It seems to be incorrect because this method return a StandardClassLoader which cannot find my classes in WEB-INF/lib directory of my webapp.

Is it the problem of the MethodExpressionImpl class which use this method or the JDBCStore which does not set the thread contextClassLoader as the WebappClassLoader ?

Here is the stacktrace :

SEVERE: Error processing request
java.lang.IllegalStateException: Erreur lors de la deserialisation de la session 1634C328D27A31CB9FC4D52392FDB05F: {1}
	at org.apache.catalina.session.PersistentManagerBase.swapIn(PersistentManagerBase.java:713)
	at org.apache.catalina.session.PersistentManagerBase.findSession(PersistentManagerBase.java:503)
	at org.apache.catalina.connector.Request.isRequestedSessionIdValid(Request.java:2391)
	at org.apache.catalina.connector.CoyoteAdapter.parseSessionCookiesId(CoyoteAdapter.java:954)
	at org.apache.catalina.connector.CoyoteAdapter.postParseRequest(CoyoteAdapter.java:688)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:402)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: javax.faces.event.ActionEvent
	at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Class.java:266)
	at org.apache.el.util.ReflectionUtil.forName(ReflectionUtil.java:62)
	at org.apache.el.util.ReflectionUtil.toTypeArray(ReflectionUtil.java:88)
	at org.apache.el.MethodExpressionImpl.readExternal(MethodExpressionImpl.java:290)
	at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1835)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1794)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:370)
	at com.sun.facelets.el.TagMethodExpression.readExternal(TagMethodExpression.java:101)
	at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1835)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1794)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1989)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1913)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1796)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:370)
	at java.util.ArrayList.readObject(ArrayList.java:733)
	at sun.reflect.GeneratedMethodAccessor90.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1891)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1796)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1704)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1342)
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1989)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1913)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1796)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:370)
	at java.util.HashMap.readObject(HashMap.java:1155)
	at sun.reflect.GeneratedMethodAccessor89.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1891)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1796)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:370)
	at java.util.HashMap.readObject(HashMap.java:1155)
	at sun.reflect.GeneratedMethodAccessor89.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1891)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1796)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1989)
	at java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:499)
	at org.ajax4jsf.application.AjaxStateHolder.readObject(AjaxStateHolder.java:204)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1891)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1796)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:370)
	at org.apache.catalina.session.StandardSession.readObject(StandardSession.java:1595)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:1060)
	at org.apache.catalina.session.JDBCStore.load(JDBCStore.java:657)
	at org.apache.catalina.session.PersistentManagerBase.swapIn(PersistentManagerBase.java:707)
	... 11 more","use persist manag persistentmanag store jdbcstore store session databas webappl object session instanc apach method express impl methodexpressionimpl class implement externaliz interfac read extern readextern method us apach util reflect util reflectionutil for name fornam string use thread current thread currentthread get context class loader getcontextclassload class loader classload seem incorrect method return standard class loader standardclassload cannot find class web inf lib directori webapp problem method express impl methodexpressionimpl class use method store jdbcstore set thread context class loader contextclassload webapp class loader webappclassload stacktrac sever error process request java lang illeg state except illegalstateexcept erreur lor deserialis session 1634 c328 d27 a31 b9 c4 d52392 b05 1634c328d27a31cb9fc4d52392fdb05f apach catalina session persist manag base persistentmanagerbas swap in swapin persist manag base persistentmanagerbas java apach catalina session persist manag base persistentmanagerbas find session findsess persist manag base persistentmanagerbas java apach catalina connector request is request session id valid isrequestedsessionidvalid request java apach catalina connector coyot adapt coyoteadapt pars session cooki id parsesessioncookiesid coyot adapt coyoteadapt java apach catalina connector coyot adapt coyoteadapt post pars request postparserequest coyot adapt coyoteadapt java apach catalina connector coyot adapt coyoteadapt servic coyot adapt coyoteadapt java apach coyot http11 abstract http11 processor abstracthttp11processor process abstract http11 processor abstracthttp11processor java apach coyot abstract protocol abstractprotocol abstract connect handler abstractconnectionhandl process abstract protocol abstractprotocol java apach tomcat util net io endpoint jioendpoint socket processor socketprocessor run io endpoint jioendpoint java java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java java lang thread run thread java caus java lang class not found except classnotfoundexcept javax face event action event actionev java net class loader urlclassload run class loader urlclassload java java net class loader urlclassload run class loader urlclassload java java secur access control accesscontrol do privileg doprivileg nativ method java net class loader urlclassload find class findclass class loader urlclassload java java lang class loader classload load class loadclass class loader classload java java lang class loader classload load class loadclass class loader classload java java lang class for name0 forname0 nativ method java lang class for name fornam class java apach util reflect util reflectionutil for name fornam reflect util reflectionutil java apach util reflect util reflectionutil to type array totypearray reflect util reflectionutil java apach method express impl methodexpressionimpl read extern readextern method express impl methodexpressionimpl java java object input stream objectinputstream read extern data readexternaldata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read object readobject object input stream objectinputstream java sun facelet tag method express tagmethodexpress read extern readextern tag method express tagmethodexpress java java object input stream objectinputstream read extern data readexternaldata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream default read field defaultreadfield object input stream objectinputstream java java object input stream objectinputstream read serial data readserialdata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read object readobject object input stream objectinputstream java java util array list arraylist read object readobject array list arraylist java sun reflect gener method accessor90 generatedmethodaccessor90 invok unknown sourc sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java java object stream class objectstreamclass invok read object invokereadobject object stream class objectstreamclass java java object input stream objectinputstream read serial data readserialdata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read array readarray object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream default read field defaultreadfield object input stream objectinputstream java java object input stream objectinputstream read serial data readserialdata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read object readobject object input stream objectinputstream java java util hash map hashmap read object readobject hash map hashmap java sun reflect gener method accessor89 generatedmethodaccessor89 invok unknown sourc sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java java object stream class objectstreamclass invok read object invokereadobject object stream class objectstreamclass java java object input stream objectinputstream read serial data readserialdata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read object readobject object input stream objectinputstream java java util hash map hashmap read object readobject hash map hashmap java sun reflect gener method accessor89 generatedmethodaccessor89 invok unknown sourc sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java java object stream class objectstreamclass invok read object invokereadobject object stream class objectstreamclass java java object input stream objectinputstream read serial data readserialdata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream default read field defaultreadfield object input stream objectinputstream java java object input stream objectinputstream default read object defaultreadobject object input stream objectinputstream java ajax4jsf applic ajax state holder ajaxstatehold read object readobject ajax state holder ajaxstatehold java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java java object stream class objectstreamclass invok read object invokereadobject object stream class objectstreamclass java java object input stream objectinputstream read serial data readserialdata object input stream objectinputstream java java object input stream objectinputstream read ordinari object readordinaryobject object input stream objectinputstream java java object input stream objectinputstream read object0 readobject0 object input stream objectinputstream java java object input stream objectinputstream read object readobject object input stream objectinputstream java apach catalina session standard session standardsess read object readobject standard session standardsess java apach catalina session standard session standardsess read object data readobjectdata standard session standardsess java apach catalina session store jdbcstore load store jdbcstore java apach catalina session persist manag base persistentmanagerbas swap in swapin persist manag base persistentmanagerbas java","""java/org/apache/catalina/session/JDBCStore.java""","3","3","3","1","21","1","14","5","1","0","1","40","40","40","23","40","0","1","6","33","1078","130","625","162","430","324","293","422","146","276","16","16","16","3","4","1","126","126","130","54","major"
"55400","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55400 WsFilter needs to be marked as supporting async else it prevents apps from using async requests.","Bug 55400  WsFilter not compatible with async sample applications","filter wsfilter compat async sampl applic","","","""java/org/apache/tomcat/websocket/server/WsServerContainer.java""","2","2","2","1","15","1","11","2","3","2","3","19","19","17","9","19","1","4","3","11","431","70","280","113","151","82","116","169","88","81","9","9","9","7","3","0","47","47","51","25","normal"
"55404","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55404 Log warnings as warnings","Bug 55404  ContextConfig#validateSecurityRoles emits three info log messages which contain a warning","context config contextconfig valid secur role validatesecurityrol emit three info log messag contain warn","","","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","8","1","39","3","29","6","3","1","6","58","58","57","20","58","0","11","34","13","2613","322","1862","422","1265","430","829","1311","443","868","45","45","48","13","7","0","420","420","464","108","normal"
"55434","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55434 Ensure only duplicate parameters rather than duplicate segements trigger an error.","Bug 55434  The path /foo/a/a/bar causes IllegalArgumentException when WsServerContainer creates UriTemplate","path foo bar caus illeg argument except illegalargumentexcept server contain wsservercontain creat uri templat uritempl","WsFilter calls WsServerContainer.findMapping(""/foo/a/a/bar""), which in turn calls new UriTemplate(path). If the path contains repeated segments, it causes the following code in the UriTemplate constructor to throw an exception:

Segment old =
        this.segments.put(segment, new Segment(index, segment));
if (old != null) {
    throw new IllegalArgumentException(
            sm.getString(""uriTemplate.duplicateName"", segment));
}

This would be valid if the duplicates were URI variable names but not when their plain path segments.","filter wsfilter call server contain wsservercontain find map findmap foo bar turn call new uri templat uritempl path path contain repeat segment caus follow code uri templat uritempl constructor throw except segment old segment put segment new segment index segment old null throw new illeg argument except illegalargumentexcept sm get string getstr uri templat uritempl duplic name duplicatenam segment would valid duplic uri variabl name plain path segment","""test/org/apache/tomcat/websocket/server/TestUriTemplate.java""","1","1","1","1","5","0","5","0","1","0","0","16","16","16","0","16","0","0","0","16","161","43","102","66","45","16","49","66","47","19","1","1","1","1","0","0","16","16","16","16","normal"
"55434","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55434 Ensure only duplicate parameters rather than duplicate segements trigger an error.","Bug 55434  The path /foo/a/a/bar causes IllegalArgumentException when WsServerContainer creates UriTemplate","path foo bar caus illeg argument except illegalargumentexcept server contain wsservercontain creat uri templat uritempl","WsFilter calls WsServerContainer.findMapping(""/foo/a/a/bar""), which in turn calls new UriTemplate(path). If the path contains repeated segments, it causes the following code in the UriTemplate constructor to throw an exception:

Segment old =
        this.segments.put(segment, new Segment(index, segment));
if (old != null) {
    throw new IllegalArgumentException(
            sm.getString(""uriTemplate.duplicateName"", segment));
}

This would be valid if the duplicates were URI variable names but not when their plain path segments.","filter wsfilter call server contain wsservercontain find map findmap foo bar turn call new uri templat uritempl path path contain repeat segment caus follow code uri templat uritempl constructor throw except segment old segment put segment new segment index segment old null throw new illeg argument except illegalargumentexcept sm get string getstr uri templat uritempl duplic name duplicatenam segment would valid duplic uri variabl name plain path segment","""test/org/apache/tomcat/websocket/server/TestUriTemplate.java""","1","1","1","1","5","0","5","0","1","0","0","16","16","16","0","16","0","0","0","16","161","43","102","66","45","16","49","66","47","19","1","1","1","1","0","0","16","16","16","16","normal"
"55434","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55434 Ensure only duplicate parameters rather than duplicate segements trigger an error.","Bug 55434  The path /foo/a/a/bar causes IllegalArgumentException when WsServerContainer creates UriTemplate","path foo bar caus illeg argument except illegalargumentexcept server contain wsservercontain creat uri templat uritempl","WsFilter calls WsServerContainer.findMapping(""/foo/a/a/bar""), which in turn calls new UriTemplate(path). If the path contains repeated segments, it causes the following code in the UriTemplate constructor to throw an exception:

Segment old =
        this.segments.put(segment, new Segment(index, segment));
if (old != null) {
    throw new IllegalArgumentException(
            sm.getString(""uriTemplate.duplicateName"", segment));
}

This would be valid if the duplicates were URI variable names but not when their plain path segments.","filter wsfilter call server contain wsservercontain find map findmap foo bar turn call new uri templat uritempl path path contain repeat segment caus follow code uri templat uritempl constructor throw except segment old segment put segment new segment index segment old null throw new illeg argument except illegalargumentexcept sm get string getstr uri templat uritempl duplic name duplicatenam segment would valid duplic uri variabl name plain path segment","""java/org/apache/tomcat/websocket/server/UriTemplate.java""","2","2","2","1","11","1","9","0","2","0","1","9","9","9","5","9","0","1","0","8","163","36","103","39","57","24","53","74","37","37","7","7","11","5","3","0","19","19","23","15","normal"
"55438","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55438 Don't call onAllDataRead() twice for an empty request body. Make the non-blocking test more robust as on client disconnect the error may occur in the read or the write listener. Unit test provided by Daniel Mikusa.","Bug 55438  Non Blocking API's onAllDataRead being called twice","block api on all data read onalldataread call twice","","","""java/org/apache/catalina/connector/InputBuffer.java""","2","2","2","1","14","1","10","1","2","0","3","27","27","27","14","27","0","0","1","26","596","142","335","100","185","119","147","218","70","148","7","7","8","4","3","0","71","71","74","32","minor"
"55438","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55438 Don't call onAllDataRead() twice for an empty request body. Make the non-blocking test more robust as on client disconnect the error may occur in the read or the write listener. Unit test provided by Daniel Mikusa.","Bug 55438  Non Blocking API's onAllDataRead being called twice","block api on all data read onalldataread call twice","","","""java/org/apache/catalina/connector/Request.java""","1","1","1","1","5","0","4","0","1","1","1","60","60","59","35","60","0","1","0","59","593","143","324","119","166","126","162","239","116","123","5","5","7","3","2","0","77","77","82","62","minor"
"55438","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55438 Don't call onAllDataRead() twice for an empty request body. Make the non-blocking test more robust as on client disconnect the error may occur in the read or the write listener. Unit test provided by Daniel Mikusa.","Bug 55438  Non Blocking API's onAllDataRead being called twice","block api on all data read onalldataread call twice","","","""java/org/apache/catalina/connector/Request.java""","1","1","1","1","5","0","4","0","1","1","1","60","60","59","35","60","0","1","0","59","593","143","324","119","166","126","162","239","116","123","5","5","7","3","2","0","77","77","82","62","minor"
"55438","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55438 Don't call onAllDataRead() twice for an empty request body. Make the non-blocking test more robust as on client disconnect the error may occur in the read or the write listener. Unit test provided by Daniel Mikusa.","Bug 55438  Non Blocking API's onAllDataRead being called twice","block api on all data read onalldataread call twice","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","15","1","9","4","10","2","6","163","165","163","51","165","3","3","14","145","3333","584","1834","509","1106","924","808","1208","439","769","25","25","28","11","7","1","399","399","445","237","minor"
"55438","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55438 Don't call onAllDataRead() twice for an empty request body. Make the non-blocking test more robust as on client disconnect the error may occur in the read or the write listener. Unit test provided by Daniel Mikusa.","Bug 55438  Non Blocking API's onAllDataRead being called twice","block api on all data read onalldataread call twice","","","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","15","1","9","4","10","2","6","163","165","163","51","165","3","3","14","145","3333","584","1834","509","1106","924","808","1208","439","769","25","25","28","11","7","1","399","399","445","237","minor"
"55438","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55438 Don't call onAllDataRead() twice for an empty request body. Make the non-blocking test more robust as on client disconnect the error may occur in the read or the write listener. Unit test provided by Daniel Mikusa.","Bug 55438  Non Blocking API's onAllDataRead being called twice","block api on all data read onalldataread call twice","","","""test/org/apache/catalina/nonblocking/TestNonBlockingAPI.java""","2","2","3","1","20","2","17","1","8","1","7","25","25","24","16","25","0","0","2","23","635","91","499","177","340","46","283","364","166","198","17","17","17","5","5","0","72","72","77","33","minor"
"55442","2","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55442 Handle calls to a constructor of an imported class or to a static method, imported statically. Unit test based on a patch provided by Daniel Mikusa.","Bug 55442  EL Constructor throws exception","constructor throw except","In the EL 3.0 Spec, section 1.22.3 ""Constructor Reference""  states ""A class name reference, followed by arguments in parenthesis, such as ""Boolean(true)"" denotes the invocation of the constructor of the class with the supplied arguments.""

This leads me to believe that the following test should work:

   @Test
   public void testImport03() {
   	ELProcessor processor = new ELProcessor();
       Object result =
               processor.getValue(""Integer('1000')"",
                       Integer.class);
       Assert.assertEquals(Integer.valueOf(1000), result);
   }

Unfortunately, this fails with the following error.

javax.el.ELException: Function ':Integer' not found
	at org.apache.el.parser.AstFunction.getValue(AstFunction.java:136)
	at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:188)
	at javax.el.ELProcessor.getValue(ELProcessor.java:45)
	at org.apache.el.parser.TestAstIdentifier.testImport03(TestAstIdentifier.java:53)
...

Thanks","spec section constructor refer state class name refer follow argument parenthesi boolean true denot invoc constructor class suppli argument lead believ follow work public void test import03 testimport03 processor elprocessor processor new processor elprocessor object result processor get valu getvalu integ integ class assert assert equal assertequ integ valu of valueof result unfortun fail follow error javax except elexcept function integ found apach parser ast function astfunct get valu getvalu ast function astfunct java apach valu express impl valueexpressionimpl get valu getvalu valu express impl valueexpressionimpl java javax processor elprocessor get valu getvalu processor elprocessor java apach parser test ast identifi testastidentifi test import03 testimport03 test ast identifi testastidentifi java thank","""java/org/apache/el/parser/AstFunction.java""","3","3","3","1","15","0","13","1","1","0","0","9","9","9","2","9","0","0","0","9","198","26","140","41","83","32","60","91","37","54","20","20","22","3","4","0","31","31","33","11","normal"
"55453","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55453 Do not return a response body for those status codes and request methods that do not permit one.","Bug 55453  AJP send Body with Status 304","ajp send bodi statu","","","""java/org/apache/coyote/ajp/AbstractAjpProcessor.java""","5","4","5","2","30","3","21","5","3","0","5","26","30","30","24","30","0","0","10","20","1135","200","683","170","499","255","383","506","155","351","35","35","37","12","5","0","134","122","145","53","normal"
"55453","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55453 Do not return a response body for those status codes and request methods that do not permit one.","Bug 55453  AJP send Body with Status 304","ajp send bodi statu","","","""test/org/apache/coyote/ajp/TestAbstractAjpProcessor.java""","1","1","1","1","26","5","15","5","1","0","0","7","7","7","0","7","0","4","1","2","230","54","119","42","83","57","87","101","35","66","4","4","4","1","1","0","13","13","13","7","normal"
"55453","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55453 Do not return a response body for those status codes and request methods that do not permit one.","Bug 55453  AJP send Body with Status 304","ajp send bodi statu","","","""test/org/apache/coyote/ajp/TestAbstractAjpProcessor.java""","1","1","1","1","26","5","15","5","1","0","0","7","7","7","0","7","0","4","1","2","230","54","119","42","83","57","87","101","35","66","4","4","4","1","1","0","13","13","13","7","normal"
"55454","0","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55454 Fixed NPE thrown when parsing an invalid content type.","Bug 55454  NullPointerException caused by invalid contentType, e.g. trailing semicolon","null pointer except nullpointerexcept caus invalid content type contenttyp trail semicolon","possible related to 53353

When having an invalid contenttype like:
<jsp:directive.page language=""java"" contentType=""text/html;""/>
(note the trailing "";"") Tomcat throws a NullPointerException like this:

java.lang.NullPointerException
	org.apache.tomcat.util.http.parser.HttpParser.parseMediaType(HttpParser.java:217)
	org.apache.tomcat.util.http.parser.MediaTypeCache.parse(MediaTypeCache.java:54)
	org.apache.catalina.connector.Response.setContentType(Response.java:805)
	org.apache.catalina.connector.ResponseFacade.setContentType(ResponseFacade.java:245)
	javax.servlet.ServletResponseWrapper.setContentType(ServletResponseWrapper.java:123)

After removing the extra "";"" or entering a charset like this:
<jsp:directive.page language=""java"" contentType=""text/html; charset=UTF-8""/>
it works as expected.

My desired behaviour would be:
Don't crash with a NPE.
Other Tomcat versions seem to handly this different.","possibl relat invalid contenttyp like jsp direct page languag java content type contenttyp text html note trail tomcat throw null pointer except nullpointerexcept like java lang null pointer except nullpointerexcept apach tomcat util http parser http parser httpparser pars medium type parsemediatyp http parser httpparser java apach tomcat util http parser medium type cach mediatypecach pars medium type cach mediatypecach java apach catalina connector respons set content type setcontenttyp respons java apach catalina connector respons facad responsefacad set content type setcontenttyp respons facad responsefacad java javax servlet servlet respons wrapper servletresponsewrapp set content type setcontenttyp servlet respons wrapper servletresponsewrapp java remov extra enter charset like jsp direct page languag java content type contenttyp text html charset utf work expect desir behaviour would crash npe tomcat version seem handli differ","""java/org/apache/tomcat/util/http/parser/HttpParser.java""","5","4","6","3","27","2","19","4","2","12","8","14","12","2","3","14","0","9","0","5","497","62","323","68","221","113","151","222","58","164","14","10","14","8","3","0","71","67","89","43","normal"
"55454","0","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55454 Fixed NPE thrown when parsing an invalid content type.","Bug 55454  NullPointerException caused by invalid contentType, e.g. trailing semicolon","null pointer except nullpointerexcept caus invalid content type contenttyp trail semicolon","possible related to 53353

When having an invalid contenttype like:
<jsp:directive.page language=""java"" contentType=""text/html;""/>
(note the trailing "";"") Tomcat throws a NullPointerException like this:

java.lang.NullPointerException
	org.apache.tomcat.util.http.parser.HttpParser.parseMediaType(HttpParser.java:217)
	org.apache.tomcat.util.http.parser.MediaTypeCache.parse(MediaTypeCache.java:54)
	org.apache.catalina.connector.Response.setContentType(Response.java:805)
	org.apache.catalina.connector.ResponseFacade.setContentType(ResponseFacade.java:245)
	javax.servlet.ServletResponseWrapper.setContentType(ServletResponseWrapper.java:123)

After removing the extra "";"" or entering a charset like this:
<jsp:directive.page language=""java"" contentType=""text/html; charset=UTF-8""/>
it works as expected.

My desired behaviour would be:
Don't crash with a NPE.
Other Tomcat versions seem to handly this different.","possibl relat invalid contenttyp like jsp direct page languag java content type contenttyp text html note trail tomcat throw null pointer except nullpointerexcept like java lang null pointer except nullpointerexcept apach tomcat util http parser http parser httpparser pars medium type parsemediatyp http parser httpparser java apach tomcat util http parser medium type cach mediatypecach pars medium type cach mediatypecach java apach catalina connector respons set content type setcontenttyp respons java apach catalina connector respons facad responsefacad set content type setcontenttyp respons facad responsefacad java javax servlet servlet respons wrapper servletresponsewrapp set content type setcontenttyp servlet respons wrapper servletresponsewrapp java remov extra enter charset like jsp direct page languag java content type contenttyp text html charset utf work expect desir behaviour would crash npe tomcat version seem handli differ","""test/org/apache/tomcat/util/http/parser/TestMediaType.java""","1","1","1","1","7","0","6","0","2","0","16","22","22","22","2","22","0","2","0","20","294","67","196","97","110","31","109","138","72","66","3","3","3","1","1","0","25","25","25","22","normal"
"55469","0","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55469 tr and td tags for UPLOAD_SECTION where not properly closed","Bug 55469  Missing HTML closing tags in Manager application","miss html close tag manag applic","","","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","30","2","22","6","11","0","17","33","33","33","1","33","0","0","19","14","1359","127","990","213","787","249","421","551","181","370","20","20","25","10","4","0","125","125","145","61","trivial"
"55494","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55494 Reduce log level of exception messages that are logged for re-tries. Make clear in the message that a retry is taking place.","Bug 55494  JNDIRealm throws exception after timeout / Connection reset","realm jndirealm throw except timeout connect reset","","","""java/org/apache/catalina/realm/JNDIRealm.java""","2","2","3","1","19","2","10","6","2","0","2","93","93","93","40","93","0","5","24","64","2431","510","1055","317","684","869","504","758","272","486","32","32","37","14","7","1","253","249","279","140","normal"
"55500","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55500 Ensure async timeout is applied when using Servlet 3.0 async with the AJP NIO connector.","Bug 55500  AsyncListener.onTimeout is not called via AJP AjpNioProtocol connector","async listen asynclisten on timeout ontimeout call via ajp ajp nio protocol ajpnioprotocol connector","The AsyncListener.onTimeout is not called, when timeout occurs, when traffic routed via AJP connector configured with AjpNioProtocol protocol.","async listen asynclisten on timeout ontimeout call timeout occur traffic rout via ajp connector configur ajp nio protocol ajpnioprotocol protocol","""java/org/apache/coyote/ajp/AbstractAjpProcessor.java""","6","6","7","2","37","4","26","6","3","0","5","29","35","35","25","35","0","0","14","21","1485","251","890","196","661","347","483","656","176","480","53","53","53","14","5","0","186","174","205","73","critical"
"55500","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55500 Ensure async timeout is applied when using Servlet 3.0 async with the AJP NIO connector.","Bug 55500  AsyncListener.onTimeout is not called via AJP AjpNioProtocol connector","async listen asynclisten on timeout ontimeout call via ajp ajp nio protocol ajpnioprotocol connector","The AsyncListener.onTimeout is not called, when timeout occurs, when traffic routed via AJP connector configured with AjpNioProtocol protocol.","async listen asynclisten on timeout ontimeout call timeout occur traffic rout via ajp connector configur ajp nio protocol ajpnioprotocol protocol","""java/org/apache/coyote/ajp/AbstractAjpProcessor.java""","6","6","7","2","37","4","26","6","3","0","5","29","35","35","25","35","0","0","14","21","1485","251","890","196","661","347","483","656","176","480","53","53","53","14","5","0","186","174","205","73","critical"
"55500","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55500 Ensure async timeout is applied when using Servlet 3.0 async with the AJP NIO connector.","Bug 55500  AsyncListener.onTimeout is not called via AJP AjpNioProtocol connector","async listen asynclisten on timeout ontimeout call via ajp ajp nio protocol ajpnioprotocol connector","The AsyncListener.onTimeout is not called, when timeout occurs, when traffic routed via AJP connector configured with AjpNioProtocol protocol.","async listen asynclisten on timeout ontimeout call timeout occur traffic rout via ajp connector configur ajp nio protocol ajpnioprotocol protocol","""java/org/apache/coyote/ajp/AjpAprProcessor.java""","3","3","3","1","19","2","15","2","1","0","1","10","10","10","2","10","0","2","6","2","280","46","180","51","112","54","89","125","41","84","7","7","7","4","3","0","31","31","33","15","critical"
"55500","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55500 Ensure async timeout is applied when using Servlet 3.0 async with the AJP NIO connector.","Bug 55500  AsyncListener.onTimeout is not called via AJP AjpNioProtocol connector","async listen asynclisten on timeout ontimeout call via ajp ajp nio protocol ajpnioprotocol connector","The AsyncListener.onTimeout is not called, when timeout occurs, when traffic routed via AJP connector configured with AjpNioProtocol protocol.","async listen asynclisten on timeout ontimeout call timeout occur traffic rout via ajp connector configur ajp nio protocol ajpnioprotocol protocol","""java/org/apache/coyote/ajp/AjpNioProcessor.java""","3","3","3","2","17","1","14","1","1","0","1","8","8","8","1","8","0","1","6","1","205","31","142","54","80","32","66","96","38","58","8","8","8","4","3","0","28","28","29","16","critical"
"55500","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55500 Ensure async timeout is applied when using Servlet 3.0 async with the AJP NIO connector.","Bug 55500  AsyncListener.onTimeout is not called via AJP AjpNioProtocol connector","async listen asynclisten on timeout ontimeout call via ajp ajp nio protocol ajpnioprotocol connector","The AsyncListener.onTimeout is not called, when timeout occurs, when traffic routed via AJP connector configured with AjpNioProtocol protocol.","async listen asynclisten on timeout ontimeout call timeout occur traffic rout via ajp connector configur ajp nio protocol ajpnioprotocol protocol","""java/org/apache/coyote/ajp/AbstractAjpProcessor.java""","2","2","2","1","8","0","7","0","1","0","1","8","8","8","2","8","0","0","6","2","142","26","82","37","34","34","36","54","26","28","7","7","7","4","2","0","17","17","17","11","critical"
"55521","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55521 Ensure that session.expire() doesn't return until the session has been invalidated. Ensure that the return valid of session.isValid() is consistent the current state.","Bug 55521  Race Condition in HttpSession#invalidate() / HttpServletRequest#getSession(boolean)","race condit http session httpsession invalid http servlet request httpservletrequest get session getsess boolean","","","""java/org/apache/catalina/ha/session/DeltaSession.java""","1","1","2","1","12","0","7","4","1","0","2","55","55","55","5","55","0","2","6","47","886","104","503","156","278","281","238","360","121","239","9","9","10","5","3","1","108","108","127","68","normal"
"55521","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55521 Ensure that session.expire() doesn't return until the session has been invalidated. Ensure that the return valid of session.isValid() is consistent the current state.","Bug 55521  Race Condition in HttpSession#invalidate() / HttpServletRequest#getSession(boolean)","race condit http session httpsession invalid http servlet request httpservletrequest get session getsess boolean","","","""java/org/apache/catalina/session/StandardSession.java""","2","2","2","1","20","2","10","7","4","0","10","69","69","69","20","69","1","0","7","61","1908","367","879","279","532","664","391","582","209","373","20","20","26","8","6","1","182","182","200","104","normal"
"55527","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55527","Bug 55527  JSSESocketFactory conditionally converts alias to lower case; condition is unwise","socket factori jssesocketfactori condit convert alia lower case condit unwis","JSSESocketFactory conditionally converts the alias to lower case.

The condition is coded as follows:

private static final String defaultKeystoreType = ""JKS"";
...
if (JSSESocketFactory.defaultKeystoreType.equals(keystoreType)) {
    alias = alias.toLowerCase(Locale.ENGLISH);
}

If the intention is to downcase only JKS store aliases, then the comparison should be made with ""JKS"", not a constant that happens to contain ""JKS"" at present.

Using a specific comparator would both clarify the code and protect against a possible change to the default (albeit very unlikely).","socket factori jssesocketfactori condit convert alia lower case condit code follow privat static final string default keystor type defaultkeystoretyp jk socket factori jssesocketfactori default keystor type defaultkeystoretyp equal keystor type keystoretyp alia alia to lower case tolowercas local english intent downcas jk store alia comparison made jk constant happen contain jk present use specif compar would clarifi code protect possibl chang default albeit unlik","""java/org/apache/tomcat/util/net/jsse/JSSESocketFactory.java""","4","4","4","1","23","2","18","3","1","0","12","25","25","25","14","25","1","3","8","13","800","97","577","212","354","126","286","388","171","217","14","14","14","4","3","0","101","101","110","28","minor"
"55552","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55552 Separate the return type (which must be an object) from the expected type which may be a primitive. This is necessary for EL 3.0 onwards as the default handling of nulls is now different for primitives and objects. The expression engine needs to know what the true expected type is in order to correctly coerce the result to the right type.","Bug 55552  Potential NullPointerException in compiled JSPs if expected EL result is of primitive type","potenti null pointer except nullpointerexcept compil jsp expect result primit type","","","""java/org/apache/jasper/compiler/JspUtil.java""","4","3","4","2","21","0","16","4","2","37","6","39","39","2","2","39","2","3","0","34","967","87","661","145","447","220","299","454","128","326","17","17","18","11","4","0","163","155","189","88","null"
"55570","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55570 Correct log exceptions so they appear in the logs","Bug 55570  SpnegoAuthenticator: Resource file is missing placeholders for exceptions.","spnego authent spnegoauthent resourc file miss placehold except","In java/org/apache/catalina/authenticator/SpnegoAuthenticator.java problems are logged with an exception. The exception does not show up in the logging. The exception only shows up if I hack java/org/apache/catalina/authenticator/LocalStrings.properties in catalina.jar, and add a placeholder.


REPRODUCE:
- Configure SP-NEGO with Kerberos.
- Mess up your principal in com.sun.security.jgss.krb5.accept in jaas.config.
- Try to login. 
- See that you get something like:
FINE [org.apache.catalina.authenticator.SpnegoAuthenticator authenticate] Failed to validate client supplied ticket 

FIX:
In java/org/apache/catalina/authenticator/LocalStrings.properties please add [{0}] to the following lines:
spnegoAuthenticator.ticketValidateFail=Failed to validate client supplied ticket
spnegoAuthenticator.serviceLoginFail=Unable to login as the service principal
In SpnegoAuthenticator.java you can verify that exceptions are indeed passed to the log.

VALIDATE:
- Reproduce again
- See that you now get
Failed to validate client supplied ticket [GSSException: Failure unspecified at GSS-API level (Mechanism level: Invalid argument (400) - Cannot find key of appropriate type to decrypt AP REP - RC4 with HMAC)] 

The exception is not super-helpful, but at least it's something.","java apach catalina authent spnego authent spnegoauthent java problem log except except show log except show hack java apach catalina authent local string localstr properti catalina jar add placehold reproduc configur sp nego kerbero mess princip sun secur jgss krb5 accept jaa config tri login see get someth like fine apach catalina authent spnego authent spnegoauthent authent fail valid client suppli ticket fix java apach catalina authent local string localstr properti pleas add follow line spnego authent spnegoauthent ticket valid fail ticketvalidatefail fail valid client suppli ticket spnego authent spnegoauthent servic login fail serviceloginfail unabl login servic princip spnego authent spnegoauthent java verifi except inde pass log valid reproduc see get fail valid client suppli ticket except gssexcept failur unspecifi g api level mechan level invalid argument cannot find key appropri type decrypt ap rep c4 rc4 hmac except super help superhelp least someth","""java/org/apache/catalina/authenticator/SpnegoAuthenticator.java""","3","3","4","2","23","2","19","2","2","0","1","10","10","10","3","10","0","0","2","8","301","35","223","65","142","43","105","144","55","89","26","26","27","12","3","0","39","39","41","21","normal"
"55576","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55576 Preserve the order that request parameters were presented by the client.","Bug 55576  Order of ServletRequest parameters is not preserved","order servlet request servletrequest paramet preserv","The ServletRequest interface provides two methods to iterate through request parameters:

Enumeration<String> getParameterNames(), and
Map<String, String[]> getParameterMap()

Unfortunately, the underlying implementation in Tomcat is a HashMap, which fails to preserve the order of parameters as they are specified in the request.

An alternate implementation should be used to preserve request order.  LinkedHashMap, for example, is capable of preserving insertion order.

The Servlet Specification (v3.0) speaks only to the relative ordering of query string data and post body data. However, section 17.13.3 of the HTML specification (v4.01) titled ""Processing form data"", clearly states that ""control names/values are listed in the order they appear in the document.""

Therefore, I do not see a valid interpretation of either specification to rationalize Tomcat's implementation. To receive a request with an ordered list of parameters and represent them in an implementation that is guaranteed not to preserve this order is difficult to rationalize.","servlet request servletrequest interfac provid two method iter request paramet enumer string get paramet name getparameternam map string string get paramet map getparametermap unfortun underli implement tomcat hash map hashmap fail preserv order paramet specifi request altern implement use preserv request order link hash map linkedhashmap exampl capabl preserv insert order servlet specif v3 speak rel order queri string data post bodi data howev section html specif v4 titl process form data clearli state control name valu list order appear document therefor see valid interpret either specif ration tomcat implement receiv request order list paramet repres implement guarante preserv order difficult ration","""java/org/apache/catalina/util/ParameterMap.java""","1","1","1","1","12","2","4","6","1","0","2","10","10","10","1","10","0","0","0","10","218","60","56","23","25","102","21","36","18","18","2","2","2","1","1","2","14","14","14","10","major"
"55576","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55576 Preserve the order that request parameters were presented by the client.","Bug 55576  Order of ServletRequest parameters is not preserved","order servlet request servletrequest paramet preserv","The ServletRequest interface provides two methods to iterate through request parameters:

Enumeration<String> getParameterNames(), and
Map<String, String[]> getParameterMap()

Unfortunately, the underlying implementation in Tomcat is a HashMap, which fails to preserve the order of parameters as they are specified in the request.

An alternate implementation should be used to preserve request order.  LinkedHashMap, for example, is capable of preserving insertion order.

The Servlet Specification (v3.0) speaks only to the relative ordering of query string data and post body data. However, section 17.13.3 of the HTML specification (v4.01) titled ""Processing form data"", clearly states that ""control names/values are listed in the order they appear in the document.""

Therefore, I do not see a valid interpretation of either specification to rationalize Tomcat's implementation. To receive a request with an ordered list of parameters and represent them in an implementation that is guaranteed not to preserve this order is difficult to rationalize.","servlet request servletrequest interfac provid two method iter request paramet enumer string get paramet name getparameternam map string string get paramet map getparametermap unfortun underli implement tomcat hash map hashmap fail preserv order paramet specifi request altern implement use preserv request order link hash map linkedhashmap exampl capabl preserv insert order servlet specif v3 speak rel order queri string data post bodi data howev section html specif v4 titl process form data clearli state control name valu list order appear document therefor see valid interpret either specif ration tomcat implement receiv request order list paramet repres implement guarante preserv order difficult ration","""java/org/apache/tomcat/util/http/Parameters.java""","4","3","4","2","19","1","16","1","1","0","6","21","21","21","14","21","0","3","0","18","513","62","390","97","264","61","183","262","88","174","49","38","54","26","6","0","88","77","97","52","major"
"55582","0","Mark Emlyn David Thomas","https://issues.apache.org/bugzilla/show_bug.cgi?id=55582 Correct concurrency issue that can result in two instances of JspServletWrapper being created for one tag. Patch provided by Sheldon Shao.","Bug 55582  Concurrent issue of TagFileProcessor","concurr issu tag file processor tagfileprocessor","","","""java/org/apache/jasper/compiler/TagFileProcessor.java""","3","3","4","1","27","2","20","4","4","1","8","19","19","18","21","19","6","4","0","9","693","98","480","186","338","122","214","292","130","162","18","18","26","4","4","0","74","74","94","22","normal"
"55629","1","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55629 Remove JMX notification listener when destroying servlet o.a.catalina.manager.StatusManagerServlet","Bug 55629  StatusManagerServlet does not remove JMX notification listener","statu manag servlet statusmanagerservlet remov jmx notif listen","StatusManagerServlet.destroy should call mBeanServer.removeNotificationListener because init method call mBeanServer.addNotificationListener.","statu manag servlet statusmanagerservlet destroy call bean server mbeanserv remov notif listen removenotificationlisten init method call bean server mbeanserv add notif listen addnotificationlisten","""java/org/apache/catalina/manager/StatusManagerServlet.java""","7","7","8","1","62","7","45","9","1","0","2","4","4","4","5","4","0","0","0","4","361","62","217","64","155","82","130","162","54","108","15","15","15","1","4","0","31","31","34","4","normal"
"55630","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55630 Provide a way to disable the custom URLStreamHandlerFactory","Bug 55630  clean way to avoid setURLStreamHandlerFactory call","clean way avoid set stream handler factori seturlstreamhandlerfactori call","A current method is to set WebappLoader.first via reflection (because private).

I think the setURLStreamHandlerFactory should be move to Catalina.start ('first' static field can be move in Catalina).
So we could have a static method in Catalina to prevent setURLStreamHandlerFactory call while first starting.","current method set webapp loader webappload first via reflect privat think set stream handler factori seturlstreamhandlerfactori move catalina start first static field move catalina could static method catalina prevent set stream handler factori seturlstreamhandlerfactori call first start","""java/org/apache/catalina/webresources/TomcatURLStreamHandlerFactory.java""","2","2","2","2","11","0","6","4","1","4","2","6","6","2","1","6","0","1","0","5","119","20","52","24","21","47","22","36","21","15","4","4","4","4","3","1","12","12","12","12","normal"
"55642","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55642 Correct logic error in Node.isLiteral() that was returning the inverse of the desired result when the value was an EL expression.","Bug 55642  TagPluginManager isConstantAttribute broken","tag plugin manag tagpluginmanag is constant attribut isconstantattribut broken","Function isConstantAttribute in TagPluginManager seems to be be broken.
For value ""order.status"" it returns false. And for value ""${order.state.name}"" it returns true. According to javadoc it should be exact opposite.

Problem seems to be in Node.isLiteral function. ""el!= null"" should probably be ""el== null"" But this function is being used elsewhere.


/**
* @return true if the attribute is specified and its value is a
*         translation-time constant.
*/
public boolean TagPluginManager.isConstantAttribute(String attribute){
    Node.JspAttribute attr = getNodeAttribute(attribute);
    if (attr == null)
        return false;
    return attr.isLiteral();
}
/**
* @return true if the value is a string literal known at translation
*         time.
*/
public boolean isLiteral() {
    return !expression && (el != null) && !namedAttribute;
}","function is constant attribut isconstantattribut tag plugin manag tagpluginmanag seem broken valu order statu return fals valu order state name return true accord javadoc exact opposit problem seem node is liter isliter function null probabl null function use elsewher return true attribut specifi valu translat time translationtim constant public boolean tag plugin manag tagpluginmanag is constant attribut isconstantattribut string attribut node jsp attribut jspattribut attr get node attribut getnodeattribut attribut attr null return fals return attr is liter isliter return true valu string liter known translat time public boolean is liter isliter return express null name attribut namedattribut","""java/org/apache/jasper/compiler/Node.java""","1","1","1","1","5","0","4","0","40","0","1","298","299","299","92","299","4","2","2","291","2568","462","1570","603","618","541","630","1027","506","521","6","6","6","6","5","0","364","360","375","323","normal"
"55656","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55656 Configure the Digester to use the server class loader when parsing server.xml rather than the class loader that loaded StandardServer. Patch provided by Roberto Benedetti.","Bug 55656  Server ClassLoader not used for Server creation","server class loader classload use server creation","","","""java/org/apache/catalina/startup/Catalina.java""","3","3","3","1","20","2","15","2","3","0","2","33","33","33","8","33","0","1","9","23","888","159","562","120","391","170","260","365","114","251","18","18","20","10","3","0","104","104","109","47","normal"
"55664","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55664 Correctly handle Encoder, Decoder and MessageHandler implementations that use a generic type such as Encoder.Text<List<String>>","Bug 55664  [websocket] NPE in Util$DecoderMatch during application start","websocket npe util decod match decodermatch applic start","","","""test/org/apache/tomcat/websocket/pojo/TestEncodingDecoding.java""","1","1","1","1","7","0","6","0","15","2","6","41","41","39","6","41","0","1","0","40","473","81","364","163","182","30","185","249","134","115","3","3","4","3","2","0","52","52","55","47","normal"
"55664","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55664 Correctly handle Encoder, Decoder and MessageHandler implementations that use a generic type such as Encoder.Text<List<String>>","Bug 55664  [websocket] NPE in Util$DecoderMatch during application start","websocket npe util decod match decodermatch applic start","","","""test/org/apache/tomcat/websocket/TestUtil.java""","1","1","1","1","3","0","2","0","20","1","0","29","30","29","0","30","1","0","0","29","284","80","173","99","25","31","23","72","57","15","1","1","1","1","0","0","29","29","29","29","normal"
"55664","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55664 Correctly handle Encoder, Decoder and MessageHandler implementations that use a generic type such as Encoder.Text<List<String>>","Bug 55664  [websocket] NPE in Util$DecoderMatch during application start","websocket npe util decod match decodermatch applic start","","","""test/org/apache/tomcat/websocket/TestUtil.java""","1","1","1","1","3","0","2","0","20","1","0","29","30","29","0","30","1","0","0","29","284","80","173","99","25","31","23","72","57","15","1","1","1","1","0","0","29","29","29","29","normal"
"55664","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55664 Correctly handle Encoder, Decoder and MessageHandler implementations that use a generic type such as Encoder.Text<List<String>>","Bug 55664  [websocket] NPE in Util$DecoderMatch during application start","websocket npe util decod match decodermatch applic start","","","""java/org/apache/tomcat/websocket/Util.java""","4","3","4","3","19","0","15","2","2","14","2","19","19","5","2","19","6","4","0","9","476","61","339","105","222","76","137","204","85","119","17","11","19","17","4","0","76","62","94","61","normal"
"55681","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55681 Pass the session to the Pojo MessageHandler wrappers so it is passed in to the MessageHandler method calls.","Bug 55681  JSR-356 message handling: NULL pointer being thrown when DecodeException is caught in PojoMessageHandlerWholeBase<T>.onMessage","jsr messag handl null pointer thrown decod except decodeexcept caught pojo messag handler whole base pojomessagehandlerwholebas on messag onmessag","I am testing what happens when Encode/Decode Exceptions occur during JSR-356 communication.  In our case, we do NOT use annotation, but we ""extend Endpoint"" and ""implement Whole<ThingworxMessage>"".  I was forcing a DecodeException to occur - expecting to my onError to be called with the actual DecodeException.  Instead, I got a Null.  

Stepping the following code in Tomcat:

in onMessage, the ((WsSession)session) is NULL.  As a result, the actual DecodeException (cause) is lost.

       // Can this message be decoded?
        Object payload;
        try {
            payload = decode(message);
        } catch (DecodeException de) {
            ((WsSession) session).getLocal().onError(session, de);
            return;
        }


Tracing this further up the stack, I found that Util.getMessageHandlers is initializing it and passing NULL in for the session:

            if (decoderMatch.getTextDecoders().size() > 0) {
                MessageHandlerResult result = new MessageHandlerResult(
                        new PojoMessageHandlerWholeText(listener, m, null,
                                endpointConfig,
                                decoderMatch.getTextDecoders(), new Object[1],
                                0, false, -1, -1),
                        MessageHandlerResultType.TEXT);
                results.add(result);
            }

Please let me know if I can provide any more details.

-bob","test happen encod decod except occur jsr commun case use annot extend endpoint implement whole thingworx messag thingworxmessag forc decod except decodeexcept occur expect on error onerror call actual decod except decodeexcept instead got null step follow code tomcat on messag onmessag session wssession session null result actual decod except decodeexcept caus lost messag decod object payload tri payload decod messag catch decod except decodeexcept session wssession session get local getloc on error onerror session return trace stack found util get messag handler getmessagehandl initi pass null session decod match decodermatch get text decod gettextdecod size messag handler result messagehandlerresult result new messag handler result messagehandlerresult new pojo messag handler whole text pojomessagehandlerwholetext listen null endpoint config endpointconfig decod match decodermatch get text decod gettextdecod new object fals messag handler result type messagehandlerresulttyp text result add result pleas let know provid detail bob","""java/org/apache/tomcat/websocket/Util.java""","3","3","4","2","17","0","14","2","3","14","2","24","24","10","5","24","6","4","0","14","540","73","392","122","253","75","168","247","102","145","17","11","19","17","4","0","87","73","107","70","normal"
"55681","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55681 Pass the session to the Pojo MessageHandler wrappers so it is passed in to the MessageHandler method calls.","Bug 55681  JSR-356 message handling: NULL pointer being thrown when DecodeException is caught in PojoMessageHandlerWholeBase<T>.onMessage","jsr messag handl null pointer thrown decod except decodeexcept caught pojo messag handler whole base pojomessagehandlerwholebas on messag onmessag","I am testing what happens when Encode/Decode Exceptions occur during JSR-356 communication.  In our case, we do NOT use annotation, but we ""extend Endpoint"" and ""implement Whole<ThingworxMessage>"".  I was forcing a DecodeException to occur - expecting to my onError to be called with the actual DecodeException.  Instead, I got a Null.  

Stepping the following code in Tomcat:

in onMessage, the ((WsSession)session) is NULL.  As a result, the actual DecodeException (cause) is lost.

       // Can this message be decoded?
        Object payload;
        try {
            payload = decode(message);
        } catch (DecodeException de) {
            ((WsSession) session).getLocal().onError(session, de);
            return;
        }


Tracing this further up the stack, I found that Util.getMessageHandlers is initializing it and passing NULL in for the session:

            if (decoderMatch.getTextDecoders().size() > 0) {
                MessageHandlerResult result = new MessageHandlerResult(
                        new PojoMessageHandlerWholeText(listener, m, null,
                                endpointConfig,
                                decoderMatch.getTextDecoders(), new Object[1],
                                0, false, -1, -1),
                        MessageHandlerResultType.TEXT);
                results.add(result);
            }

Please let me know if I can provide any more details.

-bob","test happen encod decod except occur jsr commun case use annot extend endpoint implement whole thingworx messag thingworxmessag forc decod except decodeexcept occur expect on error onerror call actual decod except decodeexcept instead got null step follow code tomcat on messag onmessag session wssession session null result actual decod except decodeexcept caus lost messag decod object payload tri payload decod messag catch decod except decodeexcept session wssession session get local getloc on error onerror session return trace stack found util get messag handler getmessagehandl initi pass null session decod match decodermatch get text decod gettextdecod size messag handler result messagehandlerresult result new messag handler result messagehandlerresult new pojo messag handler whole text pojomessagehandlerwholetext listen null endpoint config endpointconfig decod match decodermatch get text decod gettextdecod new object fals messag handler result type messagehandlerresulttyp text result add result pleas let know provid detail bob","""java/org/apache/tomcat/websocket/WsSession.java""","1","1","1","1","9","0","7","1","2","1","4","45","43","44","31","45","0","4","8","33","651","122","452","170","234","77","215","296","126","170","9","8","11","3","3","0","78","76","82","47","normal"
"55684","7","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55684 Log a warning but continue if the memory leak detection code is unable to access all threads.","Bug 55684  WebappClassLoader.getThread want an access to root ThreadGroup","webapp class loader webappclassload get thread getthread access root thread group threadgroup","Tomcat may not have all permissions granted.
The method WebappClassLoader.getThread try to access the root ThreadGroup in order to list all threads.
You should either manage SecurityException or avoid to access the parent ThreadGroup of the thread which start Tomcat.","tomcat may permiss grant method webapp class loader webappclassload get thread getthread tri access root thread group threadgroup order list thread either manag secur except securityexcept avoid access parent thread group threadgroup thread start tomcat","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","5","2","32","3","21","7","4","1","8","85","85","84","34","85","3","13","17","52","3339","501","1976","454","1368","867","903","1371","406","965","46","46","56","27","10","0","461","461","494","222","normal"
"55691","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55691 ArrayELResolver needs to handle the case where the base object is an array of primitives.","Bug 55691  javax.el.ArrayELResolver.setValue not supporting arrays of primitives","javax array resolv arrayelresolv set valu setvalu support array primit","was working in tomcat 6.0.20

ERROR javax.faces.context.ExceptionHandlerWrapper - javax.faces.component.UpdateModelException: java.lang.ClassCastException: Unable to add an object of type [java.lang.Integer] to an array of objects of type [int]
java.lang.ClassCastException: Unable to add an object of type [java.lang.Integer] to an array of objects of type [int]
	at javax.el.ArrayELResolver.setValue(ArrayELResolver.java:94)
	at com.sun.faces.el.DemuxCompositeELResolver._setValue(DemuxCompositeELResolver.java:255)
	at com.sun.faces.el.DemuxCompositeELResolver.setValue(DemuxCompositeELResolver.java:281)
	at org.apache.el.parser.AstValue.setValue(AstValue.java:158)
	at org.apache.el.ValueExpressionImpl.setValue(ValueExpressionImpl.java:249)
	at com.sun.faces.facelets.el.TagValueExpression.setValue(TagValueExpression.java:131)
	at javax.faces.component.UIInput.updateModel(UIInput.java:818)
	at javax.faces.component.UIInput.processUpdates(UIInput.java:735)
	at javax.faces.component.UIData.iterate(UIData.java:2001)
	at javax.faces.component.UIData.processUpdates(UIData.java:1253)
	at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
	at javax.faces.component.UIForm.processUpdates(UIForm.java:281)
	at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
	at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
	at javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:1231)
	at com.sun.faces.lifecycle.UpdateModelValuesPhase.execute(UpdateModelValuesPhase.java:78)
	at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
	at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)","work tomcat error javax face context except handler wrapper exceptionhandlerwrapp javax face compon updat model except updatemodelexcept java lang class cast except classcastexcept unabl add object type java lang integ array object type int java lang class cast except classcastexcept unabl add object type java lang integ array object type int javax array resolv arrayelresolv set valu setvalu array resolv arrayelresolv java sun face demux composit resolv demuxcompositeelresolv set valu setvalu demux composit resolv demuxcompositeelresolv java sun face demux composit resolv demuxcompositeelresolv set valu setvalu demux composit resolv demuxcompositeelresolv java apach parser ast valu astvalu set valu setvalu ast valu astvalu java apach valu express impl valueexpressionimpl set valu setvalu valu express impl valueexpressionimpl java sun face facelet tag valu express tagvalueexpress set valu setvalu tag valu express tagvalueexpress java javax face compon ui input uiinput updat model updatemodel ui input uiinput java javax face compon ui input uiinput process updat processupd ui input uiinput java javax face compon ui data uidata iter ui data uidata java javax face compon ui data uidata process updat processupd ui data uidata java javax face compon ui compon base uicomponentbas process updat processupd ui compon base uicomponentbas java javax face compon ui form uiform process updat processupd ui form uiform java javax face compon ui compon base uicomponentbas process updat processupd ui compon base uicomponentbas java javax face compon ui compon base uicomponentbas process updat processupd ui compon base uicomponentbas java javax face compon ui view root uiviewroot process updat processupd ui view root uiviewroot java sun face lifecycl updat model valu phase updatemodelvaluesphas execut updat model valu phase updatemodelvaluesphas java sun face lifecycl phase do phase dophas phase java sun face lifecycl lifecycl impl lifecycleimpl execut lifecycl impl lifecycleimpl java javax face webapp face servlet facesservlet servic face servlet facesservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java","""java/javax/el/ArrayELResolver.java""","3","3","3","1","11","0","10","0","1","2","0","10","10","8","1","10","0","2","0","8","158","24","116","27","63","18","40","70","20","50","7","7","7","5","2","0","31","31","39","16","normal"
"55691","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55691 ArrayELResolver needs to handle the case where the base object is an array of primitives.","Bug 55691  javax.el.ArrayELResolver.setValue not supporting arrays of primitives","javax array resolv arrayelresolv set valu setvalu support array primit","was working in tomcat 6.0.20

ERROR javax.faces.context.ExceptionHandlerWrapper - javax.faces.component.UpdateModelException: java.lang.ClassCastException: Unable to add an object of type [java.lang.Integer] to an array of objects of type [int]
java.lang.ClassCastException: Unable to add an object of type [java.lang.Integer] to an array of objects of type [int]
	at javax.el.ArrayELResolver.setValue(ArrayELResolver.java:94)
	at com.sun.faces.el.DemuxCompositeELResolver._setValue(DemuxCompositeELResolver.java:255)
	at com.sun.faces.el.DemuxCompositeELResolver.setValue(DemuxCompositeELResolver.java:281)
	at org.apache.el.parser.AstValue.setValue(AstValue.java:158)
	at org.apache.el.ValueExpressionImpl.setValue(ValueExpressionImpl.java:249)
	at com.sun.faces.facelets.el.TagValueExpression.setValue(TagValueExpression.java:131)
	at javax.faces.component.UIInput.updateModel(UIInput.java:818)
	at javax.faces.component.UIInput.processUpdates(UIInput.java:735)
	at javax.faces.component.UIData.iterate(UIData.java:2001)
	at javax.faces.component.UIData.processUpdates(UIData.java:1253)
	at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
	at javax.faces.component.UIForm.processUpdates(UIForm.java:281)
	at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
	at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
	at javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:1231)
	at com.sun.faces.lifecycle.UpdateModelValuesPhase.execute(UpdateModelValuesPhase.java:78)
	at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
	at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)","work tomcat error javax face context except handler wrapper exceptionhandlerwrapp javax face compon updat model except updatemodelexcept java lang class cast except classcastexcept unabl add object type java lang integ array object type int java lang class cast except classcastexcept unabl add object type java lang integ array object type int javax array resolv arrayelresolv set valu setvalu array resolv arrayelresolv java sun face demux composit resolv demuxcompositeelresolv set valu setvalu demux composit resolv demuxcompositeelresolv java sun face demux composit resolv demuxcompositeelresolv set valu setvalu demux composit resolv demuxcompositeelresolv java apach parser ast valu astvalu set valu setvalu ast valu astvalu java apach valu express impl valueexpressionimpl set valu setvalu valu express impl valueexpressionimpl java sun face facelet tag valu express tagvalueexpress set valu setvalu tag valu express tagvalueexpress java javax face compon ui input uiinput updat model updatemodel ui input uiinput java javax face compon ui input uiinput process updat processupd ui input uiinput java javax face compon ui data uidata iter ui data uidata java javax face compon ui data uidata process updat processupd ui data uidata java javax face compon ui compon base uicomponentbas process updat processupd ui compon base uicomponentbas java javax face compon ui form uiform process updat processupd ui form uiform java javax face compon ui compon base uicomponentbas process updat processupd ui compon base uicomponentbas java javax face compon ui compon base uicomponentbas process updat processupd ui compon base uicomponentbas java javax face compon ui view root uiviewroot process updat processupd ui view root uiviewroot java sun face lifecycl updat model valu phase updatemodelvaluesphas execut updat model valu phase updatemodelvaluesphas java sun face lifecycl phase do phase dophas phase java sun face lifecycl lifecycl impl lifecycleimpl execut lifecycl impl lifecycleimpl java javax face webapp face servlet facesservlet servic face servlet facesservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java","""test/javax/el/TestArrayELResolver.java""","1","1","1","1","12","1","7","2","2","0","0","25","23","25","3","25","0","1","0","24","376","65","226","126","143","85","118","145","85","60","5","3","5","1","1","0","29","27","29","25","normal"
"55691","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55691 ArrayELResolver needs to handle the case where the base object is an array of primitives.","Bug 55691  javax.el.ArrayELResolver.setValue not supporting arrays of primitives","javax array resolv arrayelresolv set valu setvalu support array primit","was working in tomcat 6.0.20

ERROR javax.faces.context.ExceptionHandlerWrapper - javax.faces.component.UpdateModelException: java.lang.ClassCastException: Unable to add an object of type [java.lang.Integer] to an array of objects of type [int]
java.lang.ClassCastException: Unable to add an object of type [java.lang.Integer] to an array of objects of type [int]
	at javax.el.ArrayELResolver.setValue(ArrayELResolver.java:94)
	at com.sun.faces.el.DemuxCompositeELResolver._setValue(DemuxCompositeELResolver.java:255)
	at com.sun.faces.el.DemuxCompositeELResolver.setValue(DemuxCompositeELResolver.java:281)
	at org.apache.el.parser.AstValue.setValue(AstValue.java:158)
	at org.apache.el.ValueExpressionImpl.setValue(ValueExpressionImpl.java:249)
	at com.sun.faces.facelets.el.TagValueExpression.setValue(TagValueExpression.java:131)
	at javax.faces.component.UIInput.updateModel(UIInput.java:818)
	at javax.faces.component.UIInput.processUpdates(UIInput.java:735)
	at javax.faces.component.UIData.iterate(UIData.java:2001)
	at javax.faces.component.UIData.processUpdates(UIData.java:1253)
	at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
	at javax.faces.component.UIForm.processUpdates(UIForm.java:281)
	at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
	at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
	at javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:1231)
	at com.sun.faces.lifecycle.UpdateModelValuesPhase.execute(UpdateModelValuesPhase.java:78)
	at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
	at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)","work tomcat error javax face context except handler wrapper exceptionhandlerwrapp javax face compon updat model except updatemodelexcept java lang class cast except classcastexcept unabl add object type java lang integ array object type int java lang class cast except classcastexcept unabl add object type java lang integ array object type int javax array resolv arrayelresolv set valu setvalu array resolv arrayelresolv java sun face demux composit resolv demuxcompositeelresolv set valu setvalu demux composit resolv demuxcompositeelresolv java sun face demux composit resolv demuxcompositeelresolv set valu setvalu demux composit resolv demuxcompositeelresolv java apach parser ast valu astvalu set valu setvalu ast valu astvalu java apach valu express impl valueexpressionimpl set valu setvalu valu express impl valueexpressionimpl java sun face facelet tag valu express tagvalueexpress set valu setvalu tag valu express tagvalueexpress java javax face compon ui input uiinput updat model updatemodel ui input uiinput java javax face compon ui input uiinput process updat processupd ui input uiinput java javax face compon ui data uidata iter ui data uidata java javax face compon ui data uidata process updat processupd ui data uidata java javax face compon ui compon base uicomponentbas process updat processupd ui compon base uicomponentbas java javax face compon ui form uiform process updat processupd ui form uiform java javax face compon ui compon base uicomponentbas process updat processupd ui compon base uicomponentbas java javax face compon ui compon base uicomponentbas process updat processupd ui compon base uicomponentbas java javax face compon ui view root uiviewroot process updat processupd ui view root uiviewroot java sun face lifecycl updat model valu phase updatemodelvaluesphas execut updat model valu phase updatemodelvaluesphas java sun face lifecycl phase do phase dophas phase java sun face lifecycl lifecycl impl lifecycleimpl execut lifecycl impl lifecycleimpl java javax face webapp face servlet facesservlet servic face servlet facesservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java","""test/javax/el/TestArrayELResolver.java""","1","1","1","1","12","1","7","2","2","0","0","25","23","25","3","25","0","1","0","24","376","65","226","126","143","85","118","145","85","60","5","3","5","1","1","0","29","27","29","25","normal"
"55691","5","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55691 ArrayELResolver needs to handle the case where the base object is an array of primitives.","Bug 55691  javax.el.ArrayELResolver.setValue not supporting arrays of primitives","javax array resolv arrayelresolv set valu setvalu support array primit","was working in tomcat 6.0.20

ERROR javax.faces.context.ExceptionHandlerWrapper - javax.faces.component.UpdateModelException: java.lang.ClassCastException: Unable to add an object of type [java.lang.Integer] to an array of objects of type [int]
java.lang.ClassCastException: Unable to add an object of type [java.lang.Integer] to an array of objects of type [int]
	at javax.el.ArrayELResolver.setValue(ArrayELResolver.java:94)
	at com.sun.faces.el.DemuxCompositeELResolver._setValue(DemuxCompositeELResolver.java:255)
	at com.sun.faces.el.DemuxCompositeELResolver.setValue(DemuxCompositeELResolver.java:281)
	at org.apache.el.parser.AstValue.setValue(AstValue.java:158)
	at org.apache.el.ValueExpressionImpl.setValue(ValueExpressionImpl.java:249)
	at com.sun.faces.facelets.el.TagValueExpression.setValue(TagValueExpression.java:131)
	at javax.faces.component.UIInput.updateModel(UIInput.java:818)
	at javax.faces.component.UIInput.processUpdates(UIInput.java:735)
	at javax.faces.component.UIData.iterate(UIData.java:2001)
	at javax.faces.component.UIData.processUpdates(UIData.java:1253)
	at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
	at javax.faces.component.UIForm.processUpdates(UIForm.java:281)
	at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
	at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
	at javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:1231)
	at com.sun.faces.lifecycle.UpdateModelValuesPhase.execute(UpdateModelValuesPhase.java:78)
	at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
	at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)","work tomcat error javax face context except handler wrapper exceptionhandlerwrapp javax face compon updat model except updatemodelexcept java lang class cast except classcastexcept unabl add object type java lang integ array object type int java lang class cast except classcastexcept unabl add object type java lang integ array object type int javax array resolv arrayelresolv set valu setvalu array resolv arrayelresolv java sun face demux composit resolv demuxcompositeelresolv set valu setvalu demux composit resolv demuxcompositeelresolv java sun face demux composit resolv demuxcompositeelresolv set valu setvalu demux composit resolv demuxcompositeelresolv java apach parser ast valu astvalu set valu setvalu ast valu astvalu java apach valu express impl valueexpressionimpl set valu setvalu valu express impl valueexpressionimpl java sun face facelet tag valu express tagvalueexpress set valu setvalu tag valu express tagvalueexpress java javax face compon ui input uiinput updat model updatemodel ui input uiinput java javax face compon ui input uiinput process updat processupd ui input uiinput java javax face compon ui data uidata iter ui data uidata java javax face compon ui data uidata process updat processupd ui data uidata java javax face compon ui compon base uicomponentbas process updat processupd ui compon base uicomponentbas java javax face compon ui form uiform process updat processupd ui form uiform java javax face compon ui compon base uicomponentbas process updat processupd ui compon base uicomponentbas java javax face compon ui compon base uicomponentbas process updat processupd ui compon base uicomponentbas java javax face compon ui view root uiviewroot process updat processupd ui view root uiviewroot java sun face lifecycl updat model valu phase updatemodelvaluesphas execut updat model valu phase updatemodelvaluesphas java sun face lifecycl phase do phase dophas phase java sun face lifecycl lifecycl impl lifecycleimpl execut lifecycl impl lifecycleimpl java javax face webapp face servlet facesservlet servic face servlet facesservlet java apach catalina core applic filter chain applicationfilterchain intern do filter internaldofilt applic filter chain applicationfilterchain java apach catalina core applic filter chain applicationfilterchain do filter dofilt applic filter chain applicationfilterchain java","""java/javax/el/Util.java""","4","4","4","2","17","1","15","1","6","16","2","31","34","18","6","34","8","6","0","20","703","93","521","138","315","89","230","368","134","234","24","24","28","15","7","0","124","124","132","74","normal"
"55702","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55702 Fix loading of TLD when CATALINA_HOME contains spaces","Bug 55702  TLD cannot be loaded if CATALINA_HOME contains spaces","tld cannot load catalina home contain space","A web application containing an own TLD within its WEB-INF directory fails to render a JSP page referencing that TLD if Tomcat it installed into a directory with spaces in the path, such as ""C:\Program Files\..."". 
After moving the entire Tomcat installation directory to a path without spaces (such as ""C:\1\Tomcat8""), the application can render that same JSP page.

Following stacktrace is printed. Note the %20 in the file path

org.apache.jasper.JasperException: /jsp/layouts/standard.jsp (line: 7, column: 69) File ""file:/C:/Program%20Files/Apache/Tomcat-8.0.0-RC5/webapps/mywebapp/WEB-INF/tlds/mywebapp-tags.tld"" not found
	org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42)
	org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:276)
	org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:92)
	org.apache.jasper.compiler.TagLibraryInfoImpl.<init>(TagLibraryInfoImpl.java:166)
	org.apache.jasper.compiler.Parser.parseTaglibDirective(Parser.java:410)
	org.apache.jasper.compiler.Parser.parseDirective(Parser.java:476)
	org.apache.jasper.compiler.Parser.parseElements(Parser.java:1451)
	org.apache.jasper.compiler.Parser.parse(Parser.java:138)
	org.apache.jasper.compiler.ParserController.doParse(ParserController.java:242)
	org.apache.jasper.compiler.ParserController.parse(ParserController.java:102)
	org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:198)
	org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)
	org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
	org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
	org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:606)
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:403)
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:347)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:728)


Java version used: Oracle JDK 7 Update 45 (64 Bit)
Active Tomcat connector: [""http-nio-8080""]","web applic contain tld within web inf directori fail render jsp page referenc tld tomcat instal directori space path program file move entir tomcat instal directori path without space tomcat8 applic render jsp page follow stacktrac print note file path apach jasper jasper except jasperexcept jsp layout standard jsp line column file file program 20 file 20file apach tomcat c5 rc5 webapp mywebapp web inf tld mywebapp tag mywebapptag tld found apach jasper compil default error handler defaulterrorhandl jsp error jsperror default error handler defaulterrorhandl java apach jasper compil error dispatch errordispatch dispatch error dispatch errordispatch java apach jasper compil error dispatch errordispatch jsp error jsperror error dispatch errordispatch java apach jasper compil tag librari info impl taglibraryinfoimpl init tag librari info impl taglibraryinfoimpl java apach jasper compil parser pars taglib direct parsetaglibdirect parser java apach jasper compil parser pars direct parsedirect parser java apach jasper compil parser pars element parseel parser java apach jasper compil parser pars parser java apach jasper compil parser control parsercontrol do pars dopars parser control parsercontrol java apach jasper compil parser control parsercontrol pars parser control parsercontrol java apach jasper compil compil gener java generatejava compil java apach jasper compil compil compil compil java apach jasper compil compil compil compil java apach jasper compil compil compil compil java apach jasper jsp compil context jspcompilationcontext compil jsp compil context jspcompilationcontext java apach jasper servlet jsp servlet wrapper jspservletwrapp servic jsp servlet wrapper jspservletwrapp java apach jasper servlet jsp servlet jspservlet servic jsp file servicejspfil jsp servlet jspservlet java apach jasper servlet jsp servlet jspservlet servic jsp servlet jspservlet java javax servlet http http servlet httpservlet servic http servlet httpservlet java java version use oracl jdk updat bit activ tomcat connector http nio httpnio","""java/org/apache/jasper/compiler/TagLibraryInfoImpl.java""","8","8","10","1","40","3","32","4","1","0","0","16","16","16","6","16","4","7","0","5","765","79","569","165","421","124","274","413","149","264","21","21","33","4","4","0","137","137","170","19","regression"
"55715","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55715 Add a per web application executor to the WebSocket implementation and use it for calling SendHandler.onResult() when there is a chance that the current thread also initiated the write","Bug 55715  RemoteEndpoint.Async#sendText(String, SendHandler) can cause StackOverflowErrors and contradicts Oracle's JavaDoc","remot endpoint remoteendpoint async send text sendtext string send handler sendhandl caus stack overflow error stackoverflowerror contradict oracl java doc javadoc","","","""java/org/apache/tomcat/websocket/server/Constants.java""","1","1","1","1","3","0","2","1","1","0","5","1","1","1","0","1","0","1","0","0","41","6","15","13","5","20","6","8","8","0","1","1","1","1","0","1","1","1","1","1","normal"
"55715","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55715 Add a per web application executor to the WebSocket implementation and use it for calling SendHandler.onResult() when there is a chance that the current thread also initiated the write","Bug 55715  RemoteEndpoint.Async#sendText(String, SendHandler) can cause StackOverflowErrors and contradicts Oracle's JavaDoc","remot endpoint remoteendpoint async send text sendtext string send handler sendhandl caus stack overflow error stackoverflowerror contradict oracl java doc javadoc","","","""java/org/apache/tomcat/websocket/server/WsContextListener.java""","2","2","2","1","7","0","6","1","1","0","0","2","2","2","0","2","0","0","0","2","51","4","21","12","7","26","9","14","10","4","2","2","2","1","1","1","4","4","4","2","normal"
"55715","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55715 Add a per web application executor to the WebSocket implementation and use it for calling SendHandler.onResult() when there is a chance that the current thread also initiated the write","Bug 55715  RemoteEndpoint.Async#sendText(String, SendHandler) can cause StackOverflowErrors and contradicts Oracle's JavaDoc","remot endpoint remoteendpoint async send text sendtext string send handler sendhandl caus stack overflow error stackoverflowerror contradict oracl java doc javadoc","","","""java/org/apache/tomcat/websocket/server/WsHttpUpgradeHandler.java""","1","1","1","1","10","0","9","1","3","0","2","13","13","13","14","13","0","4","0","9","246","43","171","83","80","32","91","114","65","49","5","5","5","1","1","0","21","21","21","13","normal"
"55715","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55715 Add a per web application executor to the WebSocket implementation and use it for calling SendHandler.onResult() when there is a chance that the current thread also initiated the write","Bug 55715  RemoteEndpoint.Async#sendText(String, SendHandler) can cause StackOverflowErrors and contradicts Oracle's JavaDoc","remot endpoint remoteendpoint async send text sendtext string send handler sendhandl caus stack overflow error stackoverflowerror contradict oracl java doc javadoc","","","""java/org/apache/tomcat/websocket/server/WsRemoteEndpointImplServer.java""","2","2","2","1","11","0","10","1","1","0","2","8","8","8","6","8","0","1","5","2","163","25","109","38","56","29","53","77","33","44","9","9","9","6","4","0","22","22","22","13","normal"
"55715","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55715 Add a per web application executor to the WebSocket implementation and use it for calling SendHandler.onResult() when there is a chance that the current thread also initiated the write","Bug 55715  RemoteEndpoint.Async#sendText(String, SendHandler) can cause StackOverflowErrors and contradicts Oracle's JavaDoc","remot endpoint remoteendpoint async send text sendtext string send handler sendhandl caus stack overflow error stackoverflowerror contradict oracl java doc javadoc","","","""java/org/apache/tomcat/websocket/server/WsServerContainer.java""","2","2","2","1","15","1","11","2","3","2","3","20","20","18","9","20","1","4","3","12","444","72","291","120","154","82","121","175","92","83","9","9","9","7","3","0","48","48","53","26","normal"
"55715","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55715 Add a per web application executor to the WebSocket implementation and use it for calling SendHandler.onResult() when there is a chance that the current thread also initiated the write","Bug 55715  RemoteEndpoint.Async#sendText(String, SendHandler) can cause StackOverflowErrors and contradicts Oracle's JavaDoc","remot endpoint remoteendpoint async send text sendtext string send handler sendhandl caus stack overflow error stackoverflowerror contradict oracl java doc javadoc","","","""java/org/apache/tomcat/websocket/server/WsWriteTimeout.java""","2","2","2","1","11","0","8","1","2","0","0","6","6","6","4","6","0","0","0","6","129","20","74","36","35","35","32","49","29","20","4","4","4","4","3","0","15","15","15","11","normal"
"55735","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55735 This fixes a regression caused by the fix to https://issues.apache.org/bugzilla/show_bug.cgi?id=55198 When processing JSP documents, attributes in UninterpretedTag nodes that contain EL should have the the non-EL components XML escaped and the output of the EL components should not be escaped.","Bug 55735  Additional quote entity in html element attribute evaluated in tagx if attribute contains EL expression","addit quot entiti html element attribut evalu tagx attribut contain express","","","""java/org/apache/jasper/runtime/PageContextImpl.java""","2","2","3","1","15","1","12","1","14","2","1","59","59","57","15","59","1","13","1","44","1032","147","776","172","496","112","320","479","138","341","17","17","24","7","6","0","168","156","183","72","normal"
"55735","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55735 This fixes a regression caused by the fix to https://issues.apache.org/bugzilla/show_bug.cgi?id=55198 When processing JSP documents, attributes in UninterpretedTag nodes that contain EL should have the the non-EL components XML escaped and the output of the EL components should not be escaped.","Bug 55735  Additional quote entity in html element attribute evaluated in tagx if attribute contains EL expression","addit quot entiti html element attribut evalu tagx attribut contain express","","","""test/org/apache/jasper/compiler/TestParser.java""","1","1","1","1","18","4","12","2","1","1","0","15","15","14","0","15","0","1","0","14","341","83","219","112","159","53","145","161","81","80","1","1","3","1","0","0","15","15","17","15","normal"
"55735","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55735 This fixes a regression caused by the fix to https://issues.apache.org/bugzilla/show_bug.cgi?id=55198 When processing JSP documents, attributes in UninterpretedTag nodes that contain EL should have the the non-EL components XML escaped and the output of the EL components should not be escaped.","Bug 55735  Additional quote entity in html element attribute evaluated in tagx if attribute contains EL expression","addit quot entiti html element attribut evalu tagx attribut contain express","","","""test/org/apache/jasper/runtime/TesterPageContextImpl.java""","6","6","6","1","21","1","20","0","1","2","1","3","3","1","0","3","0","2","0","1","102","10","73","14","47","21","47","68","23","45","10","10","10","1","2","0","20","20","20","3","normal"
"55735","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55735 This fixes a regression caused by the fix to https://issues.apache.org/bugzilla/show_bug.cgi?id=55198 When processing JSP documents, attributes in UninterpretedTag nodes that contain EL should have the the non-EL components XML escaped and the output of the EL components should not be escaped.","Bug 55735  Additional quote entity in html element attribute evaluated in tagx if attribute contains EL expression","addit quot entiti html element attribut evalu tagx attribut contain express","","","""test/org/apache/jasper/runtime/TesterPageContextImpl.java""","6","6","6","1","21","1","20","0","1","2","1","3","3","1","0","3","0","2","0","1","102","10","73","14","47","21","47","68","23","45","10","10","10","1","2","0","20","20","20","3","normal"
"55735","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55735 This fixes a regression caused by the fix to https://issues.apache.org/bugzilla/show_bug.cgi?id=55198 When processing JSP documents, attributes in UninterpretedTag nodes that contain EL should have the the non-EL components XML escaped and the output of the EL components should not be escaped.","Bug 55735  Additional quote entity in html element attribute evaluated in tagx if attribute contains EL expression","addit quot entiti html element attribut evalu tagx attribut contain express","","","""java/org/apache/jasper/compiler/Validator.java""","4","4","6","1","27","2","22","2","8","3","15","59","59","56","13","59","5","17","0","37","1863","228","1382","407","981","260","551","830","283","547","44","44","60","6","8","0","275","275","381","89","normal"
"55749","4","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55749 Improve error message when SSLEngine is disabled in AprLifecycleListener and SSL is configured for an APR/native connector.","Bug 55749  Disabling SSLEngine in AprLifecycleListener leads to misleading error message at startup when SSL Connector is delcared","disabl engin sslengin apr lifecycl listen aprlifecyclelisten lead mislead error messag startup ssl connector delcar","Put a <Listener className=""org.apache.catalina.core.AprLifecycleListener"" SSLEngine=""off"" /> in you server.xml.

Put the APR connector some weeks later in your server.xml:

<Connector protocol=""org.apache.coyote.http11.Http11AprProtocol""
  port=""@HTTPS_PORT@"" connectionTimeout=""20000"" maxHttpHeaderSize=""24576""
  maxThreads=""250"" URIEncoding=""UTF-8"" bufferSize=""4096""
  scheme=""https"" secure=""true"" SSLEnabled=""true"" SSLProtocol=""TLSv1""	  
  SSLCipherSuite=""HIGH:!ADH"" SSLCertificateFile=""@SSL_CERT_FILE@""
  SSLCertificateKeyFile=""@SSL_CERT_KEY_FILE@"" SSLPassword=""@SSL_PASSWORD@"" />

Start your Tomcat and receive following confusing message:
Nov 06, 2013 1:30:39 PM org.apache.coyote.http11.Http11AprProtocol start
SEVERE: Error starting endpoint
java.lang.Exception: Socket bind failed: [226] Adresse bereits im Zugriff
        at org.apache.tomcat.util.net.AprEndpoint.init(AprEndpoint.java:671)
        at org.apache.tomcat.util.net.AprEndpoint.start(AprEndpoint.java:851)
        at org.apache.coyote.http11.Http11AprProtocol.start(Http11AprProtocol.java:139)
        at org.apache.catalina.connector.Connector.start(Connector.java:1196)
        at org.apache.catalina.core.StandardService.start(StandardService.java:540)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:606)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)

Nov 06, 2013 1:30:39 PM org.apache.catalina.core.StandardService start
SEVERE: Failed to start connector [Connector[HTTP/1.1-8444]]
LifecycleException:  service.getName(): ""Catalina"";  Protocol handler start failed: java.lang.Exception: Socket bind failed: [226] Adresse bereits im Zugriff
        at org.apache.catalina.connector.Connector.start(Connector.java:1203)
        at org.apache.catalina.core.StandardService.start(StandardService.java:540)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:606)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)

This is of course not correct. The port IS availble but the SSL engine has been turned off.

There should be a check at stratup which says that this is an illegal state.","put listen class name classnam apach catalina core apr lifecycl listen aprlifecyclelisten engin sslengin server xml put apr connector week later server xml connector protocol apach coyot http11 http11 apr protocol http11aprprotocol port http port connect timeout connectiontimeout max http header size maxhttpheaders max thread maxthread encod uriencod utf buffer size buffers scheme http secur true enabl sslenabl true protocol sslprotocol sv1 tlsv1 cipher suit sslciphersuit high adh certif file sslcertificatefil ssl cert file certif key file sslcertificatekeyfil ssl cert key file password sslpassword ssl password start tomcat receiv follow confus messag nov pm apach coyot http11 http11 apr protocol http11aprprotocol start sever error start endpoint java lang except socket bind fail adress bereit zugriff apach tomcat util net apr endpoint aprendpoint init apr endpoint aprendpoint java apach tomcat util net apr endpoint aprendpoint start apr endpoint aprendpoint java apach coyot http11 http11 apr protocol http11aprprotocol start http11 apr protocol http11aprprotocol java apach catalina connector connector start connector java apach catalina core standard servic standardservic start standard servic standardservic java apach catalina core standard server standardserv start standard server standardserv java apach catalina startup catalina start catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap start bootstrap java apach catalina startup bootstrap main bootstrap java nov pm apach catalina core standard servic standardservic start sever fail start connector connector http lifecycl except lifecycleexcept servic get name getnam catalina protocol handler start fail java lang except socket bind fail adress bereit zugriff apach catalina connector connector start connector java apach catalina core standard servic standardservic start standard servic standardservic java apach catalina core standard server standardserv start standard server standardserv java apach catalina startup catalina start catalina java sun reflect nativ method accessor impl nativemethodaccessorimpl invoke0 nativ method sun reflect nativ method accessor impl nativemethodaccessorimpl invok nativ method accessor impl nativemethodaccessorimpl java sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java java lang reflect method invok method java apach catalina startup bootstrap start bootstrap java apach catalina startup bootstrap main bootstrap java cours correct port availbl ssl engin turn check stratup say illeg state","""java/org/apache/tomcat/util/net/AprEndpoint.java""","3","3","3","1","17","0","12","3","13","1","1","110","111","110","80","111","0","7","13","91","2492","295","1578","368","1084","621","756","1156","342","814","62","62","84","10","9","0","377","377","434","158","normal"
"55760","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55760 Remove unnecessary setting of property that causes problems whe using SPNEGO with IBM JDKs.","Bug 55760  Tomcat SPNEGO authenticator incompatible with IBM JDK in case of Keytab based initiate and accept authentication","tomcat spnego authent incompat ibm jdk case keytab base initi accept authent","","","""java/org/apache/catalina/authenticator/SpnegoAuthenticator.java""","3","3","4","2","23","2","19","2","2","0","1","10","10","10","3","10","0","0","2","8","300","35","222","65","141","43","105","144","55","89","26","26","27","12","3","0","39","39","41","21","blocker"
"55772","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55772 Ensure that the request and response are recycled after an error during async processing.","Bug 55772  Flushing AsyncContext response writer after ClientAbortException (BrokenPipe) causes request state to leak","flush async context asynccontext respons writer client abort except clientabortexcept broken pipe brokenpip caus request state leak","","","""java/org/apache/coyote/ajp/AbstractAjpProcessor.java""","6","6","7","2","35","4","25","6","3","0","5","36","42","42","30","42","0","7","14","21","1731","295","1051","226","773","389","560","775","207","568","61","61","62","28","5","0","228","216","262","103","critical"
"55772","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55772 Ensure that the request and response are recycled after an error during async processing.","Bug 55772  Flushing AsyncContext response writer after ClientAbortException (BrokenPipe) causes request state to leak","flush async context asynccontext respons writer client abort except clientabortexcept broken pipe brokenpip caus request state leak","","","""java/org/apache/coyote/http11/AbstractHttp11Processor.java""","5","5","6","2","30","2","21","6","1","0","1","44","58","58","28","58","2","6","18","32","1741","261","1044","216","734","447","514","744","205","539","43","41","58","19","5","0","240","236","290","104","critical"
"55772","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55772 Ensure that the request and response are recycled after an error during async processing.","Bug 55772  Flushing AsyncContext response writer after ClientAbortException (BrokenPipe) causes request state to leak","flush async context asynccontext respons writer client abort except clientabortexcept broken pipe brokenpip caus request state leak","","","""java/org/apache/coyote/ActionCode.java""","1","1","1","1","0","0","0","0","1","0","0","2","0","2","40","2","0","0","0","2","233","39","43","42","0","151","1","2","2","0","1","1","1","1","0","4","2","2","2","2","critical"
"55772","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55772 Ensure that the request and response are recycled after an error during async processing.","Bug 55772  Flushing AsyncContext response writer after ClientAbortException (BrokenPipe) causes request state to leak","flush async context asynccontext respons writer client abort except clientabortexcept broken pipe brokenpip caus request state leak","","","""java/org/apache/catalina/connector/CoyoteAdapter.java""","11","11","13","3","75","6","55","13","2","3","8","16","16","13","1","16","0","0","8","8","1373","165","947","191","692","261","475","657","163","494","38","38","40","18","6","0","179","179","216","62","critical"
"55772","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55772 Ensure that the request and response are recycled after an error during async processing.","Bug 55772  Flushing AsyncContext response writer after ClientAbortException (BrokenPipe) causes request state to leak","flush async context asynccontext respons writer client abort except clientabortexcept broken pipe brokenpip caus request state leak","","","""java/org/apache/coyote/spdy/SpdyProcessor.java""","4","4","4","1","21","1","15","4","3","0","1","22","22","22","9","22","1","3","2","16","596","80","392","119","247","125","205","295","102","193","32","32","32","6","4","0","90","90","92","34","critical"
"55772","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55772 Ensure that the request and response are recycled after an error during async processing.","Bug 55772  Flushing AsyncContext response writer after ClientAbortException (BrokenPipe) causes request state to leak","flush async context asynccontext respons writer client abort except clientabortexcept broken pipe brokenpip caus request state leak","","","""test/org/apache/coyote/http11/TestAbstractHttp11Processor.java""","1","1","1","1","17","2","13","1","6","0","3","21","21","21","1","21","0","2","3","16","470","103","328","139","220","42","175","204","100","104","3","3","3","1","1","0","26","26","26","21","critical"
"55772","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55772 Ensure that the request and response are recycled after an error during async processing.","Bug 55772  Flushing AsyncContext response writer after ClientAbortException (BrokenPipe) causes request state to leak","flush async context asynccontext respons writer client abort except clientabortexcept broken pipe brokenpip caus request state leak","","","""test/org/apache/coyote/http11/TestAbstractHttp11Processor.java""","1","1","1","1","17","2","13","1","6","0","3","21","21","21","1","21","0","2","3","16","470","103","328","139","220","42","175","204","100","104","3","3","3","1","1","0","26","26","26","21","critical"
"55776","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55776 Normalize resource requests before processing them.","Bug 55776  if path include relative char, eg: ../, classloader will not find zhe file","path includ rel char classload find zhe file","I use ibatis in my project, config file path include '..', tomcat can not find the file, command line show:
Could not find resource ../ibatis/code/sendType.xml","use ibati project config file path includ tomcat find file command line show could find resourc ibati code send type sendtyp xml","""java/org/apache/catalina/webresources/StandardRoot.java""","2","2","2","1","8","0","7","0","2","0","2","55","55","55","15","55","3","8","8","36","698","114","515","169","263","69","201","343","145","198","10","8","10","6","4","0","120","117","128","62","normal"
"55778","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55778 Make value used for javax.security.sasl.qop with SPNEGO configurable.","Bug 55778  JNDIRealm: Authentication with GSSAPI to LDAP with SSL connection causes an exception","realm jndirealm authent gssapi ldap ssl connect caus except","Whenever i try to authenticate with GSSAPI to a LDAP server with a SSL connection (ldaps), the following exception is thrown:

javax.naming.ServiceUnavailableException: myserver.at:636; socket closed; remaining name 'dc=example,dc=org'
    at com.sun.jndi.ldap.Connection.readReply(Connection.java:452)
    at com.sun.jndi.ldap.LdapClient.getSearchReply(LdapClient.java:631)
    at com.sun.jndi.ldap.LdapClient.search(LdapClient.java:554)
    at com.sun.jndi.ldap.LdapCtx.doSearch(LdapCtx.java:1985)
    at com.sun.jndi.ldap.LdapCtx.searchAux(LdapCtx.java:1847)
    at com.sun.jndi.ldap.LdapCtx.c_search(LdapCtx.java:1772)
    ...

Steps to reproduce:
1. Configure the valve org.apache.catalina.authenticator.SpnegoAuthenticator in the server.xml with storeDelegatedCredential=""true"".
2. Configure the realm org.apache.catalina.realm.JNDIRealm in the server.xml with an SSL connection url (e.g. ldaps://myserver.at:636)
3. Configure an auth-method with SPNEGO, security-constraints and security-roles in the web.xml
4. Add required keystores to the jdk for the ldaps connection.
5. Try to authenticate

I debugged into the JNDIRealm and figured out, that changing line 2082 from ""context.addToEnvironment(""javax.security.sasl.qop"", ""auth-conf"");"" to ""context.addToEnvironment(""javax.security.sasl.qop"", ""auth"");"" would solve the problem. I also tested the fix with a new written JNDIRealm.

But i'm not sure, if this fix causes other security issues.","whenev tri authent gssapi ldap server ssl connect ldap follow except thrown javax name servic unavail except serviceunavailableexcept myserv socket close remain name dc exampl dc sun jndi ldap connect read repli readrepli connect java sun jndi ldap ldap client ldapclient get search repli getsearchrepli ldap client ldapclient java sun jndi ldap ldap client ldapclient search ldap client ldapclient java sun jndi ldap ldap ctx ldapctx do search dosearch ldap ctx ldapctx java sun jndi ldap ldap ctx ldapctx search aux searchaux ldap ctx ldapctx java sun jndi ldap ldap ctx ldapctx search ldap ctx ldapctx java step reproduc configur valv apach catalina authent spnego authent spnegoauthent server xml store deleg credenti storedelegatedcredenti true configur realm apach catalina realm realm jndirealm server xml ssl connect url ldap myserv configur auth method authmethod spnego secur constraint securityconstraint secur role securityrol web xml add requir keystor jdk ldap connect tri authent debug realm jndirealm figur chang line context add to environ addtoenviron javax secur sasl qop auth conf authconf context add to environ addtoenviron javax secur sasl qop auth would solv problem test fix new written realm jndirealm sure fix caus secur issu","""java/org/apache/catalina/realm/JNDIRealm.java""","2","2","3","1","19","2","10","6","2","0","2","93","93","93","40","93","0","5","24","64","2431","510","1055","317","684","869","504","758","272","486","32","32","37","14","7","1","253","249","279","140","major"
"55798","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55798 Log an error if the file can't be found","Bug 55798  Enabling Manager App - process and description is inadequate","enabl manag app process descript inadequ","","","""java/org/apache/catalina/users/MemoryUserDatabase.java""","2","2","2","1","18","1","12","4","4","0","2","30","30","30","11","30","0","0","0","30","792","152","446","136","268","195","203","300","114","186","16","16","16","3","4","0","76","76","81","32","minor"
"55801","17","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55801 Add the ability to use a custom SSLContext when creating client wss connections. Patch provided by Maciej Lypik.","Bug 55801  Add ability to provide custom SSLContext for websocket client","add abil provid custom context sslcontext websocket client","","","""java/org/apache/tomcat/websocket/WsWebSocketContainer.java""","2","2","2","1","19","2","15","1","2","0","10","31","31","31","15","31","1","10","2","18","840","150","594","243","362","96","298","396","191","205","14","14","16","3","4","0","86","86","92","33","enhancement"
"55804","8","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55804 If the GSSCrednetial for the cached principal expires when using SPNEGO authentication, force a re-authentication.","Bug 55804  SPNEGOAUTHENTICATOR - GSSCredential does not get renewed after RemainingLifeTime is less than zero","spnegoauthent credenti gsscredenti get renew remain life time remaininglifetim le zero","In SpnegoAuthenticator, we check for request.getUserPrincipal() if it returns a prinicpal we do not do a fresh authentication. This happens even when the GSSCredential returned by GenericPrincipal has remainingLife time less than zero. This causes issues in delegating the credential as the credential is not valid any more.

Can we add additional check to reauthenticate when the credental has expired and put GSSCredential in the same session?","spnego authent spnegoauthent check request get user princip getuserprincip return prinicp fresh authent happen even credenti gsscredenti return gener princip genericprincip remain life remaininglif time le zero caus issu deleg credenti credenti valid add addit check reauthent credent expir put credenti gsscredenti session","""java/org/apache/catalina/connector/Request.java""","2","2","2","1","15","1","9","4","10","2","6","163","165","163","51","165","3","3","14","145","3337","584","1838","508","1109","924","808","1209","438","771","26","26","29","11","7","1","400","400","446","238","critical"
"55811","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55811 Do not parse web-fragment.xml files when an empty absolute-ordering element is present.","Bug 55811  Do not parse web-fragment.xml files when empty absolute-ordering","pars web fragment webfrag xml file empti absolut order absoluteord","","","""java/org/apache/catalina/startup/ContextConfig.java""","7","7","8","1","39","3","29","6","3","1","6","58","58","57","20","58","0","11","34","13","2618","322","1867","421","1269","430","830","1314","442","872","45","45","48","13","7","0","422","422","465","108","enhancement"
"55811","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55811 Do not parse web-fragment.xml files when an empty absolute-ordering element is present.","Bug 55811  Do not parse web-fragment.xml files when empty absolute-ordering","pars web fragment webfrag xml file empti absolut order absoluteord","","","""java/org/apache/tomcat/util/descriptor/web/FragmentJarScannerCallback.java""","2","2","2","1","14","0","11","1","1","0","1","7","7","7","4","7","0","1","0","6","154","18","106","44","58","30","57","76","37","39","6","6","6","1","3","0","16","16","16","7","enhancement"
"55811","15","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55811 Do not parse web-fragment.xml files when an empty absolute-ordering element is present.","Bug 55811  Do not parse web-fragment.xml files when empty absolute-ordering","pars web fragment webfrag xml file empti absolut order absoluteord","","","""java/org/apache/jasper/servlet/JspCServletContext.java""","1","1","1","1","7","0","4","2","1","0","0","55","55","55","6","55","0","2","0","53","681","145","353","179","122","183","141","215","114","101","7","7","8","4","2","1","73","73","74","60","enhancement"
"55820","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55820 Include the 172.16/12 range in the default value for internal proxies.","Bug 55820  Add 172.16/12 range to default internal proxies","add rang default intern proxi","","","""java/org/apache/catalina/filters/RemoteIpFilter.java""","2","2","2","1","10","0","7","2","3","2","13","50","50","48","18","50","0","1","4","45","1137","106","453","152","251","579","208","308","142","166","18","18","20","5","3","1","103","103","113","56","enhancement"
"55820","11","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55820 Include the 172.16/12 range in the default value for internal proxies.","Bug 55820  Add 172.16/12 range to default internal proxies","add rang default intern proxi","","","""java/org/apache/catalina/valves/RemoteIpValve.java""","2","2","2","1","14","0","8","6","1","2","2","27","27","25","11","27","0","1","2","24","843","59","254","76","155","531","121","176","76","100","17","17","19","5","4","2","57","57","62","31","enhancement"
"55837","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55837 getRealPath() should return a result for resources that don't exist where possible Add some unit tests to check this.","Bug 55837  ServletContext.getRealPath() returns null","servlet context servletcontext get real path getrealpath return null","[code]
String path = servletContext.getRealPath('/test');

if no file or folder named '/test' exist in webroot 
then path return null

but int tomcat 5\6\7, it will return the correct value , ex /data/oschina/webapp/test","code string path servlet context servletcontext get real path getrealpath file folder name exist webroot path return null int tomcat return correct valu ex data oschina webapp","""test/org/apache/catalina/webresources/AbstractTestResourceSet.java""","1","1","1","1","7","0","7","0","1","0","0","33","37","37","1","37","0","0","2","35","380","64","293","124","157","23","144","202","95","107","3","3","3","1","1","0","51","51","51","33","normal"
"55837","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55837 getRealPath() should return a result for resources that don't exist where possible Add some unit tests to check this.","Bug 55837  ServletContext.getRealPath() returns null","servlet context servletcontext get real path getrealpath return null","[code]
String path = servletContext.getRealPath('/test');

if no file or folder named '/test' exist in webroot 
then path return null

but int tomcat 5\6\7, it will return the correct value , ex /data/oschina/webapp/test","code string path servlet context servletcontext get real path getrealpath file folder name exist webroot path return null int tomcat return correct valu ex data oschina webapp","""java/org/apache/catalina/webresources/DirResourceSet.java""","5","5","5","2","23","1","20","2","1","0","0","8","8","8","0","8","0","0","1","7","241","20","181","46","112","40","77","119","40","79","10","10","10","7","5","0","40","40","41","23","normal"
"55837","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55837 getRealPath() should return a result for resources that don't exist where possible Add some unit tests to check this.","Bug 55837  ServletContext.getRealPath() returns null","servlet context servletcontext get real path getrealpath return null","[code]
String path = servletContext.getRealPath('/test');

if no file or folder named '/test' exist in webroot 
then path return null

but int tomcat 5\6\7, it will return the correct value , ex /data/oschina/webapp/test","code string path servlet context servletcontext get real path getrealpath file folder name exist webroot path return null int tomcat return correct valu ex data oschina webapp","""java/org/apache/catalina/webresources/EmptyResource.java""","1","1","1","1","3","0","3","0","1","0","0","23","23","23","2","23","0","0","0","23","151","27","107","56","27","17","34","59","34","25","2","2","2","1","1","0","24","24","24","23","normal"
"55837","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55837 getRealPath() should return a result for resources that don't exist where possible Add some unit tests to check this.","Bug 55837  ServletContext.getRealPath() returns null","servlet context servletcontext get real path getrealpath return null","[code]
String path = servletContext.getRealPath('/test');

if no file or folder named '/test' exist in webroot 
then path return null

but int tomcat 5\6\7, it will return the correct value , ex /data/oschina/webapp/test","code string path servlet context servletcontext get real path getrealpath file folder name exist webroot path return null int tomcat return correct valu ex data oschina webapp","""java/org/apache/catalina/webresources/StandardRoot.java""","2","2","2","1","9","0","7","0","2","0","2","55","55","55","15","55","3","7","8","37","721","115","529","174","270","77","206","354","151","203","10","8","10","6","4","0","124","121","132","62","normal"
"55842","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55842 Check if the output buffer can grow before flushing it when using a writer.","Bug 55842  response.setBufferSize() does not seem to work properly","respons set buffer size setbuffers seem work properli","I found a problem with setting the buffer size for the ServletResponse. 
If I call 'response.setBufferSize(1,000,000);' and send about 20,000 characters, the response will be chunked even though it should not.
The response is sent in several chunks and contains the 'Transfer-Encoding: chunked' response header.
In my understanding in this case the response should be fully buffered on the server and then sent as a whole containing the Content-Length-header.

This causes a problem in my application because I want to use a larger buffer to be able to redirect to an error page if an error occurs during rendering the response. 

I was able to reproduce this on Tomcat 7.0.39, 7.0.40, 7.0.42, 7.0.47. Tomcat 7.0.37 works fine and as expected.

This is easily reproducable by using a JSP as follows:
<%
response.setBufferSize(1000*1000);
for (int i = 0; i < 100; i++) {
	for (int j = 0; j < 100; j++) {
		response.getWriter().write(""X"");
	}
    response.getWriter().write(""<br />"");
}
%>","found problem set buffer size servlet respons servletrespons call respons set buffer size setbuffers send charact respons chunk even though respons sent sever chunk contain transfer encod chunk respons header understand case respons fulli buffer server sent whole contain content length header lengthhead caus problem applic use larger buffer abl redirect error page error occur render respons abl reproduc tomcat tomcat work fine expect easili reproduc use jsp follow respons set buffer size setbuffers int int respons get writer getwrit write respons get writer getwrit write br","""java/org/apache/tomcat/util/buf/ByteChunk.java""","2","2","2","1","12","0","8","3","3","5","2","49","51","46","10","51","0","2","0","49","792","109","444","124","250","243","213","325","120","205","8","8","11","5","3","1","111","111","127","91","normal"
"55842","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55842 Check if the output buffer can grow before flushing it when using a writer.","Bug 55842  response.setBufferSize() does not seem to work properly","respons set buffer size setbuffers seem work properli","I found a problem with setting the buffer size for the ServletResponse. 
If I call 'response.setBufferSize(1,000,000);' and send about 20,000 characters, the response will be chunked even though it should not.
The response is sent in several chunks and contains the 'Transfer-Encoding: chunked' response header.
In my understanding in this case the response should be fully buffered on the server and then sent as a whole containing the Content-Length-header.

This causes a problem in my application because I want to use a larger buffer to be able to redirect to an error page if an error occurs during rendering the response. 

I was able to reproduce this on Tomcat 7.0.39, 7.0.40, 7.0.42, 7.0.47. Tomcat 7.0.37 works fine and as expected.

This is easily reproducable by using a JSP as follows:
<%
response.setBufferSize(1000*1000);
for (int i = 0; i < 100; i++) {
	for (int j = 0; j < 100; j++) {
		response.getWriter().write(""X"");
	}
    response.getWriter().write(""<br />"");
}
%>","found problem set buffer size servlet respons servletrespons call respons set buffer size setbuffers send charact respons chunk even though respons sent sever chunk contain transfer encod chunk respons header understand case respons fulli buffer server sent whole contain content length header lengthhead caus problem applic use larger buffer abl redirect error page error occur render respons abl reproduc tomcat tomcat work fine expect easili reproduc use jsp follow respons set buffer size setbuffers int int respons get writer getwrit write respons get writer getwrit write br","""java/org/apache/catalina/connector/OutputBuffer.java""","2","2","2","1","12","1","8","2","2","0","2","35","35","35","15","35","0","1","2","32","676","169","333","95","175","175","140","217","70","147","7","7","8","3","2","1","75","75","77","41","normal"
"55851","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55851 Enable SPNEGO to work with IBM JDKs. Based on a patch by Arunav Sanyal.","Bug 55851  Tomcat SPNEGO authenticator incompatible with IBM JDK: Accept Security Context needs to be wrapped around a Privileged Action in order for server side authentication","tomcat spnego authent incompat ibm jdk accept secur context need wrap around privileg action order server side authent","","","""java/org/apache/catalina/authenticator/SpnegoAuthenticator.java""","3","3","4","2","23","1","19","1","2","0","1","10","10","10","3","10","0","0","2","8","297","34","221","65","140","42","104","143","55","88","26","26","27","12","3","0","39","39","41","21","normal"
"55884","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55884 Ensure that URLs that are converted to file paths are correctly decoded. The primary use is to ensure that %20 sequences are converted to spaces.","Bug 55884  JSPs no longer compile in Java 8","jsp longer compil java","","","""java/org/apache/jasper/compiler/JspRuntimeContext.java""","2","2","3","1","18","1","12","5","2","0","0","24","24","24","16","24","0","4","0","20","580","69","332","98","203","179","166","237","101","136","13","13","15","3","5","1","67","67","72","26","major"
"55893","24","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55893 Split AccessLogValve and extract the formatting logic in an AbstractAccessLogValve to facilitate other implementations that output to destinations other than files. Patch provided by Cyrille Le Clerc","Bug 55893  Split AccessLogValve and extract the formatting logic in an AbstractAccessLogValve","split access log valv accesslogvalv extract format logic abstract access log valv abstractaccesslogvalv","","","""java/org/apache/catalina/valves/AbstractAccessLogValve.java""","2","2","2","1","13","0","9","2","32","2","16","100","99","99","57","101","0","10","12","79","2121","252","1217","363","703","653","534","804","307","497","22","13","22","4","4","1","263","234","290","111","enhancement"
"55905","0","Violeta Georgieva Georgieva","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55905 Prevent NPE when the specified tld resource does not exists.","Bug 55905  Error message unhelpful when web.xml references a tld file that doesn't exist","error messag unhelp web xml refer tld file doesn exist","","","""java/org/apache/jasper/servlet/TldScanner.java""","2","2","2","1","17","0","13","4","3","0","4","17","17","17","7","17","0","3","3","11","369","32","249","100","137","88","122","175","92","83","9","9","9","4","4","0","48","48","50","22","normal"
"55937","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55937 Treat a context path of ""/ROOT"" as equivalent to """" (i.e. it is treated as the ROOT application). Note that when deploying an application via the manager text interface to /ROOT, it was deployed as the ROOT application but reported that the deployment had failed. It now deploys it as the ROOT application and reports a successful deployment to the context path ""/""","Bug 55937  Tomcat auto deployer not working for ROOT applications","tomcat auto deploy work root applic","","","""java/org/apache/catalina/util/ContextName.java""","2","2","3","1","16","1","11","2","1","0","3","8","8","8","4","8","0","0","0","8","171","26","103","24","64","42","48","70","23","47","7","7","9","1","1","0","21","21","24","8","minor"
"55937","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55937 Treat a context path of ""/ROOT"" as equivalent to """" (i.e. it is treated as the ROOT application). Note that when deploying an application via the manager text interface to /ROOT, it was deployed as the ROOT application but reported that the deployment had failed. It now deploys it as the ROOT application and reports a successful deployment to the context path ""/""","Bug 55937  Tomcat auto deployer not working for ROOT applications","tomcat auto deploy work root applic","","","""test/org/apache/catalina/util/TestContextName.java""","1","1","1","1","15","0","15","0","1","0","0","9","9","9","16","9","0","2","0","7","197","14","167","37","120","16","140","150","30","120","1","1","1","1","0","0","9","9","9","9","minor"
"55937","12","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55937 Treat a context path of ""/ROOT"" as equivalent to """" (i.e. it is treated as the ROOT application). Note that when deploying an application via the manager text interface to /ROOT, it was deployed as the ROOT application but reported that the deployment had failed. It now deploys it as the ROOT application and reports a successful deployment to the context path ""/""","Bug 55937  Tomcat auto deployer not working for ROOT applications","tomcat auto deploy work root applic","","","""test/org/apache/catalina/util/TestContextName.java""","1","1","1","1","15","0","15","0","1","0","0","9","9","9","16","9","0","2","0","7","197","14","167","37","120","16","140","150","30","120","1","1","1","1","0","0","9","9","9","9","minor"
"55939","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55939 Ensure that flags used for non-blocking writes are reset between requests.","Bug 55939  Seeing issues with non-blocking io when writing lots of data","see issu non block nonblock write lot data","","","""java/org/apache/coyote/Response.java""","1","1","1","1","8","0","6","1","1","0","2","49","49","49","21","49","0","1","0","48","661","140","346","100","195","177","165","252","97","155","6","6","6","4","2","1","82","82","90","60","normal"
"55943","16","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55943 Better implementation of the class loader check that prevents web applications from trying to override J2SE implementation classes. Refactor the way a null parent class loader was handled which enables a number of null checks and object creation calls to be removed","Bug 55943  Provide a way prevent  looking at the System classloader before the webapp classloaders","provid way prevent look system classload webapp classload","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","5","2","30","2","20","7","3","0","5","72","72","72","23","72","3","15","11","43","2720","383","1594","389","1091","745","702","1074","339","735","36","36","37","18","8","0","368","368","395","184","enhancement"
"55958","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55958 Differentiate between foo.war the directory and foo.war the file","Bug 55958  Tomcat tries to deploy dir as zip archive even when it is a directory if the name ends with .war","tomcat tri deploy zip archiv even directori name end","Webapp deployment fails if the dirname ends with .war because it is automatically considered as zip archive.","webapp deploy fail dirnam end automat consid zip archiv","""java/org/apache/catalina/core/ContainerBase.java""","2","2","3","1","17","1","10","4","6","0","2","57","57","57","27","57","1","2","11","43","1430","258","750","244","441","423","346","521","204","317","8","8","11","6","3","1","156","156","175","75","normal"
"55958","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55958 Differentiate between foo.war the directory and foo.war the file","Bug 55958  Tomcat tries to deploy dir as zip archive even when it is a directory if the name ends with .war","tomcat tri deploy zip archiv even directori name end","Webapp deployment fails if the dirname ends with .war because it is automatically considered as zip archive.","webapp deploy fail dirnam end automat consid zip archiv","""java/org/apache/catalina/util/ContextName.java""","2","2","3","1","16","1","11","2","1","0","3","8","8","8","4","8","0","0","0","8","171","26","103","24","64","42","48","70","23","47","7","7","9","1","1","0","21","21","25","8","normal"
"55958","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55958 Differentiate between foo.war the directory and foo.war the file","Bug 55958  Tomcat tries to deploy dir as zip archive even when it is a directory if the name ends with .war","tomcat tri deploy zip archiv even directori name end","Webapp deployment fails if the dirname ends with .war because it is automatically considered as zip archive.","webapp deploy fail dirnam end automat consid zip archiv","""java/org/apache/catalina/startup/FailedContext.java""","1","1","1","1","1","0","1","0","1","0","1","217","217","217","6","217","0","0","4","213","727","139","555","504","158","132","195","420","278","142","5","5","5","5","2","0","224","224","224","221","normal"
"55958","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55958 Differentiate between foo.war the directory and foo.war the file","Bug 55958  Tomcat tries to deploy dir as zip archive even when it is a directory if the name ends with .war","tomcat tri deploy zip archiv even directori name end","Webapp deployment fails if the dirname ends with .war because it is automatically considered as zip archive.","webapp deploy fail dirnam end automat consid zip archiv","""java/org/apache/catalina/ha/deploy/FarmWarDeployer.java""","2","2","2","1","14","0","11","3","1","0","2","39","39","39","17","39","0","1","8","30","779","79","485","148","318","216","223","338","130","208","15","15","15","6","7","0","109","109","111","50","normal"
"55958","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55958 Differentiate between foo.war the directory and foo.war the file","Bug 55958  Tomcat tries to deploy dir as zip archive even when it is a directory if the name ends with .war","tomcat tri deploy zip archiv even directori name end","Webapp deployment fails if the dirname ends with .war because it is automatically considered as zip archive.","webapp deploy fail dirnam end automat consid zip archiv","""java/org/apache/catalina/manager/HTMLManagerServlet.java""","3","3","4","1","30","2","22","6","11","0","17","33","33","33","1","33","0","0","19","14","1361","127","992","213","789","249","421","551","181","370","20","20","25","10","4","0","125","125","145","61","normal"
"55958","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55958 Differentiate between foo.war the directory and foo.war the file","Bug 55958  Tomcat tries to deploy dir as zip archive even when it is a directory if the name ends with .war","tomcat tri deploy zip archiv even directori name end","Webapp deployment fails if the dirname ends with .war because it is automatically considered as zip archive.","webapp deploy fail dirnam end automat consid zip archiv","""java/org/apache/catalina/startup/HostConfig.java""","4","4","5","1","29","2","22","5","5","1","2","49","49","48","26","49","0","5","16","28","1784","246","1172","264","816","367","529","781","247","534","39","39","54","10","6","0","238","238","278","94","normal"
"55958","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55958 Differentiate between foo.war the directory and foo.war the file","Bug 55958  Tomcat tries to deploy dir as zip archive even when it is a directory if the name ends with .war","tomcat tri deploy zip archiv even directori name end","Webapp deployment fails if the dirname ends with .war because it is automatically considered as zip archive.","webapp deploy fail dirnam end automat consid zip archiv","""java/org/apache/catalina/mbeans/MBeanUtils.java""","3","3","3","1","26","2","15","8","1","25","3","25","25","0","0","25","14","0","0","11","795","120","432","188","292","243","228","312","151","161","5","5","5","3","2","1","80","80","80","27","normal"
"55958","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55958 Differentiate between foo.war the directory and foo.war the file","Bug 55958  Tomcat tries to deploy dir as zip archive even when it is a directory if the name ends with .war","tomcat tri deploy zip archiv even directori name end","Webapp deployment fails if the dirname ends with .war because it is automatically considered as zip archive.","webapp deploy fail dirnam end automat consid zip archiv","""java/org/apache/catalina/storeconfig/StandardContextSF.java""","6","6","8","2","46","2","33","10","1","0","1","7","7","7","0","7","0","0","5","2","397","30","266","90","186","101","132","182","79","103","8","8","13","7","5","0","47","47","56","18","normal"
"55958","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55958 Differentiate between foo.war the directory and foo.war the file","Bug 55958  Tomcat tries to deploy dir as zip archive even when it is a directory if the name ends with .war","tomcat tri deploy zip archiv even directori name end","Webapp deployment fails if the dirname ends with .war because it is automatically considered as zip archive.","webapp deploy fail dirnam end automat consid zip archiv","""test/org/apache/catalina/util/TestContextName.java""","1","1","1","1","18","0","18","0","1","0","0","9","9","9","20","9","0","2","0","7","229","14","199","41","148","16","172","182","34","148","1","1","1","1","0","0","9","9","9","9","normal"
"55958","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55958 Differentiate between foo.war the directory and foo.war the file","Bug 55958  Tomcat tries to deploy dir as zip archive even when it is a directory if the name ends with .war","tomcat tri deploy zip archiv even directori name end","Webapp deployment fails if the dirname ends with .war because it is automatically considered as zip archive.","webapp deploy fail dirnam end automat consid zip archiv","""test/org/apache/catalina/util/TestContextName.java""","1","1","1","1","18","0","18","0","1","0","0","9","9","9","20","9","0","2","0","7","229","14","199","41","148","16","172","182","34","148","1","1","1","1","0","0","9","9","9","9","normal"
"55958","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55958 Differentiate between foo.war the directory and foo.war the file","Bug 55958  Tomcat tries to deploy dir as zip archive even when it is a directory if the name ends with .war","tomcat tri deploy zip archiv even directori name end","Webapp deployment fails if the dirname ends with .war because it is automatically considered as zip archive.","webapp deploy fail dirnam end automat consid zip archiv","""test/org/apache/catalina/startup/TestHostConfigAutomaticDeployment.java""","1","1","1","1","8","0","7","0","4","1","23","162","162","161","2","162","0","18","0","144","1911","274","1429","469","814","208","535","791","288","503","31","27","40","1","3","0","262","252","289","162","normal"
"55960","2","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55960 Improve SSO unit tests Patch by Brian Burch","Bug 55960  TestSSOnonLoginAndBasicAuthenticator is flawed and incomplete","test onon login and basic authent testssononloginandbasicauthent flaw incomplet","","","""test/org/apache/catalina/authenticator/TestSSOnonLoginAndBasicAuthenticator.java""","1","1","1","1","16","2","12","1","1","0","15","13","13","13","1","13","0","2","2","9","368","57","205","93","136","107","130","149","75","74","3","3","3","1","1","1","18","18","19","13","minor"
"55970","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55970 Ignore non-JAR resources in WEB-INF/lib when checking to see if a reloadable web application has updated JARs.","Bug 55970  A reloadable context is reloaded repeatedly if WEB-INF/lib contains non-jar files","reload context reload repeatedli web inf lib contain non jar nonjar file","","","""java/org/apache/catalina/loader/WebappClassLoader.java""","5","5","5","2","30","2","20","7","3","0","5","73","73","73","23","73","3","15","12","43","2729","382","1601","389","1096","748","704","1078","339","739","36","36","37","18","8","0","370","370","397","186","normal"
"55974","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55974 Preserve the order of reported errors and warnings","Bug 55974  Honor the order when reporting XML parsing errors and warnings in XmlErrorHandler class","honor order report xml pars error warn xml error handler xmlerrorhandl class","","","""java/org/apache/tomcat/util/descriptor/XmlErrorHandler.java""","1","1","1","1","5","0","4","0","1","0","1","6","6","6","2","6","0","0","0","6","75","12","42","22","14","21","18","29","20","9","3","3","3","1","1","1","8","8","8","6","enhancement"
"55976","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55976 Fix sendfile support on NIO","Bug 55976  Broken response from NIO connector in Tomcat 7.0.50","broken respons nio connector tomcat","","","""java/org/apache/coyote/http11/Http11NioProcessor.java""","5","5","5","2","24","1","19","3","1","0","1","18","18","18","2","18","0","0","13","5","566","80","398","94","257","88","162","257","68","189","54","54","58","20","5","0","95","95","104","40","normal"
"55978","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55978 Ensure that container makes first call on onWritePossible when using non-blocking IO with an HTTP upgraded connection","Bug 55978  Initial call to onWritePossible() not made by container when using HTTP upgrade","initi call on write possibl onwriteposs made contain use http upgrad","When using a WriteListener and non-blocking IO with the Servlet async API, the container makes the first call to onWritePossible() as per the spec.

When using a WriteListener and non-blocking IO with the Servlet HTTP upgrade API the container does not make the initial call to onWritePossible(). When fixing this bug it is worth checking the initial call to onDataAvailable() as well.","use write listen writelisten non block nonblock servlet async api contain make first call on write possibl onwriteposs spec use write listen writelisten non block nonblock servlet http upgrad api contain make initi call on write possibl onwriteposs fix worth check initi call on data avail ondataavail well","""java/org/apache/coyote/http11/upgrade/AbstractProcessor.java""","1","1","1","1","5","0","4","0","1","0","1","17","18","18","3","18","0","0","2","16","176","32","121","60","40","23","47","71","38","33","7","7","8","5","2","0","23","23","24","21","normal"
"55978","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55978 Ensure that container makes first call on onWritePossible when using non-blocking IO with an HTTP upgraded connection","Bug 55978  Initial call to onWritePossible() not made by container when using HTTP upgrade","initi call on write possibl onwriteposs made contain use http upgrad","When using a WriteListener and non-blocking IO with the Servlet async API, the container makes the first call to onWritePossible() as per the spec.

When using a WriteListener and non-blocking IO with the Servlet HTTP upgrade API the container does not make the initial call to onWritePossible(). When fixing this bug it is worth checking the initial call to onDataAvailable() as well.","use write listen writelisten non block nonblock servlet async api contain make first call on write possibl onwriteposs spec use write listen writelisten non block nonblock servlet http upgrad api contain make initi call on write possibl onwriteposs fix worth check initi call on data avail ondataavail well","""java/org/apache/coyote/AbstractProtocol.java""","2","2","2","1","8","0","7","1","3","0","2","66","77","77","16","77","0","1","13","63","868","140","560","188","328","170","247","380","147","233","26","26","35","7","3","0","132","132","141","75","normal"
"55978","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55978 Ensure that container makes first call on onWritePossible when using non-blocking IO with an HTTP upgraded connection","Bug 55978  Initial call to onWritePossible() not made by container when using HTTP upgrade","initi call on write possibl onwriteposs made contain use http upgrad","When using a WriteListener and non-blocking IO with the Servlet async API, the container makes the first call to onWritePossible() as per the spec.

When using a WriteListener and non-blocking IO with the Servlet HTTP upgrade API the container does not make the initial call to onWritePossible(). When fixing this bug it is worth checking the initial call to onDataAvailable() as well.","use write listen writelisten non block nonblock servlet async api contain make first call on write possibl onwriteposs spec use write listen writelisten non block nonblock servlet http upgrad api contain make initi call on write possibl onwriteposs fix worth check initi call on data avail ondataavail well","""java/org/apache/coyote/http11/upgrade/AbstractServletOutputStream.java""","2","2","2","1","13","0","11","1","1","0","1","9","12","12","7","12","0","2","5","5","190","26","126","41","72","38","55","82","34","48","5","5","6","1","2","0","19","19","20","9","normal"
"55978","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55978 Ensure that container makes first call on onWritePossible when using non-blocking IO with an HTTP upgraded connection","Bug 55978  Initial call to onWritePossible() not made by container when using HTTP upgrade","initi call on write possibl onwriteposs made contain use http upgrad","When using a WriteListener and non-blocking IO with the Servlet async API, the container makes the first call to onWritePossible() as per the spec.

When using a WriteListener and non-blocking IO with the Servlet HTTP upgrade API the container does not make the initial call to onWritePossible(). When fixing this bug it is worth checking the initial call to onDataAvailable() as well.","use write listen writelisten non block nonblock servlet async api contain make first call on write possibl onwriteposs spec use write listen writelisten non block nonblock servlet http upgrad api contain make initi call on write possibl onwriteposs fix worth check initi call on data avail ondataavail well","""java/org/apache/coyote/http11/upgrade/AprServletOutputStream.java""","4","4","4","1","23","1","19","2","1","0","1","5","5","5","5","5","0","1","3","1","169","22","119","33","72","28","58","81","28","53","11","11","14","1","4","0","20","20","23","5","normal"
"55978","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55978 Ensure that container makes first call on onWritePossible when using non-blocking IO with an HTTP upgraded connection","Bug 55978  Initial call to onWritePossible() not made by container when using HTTP upgrade","initi call on write possibl onwriteposs made contain use http upgrad","When using a WriteListener and non-blocking IO with the Servlet async API, the container makes the first call to onWritePossible() as per the spec.

When using a WriteListener and non-blocking IO with the Servlet HTTP upgrade API the container does not make the initial call to onWritePossible(). When fixing this bug it is worth checking the initial call to onDataAvailable() as well.","use write listen writelisten non block nonblock servlet async api contain make first call on write possibl onwriteposs spec use write listen writelisten non block nonblock servlet http upgrad api contain make initi call on write possibl onwriteposs fix worth check initi call on data avail ondataavail well","""java/org/apache/coyote/http11/upgrade/BioServletOutputStream.java""","1","1","1","1","3","0","3","0","1","0","0","4","4","4","1","4","0","0","3","1","50","8","26","16","5","16","11","16","11","5","1","1","1","1","0","1","4","4","4","4","normal"
"55978","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55978 Ensure that container makes first call on onWritePossible when using non-blocking IO with an HTTP upgraded connection","Bug 55978  Initial call to onWritePossible() not made by container when using HTTP upgrade","initi call on write possibl onwriteposs made contain use http upgrad","When using a WriteListener and non-blocking IO with the Servlet async API, the container makes the first call to onWritePossible() as per the spec.

When using a WriteListener and non-blocking IO with the Servlet HTTP upgrade API the container does not make the initial call to onWritePossible(). When fixing this bug it is worth checking the initial call to onDataAvailable() as well.","use write listen writelisten non block nonblock servlet async api contain make first call on write possibl onwriteposs spec use write listen writelisten non block nonblock servlet http upgrad api contain make initi call on write possibl onwriteposs fix worth check initi call on data avail ondataavail well","""java/org/apache/coyote/http11/upgrade/NioServletOutputStream.java""","3","3","3","1","18","1","17","0","1","0","0","5","5","5","3","5","0","1","3","1","139","19","102","37","56","18","49","68","29","39","6","6","6","3","3","0","17","17","17","9","normal"
"55978","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55978 Ensure that container makes first call on onWritePossible when using non-blocking IO with an HTTP upgraded connection","Bug 55978  Initial call to onWritePossible() not made by container when using HTTP upgrade","initi call on write possibl onwriteposs made contain use http upgrad","When using a WriteListener and non-blocking IO with the Servlet async API, the container makes the first call to onWritePossible() as per the spec.

When using a WriteListener and non-blocking IO with the Servlet HTTP upgrade API the container does not make the initial call to onWritePossible(). When fixing this bug it is worth checking the initial call to onDataAvailable() as well.","use write listen writelisten non block nonblock servlet async api contain make first call on write possibl onwriteposs spec use write listen writelisten non block nonblock servlet http upgrad api contain make initi call on write possibl onwriteposs fix worth check initi call on data avail ondataavail well","""test/org/apache/coyote/http11/upgrade/TestUpgrade.java""","1","1","1","1","7","0","5","0","12","0","2","34","34","34","6","34","0","3","1","30","407","86","286","144","108","35","126","183","109","74","5","5","5","1","4","0","45","45","46","34","normal"
"55995","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55995 Fix NPE when using JspC and there are JARs containing TLDs on the classpath","Bug 55995  java.lang.NullPointerException at org.apache.jasper.servlet.JspCServletContext.getResource(JspCServletContext.java:344)","java lang null pointer except nullpointerexcept apach jasper servlet jsp servlet context jspcservletcontext get resourc getresourc jsp servlet context jspcservletcontext java","Null pointer exception when running JSPC from a Shell Script.

JspCServletContext.java:344
    /**
     * Return a URL object of a resource that is mapped to the
     * specified context-relative path.
     *
     * @param path Context-relative path of the desired resource
     *
     * @exception MalformedURLException if the resource path is
     *  not properly formed
     */
    @Override
    public URL getResource(String path) throws MalformedURLException {

        if (!path.startsWith(""/""))
            throw new MalformedURLException(""Path '"" + path +
                                            ""' does not start with '/'"");

TldCache.java:124

    private long[] getLastModified(TldResourcePath tldResourcePath) {
        long[] result = new long[2];
        result[0] = -1;
        result[1] = -1;
        try {
            URL url = servletContext.getResource(tldResourcePath.getWebappPath());


/usr/java/jdk1.7.0_45/bin/java -classpath :/home/tomcat/apache-tomcat-8.0.0-RC10/lib/catalina-storeconfig.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/tomcat-websocket.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/tomcat-i18n-es.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/catalina-tribes.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/catalina-ha.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/tomcat-i18n-ja.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/jsp-api.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/tomcat-util.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/tomcat-jni.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/jasper.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/websocket-api.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/ecj-4.3.1.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/tomcat-i18n-fr.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/tomcat-api.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/tomcat-coyote.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/servlet-api.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/jasper-el.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/catalina.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/tomcat-dbcp.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/tomcat-jdbc.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/annotations-api.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/tomcat-util-scan.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/catalina-ant.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/el-api.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/lib/tomcat-spdy.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/bin/tomcat-juli.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/bin/bootstrap.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/bin/commons-daemon.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/webapps/examples/WEB-INF/lib/jstl.jar:/home/tomcat/apache-tomcat-8.0.0-RC10/webapps/examples/WEB-INF/lib/standard.jar:/home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/lib/ant-1.6.5.jar org.apache.jasper.JspC 	-d /home/java/source/HEAD/work/tomcat80 	-v 	-l 	-uriroot /home/java/source/HEAD/work/jsp_compile_shared /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/dialog/qbAxesDlg.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/dialog/qbManualGecodingDlg.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/fmtdlg.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/index.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/joindlg.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/producer.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/simplefilter.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/selectvaluedlg.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/binddowsTestView.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/variableeditordlg.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/filterprompteditor.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/ajax_response.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/fontdlg.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/join_fields.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/tree_component.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/waiting_banner.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/folderblock/BID_FolderBlockInit.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/folderblock/BID_FolderBlockBoot.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/BID_EmptyContent.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/xml/BID_UrlProperties.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/xml/BID_IBFSpathToHrefs.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/xml/BID_xmlresponse.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/xml/BID_statusResponse.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/favorites/BID_favorites_tree.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/favorites/BID_FavoritesBlockBoot.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/favorites/BID_FavoritesBlockInit.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/favorites/BID_favorites_tree_boot.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/favorites/BID_listToXML.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/index.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/views/BID_InternalPage.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/views/BID_SearchTree_Boot.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/views/BID_SATree_Boot.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/views/BID_BiFrame.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/views/BID_initView.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/views/BID_ShowToolbar.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/views/BID_ExternalPage.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/views/BID_SATreeBiFrame.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/views/BID_initBindows.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/views/BID_SearchTreeBiFrame.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/recents/BID_recents_tree_boot.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/recents/BID_recents_tree.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/recents/BID_listToXML.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/error.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/groups/BID_listToXML.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/search/BID_searchListToXML.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/search/BID_listToXML.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/tree/BID_MrPropertiesToXML.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/tree/BID_flatListToXML.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/tree/BID_PlainText.jsp /home/java/source/HEAD/work/jsp_compile_shared/WEB-INF/jsp/bid/tree/BID_listToXML.jsp	  2>&1
	
	
Exception in thread ""main"" java.lang.NullPointerException
	at org.apache.jasper.servlet.JspCServletContext.getResource(JspCServletContext.java:344)
	at org.apache.jasper.compiler.TldCache.getLastModified(TldCache.java:124)
	at org.apache.jasper.compiler.TldCache.<init>(TldCache.java:70)
	at org.apache.jasper.JspC.initServletContext(JspC.java:1468)
	at org.apache.jasper.JspC.execute(JspC.java:1321)
	at org.apache.jasper.JspC.main(JspC.java:269)","null pointer except run jspc shell script jsp servlet context jspcservletcontext java return url object resourc map specifi context rel contextrel path param path context rel contextrel path desir resourc except malform except malformedurlexcept resourc path properli form overrid public url get resourc getresourc string path throw malform except malformedurlexcept path start with startswith throw new malform except malformedurlexcept path path start tld cach tldcach java privat long get last modifi getlastmodifi tld resourc path tldresourcepath tld resourc path tldresourcepath long result new long result result tri url url servlet context servletcontext get resourc getresourc tld resourc path tldresourcepath get webapp path getwebapppath usr java jdk1 java classpath home tomcat apach tomcat apachetomcat c10 rc10 lib catalina storeconfig catalinastoreconfig jar home tomcat apach tomcat apachetomcat c10 rc10 lib tomcat websocket tomcatwebsocket jar home tomcat apach tomcat apachetomcat c10 rc10 lib tomcat i18n tomcati18n jar home tomcat apach tomcat apachetomcat c10 rc10 lib catalina tribe catalinatrib jar home tomcat apach tomcat apachetomcat c10 rc10 lib catalina ha catalinaha jar home tomcat apach tomcat apachetomcat c10 rc10 lib tomcat i18n ja tomcati18nja jar home tomcat apach tomcat apachetomcat c10 rc10 lib jsp api jspapi jar home tomcat apach tomcat apachetomcat c10 rc10 lib tomcat util tomcatutil jar home tomcat apach tomcat apachetomcat c10 rc10 lib tomcat jni tomcatjni jar home tomcat apach tomcat apachetomcat c10 rc10 lib jasper jar home tomcat apach tomcat apachetomcat c10 rc10 lib websocket api websocketapi jar home tomcat apach tomcat apachetomcat c10 rc10 lib ecj jar home tomcat apach tomcat apachetomcat c10 rc10 lib tomcat i18n fr tomcati18nfr jar home tomcat apach tomcat apachetomcat c10 rc10 lib tomcat api tomcatapi jar home tomcat apach tomcat apachetomcat c10 rc10 lib tomcat coyot tomcatcoyot jar home tomcat apach tomcat apachetomcat c10 rc10 lib servlet api servletapi jar home tomcat apach tomcat apachetomcat c10 rc10 lib jasper el jasperel jar home tomcat apach tomcat apachetomcat c10 rc10 lib catalina jar home tomcat apach tomcat apachetomcat c10 rc10 lib tomcat dbcp tomcatdbcp jar home tomcat apach tomcat apachetomcat c10 rc10 lib tomcat jdbc tomcatjdbc jar home tomcat apach tomcat apachetomcat c10 rc10 lib annot api annotationsapi jar home tomcat apach tomcat apachetomcat c10 rc10 lib tomcat util scan tomcatutilscan jar home tomcat apach tomcat apachetomcat c10 rc10 lib catalina ant catalina jar home tomcat apach tomcat apachetomcat c10 rc10 lib el api elapi jar home tomcat apach tomcat apachetomcat c10 rc10 lib tomcat spdi tomcatspdi jar home tomcat apach tomcat apachetomcat c10 rc10 tomcat juli tomcatjuli jar home tomcat apach tomcat apachetomcat c10 rc10 bootstrap jar home tomcat apach tomcat apachetomcat c10 rc10 common daemon commonsdaemon jar home tomcat apach tomcat apachetomcat c10 rc10 webapp exampl web inf lib jstl jar home tomcat apach tomcat apachetomcat c10 rc10 webapp exampl web inf lib standard jar home java sourc head work jsp compil share web inf lib ant jar apach jasper jsp jspc home java sourc head work tomcat80 uriroot home java sourc head work jsp compil share home java sourc head work jsp compil share web inf jsp dialog qb ax dlg qbaxesdlg jsp home java sourc head work jsp compil share web inf jsp dialog qb manual gecod dlg qbmanualgecodingdlg jsp home java sourc head work jsp compil share web inf jsp fmtdlg jsp home java sourc head work jsp compil share web inf jsp index jsp home java sourc head work jsp compil share web inf jsp joindlg jsp home java sourc head work jsp compil share web inf jsp produc jsp home java sourc head work jsp compil share web inf jsp simplefilt jsp home java sourc head work jsp compil share web inf jsp selectvaluedlg jsp home java sourc head work jsp compil share web inf jsp binddow test view binddowstestview jsp home java sourc head work jsp compil share web inf jsp variableeditordlg jsp home java sourc head work jsp compil share web inf jsp filterprompteditor jsp home java sourc head work jsp compil share web inf jsp ajax respons jsp home java sourc head work jsp compil share web inf jsp fontdlg jsp home java sourc head work jsp compil share web inf jsp join field jsp home java sourc head work jsp compil share web inf jsp tree compon jsp home java sourc head work jsp compil share web inf jsp wait banner jsp home java sourc head work jsp compil share web inf jsp bid folderblock bid folder block init folderblockinit jsp home java sourc head work jsp compil share web inf jsp bid folderblock bid folder block boot folderblockboot jsp home java sourc head work jsp compil share web inf jsp bid bid empti content emptycont jsp home java sourc head work jsp compil share web inf jsp bid xml bid url properti urlproperti jsp home java sourc head work jsp compil share web inf jsp bid xml bid spath to href ibfspathtohref jsp home java sourc head work jsp compil share web inf jsp bid xml bid xmlrespons jsp home java sourc head work jsp compil share web inf jsp bid xml bid statu respons statusrespons jsp home java sourc head work jsp compil share web inf jsp bid favorit bid favorit tree jsp home java sourc head work jsp compil share web inf jsp bid favorit bid favorit block boot favoritesblockboot jsp home java sourc head work jsp compil share web inf jsp bid favorit bid favorit block init favoritesblockinit jsp home java sourc head work jsp compil share web inf jsp bid favorit bid favorit tree boot jsp home java sourc head work jsp compil share web inf jsp bid favorit bid list to listtoxml jsp home java sourc head work jsp compil share web inf jsp bid index jsp home java sourc head work jsp compil share web inf jsp bid view bid intern page internalpag jsp home java sourc head work jsp compil share web inf jsp bid view bid search tree searchtre boot jsp home java sourc head work jsp compil share web inf jsp bid view bid tree satre boot jsp home java sourc head work jsp compil share web inf jsp bid view bid bi frame bifram jsp home java sourc head work jsp compil share web inf jsp bid view bid init view initview jsp home java sourc head work jsp compil share web inf jsp bid view bid show toolbar showtoolbar jsp home java sourc head work jsp compil share web inf jsp bid view bid extern page externalpag jsp home java sourc head work jsp compil share web inf jsp bid view bid tree bi frame satreebifram jsp home java sourc head work jsp compil share web inf jsp bid view bid init bindow initbindow jsp home java sourc head work jsp compil share web inf jsp bid view bid search tree bi frame searchtreebifram jsp home java sourc head work jsp compil share web inf jsp bid recent bid recent tree boot jsp home java sourc head work jsp compil share web inf jsp bid recent bid recent tree jsp home java sourc head work jsp compil share web inf jsp bid recent bid list to listtoxml jsp home java sourc head work jsp compil share web inf jsp bid error jsp home java sourc head work jsp compil share web inf jsp bid group bid list to listtoxml jsp home java sourc head work jsp compil share web inf jsp bid search bid search list to searchlisttoxml jsp home java sourc head work jsp compil share web inf jsp bid search bid list to listtoxml jsp home java sourc head work jsp compil share web inf jsp bid tree bid mr properti to mrpropertiestoxml jsp home java sourc head work jsp compil share web inf jsp bid tree bid flat list to flatlisttoxml jsp home java sourc head work jsp compil share web inf jsp bid tree bid plain text plaintext jsp home java sourc head work jsp compil share web inf jsp bid tree bid list to listtoxml jsp except thread main java lang null pointer except nullpointerexcept apach jasper servlet jsp servlet context jspcservletcontext get resourc getresourc jsp servlet context jspcservletcontext java apach jasper compil tld cach tldcach get last modifi getlastmodifi tld cach tldcach java apach jasper compil tld cach tldcach init tld cach tldcach java apach jasper jsp jspc init servlet context initservletcontext jsp jspc java apach jasper jsp jspc execut jsp jspc java apach jasper jsp jspc main jsp jspc java","""java/org/apache/jasper/compiler/TldCache.java""","1","1","1","1","8","0","8","0","2","1","1","12","12","11","7","12","0","1","0","11","179","24","128","58","63","27","66","91","51","40","4","4","6","1","3","0","21","21","23","12","normal"
"55996","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55996 Ensure Async requests timeout correctly.","Bug 55996  Async context does not timeout with HTTP NIO connector","async context timeout http nio connector","","","""java/org/apache/tomcat/util/net/SocketWrapper.java""","1","1","1","1","2","0","2","0","1","0","0","43","43","43","21","43","0","0","0","43","176","11","123","75","87","42","93","141","74","67","2","2","2","1","1","0","44","44","44","43","critical"
"56010","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56010 Don't throw an IllegalArgumentException when JspFactory.getPageContext is used with JspWriter.DEFAULT_BUFFER Based on a patch by Eugene Chung. (markt)","Bug 56010  JspFactory.getPageContext with JspWriter.DEFAULT_BUFFER throws IllegalArgumentException","jsp factori jspfactori get page context getpagecontext jsp writer jspwriter default buffer throw illeg argument except illegalargumentexcept","","","""java/org/apache/jasper/runtime/PageContextImpl.java""","2","2","2","1","14","1","11","1","14","1","1","58","58","57","15","58","1","13","0","44","966","145","717","167","452","105","290","431","131","300","9","9","13","7","3","0","150","138","157","68","normal"
"56010","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56010 Don't throw an IllegalArgumentException when JspFactory.getPageContext is used with JspWriter.DEFAULT_BUFFER Based on a patch by Eugene Chung. (markt)","Bug 56010  JspFactory.getPageContext with JspWriter.DEFAULT_BUFFER throws IllegalArgumentException","jsp factori jspfactori get page context getpagecontext jsp writer jspwriter default buffer throw illeg argument except illegalargumentexcept","","","""test/org/apache/jasper/runtime/TestPageContextImpl.java""","1","1","1","1","19","6","13","1","1","0","0","1","1","1","0","1","0","0","0","1","53","13","24","17","11","17","18","20","15","5","1","1","1","1","0","1","1","1","1","1","normal"
"56010","1","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56010 Don't throw an IllegalArgumentException when JspFactory.getPageContext is used with JspWriter.DEFAULT_BUFFER Based on a patch by Eugene Chung. (markt)","Bug 56010  JspFactory.getPageContext with JspWriter.DEFAULT_BUFFER throws IllegalArgumentException","jsp factori jspfactori get page context getpagecontext jsp writer jspwriter default buffer throw illeg argument except illegalargumentexcept","","","""test/org/apache/jasper/runtime/TestPageContextImpl.java""","1","1","1","1","19","6","13","1","1","0","0","1","1","1","0","1","0","0","0","1","53","13","24","17","11","17","18","20","15","5","1","1","1","1","0","1","1","1","1","1","normal"
"56012","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56012 Imports from unnamed packages are now explicitly illegal","Bug 56012  wrong import statement generation while using the extends attribute of the page directive","wrong import statement gener use extend attribut page direct","","","""java/org/apache/jasper/compiler/PageInfo.java""","1","1","1","1","5","0","4","0","1","0","0","84","84","84","47","84","1","0","0","83","737","136","444","166","208","160","202","316","150","166","6","6","7","1","3","0","115","115","120","84","normal"
"56012","3","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56012 Imports from unnamed packages are now explicitly illegal","Bug 56012  wrong import statement generation while using the extends attribute of the page directive","wrong import statement gener use extend attribut page direct","","","""java/org/apache/jasper/compiler/Validator.java""","4","4","6","1","27","2","22","2","9","4","15","61","61","57","13","61","5","17","1","38","1945","234","1452","417","1030","268","585","884","294","590","44","44","60","6","8","0","294","294","407","94","normal"
"56025","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56025 Always call ServerEndpointConfig.Configurator.getNegotiatedSubprotocol() CReate the EndPoint instance after calling ServerEndpointConfig.Configurator.modifyHandshake()","Bug 56025  Order of invocation of method of ServerEndpointConfig.Configurator","order invoc method server endpoint config serverendpointconfig configur","","","""java/org/apache/tomcat/websocket/server/UpgradeUtil.java""","4","4","4","2","27","1","23","3","1","5","2","6","6","1","0","6","0","4","0","2","239","25","172","69","100","42","88","118","62","56","13","13","13","5","3","0","25","25","28","13","normal"
"56029","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56029 a regression in the fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=55198 Remove the code to skip whitespace from the 'simple'EL parser. It is far simpler to retain the whitespace than it is to teach this simple parser parser when to insert it. This also has the benefit that the EL should remain unchanged. A a number of test cases for BZ 56029","Bug 56029  Ternary operator doesn't work as expected inside attributes in jspx pages","ternari oper doesn work expect insid attribut jspx page","","","""java/org/apache/jasper/compiler/ELParser.java""","2","2","2","1","10","0","8","1","6","1","1","29","29","28","12","29","5","12","0","12","438","54","295","86","163","95","127","201","73","128","9","9","16","5","5","0","68","68","81","49","major"
"56029","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56029 a regression in the fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=55198 Remove the code to skip whitespace from the 'simple'EL parser. It is far simpler to retain the whitespace than it is to teach this simple parser parser when to insert it. This also has the benefit that the EL should remain unchanged. A a number of test cases for BZ 56029","Bug 56029  Ternary operator doesn't work as expected inside attributes in jspx pages","ternari oper doesn work expect insid attribut jspx page","","","""test/org/apache/jasper/compiler/TestELParser.java""","1","1","1","1","3","0","3","0","1","0","0","11","11","11","0","11","0","1","0","10","97","27","54","30","14","16","20","32","20","12","1","1","1","1","0","0","11","11","11","11","major"
"56029","0","Mark Emlyn David Thomas","Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56029 a regression in the fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=55198 Remove the code to skip whitespace from the 'simple'EL parser. It is far simpler to retain the whitespace than it is to teach this simple parser parser when to insert it. This also has the benefit that the EL should remain unchanged. A a number of test cases for BZ 56029","Bug 56029  Ternary operator doesn't work as expected inside attributes in jspx pages","ternari oper doesn work expect insid attribut jspx page","","","""test/org/apache/jasper/compiler/TestELParser.java""","1","1","1","1","3","0","3","0","1","0","0","11","11","11","0","11","0","1","0","10","97","27","54","30","14","16","20","32","20","12","1","1","1","1","0","0","11","11","11","11","major"
